{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"source/imgs/dogs.jpeg","path":"imgs/dogs.jpeg","modified":1,"renderable":0},{"_id":"source/images/00bf6b1d3993dfd678ac116ba75b5363f8901c01.png","path":"images/00bf6b1d3993dfd678ac116ba75b5363f8901c01.png","modified":1,"renderable":0},{"_id":"source/images/053eb65a3953e5e9eb2dda772a4dd0c702afd5ca.png","path":"images/053eb65a3953e5e9eb2dda772a4dd0c702afd5ca.png","modified":1,"renderable":0},{"_id":"source/images/0399299fb68cd20b1dbbf9bfc411a229dca7c1f6.png","path":"images/0399299fb68cd20b1dbbf9bfc411a229dca7c1f6.png","modified":1,"renderable":0},{"_id":"source/images/0403ba2fe2ab37e09f53f895ad6dc8bc4a0e4dfa.png","path":"images/0403ba2fe2ab37e09f53f895ad6dc8bc4a0e4dfa.png","modified":1,"renderable":0},{"_id":"source/images/05f25e6b5715fb1458d1c2bbe5ffb845e96ceb18.png","path":"images/05f25e6b5715fb1458d1c2bbe5ffb845e96ceb18.png","modified":1,"renderable":0},{"_id":"source/images/0cbcacd8ee62ee0c50d3c6934afa402cadda2481.png","path":"images/0cbcacd8ee62ee0c50d3c6934afa402cadda2481.png","modified":1,"renderable":0},{"_id":"source/images/0db520fdf28e05e081f24b9b3b7388315bfc7919.png","path":"images/0db520fdf28e05e081f24b9b3b7388315bfc7919.png","modified":1,"renderable":0},{"_id":"source/images/0f8310bececba0c2bb686514134da7b4a0bad7a7.png","path":"images/0f8310bececba0c2bb686514134da7b4a0bad7a7.png","modified":1,"renderable":0},{"_id":"source/images/10b196cf5c18a6e6c44bd8477d1dd4e74d91ab83.png","path":"images/10b196cf5c18a6e6c44bd8477d1dd4e74d91ab83.png","modified":1,"renderable":0},{"_id":"source/images/139e06d151e1f27f0fb900aba555fb73850c81ba.png","path":"images/139e06d151e1f27f0fb900aba555fb73850c81ba.png","modified":1,"renderable":0},{"_id":"source/images/15823f33dacbc6167202b406986639e89767154e.png","path":"images/15823f33dacbc6167202b406986639e89767154e.png","modified":1,"renderable":0},{"_id":"source/images/1a78cafe53c725fdc93ea404a23d18bed8b0314f.png","path":"images/1a78cafe53c725fdc93ea404a23d18bed8b0314f.png","modified":1,"renderable":0},{"_id":"source/images/1b1e89cdf915e9f65674687924ace1a5670a2bda.png","path":"images/1b1e89cdf915e9f65674687924ace1a5670a2bda.png","modified":1,"renderable":0},{"_id":"source/images/1e42d7af05dbfab89643e9268b13d7bac4df9527.png","path":"images/1e42d7af05dbfab89643e9268b13d7bac4df9527.png","modified":1,"renderable":0},{"_id":"source/images/1a334b7c374f4d28bfb35f39ed5a141b5711586f.png","path":"images/1a334b7c374f4d28bfb35f39ed5a141b5711586f.png","modified":1,"renderable":0},{"_id":"source/images/213d86fb49e1239668dee499bd5d7b236fe795e2.png","path":"images/213d86fb49e1239668dee499bd5d7b236fe795e2.png","modified":1,"renderable":0},{"_id":"source/images/269ef9d591e009f549a30de55cc43d48911d3e16.png","path":"images/269ef9d591e009f549a30de55cc43d48911d3e16.png","modified":1,"renderable":0},{"_id":"source/images/269fb55b94f8ff3b6acc916fc199adcd0c25174e.png","path":"images/269fb55b94f8ff3b6acc916fc199adcd0c25174e.png","modified":1,"renderable":0},{"_id":"source/images/30b7afcaa4ce763e3adf2f3593ffc7f1c6a6ef54.png","path":"images/30b7afcaa4ce763e3adf2f3593ffc7f1c6a6ef54.png","modified":1,"renderable":0},{"_id":"source/images/3371c6ffcb23f98193287d1b34618622f4c3c3cd.png","path":"images/3371c6ffcb23f98193287d1b34618622f4c3c3cd.png","modified":1,"renderable":0},{"_id":"source/images/349241e4425a5abf17e3ceb1e21715854fa139a7.png","path":"images/349241e4425a5abf17e3ceb1e21715854fa139a7.png","modified":1,"renderable":0},{"_id":"source/images/36c66f727541f20bfd022c1a05f1d3b74cbf2878.png","path":"images/36c66f727541f20bfd022c1a05f1d3b74cbf2878.png","modified":1,"renderable":0},{"_id":"source/images/23e4df4bf1de153009fd961cdc0f186257e092b8.png","path":"images/23e4df4bf1de153009fd961cdc0f186257e092b8.png","modified":1,"renderable":0},{"_id":"source/images/38f1861cf25f0abe9326ad9a519a9370c1dcc052.png","path":"images/38f1861cf25f0abe9326ad9a519a9370c1dcc052.png","modified":1,"renderable":0},{"_id":"source/images/3b742078e00bf2073e3c65d3280887bbec1c8c2c.png","path":"images/3b742078e00bf2073e3c65d3280887bbec1c8c2c.png","modified":1,"renderable":0},{"_id":"source/images/3b96f630db47c6ec3754a044bc68389345e79256.png","path":"images/3b96f630db47c6ec3754a044bc68389345e79256.png","modified":1,"renderable":0},{"_id":"source/images/3e468fe601bb6c15b0ac6f549c0c5e45c728f9d1.png","path":"images/3e468fe601bb6c15b0ac6f549c0c5e45c728f9d1.png","modified":1,"renderable":0},{"_id":"source/images/46300e066e18a1a004cc63138f21c3566c1d387e.png","path":"images/46300e066e18a1a004cc63138f21c3566c1d387e.png","modified":1,"renderable":0},{"_id":"source/images/4cd5f804d2c895b49a888d419c0ed3b12d63e9d3.png","path":"images/4cd5f804d2c895b49a888d419c0ed3b12d63e9d3.png","modified":1,"renderable":0},{"_id":"source/images/4d95b6706a50af37ec806510797acd8f699f7975.png","path":"images/4d95b6706a50af37ec806510797acd8f699f7975.png","modified":1,"renderable":0},{"_id":"source/images/453e9f4901e5f1de0ae927c3d173d1e69018a583.png","path":"images/453e9f4901e5f1de0ae927c3d173d1e69018a583.png","modified":1,"renderable":0},{"_id":"source/images/477f24a0d47507502f0dfc97355a94d92f735509.png","path":"images/477f24a0d47507502f0dfc97355a94d92f735509.png","modified":1,"renderable":0},{"_id":"source/images/4e3a669077936ea7c6f19d682c3362be9fc1c270.png","path":"images/4e3a669077936ea7c6f19d682c3362be9fc1c270.png","modified":1,"renderable":0},{"_id":"source/images/504720d95877e593475c0b3d02c7e75051c00b0f.png","path":"images/504720d95877e593475c0b3d02c7e75051c00b0f.png","modified":1,"renderable":0},{"_id":"source/images/5186498fb8857ba5ca38d34ef50de27ef1c051e1.png","path":"images/5186498fb8857ba5ca38d34ef50de27ef1c051e1.png","modified":1,"renderable":0},{"_id":"source/images/62cb674b47a91d578bc8bbdb3ed19fdd29b38215.png","path":"images/62cb674b47a91d578bc8bbdb3ed19fdd29b38215.png","modified":1,"renderable":0},{"_id":"source/images/5ebb3bddccb1817a247ec3c30ce88189c5d988cb.png","path":"images/5ebb3bddccb1817a247ec3c30ce88189c5d988cb.png","modified":1,"renderable":0},{"_id":"source/images/6a5e676a58d9059a7a290844beba2e1558f7c0f4.png","path":"images/6a5e676a58d9059a7a290844beba2e1558f7c0f4.png","modified":1,"renderable":0},{"_id":"source/images/5b1c609a541b798d24b884ee0feeed63fb43f394.png","path":"images/5b1c609a541b798d24b884ee0feeed63fb43f394.png","modified":1,"renderable":0},{"_id":"source/images/6aa176a56ce7d5a5af1d22a91e141759c7938da6.png","path":"images/6aa176a56ce7d5a5af1d22a91e141759c7938da6.png","modified":1,"renderable":0},{"_id":"source/images/6ada637a949cf249034ab68f78aed795e61af20b.png","path":"images/6ada637a949cf249034ab68f78aed795e61af20b.png","modified":1,"renderable":0},{"_id":"source/images/7ec6d7fbaa4df7de5b8b75be102dd3ac5cddce65.png","path":"images/7ec6d7fbaa4df7de5b8b75be102dd3ac5cddce65.png","modified":1,"renderable":0},{"_id":"source/images/7e75b5d82750938cf1c4f52908c1a4c3ecdc8095.png","path":"images/7e75b5d82750938cf1c4f52908c1a4c3ecdc8095.png","modified":1,"renderable":0},{"_id":"source/images/7faedcf60c808cf866cebddf14a848839eefd236.png","path":"images/7faedcf60c808cf866cebddf14a848839eefd236.png","modified":1,"renderable":0},{"_id":"source/images/805829d033d591a573e71569f090a2526b87d8a0.png","path":"images/805829d033d591a573e71569f090a2526b87d8a0.png","modified":1,"renderable":0},{"_id":"source/images/669a223d6301c41c7126901f2021f723aedc572c.png","path":"images/669a223d6301c41c7126901f2021f723aedc572c.png","modified":1,"renderable":0},{"_id":"source/images/86992fa08b32b69f2d7deb9c16c686410a529d29.png","path":"images/86992fa08b32b69f2d7deb9c16c686410a529d29.png","modified":1,"renderable":0},{"_id":"source/images/82c4ab39614782bc5135a55d4e7a0902749b4453.png","path":"images/82c4ab39614782bc5135a55d4e7a0902749b4453.png","modified":1,"renderable":0},{"_id":"source/images/87719b28415cdcff43416487c2813d47375a6961.png","path":"images/87719b28415cdcff43416487c2813d47375a6961.png","modified":1,"renderable":0},{"_id":"source/images/8a55323c68ecb1797e67f3018b72feb6780e3def.png","path":"images/8a55323c68ecb1797e67f3018b72feb6780e3def.png","modified":1,"renderable":0},{"_id":"source/images/89a5f9a57f7aed021e92b954d81513f8deadb968.png","path":"images/89a5f9a57f7aed021e92b954d81513f8deadb968.png","modified":1,"renderable":0},{"_id":"source/images/96ae3924006f3a11007207d031717463b3bbac6c.png","path":"images/96ae3924006f3a11007207d031717463b3bbac6c.png","modified":1,"renderable":0},{"_id":"source/images/990e8dc15dfc3d4fbf6b0bc347ce50c486580b24.png","path":"images/990e8dc15dfc3d4fbf6b0bc347ce50c486580b24.png","modified":1,"renderable":0},{"_id":"source/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png","path":"images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png","modified":1,"renderable":0},{"_id":"source/images/95d48e89e235281019c6eb4b57a463db03073dbf.png","path":"images/95d48e89e235281019c6eb4b57a463db03073dbf.png","modified":1,"renderable":0},{"_id":"source/images/a1eca7b2a04b83f569459e5be19e5e1d501ba561.png","path":"images/a1eca7b2a04b83f569459e5be19e5e1d501ba561.png","modified":1,"renderable":0},{"_id":"source/images/a4d3fdf4957cef7cf3bb12e7f8e8ac0c7f620df3.png","path":"images/a4d3fdf4957cef7cf3bb12e7f8e8ac0c7f620df3.png","modified":1,"renderable":0},{"_id":"source/images/9b67738bd58cd4fa3d5bc257d0377735e0b99d1c.png","path":"images/9b67738bd58cd4fa3d5bc257d0377735e0b99d1c.png","modified":1,"renderable":0},{"_id":"source/images/aac3f753a34df8ae438f91a2690e018619dd7bc6.png","path":"images/aac3f753a34df8ae438f91a2690e018619dd7bc6.png","modified":1,"renderable":0},{"_id":"source/images/ab245dbb3a70ff7671109b47f39a1375aa896e67.png","path":"images/ab245dbb3a70ff7671109b47f39a1375aa896e67.png","modified":1,"renderable":0},{"_id":"source/images/ae8f5996d6e1fe577c7e470beabadaa8a55d337f.png","path":"images/ae8f5996d6e1fe577c7e470beabadaa8a55d337f.png","modified":1,"renderable":0},{"_id":"source/images/b0296588d434292d0fe14f9101f52ef821c3d917.pdf","path":"images/b0296588d434292d0fe14f9101f52ef821c3d917.pdf","modified":1,"renderable":0},{"_id":"source/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf","path":"images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf","modified":1,"renderable":0},{"_id":"source/images/b32c68fa9d60da210505be648152958708936b6a.png","path":"images/b32c68fa9d60da210505be648152958708936b6a.png","modified":1,"renderable":0},{"_id":"source/images/b4ce19e68228c0f00f158e92e801a4e8f8718236.png","path":"images/b4ce19e68228c0f00f158e92e801a4e8f8718236.png","modified":1,"renderable":0},{"_id":"source/images/b517688cf5875de82bd1deea8f8764bff7b90ed9.png","path":"images/b517688cf5875de82bd1deea8f8764bff7b90ed9.png","modified":1,"renderable":0},{"_id":"source/images/b906e21a8f259249f0402645da7d4d16eb91a6af.png","path":"images/b906e21a8f259249f0402645da7d4d16eb91a6af.png","modified":1,"renderable":0},{"_id":"source/images/ba590021c2ca65431ff473391333a0f61f54c540.png","path":"images/ba590021c2ca65431ff473391333a0f61f54c540.png","modified":1,"renderable":0},{"_id":"source/images/bfccfee6cba1e46a6031d9c7c2b70da97c13423c.png","path":"images/bfccfee6cba1e46a6031d9c7c2b70da97c13423c.png","modified":1,"renderable":0},{"_id":"source/images/c2b8606da24eb985ade582c3a0f605aa078d0a39.png","path":"images/c2b8606da24eb985ade582c3a0f605aa078d0a39.png","modified":1,"renderable":0},{"_id":"source/images/c4b0621e622948b0f276c177681fc93042e22fba.png","path":"images/c4b0621e622948b0f276c177681fc93042e22fba.png","modified":1,"renderable":0},{"_id":"source/images/c5475754c914e4fc8616218ea075f6aed92d8bc7.png","path":"images/c5475754c914e4fc8616218ea075f6aed92d8bc7.png","modified":1,"renderable":0},{"_id":"source/images/ca4acb61c008141a83bf4db021354d1b42850cb2.png","path":"images/ca4acb61c008141a83bf4db021354d1b42850cb2.png","modified":1,"renderable":0},{"_id":"source/images/cfcdf117dd1192b8c7003cb0b2a3bd30e97803fc.png","path":"images/cfcdf117dd1192b8c7003cb0b2a3bd30e97803fc.png","modified":1,"renderable":0},{"_id":"source/images/d6ebb2c8e78f3eebee2ccf56cbe0bb36e15b7ec0.png","path":"images/d6ebb2c8e78f3eebee2ccf56cbe0bb36e15b7ec0.png","modified":1,"renderable":0},{"_id":"source/images/d959af017055f0c9d66531ee5e22e402b329b6c0.png","path":"images/d959af017055f0c9d66531ee5e22e402b329b6c0.png","modified":1,"renderable":0},{"_id":"source/images/db90a8315faa1528cf9847b300e3d9d4b25c54de.png","path":"images/db90a8315faa1528cf9847b300e3d9d4b25c54de.png","modified":1,"renderable":0},{"_id":"source/images/e03e984c489d88c178be758aee9b839174c1ba5b.png","path":"images/e03e984c489d88c178be758aee9b839174c1ba5b.png","modified":1,"renderable":0},{"_id":"source/images/e058a82acde3fe0d917cc172375c1838b5fa959e.png","path":"images/e058a82acde3fe0d917cc172375c1838b5fa959e.png","modified":1,"renderable":0},{"_id":"source/images/e15f4946f025f21858959bec16073b32077dbd31.png","path":"images/e15f4946f025f21858959bec16073b32077dbd31.png","modified":1,"renderable":0},{"_id":"source/images/e1d44b6b049414f1bbf361e9e7305106b10ec44a.png","path":"images/e1d44b6b049414f1bbf361e9e7305106b10ec44a.png","modified":1,"renderable":0},{"_id":"source/images/e27c6193118af9b3adffe8d3dc176ab6935175b3.png","path":"images/e27c6193118af9b3adffe8d3dc176ab6935175b3.png","modified":1,"renderable":0},{"_id":"source/images/e3a16065aae77a1bf18a9c7d0b133f7de9cb852e.png","path":"images/e3a16065aae77a1bf18a9c7d0b133f7de9cb852e.png","modified":1,"renderable":0},{"_id":"source/images/e3a7ff82fce93e8f5235dbcac4bd167d537bb558.png","path":"images/e3a7ff82fce93e8f5235dbcac4bd167d537bb558.png","modified":1,"renderable":0},{"_id":"source/images/e47a64994b7f6ef50b68a861f2b9a64078d41f30.png","path":"images/e47a64994b7f6ef50b68a861f2b9a64078d41f30.png","modified":1,"renderable":0},{"_id":"source/images/e4c4ab79e883880c71761e195ce99f95079141a6.png","path":"images/e4c4ab79e883880c71761e195ce99f95079141a6.png","modified":1,"renderable":0},{"_id":"source/images/e68f82882020d7d891a80e98459c280c481572a9.png","path":"images/e68f82882020d7d891a80e98459c280c481572a9.png","modified":1,"renderable":0},{"_id":"source/images/e76b20dd798e99c8d45eaef34bfbf9ad3f0e5de5.png","path":"images/e76b20dd798e99c8d45eaef34bfbf9ad3f0e5de5.png","modified":1,"renderable":0},{"_id":"source/images/e779b3094a0f30317b99da6f3c52741ec9ebcb9d.png","path":"images/e779b3094a0f30317b99da6f3c52741ec9ebcb9d.png","modified":1,"renderable":0},{"_id":"source/images/e796e8b06ad07e98f1d6db479bd4cdd35f66acb8.png","path":"images/e796e8b06ad07e98f1d6db479bd4cdd35f66acb8.png","modified":1,"renderable":0},{"_id":"source/images/e8780ed3dc89ed8fd4b96fbe5931aff56d2bb1ff.png","path":"images/e8780ed3dc89ed8fd4b96fbe5931aff56d2bb1ff.png","modified":1,"renderable":0},{"_id":"source/images/ecb7c0fed195365ef31c17fb5f0cf2deb9423e79.png","path":"images/ecb7c0fed195365ef31c17fb5f0cf2deb9423e79.png","modified":1,"renderable":0},{"_id":"source/images/f12174928d8727aa5c8a99d5dd184b921ec7593a.pdf","path":"images/f12174928d8727aa5c8a99d5dd184b921ec7593a.pdf","modified":1,"renderable":0},{"_id":"source/images/f19caf1299d1db71e9fe3c7589d16c801050ac6b.png","path":"images/f19caf1299d1db71e9fe3c7589d16c801050ac6b.png","modified":1,"renderable":0},{"_id":"source/images/f5ebef5abe60bb2772d33dee08181a8149cb9fde.png","path":"images/f5ebef5abe60bb2772d33dee08181a8149cb9fde.png","modified":1,"renderable":0},{"_id":"source/images/f6df3690fe8dcff8aaa65aaebfe30a859049fafb.png","path":"images/f6df3690fe8dcff8aaa65aaebfe30a859049fafb.png","modified":1,"renderable":0},{"_id":"source/images/f8f413892356a5dff1d989153e2fd65a0d4a92f0.png","path":"images/f8f413892356a5dff1d989153e2fd65a0d4a92f0.png","modified":1,"renderable":0},{"_id":"source/images/ff9b6413ac39b2772ebd08fce73ccb7fb34fb335.png","path":"images/ff9b6413ac39b2772ebd08fce73ccb7fb34fb335.png","modified":1,"renderable":0}],"Cache":[{"_id":"source/categories/index.md","hash":"f2afc2511afcd2d4d50511d73e367c3f29431a1f","modified":1672894497533},{"_id":"source/imgs/dogs.jpeg","hash":"0f13026399518d1646996cb18b363ce8d767ee48","modified":1672894497505},{"_id":"source/_posts/(2022)贵州大学商业数据分析课程看板.md","hash":"a67157bd83e4f649f9ecf79ddc2875516571ef08","modified":1672894498093},{"_id":"source/_posts/02---商业数据分析中四大问题入门.md","hash":"449d55658b52d5ea4a78cb8dcab2b2f1315dae74","modified":1672894498095},{"_id":"source/_posts/01---商业数据分析中常见的技术.md","hash":"43adb83bf6c9a4f36f6daa480f2cb894f7085b53","modified":1672894498095},{"_id":"source/_posts/01-商学院-答辩要求.md","hash":"ade163a646ec684824bb9eed3b6b9346761836da","modified":1672894498018},{"_id":"source/_posts/02--商学院-课程材料.md","hash":"3599ee8969d771d6bf387073df887a5e997b5790","modified":1672894498025},{"_id":"source/_posts/03-线性回归原理分析及实现.md","hash":"4bce0772c64a912a4c234bbd65cca66d6bf325e7","modified":1672894498094},{"_id":"source/_posts/03-课程内容安排.md","hash":"0ec8cbb85848e279914c87a114034debe644f6ed","modified":1672894498064},{"_id":"source/_posts/04-手机品牌识别之神经网络.md","hash":"a2bf4b448de9f1572ad5ce616d0ea0c4d3baa245","modified":1672894498067},{"_id":"source/_posts/04-机器学习模型理解.md","hash":"5b1ee196a95140ad0b93a3ec325953bcd2c8180f","modified":1672894498097},{"_id":"source/_posts/04-课程内容安排.md","hash":"ee78ec302b57b81b1f9fc2d9af05bcb70dbff6a5","modified":1672894498060},{"_id":"source/_posts/1.1-网站到底是什么？.md","hash":"b5efa95b983accd9c5671ec3256cafd86dcf751a","modified":1672894498020},{"_id":"source/_posts/1.1-获取互联网上的内容.md","hash":"2fb86ce488bdfda8e8467fcfff3bc2d8ccc1abfd","modified":1672894498032},{"_id":"source/_posts/1.2-HTML是什么？.md","hash":"ebec01e819a1bc790cc5ba3aa63bcb287ee86e77","modified":1672894498043},{"_id":"source/_posts/1.2-解析内容并保存数据库.md","hash":"654483c7c6e25a02129c8338ac3cd33cb4e9e862","modified":1672894498034},{"_id":"source/_posts/1.4-HTML属性的概念和使用.md","hash":"408caa55aa5b078870c8f06b74e6ba37df0ac9a9","modified":1672894498013},{"_id":"source/_posts/1.3-HTML标签的语法格式.md","hash":"a06ce1ca295d8f7c30b8a52863a9f14da38cbb91","modified":1672894498014},{"_id":"source/_posts/1.5-HTML超链接标签.md","hash":"b794733f824a75fce883cacc05c4cddc0881bb71","modified":1672894498027},{"_id":"source/_posts/1.4-仿造登录态.md","hash":"81fe7d92e0a3f11fe1de3ca58e15cbdcb3250964","modified":1672894498047},{"_id":"source/_posts/1.6-HTML样式CSS.md","hash":"65c6df7de177ffdbae53e4d91090750f1993bcd2","modified":1672894498006},{"_id":"source/_posts/2022-11-26-实验结果.md","hash":"4a96a42b22b63105f64ce07396e2534e18659fde","modified":1672894498307},{"_id":"source/_posts/2022-12-17-实验设计.md","hash":"9727cfacb0160d6baa4d4e5ff046b9bc6a4084e4","modified":1672894498511},{"_id":"source/_posts/2022-11-25-实验结果.md","hash":"d703a3dc2b01dc7780c6bafa170cc3a172a3dd86","modified":1672894498757},{"_id":"source/_posts/2022-第49周.md","hash":"ff554a928626809301eb2944aa92618fa68b2645","modified":1672894498349},{"_id":"source/_posts/2023-01-02-AIOps-的29个KPI在-COCA-模型上的性能分析.md","hash":"6aa69f1ff2cc126a9e905df05028825b7b87f74f","modified":1672894499033},{"_id":"source/_posts/COCA源码分析.md","hash":"624058e2024a891594d007e75136b0a4de2414a7","modified":1672894499339},{"_id":"source/_posts/2022-第50周.md","hash":"9cd9252cd8a689cbb0bed95dc708ff7b953d1df0","modified":1672894499319},{"_id":"source/_posts/3.1--可视化分析入门.md","hash":"5485753c454c6f18a0866f20c2c58f70d2e316be","modified":1672894498045},{"_id":"source/_posts/D1---实战1-理解HTML与CSS.md","hash":"426cc3276785de1c23c1bf1cef0fca3796126961","modified":1672894498024},{"_id":"source/_posts/D2--2.1-ETL入门-相关概念.md","hash":"396353ef9b62a600a5d3960253ccfdcb8df40aa2","modified":1672894498004},{"_id":"source/_posts/D1---实战3-八爪鱼爬取数据.md","hash":"6f338ead6316631e9f9fd1c41a0031a5a1b79670","modified":1672894498048},{"_id":"source/_posts/D1---实战2-Python-编码实现取网站数据并存储到数据库.md","hash":"1a87d52ea7b25511d142183693f5bb253a8704bc","modified":1672894498037},{"_id":"source/_posts/D1---1.0-HTML-基础.md","hash":"c74f0b4b8df005f00cf4bec7ce149cb53d64df00","modified":1672894498016},{"_id":"source/_posts/2022-12-30-实验结果.md","hash":"b777494a0ebdfab7082791e8a0bbbcd68676c490","modified":1672894498651},{"_id":"source/_posts/D2--2.2-UDI-深入---UDI的基本功能及组件说明.md","hash":"faec71da21181ef3ccbcc50179d7b9c929244404","modified":1672894498045},{"_id":"source/_posts/D3--3.2-综合实战--7000-条租房数据处理与分析大屏.md","hash":"bbe3085b2f23bb28fb7fe2beecb6dcf63cab1860","modified":1672894498002},{"_id":"source/_posts/D3--3.3-VA深入-20+数据图标介绍及使用.md","hash":"c16d0c8e37eac0bdceea87a918449ec383a566a3","modified":1672894498028},{"_id":"source/_posts/D4--综合项目---6000-条倒闭企业处理与分析大屏.md","hash":"b29a84e81023c3a77c420cb2ddc1de1897e24746","modified":1672894498009},{"_id":"source/_posts/D5--大数据分析相关资料分享.md","hash":"75e53192e310cbfb63879c787a0661eccca011fd","modified":1672894498053},{"_id":"source/_posts/D3--3.1-可视化入门-相关概念.md","hash":"e98dec41b4223d1468435b1f348bf4ea39e31c06","modified":1672894498050},{"_id":"source/_posts/D2--实战4---UDI-HelloWorld-之-UDI-抽取、转换和加载-OLTP-数据.md","hash":"d69135d658214f04f9fa39c69db0ee920f1df92b","modified":1672894498036},{"_id":"source/_posts/D6-服务器流数据离线与实时处理分析.md","hash":"1defd5178329affcfb9d81f4b11f624215661e7a","modified":1672894498017},{"_id":"source/_posts/D7-图书馆大数据分析与三层数据仓库.md","hash":"ff659a483b44f422af945a3ac746bfb4dadebea0","modified":1672894498000},{"_id":"source/_posts/D5--综合项目---COVID-19-疫情数据处理与分析-数据仓库.md","hash":"e140b8db027b2a28d1ae168000b94412c98d6a8f","modified":1672894498022},{"_id":"source/_posts/ODDS-数据集划分标准及常见问题.md","hash":"52724e3bd2dff7fae84f2ef3d96bebdc3780a512","modified":1672894498559},{"_id":"source/_posts/IsolationForest-实现.md","hash":"25ba6d4f66d08e1757929b92081d739dd77c97f9","modified":1672894498694},{"_id":"source/_posts/Merlion-源码分析.md","hash":"badd0b4320a89c02b9fe14e2f40388f90708319f","modified":1672894498125},{"_id":"source/_posts/python-tqdm.md","hash":"da0824bf601ef46f5b0a0cec7c9afdb84fb870b3","modified":1672894499173},{"_id":"source/_posts/linux-zip-压缩.md","hash":"a5265fe69b6f6a8f166fb1b580ee269e3c1d6a5e","modified":1672894499223},{"_id":"source/_posts/python设计模式.md","hash":"8fecfc8363ef4f8e958e4283af4f2848fa5c1b81","modified":1672894499186},{"_id":"source/_posts/DM-功能建议.md","hash":"2c6a7226b45c7e8230d521b6d675c4bceb21416e","modified":1672894498069},{"_id":"source/_posts/vscode手册.md","hash":"51077eaf97648cee14901e1f54f7f90ec8f49ced","modified":1672894498146},{"_id":"source/_posts/实战5---6000-条倒闭企业处理与分析大屏.md","hash":"91a5ef9f6922cb0a0485c77a625913f3176d8073","modified":1672894498030},{"_id":"source/_posts/实战5---VA-HelloWorld--之可视化图表的制作.md","hash":"e7af98ba49482f616e5cdb6752261a7ffbdc77ad","modified":1672894498041},{"_id":"source/_posts/awk-手册.md","hash":"20c0162b6b0e17e0c57d6d8a201f4df45b942ca5","modified":1672894498943},{"_id":"source/_posts/商业数据分析-01-大纲.md","hash":"c906083438e20d1c47fdb0e96daecc28e5821fe9","modified":1672894498055},{"_id":"source/_posts/学习时间总结.md","hash":"a6aa1e7166e47be77f2692d574839c6d46792e20","modified":1672894498808},{"_id":"source/_posts/实战5---VA-HelloWorld--之的制作.md","hash":"cf6218a7b456fcc1f8a9b2fd35b6df17d20bad59","modified":1672894498011},{"_id":"source/_posts/文档提交审核流程,自查流程.md","hash":"a5c91ed0418ca7ae55b46254f172bcf3901fa120","modified":1672894499428},{"_id":"source/_posts/数智教育-数据可视化创新大赛-数据分析.md","hash":"5b53bd60a4f76af38b48024678086bd0e75b030c","modified":1672894498095},{"_id":"source/_posts/实验列表.md","hash":"bc3ec478d4dc1aef326f09ed03a268f6cd535733","modified":1672894499083},{"_id":"source/_posts/时间序列(源于coca)中的-time-step.md","hash":"4af6b205a7734c557d681f1f8740a623246b36ff","modified":1672894498650},{"_id":"source/_posts/模型超参数.md","hash":"3b7ed17633504a10269a4a5e02ecf4fefed55bf2","modified":1672894498989},{"_id":"source/_posts/我的任务.md","hash":"c8f1219e91bd7478efd8f91d6030abe1852530df","modified":1672894498213},{"_id":"source/_posts/相关资料.md","hash":"063a52f835dd6485f8a30cfd2ecfddaea4904a11","modified":1672894498065},{"_id":"source/_posts/答辩可能问题列表.md","hash":"822dd6daa4261b07fb7bf605415492cbc85f7099","modified":1672894498094},{"_id":"source/_posts/正则表达式.md","hash":"25458749c7bc856a4616a44af4c97fb882b5459e","modified":1672894498516},{"_id":"source/tags/index.md","hash":"8fd5b6e8c9f2325b142e772e37e7e89281b600e0","modified":1672894497537},{"_id":"source/_posts/测试MD.md","hash":"623f2fafbc7b3b23b9d2d07eda70b51dc77087c3","modified":1672894498130},{"_id":"source/_posts/跟读联系中咬字不清的地方.md","hash":"f1bd2305ac4cd3c6e018d7f6f6faf06df6f3ac73","modified":1672894499566},{"_id":"source/images/0403ba2fe2ab37e09f53f895ad6dc8bc4a0e4dfa.png","hash":"8fa6c63b9b371ca5563b8601ed3091142aed9b84","modified":1672893807351},{"_id":"source/images/139e06d151e1f27f0fb900aba555fb73850c81ba.png","hash":"2dca40780aa0caadbaab708298d49ecd748305c3","modified":1672893807712},{"_id":"source/images/1a334b7c374f4d28bfb35f39ed5a141b5711586f.png","hash":"797c3d42291c2974142830e06cebec63544fddd9","modified":1672893807394},{"_id":"source/images/30b7afcaa4ce763e3adf2f3593ffc7f1c6a6ef54.png","hash":"39bbb7479a82e3a9a7283980b2505500c13fe8d4","modified":1672893807201},{"_id":"source/images/3371c6ffcb23f98193287d1b34618622f4c3c3cd.png","hash":"840f8389b633f34df5b3ee2946dca9a110a423f1","modified":1672893807348},{"_id":"source/images/36c66f727541f20bfd022c1a05f1d3b74cbf2878.png","hash":"f4195b108175498036c750e3663504ba61d89b50","modified":1672893807410},{"_id":"source/images/3b96f630db47c6ec3754a044bc68389345e79256.png","hash":"e4a023a9f8ee70b66e1ec96e4b52142d3af5f5ca","modified":1672893807712},{"_id":"source/images/3b742078e00bf2073e3c65d3280887bbec1c8c2c.png","hash":"2b6a6415dc7079342735d19b1e21a8c8741a6886","modified":1672893807349},{"_id":"source/images/4cd5f804d2c895b49a888d419c0ed3b12d63e9d3.png","hash":"372b9c91916aad3feef9a5964100644bacbfb581","modified":1672893807284},{"_id":"source/images/3e468fe601bb6c15b0ac6f549c0c5e45c728f9d1.png","hash":"455cc32e85a566204c87f3493fc111565f082fcf","modified":1672893807361},{"_id":"source/images/4d95b6706a50af37ec806510797acd8f699f7975.png","hash":"79565e1ca480d8bec97b039a2619878dc91e8927","modified":1672893807359},{"_id":"source/images/5186498fb8857ba5ca38d34ef50de27ef1c051e1.png","hash":"630f0510b86036599de73b8fbc6458bcec1816b4","modified":1672893807350},{"_id":"source/images/62cb674b47a91d578bc8bbdb3ed19fdd29b38215.png","hash":"fbde9406845663674af4b8f345852818376fc209","modified":1672893807282},{"_id":"source/images/6ada637a949cf249034ab68f78aed795e61af20b.png","hash":"29b92286c8cca4d22616907d2c3faef7f48a4efe","modified":1672893807391},{"_id":"source/images/89a5f9a57f7aed021e92b954d81513f8deadb968.png","hash":"03fc766a6391c00278685a0c92e1714e8f1d2166","modified":1672893807281},{"_id":"source/images/87719b28415cdcff43416487c2813d47375a6961.png","hash":"759d27eb0c9eba2c417b40e3e08f6dab36521f53","modified":1672893807393},{"_id":"source/images/8a55323c68ecb1797e67f3018b72feb6780e3def.png","hash":"d2d1b370def955fd83257738f7adf46d42ab6ef2","modified":1672893807383},{"_id":"source/images/990e8dc15dfc3d4fbf6b0bc347ce50c486580b24.png","hash":"ef10743cacfa600e1583e5d32e8b616118b5b587","modified":1672893807361},{"_id":"source/images/b32c68fa9d60da210505be648152958708936b6a.png","hash":"c6a5ab005ece586f41b5e101e0bdcdac8f361241","modified":1672893807200},{"_id":"source/images/b4ce19e68228c0f00f158e92e801a4e8f8718236.png","hash":"ffd3e2580dad5b8705500e670c48905205578ace","modified":1672893807395},{"_id":"source/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf","hash":"92964cf4eba892485439b9760be336bc77d273c8","modified":1672893807362},{"_id":"source/images/ba590021c2ca65431ff473391333a0f61f54c540.png","hash":"d6beabaeac6b087bee3a72742797067fd7ddd623","modified":1672893807283},{"_id":"source/images/ca4acb61c008141a83bf4db021354d1b42850cb2.png","hash":"68675d50b9a5767314ff39f6c337a4d986fb6a9f","modified":1672893807202},{"_id":"source/images/e03e984c489d88c178be758aee9b839174c1ba5b.png","hash":"16d21524da1049f8c1e1080d94967c6fe29f0283","modified":1672893807386},{"_id":"source/images/e27c6193118af9b3adffe8d3dc176ab6935175b3.png","hash":"8b398d650d4e6ace0d23653efb7aed3d0c31e85f","modified":1672893807286},{"_id":"source/images/f5ebef5abe60bb2772d33dee08181a8149cb9fde.png","hash":"0a237e9f2c67ef162a42bfbebcd6dc1b1f62a38b","modified":1672893807391},{"_id":"source/images/f19caf1299d1db71e9fe3c7589d16c801050ac6b.png","hash":"efd337dcc67c5fab04cabd4d13568947ff96a0ab","modified":1672893807396},{"_id":"source/images/05f25e6b5715fb1458d1c2bbe5ffb845e96ceb18.png","hash":"2132e9a076e2ddc6b3a95cfb42affe878042d2a3","modified":1672893807190},{"_id":"source/images/0db520fdf28e05e081f24b9b3b7388315bfc7919.png","hash":"be1a4aa817d48cb897eed9d18fba90f6e16a513e","modified":1672893807201},{"_id":"source/images/1b1e89cdf915e9f65674687924ace1a5670a2bda.png","hash":"2969e0259d4984dd111e602f8919d18215507d63","modified":1672893807238},{"_id":"source/images/349241e4425a5abf17e3ceb1e21715854fa139a7.png","hash":"2e45d3bca637a8aef6a5df74190d721374e8d794","modified":1672893807410},{"_id":"source/images/38f1861cf25f0abe9326ad9a519a9370c1dcc052.png","hash":"360b2c2e33d22a918df462bd45670dc76b7d1f0f","modified":1672893807708},{"_id":"source/images/453e9f4901e5f1de0ae927c3d173d1e69018a583.png","hash":"9cfeb471a79f902b3afa0d18f54ef2764753db91","modified":1672893807216},{"_id":"source/images/477f24a0d47507502f0dfc97355a94d92f735509.png","hash":"c88031e52a95ad366d492ed470f1fa336be5315e","modified":1672893807390},{"_id":"source/images/5ebb3bddccb1817a247ec3c30ce88189c5d988cb.png","hash":"9e869682c2f08e1b1e4ec52d4109a8c96e8e6d77","modified":1672893807195},{"_id":"source/images/805829d033d591a573e71569f090a2526b87d8a0.png","hash":"3455e885b636e0c00f8deceb307eaa8e64187664","modified":1672893807282},{"_id":"source/images/86992fa08b32b69f2d7deb9c16c686410a529d29.png","hash":"1263dc85bd390222e4633aec1d6108c2fb480c56","modified":1672893807394},{"_id":"source/images/ab245dbb3a70ff7671109b47f39a1375aa896e67.png","hash":"c46bf0c4f0892d0588a873e21a5a8c5b84f33a1d","modified":1672893807383},{"_id":"source/images/b0296588d434292d0fe14f9101f52ef821c3d917.pdf","hash":"cf5d6689f41fa3b72ac1efcb0297c0670eeeea57","modified":1672893808069},{"_id":"source/images/ae8f5996d6e1fe577c7e470beabadaa8a55d337f.png","hash":"ac77198f9bd8765e8197408332cdbf0c63a325c7","modified":1672893807210},{"_id":"source/images/c4b0621e622948b0f276c177681fc93042e22fba.png","hash":"aab23cc71a214e1d9d010e133b367eb1d0be19c5","modified":1672893807392},{"_id":"source/images/c5475754c914e4fc8616218ea075f6aed92d8bc7.png","hash":"5677eb05b7bea3efea1550602200779356c3abb4","modified":1672893807189},{"_id":"source/images/b906e21a8f259249f0402645da7d4d16eb91a6af.png","hash":"69d64ea6c4633768d6b77379a7716e03d26c327d","modified":1672893807280},{"_id":"source/images/e779b3094a0f30317b99da6f3c52741ec9ebcb9d.png","hash":"23ada869ad901efe32c1c8ad5339c6326195bba1","modified":1672893807285},{"_id":"source/images/e8780ed3dc89ed8fd4b96fbe5931aff56d2bb1ff.png","hash":"783df1f0fcd4e312dcf36384545713c0f9d95413","modified":1672893807358},{"_id":"source/images/00bf6b1d3993dfd678ac116ba75b5363f8901c01.png","hash":"38ed2fdca4609df2684aedd0f90a2152bcfbccc1","modified":1672893807392},{"_id":"source/images/23e4df4bf1de153009fd961cdc0f186257e092b8.png","hash":"7ffd46169087aa242de2ea563ece5683fb2adb0c","modified":1672893807191},{"_id":"source/images/269fb55b94f8ff3b6acc916fc199adcd0c25174e.png","hash":"5256d2069d0f3b7b303a795fbab244b865153e6a","modified":1672893807620},{"_id":"source/images/504720d95877e593475c0b3d02c7e75051c00b0f.png","hash":"51326eb6c287c69162bd69918931983a563a9124","modified":1672893808313},{"_id":"source/images/5b1c609a541b798d24b884ee0feeed63fb43f394.png","hash":"f052831515b4b288c1285e8342059d2e387a3061","modified":1672893807209},{"_id":"source/images/6aa176a56ce7d5a5af1d22a91e141759c7938da6.png","hash":"ede09aa525b313d0997cdbdc840707a0093dff09","modified":1672893807192},{"_id":"source/images/82c4ab39614782bc5135a55d4e7a0902749b4453.png","hash":"b06cdc55b57165541fcdea518078c4fe2632d72e","modified":1672893807370},{"_id":"source/images/95d48e89e235281019c6eb4b57a463db03073dbf.png","hash":"12bd82e88beea1736f2cb2966d071581fa7cf12b","modified":1672893807287},{"_id":"source/images/e15f4946f025f21858959bec16073b32077dbd31.png","hash":"b6160b71f462f59857824b0dfa2ec6f7debc4689","modified":1672893807406},{"_id":"source/images/e3a16065aae77a1bf18a9c7d0b133f7de9cb852e.png","hash":"30cc7d9d2d0d1d65a8cdf0b18db76471670fcb58","modified":1672893807534},{"_id":"source/images/e796e8b06ad07e98f1d6db479bd4cdd35f66acb8.png","hash":"01132979fce4944a1b78503ecc59db2a381ea8f0","modified":1672893807397},{"_id":"source/images/e4c4ab79e883880c71761e195ce99f95079141a6.png","hash":"389a5fb34c226af93dd0a6d0294e5292519d4514","modified":1672893807388},{"_id":"source/images/e68f82882020d7d891a80e98459c280c481572a9.png","hash":"af5c6480d417e12fed82324b8ddea76528c05f5f","modified":1672893807387},{"_id":"source/images/ff9b6413ac39b2772ebd08fce73ccb7fb34fb335.png","hash":"da91783c7ee8b2c3bb969a954b705c0d23c1fa35","modified":1672893807707},{"_id":"source/images/10b196cf5c18a6e6c44bd8477d1dd4e74d91ab83.png","hash":"521b41d0944742a19e68a96b7a5e3d5ec541c835","modified":1672893807279},{"_id":"source/images/213d86fb49e1239668dee499bd5d7b236fe795e2.png","hash":"1ad9d8e6a555b92012610d557deef6324359530f","modified":1672893807193},{"_id":"source/images/15823f33dacbc6167202b406986639e89767154e.png","hash":"41f084c161d7f48cb5674b7f194918b6669feb3b","modified":1672893807402},{"_id":"source/images/669a223d6301c41c7126901f2021f723aedc572c.png","hash":"27c52993fcf6ec12c9f1ae4df9a4a26e61586319","modified":1672893807619},{"_id":"source/images/7e75b5d82750938cf1c4f52908c1a4c3ecdc8095.png","hash":"eb29a1b844a066fcb9e389cbed0b70cb40ea5795","modified":1672893807190},{"_id":"source/images/bfccfee6cba1e46a6031d9c7c2b70da97c13423c.png","hash":"51290ffb1c760b77a254afa654e7bb3335ff0d96","modified":1672893807385},{"_id":"source/images/db90a8315faa1528cf9847b300e3d9d4b25c54de.png","hash":"547a37dee3a57c7c3235eb5d682f0dd123e24a30","modified":1672893807384},{"_id":"source/images/e058a82acde3fe0d917cc172375c1838b5fa959e.png","hash":"8b852cb20f3d2e896b2dc5959a39ba03f9704b7b","modified":1672893807362},{"_id":"source/images/269ef9d591e009f549a30de55cc43d48911d3e16.png","hash":"d1cc7030057a1402b5d336a8b8f674f1da0d12f4","modified":1672893808069},{"_id":"source/images/1e42d7af05dbfab89643e9268b13d7bac4df9527.png","hash":"ee6f19057b1e1a08b1c019cee871c77fcf2f2ebc","modified":1672893807409},{"_id":"source/images/a4d3fdf4957cef7cf3bb12e7f8e8ac0c7f620df3.png","hash":"9a907ea26f0c488d746900323277cba3af784faf","modified":1672893807401},{"_id":"source/images/aac3f753a34df8ae438f91a2690e018619dd7bc6.png","hash":"8f05510fed72bc8be7c2f8f1c0050160cf7d8b00","modified":1672893807401},{"_id":"source/images/c2b8606da24eb985ade582c3a0f605aa078d0a39.png","hash":"775bb3925e367bfc474165e8ab4f9d0549b7610f","modified":1672893807355},{"_id":"source/images/b517688cf5875de82bd1deea8f8764bff7b90ed9.png","hash":"c0e461ae1884d2efaea10052244319f0dc294dbf","modified":1672893807183},{"_id":"source/images/d959af017055f0c9d66531ee5e22e402b329b6c0.png","hash":"31ccc580af8477bc390044d425df7474b27a083f","modified":1672893807389},{"_id":"source/images/e1d44b6b049414f1bbf361e9e7305106b10ec44a.png","hash":"54b0ca5ecff962ea0021a82a514dbb4d25b25a58","modified":1672893807354},{"_id":"source/images/e47a64994b7f6ef50b68a861f2b9a64078d41f30.png","hash":"57fec790ad0fc0f9a04ce5b500ae858083961a8b","modified":1672893807278},{"_id":"source/images/e76b20dd798e99c8d45eaef34bfbf9ad3f0e5de5.png","hash":"3c2e2cc847d4e90cd54e13da96fc175413f6450c","modified":1672893807621},{"_id":"source/images/f6df3690fe8dcff8aaa65aaebfe30a859049fafb.png","hash":"4fe5cafbbba06db0939e7bf088a63a00e57339bb","modified":1672893807386},{"_id":"source/images/f8f413892356a5dff1d989153e2fd65a0d4a92f0.png","hash":"a564683a54554fa9eece9c5365c4ab6d71e43b65","modified":1672893807183},{"_id":"source/images/053eb65a3953e5e9eb2dda772a4dd0c702afd5ca.png","hash":"bb8f1ddd93ab6ce0ca34f5444b2587de4db181a6","modified":1672893807414},{"_id":"source/images/4e3a669077936ea7c6f19d682c3362be9fc1c270.png","hash":"d9b1e0c4a40f9fc38ba16fec503ab2dd833bbc02","modified":1672893807193},{"_id":"source/images/7faedcf60c808cf866cebddf14a848839eefd236.png","hash":"37bc1f871556a0d522719440e0f4db1147065a42","modified":1672893807184},{"_id":"source/images/96ae3924006f3a11007207d031717463b3bbac6c.png","hash":"dd449de4a2bc3838c50ee4019eaa0bb566734772","modified":1672893807181},{"_id":"source/images/0399299fb68cd20b1dbbf9bfc411a229dca7c1f6.png","hash":"de9c78623768c9eaa1d23b6d53ebdf834086fc0b","modified":1672893807380},{"_id":"source/images/46300e066e18a1a004cc63138f21c3566c1d387e.png","hash":"220e09c5796867e64d40778f38c7d4a550e309f3","modified":1672893807411},{"_id":"source/images/ecb7c0fed195365ef31c17fb5f0cf2deb9423e79.png","hash":"49b7e292fef1714e6013b7d99586f3f62de07d07","modified":1672893807382},{"_id":"source/images/7ec6d7fbaa4df7de5b8b75be102dd3ac5cddce65.png","hash":"00cbd536a867262b4d356adf0e199c1be3e8bd7b","modified":1672893807407},{"_id":"source/images/9b67738bd58cd4fa3d5bc257d0377735e0b99d1c.png","hash":"a215a254908eae81cd46cdb7d03cb43a5cca04a7","modified":1672893807408},{"_id":"source/images/a1eca7b2a04b83f569459e5be19e5e1d501ba561.png","hash":"0ee1e85e11a4066b12e67111dcb32e28fae88f23","modified":1672893807398},{"_id":"source/images/1a78cafe53c725fdc93ea404a23d18bed8b0314f.png","hash":"4731b9d94b451a5a94cbf4ca292763ee2692db4c","modified":1672893807145},{"_id":"source/images/d6ebb2c8e78f3eebee2ccf56cbe0bb36e15b7ec0.png","hash":"39f5fe6716cdff32233b9677e9f9f8f4b28753f8","modified":1672893807212},{"_id":"source/images/0f8310bececba0c2bb686514134da7b4a0bad7a7.png","hash":"4b4e4baad5cc900d911c89fcfb824d738b93733a","modified":1672893807365},{"_id":"source/images/cfcdf117dd1192b8c7003cb0b2a3bd30e97803fc.png","hash":"9e5c87c661d94e5f421b0d8b912f3a03ee2a5569","modified":1672893807188},{"_id":"themes/butterfly/package.json","hash":"e3fa2b62a1c960102d1276d3e433c79ebb8fcde2","modified":1670653510229},{"_id":"themes/butterfly/README.md","hash":"c34579d9d7239828ce7d8abc235521eaf4ea9e17","modified":1670653510200},{"_id":"themes/butterfly/LICENSE","hash":"1128f8f91104ba9ef98d37eea6523a888dcfa5de","modified":1670653510199},{"_id":"themes/butterfly/README_CN.md","hash":"25cfdbaf9883095322259c4f49bd08f0a7cffa0e","modified":1670653510200},{"_id":"themes/butterfly/layout/archive.pug","hash":"a0c034c2d319320a54046805e80b58dc48b7e233","modified":1670653510203},{"_id":"themes/butterfly/_config.yml","hash":"8eaa0cec4a98b757a811beb231d2f40a607eaa77","modified":1670653510201},{"_id":"themes/butterfly/plugins.yml","hash":"d46811a3c50f7057681ac496de4beda107aa26b6","modified":1670653510230},{"_id":"themes/butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1670653510228},{"_id":"themes/butterfly/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1670666860440},{"_id":"themes/butterfly/layout/page.pug","hash":"baf469784aef227e4cc840550888554588e87a13","modified":1670653510229},{"_id":"themes/butterfly/layout/category.pug","hash":"710708cfdb436bc875602abf096c919ccdf544db","modified":1670653510203},{"_id":"themes/butterfly/layout/post.pug","hash":"fc9f45252d78fcd15e4a82bfd144401cba5b169a","modified":1670653510229},{"_id":"themes/butterfly/layout/tag.pug","hash":"0440f42569df2676273c026a92384fa7729bc4e9","modified":1670653510229},{"_id":"themes/butterfly/scripts/events/404.js","hash":"83cd7f73225ccad123afbd526ce1834eb1eb6a6d","modified":1670653510230},{"_id":"themes/butterfly/scripts/events/cdn.js","hash":"acfe765fb2c607bff7198630dbfa53a888c36357","modified":1670653510230},{"_id":"themes/butterfly/languages/en.yml","hash":"d1bb560698eb8b0079495b7b18b44facb610f9fd","modified":1670653510202},{"_id":"themes/butterfly/scripts/events/stylus.js","hash":"9819f0996234fbd80d6c50a9e526c56ebf22588d","modified":1670653510231},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"947f794e862bb2813e36887f777bdb760f70a322","modified":1670653510202},{"_id":"themes/butterfly/scripts/events/init.js","hash":"3ace1139182d3d367149db138990891427f3356e","modified":1670653510231},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"28b6f0c39155651d747eb595e0a283bc97be2e09","modified":1670653510202},{"_id":"themes/butterfly/languages/default.yml","hash":"1e37a3695d50e3e61d7c36e58a6dac872a4a56cd","modified":1670653510201},{"_id":"themes/butterfly/scripts/events/comment.js","hash":"a3d1f417965ca20253c36f9e93429f3df6268856","modified":1670653510230},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"8ad9911b755cba13dde2cc055c3f857a6b0dd20e","modified":1670653510231},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"cb49f737aca272ccfeb62880bd651eccee72a129","modified":1670653510203},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"346b6b650b9dee4844f3be7865886002f82da24c","modified":1670653510203},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"0b80f04950bd0fe5e6c4e7b7559adf4d0ce28436","modified":1670653510210},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"919020d4cd7ae68694b2326edeed4328c7f933cd","modified":1670653510207},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"932df912976261929f809b7dbd4eb473e7787345","modified":1670653510231},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"7dee9b73acdec2a34d41a45119ebe8bb8650bf6c","modified":1670653510204},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"2ec66513d5322f185d2071acc052978ba9415a8e","modified":1670653510232},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"e00efdb5d02bc5c6eb4159e498af69fa61a7dbb9","modified":1670653510232},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"21379ed2dccb69c43b893895c9d56238c11e5f43","modified":1670653510231},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"b4cd617c619d1a0df93603721a6fa1317526174b","modified":1670653510233},{"_id":"themes/butterfly/scripts/helpers/findArchiveLength.js","hash":"ee3e70098eb0849497d50b75e18cf4a27c397d52","modified":1670653510232},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"763dab5c83f50c1c62fffc9a9dfedea29bb4e629","modified":1670653510233},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"d368a8830e506c8b5eb6512b709ec8db354d5ea1","modified":1670653510233},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"83a1f2d31792206d432e8e2041e284d88327c02e","modified":1670653510211},{"_id":"themes/butterfly/scripts/tag/flink.js","hash":"ab62919fa567b95fbe14889517abda649991b1ee","modified":1670653510233},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"f79c99f6c5b626c272dc2bed2b0250d6b91bb28a","modified":1670653510233},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"91d954f6e9fe6e571eb8ec9f8996294b2dc3688e","modified":1670653510233},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"a43ee2c7871bdd93cb6beb804429e404570f7929","modified":1670653510234},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"396c3ab1bcf1c7693ad7e506eadd13016c6769b6","modified":1670653510234},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"d51812b43924f1bbf413c67499510dd125022005","modified":1670653510234},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"03b2afef41d02bd1045c89578a02402c28356006","modified":1670653510234},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"02390a5b6ae1f57497b22ba2e6be9f13cfb7acac","modified":1670660088807},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"6c6e415623d0fd39da016d9e353bb4f5cca444f5","modified":1670653510235},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"8d39473ed112d113674a0f689f63fae06c72abd2","modified":1670653510211},{"_id":"themes/butterfly/scripts/tag/timeline.js","hash":"300eb779588bf35a1b687d9f829d866074b707e3","modified":1670653510235},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"531808a290b8bdd66bac2faab211ada8e9646a37","modified":1670653510234},{"_id":"themes/butterfly/source/css/index.styl","hash":"861998e4ac67a59529a8245a9130d68f826c9c12","modified":1670653510244},{"_id":"themes/butterfly/source/css/var.styl","hash":"e018dad9f674fc5564112b99032fe5fe8b2d195f","modified":1670653510244},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1670653510245},{"_id":"themes/butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1670653510245},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1670653510245},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"15530d9ac59c576d79af75dd687efe71e8d261b0","modified":1670653510204},{"_id":"themes/butterfly/source/js/main.js","hash":"82b4db7c171f19c105815d02b121703580465364","modified":1670653510246},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"fe4d847177b824e09c75e9c7b723184c708c569a","modified":1670653510204},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"7df90c8e432e33716517ab918b0a125bc284041b","modified":1670653510205},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"65a23b5170204e55b813ce13a79d799b66b7382c","modified":1670653510205},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"428e3c39053b44760463682848f2eae238ff9d64","modified":1670653510204},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"d16ad2ee0ff5751fd7f8a5ce1b83935518674977","modified":1670653510205},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":1670653510205},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"3d492cfe645d37c94d30512e0b230b0a09913148","modified":1670653510205},{"_id":"themes/butterfly/layout/includes/loading/pace.pug","hash":"278855fe4399489bdef0393697bb87420e671fe9","modified":1670653510208},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"5c1391c9e96950833641f178b5f23c58422fb659","modified":1670653510247},{"_id":"themes/butterfly/source/js/utils.js","hash":"ee27523d12fa800b8906e13f59882a04ad0bd623","modified":1670653510247},{"_id":"themes/butterfly/layout/includes/loading/fullpage-loading.pug","hash":"c4b86758f3a3deae4612c31d725814c8753a7804","modified":1670653510207},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":1670653510205},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"2fb74d0b0e4b98749427c5a1a1b0acb6c85fadc4","modified":1670653510209},{"_id":"themes/butterfly/layout/includes/loading/index.pug","hash":"131f344d68b4c241d6e03849b243ee792fcd3cea","modified":1670653510208},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"6ae047d566289294cc2f6192cacbff297cec9f1a","modified":1670653510209},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1670653510210},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"12c65c174d26a41821df9bad26cdf1087ec5b0ca","modified":1670653510210},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"e3d574921fca8e756923bf3b303835e57b9a26b2","modified":1670653510210},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"78a3abd90bb3c18cd773d3d5abac3541e7f415e5","modified":1670653510206},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"aa175e2254704335f4da09175e59ef2375ca7d03","modified":1670653510206},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"6311eda08e4515281c51bd49f43902a51832383c","modified":1670653510210},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"9698f22751778dde063cbfbd01c59ca4462ccd85","modified":1670653510206},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"0d953e51d04a9294a64153c89c20f491a9ec42d4","modified":1670653510207},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"31346a210f4f9912c5b29f51d8f659913492f388","modified":1670653510206},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"ebecba46a5f4efe1c98a386df06c56e26fbd07b9","modified":1670653510211},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"6528e86656906117a1af6b90e0349c2c4651d5e1","modified":1670653510219},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"c7cfade2b160380432c47eef4cd62273b6508c58","modified":1670653510211},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"0f024e36b8116118233e10118714bde304e01e12","modified":1670653510223},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"864869c43fe5b5bb6f4ac6b13dd4bfb16ea47550","modified":1670653510211},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"ffb9ea15a2b54423cd4cd441e2d061b8233e9b58","modified":1670653510223},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":1670653510225},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"86897010fe71503e239887fd8f6a4f5851737be9","modified":1670653510226},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"e37468e63db2a0ac09b65d21b7de3e62425bb455","modified":1670653510226},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"ae392459ad401a083ca51ee0b27526b3c1e1faed","modified":1670653510226},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"fc0b09068009edd4026d90a669608cbe211aeecf","modified":1670653510223},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":1670653510226},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"121a0ba6c49b3ade67c7c71971fae5fdffb8c9a5","modified":1670653510225},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":1670653510226},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"3057a2f6f051355e35d3b205121af8735100eacf","modified":1670653510226},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"6d93564a8bd13cb9b52ee5e178db3bcbf18b1bc6","modified":1670653510226},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"438aea3e713ed16b7559b9a80a9c5ec0221263df","modified":1670653510227},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"9c1229af6ab48961021886882c473514101fba21","modified":1670653510227},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":1670653510227},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"35ce167c5a275211bfc1fa3d49adfde5b404d98f","modified":1670653510227},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"714f19e7d66df84938bd1b82b33d5667abe1f147","modified":1670653510235},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"7fb096656c8a6c21a4b6a5100885b1081d6021ed","modified":1670653510227},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"50dbb9e6d98c71ffe16741b8c1b0c1b9771efd2b","modified":1670653510241},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"6f4b4ede52305bce9b22c8c897dcbde8af6e2ce4","modified":1670653510241},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"f01ee74948cedb44e53cd3bb1ef36b7d2778ede7","modified":1670653510241},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"8c90483d461e09cb06e91b16d8bb7b3205b0a40c","modified":1670653510241},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"644d520fe80cc82058467708ab82ccad313b0c27","modified":1670653510235},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"580feb7e8b0822a1be48ac380f8c5c53b1523321","modified":1670653510242},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"a58d35d698885f1034dedbe99f7dbc1a801412c6","modified":1670653510241},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"2f95e99b8351fbecd9037a1bbdc3fee9d6ea8a77","modified":1670653510236},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"98d755b686ee833e9da10afaa40c4ec2bd66c19a","modified":1670653510241},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"a310e48f826a4cacc55d8e68f43806e5085554f6","modified":1670653510243},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"45f0c32bdea117540f6b14ebac6450d7142bd710","modified":1670653510243},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"ce489ca2e249e2a3cf71584e20d84bdb022e3475","modified":1670653510243},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"bcd384c8b2aa0390c9eb69ac1abbfd1240ce1da4","modified":1670653510237},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":1670653510243},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"d76c38adf1d9c1279ef4241835667789f5b736e0","modified":1670653510243},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"85ae91c83691ea4511f4277da1194a185251cc78","modified":1670653510244},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"bf9568444dd54e39dc59b461323dcd38942f27d9","modified":1670653510244},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"a92984f566c97bb4179f34be79240af1552c6f17","modified":1670653510240},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"69f8e9414526dfda3af9a71c8e528fdd0ecbbfe5","modified":1670653510240},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"66c59e193d794cdb02cca7bd1dc4aea5a19d7e84","modified":1670653510243},{"_id":"themes/butterfly/source/css/_tags/timeline.styl","hash":"f071156d439556e7463ed4bc61ceee87170d5d08","modified":1670653510244},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"f9a5d3f1fc5ed0ed2ee4c1eaa58ed650d11ddebd","modified":1670653510238},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"a0010d833ed30211601c1e0bbbc68e85b77428c6","modified":1670653510238},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"a457a0dbe23af21a7b6b8bfc5ee103c9fe92e89c","modified":1670653510239},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"ac2aeee9926f75b2a0098efe1c114126987430f2","modified":1670653510239},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"c61dccca690d486c3d9c29cf028d87b777385141","modified":1670653510239},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"26be2afa9d4e7016cf3c42a6cd166f01e8e4ad5c","modified":1670653510239},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"fb9f78bfbb79579f1d752cb73fb6d25c8418e0fd","modified":1670653510239},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"23db4e3cab68fed78601fc8a9c39ff5753bcc716","modified":1670653510239},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"bbc884d6b2158a833b77a1bbc07248e17874b22e","modified":1670653510240},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"631ca35a38bc4ac052e9caf47508ff1f99842fc7","modified":1670653510240},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"56389925671c7e8da0c033769421269e15e8f795","modified":1670653510240},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"d53de408cb27a2e704aba7f7402b7caebe0410d8","modified":1670653510239},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"c5cfed620708807a48076b5ee59b0ba84e29aa80","modified":1670653510240},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"9feb248552667c53ce1b19bc7a295215f8c77008","modified":1670653510246},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"51e45625929d57c9df3ba9090af99b9b7bb9a15b","modified":1670653510242},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"25e58a7a8bda4b73d0a0e551643ca01b09ccd7e5","modified":1670653510243},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"3071a4208fdf89ad7e0031536dd6ffa7bc951e4d","modified":1670653510246},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"b2aadea7351fae8382b8c2a3b9de810d922b0ec1","modified":1670653510213},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"39d61cbe0c1e937f83ba3b147afaa29b4de2f87d","modified":1670653510243},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"58406a7a3bf45815769f652bf3ef81e57dcd07eb","modified":1670653510213},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"2c18a1c9604af475b4749def8f1959df88d8b276","modified":1670653510244},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/artalk.pug","hash":"99d9b17668260b242749c16851d9ec1024d31899","modified":1670653510212},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"b2d274db84ef22fbd6d5ea8f4404821898934209","modified":1670653510213},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"d85c3737b5c9548553a78b757a7698df126a52cf","modified":1670653510212},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"5f648086a33a32d169a2f8d8c549c08aa02f67db","modified":1670653510214},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"481cd5053bafb1a19f623554a27d3aa077ea59c3","modified":1670653510214},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"cfe63e7d26a6665df6aa32ca90868ad48e05ec04","modified":1670653510214},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"39427e107230a10790972349c9dd4c4f31d55eb7","modified":1670653510213},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/remark42.pug","hash":"001e8be47854b891efe04013c240c38fed4185eb","modified":1670653510213},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"76634112c64023177260d1317ae39cef2a68e35f","modified":1670653510214},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"0611d9216f4c128ebdea4cc21454c3dc4a6398d5","modified":1670653510215},{"_id":"themes/butterfly/layout/includes/third-party/comments/artalk.pug","hash":"49dcc23815e1d5264bb65c91e7dc67b1a723d1ea","modified":1670653510215},{"_id":"themes/butterfly/layout/includes/third-party/chat/gitter.pug","hash":"d1d2474420bf4edc2e43ccdff6f92b8b082143df","modified":1670653510214},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"24a926756c2300b9c561aaab6bd3a71fdd16e16d","modified":1670653510215},{"_id":"themes/butterfly/layout/includes/third-party/chat/messenger.pug","hash":"ccb7d8ce3ded7364f9a15334b68ad73869fca757","modified":1670653510215},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"8ec24c1939895ac0db2b2e8700bc9307b4ceb53c","modified":1670653510216},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"eefdaa94956adc7a3ca90dd8edcd70a7574b439c","modified":1670653510216},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"52ea8aa26b84d3ad38ae28cdf0f163e9ca8dced7","modified":1670653510218},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"98ef20f8a3b10c1692f9b2b3c06033d2da8a8eae","modified":1670653510216},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"22e2ef30fe5eb1db7566e89943c74ece029b2a8e","modified":1670653510217},{"_id":"themes/butterfly/layout/includes/third-party/comments/giscus.pug","hash":"591ef23c583690bd74af0cafb09af64ba5bd8151","modified":1670653510217},{"_id":"themes/butterfly/layout/includes/third-party/comments/remark42.pug","hash":"e9bdf80d6796afc04eb809dbbe780d97f22c7fcd","modified":1670653510218},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"e18fbd88d8942e53e771f29b26209ab735c5c567","modified":1670653510218},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"00ed91c52939b9675b316137f854d13684c895a6","modified":1670653510218},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"351fe25fbf02635b1f9e86e5e244c7d61f69baa7","modified":1670653510217},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"a737046e730eb7264606ba0536218964044492f9","modified":1670653510219},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"15462d1ed04651ad3b430c682842ac400f6f9b47","modified":1670653510219},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"dfcbd9881be569ea420eff1a6b00e4f4dbe2138e","modified":1670653510220},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"1c846c8d51649b8554d91536323eaeb20c8fc236","modified":1670653510220},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":1670653510220},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"e55b9c0f8ced231f47eb88bd7f4ec99f29c5c29d","modified":1670653510219},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/artalk.pug","hash":"c12c898b35dd014780c1f3220ddbe12e7270983c","modified":1670653510221},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"8e33aca36a4d3ae9e041ba05ced8eff56ae38f77","modified":1670653510221},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"04b2a5882e789a988e41d45abe606f0617b08e38","modified":1670653510221},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"4ec0642f2d5444acfab570a6f8c7868e7ff43fde","modified":1670653510222},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/remark42.pug","hash":"ab167c00da4506f591b96f0591bf5bd214a26d4b","modified":1670653510222},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"233907dd7f5b5f33412701d2ccffbc0bbae8707b","modified":1670653510222},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"e846ddfe4a63b15d1416f6055f5756af5e3da7c6","modified":1670653510222},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"dd0bc119029b62dce5dc965d5de7377e438fa29a","modified":1670653510223},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"e8245d0b4933129bb1c485d8de11a9e52e676348","modified":1670653510224},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"da3b9437d061ee68dbc383057db5c73034c49605","modified":1670653510224},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"178c9cdcc4ce5a006885b24ce4a3d624e4734899","modified":1670653510224},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"d19e1c2c0a50f0e4547d71a17b9be88e8152f17c","modified":1670653510222},{"_id":"themes/butterfly/layout/includes/third-party/share/add-this.pug","hash":"2980f1889226ca981aa23b8eb1853fde26dcf89a","modified":1670653510224},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"4c4a9c15215ae8ac5eadb0e086b278f76db9ee92","modified":1670653510225},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"f61d63724ea5c5f352568b3a16bde023affefbe5","modified":1670653510225},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"85c92f8a7e44d7cd1c86f089a05be438535e5362","modified":1670653510225},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"18804c58239d95798fa86d0597f32d7f7dd30051","modified":1670653510236},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"5dc2e0bcae9a54bfb9bdcc82d02ae5a3cf1ca97d","modified":1670653510237},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"cf1fae641c927621a4df1be5ca4a853b9b526e23","modified":1670653510236},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"8970cc1916c982b64a1478792b2822d1d31e276d","modified":1670653510237},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":1670653510237},{"_id":"source/images/0cbcacd8ee62ee0c50d3c6934afa402cadda2481.png","hash":"899565f56d5b1b787125846bd7b7ebb5621604a1","modified":1672893807399},{"_id":"source/images/e3a7ff82fce93e8f5235dbcac4bd167d537bb558.png","hash":"7b78e1b1ccf9bf5f632b3a0afbac0be02ed44d17","modified":1672893807403},{"_id":"source/images/6a5e676a58d9059a7a290844beba2e1558f7c0f4.png","hash":"362fefab9c0917d9259aab54ba732fa8929c51f4","modified":1672893807186},{"_id":"source/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png","hash":"da1924a0fa57d85e1d7248ea95e3a6fff1533d00","modified":1672893807232},{"_id":"source/images/f12174928d8727aa5c8a99d5dd184b921ec7593a.pdf","hash":"82aa7d81112d40aa4c43dfa22332286feb5b0e31","modified":1672893807129}],"Category":[{"name":"uncategory","_id":"clcim709c00044cv9c32903r1"},{"name":"research","_id":"clcim709h000e4cv9h8od5yrp"},{"name":"public","_id":"clcim709m000u4cv976d235g4"}],"Data":[],"Page":[{"title":"标签","type":"tags","date":"2020-02-22T14:22:22.000Z","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ntype: \"tags\"\ndate: 2020-02-22 22:22:22\n---\n","updated":"2023-01-05T04:54:57.537Z","path":"tags/index.html","comments":1,"layout":"page","_id":"clcim709600004cv988i19wcz","content":"","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover7.JPG","excerpt":"","more":""},{"title":"分类","type":"categories","date":"2020-02-22T14:22:22.000Z","_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ntype: \"categories\"\ndate: 2020-02-22 22:22:22\n---\n","updated":"2023-01-05T04:54:57.533Z","path":"categories/index.html","comments":1,"layout":"page","_id":"clcim709a00024cv9fkgm1rer","content":"","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover8.JPG","excerpt":"","more":""}],"Post":[{"title":"02 - 商业数据分析中四大问题入门","share":true,"date":"2022-10-24T13:03:44.000Z","updated":"2022-12-22T13:27:39.000Z","description":null,"daily":false,"createtime":"2022-10-24 21:03","category":"uncategory","aliases":["02 - 商业数据分析中四大问题入门","Day02 - 商业数据分析中四大问题案例实践"],"_content":"\n\n\n## 说明\n\n👉 : 作业必做\n\n## 商业数据分析入门案例\n\n### 数据采集案例\n- 👉 八爪鱼爬取国美手机数据（自动）\n\t- 演示（输出数据集：国美 - 商品列表 - 手机数据采集.csv）\n\t- 学生动手感受\n- python 爬取百度热搜 TOP10（手动）\n\t- 演示\n\t- 学生动手感受\n- 八爪鱼爬取百度热搜 TOP10（手动）\n- 例子讨论与总结\n\n## 数据处理案例\n\n本节使用的数据是“国美 - 商品列表 - 手机数据采集.csv”，样例：![static/attachment/Pasted image 20221024224926.png](/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png)\n\n- 👉 UDI 实现\n\t- 去除“价格”中的￥符号\n\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）\n\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”\n\t- 类型转换：将去除“￥”的“价格”字段转换为 float\n\t- 类型转换：将“评价数”字段转换为 float\n- Pandas 实现上面例子\n- 例子总结与讨论\n\n## 数据分析案例\n- VA 实现（2022-11-07 作业）\n\t- 各类手机的平均价格柱状图\n\t\t- x 轴：手机类别（如苹果、华为、…），且能够修改轴标签（修改为手机类别）\n\t\t- y 轴：平均价格，且能够修改轴标签（修改为平均价格）\n\t- 手机评价数 TOP10（垂直柱状图）\n\t\t- x 轴：手机名称\n\t\t- y 轴：评价数量\n\t- 手机价格 TOP10（垂直柱状图）\n\t\t- x 轴：手机名称\n\t\t- y 轴：手机价格\n- Python 实现上面三个例子（)\n- 例子讨论与总结\n\n## 数据建模案例\n- 需求：建立一个模型，使模型能够根据手机图片，预测手机品牌。\n\t- 模型的输入为手机图片，输出为手机品牌\n\t- 图片来源：通过下载《国美 - 商品列表 - 手机数据采集.csv》中的图片（要自己下载，可通过你认为最快的方式）\n- DM（AI）实现\n- Keras 实现\n- 例子讨论与总结\n\n## 课程作业\n- 完善例子，并提交实验报告和录屏（将你做实验的过程录屏），截止日期：下周上课之前（11.7 之前）\n- 如果有问题，请及时在 QQ 群里反馈（上传录屏 + 问题说明）\n\n## UDI 测试要求\n\n数据集：《Day02 - 国美 - 商品列表 - 手机数据采集.csv》  \n![static/attachment/Pasted image 20221024224926.png](/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png)\n\n- UDI 实现\n\t- 去除“价格”中的￥符号\n\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）\n\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”\n\t- 类型转换：将去除“￥”的“价格”字段转换为 float\n\t- 类型转换：将“评价数”字段转换为 float\n\n期望输出：\n\n1. 每个步骤为一个转换，并录屏（.mp4)\n\n需要的资源：  \n\n- 软件地址：<http://idis-micro.uniplore.cn/>\n- 给每个人分配账号\n- <https://docs.uniplore.cn/>\n","source":"_posts/02---商业数据分析中四大问题入门.md","raw":"---\ntitle: 02 - 商业数据分析中四大问题入门\nshare: true\ntags:\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-10-24 21:03:44 \nupdated: 2022-12-22 21:27:39 \ndescription: \ndaily: false\ncreatetime: 2022-10-24 21:03\ncategory: uncategory\ncategories: [uncategory]\naliases:\n  - 02 - 商业数据分析中四大问题入门\n  - Day02 - 商业数据分析中四大问题案例实践\n---\n\n\n\n## 说明\n\n👉 : 作业必做\n\n## 商业数据分析入门案例\n\n### 数据采集案例\n- 👉 八爪鱼爬取国美手机数据（自动）\n\t- 演示（输出数据集：国美 - 商品列表 - 手机数据采集.csv）\n\t- 学生动手感受\n- python 爬取百度热搜 TOP10（手动）\n\t- 演示\n\t- 学生动手感受\n- 八爪鱼爬取百度热搜 TOP10（手动）\n- 例子讨论与总结\n\n## 数据处理案例\n\n本节使用的数据是“国美 - 商品列表 - 手机数据采集.csv”，样例：![static/attachment/Pasted image 20221024224926.png](/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png)\n\n- 👉 UDI 实现\n\t- 去除“价格”中的￥符号\n\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）\n\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”\n\t- 类型转换：将去除“￥”的“价格”字段转换为 float\n\t- 类型转换：将“评价数”字段转换为 float\n- Pandas 实现上面例子\n- 例子总结与讨论\n\n## 数据分析案例\n- VA 实现（2022-11-07 作业）\n\t- 各类手机的平均价格柱状图\n\t\t- x 轴：手机类别（如苹果、华为、…），且能够修改轴标签（修改为手机类别）\n\t\t- y 轴：平均价格，且能够修改轴标签（修改为平均价格）\n\t- 手机评价数 TOP10（垂直柱状图）\n\t\t- x 轴：手机名称\n\t\t- y 轴：评价数量\n\t- 手机价格 TOP10（垂直柱状图）\n\t\t- x 轴：手机名称\n\t\t- y 轴：手机价格\n- Python 实现上面三个例子（)\n- 例子讨论与总结\n\n## 数据建模案例\n- 需求：建立一个模型，使模型能够根据手机图片，预测手机品牌。\n\t- 模型的输入为手机图片，输出为手机品牌\n\t- 图片来源：通过下载《国美 - 商品列表 - 手机数据采集.csv》中的图片（要自己下载，可通过你认为最快的方式）\n- DM（AI）实现\n- Keras 实现\n- 例子讨论与总结\n\n## 课程作业\n- 完善例子，并提交实验报告和录屏（将你做实验的过程录屏），截止日期：下周上课之前（11.7 之前）\n- 如果有问题，请及时在 QQ 群里反馈（上传录屏 + 问题说明）\n\n## UDI 测试要求\n\n数据集：《Day02 - 国美 - 商品列表 - 手机数据采集.csv》  \n![static/attachment/Pasted image 20221024224926.png](/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png)\n\n- UDI 实现\n\t- 去除“价格”中的￥符号\n\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）\n\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”\n\t- 类型转换：将去除“￥”的“价格”字段转换为 float\n\t- 类型转换：将“评价数”字段转换为 float\n\n期望输出：\n\n1. 每个步骤为一个转换，并录屏（.mp4)\n\n需要的资源：  \n\n- 软件地址：<http://idis-micro.uniplore.cn/>\n- 给每个人分配账号\n- <https://docs.uniplore.cn/>\n","slug":"02---商业数据分析中四大问题入门","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709800014cv95r2c0z9z","content":"<h2 id=\"说明\">说明</h2>\n<p>👉 : 作业必做</p>\n<h2 id=\"商业数据分析入门案例\">商业数据分析入门案例</h2>\n<h3 id=\"数据采集案例\">数据采集案例</h3>\n<ul>\n<li>👉 八爪鱼爬取国美手机数据（自动）\n<ul>\n<li>演示（输出数据集：国美 - 商品列表 - 手机数据采集.csv）</li>\n<li>学生动手感受</li>\n</ul>\n</li>\n<li>python 爬取百度热搜 TOP10（手动）\n<ul>\n<li>演示</li>\n<li>学生动手感受</li>\n</ul>\n</li>\n<li>八爪鱼爬取百度热搜 TOP10（手动）</li>\n<li>例子讨论与总结</li>\n</ul>\n<h2 id=\"数据处理案例\">数据处理案例</h2>\n<p>本节使用的数据是“国美 - 商品列表 - 手机数据采集.csv”，样例：<img src=\"/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png\" alt=\"static/attachment/Pasted image 20221024224926.png\"></p>\n<ul>\n<li>👉 UDI 实现\n<ul>\n<li>去除“价格”中的￥符号</li>\n<li>提取“标题”中的手机品牌，如 Apple、苹果、华为）</li>\n<li>合并相同品牌，如将“Apple”和“苹果”合并为“苹果”</li>\n<li>类型转换：将去除“￥”的“价格”字段转换为 float</li>\n<li>类型转换：将“评价数”字段转换为 float</li>\n</ul>\n</li>\n<li>Pandas 实现上面例子</li>\n<li>例子总结与讨论</li>\n</ul>\n<h2 id=\"数据分析案例\">数据分析案例</h2>\n<ul>\n<li>VA 实现（2022-11-07 作业）\n<ul>\n<li>各类手机的平均价格柱状图\n<ul>\n<li>x 轴：手机类别（如苹果、华为、…），且能够修改轴标签（修改为手机类别）</li>\n<li>y 轴：平均价格，且能够修改轴标签（修改为平均价格）</li>\n</ul>\n</li>\n<li>手机评价数 TOP10（垂直柱状图）\n<ul>\n<li>x 轴：手机名称</li>\n<li>y 轴：评价数量</li>\n</ul>\n</li>\n<li>手机价格 TOP10（垂直柱状图）\n<ul>\n<li>x 轴：手机名称</li>\n<li>y 轴：手机价格</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Python 实现上面三个例子（)</li>\n<li>例子讨论与总结</li>\n</ul>\n<h2 id=\"数据建模案例\">数据建模案例</h2>\n<ul>\n<li>需求：建立一个模型，使模型能够根据手机图片，预测手机品牌。\n<ul>\n<li>模型的输入为手机图片，输出为手机品牌</li>\n<li>图片来源：通过下载《国美 - 商品列表 - 手机数据采集.csv》中的图片（要自己下载，可通过你认为最快的方式）</li>\n</ul>\n</li>\n<li>DM（AI）实现</li>\n<li>Keras 实现</li>\n<li>例子讨论与总结</li>\n</ul>\n<h2 id=\"课程作业\">课程作业</h2>\n<ul>\n<li>完善例子，并提交实验报告和录屏（将你做实验的过程录屏），截止日期：下周上课之前（11.7 之前）</li>\n<li>如果有问题，请及时在 QQ 群里反馈（上传录屏 + 问题说明）</li>\n</ul>\n<h2 id=\"UDI-测试要求\">UDI 测试要求</h2>\n<p>数据集：《Day02 - 国美 - 商品列表 - 手机数据采集.csv》<br>\n<img src=\"/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png\" alt=\"static/attachment/Pasted image 20221024224926.png\"></p>\n<ul>\n<li>UDI 实现\n<ul>\n<li>去除“价格”中的￥符号</li>\n<li>提取“标题”中的手机品牌，如 Apple、苹果、华为）</li>\n<li>合并相同品牌，如将“Apple”和“苹果”合并为“苹果”</li>\n<li>类型转换：将去除“￥”的“价格”字段转换为 float</li>\n<li>类型转换：将“评价数”字段转换为 float</li>\n</ul>\n</li>\n</ul>\n<p>期望输出：</p>\n<ol>\n<li>每个步骤为一个转换，并录屏（.mp4)</li>\n</ol>\n<p>需要的资源：</p>\n<ul>\n<li>软件地址：<a href=\"http://idis-micro.uniplore.cn/\">http://idis-micro.uniplore.cn/</a></li>\n<li>给每个人分配账号</li>\n<li><a href=\"https://docs.uniplore.cn/\">https://docs.uniplore.cn/</a></li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover7.JPG","excerpt":"","more":"<h2 id=\"说明\">说明</h2>\n<p>👉 : 作业必做</p>\n<h2 id=\"商业数据分析入门案例\">商业数据分析入门案例</h2>\n<h3 id=\"数据采集案例\">数据采集案例</h3>\n<ul>\n<li>👉 八爪鱼爬取国美手机数据（自动）\n<ul>\n<li>演示（输出数据集：国美 - 商品列表 - 手机数据采集.csv）</li>\n<li>学生动手感受</li>\n</ul>\n</li>\n<li>python 爬取百度热搜 TOP10（手动）\n<ul>\n<li>演示</li>\n<li>学生动手感受</li>\n</ul>\n</li>\n<li>八爪鱼爬取百度热搜 TOP10（手动）</li>\n<li>例子讨论与总结</li>\n</ul>\n<h2 id=\"数据处理案例\">数据处理案例</h2>\n<p>本节使用的数据是“国美 - 商品列表 - 手机数据采集.csv”，样例：<img src=\"/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png\" alt=\"static/attachment/Pasted image 20221024224926.png\"></p>\n<ul>\n<li>👉 UDI 实现\n<ul>\n<li>去除“价格”中的￥符号</li>\n<li>提取“标题”中的手机品牌，如 Apple、苹果、华为）</li>\n<li>合并相同品牌，如将“Apple”和“苹果”合并为“苹果”</li>\n<li>类型转换：将去除“￥”的“价格”字段转换为 float</li>\n<li>类型转换：将“评价数”字段转换为 float</li>\n</ul>\n</li>\n<li>Pandas 实现上面例子</li>\n<li>例子总结与讨论</li>\n</ul>\n<h2 id=\"数据分析案例\">数据分析案例</h2>\n<ul>\n<li>VA 实现（2022-11-07 作业）\n<ul>\n<li>各类手机的平均价格柱状图\n<ul>\n<li>x 轴：手机类别（如苹果、华为、…），且能够修改轴标签（修改为手机类别）</li>\n<li>y 轴：平均价格，且能够修改轴标签（修改为平均价格）</li>\n</ul>\n</li>\n<li>手机评价数 TOP10（垂直柱状图）\n<ul>\n<li>x 轴：手机名称</li>\n<li>y 轴：评价数量</li>\n</ul>\n</li>\n<li>手机价格 TOP10（垂直柱状图）\n<ul>\n<li>x 轴：手机名称</li>\n<li>y 轴：手机价格</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Python 实现上面三个例子（)</li>\n<li>例子讨论与总结</li>\n</ul>\n<h2 id=\"数据建模案例\">数据建模案例</h2>\n<ul>\n<li>需求：建立一个模型，使模型能够根据手机图片，预测手机品牌。\n<ul>\n<li>模型的输入为手机图片，输出为手机品牌</li>\n<li>图片来源：通过下载《国美 - 商品列表 - 手机数据采集.csv》中的图片（要自己下载，可通过你认为最快的方式）</li>\n</ul>\n</li>\n<li>DM（AI）实现</li>\n<li>Keras 实现</li>\n<li>例子讨论与总结</li>\n</ul>\n<h2 id=\"课程作业\">课程作业</h2>\n<ul>\n<li>完善例子，并提交实验报告和录屏（将你做实验的过程录屏），截止日期：下周上课之前（11.7 之前）</li>\n<li>如果有问题，请及时在 QQ 群里反馈（上传录屏 + 问题说明）</li>\n</ul>\n<h2 id=\"UDI-测试要求\">UDI 测试要求</h2>\n<p>数据集：《Day02 - 国美 - 商品列表 - 手机数据采集.csv》<br>\n<img src=\"/images/9fad67167f6334ea6ee48458e2d6c189b2868d5e.png\" alt=\"static/attachment/Pasted image 20221024224926.png\"></p>\n<ul>\n<li>UDI 实现\n<ul>\n<li>去除“价格”中的￥符号</li>\n<li>提取“标题”中的手机品牌，如 Apple、苹果、华为）</li>\n<li>合并相同品牌，如将“Apple”和“苹果”合并为“苹果”</li>\n<li>类型转换：将去除“￥”的“价格”字段转换为 float</li>\n<li>类型转换：将“评价数”字段转换为 float</li>\n</ul>\n</li>\n</ul>\n<p>期望输出：</p>\n<ol>\n<li>每个步骤为一个转换，并录屏（.mp4)</li>\n</ol>\n<p>需要的资源：</p>\n<ul>\n<li>软件地址：<a href=\"http://idis-micro.uniplore.cn/\">http://idis-micro.uniplore.cn/</a></li>\n<li>给每个人分配账号</li>\n<li><a href=\"https://docs.uniplore.cn/\">https://docs.uniplore.cn/</a></li>\n</ul>\n"},{"title":"商业数据分析中常见的技术","share":true,"date":"2022-10-24T06:14:39.000Z","updated":"2022-12-18T00:07:47.000Z","aliases":["商业数据分析中常见的技术"],"_content":"\n# 商业数据分析中常见的技术\n\n## 成绩说明\n\n### 实验成绩组成\n\n### 平时成绩说明\n\n### 课堂大作业说明\n\n### 补充说明\n\n## 商业数据分析中常见的技术\n\n### 商业数据分析中 4 大问题\n- （数据）获取\n- 处理\n- 分析\n- 建模\n\n### 实验课程解决什么问题 ^93726c6c-cceb-9bb2\n- What\n- How(Solutions)\n- Examples\n\n### 数据获取技术\n- 什么是数据获取 ^59855ee3-e895-04b0\n   - 例子 1\n   - 例子 2\n   - 例子 3\n- 常用的数据获取方法 ^051c8058-079d-17e5\n   - 数据库提取🤪⏰\n   - 网页爬取🥶⏰\n   - 用户填写🤪⏰\n   - 表格读取🤪⏰\n   - Optical Character Recognition, OCR（纸质、图片）🥶⏰\n   - Web 爬虫🥶⏰\n- 例子 1\n   - 需求：获取国美网站中的手机数据，并保存为 csv 文件\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n\t  - 手工一条一条得复制\n\t  - 找多个人来一条一条的复制\n\t  - 脚本 (Python 爬虫)\n\t  - 可视化方法（八爪鱼）\n   - 典型例子说明\n\t  - 基于什么技术\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n\t  - 流程说明（获取数据分为哪些步骤）\n\t\t - 打开网站\n\t\t - 选择需要获取的数据\n\t\t - 开始采集\n\t\t - 保存数据\n\t  - 例子演示（现场）\n\n### 数据处理技术 ^77b60087-742a-b85d\n- 什么是数据处理技术\n   - 例子 1\n   - 例子 2\n   - 例子 3\n- 常用的数据处理方法\n   - 脚本处理（任何场景）\n   - 专业软件（SPSS、Excel、Kettle）（特定场景）\n   - 可视化编程（UDI）（特定场景）\n- 例子 2\n   - 需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n   - 典型例子说明\n\t  - 基于什么技术 ^8db6cf3a-9533-b8db\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n\t  - 流程说明（获取数据分为哪些步骤）^1e917046-b2c3-207e\n\t\t - 打开 UDI\n\t\t - 创建工作流\n\t\t - 运行\n\t\t - 查看结果\n\t  - 例子演示（现场）\n- Why 可视化编程？Not Excel? ^81bd742b-6418-49f7\n   - 场景不同\n\t  - 如定时运行（如每天 02:00 定时运行）\n\t  - 体量大（TB）\n\t  - 运行时间长（>1H)\n\t  - 需要支持多种数据源\n- 例子 3 ^5ecf26e6-537b-a20c\n   - 需求：将数据中的价格字段变为数字，并存储为新表\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n   - 典型例子说明\n\t  - 基于什么技术\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n\t  - 流程说明（获取数据分为哪些步骤）\n\t\t - 打开 UDI\n\t\t - 创建工作流\n\t\t - 运行\n\t\t - 查看结果\n\t  - 例子演示（现场）\n\n### 数据可视化技术 ^be1f186e-bc6c-3d0a\n- 什么是数据可视化技术\n   - 例子 1\n   - 例子 2\n   - 例子 3\n- 常用可视化方案（法）\n   - 脚本处理（任何场景）\n   - 专业软件（Tableau、SPSS、PowerBI）（特定场景）\n   - VA（拖拽式编程）\n- 例子 4\n   - 需求：可视化收集的平均价格\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n\t  - 编程（Plotly、Matplotlib、Seabon）\n\t  - 专业软件（VA/PowerBI/Tableau/Spss）\n\t  - 手画\n   - 典型例子说明\n\t  - 基于什么技术\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n\t  - 流程说明（获取数据分为哪些步骤）\n\t\t - 打开 VA\n\t\t - 建立数据源\n\t\t - 创建数据集\n\t\t - 建立工作表\n\t  - 例子演示（现场）\n\n### 数据建模技术 ^279b484a-455a-9d59\n- 什么是数据建模\n   - 例子 1\n   - 例子 2\n   - 例子 3\n- 常用的建模工具\n   - 基于脚本（Pytorch、Tensorflow（Keras）、ak-learn）\n   - 专业平台（Uniplore AI Studio、百度 AI Studio、百度 paddlepaddle）\n- 例子 5\n   - 需求：根据房子面积和距离市中心的距离，预测房子的价格\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n   - 典型例子说明\n\t  - 基于什么技术\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n   - 流程说明（获取数据分为哪些步骤）\n   - 例子演示（现场）\n\n## 课程后作业\n\n### 完善课上例子，并编写实验报告（提交）\n\n### 自行选择一个例子，并动手跟着文档完成例子（下节课提问，作为评分标准）\n- <https://docs.uniplore.cn/docs/tutorial-udistudio/reference-manual/trans/output/insertupdate>\n","source":"_posts/01---商业数据分析中常见的技术.md","raw":"---\ntitle: 商业数据分析中常见的技术\nshare: true\ntags:\n  - public\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-10-24 14:14:39 \nupdated: 2022-12-18 08:07:47 \ncategories:\n  - uncategory\naliases:\n  - 商业数据分析中常见的技术\n---\n\n# 商业数据分析中常见的技术\n\n## 成绩说明\n\n### 实验成绩组成\n\n### 平时成绩说明\n\n### 课堂大作业说明\n\n### 补充说明\n\n## 商业数据分析中常见的技术\n\n### 商业数据分析中 4 大问题\n- （数据）获取\n- 处理\n- 分析\n- 建模\n\n### 实验课程解决什么问题 ^93726c6c-cceb-9bb2\n- What\n- How(Solutions)\n- Examples\n\n### 数据获取技术\n- 什么是数据获取 ^59855ee3-e895-04b0\n   - 例子 1\n   - 例子 2\n   - 例子 3\n- 常用的数据获取方法 ^051c8058-079d-17e5\n   - 数据库提取🤪⏰\n   - 网页爬取🥶⏰\n   - 用户填写🤪⏰\n   - 表格读取🤪⏰\n   - Optical Character Recognition, OCR（纸质、图片）🥶⏰\n   - Web 爬虫🥶⏰\n- 例子 1\n   - 需求：获取国美网站中的手机数据，并保存为 csv 文件\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n\t  - 手工一条一条得复制\n\t  - 找多个人来一条一条的复制\n\t  - 脚本 (Python 爬虫)\n\t  - 可视化方法（八爪鱼）\n   - 典型例子说明\n\t  - 基于什么技术\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n\t  - 流程说明（获取数据分为哪些步骤）\n\t\t - 打开网站\n\t\t - 选择需要获取的数据\n\t\t - 开始采集\n\t\t - 保存数据\n\t  - 例子演示（现场）\n\n### 数据处理技术 ^77b60087-742a-b85d\n- 什么是数据处理技术\n   - 例子 1\n   - 例子 2\n   - 例子 3\n- 常用的数据处理方法\n   - 脚本处理（任何场景）\n   - 专业软件（SPSS、Excel、Kettle）（特定场景）\n   - 可视化编程（UDI）（特定场景）\n- 例子 2\n   - 需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n   - 典型例子说明\n\t  - 基于什么技术 ^8db6cf3a-9533-b8db\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n\t  - 流程说明（获取数据分为哪些步骤）^1e917046-b2c3-207e\n\t\t - 打开 UDI\n\t\t - 创建工作流\n\t\t - 运行\n\t\t - 查看结果\n\t  - 例子演示（现场）\n- Why 可视化编程？Not Excel? ^81bd742b-6418-49f7\n   - 场景不同\n\t  - 如定时运行（如每天 02:00 定时运行）\n\t  - 体量大（TB）\n\t  - 运行时间长（>1H)\n\t  - 需要支持多种数据源\n- 例子 3 ^5ecf26e6-537b-a20c\n   - 需求：将数据中的价格字段变为数字，并存储为新表\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n   - 典型例子说明\n\t  - 基于什么技术\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n\t  - 流程说明（获取数据分为哪些步骤）\n\t\t - 打开 UDI\n\t\t - 创建工作流\n\t\t - 运行\n\t\t - 查看结果\n\t  - 例子演示（现场）\n\n### 数据可视化技术 ^be1f186e-bc6c-3d0a\n- 什么是数据可视化技术\n   - 例子 1\n   - 例子 2\n   - 例子 3\n- 常用可视化方案（法）\n   - 脚本处理（任何场景）\n   - 专业软件（Tableau、SPSS、PowerBI）（特定场景）\n   - VA（拖拽式编程）\n- 例子 4\n   - 需求：可视化收集的平均价格\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n\t  - 编程（Plotly、Matplotlib、Seabon）\n\t  - 专业软件（VA/PowerBI/Tableau/Spss）\n\t  - 手画\n   - 典型例子说明\n\t  - 基于什么技术\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n\t  - 流程说明（获取数据分为哪些步骤）\n\t\t - 打开 VA\n\t\t - 建立数据源\n\t\t - 创建数据集\n\t\t - 建立工作表\n\t  - 例子演示（现场）\n\n### 数据建模技术 ^279b484a-455a-9d59\n- 什么是数据建模\n   - 例子 1\n   - 例子 2\n   - 例子 3\n- 常用的建模工具\n   - 基于脚本（Pytorch、Tensorflow（Keras）、ak-learn）\n   - 专业平台（Uniplore AI Studio、百度 AI Studio、百度 paddlepaddle）\n- 例子 5\n   - 需求：根据房子面积和距离市中心的距离，预测房子的价格\n   - 有多少种方法解决这个问题？\n   - 可能的方法列表\n   - 典型例子说明\n\t  - 基于什么技术\n\t\t - 技术特点\n\t\t - 为什么选这个技术\n   - 流程说明（获取数据分为哪些步骤）\n   - 例子演示（现场）\n\n## 课程后作业\n\n### 完善课上例子，并编写实验报告（提交）\n\n### 自行选择一个例子，并动手跟着文档完成例子（下节课提问，作为评分标准）\n- <https://docs.uniplore.cn/docs/tutorial-udistudio/reference-manual/trans/output/insertupdate>\n","slug":"01---商业数据分析中常见的技术","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709b00034cv9d6mpfsax","content":"<h1>商业数据分析中常见的技术</h1>\n<h2 id=\"成绩说明\">成绩说明</h2>\n<h3 id=\"实验成绩组成\">实验成绩组成</h3>\n<h3 id=\"平时成绩说明\">平时成绩说明</h3>\n<h3 id=\"课堂大作业说明\">课堂大作业说明</h3>\n<h3 id=\"补充说明\">补充说明</h3>\n<h2 id=\"商业数据分析中常见的技术\">商业数据分析中常见的技术</h2>\n<h3 id=\"商业数据分析中-4-大问题\">商业数据分析中 4 大问题</h3>\n<ul>\n<li>（数据）获取</li>\n<li>处理</li>\n<li>分析</li>\n<li>建模</li>\n</ul>\n<h3 id=\"实验课程解决什么问题-93726c6c-cceb-9bb2\">实验课程解决什么问题 ^93726c6c-cceb-9bb2</h3>\n<ul>\n<li>What</li>\n<li>How(Solutions)</li>\n<li>Examples</li>\n</ul>\n<h3 id=\"数据获取技术\">数据获取技术</h3>\n<ul>\n<li>什么是数据获取 ^59855ee3-e895-04b0\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的数据获取方法 ^051c8058-079d-17e5\n<ul>\n<li>数据库提取🤪⏰</li>\n<li>网页爬取🥶⏰</li>\n<li>用户填写🤪⏰</li>\n<li>表格读取🤪⏰</li>\n<li>Optical Character Recognition, OCR（纸质、图片）🥶⏰</li>\n<li>Web 爬虫🥶⏰</li>\n</ul>\n</li>\n<li>例子 1\n<ul>\n<li>需求：获取国美网站中的手机数据，并保存为 csv 文件</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表\n<ul>\n<li>手工一条一条得复制</li>\n<li>找多个人来一条一条的复制</li>\n<li>脚本 (Python 爬虫)</li>\n<li>可视化方法（八爪鱼）</li>\n</ul>\n</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开网站</li>\n<li>选择需要获取的数据</li>\n<li>开始采集</li>\n<li>保存数据</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"数据处理技术-77b60087-742a-b85d\">数据处理技术 ^77b60087-742a-b85d</h3>\n<ul>\n<li>什么是数据处理技术\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的数据处理方法\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（SPSS、Excel、Kettle）（特定场景）</li>\n<li>可视化编程（UDI）（特定场景）</li>\n</ul>\n</li>\n<li>例子 2\n<ul>\n<li>需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术 ^8db6cf3a-9533-b8db\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）^1e917046-b2c3-207e\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Why 可视化编程？Not Excel? ^81bd742b-6418-49f7\n<ul>\n<li>场景不同\n<ul>\n<li>如定时运行（如每天 02:00 定时运行）</li>\n<li>体量大（TB）</li>\n<li>运行时间长（&gt;1H)</li>\n<li>需要支持多种数据源</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>例子 3 ^5ecf26e6-537b-a20c\n<ul>\n<li>需求：将数据中的价格字段变为数字，并存储为新表</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"数据可视化技术-be1f186e-bc6c-3d0a\">数据可视化技术 ^be1f186e-bc6c-3d0a</h3>\n<ul>\n<li>什么是数据可视化技术\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用可视化方案（法）\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（Tableau、SPSS、PowerBI）（特定场景）</li>\n<li>VA（拖拽式编程）</li>\n</ul>\n</li>\n<li>例子 4\n<ul>\n<li>需求：可视化收集的平均价格</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表\n<ul>\n<li>编程（Plotly、Matplotlib、Seabon）</li>\n<li>专业软件（VA/PowerBI/Tableau/Spss）</li>\n<li>手画</li>\n</ul>\n</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 VA</li>\n<li>建立数据源</li>\n<li>创建数据集</li>\n<li>建立工作表</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"数据建模技术-279b484a-455a-9d59\">数据建模技术 ^279b484a-455a-9d59</h3>\n<ul>\n<li>什么是数据建模\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的建模工具\n<ul>\n<li>基于脚本（Pytorch、Tensorflow（Keras）、ak-learn）</li>\n<li>专业平台（Uniplore AI Studio、百度 AI Studio、百度 paddlepaddle）</li>\n</ul>\n</li>\n<li>例子 5\n<ul>\n<li>需求：根据房子面积和距离市中心的距离，预测房子的价格</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"课程后作业\">课程后作业</h2>\n<h3 id=\"完善课上例子，并编写实验报告（提交）\">完善课上例子，并编写实验报告（提交）</h3>\n<h3 id=\"自行选择一个例子，并动手跟着文档完成例子（下节课提问，作为评分标准）\">自行选择一个例子，并动手跟着文档完成例子（下节课提问，作为评分标准）</h3>\n<ul>\n<li><a href=\"https://docs.uniplore.cn/docs/tutorial-udistudio/reference-manual/trans/output/insertupdate\">https://docs.uniplore.cn/docs/tutorial-udistudio/reference-manual/trans/output/insertupdate</a></li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<h1>商业数据分析中常见的技术</h1>\n<h2 id=\"成绩说明\">成绩说明</h2>\n<h3 id=\"实验成绩组成\">实验成绩组成</h3>\n<h3 id=\"平时成绩说明\">平时成绩说明</h3>\n<h3 id=\"课堂大作业说明\">课堂大作业说明</h3>\n<h3 id=\"补充说明\">补充说明</h3>\n<h2 id=\"商业数据分析中常见的技术\">商业数据分析中常见的技术</h2>\n<h3 id=\"商业数据分析中-4-大问题\">商业数据分析中 4 大问题</h3>\n<ul>\n<li>（数据）获取</li>\n<li>处理</li>\n<li>分析</li>\n<li>建模</li>\n</ul>\n<h3 id=\"实验课程解决什么问题-93726c6c-cceb-9bb2\">实验课程解决什么问题 ^93726c6c-cceb-9bb2</h3>\n<ul>\n<li>What</li>\n<li>How(Solutions)</li>\n<li>Examples</li>\n</ul>\n<h3 id=\"数据获取技术\">数据获取技术</h3>\n<ul>\n<li>什么是数据获取 ^59855ee3-e895-04b0\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的数据获取方法 ^051c8058-079d-17e5\n<ul>\n<li>数据库提取🤪⏰</li>\n<li>网页爬取🥶⏰</li>\n<li>用户填写🤪⏰</li>\n<li>表格读取🤪⏰</li>\n<li>Optical Character Recognition, OCR（纸质、图片）🥶⏰</li>\n<li>Web 爬虫🥶⏰</li>\n</ul>\n</li>\n<li>例子 1\n<ul>\n<li>需求：获取国美网站中的手机数据，并保存为 csv 文件</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表\n<ul>\n<li>手工一条一条得复制</li>\n<li>找多个人来一条一条的复制</li>\n<li>脚本 (Python 爬虫)</li>\n<li>可视化方法（八爪鱼）</li>\n</ul>\n</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开网站</li>\n<li>选择需要获取的数据</li>\n<li>开始采集</li>\n<li>保存数据</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"数据处理技术-77b60087-742a-b85d\">数据处理技术 ^77b60087-742a-b85d</h3>\n<ul>\n<li>什么是数据处理技术\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的数据处理方法\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（SPSS、Excel、Kettle）（特定场景）</li>\n<li>可视化编程（UDI）（特定场景）</li>\n</ul>\n</li>\n<li>例子 2\n<ul>\n<li>需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术 ^8db6cf3a-9533-b8db\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）^1e917046-b2c3-207e\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Why 可视化编程？Not Excel? ^81bd742b-6418-49f7\n<ul>\n<li>场景不同\n<ul>\n<li>如定时运行（如每天 02:00 定时运行）</li>\n<li>体量大（TB）</li>\n<li>运行时间长（&gt;1H)</li>\n<li>需要支持多种数据源</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>例子 3 ^5ecf26e6-537b-a20c\n<ul>\n<li>需求：将数据中的价格字段变为数字，并存储为新表</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"数据可视化技术-be1f186e-bc6c-3d0a\">数据可视化技术 ^be1f186e-bc6c-3d0a</h3>\n<ul>\n<li>什么是数据可视化技术\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用可视化方案（法）\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（Tableau、SPSS、PowerBI）（特定场景）</li>\n<li>VA（拖拽式编程）</li>\n</ul>\n</li>\n<li>例子 4\n<ul>\n<li>需求：可视化收集的平均价格</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表\n<ul>\n<li>编程（Plotly、Matplotlib、Seabon）</li>\n<li>专业软件（VA/PowerBI/Tableau/Spss）</li>\n<li>手画</li>\n</ul>\n</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 VA</li>\n<li>建立数据源</li>\n<li>创建数据集</li>\n<li>建立工作表</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"数据建模技术-279b484a-455a-9d59\">数据建模技术 ^279b484a-455a-9d59</h3>\n<ul>\n<li>什么是数据建模\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的建模工具\n<ul>\n<li>基于脚本（Pytorch、Tensorflow（Keras）、ak-learn）</li>\n<li>专业平台（Uniplore AI Studio、百度 AI Studio、百度 paddlepaddle）</li>\n</ul>\n</li>\n<li>例子 5\n<ul>\n<li>需求：根据房子面积和距离市中心的距离，预测房子的价格</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"课程后作业\">课程后作业</h2>\n<h3 id=\"完善课上例子，并编写实验报告（提交）\">完善课上例子，并编写实验报告（提交）</h3>\n<h3 id=\"自行选择一个例子，并动手跟着文档完成例子（下节课提问，作为评分标准）\">自行选择一个例子，并动手跟着文档完成例子（下节课提问，作为评分标准）</h3>\n<ul>\n<li><a href=\"https://docs.uniplore.cn/docs/tutorial-udistudio/reference-manual/trans/output/insertupdate\">https://docs.uniplore.cn/docs/tutorial-udistudio/reference-manual/trans/output/insertupdate</a></li>\n</ul>\n"},{"title":"01 商学院-答辩要求","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:47.000Z","_content":" \n## 考核标准\n1. 上课表现 20%（回答问题 + 听课状态）\n\t1. 每次会有记录（班长复制记录）\n2. 课后作业 40%\n\t1. 学委负责收集，最后汇总给我，同时统计未提交人数\n3. 答辩 40%\n\n## 答辩要求\n- 每组提供两个大屏，答辩 20 分钟（上限）（8 分钟下限）\n- 点\n\t- 数据获取（20%）\n\t- 数据处理（30%）（VA 计算字段/UDI)/Python(-5)/excel(-5))\n\t- 数据分析（40%）(VA )\n\t- 印象（10%）\n- 数据从哪里来\n\t- 数据量 (100+）\n- 最后一天（7.1 日）\n","source":"_posts/01-商学院-答辩要求.md","raw":"---\ntitle: 01 商学院-答辩要求\nshare: true\ntags:\n  - public\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:47 \ncategories:\n  - research\n---\n \n## 考核标准\n1. 上课表现 20%（回答问题 + 听课状态）\n\t1. 每次会有记录（班长复制记录）\n2. 课后作业 40%\n\t1. 学委负责收集，最后汇总给我，同时统计未提交人数\n3. 答辩 40%\n\n## 答辩要求\n- 每组提供两个大屏，答辩 20 分钟（上限）（8 分钟下限）\n- 点\n\t- 数据获取（20%）\n\t- 数据处理（30%）（VA 计算字段/UDI)/Python(-5)/excel(-5))\n\t- 数据分析（40%）(VA )\n\t- 印象（10%）\n- 数据从哪里来\n\t- 数据量 (100+）\n- 最后一天（7.1 日）\n","slug":"01-商学院-答辩要求","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709d00064cv9fyau941a","content":"<h2 id=\"考核标准\">考核标准</h2>\n<ol>\n<li>上课表现 20%（回答问题 + 听课状态）\n<ol>\n<li>每次会有记录（班长复制记录）</li>\n</ol>\n</li>\n<li>课后作业 40%\n<ol>\n<li>学委负责收集，最后汇总给我，同时统计未提交人数</li>\n</ol>\n</li>\n<li>答辩 40%</li>\n</ol>\n<h2 id=\"答辩要求\">答辩要求</h2>\n<ul>\n<li>每组提供两个大屏，答辩 20 分钟（上限）（8 分钟下限）</li>\n<li>点\n<ul>\n<li>数据获取（20%）</li>\n<li>数据处理（30%）（VA 计算字段/UDI)/Python(-5)/excel(-5))</li>\n<li>数据分析（40%）(VA )</li>\n<li>印象（10%）</li>\n</ul>\n</li>\n<li>数据从哪里来\n<ul>\n<li>数据量 (100+）</li>\n</ul>\n</li>\n<li>最后一天（7.1 日）</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<h2 id=\"考核标准\">考核标准</h2>\n<ol>\n<li>上课表现 20%（回答问题 + 听课状态）\n<ol>\n<li>每次会有记录（班长复制记录）</li>\n</ol>\n</li>\n<li>课后作业 40%\n<ol>\n<li>学委负责收集，最后汇总给我，同时统计未提交人数</li>\n</ol>\n</li>\n<li>答辩 40%</li>\n</ol>\n<h2 id=\"答辩要求\">答辩要求</h2>\n<ul>\n<li>每组提供两个大屏，答辩 20 分钟（上限）（8 分钟下限）</li>\n<li>点\n<ul>\n<li>数据获取（20%）</li>\n<li>数据处理（30%）（VA 计算字段/UDI)/Python(-5)/excel(-5))</li>\n<li>数据分析（40%）(VA )</li>\n<li>印象（10%）</li>\n</ul>\n</li>\n<li>数据从哪里来\n<ul>\n<li>数据量 (100+）</li>\n</ul>\n</li>\n<li>最后一天（7.1 日）</li>\n</ul>\n"},{"title":"(2022)贵州大学商业数据分析课程看板","share":true,"date":"2022-11-14T07:13:57.000Z","updated":"2022-12-22T13:21:31.000Z","aliases":["(2022)贵州大学商业数据分析课程看板"],"_content":"## 课程准备\n\n上课之前需要准备的东西:\n\n- 实验平台账号 (具有权限, A 不能随意修改 B 的内容)\n- 实验平台数据库账号 (具有权限, A 不能随意修改 B 的内容)\n- (制定) 课程目标 (讲清楚数据获取/数据处理/数据可视化/建模)\n- 课程评分细则 (平时 40%, 期末 60%)\n- 学生反馈上课效果 https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&viewId=fv1&u=61728ba66289432cbdd9a95e1cf18b36  \n- 实验评分标准 https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&u=43d55ab43cb2463ea3d372c964ad3e9d\n- 课程技术支持/问题实施跟踪 (QQ 群)\n- 答辩及答辩安排 <a href='#答辩安排'>#答辩安排</a>\n- 上课资料分发/上课录屏分发 <a href='#课程材料'>#课程材料</a>\n- 平时作业安排 <a href='#平时作业'>#平时作业</a>\n- 平时作业评分规则 <a href='#作业给分基本原则'>#作业给分基本原则</a>\n- 课程大作业安排: 用户行为日志分析 <a href='#大作业'>#大作业</a>!\n- 作业如何提交 <a href='#作业提交相关链接'>#作业提交相关链接</a>\n## 课程涉及到的工具或平台\n- 数据获取: 八爪鱼, python(BS4)\n- 数据处理: Uniplore-UDI, pandas, numpy\n- 数据仓库: Uniplore-UDI\n- 数据可视化: Uinplore-VA, matplotlib, plotly\n- 建模: Uniplore-AI, keras(tensorflow), sk-learn\n- 数据存储: mysql, postgresql\n- 数据库管理工具: phpmyadmin, navicat\n## Day01\n\n<a href='{% post_path 01---商业数据分析中常见的技术 %}'>01---商业数据分析中常见的技术</a>\n\n## Day02\n\n<a href='{% post_path 02---商业数据分析中四大问题入门 %}'>02---商业数据分析中四大问题入门</a>\n\n## Day03\n\n<a href='{% post_path 03-课程内容安排 %}'>03-课程内容安排</a>  \n<a href='{% post_path 03-线性回归原理分析及实现 %}'>03-线性回归原理分析及实现</a>\n\n## Day04\n\n<a href='{% post_path 04-课程内容安排 %}'>04-课程内容安排</a>  \n<a href='{% post_path 04-手机品牌识别之神经网络 %}'>04-手机品牌识别之神经网络</a>  \n\n## Day05\n\n<a href='{% post_path 2022-12-14-后续课程内容安排 %}'>2022-12-14-后续课程内容安排</a>  \n<a href='{% post_path 数智教育-数据可视化创新大赛-数据分析 %}'>数智教育-数据可视化创新大赛-数据分析</a>  \n<a href='{% post_path 数仓建立 %}'>数仓建立</a>  \n\n## Day06\n\n🎉🎉🎉🎉🎉 <a href='{% post_path 决策树-decision-tree %}'>决策树-decision-tree</a>  \n\n## Day07\n- 机器学习常用术语 与概念 (训练集/测试集)  \n- 模拟项目模拟实战\n- <a href='{% post_path Day07-机器学习概念汇总-&-商业数据分析项目模拟实战 %}'>Day07-机器学习概念汇总-&-商业数据分析项目模拟实战</a>\n\n第三次实验报告 (已发到群里):\n\n```python\n大家好，在此收集商业数据分析第三次实验报告\n有效期截止到2022年12月8日16:34，麻烦在此之前点击以下链接将文件发送给我，支持发送任意格式的文件，感谢~\n链接：https://pan.baidu.com/disk/main#/transfer/send?surl=AAoAAAAAAA_DFA \n```\n\n## 大作业\n\n![static/attachment/Pasted image 20221128182222.png](/images/d6ebb2c8e78f3eebee2ccf56cbe0bb36e15b7ec0.png)\n\n## 学生反馈\n\n### 2022-11-10\n\nhttps://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&viewId=fv1&u=61728ba66289432cbdd9a95e1cf18b36  \n![static/attachment/Pasted image 20221115083614.png](/images/453e9f4901e5f1de0ae927c3d173d1e69018a583.png)\n\n## 课程材料\n\n```ad-note\n@all 各位同学大家好, 过去5天上课的 pdf/ppt/录屏/代码 已上传阿里云网盘  \n\n\n2022 贵州大学商业数据分析实验课\nhttps://www.aliyundrive.com/s/rrz7zBeywzs\n提取码: n09b\n\n```\n\n## 附件\n\nhttp://idis-micro.uniplore.cn/#/login?redirect=/datasource\n\n数据库:\n\n```python\n192.168.100.117: 3306\nhttp://192.168.100.17:10117/\n```\n\nhttps://gzuacmis.eicp.vip\n\n```python\n其他:\nsunwu@uniplore.io\nGZUTEACH16\n```\n\n## 作业提交相关链接\n\nhttps://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=BB08J2&u=43d55ab43cb2463ea3d372c964ad3e9d\n\n## 平时作业\n\n平时作业主要包括三次作业, 作业 1 让学生三个熟悉和了解<u>数据获取和处理</u>(分数占比 20%) , 作业 2 让学生熟悉和了解<u>数据可视化与数据建模 (分数占比 20%)</u>, 作业 3 是基于<u> \" 数智教育数据可视化创新大赛 \" 的综合作业</u> (分数占比 60%), 三次作业共同组成商业数据分析平时作业的分数. 每次作业的目标及内容:\n\n- 第一次作业: 数据获取与处理 (20%)\n\t- 八爪鱼爬取国美网站的手机数据\n\t- UDI 处理八爪鱼爬取的数据 <a href='{% post_path 02---商业数据分析中四大问题入门 %}'>02---商业数据分析中四大问题入门</a>\n\t\t- 去除“价格”中的￥符号\n\t\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）\n\t\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”\n\t\t- 类型转换：将去除“￥”的“价格”字段转换为 float\n\t\t- 类型转换：将“评价数”字段转换为 float\n- 第二次作业: 数据可视化与数据建模 (20%)\n\t- VA 实现数据可视化\n\t\t- TOP10 10\n\t- DM 实现线性回归\n- 第三次作业: 综合案例 (数据处理/可视化/建模)(60%)\n\t- <a href='{% post_path 2022-12-14-后续课程内容安排 %}#后续课程内容安排---数智教育数据可视化创新大赛项目'>2022-12-14-后续课程内容安排#后续课程内容安排---数智教育数据可视化创新大赛项目</a>\n\t- 这部分包括必做和选做\n\t\t- 👉 必做包括数据处理\n\t\t\t- 包括三个基于 AI 的必做作业 <a href='{% post_path 2022-12-14-后续课程内容安排 %}#AI-作业'>2022-12-14-后续课程内容安排#AI-作业</a>\n\t\t- 其他为选做\n\t- 基础分 70 分, 也就是说, 只做必做部分, 最高 70 分\n\t- 做了选做, 分数才能高于 70\n\n## 作业给分基本原则\n\n#### 每一段按 总分形式写 80-90 分\n- 写法: 段落中总分\n- 内容包含细节\n\n```python\n本次实验主要包括两个实验: 1)xx ,2)bbb\n\nxx 主要是xxx(总). 分\n```\n\n#### 包括细节 70-80 分\n\n```\n二、实验目的\n1．用八爪鱼爬取国美手机数据. \n\n2．使用UDI完成数据处理, 包括:\n\t- 去除“价格”中的￥符号\n\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）\n\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”\n\t- 类型转换：将去除“￥”的“价格”字段转换为 float\n\t- 类型转换：将“评价数”字段转换为 float\n```\n\n#### 写的很粗, 60-70 分\n\n```\n二、实验目的\n1．用八爪鱼爬取国美手机数据\n2．UDI数据处理。 \n```\n\n#### 没有这一节 0-60 分\n\n### 评分细则\n\n两个人改同一份作业, 分数差距太大 (>10) 就重来\n\nhttps://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&u=43d55ab43cb2463ea3d372c964ad3e9d\n\n## 答辩安排\n\n✨ 各位同学, 接李老师要求, 课程大作业 (用户行为日志分析) 需要各位进行 **线上答辩** 与汇报✨\n\n1. ✨ 答辩日期: 2023-01-04 左右, 具体时间待定\n2. ✨ 答辩要求: 以组为答辩单位 (演示材料为 PPT), 分组 https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\n3. ✨ 答辩时间: 每个组 10 分钟, 超时直接结束\n4. 🔥 答辩前需要提交的材料: 1. 答辩 PPT 2.实验报告.\n5. ✨ 评分项目 (暂定): https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b\n6. ✨ 注意事项: 请在答辩前提交 PPT 与实验报告, 否者视为放弃答辩.\n7. 其他: 之前的大作业提交时间 (12 月 30) 变为 1 月 4 号.\n\n<a href='{% post_path 答辩可能问题列表 %}'>答辩可能问题列表</a>\n\n\n各位同学, 因我个人原因(咳得厉害), 答辩定于本周五早8:00-12:00(01-06日)\n1. ✨ 汇报顺序: https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\n2. ✨ 答辩时间: 每组答辩10分钟(汇报8分钟, 提问2分钟)\n3. ✨ 评分项目 (暂定): https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b\n4. ✨ 答辩要求: 以组为答辩单位 (演示材料为 PPT), 分组 https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\n5. ✨ 答辩PPT和报告提交链接(1月5日22:00前提交完成):  https://pan.baidu.com/disk/main#/transfer/send?surl=ACsAAAAAAA_yqQ ","source":"_posts/(2022)贵州大学商业数据分析课程看板.md","raw":"---\ntitle: (2022)贵州大学商业数据分析课程看板\nshare: true\ntags:\n  - public\n  - 培训材料/贵州大学商业数据分析\ndate: 2022-11-14 15:13:57 \nupdated: 2022-12-22 21:21:31 \ncategories: [uncategory]\naliases:\n  - (2022)贵州大学商业数据分析课程看板\n---\n## 课程准备\n\n上课之前需要准备的东西:\n\n- 实验平台账号 (具有权限, A 不能随意修改 B 的内容)\n- 实验平台数据库账号 (具有权限, A 不能随意修改 B 的内容)\n- (制定) 课程目标 (讲清楚数据获取/数据处理/数据可视化/建模)\n- 课程评分细则 (平时 40%, 期末 60%)\n- 学生反馈上课效果 https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&viewId=fv1&u=61728ba66289432cbdd9a95e1cf18b36  \n- 实验评分标准 https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&u=43d55ab43cb2463ea3d372c964ad3e9d\n- 课程技术支持/问题实施跟踪 (QQ 群)\n- 答辩及答辩安排 <a href='#答辩安排'>#答辩安排</a>\n- 上课资料分发/上课录屏分发 <a href='#课程材料'>#课程材料</a>\n- 平时作业安排 <a href='#平时作业'>#平时作业</a>\n- 平时作业评分规则 <a href='#作业给分基本原则'>#作业给分基本原则</a>\n- 课程大作业安排: 用户行为日志分析 <a href='#大作业'>#大作业</a>!\n- 作业如何提交 <a href='#作业提交相关链接'>#作业提交相关链接</a>\n## 课程涉及到的工具或平台\n- 数据获取: 八爪鱼, python(BS4)\n- 数据处理: Uniplore-UDI, pandas, numpy\n- 数据仓库: Uniplore-UDI\n- 数据可视化: Uinplore-VA, matplotlib, plotly\n- 建模: Uniplore-AI, keras(tensorflow), sk-learn\n- 数据存储: mysql, postgresql\n- 数据库管理工具: phpmyadmin, navicat\n## Day01\n\n<a href='{% post_path 01---商业数据分析中常见的技术 %}'>01---商业数据分析中常见的技术</a>\n\n## Day02\n\n<a href='{% post_path 02---商业数据分析中四大问题入门 %}'>02---商业数据分析中四大问题入门</a>\n\n## Day03\n\n<a href='{% post_path 03-课程内容安排 %}'>03-课程内容安排</a>  \n<a href='{% post_path 03-线性回归原理分析及实现 %}'>03-线性回归原理分析及实现</a>\n\n## Day04\n\n<a href='{% post_path 04-课程内容安排 %}'>04-课程内容安排</a>  \n<a href='{% post_path 04-手机品牌识别之神经网络 %}'>04-手机品牌识别之神经网络</a>  \n\n## Day05\n\n<a href='{% post_path 2022-12-14-后续课程内容安排 %}'>2022-12-14-后续课程内容安排</a>  \n<a href='{% post_path 数智教育-数据可视化创新大赛-数据分析 %}'>数智教育-数据可视化创新大赛-数据分析</a>  \n<a href='{% post_path 数仓建立 %}'>数仓建立</a>  \n\n## Day06\n\n🎉🎉🎉🎉🎉 <a href='{% post_path 决策树-decision-tree %}'>决策树-decision-tree</a>  \n\n## Day07\n- 机器学习常用术语 与概念 (训练集/测试集)  \n- 模拟项目模拟实战\n- <a href='{% post_path Day07-机器学习概念汇总-&-商业数据分析项目模拟实战 %}'>Day07-机器学习概念汇总-&-商业数据分析项目模拟实战</a>\n\n第三次实验报告 (已发到群里):\n\n```python\n大家好，在此收集商业数据分析第三次实验报告\n有效期截止到2022年12月8日16:34，麻烦在此之前点击以下链接将文件发送给我，支持发送任意格式的文件，感谢~\n链接：https://pan.baidu.com/disk/main#/transfer/send?surl=AAoAAAAAAA_DFA \n```\n\n## 大作业\n\n![static/attachment/Pasted image 20221128182222.png](/images/d6ebb2c8e78f3eebee2ccf56cbe0bb36e15b7ec0.png)\n\n## 学生反馈\n\n### 2022-11-10\n\nhttps://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&viewId=fv1&u=61728ba66289432cbdd9a95e1cf18b36  \n![static/attachment/Pasted image 20221115083614.png](/images/453e9f4901e5f1de0ae927c3d173d1e69018a583.png)\n\n## 课程材料\n\n```ad-note\n@all 各位同学大家好, 过去5天上课的 pdf/ppt/录屏/代码 已上传阿里云网盘  \n\n\n2022 贵州大学商业数据分析实验课\nhttps://www.aliyundrive.com/s/rrz7zBeywzs\n提取码: n09b\n\n```\n\n## 附件\n\nhttp://idis-micro.uniplore.cn/#/login?redirect=/datasource\n\n数据库:\n\n```python\n192.168.100.117: 3306\nhttp://192.168.100.17:10117/\n```\n\nhttps://gzuacmis.eicp.vip\n\n```python\n其他:\nsunwu@uniplore.io\nGZUTEACH16\n```\n\n## 作业提交相关链接\n\nhttps://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=BB08J2&u=43d55ab43cb2463ea3d372c964ad3e9d\n\n## 平时作业\n\n平时作业主要包括三次作业, 作业 1 让学生三个熟悉和了解<u>数据获取和处理</u>(分数占比 20%) , 作业 2 让学生熟悉和了解<u>数据可视化与数据建模 (分数占比 20%)</u>, 作业 3 是基于<u> \" 数智教育数据可视化创新大赛 \" 的综合作业</u> (分数占比 60%), 三次作业共同组成商业数据分析平时作业的分数. 每次作业的目标及内容:\n\n- 第一次作业: 数据获取与处理 (20%)\n\t- 八爪鱼爬取国美网站的手机数据\n\t- UDI 处理八爪鱼爬取的数据 <a href='{% post_path 02---商业数据分析中四大问题入门 %}'>02---商业数据分析中四大问题入门</a>\n\t\t- 去除“价格”中的￥符号\n\t\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）\n\t\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”\n\t\t- 类型转换：将去除“￥”的“价格”字段转换为 float\n\t\t- 类型转换：将“评价数”字段转换为 float\n- 第二次作业: 数据可视化与数据建模 (20%)\n\t- VA 实现数据可视化\n\t\t- TOP10 10\n\t- DM 实现线性回归\n- 第三次作业: 综合案例 (数据处理/可视化/建模)(60%)\n\t- <a href='{% post_path 2022-12-14-后续课程内容安排 %}#后续课程内容安排---数智教育数据可视化创新大赛项目'>2022-12-14-后续课程内容安排#后续课程内容安排---数智教育数据可视化创新大赛项目</a>\n\t- 这部分包括必做和选做\n\t\t- 👉 必做包括数据处理\n\t\t\t- 包括三个基于 AI 的必做作业 <a href='{% post_path 2022-12-14-后续课程内容安排 %}#AI-作业'>2022-12-14-后续课程内容安排#AI-作业</a>\n\t\t- 其他为选做\n\t- 基础分 70 分, 也就是说, 只做必做部分, 最高 70 分\n\t- 做了选做, 分数才能高于 70\n\n## 作业给分基本原则\n\n#### 每一段按 总分形式写 80-90 分\n- 写法: 段落中总分\n- 内容包含细节\n\n```python\n本次实验主要包括两个实验: 1)xx ,2)bbb\n\nxx 主要是xxx(总). 分\n```\n\n#### 包括细节 70-80 分\n\n```\n二、实验目的\n1．用八爪鱼爬取国美手机数据. \n\n2．使用UDI完成数据处理, 包括:\n\t- 去除“价格”中的￥符号\n\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）\n\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”\n\t- 类型转换：将去除“￥”的“价格”字段转换为 float\n\t- 类型转换：将“评价数”字段转换为 float\n```\n\n#### 写的很粗, 60-70 分\n\n```\n二、实验目的\n1．用八爪鱼爬取国美手机数据\n2．UDI数据处理。 \n```\n\n#### 没有这一节 0-60 分\n\n### 评分细则\n\n两个人改同一份作业, 分数差距太大 (>10) 就重来\n\nhttps://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&u=43d55ab43cb2463ea3d372c964ad3e9d\n\n## 答辩安排\n\n✨ 各位同学, 接李老师要求, 课程大作业 (用户行为日志分析) 需要各位进行 **线上答辩** 与汇报✨\n\n1. ✨ 答辩日期: 2023-01-04 左右, 具体时间待定\n2. ✨ 答辩要求: 以组为答辩单位 (演示材料为 PPT), 分组 https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\n3. ✨ 答辩时间: 每个组 10 分钟, 超时直接结束\n4. 🔥 答辩前需要提交的材料: 1. 答辩 PPT 2.实验报告.\n5. ✨ 评分项目 (暂定): https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b\n6. ✨ 注意事项: 请在答辩前提交 PPT 与实验报告, 否者视为放弃答辩.\n7. 其他: 之前的大作业提交时间 (12 月 30) 变为 1 月 4 号.\n\n<a href='{% post_path 答辩可能问题列表 %}'>答辩可能问题列表</a>\n\n\n各位同学, 因我个人原因(咳得厉害), 答辩定于本周五早8:00-12:00(01-06日)\n1. ✨ 汇报顺序: https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\n2. ✨ 答辩时间: 每组答辩10分钟(汇报8分钟, 提问2分钟)\n3. ✨ 评分项目 (暂定): https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b\n4. ✨ 答辩要求: 以组为答辩单位 (演示材料为 PPT), 分组 https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\n5. ✨ 答辩PPT和报告提交链接(1月5日22:00前提交完成):  https://pan.baidu.com/disk/main#/transfer/send?surl=ACsAAAAAAA_yqQ ","slug":"(2022)贵州大学商业数据分析课程看板","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709e00074cv9blal55q9","content":"<h2 id=\"课程准备\">课程准备</h2>\n<p>上课之前需要准备的东西:</p>\n<ul>\n<li>实验平台账号 (具有权限, A 不能随意修改 B 的内容)</li>\n<li>实验平台数据库账号 (具有权限, A 不能随意修改 B 的内容)</li>\n<li>(制定) 课程目标 (讲清楚数据获取/数据处理/数据可视化/建模)</li>\n<li>课程评分细则 (平时 40%, 期末 60%)</li>\n<li>学生反馈上课效果 <a href=\"https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&amp;viewId=fv1&amp;u=61728ba66289432cbdd9a95e1cf18b36\">https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&amp;viewId=fv1&amp;u=61728ba66289432cbdd9a95e1cf18b36</a></li>\n<li>实验评分标准 <a href=\"https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&amp;u=43d55ab43cb2463ea3d372c964ad3e9d\">https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&amp;u=43d55ab43cb2463ea3d372c964ad3e9d</a></li>\n<li>课程技术支持/问题实施跟踪 (QQ 群)</li>\n<li>答辩及答辩安排 <a href='#答辩安排'>#答辩安排</a></li>\n<li>上课资料分发/上课录屏分发 <a href='#课程材料'>#课程材料</a></li>\n<li>平时作业安排 <a href='#平时作业'>#平时作业</a></li>\n<li>平时作业评分规则 <a href='#作业给分基本原则'>#作业给分基本原则</a></li>\n<li>课程大作业安排: 用户行为日志分析 <a href='#大作业'>#大作业</a>!</li>\n<li>作业如何提交 <a href='#作业提交相关链接'>#作业提交相关链接</a></li>\n</ul>\n<h2 id=\"课程涉及到的工具或平台\">课程涉及到的工具或平台</h2>\n<ul>\n<li>数据获取: 八爪鱼, python(BS4)</li>\n<li>数据处理: Uniplore-UDI, pandas, numpy</li>\n<li>数据仓库: Uniplore-UDI</li>\n<li>数据可视化: Uinplore-VA, matplotlib, plotly</li>\n<li>建模: Uniplore-AI, keras(tensorflow), sk-learn</li>\n<li>数据存储: mysql, postgresql</li>\n<li>数据库管理工具: phpmyadmin, navicat</li>\n</ul>\n<h2 id=\"Day01\">Day01</h2>\n<p><a href='/uncategory/975e70219d8d.html'>01—商业数据分析中常见的技术</a></p>\n<h2 id=\"Day02\">Day02</h2>\n<p><a href='/uncategory/4d6c8d229ceb.html'>02—商业数据分析中四大问题入门</a></p>\n<h2 id=\"Day03\">Day03</h2>\n<p><a href='/public/217fee8f44b8.html'>03-课程内容安排</a><br>\n<a href='/uncategory/63f8e4648fec.html'>03-线性回归原理分析及实现</a></p>\n<h2 id=\"Day04\">Day04</h2>\n<p><a href='/uncategory/777ac2a48466.html'>04-课程内容安排</a><br>\n<a href='/uncategory/316ec7ed5cda.html'>04-手机品牌识别之神经网络</a></p>\n<h2 id=\"Day05\">Day05</h2>\n<p><a href=''>2022-12-14-后续课程内容安排</a><br>\n<a href='/uncategory/6b97d33e61ea.html'>数智教育-数据可视化创新大赛-数据分析</a><br>\n<a href=''>数仓建立</a></p>\n<h2 id=\"Day06\">Day06</h2>\n<p>🎉🎉🎉🎉🎉 <a href=''>决策树-decision-tree</a></p>\n<h2 id=\"Day07\">Day07</h2>\n<ul>\n<li>机器学习常用术语 与概念 (训练集/测试集)</li>\n<li>模拟项目模拟实战</li>\n<li><a href=''>Day07-机器学习概念汇总-&amp;-商业数据分析项目模拟实战</a></li>\n</ul>\n<p>第三次实验报告 (已发到群里):</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">大家好，在此收集商业数据分析第三次实验报告</span><br><span class=\"line\">有效期截止到<span class=\"number\">2022</span>年<span class=\"number\">12</span>月<span class=\"number\">8</span>日<span class=\"number\">16</span>:<span class=\"number\">34</span>，麻烦在此之前点击以下链接将文件发送给我，支持发送任意格式的文件，感谢~</span><br><span class=\"line\">链接：https://pan.baidu.com/disk/main<span class=\"comment\">#/transfer/send?surl=AAoAAAAAAA_DFA </span></span><br></pre></td></tr></table></figure>\n<h2 id=\"大作业\">大作业</h2>\n<p><img src=\"/images/d6ebb2c8e78f3eebee2ccf56cbe0bb36e15b7ec0.png\" alt=\"static/attachment/Pasted image 20221128182222.png\"></p>\n<h2 id=\"学生反馈\">学生反馈</h2>\n<h3 id=\"2022-11-10\">2022-11-10</h3>\n<p><a href=\"https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&amp;viewId=fv1&amp;u=61728ba66289432cbdd9a95e1cf18b36\">https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&amp;viewId=fv1&amp;u=61728ba66289432cbdd9a95e1cf18b36</a><br>\n<img src=\"/images/453e9f4901e5f1de0ae927c3d173d1e69018a583.png\" alt=\"static/attachment/Pasted image 20221115083614.png\"></p>\n<h2 id=\"课程材料\">课程材料</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@all 各位同学大家好, 过去5天上课的 pdf/ppt/录屏/代码 已上传阿里云网盘  </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">2022 贵州大学商业数据分析实验课</span><br><span class=\"line\">https://www.aliyundrive.com/s/rrz7zBeywzs</span><br><span class=\"line\">提取码: n09b</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"附件\">附件</h2>\n<p><a href=\"http://idis-micro.uniplore.cn/#/login?redirect=/datasource\">http://idis-micro.uniplore.cn/#/login?redirect=/datasource</a></p>\n<p>数据库:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.100</span><span class=\"number\">.117</span>: <span class=\"number\">3306</span></span><br><span class=\"line\">http://<span class=\"number\">192.168</span><span class=\"number\">.100</span><span class=\"number\">.17</span>:<span class=\"number\">10117</span>/</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://gzuacmis.eicp.vip\">https://gzuacmis.eicp.vip</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">其他:</span><br><span class=\"line\">sunwu@uniplore.io</span><br><span class=\"line\">GZUTEACH16</span><br></pre></td></tr></table></figure>\n<h2 id=\"作业提交相关链接\">作业提交相关链接</h2>\n<p><a href=\"https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=BB08J2&amp;u=43d55ab43cb2463ea3d372c964ad3e9d\">https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=BB08J2&amp;u=43d55ab43cb2463ea3d372c964ad3e9d</a></p>\n<h2 id=\"平时作业\">平时作业</h2>\n<p>平时作业主要包括三次作业, 作业 1 让学生三个熟悉和了解<u>数据获取和处理</u>(分数占比 20%) , 作业 2 让学生熟悉和了解<u>数据可视化与数据建模 (分数占比 20%)</u>, 作业 3 是基于<u> &quot; 数智教育数据可视化创新大赛 &quot; 的综合作业</u> (分数占比 60%), 三次作业共同组成商业数据分析平时作业的分数. 每次作业的目标及内容:</p>\n<ul>\n<li>第一次作业: 数据获取与处理 (20%)\n<ul>\n<li>八爪鱼爬取国美网站的手机数据</li>\n<li>UDI 处理八爪鱼爬取的数据 <a href='/uncategory/4d6c8d229ceb.html'>02—商业数据分析中四大问题入门</a>\n<ul>\n<li>去除“价格”中的￥符号</li>\n<li>提取“标题”中的手机品牌，如 Apple、苹果、华为）</li>\n<li>合并相同品牌，如将“Apple”和“苹果”合并为“苹果”</li>\n<li>类型转换：将去除“￥”的“价格”字段转换为 float</li>\n<li>类型转换：将“评价数”字段转换为 float</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>第二次作业: 数据可视化与数据建模 (20%)\n<ul>\n<li>VA 实现数据可视化\n<ul>\n<li>TOP10 10</li>\n</ul>\n</li>\n<li>DM 实现线性回归</li>\n</ul>\n</li>\n<li>第三次作业: 综合案例 (数据处理/可视化/建模)(60%)\n<ul>\n<li><a href='#后续课程内容安排---数智教育数据可视化创新大赛项目'>2022-12-14-后续课程内容安排#后续课程内容安排—数智教育数据可视化创新大赛项目</a></li>\n<li>这部分包括必做和选做\n<ul>\n<li>👉 必做包括数据处理\n<ul>\n<li>包括三个基于 AI 的必做作业 <a href='#AI-作业'>2022-12-14-后续课程内容安排#AI-作业</a></li>\n</ul>\n</li>\n<li>其他为选做</li>\n</ul>\n</li>\n<li>基础分 70 分, 也就是说, 只做必做部分, 最高 70 分</li>\n<li>做了选做, 分数才能高于 70</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"作业给分基本原则\">作业给分基本原则</h2>\n<h4 id=\"每一段按-总分形式写-80-90-分\">每一段按 总分形式写 80-90 分</h4>\n<ul>\n<li>写法: 段落中总分</li>\n<li>内容包含细节</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">本次实验主要包括两个实验: <span class=\"number\">1</span>)xx ,<span class=\"number\">2</span>)bbb</span><br><span class=\"line\"></span><br><span class=\"line\">xx 主要是xxx(总). 分</span><br></pre></td></tr></table></figure>\n<h4 id=\"包括细节-70-80-分\">包括细节 70-80 分</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">二、实验目的</span><br><span class=\"line\">1．用八爪鱼爬取国美手机数据. </span><br><span class=\"line\"></span><br><span class=\"line\">2．使用UDI完成数据处理, 包括:</span><br><span class=\"line\">\t- 去除“价格”中的￥符号</span><br><span class=\"line\">\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）</span><br><span class=\"line\">\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”</span><br><span class=\"line\">\t- 类型转换：将去除“￥”的“价格”字段转换为 float</span><br><span class=\"line\">\t- 类型转换：将“评价数”字段转换为 float</span><br></pre></td></tr></table></figure>\n<h4 id=\"写的很粗-60-70-分\">写的很粗, 60-70 分</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">二、实验目的</span><br><span class=\"line\">1．用八爪鱼爬取国美手机数据</span><br><span class=\"line\">2．UDI数据处理。 </span><br></pre></td></tr></table></figure>\n<h4 id=\"没有这一节-0-60-分\">没有这一节 0-60 分</h4>\n<h3 id=\"评分细则\">评分细则</h3>\n<p>两个人改同一份作业, 分数差距太大 (&gt;10) 就重来</p>\n<p><a href=\"https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&amp;u=43d55ab43cb2463ea3d372c964ad3e9d\">https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&amp;u=43d55ab43cb2463ea3d372c964ad3e9d</a></p>\n<h2 id=\"答辩安排\">答辩安排</h2>\n<p>✨ 各位同学, 接李老师要求, 课程大作业 (用户行为日志分析) 需要各位进行 <strong>线上答辩</strong> 与汇报✨</p>\n<ol>\n<li>✨ 答辩日期: 2023-01-04 左右, 具体时间待定</li>\n<li>✨ 答辩要求: 以组为答辩单位 (演示材料为 PPT), 分组 <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM</a></li>\n<li>✨ 答辩时间: 每个组 10 分钟, 超时直接结束</li>\n<li>🔥 答辩前需要提交的材料: 1. 答辩 PPT 2.实验报告.</li>\n<li>✨ 评分项目 (暂定): <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b</a></li>\n<li>✨ 注意事项: 请在答辩前提交 PPT 与实验报告, 否者视为放弃答辩.</li>\n<li>其他: 之前的大作业提交时间 (12 月 30) 变为 1 月 4 号.</li>\n</ol>\n<p><a href='/research/97cff81c9ab0.html'>答辩可能问题列表</a></p>\n<p>各位同学, 因我个人原因(咳得厉害), 答辩定于本周五早8:00-12:00(01-06日)</p>\n<ol>\n<li>✨ 汇报顺序: <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM</a></li>\n<li>✨ 答辩时间: 每组答辩10分钟(汇报8分钟, 提问2分钟)</li>\n<li>✨ 评分项目 (暂定): <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b</a></li>\n<li>✨ 答辩要求: 以组为答辩单位 (演示材料为 PPT), 分组 <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM</a></li>\n<li>✨ 答辩PPT和报告提交链接(1月5日22:00前提交完成):  <a href=\"https://pan.baidu.com/disk/main#/transfer/send?surl=ACsAAAAAAA_yqQ\">https://pan.baidu.com/disk/main#/transfer/send?surl=ACsAAAAAAA_yqQ</a></li>\n</ol>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover3.jpg","excerpt":"","more":"<h2 id=\"课程准备\">课程准备</h2>\n<p>上课之前需要准备的东西:</p>\n<ul>\n<li>实验平台账号 (具有权限, A 不能随意修改 B 的内容)</li>\n<li>实验平台数据库账号 (具有权限, A 不能随意修改 B 的内容)</li>\n<li>(制定) 课程目标 (讲清楚数据获取/数据处理/数据可视化/建模)</li>\n<li>课程评分细则 (平时 40%, 期末 60%)</li>\n<li>学生反馈上课效果 <a href=\"https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&amp;viewId=fv1&amp;u=61728ba66289432cbdd9a95e1cf18b36\">https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&amp;viewId=fv1&amp;u=61728ba66289432cbdd9a95e1cf18b36</a></li>\n<li>实验评分标准 <a href=\"https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&amp;u=43d55ab43cb2463ea3d372c964ad3e9d\">https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&amp;u=43d55ab43cb2463ea3d372c964ad3e9d</a></li>\n<li>课程技术支持/问题实施跟踪 (QQ 群)</li>\n<li>答辩及答辩安排 <a href='#答辩安排'>#答辩安排</a></li>\n<li>上课资料分发/上课录屏分发 <a href='#课程材料'>#课程材料</a></li>\n<li>平时作业安排 <a href='#平时作业'>#平时作业</a></li>\n<li>平时作业评分规则 <a href='#作业给分基本原则'>#作业给分基本原则</a></li>\n<li>课程大作业安排: 用户行为日志分析 <a href='#大作业'>#大作业</a>!</li>\n<li>作业如何提交 <a href='#作业提交相关链接'>#作业提交相关链接</a></li>\n</ul>\n<h2 id=\"课程涉及到的工具或平台\">课程涉及到的工具或平台</h2>\n<ul>\n<li>数据获取: 八爪鱼, python(BS4)</li>\n<li>数据处理: Uniplore-UDI, pandas, numpy</li>\n<li>数据仓库: Uniplore-UDI</li>\n<li>数据可视化: Uinplore-VA, matplotlib, plotly</li>\n<li>建模: Uniplore-AI, keras(tensorflow), sk-learn</li>\n<li>数据存储: mysql, postgresql</li>\n<li>数据库管理工具: phpmyadmin, navicat</li>\n</ul>\n<h2 id=\"Day01\">Day01</h2>\n<p><a href='/uncategory/975e70219d8d.html'>01—商业数据分析中常见的技术</a></p>\n<h2 id=\"Day02\">Day02</h2>\n<p><a href='/uncategory/4d6c8d229ceb.html'>02—商业数据分析中四大问题入门</a></p>\n<h2 id=\"Day03\">Day03</h2>\n<p><a href='/public/217fee8f44b8.html'>03-课程内容安排</a><br>\n<a href='/uncategory/63f8e4648fec.html'>03-线性回归原理分析及实现</a></p>\n<h2 id=\"Day04\">Day04</h2>\n<p><a href='/uncategory/777ac2a48466.html'>04-课程内容安排</a><br>\n<a href='/uncategory/316ec7ed5cda.html'>04-手机品牌识别之神经网络</a></p>\n<h2 id=\"Day05\">Day05</h2>\n<p><a href=''>2022-12-14-后续课程内容安排</a><br>\n<a href='/uncategory/6b97d33e61ea.html'>数智教育-数据可视化创新大赛-数据分析</a><br>\n<a href=''>数仓建立</a></p>\n<h2 id=\"Day06\">Day06</h2>\n<p>🎉🎉🎉🎉🎉 <a href=''>决策树-decision-tree</a></p>\n<h2 id=\"Day07\">Day07</h2>\n<ul>\n<li>机器学习常用术语 与概念 (训练集/测试集)</li>\n<li>模拟项目模拟实战</li>\n<li><a href=''>Day07-机器学习概念汇总-&amp;-商业数据分析项目模拟实战</a></li>\n</ul>\n<p>第三次实验报告 (已发到群里):</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">大家好，在此收集商业数据分析第三次实验报告</span><br><span class=\"line\">有效期截止到<span class=\"number\">2022</span>年<span class=\"number\">12</span>月<span class=\"number\">8</span>日<span class=\"number\">16</span>:<span class=\"number\">34</span>，麻烦在此之前点击以下链接将文件发送给我，支持发送任意格式的文件，感谢~</span><br><span class=\"line\">链接：https://pan.baidu.com/disk/main<span class=\"comment\">#/transfer/send?surl=AAoAAAAAAA_DFA </span></span><br></pre></td></tr></table></figure>\n<h2 id=\"大作业\">大作业</h2>\n<p><img src=\"/images/d6ebb2c8e78f3eebee2ccf56cbe0bb36e15b7ec0.png\" alt=\"static/attachment/Pasted image 20221128182222.png\"></p>\n<h2 id=\"学生反馈\">学生反馈</h2>\n<h3 id=\"2022-11-10\">2022-11-10</h3>\n<p><a href=\"https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&amp;viewId=fv1&amp;u=61728ba66289432cbdd9a95e1cf18b36\">https://docs.qq.com/sheet/DU2xFRk9VaFVac1hh?tab=BB08J2&amp;viewId=fv1&amp;u=61728ba66289432cbdd9a95e1cf18b36</a><br>\n<img src=\"/images/453e9f4901e5f1de0ae927c3d173d1e69018a583.png\" alt=\"static/attachment/Pasted image 20221115083614.png\"></p>\n<h2 id=\"课程材料\">课程材料</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@all 各位同学大家好, 过去5天上课的 pdf/ppt/录屏/代码 已上传阿里云网盘  </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">2022 贵州大学商业数据分析实验课</span><br><span class=\"line\">https://www.aliyundrive.com/s/rrz7zBeywzs</span><br><span class=\"line\">提取码: n09b</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"附件\">附件</h2>\n<p><a href=\"http://idis-micro.uniplore.cn/#/login?redirect=/datasource\">http://idis-micro.uniplore.cn/#/login?redirect=/datasource</a></p>\n<p>数据库:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">192.168</span><span class=\"number\">.100</span><span class=\"number\">.117</span>: <span class=\"number\">3306</span></span><br><span class=\"line\">http://<span class=\"number\">192.168</span><span class=\"number\">.100</span><span class=\"number\">.17</span>:<span class=\"number\">10117</span>/</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://gzuacmis.eicp.vip\">https://gzuacmis.eicp.vip</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">其他:</span><br><span class=\"line\">sunwu@uniplore.io</span><br><span class=\"line\">GZUTEACH16</span><br></pre></td></tr></table></figure>\n<h2 id=\"作业提交相关链接\">作业提交相关链接</h2>\n<p><a href=\"https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=BB08J2&amp;u=43d55ab43cb2463ea3d372c964ad3e9d\">https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=BB08J2&amp;u=43d55ab43cb2463ea3d372c964ad3e9d</a></p>\n<h2 id=\"平时作业\">平时作业</h2>\n<p>平时作业主要包括三次作业, 作业 1 让学生三个熟悉和了解<u>数据获取和处理</u>(分数占比 20%) , 作业 2 让学生熟悉和了解<u>数据可视化与数据建模 (分数占比 20%)</u>, 作业 3 是基于<u> &quot; 数智教育数据可视化创新大赛 &quot; 的综合作业</u> (分数占比 60%), 三次作业共同组成商业数据分析平时作业的分数. 每次作业的目标及内容:</p>\n<ul>\n<li>第一次作业: 数据获取与处理 (20%)\n<ul>\n<li>八爪鱼爬取国美网站的手机数据</li>\n<li>UDI 处理八爪鱼爬取的数据 <a href='/uncategory/4d6c8d229ceb.html'>02—商业数据分析中四大问题入门</a>\n<ul>\n<li>去除“价格”中的￥符号</li>\n<li>提取“标题”中的手机品牌，如 Apple、苹果、华为）</li>\n<li>合并相同品牌，如将“Apple”和“苹果”合并为“苹果”</li>\n<li>类型转换：将去除“￥”的“价格”字段转换为 float</li>\n<li>类型转换：将“评价数”字段转换为 float</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>第二次作业: 数据可视化与数据建模 (20%)\n<ul>\n<li>VA 实现数据可视化\n<ul>\n<li>TOP10 10</li>\n</ul>\n</li>\n<li>DM 实现线性回归</li>\n</ul>\n</li>\n<li>第三次作业: 综合案例 (数据处理/可视化/建模)(60%)\n<ul>\n<li><a href='#后续课程内容安排---数智教育数据可视化创新大赛项目'>2022-12-14-后续课程内容安排#后续课程内容安排—数智教育数据可视化创新大赛项目</a></li>\n<li>这部分包括必做和选做\n<ul>\n<li>👉 必做包括数据处理\n<ul>\n<li>包括三个基于 AI 的必做作业 <a href='#AI-作业'>2022-12-14-后续课程内容安排#AI-作业</a></li>\n</ul>\n</li>\n<li>其他为选做</li>\n</ul>\n</li>\n<li>基础分 70 分, 也就是说, 只做必做部分, 最高 70 分</li>\n<li>做了选做, 分数才能高于 70</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"作业给分基本原则\">作业给分基本原则</h2>\n<h4 id=\"每一段按-总分形式写-80-90-分\">每一段按 总分形式写 80-90 分</h4>\n<ul>\n<li>写法: 段落中总分</li>\n<li>内容包含细节</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">本次实验主要包括两个实验: <span class=\"number\">1</span>)xx ,<span class=\"number\">2</span>)bbb</span><br><span class=\"line\"></span><br><span class=\"line\">xx 主要是xxx(总). 分</span><br></pre></td></tr></table></figure>\n<h4 id=\"包括细节-70-80-分\">包括细节 70-80 分</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">二、实验目的</span><br><span class=\"line\">1．用八爪鱼爬取国美手机数据. </span><br><span class=\"line\"></span><br><span class=\"line\">2．使用UDI完成数据处理, 包括:</span><br><span class=\"line\">\t- 去除“价格”中的￥符号</span><br><span class=\"line\">\t- 提取“标题”中的手机品牌，如 Apple、苹果、华为）</span><br><span class=\"line\">\t- 合并相同品牌，如将“Apple”和“苹果”合并为“苹果”</span><br><span class=\"line\">\t- 类型转换：将去除“￥”的“价格”字段转换为 float</span><br><span class=\"line\">\t- 类型转换：将“评价数”字段转换为 float</span><br></pre></td></tr></table></figure>\n<h4 id=\"写的很粗-60-70-分\">写的很粗, 60-70 分</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">二、实验目的</span><br><span class=\"line\">1．用八爪鱼爬取国美手机数据</span><br><span class=\"line\">2．UDI数据处理。 </span><br></pre></td></tr></table></figure>\n<h4 id=\"没有这一节-0-60-分\">没有这一节 0-60 分</h4>\n<h3 id=\"评分细则\">评分细则</h3>\n<p>两个人改同一份作业, 分数差距太大 (&gt;10) 就重来</p>\n<p><a href=\"https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&amp;u=43d55ab43cb2463ea3d372c964ad3e9d\">https://docs.qq.com/sheet/DU3hpaXNjYXdPVGdY?tab=tlyt21&amp;u=43d55ab43cb2463ea3d372c964ad3e9d</a></p>\n<h2 id=\"答辩安排\">答辩安排</h2>\n<p>✨ 各位同学, 接李老师要求, 课程大作业 (用户行为日志分析) 需要各位进行 <strong>线上答辩</strong> 与汇报✨</p>\n<ol>\n<li>✨ 答辩日期: 2023-01-04 左右, 具体时间待定</li>\n<li>✨ 答辩要求: 以组为答辩单位 (演示材料为 PPT), 分组 <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM</a></li>\n<li>✨ 答辩时间: 每个组 10 分钟, 超时直接结束</li>\n<li>🔥 答辩前需要提交的材料: 1. 答辩 PPT 2.实验报告.</li>\n<li>✨ 评分项目 (暂定): <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b</a></li>\n<li>✨ 注意事项: 请在答辩前提交 PPT 与实验报告, 否者视为放弃答辩.</li>\n<li>其他: 之前的大作业提交时间 (12 月 30) 变为 1 月 4 号.</li>\n</ol>\n<p><a href='/research/97cff81c9ab0.html'>答辩可能问题列表</a></p>\n<p>各位同学, 因我个人原因(咳得厉害), 答辩定于本周五早8:00-12:00(01-06日)</p>\n<ol>\n<li>✨ 汇报顺序: <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM</a></li>\n<li>✨ 答辩时间: 每组答辩10分钟(汇报8分钟, 提问2分钟)</li>\n<li>✨ 评分项目 (暂定): <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM?sheet=1fvE9b</a></li>\n<li>✨ 答辩要求: 以组为答辩单位 (演示材料为 PPT), 分组 <a href=\"https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM\">https://uniplore.feishu.cn/sheets/shtcncYuFGyTZgL0sc74Dz24xSM</a></li>\n<li>✨ 答辩PPT和报告提交链接(1月5日22:00前提交完成):  <a href=\"https://pan.baidu.com/disk/main#/transfer/send?surl=ACsAAAAAAA_yqQ\">https://pan.baidu.com/disk/main#/transfer/send?surl=ACsAAAAAAA_yqQ</a></li>\n</ol>\n"},{"title":"02- 商学院-课程材料","share":true,"date":"2022-07-01T05:43:59.000Z","updated":"2022-12-18T00:07:47.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["02- 商学院-课程材料"],"_content":"\n```python\n201720683\nscenerylmz12 \n```\n\nhttp://172.23.59.53/  \nhttps://github.com/TurboWay/bigdata_analyse  \nhttps://www.yuque.com/uniplore/guide\n\nudi 存储地址\n\n```python\n/root/uniplore_data/udi_data/repositories \n```\n","source":"_posts/02--商学院-课程材料.md","raw":"---\ntitle: 02- 商学院-课程材料\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-07-01 13:43:59 \nupdated: 2022-12-18 08:07:47 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 02- 商学院-课程材料\n---\n\n```python\n201720683\nscenerylmz12 \n```\n\nhttp://172.23.59.53/  \nhttps://github.com/TurboWay/bigdata_analyse  \nhttps://www.yuque.com/uniplore/guide\n\nudi 存储地址\n\n```python\n/root/uniplore_data/udi_data/repositories \n```\n","slug":"02--商学院-课程材料","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709e00084cv9b22og9to","content":"<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">201720683</span></span><br><span class=\"line\">scenerylmz12 </span><br></pre></td></tr></table></figure>\n<p><a href=\"http://172.23.59.53/\">http://172.23.59.53/</a><br>\n<a href=\"https://github.com/TurboWay/bigdata_analyse\">https://github.com/TurboWay/bigdata_analyse</a><br>\n<a href=\"https://www.yuque.com/uniplore/guide\">https://www.yuque.com/uniplore/guide</a></p>\n<p>udi 存储地址</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/root/uniplore_data/udi_data/repositories </span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover7.JPG","excerpt":"","more":"<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">201720683</span></span><br><span class=\"line\">scenerylmz12 </span><br></pre></td></tr></table></figure>\n<p><a href=\"http://172.23.59.53/\">http://172.23.59.53/</a><br>\n<a href=\"https://github.com/TurboWay/bigdata_analyse\">https://github.com/TurboWay/bigdata_analyse</a><br>\n<a href=\"https://www.yuque.com/uniplore/guide\">https://www.yuque.com/uniplore/guide</a></p>\n<p>udi 存储地址</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/root/uniplore_data/udi_data/repositories </span><br></pre></td></tr></table></figure>\n"},{"title":"03-线性回归原理分析及实现","share":true,"date":"2022-11-07T05:12:58.000Z","updated":"2022-12-22T13:27:47.000Z","aliases":["03-线性回归原理分析及实现"],"_content":"\n\n\n## 模型目标\n\n- 给定房子的面积集合 $x=\\{ x_1,\\dots,x_n \\}$ 与价格集合 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n\n$$\\begin{gather}  \n  f: R \\rightarrow R, \\\\  \n  f(x)=y,\\\\ s.t. x,y \\in R  \n  \\end{gather}  \n$$\n\n\n- 该模型能够根据房子的面积 $x$ 预测房子的价格 $y$. $(x_1,y_1)$ 表示房子 $x_1$ 对应的价格为 $y_1$；可能取值：$x=\\{ 56,60,120 \\}$, $y=\\{30万,40万,70万 \\}$\n- 举例说明：\n\t- 给定图中的点，我们的目标是根据已知的点，求出适合数据线（红色）（位置）\n\t  ![static/attachment/Pasted image 20221107135019.png](/images/b32c68fa9d60da210505be648152958708936b6a.png)![static/attachment/Pasted image 20221107135150.png](/images/0db520fdf28e05e081f24b9b3b7388315bfc7919.png)\n\n## 模型表示\n\n- 模型表示：一元一次方程\n\t- $y=ax+b=b+ax=\\theta_0+\\theta_1 x=w*x+b$\n\t- $b$ 与 $\\theta_0$ 等价，$a$ 与 $\\theta_1$ 等价\n- 代价函数 (loss function)\n\t- 代价函数用于评估模型的预测结果与实际结果的差距\n\t\t- 假设房子的实际价格 $y$ 是 30 万，模型的预测价格 $y_{pred},\\hat{y}$ 是 29 万，那么的一种 **可能** 损失 $loss$ 是：$loss=(y_{pred}-y)^2=(30-29)^2=1^2=1$\n\t\t  \n- 我们的目标\n\t- **最小化** 预测价格与实际价格的差距：让模型的预测结果与实际结果无限接近\n\t- 问题转换为求最小值的问题：最小化损失函数\n\t- 损失表达式：给定数据集合 $x=\\{ x_1,\\dots,x_n \\}$ , $y=\\{y_1,\\dots,y_n \\}$ 与模型的预测结果 $y_{pred}=\\hat{y}=\\{ \\hat{y_1}, \\dots, \\hat{y_n} \\}$, 其损失的表达式为 $loss=\\frac{1}{n} \\sum_i^n(y_{pred}-y)^2$\n\t- 假设 N=3, loss=$\\frac{1}{3} [( \\hat{y_1}-y_1)^2 + (\\hat{y_2}-y_2)^2 +(\\hat{y_3}-y_3)^2]$\n\t- 问题转换为：找到一组参数 $(\\theta_0,\\theta_1)$, 也就是 $(w,b)$, 该值使 $loss$ 最小。\n\t- 那怎么求最小的 loss 呢？\n- 梯度下降（SGD）\n\t- 梯度下降是一个用来求函数最小值的算法.\n\t- 梯度下降的表达式 $\\theta_j:=\\theta_j-\\alpha \\frac{\\partial}{\\partial \\theta_j} J\\left(\\theta_0, \\theta_1\\right) \\quad(\\text { for } j=0 \\text { and } j=1 \\text { ) }$\n\t- $\\alpha$ 是学习率 (learning rate)，它决定了我们沿着能让代价函数下降程度最大的方向向下迈出的步子有多大，在批量梯度下降中，我们每一次都同时让所有的参数减去学习速率 乘以代价函数的导数。\n- 梯度下降的步骤 (在线性回归中）\n\t- 初始化 $w,b$ 为任意值，如 $w=0,b=0$\n\t- 计算当前 $w,b$ 对应的损失: $loss=\\frac{1}{n} \\sum_i^n(y_{pred}-y)^2,where \\ y_{pred}=x_i*w+b$\n\t- 分别计算 loss 对 $w,b$ 的梯度 $d_w, d_b$（偏导数）\n\t- 更新 $w$ 和 $b$ 直到：（训练（fit): 逐渐更新 $w,b$ 的过程）\n\t\t- 策略 1：loss 不在降低\n\t\t- 策略 2：迭代到指定次数（本文采用）\n\t\t- $w=w-\\alpha*d_w, b=b-\\alpha*d_b,\\alpha \\in [0,1]$\n\t\t- $\\alpha$ 学习率（超参数：手工设置的，模型参数：能通过数据学到的 ($w,b$）)\n\n## 案例：基于 Tensorflow 求解一元一次方程\n\n为什么基于 Tensorflow：因为 Tensorflow 为我们提供了求解导数的方法。你也可以基于 numpy、keras 等实现。\n\n实现步骤：\n\n1. 导入类库\n2. 准备数据\n3. 构建未知数 $w$ 和 $b$\n4. 定义 $y_{pred}=x*w+b$\n5. 定义 $loss$\n6. 求解 $dw,db$：\n7. 更新梯度：\n7. 更新梯度：\n$$\\begin{gather} \\\\  \n\t\t\t  w=w-\\alpha*d_w, \\\\  \n\t\t\t  b=b-\\alpha*d_b\\\\  \n\t\t\t  s.t. \\alpha \\in [0,1]  \n\t\t\t  \\end{gather}$$\n\n7. 更新梯度：\n8. 回到 步骤 6, 直到迭代到指定次数\n\n例子演示：[线性案例](http://localhost:8888/lab/tree/商业数据分析/02-10%20手动拟合线性回归.ipynb)\n\n## 案例：基于 DM（作业：2022-11-07）\n\n![static/attachment/Pasted image 20221107160559.png](/images/30b7afcaa4ce763e3adf2f3593ffc7f1c6a6ef54.png)  \n![static/attachment/Pasted image 20221107161935.png](/images/ca4acb61c008141a83bf4db021354d1b42850cb2.png)  \n[数据处理脚本](<http://127.0.0.1:8888/lab/tree/商业数据分析/02-12> 数据可视化.ipynb)\n","source":"_posts/03-线性回归原理分析及实现.md","raw":"---\ntitle: 03-线性回归原理分析及实现\nshare: true\ntags:\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-11-07 13:12:58 \nupdated: 2022-12-22 21:27:47 \ncategories: [uncategory]\naliases:\n  - 03-线性回归原理分析及实现\n---\n\n\n\n## 模型目标\n\n- 给定房子的面积集合 $x=\\{ x_1,\\dots,x_n \\}$ 与价格集合 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n\n$$\\begin{gather}  \n  f: R \\rightarrow R, \\\\  \n  f(x)=y,\\\\ s.t. x,y \\in R  \n  \\end{gather}  \n$$\n\n\n- 该模型能够根据房子的面积 $x$ 预测房子的价格 $y$. $(x_1,y_1)$ 表示房子 $x_1$ 对应的价格为 $y_1$；可能取值：$x=\\{ 56,60,120 \\}$, $y=\\{30万,40万,70万 \\}$\n- 举例说明：\n\t- 给定图中的点，我们的目标是根据已知的点，求出适合数据线（红色）（位置）\n\t  ![static/attachment/Pasted image 20221107135019.png](/images/b32c68fa9d60da210505be648152958708936b6a.png)![static/attachment/Pasted image 20221107135150.png](/images/0db520fdf28e05e081f24b9b3b7388315bfc7919.png)\n\n## 模型表示\n\n- 模型表示：一元一次方程\n\t- $y=ax+b=b+ax=\\theta_0+\\theta_1 x=w*x+b$\n\t- $b$ 与 $\\theta_0$ 等价，$a$ 与 $\\theta_1$ 等价\n- 代价函数 (loss function)\n\t- 代价函数用于评估模型的预测结果与实际结果的差距\n\t\t- 假设房子的实际价格 $y$ 是 30 万，模型的预测价格 $y_{pred},\\hat{y}$ 是 29 万，那么的一种 **可能** 损失 $loss$ 是：$loss=(y_{pred}-y)^2=(30-29)^2=1^2=1$\n\t\t  \n- 我们的目标\n\t- **最小化** 预测价格与实际价格的差距：让模型的预测结果与实际结果无限接近\n\t- 问题转换为求最小值的问题：最小化损失函数\n\t- 损失表达式：给定数据集合 $x=\\{ x_1,\\dots,x_n \\}$ , $y=\\{y_1,\\dots,y_n \\}$ 与模型的预测结果 $y_{pred}=\\hat{y}=\\{ \\hat{y_1}, \\dots, \\hat{y_n} \\}$, 其损失的表达式为 $loss=\\frac{1}{n} \\sum_i^n(y_{pred}-y)^2$\n\t- 假设 N=3, loss=$\\frac{1}{3} [( \\hat{y_1}-y_1)^2 + (\\hat{y_2}-y_2)^2 +(\\hat{y_3}-y_3)^2]$\n\t- 问题转换为：找到一组参数 $(\\theta_0,\\theta_1)$, 也就是 $(w,b)$, 该值使 $loss$ 最小。\n\t- 那怎么求最小的 loss 呢？\n- 梯度下降（SGD）\n\t- 梯度下降是一个用来求函数最小值的算法.\n\t- 梯度下降的表达式 $\\theta_j:=\\theta_j-\\alpha \\frac{\\partial}{\\partial \\theta_j} J\\left(\\theta_0, \\theta_1\\right) \\quad(\\text { for } j=0 \\text { and } j=1 \\text { ) }$\n\t- $\\alpha$ 是学习率 (learning rate)，它决定了我们沿着能让代价函数下降程度最大的方向向下迈出的步子有多大，在批量梯度下降中，我们每一次都同时让所有的参数减去学习速率 乘以代价函数的导数。\n- 梯度下降的步骤 (在线性回归中）\n\t- 初始化 $w,b$ 为任意值，如 $w=0,b=0$\n\t- 计算当前 $w,b$ 对应的损失: $loss=\\frac{1}{n} \\sum_i^n(y_{pred}-y)^2,where \\ y_{pred}=x_i*w+b$\n\t- 分别计算 loss 对 $w,b$ 的梯度 $d_w, d_b$（偏导数）\n\t- 更新 $w$ 和 $b$ 直到：（训练（fit): 逐渐更新 $w,b$ 的过程）\n\t\t- 策略 1：loss 不在降低\n\t\t- 策略 2：迭代到指定次数（本文采用）\n\t\t- $w=w-\\alpha*d_w, b=b-\\alpha*d_b,\\alpha \\in [0,1]$\n\t\t- $\\alpha$ 学习率（超参数：手工设置的，模型参数：能通过数据学到的 ($w,b$）)\n\n## 案例：基于 Tensorflow 求解一元一次方程\n\n为什么基于 Tensorflow：因为 Tensorflow 为我们提供了求解导数的方法。你也可以基于 numpy、keras 等实现。\n\n实现步骤：\n\n1. 导入类库\n2. 准备数据\n3. 构建未知数 $w$ 和 $b$\n4. 定义 $y_{pred}=x*w+b$\n5. 定义 $loss$\n6. 求解 $dw,db$：\n7. 更新梯度：\n7. 更新梯度：\n$$\\begin{gather} \\\\  \n\t\t\t  w=w-\\alpha*d_w, \\\\  \n\t\t\t  b=b-\\alpha*d_b\\\\  \n\t\t\t  s.t. \\alpha \\in [0,1]  \n\t\t\t  \\end{gather}$$\n\n7. 更新梯度：\n8. 回到 步骤 6, 直到迭代到指定次数\n\n例子演示：[线性案例](http://localhost:8888/lab/tree/商业数据分析/02-10%20手动拟合线性回归.ipynb)\n\n## 案例：基于 DM（作业：2022-11-07）\n\n![static/attachment/Pasted image 20221107160559.png](/images/30b7afcaa4ce763e3adf2f3593ffc7f1c6a6ef54.png)  \n![static/attachment/Pasted image 20221107161935.png](/images/ca4acb61c008141a83bf4db021354d1b42850cb2.png)  \n[数据处理脚本](<http://127.0.0.1:8888/lab/tree/商业数据分析/02-12> 数据可视化.ipynb)\n","slug":"03-线性回归原理分析及实现","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709g000b4cv9g1srffsh","content":"<h2 id=\"模型目标\">模型目标</h2>\n<ul>\n<li>给定房子的面积集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与价格集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</li>\n</ul>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"center\" columnspacing=\"0em\"><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo>:</mo><mi>R</mi><mo>→</mo><mi>R</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>y</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>R</mi></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{gather}  \n  f: R \\rightarrow R, \\\\  \n  f(x)=y,\\\\ s.t. x,y \\in R  \n  \\end{gather}  \n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.5em;vertical-align:-2em;\"></span><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-1.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span><span class=\"tag\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.5em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-1.5em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span></span></p>\n<ul>\n<li>该模型能够根据房子的面积 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> 预测房子的价格 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x_1,y_1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 表示房子 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 对应的价格为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>；可能取值：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><mn>56</mn><mo separator=\"true\">,</mo><mn>60</mn><mo separator=\"true\">,</mo><mn>120</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ 56,60,120 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">56</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">60</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">120</span><span class=\"mclose\">}</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><mn>30</mn><mtext>万</mtext><mo separator=\"true\">,</mo><mn>40</mn><mtext>万</mtext><mo separator=\"true\">,</mo><mn>70</mn><mtext>万</mtext><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{30万,40万,70万 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">30</span><span class=\"mord cjk_fallback\">万</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">40</span><span class=\"mord cjk_fallback\">万</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">70</span><span class=\"mord cjk_fallback\">万</span><span class=\"mclose\">}</span></span></span></span></li>\n<li>举例说明：\n<ul>\n<li>给定图中的点，我们的目标是根据已知的点，求出适合数据线（红色）（位置）<br>\n<img src=\"/images/b32c68fa9d60da210505be648152958708936b6a.png\" alt=\"static/attachment/Pasted image 20221107135019.png\"><img src=\"/images/0db520fdf28e05e081f24b9b3b7388315bfc7919.png\" alt=\"static/attachment/Pasted image 20221107135150.png\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"模型表示\">模型表示</h2>\n<ul>\n<li>\n<p>模型表示：一元一次方程</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>+</mo><mi>a</mi><mi>x</mi><mo>=</mo><msub><mi>θ</mi><mn>0</mn></msub><mo>+</mo><msub><mi>θ</mi><mn>1</mn></msub><mi>x</mi><mo>=</mo><mi>w</mi><mo>∗</mo><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y=ax+b=b+ax=\\theta_0+\\theta_1 x=w*x+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 与 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 等价，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span> 与 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 等价</li>\n</ul>\n</li>\n<li>\n<p>代价函数 (loss function)</p>\n<ul>\n<li>代价函数用于评估模型的预测结果与实际结果的差距\n<ul>\n<li>假设房子的实际价格 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span> 是 30 万，模型的预测价格 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo separator=\"true\">,</mo><mover accent=\"true\"><mi>y</mi><mo>^</mo></mover></mrow><annotation encoding=\"application/x-tex\">y_{pred},\\hat{y}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span></span></span></span> 是 29 万，那么的一种 <strong>可能</strong> 损失 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">loss</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span></span></span></span> 是：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>−</mo><mi>y</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>=</mo><mo stretchy=\"false\">(</mo><mn>30</mn><mo>−</mo><mn>29</mn><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>=</mo><msup><mn>1</mn><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">loss=(y_{pred}-y)^2=(30-29)^2=1^2=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">30</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">29</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>我们的目标</p>\n<ul>\n<li><strong>最小化</strong> 预测价格与实际价格的差距：让模型的预测结果与实际结果无限接近</li>\n<li>问题转换为求最小值的问题：最小化损失函数</li>\n<li>损失表达式：给定数据集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与模型的预测结果 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mover accent=\"true\"><mi>y</mi><mo>^</mo></mover><mo>=</mo><mo stretchy=\"false\">{</mo><mover accent=\"true\"><msub><mi>y</mi><mn>1</mn></msub><mo>^</mo></mover><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mover accent=\"true\"><msub><mi>y</mi><mi>n</mi></msub><mo>^</mo></mover><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y_{pred}=\\hat{y}=\\{ \\hat{y_1}, \\dots, \\hat{y_n} \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 其损失的表达式为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>∑</mo><mi>i</mi><mi>n</mi></msubsup><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>−</mo><mi>y</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">loss=\\frac{1}{n} \\sum_i^n(y_{pred}-y)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></li>\n<li>假设 N=3, loss=<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">(</mo><mover accent=\"true\"><msub><mi>y</mi><mn>1</mn></msub><mo>^</mo></mover><mo>−</mo><msub><mi>y</mi><mn>1</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=\"false\">(</mo><mover accent=\"true\"><msub><mi>y</mi><mn>2</mn></msub><mo>^</mo></mover><mo>−</mo><msub><mi>y</mi><mn>2</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=\"false\">(</mo><mover accent=\"true\"><msub><mi>y</mi><mn>3</mn></msub><mo>^</mo></mover><mo>−</mo><msub><mi>y</mi><mn>3</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{3} [( \\hat{y_1}-y_1)^2 + (\\hat{y_2}-y_2)^2 +(\\hat{y_3}-y_3)^2]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">[(</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span></li>\n<li>问题转换为：找到一组参数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>θ</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><msub><mi>θ</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(\\theta_0,\\theta_1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>, 也就是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(w,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span>, 该值使 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">loss</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span></span></span></span> 最小。</li>\n<li>那怎么求最小的 loss 呢？</li>\n</ul>\n</li>\n<li>\n<p>梯度下降（SGD）</p>\n<ul>\n<li>梯度下降是一个用来求函数最小值的算法.</li>\n<li>梯度下降的表达式 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>j</mi></msub><mo>:</mo><mo>=</mo><msub><mi>θ</mi><mi>j</mi></msub><mo>−</mo><mi>α</mi><mfrac><mi mathvariant=\"normal\">∂</mi><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>θ</mi><mi>j</mi></msub></mrow></mfrac><mi>J</mi><mrow><mo fence=\"true\">(</mo><msub><mi>θ</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><msub><mi>θ</mi><mn>1</mn></msub><mo fence=\"true\">)</mo></mrow><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mtext> for </mtext><mi>j</mi><mo>=</mo><mn>0</mn><mtext> and </mtext><mi>j</mi><mo>=</mo><mn>1</mn><mtext> ) </mtext></mrow><annotation encoding=\"application/x-tex\">\\theta_j:=\\theta_j-\\alpha \\frac{\\partial}{\\partial \\theta_j} J\\left(\\theta_0, \\theta_1\\right) \\quad(\\text { for } j=0 \\text { and } j=1 \\text { ) }</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.4224em;vertical-align:-0.5423em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2819em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5423em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">(</span><span class=\"mord text\"><span class=\"mord\"> for </span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mord text\"><span class=\"mord\"> and </span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord text\"><span class=\"mord\"> ) </span></span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 是学习率 (learning rate)，它决定了我们沿着能让代价函数下降程度最大的方向向下迈出的步子有多大，在批量梯度下降中，我们每一次都同时让所有的参数减去学习速率 乘以代价函数的导数。</li>\n</ul>\n</li>\n<li>\n<p>梯度下降的步骤 (在线性回归中）</p>\n<ul>\n<li>初始化 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 为任意值，如 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">w=0,b=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></li>\n<li>计算当前 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 对应的损失: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>∑</mo><mi>i</mi><mi>n</mi></msubsup><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>−</mo><mi>y</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo separator=\"true\">,</mo><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mtext> </mtext><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><msub><mi>x</mi><mi>i</mi></msub><mo>∗</mo><mi>w</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">loss=\\frac{1}{n} \\sum_i^n(y_{pred}-y)^2,where \\ y_{pred}=x_i*w+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1002em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">ere</span><span class=\"mspace\"> </span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6153em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li>分别计算 loss 对 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 的梯度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo><msub><mi>d</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">d_w, d_b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>（偏导数）</li>\n<li>更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 直到：（训练（fit): 逐渐更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 的过程）\n<ul>\n<li>策略 1：loss 不在降低</li>\n<li>策略 2：迭代到指定次数（本文采用）</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mi>w</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>b</mi></msub><mo separator=\"true\">,</mo><mi>α</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">w=w-\\alpha*d_w, b=b-\\alpha*d_b,\\alpha \\in [0,1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 学习率（超参数：手工设置的，模型参数：能通过数据学到的 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span>）)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"案例：基于-Tensorflow-求解一元一次方程\">案例：基于 Tensorflow 求解一元一次方程</h2>\n<p>为什么基于 Tensorflow：因为 Tensorflow 为我们提供了求解导数的方法。你也可以基于 numpy、keras 等实现。</p>\n<p>实现步骤：</p>\n<ol>\n<li>导入类库</li>\n<li>准备数据</li>\n<li>构建未知数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li>定义 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mi>x</mi><mo>∗</mo><mi>w</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y_{pred}=x*w+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li>定义 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">loss</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span></span></span></span></li>\n<li>求解 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>w</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">dw,db</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span>：</li>\n<li>更新梯度：</li>\n<li>更新梯度：</li>\n</ol>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"center\" columnspacing=\"0em\"><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>w</mi><mo>=</mo><mi>w</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>b</mi><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>b</mi></msub></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mi>α</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{gather} \\\\  \n\t\t\t  w=w-\\alpha*d_w, \\\\  \n\t\t\t  b=b-\\alpha*d_b\\\\  \n\t\t\t  s.t. \\alpha \\in [0,1]  \n\\end{gather}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6em;vertical-align:-2.75em;\"></span><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.25em;\"><span style=\"top:-5.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-3.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-0.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75em;\"><span></span></span></span></span></span></span></span><span class=\"tag\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.25em;\"><span style=\"top:-5.25em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-3.75em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-0.75em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75em;\"><span></span></span></span></span></span></span></span></span></p>\n<ol start=\"7\">\n<li>更新梯度：</li>\n<li>回到 步骤 6, 直到迭代到指定次数</li>\n</ol>\n<p>例子演示：<a href=\"http://localhost:8888/lab/tree/%E5%95%86%E4%B8%9A%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/02-10%20%E6%89%8B%E5%8A%A8%E6%8B%9F%E5%90%88%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92.ipynb\">线性案例</a></p>\n<h2 id=\"案例：基于-DM（作业：2022-11-07）\">案例：基于 DM（作业：2022-11-07）</h2>\n<p><img src=\"/images/30b7afcaa4ce763e3adf2f3593ffc7f1c6a6ef54.png\" alt=\"static/attachment/Pasted image 20221107160559.png\"><br>\n<img src=\"/images/ca4acb61c008141a83bf4db021354d1b42850cb2.png\" alt=\"static/attachment/Pasted image 20221107161935.png\"><br>\n[数据处理脚本](<a href=\"http://127.0.0.1:8888/lab/tree/%E5%95%86%E4%B8%9A%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/02-12\">http://127.0.0.1:8888/lab/tree/商业数据分析/02-12</a> 数据可视化.ipynb)</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover7.JPG","excerpt":"","more":"<h2 id=\"模型目标\">模型目标</h2>\n<ul>\n<li>给定房子的面积集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与价格集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</li>\n</ul>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"center\" columnspacing=\"0em\"><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo>:</mo><mi>R</mi><mo>→</mo><mi>R</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>y</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>R</mi></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{gather}  \n  f: R \\rightarrow R, \\\\  \n  f(x)=y,\\\\ s.t. x,y \\in R  \n  \\end{gather}  \n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.5em;vertical-align:-2em;\"></span><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-1.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span><span class=\"tag\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.5em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-1.5em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span></span></p>\n<ul>\n<li>该模型能够根据房子的面积 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> 预测房子的价格 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x_1,y_1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 表示房子 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 对应的价格为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>；可能取值：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><mn>56</mn><mo separator=\"true\">,</mo><mn>60</mn><mo separator=\"true\">,</mo><mn>120</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ 56,60,120 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">56</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">60</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">120</span><span class=\"mclose\">}</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><mn>30</mn><mtext>万</mtext><mo separator=\"true\">,</mo><mn>40</mn><mtext>万</mtext><mo separator=\"true\">,</mo><mn>70</mn><mtext>万</mtext><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{30万,40万,70万 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">30</span><span class=\"mord cjk_fallback\">万</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">40</span><span class=\"mord cjk_fallback\">万</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">70</span><span class=\"mord cjk_fallback\">万</span><span class=\"mclose\">}</span></span></span></span></li>\n<li>举例说明：\n<ul>\n<li>给定图中的点，我们的目标是根据已知的点，求出适合数据线（红色）（位置）<br>\n<img src=\"/images/b32c68fa9d60da210505be648152958708936b6a.png\" alt=\"static/attachment/Pasted image 20221107135019.png\"><img src=\"/images/0db520fdf28e05e081f24b9b3b7388315bfc7919.png\" alt=\"static/attachment/Pasted image 20221107135150.png\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"模型表示\">模型表示</h2>\n<ul>\n<li>\n<p>模型表示：一元一次方程</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>+</mo><mi>a</mi><mi>x</mi><mo>=</mo><msub><mi>θ</mi><mn>0</mn></msub><mo>+</mo><msub><mi>θ</mi><mn>1</mn></msub><mi>x</mi><mo>=</mo><mi>w</mi><mo>∗</mo><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y=ax+b=b+ax=\\theta_0+\\theta_1 x=w*x+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 与 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 等价，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span> 与 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 等价</li>\n</ul>\n</li>\n<li>\n<p>代价函数 (loss function)</p>\n<ul>\n<li>代价函数用于评估模型的预测结果与实际结果的差距\n<ul>\n<li>假设房子的实际价格 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span> 是 30 万，模型的预测价格 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo separator=\"true\">,</mo><mover accent=\"true\"><mi>y</mi><mo>^</mo></mover></mrow><annotation encoding=\"application/x-tex\">y_{pred},\\hat{y}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span></span></span></span> 是 29 万，那么的一种 <strong>可能</strong> 损失 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">loss</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span></span></span></span> 是：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>−</mo><mi>y</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>=</mo><mo stretchy=\"false\">(</mo><mn>30</mn><mo>−</mo><mn>29</mn><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>=</mo><msup><mn>1</mn><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">loss=(y_{pred}-y)^2=(30-29)^2=1^2=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">30</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">29</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">1</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>我们的目标</p>\n<ul>\n<li><strong>最小化</strong> 预测价格与实际价格的差距：让模型的预测结果与实际结果无限接近</li>\n<li>问题转换为求最小值的问题：最小化损失函数</li>\n<li>损失表达式：给定数据集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与模型的预测结果 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mover accent=\"true\"><mi>y</mi><mo>^</mo></mover><mo>=</mo><mo stretchy=\"false\">{</mo><mover accent=\"true\"><msub><mi>y</mi><mn>1</mn></msub><mo>^</mo></mover><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mover accent=\"true\"><msub><mi>y</mi><mi>n</mi></msub><mo>^</mo></mover><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y_{pred}=\\hat{y}=\\{ \\hat{y_1}, \\dots, \\hat{y_n} \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 其损失的表达式为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>∑</mo><mi>i</mi><mi>n</mi></msubsup><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>−</mo><mi>y</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">loss=\\frac{1}{n} \\sum_i^n(y_{pred}-y)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></li>\n<li>假设 N=3, loss=<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>3</mn></mfrac><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">(</mo><mover accent=\"true\"><msub><mi>y</mi><mn>1</mn></msub><mo>^</mo></mover><mo>−</mo><msub><mi>y</mi><mn>1</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=\"false\">(</mo><mover accent=\"true\"><msub><mi>y</mi><mn>2</mn></msub><mo>^</mo></mover><mo>−</mo><msub><mi>y</mi><mn>2</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=\"false\">(</mo><mover accent=\"true\"><msub><mi>y</mi><mn>3</mn></msub><mo>^</mo></mover><mo>−</mo><msub><mi>y</mi><mn>3</mn></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{3} [( \\hat{y_1}-y_1)^2 + (\\hat{y_2}-y_2)^2 +(\\hat{y_3}-y_3)^2]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mopen\">[(</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span></li>\n<li>问题转换为：找到一组参数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>θ</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><msub><mi>θ</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(\\theta_0,\\theta_1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>, 也就是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(w,b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span>, 该值使 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">loss</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span></span></span></span> 最小。</li>\n<li>那怎么求最小的 loss 呢？</li>\n</ul>\n</li>\n<li>\n<p>梯度下降（SGD）</p>\n<ul>\n<li>梯度下降是一个用来求函数最小值的算法.</li>\n<li>梯度下降的表达式 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mi>j</mi></msub><mo>:</mo><mo>=</mo><msub><mi>θ</mi><mi>j</mi></msub><mo>−</mo><mi>α</mi><mfrac><mi mathvariant=\"normal\">∂</mi><mrow><mi mathvariant=\"normal\">∂</mi><msub><mi>θ</mi><mi>j</mi></msub></mrow></mfrac><mi>J</mi><mrow><mo fence=\"true\">(</mo><msub><mi>θ</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><msub><mi>θ</mi><mn>1</mn></msub><mo fence=\"true\">)</mo></mrow><mspace width=\"1em\"/><mo stretchy=\"false\">(</mo><mtext> for </mtext><mi>j</mi><mo>=</mo><mn>0</mn><mtext> and </mtext><mi>j</mi><mo>=</mo><mn>1</mn><mtext> ) </mtext></mrow><annotation encoding=\"application/x-tex\">\\theta_j:=\\theta_j-\\alpha \\frac{\\partial}{\\partial \\theta_j} J\\left(\\theta_0, \\theta_1\\right) \\quad(\\text { for } j=0 \\text { and } j=1 \\text { ) }</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.4224em;vertical-align:-0.5423em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2819em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">∂</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5423em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\">)</span></span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">(</span><span class=\"mord text\"><span class=\"mord\"> for </span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mord text\"><span class=\"mord\"> and </span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord text\"><span class=\"mord\"> ) </span></span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 是学习率 (learning rate)，它决定了我们沿着能让代价函数下降程度最大的方向向下迈出的步子有多大，在批量梯度下降中，我们每一次都同时让所有的参数减去学习速率 乘以代价函数的导数。</li>\n</ul>\n</li>\n<li>\n<p>梯度下降的步骤 (在线性回归中）</p>\n<ul>\n<li>初始化 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 为任意值，如 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">w=0,b=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></li>\n<li>计算当前 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 对应的损失: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>∑</mo><mi>i</mi><mi>n</mi></msubsup><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>−</mo><mi>y</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo separator=\"true\">,</mo><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mtext> </mtext><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><msub><mi>x</mi><mi>i</mi></msub><mo>∗</mo><mi>w</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">loss=\\frac{1}{n} \\sum_i^n(y_{pred}-y)^2,where \\ y_{pred}=x_i*w+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1002em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">ere</span><span class=\"mspace\"> </span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6153em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li>分别计算 loss 对 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 的梯度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo><msub><mi>d</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">d_w, d_b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>（偏导数）</li>\n<li>更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 直到：（训练（fit): 逐渐更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 的过程）\n<ul>\n<li>策略 1：loss 不在降低</li>\n<li>策略 2：迭代到指定次数（本文采用）</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mi>w</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>b</mi></msub><mo separator=\"true\">,</mo><mi>α</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">w=w-\\alpha*d_w, b=b-\\alpha*d_b,\\alpha \\in [0,1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span> 学习率（超参数：手工设置的，模型参数：能通过数据学到的 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span>）)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"案例：基于-Tensorflow-求解一元一次方程\">案例：基于 Tensorflow 求解一元一次方程</h2>\n<p>为什么基于 Tensorflow：因为 Tensorflow 为我们提供了求解导数的方法。你也可以基于 numpy、keras 等实现。</p>\n<p>实现步骤：</p>\n<ol>\n<li>导入类库</li>\n<li>准备数据</li>\n<li>构建未知数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li>定义 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mi>x</mi><mo>∗</mo><mi>w</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y_{pred}=x*w+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li>定义 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">loss</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span></span></span></span></li>\n<li>求解 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>w</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">dw,db</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">b</span></span></span></span>：</li>\n<li>更新梯度：</li>\n<li>更新梯度：</li>\n</ol>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"center\" columnspacing=\"0em\"><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>w</mi><mo>=</mo><mi>w</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>b</mi><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>b</mi></msub></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mi>α</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{gather} \\\\  \n\t\t\t  w=w-\\alpha*d_w, \\\\  \n\t\t\t  b=b-\\alpha*d_b\\\\  \n\t\t\t  s.t. \\alpha \\in [0,1]  \n\\end{gather}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6em;vertical-align:-2.75em;\"></span><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.25em;\"><span style=\"top:-5.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-3.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-0.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75em;\"><span></span></span></span></span></span></span></span><span class=\"tag\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.25em;\"><span style=\"top:-5.25em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-3.75em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-0.75em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75em;\"><span></span></span></span></span></span></span></span></span></p>\n<ol start=\"7\">\n<li>更新梯度：</li>\n<li>回到 步骤 6, 直到迭代到指定次数</li>\n</ol>\n<p>例子演示：<a href=\"http://localhost:8888/lab/tree/%E5%95%86%E4%B8%9A%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/02-10%20%E6%89%8B%E5%8A%A8%E6%8B%9F%E5%90%88%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92.ipynb\">线性案例</a></p>\n<h2 id=\"案例：基于-DM（作业：2022-11-07）\">案例：基于 DM（作业：2022-11-07）</h2>\n<p><img src=\"/images/30b7afcaa4ce763e3adf2f3593ffc7f1c6a6ef54.png\" alt=\"static/attachment/Pasted image 20221107160559.png\"><br>\n<img src=\"/images/ca4acb61c008141a83bf4db021354d1b42850cb2.png\" alt=\"static/attachment/Pasted image 20221107161935.png\"><br>\n[数据处理脚本](<a href=\"http://127.0.0.1:8888/lab/tree/%E5%95%86%E4%B8%9A%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/02-12\">http://127.0.0.1:8888/lab/tree/商业数据分析/02-12</a> 数据可视化.ipynb)</p>\n"},{"title":"03 课程内容安排","share":true,"date":"2022-11-07T07:08:36.000Z","updated":"2022-12-22T13:27:42.000Z","aliases":["03 课程内容安排"],"_content":"\n\n\n## 今日课程内容安排\n\n- 数据可视化例子（接上节课），参考视频 \"02-10 数据可视化.mp4\"（2022-11-07 作业）\n\t- 实施步骤：\n\t\t- 将处理好的数据导出数据到 csv 并验证导出数据 (~1:22)\n\t\t- 加载 .csv 到 数据库 (1:22-6:48)-（navicat 导入）\n\t\t\t- 建立工作流（1:22-5:24）\n\t\t\t- 创建目标表（5:28-11:22）\n\t\t\t- 配置数据库（13:37-18:00)\n\t\t\t\t- 修改字段大小（16：50)(因为事先建立的表无法存储完那么多字段）\n\t\t\t- 执行配置\n\t\t- 配置数据源（18:12)\n\t\t- 配置数据集（18:40）\n\t\t- 制作图表 1（20:16) - 各类手机平均价格图\n\t\t- 制作图表 2、3（21:49) - TOP10 (不完善，下去自行完善）\n- 手机品牌预测模型建立\n\t- <a href='{% post_path 03-线性回归原理分析及实现 %}'>03-线性回归原理分析及实现</a>\n\t\t- TensorFlow 实现\n\t\t- DM 实现（2022-11-07 作业）（完）\n\t- <a href='{% post_path 04-手机品牌识别之神经网络 %}'>04-手机品牌识别之神经网络</a>  \n","source":"_posts/03-课程内容安排.md","raw":"---\ntitle: 03 课程内容安排\nshare: true\ntags:\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-11-07 15:08:36 \nupdated: 2022-12-22 21:27:42 \ncategories: public \naliases:\n  - 03 课程内容安排\n---\n\n\n\n## 今日课程内容安排\n\n- 数据可视化例子（接上节课），参考视频 \"02-10 数据可视化.mp4\"（2022-11-07 作业）\n\t- 实施步骤：\n\t\t- 将处理好的数据导出数据到 csv 并验证导出数据 (~1:22)\n\t\t- 加载 .csv 到 数据库 (1:22-6:48)-（navicat 导入）\n\t\t\t- 建立工作流（1:22-5:24）\n\t\t\t- 创建目标表（5:28-11:22）\n\t\t\t- 配置数据库（13:37-18:00)\n\t\t\t\t- 修改字段大小（16：50)(因为事先建立的表无法存储完那么多字段）\n\t\t\t- 执行配置\n\t\t- 配置数据源（18:12)\n\t\t- 配置数据集（18:40）\n\t\t- 制作图表 1（20:16) - 各类手机平均价格图\n\t\t- 制作图表 2、3（21:49) - TOP10 (不完善，下去自行完善）\n- 手机品牌预测模型建立\n\t- <a href='{% post_path 03-线性回归原理分析及实现 %}'>03-线性回归原理分析及实现</a>\n\t\t- TensorFlow 实现\n\t\t- DM 实现（2022-11-07 作业）（完）\n\t- <a href='{% post_path 04-手机品牌识别之神经网络 %}'>04-手机品牌识别之神经网络</a>  \n","slug":"03-课程内容安排","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709g000c4cv9220dg1x0","content":"<h2 id=\"今日课程内容安排\">今日课程内容安排</h2>\n<ul>\n<li>数据可视化例子（接上节课），参考视频 “02-10 数据可视化.mp4”（2022-11-07 作业）\n<ul>\n<li>实施步骤：\n<ul>\n<li>将处理好的数据导出数据到 csv 并验证导出数据 (~1:22)</li>\n<li>加载 .csv 到 数据库 (1:22-6:48)-（navicat 导入）\n<ul>\n<li>建立工作流（1:22-5:24）</li>\n<li>创建目标表（5:28-11:22）</li>\n<li>配置数据库（13:37-18:00)\n<ul>\n<li>修改字段大小（16：50)(因为事先建立的表无法存储完那么多字段）</li>\n</ul>\n</li>\n<li>执行配置</li>\n</ul>\n</li>\n<li>配置数据源（18:12)</li>\n<li>配置数据集（18:40）</li>\n<li>制作图表 1（20:16) - 各类手机平均价格图</li>\n<li>制作图表 2、3（21:49) - TOP10 (不完善，下去自行完善）</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>手机品牌预测模型建立\n<ul>\n<li><a href='/uncategory/63f8e4648fec.html'>03-线性回归原理分析及实现</a>\n<ul>\n<li>TensorFlow 实现</li>\n<li>DM 实现（2022-11-07 作业）（完）</li>\n</ul>\n</li>\n<li><a href='/uncategory/316ec7ed5cda.html'>04-手机品牌识别之神经网络</a></li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<h2 id=\"今日课程内容安排\">今日课程内容安排</h2>\n<ul>\n<li>数据可视化例子（接上节课），参考视频 “02-10 数据可视化.mp4”（2022-11-07 作业）\n<ul>\n<li>实施步骤：\n<ul>\n<li>将处理好的数据导出数据到 csv 并验证导出数据 (~1:22)</li>\n<li>加载 .csv 到 数据库 (1:22-6:48)-（navicat 导入）\n<ul>\n<li>建立工作流（1:22-5:24）</li>\n<li>创建目标表（5:28-11:22）</li>\n<li>配置数据库（13:37-18:00)\n<ul>\n<li>修改字段大小（16：50)(因为事先建立的表无法存储完那么多字段）</li>\n</ul>\n</li>\n<li>执行配置</li>\n</ul>\n</li>\n<li>配置数据源（18:12)</li>\n<li>配置数据集（18:40）</li>\n<li>制作图表 1（20:16) - 各类手机平均价格图</li>\n<li>制作图表 2、3（21:49) - TOP10 (不完善，下去自行完善）</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>手机品牌预测模型建立\n<ul>\n<li><a href='/uncategory/63f8e4648fec.html'>03-线性回归原理分析及实现</a>\n<ul>\n<li>TensorFlow 实现</li>\n<li>DM 实现（2022-11-07 作业）（完）</li>\n</ul>\n</li>\n<li><a href='/uncategory/316ec7ed5cda.html'>04-手机品牌识别之神经网络</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"04-手机品牌识别之神经网络","share":true,"date":"2022-11-02T00:35:44.000Z","updated":"2022-12-22T13:27:52.000Z","aliases":["04-手机品牌识别之神经网络"],"_content":"\n\n\n## 目标\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型 \n$$\\begin{gather}  \n  f: R \\rightarrow R, \\\\  \n  f(x)=y,\\\\ s.t. x,y \\in R  \n  \\end{gather}  \n  $$\n 该模型能够根据图片 $x$ 预测图片的类型 $y$. $(x_1,y_1)$ 表示图片 $x_1$ 对应的类别为 $y_1$；$x_i$ 可能取值 $x_i=\\{ 1,120,\\dots,255\\}$, $y_i=\\{0.2,0.3,0.5,0.1\\}$, $softmax(y_i)=\\{0,0,1,0\\}$\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n- 举例说明\n\t- 建立一个模型，输入是手机图片，输出是手机类别\n\t- 输入图片\n\t\t- ![static/attachment/Pasted image 20221107230429.png](/images/96ae3924006f3a11007207d031717463b3bbac6c.png)\n\t- 输出\n\t\t- 苹果 (手机类别)\n\n## 案例引入 - 神经网络\n\n- 一元一次方程  \n\t- $y=ax+b=b+ax=\\theta_0+\\theta_1 x=w*x+b$\n\t- $b$、$\\theta_0$ 等价，$a$、$\\theta_1$、$w$ 等价\n\t- 我们理解为\n\t\t- x 通过一个黑盒，得到了 y\n\t\t\t- ![static/attachment/Pasted image 20221107153211.png](/images/f8f413892356a5dff1d989153e2fd65a0d4a92f0.png)\n- 二元一次方程\n\t- $y=w_1*x_1+w_2*x_2+b$\n\t- 我们理解为：\n\t\t- $x_1,x_2$ 通过一个黑盒，得到了 $y$\n\t\t\t- ![static/attachment/Pasted image 20221107153235.png](/images/b517688cf5875de82bd1deea8f8764bff7b90ed9.png)\n- 一元二次方程黑盒变体\n\t- 理解为：\n\t\t- $x_1, x_2$ 分别通过两个黑盒得到 $a_{11},a_{12}$, 然后 $a_{11},a_{12}$ 通过黑盒得到 $y$.\n\t\t- ![static/attachment/Pasted image 20221107153324.png](/images/7faedcf60c808cf866cebddf14a848839eefd236.png)\n- 一元二次方程黑盒变体=神经网络\n\t- 一个隐藏层的神经网络\n\t- ![static/attachment/Pasted image 20221107153417.png](/images/6a5e676a58d9059a7a290844beba2e1558f7c0f4.png)\n- 计算例子举例\n\t- 假设输入 $x_1=(2,3)$，任意初始化 $w_{11},w_{12},w_{21}$，计算 $y$\n- 多个隐藏层的神经网络\n\t- ![Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.06.56.excalidraw](/images/3a5c8221fe075b1a418bea704a2d91838ffe1983.png)\n\t- ![static/attachment/Pasted image 20221107231726.png](/images/cfcdf117dd1192b8c7003cb0b2a3bd30e97803fc.png)\n\t- 如何计算?\n\n## 基础 - One-hot 编码\n\n- 机器学习两类特殊问题\n\t- 分类任务 (手机类型识别) (本例)\n\t- 回归任务 (房价预测) ✅\n- 图片分类如何表示\n\t- 假设我们手机只有 4 类\n\t\t- 苹果 1\n\t\t- 华为 2\n\t\t- 荣耀 3\n\t\t- 其他\n\t- 那么, 在**数学 (机器学习)**中如何表示其类别呢?\n\t\t- one-hot 编码\n\t- one-hot 编码\n\t\t- 用于在多分类数据中表示目标的类别\n\t\t- 例如: 对于这些手机图片:\n\t\t- ![static/attachment/Pasted image 20221107153612.png](/images/c5475754c914e4fc8616218ea075f6aed92d8bc7.png)\n\t\t- 假设我们只有 4 类\n\t\t\t- 苹果\n\t\t\t- 华为\n\t\t\t- 荣耀\n\t\t\t- 其他\n\t\t- one-hot 编码表示为:\n\t\t\t- ![static/attachment/Pasted image 20221107232253.png](/images/05f25e6b5715fb1458d1c2bbe5ffb845e96ceb18.png)\n\n## 基础 - 扁平化\n\n- 图片扁平化\n\t- 指将矩阵形式的图片 (如 $28*28*3$ 的图片) 编程 $vector$ (一维向量)\n\t- 如:\n\t\t- 将正方形的图片矩阵表示为一个向量\n\t\t- ![Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.29.59.excalidraw](/images/1373897c02e7694b973c6f2e09f4d7ec78ef3318.png)\n\t\t- ![static/attachment/Pasted image 20221107153753.png](/images/7e75b5d82750938cf1c4f52908c1a4c3ecdc8095.png)\n\n## 基础 - 交叉熵\n\n- 如何判断模型输出 (one-hot) 和标签之间 (one-hot) 的差距\n\t- 假设\n\t\t- 图片标签（真实）:$[[1,0,0,0]]$\n\t\t- 预测标签（机器识别的结果）: $[[0.1,0.7,0.1,0.1]]$\n\t\t- ![Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.38.25.excalidraw](/images/cdc2c8e2a9e0f9133ecd22375a025fc3f44863bd.png)\n\t\t- 如何判断这两个结果之间的差距呢?\n\t\t- 交叉熵：可通过 **交叉熵** 来判断真实和预测的差距\n\t\t\t- $l o s s=-\\sum_{i=1}^C y_i \\log f_i(x)$\n\t\t\t- $x$ 是图片数据, $y_i$ 是第 $i$ 个类别的标签值, $f_i(x)$ 是第 $i$ 个类别的预测的结果, $C$ 是类别\n\t\t\t- 手动计算上面的例子\n\t\t- 计算演示（全自动调库计算）![static/attachment/Pasted image 20221107154220.png](/images/23e4df4bf1de153009fd961cdc0f186257e092b8.png)\n\t\t- 计算演示（半自动调库运算）\n\t\t\t- ![static/attachment/Pasted image 20221107154256.png](/images/6aa176a56ce7d5a5af1d22a91e141759c7938da6.png)\n\t- 交叉熵的大小与预测结果的关系\n\t\t- 假设我们的预测结果完全正确时与完成错误时,对比熵值大小\n\t\t\t- ![static/attachment/Pasted image 20221107154349.png](/images/213d86fb49e1239668dee499bd5d7b236fe795e2.png)\n\t- 交叉熵的意义\n\t\t- 在相同事件空间里，概率分布 P(x) 对应的每个事件，若用概率分布 Q(x) 编码时，平均每个基本事件（符号）编码长度增加了多少比特\n\n## 模型定义\n\n- 模型表示\n\t- 神经网络 (neuron), $f=h_{\\theta}(x)$\n\t- ![static/attachment/Pasted image 20221114144149.png](/images/4e3a669077936ea7c6f19d682c3362be9fc1c270.png)\n\t- 代码表示:\n\t\t- ![static/attachment/Pasted image 20221107233741.png](/images/5ebb3bddccb1817a247ec3c30ce88189c5d988cb.png)\n- 损失函数\n\t- 交叉熵 $\\operatorname{loss}=-\\frac{1}{n}\\sum _j ^N \\sum_{i=1}^C y_i \\log f_i(x)$\n\t- $j$ 表示图片的编号, $i$ 表示类别的编号, $C$ 表示所有的类别\n\t- 举个例子说明一下\n- 目标转换\n\t- 最小化损失 $loss$\n\t- 如何求: 梯度下降\n- 梯度下降的步骤\n\t- 初始化 $w,b$ 为任意值，如 $w=<a href='{% post_path 0,0,\\dots,0 %}'>0,0,\\dots,0</a>,b=[0,\\dots,0]$\n\t\t- 计算当前 $w,b$ 对应的损失. 这的 $w=\\{w_{ij}\\}$, $i$ 表示网络的层数,$j$ 表示第 $i$ 层网络的序号.\n\t\t- 分别计算 loss 对 $w,b$ 的梯度 $d_w, d_b$（偏导数）\n\t\t- 更新 $w$ 和 $b$ 直到：（训练（fit): 逐渐更新 $w,b$ 的过程）\n\t\t\t- 策略 1：loss 不在降低\n\t\t\t- 策略 2：**迭代到指定次数（本文采用）**\n\n\t\t\t-\n\n\n\t\t\t- \n$$\\begin{gather} \\\\\n\t\t\t  w=w-\\alpha*d_w, \\\\\n\t\t\t  b=b-\\alpha*d_b\\\\\n\t\t\t  s.t. \\alpha \\in [0,1]\n\t\t\t  \\end{gather}$$\n\n\n\t\t\t- $\\alpha$ 学习率（超参数：手工设置的，模型参数：能通过数据学到的 ($w,b$)\n\t\t\t-\n\n\n\n## 模型实现\n\n- 数据准备\n- 模型建立\n- 模型训练\n- 模型评估\n- 预测结果\n\n## 案例说明\n\n- 这个例子用于演示。\n\t- 例子：为了简单起见，例子不区分训练集和测试集，训练和预测均在同一个数据集上完成\n\t- 实际：实际中，训练集和测试集是分开的，测试集不参与训练  \n\n模型实现: [04-03 手机类型识别-BP神经网络.ipynb](http://127.0.0.1:8888/lab/workspaces/auto-q/tree/商业数据分析/Day04%20-%20神经网络/04-03%20手机类型识别-BP神经网络.ipynb)\n\n## 其他说明\n\nAI 没法用 <a href='{% post_path AI-环境说明 %}'>AI-环境说明</a>\n","source":"_posts/04-手机品牌识别之神经网络.md","raw":"---\ntitle: 04-手机品牌识别之神经网络\nshare: true\ntags:\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-11-02 08:35:44 \nupdated: 2022-12-22 21:27:52 \ncategories: [uncategory]\naliases:\n  - 04-手机品牌识别之神经网络\n---\n\n\n\n## 目标\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型 \n$$\\begin{gather}  \n  f: R \\rightarrow R, \\\\  \n  f(x)=y,\\\\ s.t. x,y \\in R  \n  \\end{gather}  \n  $$\n 该模型能够根据图片 $x$ 预测图片的类型 $y$. $(x_1,y_1)$ 表示图片 $x_1$ 对应的类别为 $y_1$；$x_i$ 可能取值 $x_i=\\{ 1,120,\\dots,255\\}$, $y_i=\\{0.2,0.3,0.5,0.1\\}$, $softmax(y_i)=\\{0,0,1,0\\}$\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n给定图片的集合 $x=\\{ x_1,\\dots,x_n \\}$ 与图片的分类 $y=\\{y_1,\\dots,y_n \\}$, 我们想要求解出一个模型\n\n- 举例说明\n\t- 建立一个模型，输入是手机图片，输出是手机类别\n\t- 输入图片\n\t\t- ![static/attachment/Pasted image 20221107230429.png](/images/96ae3924006f3a11007207d031717463b3bbac6c.png)\n\t- 输出\n\t\t- 苹果 (手机类别)\n\n## 案例引入 - 神经网络\n\n- 一元一次方程  \n\t- $y=ax+b=b+ax=\\theta_0+\\theta_1 x=w*x+b$\n\t- $b$、$\\theta_0$ 等价，$a$、$\\theta_1$、$w$ 等价\n\t- 我们理解为\n\t\t- x 通过一个黑盒，得到了 y\n\t\t\t- ![static/attachment/Pasted image 20221107153211.png](/images/f8f413892356a5dff1d989153e2fd65a0d4a92f0.png)\n- 二元一次方程\n\t- $y=w_1*x_1+w_2*x_2+b$\n\t- 我们理解为：\n\t\t- $x_1,x_2$ 通过一个黑盒，得到了 $y$\n\t\t\t- ![static/attachment/Pasted image 20221107153235.png](/images/b517688cf5875de82bd1deea8f8764bff7b90ed9.png)\n- 一元二次方程黑盒变体\n\t- 理解为：\n\t\t- $x_1, x_2$ 分别通过两个黑盒得到 $a_{11},a_{12}$, 然后 $a_{11},a_{12}$ 通过黑盒得到 $y$.\n\t\t- ![static/attachment/Pasted image 20221107153324.png](/images/7faedcf60c808cf866cebddf14a848839eefd236.png)\n- 一元二次方程黑盒变体=神经网络\n\t- 一个隐藏层的神经网络\n\t- ![static/attachment/Pasted image 20221107153417.png](/images/6a5e676a58d9059a7a290844beba2e1558f7c0f4.png)\n- 计算例子举例\n\t- 假设输入 $x_1=(2,3)$，任意初始化 $w_{11},w_{12},w_{21}$，计算 $y$\n- 多个隐藏层的神经网络\n\t- ![Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.06.56.excalidraw](/images/3a5c8221fe075b1a418bea704a2d91838ffe1983.png)\n\t- ![static/attachment/Pasted image 20221107231726.png](/images/cfcdf117dd1192b8c7003cb0b2a3bd30e97803fc.png)\n\t- 如何计算?\n\n## 基础 - One-hot 编码\n\n- 机器学习两类特殊问题\n\t- 分类任务 (手机类型识别) (本例)\n\t- 回归任务 (房价预测) ✅\n- 图片分类如何表示\n\t- 假设我们手机只有 4 类\n\t\t- 苹果 1\n\t\t- 华为 2\n\t\t- 荣耀 3\n\t\t- 其他\n\t- 那么, 在**数学 (机器学习)**中如何表示其类别呢?\n\t\t- one-hot 编码\n\t- one-hot 编码\n\t\t- 用于在多分类数据中表示目标的类别\n\t\t- 例如: 对于这些手机图片:\n\t\t- ![static/attachment/Pasted image 20221107153612.png](/images/c5475754c914e4fc8616218ea075f6aed92d8bc7.png)\n\t\t- 假设我们只有 4 类\n\t\t\t- 苹果\n\t\t\t- 华为\n\t\t\t- 荣耀\n\t\t\t- 其他\n\t\t- one-hot 编码表示为:\n\t\t\t- ![static/attachment/Pasted image 20221107232253.png](/images/05f25e6b5715fb1458d1c2bbe5ffb845e96ceb18.png)\n\n## 基础 - 扁平化\n\n- 图片扁平化\n\t- 指将矩阵形式的图片 (如 $28*28*3$ 的图片) 编程 $vector$ (一维向量)\n\t- 如:\n\t\t- 将正方形的图片矩阵表示为一个向量\n\t\t- ![Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.29.59.excalidraw](/images/1373897c02e7694b973c6f2e09f4d7ec78ef3318.png)\n\t\t- ![static/attachment/Pasted image 20221107153753.png](/images/7e75b5d82750938cf1c4f52908c1a4c3ecdc8095.png)\n\n## 基础 - 交叉熵\n\n- 如何判断模型输出 (one-hot) 和标签之间 (one-hot) 的差距\n\t- 假设\n\t\t- 图片标签（真实）:$[[1,0,0,0]]$\n\t\t- 预测标签（机器识别的结果）: $[[0.1,0.7,0.1,0.1]]$\n\t\t- ![Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.38.25.excalidraw](/images/cdc2c8e2a9e0f9133ecd22375a025fc3f44863bd.png)\n\t\t- 如何判断这两个结果之间的差距呢?\n\t\t- 交叉熵：可通过 **交叉熵** 来判断真实和预测的差距\n\t\t\t- $l o s s=-\\sum_{i=1}^C y_i \\log f_i(x)$\n\t\t\t- $x$ 是图片数据, $y_i$ 是第 $i$ 个类别的标签值, $f_i(x)$ 是第 $i$ 个类别的预测的结果, $C$ 是类别\n\t\t\t- 手动计算上面的例子\n\t\t- 计算演示（全自动调库计算）![static/attachment/Pasted image 20221107154220.png](/images/23e4df4bf1de153009fd961cdc0f186257e092b8.png)\n\t\t- 计算演示（半自动调库运算）\n\t\t\t- ![static/attachment/Pasted image 20221107154256.png](/images/6aa176a56ce7d5a5af1d22a91e141759c7938da6.png)\n\t- 交叉熵的大小与预测结果的关系\n\t\t- 假设我们的预测结果完全正确时与完成错误时,对比熵值大小\n\t\t\t- ![static/attachment/Pasted image 20221107154349.png](/images/213d86fb49e1239668dee499bd5d7b236fe795e2.png)\n\t- 交叉熵的意义\n\t\t- 在相同事件空间里，概率分布 P(x) 对应的每个事件，若用概率分布 Q(x) 编码时，平均每个基本事件（符号）编码长度增加了多少比特\n\n## 模型定义\n\n- 模型表示\n\t- 神经网络 (neuron), $f=h_{\\theta}(x)$\n\t- ![static/attachment/Pasted image 20221114144149.png](/images/4e3a669077936ea7c6f19d682c3362be9fc1c270.png)\n\t- 代码表示:\n\t\t- ![static/attachment/Pasted image 20221107233741.png](/images/5ebb3bddccb1817a247ec3c30ce88189c5d988cb.png)\n- 损失函数\n\t- 交叉熵 $\\operatorname{loss}=-\\frac{1}{n}\\sum _j ^N \\sum_{i=1}^C y_i \\log f_i(x)$\n\t- $j$ 表示图片的编号, $i$ 表示类别的编号, $C$ 表示所有的类别\n\t- 举个例子说明一下\n- 目标转换\n\t- 最小化损失 $loss$\n\t- 如何求: 梯度下降\n- 梯度下降的步骤\n\t- 初始化 $w,b$ 为任意值，如 $w=<a href='{% post_path 0,0,\\dots,0 %}'>0,0,\\dots,0</a>,b=[0,\\dots,0]$\n\t\t- 计算当前 $w,b$ 对应的损失. 这的 $w=\\{w_{ij}\\}$, $i$ 表示网络的层数,$j$ 表示第 $i$ 层网络的序号.\n\t\t- 分别计算 loss 对 $w,b$ 的梯度 $d_w, d_b$（偏导数）\n\t\t- 更新 $w$ 和 $b$ 直到：（训练（fit): 逐渐更新 $w,b$ 的过程）\n\t\t\t- 策略 1：loss 不在降低\n\t\t\t- 策略 2：**迭代到指定次数（本文采用）**\n\n\t\t\t-\n\n\n\t\t\t- \n$$\\begin{gather} \\\\\n\t\t\t  w=w-\\alpha*d_w, \\\\\n\t\t\t  b=b-\\alpha*d_b\\\\\n\t\t\t  s.t. \\alpha \\in [0,1]\n\t\t\t  \\end{gather}$$\n\n\n\t\t\t- $\\alpha$ 学习率（超参数：手工设置的，模型参数：能通过数据学到的 ($w,b$)\n\t\t\t-\n\n\n\n## 模型实现\n\n- 数据准备\n- 模型建立\n- 模型训练\n- 模型评估\n- 预测结果\n\n## 案例说明\n\n- 这个例子用于演示。\n\t- 例子：为了简单起见，例子不区分训练集和测试集，训练和预测均在同一个数据集上完成\n\t- 实际：实际中，训练集和测试集是分开的，测试集不参与训练  \n\n模型实现: [04-03 手机类型识别-BP神经网络.ipynb](http://127.0.0.1:8888/lab/workspaces/auto-q/tree/商业数据分析/Day04%20-%20神经网络/04-03%20手机类型识别-BP神经网络.ipynb)\n\n## 其他说明\n\nAI 没法用 <a href='{% post_path AI-环境说明 %}'>AI-环境说明</a>\n","slug":"04-手机品牌识别之神经网络","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709h000h4cv96hiufdl1","content":"<h2 id=\"目标\">目标</h2>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"center\" columnspacing=\"0em\"><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo>:</mo><mi>R</mi><mo>→</mo><mi>R</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>y</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>R</mi></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{gather}  \n  f: R \\rightarrow R, \\\\  \n  f(x)=y,\\\\ s.t. x,y \\in R  \n  \\end{gather}  \n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.5em;vertical-align:-2em;\"></span><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-1.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span><span class=\"tag\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.5em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-1.5em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span></span></p>\n<p>该模型能够根据图片 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> 预测图片的类型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x_1,y_1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 表示图片 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 对应的类别为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>；<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 可能取值 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>120</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>255</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x_i=\\{ 1,120,\\dots,255\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">120</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">255</span><span class=\"mclose\">}</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mo stretchy=\"false\">{</mo><mn>0.2</mn><mo separator=\"true\">,</mo><mn>0.3</mn><mo separator=\"true\">,</mo><mn>0.5</mn><mo separator=\"true\">,</mo><mn>0.1</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y_i=\\{0.2,0.3,0.5,0.1\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">0.2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.5</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.1</span><span class=\"mclose\">}</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">{</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">softmax(y_i)=\\{0,0,1,0\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">so</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">ma</span><span class=\"mord mathnormal\">x</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">}</span></span></span></span></p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<ul>\n<li>举例说明\n<ul>\n<li>建立一个模型，输入是手机图片，输出是手机类别</li>\n<li>输入图片\n<ul>\n<li><img src=\"/images/96ae3924006f3a11007207d031717463b3bbac6c.png\" alt=\"static/attachment/Pasted image 20221107230429.png\"></li>\n</ul>\n</li>\n<li>输出\n<ul>\n<li>苹果 (手机类别)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"案例引入-神经网络\">案例引入 - 神经网络</h2>\n<ul>\n<li>一元一次方程\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>+</mo><mi>a</mi><mi>x</mi><mo>=</mo><msub><mi>θ</mi><mn>0</mn></msub><mo>+</mo><msub><mi>θ</mi><mn>1</mn></msub><mi>x</mi><mo>=</mo><mi>w</mi><mo>∗</mo><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y=ax+b=b+ax=\\theta_0+\\theta_1 x=w*x+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span>、<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 等价，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span>、<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>、<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span> 等价</li>\n<li>我们理解为\n<ul>\n<li>x 通过一个黑盒，得到了 y\n<ul>\n<li><img src=\"/images/f8f413892356a5dff1d989153e2fd65a0d4a92f0.png\" alt=\"static/attachment/Pasted image 20221107153211.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>二元一次方程\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><msub><mi>w</mi><mn>1</mn></msub><mo>∗</mo><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><mo>∗</mo><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y=w_1*x_1+w_2*x_2+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6153em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6153em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li>我们理解为：\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1,x_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 通过一个黑盒，得到了 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>\n<ul>\n<li><img src=\"/images/b517688cf5875de82bd1deea8f8764bff7b90ed9.png\" alt=\"static/attachment/Pasted image 20221107153235.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>一元二次方程黑盒变体\n<ul>\n<li>理解为：\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1, x_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 分别通过两个黑盒得到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>11</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>12</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{11},a_{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, 然后 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>11</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>12</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{11},a_{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 通过黑盒得到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>.</li>\n<li><img src=\"/images/7faedcf60c808cf866cebddf14a848839eefd236.png\" alt=\"static/attachment/Pasted image 20221107153324.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>一元二次方程黑盒变体=神经网络\n<ul>\n<li>一个隐藏层的神经网络</li>\n<li><img src=\"/images/6a5e676a58d9059a7a290844beba2e1558f7c0f4.png\" alt=\"static/attachment/Pasted image 20221107153417.png\"></li>\n</ul>\n</li>\n<li>计算例子举例\n<ul>\n<li>假设输入 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x_1=(2,3)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span></span></span></span>，任意初始化 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>w</mi><mn>11</mn></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mn>12</mn></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mn>21</mn></msub></mrow><annotation encoding=\"application/x-tex\">w_{11},w_{12},w_{21}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，计算 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></li>\n</ul>\n</li>\n<li>多个隐藏层的神经网络\n<ul>\n<li><img src=\"/images/3a5c8221fe075b1a418bea704a2d91838ffe1983.png\" alt=\"Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.06.56.excalidraw\"></li>\n<li><img src=\"/images/cfcdf117dd1192b8c7003cb0b2a3bd30e97803fc.png\" alt=\"static/attachment/Pasted image 20221107231726.png\"></li>\n<li>如何计算?</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"基础-One-hot-编码\">基础 - One-hot 编码</h2>\n<ul>\n<li>机器学习两类特殊问题\n<ul>\n<li>分类任务 (手机类型识别) (本例)</li>\n<li>回归任务 (房价预测) ✅</li>\n</ul>\n</li>\n<li>图片分类如何表示\n<ul>\n<li>假设我们手机只有 4 类\n<ul>\n<li>苹果 1</li>\n<li>华为 2</li>\n<li>荣耀 3</li>\n<li>其他</li>\n</ul>\n</li>\n<li>那么, 在**数学 (机器学习)**中如何表示其类别呢?\n<ul>\n<li>one-hot 编码</li>\n</ul>\n</li>\n<li>one-hot 编码\n<ul>\n<li>用于在多分类数据中表示目标的类别</li>\n<li>例如: 对于这些手机图片:</li>\n<li><img src=\"/images/c5475754c914e4fc8616218ea075f6aed92d8bc7.png\" alt=\"static/attachment/Pasted image 20221107153612.png\"></li>\n<li>假设我们只有 4 类\n<ul>\n<li>苹果</li>\n<li>华为</li>\n<li>荣耀</li>\n<li>其他</li>\n</ul>\n</li>\n<li>one-hot 编码表示为:\n<ul>\n<li><img src=\"/images/05f25e6b5715fb1458d1c2bbe5ffb845e96ceb18.png\" alt=\"static/attachment/Pasted image 20221107232253.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"基础-扁平化\">基础 - 扁平化</h2>\n<ul>\n<li>图片扁平化\n<ul>\n<li>指将矩阵形式的图片 (如 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>28</mn><mo>∗</mo><mn>28</mn><mo>∗</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">28*28*3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">28</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">28</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span></span></span></span> 的图片) 编程 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">vector</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\">ec</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">or</span></span></span></span> (一维向量)</li>\n<li>如:\n<ul>\n<li>将正方形的图片矩阵表示为一个向量</li>\n<li><img src=\"/images/1373897c02e7694b973c6f2e09f4d7ec78ef3318.png\" alt=\"Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.29.59.excalidraw\"></li>\n<li><img src=\"/images/7e75b5d82750938cf1c4f52908c1a4c3ecdc8095.png\" alt=\"static/attachment/Pasted image 20221107153753.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"基础-交叉熵\">基础 - 交叉熵</h2>\n<ul>\n<li>如何判断模型输出 (one-hot) 和标签之间 (one-hot) 的差距\n<ul>\n<li>假设\n<ul>\n<li>图片标签（真实）:<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[[1,0,0,0]]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">]]</span></span></span></span></li>\n<li>预测标签（机器识别的结果）: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">[</mo><mn>0.1</mn><mo separator=\"true\">,</mo><mn>0.7</mn><mo separator=\"true\">,</mo><mn>0.1</mn><mo separator=\"true\">,</mo><mn>0.1</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[[0.1,0.7,0.1,0.1]]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[[</span><span class=\"mord\">0.1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.7</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.1</span><span class=\"mclose\">]]</span></span></span></span></li>\n<li><img src=\"/images/cdc2c8e2a9e0f9133ecd22375a025fc3f44863bd.png\" alt=\"Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.38.25.excalidraw\"></li>\n<li>如何判断这两个结果之间的差距呢?</li>\n<li>交叉熵：可通过 <strong>交叉熵</strong> 来判断真实和预测的差距\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>C</mi></msubsup><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>⁡</mo><msub><mi>f</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">l o s s=-\\sum_{i=1}^C y_i \\log f_i(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2809em;vertical-align:-0.2997em;\"></span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9812em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">C</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> 是图片数据, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">y_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 个类别的标签值, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f_i(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> 是第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 个类别的预测的结果, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span> 是类别</li>\n<li>手动计算上面的例子</li>\n</ul>\n</li>\n<li>计算演示（全自动调库计算）<img src=\"/images/23e4df4bf1de153009fd961cdc0f186257e092b8.png\" alt=\"static/attachment/Pasted image 20221107154220.png\"></li>\n<li>计算演示（半自动调库运算）\n<ul>\n<li><img src=\"/images/6aa176a56ce7d5a5af1d22a91e141759c7938da6.png\" alt=\"static/attachment/Pasted image 20221107154256.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>交叉熵的大小与预测结果的关系\n<ul>\n<li>假设我们的预测结果完全正确时与完成错误时,对比熵值大小\n<ul>\n<li><img src=\"/images/213d86fb49e1239668dee499bd5d7b236fe795e2.png\" alt=\"static/attachment/Pasted image 20221107154349.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>交叉熵的意义\n<ul>\n<li>在相同事件空间里，概率分布 P(x) 对应的每个事件，若用概率分布 Q(x) 编码时，平均每个基本事件（符号）编码长度增加了多少比特</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"模型定义\">模型定义</h2>\n<ul>\n<li>模型表示\n<ul>\n<li>神经网络 (neuron), <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>=</mo><msub><mi>h</mi><mi>θ</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f=h_{\\theta}(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">θ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><img src=\"/images/4e3a669077936ea7c6f19d682c3362be9fc1c270.png\" alt=\"static/attachment/Pasted image 20221114144149.png\"></li>\n<li>代码表示:\n<ul>\n<li><img src=\"/images/5ebb3bddccb1817a247ec3c30ce88189c5d988cb.png\" alt=\"static/attachment/Pasted image 20221107233741.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>损失函数\n<ul>\n<li>交叉熵 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">loss</mi><mo>⁡</mo><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>∑</mo><mi>j</mi><mi>N</mi></msubsup><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>C</mi></msubsup><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>⁡</mo><msub><mi>f</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\operatorname{loss}=-\\frac{1}{n}\\sum _j ^N \\sum_{i=1}^C y_i \\log f_i(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">loss</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.417em;vertical-align:-0.4358em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9812em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4358em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9812em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">C</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 表示图片的编号, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 表示类别的编号, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span> 表示所有的类别</li>\n<li>举个例子说明一下</li>\n</ul>\n</li>\n<li>目标转换\n<ul>\n<li>最小化损失 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">loss</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span></span></span></span></li>\n<li>如何求: 梯度下降</li>\n</ul>\n</li>\n<li>梯度下降的步骤\n<ul>\n<li>初始化 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 为任意值，如 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mo>&lt;</mo><mi>a</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>f</mi><msup><mo>=</mo><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>&lt;</mo><mo stretchy=\"false\">!</mo><mo>−</mo><mo>−</mo><mi>s</mi><mi>w</mi><mi>i</mi><mi>g</mi><mtext>￼</mtext><mn>0</mn><mo>−</mo><mo>−</mo><msup><mo>&gt;</mo><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>&gt;</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>0</mn><mo>&lt;</mo><mi mathvariant=\"normal\">/</mi><mi>a</mi><mo>&gt;</mo><mo separator=\"true\">,</mo><mi>b</mi><mo>=</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">w=&lt;a href=&#x27;&#x27;&gt;0,0,\\dots,0&lt;/a&gt;,b=[0,\\dots,0]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9463em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ah</span><span class=\"mord mathnormal\">re</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\">=</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mclose\">!</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\">￼0</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8352em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\">&gt;</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">/</span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">]</span></span></span></span>\n<ul>\n<li>\n<p>计算当前 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 对应的损失. 这的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">w=\\{w_{ij}\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">ij</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 表示网络的层数,<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 表示第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 层网络的序号.</p>\n</li>\n<li>\n<p>分别计算 loss 对 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 的梯度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo><msub><mi>d</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">d_w, d_b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>（偏导数）</p>\n</li>\n<li>\n<p>更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 直到：（训练（fit): 逐渐更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 的过程）</p>\n<ul>\n<li>\n<p>策略 1：loss 不在降低</p>\n</li>\n<li>\n<p>策略 2：<strong>迭代到指定次数（本文采用）</strong></p>\n</li>\n<li></li>\n</ul>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"center\" columnspacing=\"0em\"><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>w</mi><mo>=</mo><mi>w</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>b</mi><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>b</mi></msub></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mi>α</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{gather} \\\\\n\t\t\t  w=w-\\alpha*d_w, \\\\\n\t\t\t  b=b-\\alpha*d_b\\\\\n\t\t\t  s.t. \\alpha \\in [0,1]\n\\end{gather}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6em;vertical-align:-2.75em;\"></span><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.25em;\"><span style=\"top:-5.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-3.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-0.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75em;\"><span></span></span></span></span></span></span></span><span class=\"tag\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.25em;\"><span style=\"top:-5.25em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-3.75em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-0.75em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75em;\"><span></span></span></span></span></span></span></span></span></p>\n<pre><code>\t\t- $\\alpha$ 学习率（超参数：手工设置的，模型参数：能通过数据学到的 ($w,b$)\n\t\t-\n</code></pre>\n<h2 id=\"模型实现\">模型实现</h2>\n<ul>\n<li>数据准备</li>\n<li>模型建立</li>\n<li>模型训练</li>\n<li>模型评估</li>\n<li>预测结果</li>\n</ul>\n<h2 id=\"案例说明\">案例说明</h2>\n<ul>\n<li>这个例子用于演示。\n<ul>\n<li>例子：为了简单起见，例子不区分训练集和测试集，训练和预测均在同一个数据集上完成</li>\n<li>实际：实际中，训练集和测试集是分开的，测试集不参与训练</li>\n</ul>\n</li>\n</ul>\n<p>模型实现: <a href=\"http://127.0.0.1:8888/lab/workspaces/auto-q/tree/%E5%95%86%E4%B8%9A%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/Day04%20-%20%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/04-03%20%E6%89%8B%E6%9C%BA%E7%B1%BB%E5%9E%8B%E8%AF%86%E5%88%AB-BP%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C.ipynb\">04-03 手机类型识别-BP神经网络.ipynb</a></p>\n<h2 id=\"其他说明\">其他说明</h2>\n<p>AI 没法用 <a href=''>AI-环境说明</a></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover1.JPG","excerpt":"","more":"<h2 id=\"目标\">目标</h2>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"center\" columnspacing=\"0em\"><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo>:</mo><mi>R</mi><mo>→</mo><mi>R</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>y</mi><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo>∈</mo><mi>R</mi></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{gather}  \n  f: R \\rightarrow R, \\\\  \n  f(x)=y,\\\\ s.t. x,y \\in R  \n  \\end{gather}  \n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:4.5em;vertical-align:-2em;\"></span><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-3.16em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct\">,</span></span></span><span style=\"top:-1.66em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span><span class=\"tag\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.5em;\"><span style=\"top:-4.5em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-1.5em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2em;\"><span></span></span></span></span></span></span></span></span></p>\n<p>该模型能够根据图片 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> 预测图片的类型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x_1,y_1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 表示图片 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 对应的类别为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">y_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>；<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 可能取值 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>120</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>255</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x_i=\\{ 1,120,\\dots,255\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">120</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">255</span><span class=\"mclose\">}</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mo stretchy=\"false\">{</mo><mn>0.2</mn><mo separator=\"true\">,</mo><mn>0.3</mn><mo separator=\"true\">,</mo><mn>0.5</mn><mo separator=\"true\">,</mo><mn>0.1</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y_i=\\{0.2,0.3,0.5,0.1\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">0.2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.3</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.5</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.1</span><span class=\"mclose\">}</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">{</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">softmax(y_i)=\\{0,0,1,0\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">so</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">ma</span><span class=\"mord mathnormal\">x</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">}</span></span></span></span></p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<p>给定图片的集合 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">x=\\{ x_1,\\dots,x_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 与图片的分类 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">y=\\{y_1,\\dots,y_n \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, 我们想要求解出一个模型</p>\n<ul>\n<li>举例说明\n<ul>\n<li>建立一个模型，输入是手机图片，输出是手机类别</li>\n<li>输入图片\n<ul>\n<li><img src=\"/images/96ae3924006f3a11007207d031717463b3bbac6c.png\" alt=\"static/attachment/Pasted image 20221107230429.png\"></li>\n</ul>\n</li>\n<li>输出\n<ul>\n<li>苹果 (手机类别)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"案例引入-神经网络\">案例引入 - 神经网络</h2>\n<ul>\n<li>一元一次方程\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi><mo>=</mo><mi>b</mi><mo>+</mo><mi>a</mi><mi>x</mi><mo>=</mo><msub><mi>θ</mi><mn>0</mn></msub><mo>+</mo><msub><mi>θ</mi><mn>1</mn></msub><mi>x</mi><mo>=</mo><mi>w</mi><mo>∗</mo><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y=ax+b=b+ax=\\theta_0+\\theta_1 x=w*x+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4653em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span>、<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 等价，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span>、<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>、<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span> 等价</li>\n<li>我们理解为\n<ul>\n<li>x 通过一个黑盒，得到了 y\n<ul>\n<li><img src=\"/images/f8f413892356a5dff1d989153e2fd65a0d4a92f0.png\" alt=\"static/attachment/Pasted image 20221107153211.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>二元一次方程\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><msub><mi>w</mi><mn>1</mn></msub><mo>∗</mo><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><mo>∗</mo><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y=w_1*x_1+w_2*x_2+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6153em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6153em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n<li>我们理解为：\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1,x_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 通过一个黑盒，得到了 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>\n<ul>\n<li><img src=\"/images/b517688cf5875de82bd1deea8f8764bff7b90ed9.png\" alt=\"static/attachment/Pasted image 20221107153235.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>一元二次方程黑盒变体\n<ul>\n<li>理解为：\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">x_1, x_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 分别通过两个黑盒得到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>11</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>12</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{11},a_{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, 然后 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>11</mn></msub><mo separator=\"true\">,</mo><msub><mi>a</mi><mn>12</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_{11},a_{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 通过黑盒得到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span>.</li>\n<li><img src=\"/images/7faedcf60c808cf866cebddf14a848839eefd236.png\" alt=\"static/attachment/Pasted image 20221107153324.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>一元二次方程黑盒变体=神经网络\n<ul>\n<li>一个隐藏层的神经网络</li>\n<li><img src=\"/images/6a5e676a58d9059a7a290844beba2e1558f7c0f4.png\" alt=\"static/attachment/Pasted image 20221107153417.png\"></li>\n</ul>\n</li>\n<li>计算例子举例\n<ul>\n<li>假设输入 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x_1=(2,3)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span></span></span></span>，任意初始化 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>w</mi><mn>11</mn></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mn>12</mn></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mn>21</mn></msub></mrow><annotation encoding=\"application/x-tex\">w_{11},w_{12},w_{21}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">11</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">21</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，计算 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span></li>\n</ul>\n</li>\n<li>多个隐藏层的神经网络\n<ul>\n<li><img src=\"/images/3a5c8221fe075b1a418bea704a2d91838ffe1983.png\" alt=\"Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.06.56.excalidraw\"></li>\n<li><img src=\"/images/cfcdf117dd1192b8c7003cb0b2a3bd30e97803fc.png\" alt=\"static/attachment/Pasted image 20221107231726.png\"></li>\n<li>如何计算?</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"基础-One-hot-编码\">基础 - One-hot 编码</h2>\n<ul>\n<li>机器学习两类特殊问题\n<ul>\n<li>分类任务 (手机类型识别) (本例)</li>\n<li>回归任务 (房价预测) ✅</li>\n</ul>\n</li>\n<li>图片分类如何表示\n<ul>\n<li>假设我们手机只有 4 类\n<ul>\n<li>苹果 1</li>\n<li>华为 2</li>\n<li>荣耀 3</li>\n<li>其他</li>\n</ul>\n</li>\n<li>那么, 在**数学 (机器学习)**中如何表示其类别呢?\n<ul>\n<li>one-hot 编码</li>\n</ul>\n</li>\n<li>one-hot 编码\n<ul>\n<li>用于在多分类数据中表示目标的类别</li>\n<li>例如: 对于这些手机图片:</li>\n<li><img src=\"/images/c5475754c914e4fc8616218ea075f6aed92d8bc7.png\" alt=\"static/attachment/Pasted image 20221107153612.png\"></li>\n<li>假设我们只有 4 类\n<ul>\n<li>苹果</li>\n<li>华为</li>\n<li>荣耀</li>\n<li>其他</li>\n</ul>\n</li>\n<li>one-hot 编码表示为:\n<ul>\n<li><img src=\"/images/05f25e6b5715fb1458d1c2bbe5ffb845e96ceb18.png\" alt=\"static/attachment/Pasted image 20221107232253.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"基础-扁平化\">基础 - 扁平化</h2>\n<ul>\n<li>图片扁平化\n<ul>\n<li>指将矩阵形式的图片 (如 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>28</mn><mo>∗</mo><mn>28</mn><mo>∗</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">28*28*3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">28</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">28</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span></span></span></span> 的图片) 编程 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">vector</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\">ec</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">or</span></span></span></span> (一维向量)</li>\n<li>如:\n<ul>\n<li>将正方形的图片矩阵表示为一个向量</li>\n<li><img src=\"/images/1373897c02e7694b973c6f2e09f4d7ec78ef3318.png\" alt=\"Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.29.59.excalidraw\"></li>\n<li><img src=\"/images/7e75b5d82750938cf1c4f52908c1a4c3ecdc8095.png\" alt=\"static/attachment/Pasted image 20221107153753.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"基础-交叉熵\">基础 - 交叉熵</h2>\n<ul>\n<li>如何判断模型输出 (one-hot) 和标签之间 (one-hot) 的差距\n<ul>\n<li>假设\n<ul>\n<li>图片标签（真实）:<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">[</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[[1,0,0,0]]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">]]</span></span></span></span></li>\n<li>预测标签（机器识别的结果）: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">[</mo><mn>0.1</mn><mo separator=\"true\">,</mo><mn>0.7</mn><mo separator=\"true\">,</mo><mn>0.1</mn><mo separator=\"true\">,</mo><mn>0.1</mn><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[[0.1,0.7,0.1,0.1]]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[[</span><span class=\"mord\">0.1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.7</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.1</span><span class=\"mclose\">]]</span></span></span></span></li>\n<li><img src=\"/images/cdc2c8e2a9e0f9133ecd22375a025fc3f44863bd.png\" alt=\"Excalidraw/04-手机品牌识别之神经网络 2022-11-14 17.38.25.excalidraw\"></li>\n<li>如何判断这两个结果之间的差距呢?</li>\n<li>交叉熵：可通过 <strong>交叉熵</strong> 来判断真实和预测的差距\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>C</mi></msubsup><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>⁡</mo><msub><mi>f</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">l o s s=-\\sum_{i=1}^C y_i \\log f_i(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2809em;vertical-align:-0.2997em;\"></span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9812em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">C</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> 是图片数据, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">y_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 个类别的标签值, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f_i(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> 是第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 个类别的预测的结果, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span> 是类别</li>\n<li>手动计算上面的例子</li>\n</ul>\n</li>\n<li>计算演示（全自动调库计算）<img src=\"/images/23e4df4bf1de153009fd961cdc0f186257e092b8.png\" alt=\"static/attachment/Pasted image 20221107154220.png\"></li>\n<li>计算演示（半自动调库运算）\n<ul>\n<li><img src=\"/images/6aa176a56ce7d5a5af1d22a91e141759c7938da6.png\" alt=\"static/attachment/Pasted image 20221107154256.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>交叉熵的大小与预测结果的关系\n<ul>\n<li>假设我们的预测结果完全正确时与完成错误时,对比熵值大小\n<ul>\n<li><img src=\"/images/213d86fb49e1239668dee499bd5d7b236fe795e2.png\" alt=\"static/attachment/Pasted image 20221107154349.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>交叉熵的意义\n<ul>\n<li>在相同事件空间里，概率分布 P(x) 对应的每个事件，若用概率分布 Q(x) 编码时，平均每个基本事件（符号）编码长度增加了多少比特</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"模型定义\">模型定义</h2>\n<ul>\n<li>模型表示\n<ul>\n<li>神经网络 (neuron), <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>=</mo><msub><mi>h</mi><mi>θ</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f=h_{\\theta}(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">θ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><img src=\"/images/4e3a669077936ea7c6f19d682c3362be9fc1c270.png\" alt=\"static/attachment/Pasted image 20221114144149.png\"></li>\n<li>代码表示:\n<ul>\n<li><img src=\"/images/5ebb3bddccb1817a247ec3c30ce88189c5d988cb.png\" alt=\"static/attachment/Pasted image 20221107233741.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>损失函数\n<ul>\n<li>交叉熵 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">loss</mi><mo>⁡</mo><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>∑</mo><mi>j</mi><mi>N</mi></msubsup><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>C</mi></msubsup><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>⁡</mo><msub><mi>f</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\operatorname{loss}=-\\frac{1}{n}\\sum _j ^N \\sum_{i=1}^C y_i \\log f_i(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">loss</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.417em;vertical-align:-0.4358em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9812em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4358em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9812em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">C</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 表示图片的编号, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 表示类别的编号, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span> 表示所有的类别</li>\n<li>举个例子说明一下</li>\n</ul>\n</li>\n<li>目标转换\n<ul>\n<li>最小化损失 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">loss</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">oss</span></span></span></span></li>\n<li>如何求: 梯度下降</li>\n</ul>\n</li>\n<li>梯度下降的步骤\n<ul>\n<li>初始化 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 为任意值，如 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mo>&lt;</mo><mi>a</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>f</mi><msup><mo>=</mo><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>&lt;</mo><mo stretchy=\"false\">!</mo><mo>−</mo><mo>−</mo><mi>s</mi><mi>w</mi><mi>i</mi><mi>g</mi><mtext>￼</mtext><mn>0</mn><mo>−</mo><mo>−</mo><msup><mo>&gt;</mo><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mo>&gt;</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>0</mn><mo>&lt;</mo><mi mathvariant=\"normal\">/</mi><mi>a</mi><mo>&gt;</mo><mo separator=\"true\">,</mo><mi>b</mi><mo>=</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">w=&lt;a href=&#x27;&#x27;&gt;0,0,\\dots,0&lt;/a&gt;,b=[0,\\dots,0]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9463em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ah</span><span class=\"mord mathnormal\">re</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\">=</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mclose\">!</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord\">￼0</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8352em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\">&gt;</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">/</span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">]</span></span></span></span>\n<ul>\n<li>\n<p>计算当前 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 对应的损失. 这的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mo stretchy=\"false\">{</mo><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">w=\\{w_{ij}\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">ij</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 表示网络的层数,<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span></span></span></span> 表示第 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 层网络的序号.</p>\n</li>\n<li>\n<p>分别计算 loss 对 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 的梯度 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo><msub><mi>d</mi><mi>b</mi></msub></mrow><annotation encoding=\"application/x-tex\">d_w, d_b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>（偏导数）</p>\n</li>\n<li>\n<p>更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 直到：（训练（fit): 逐渐更新 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">w,b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> 的过程）</p>\n<ul>\n<li>\n<p>策略 1：loss 不在降低</p>\n</li>\n<li>\n<p>策略 2：<strong>迭代到指定次数（本文采用）</strong></p>\n</li>\n<li></li>\n</ul>\n<ul>\n<li></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mtable rowspacing=\"0.25em\" columnalign=\"center\" columnspacing=\"0em\"><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>w</mi><mo>=</mo><mi>w</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>w</mi></msub><mo separator=\"true\">,</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>b</mi><mo>=</mo><mi>b</mi><mo>−</mo><mi>α</mi><mo>∗</mo><msub><mi>d</mi><mi>b</mi></msub></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr><mtr><mtd class =\"mtr-glue\"></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"true\"><mrow><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>t</mi><mi mathvariant=\"normal\">.</mi><mi>α</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow></mstyle></mtd><mtd class =\"mtr-glue\"></mtd><mtd class =\"mml-eqn-num\"></mtd></mtr></mtable><annotation encoding=\"application/x-tex\">\\begin{gather} \\\\\n\t\t\t  w=w-\\alpha*d_w, \\\\\n\t\t\t  b=b-\\alpha*d_b\\\\\n\t\t\t  s.t. \\alpha \\in [0,1]\n\\end{gather}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6em;vertical-align:-2.75em;\"></span><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.25em;\"><span style=\"top:-5.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"></span></span><span style=\"top:-3.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.41em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-0.91em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">t</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75em;\"><span></span></span></span></span></span></span></span><span class=\"tag\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.25em;\"><span style=\"top:-5.25em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-3.75em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span><span style=\"top:-0.75em;\"><span class=\"pstrut\" style=\"height:2.84em;\"></span><span class=\"eqn-num\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75em;\"><span></span></span></span></span></span></span></span></span></p>\n<pre><code>\t\t- $\\alpha$ 学习率（超参数：手工设置的，模型参数：能通过数据学到的 ($w,b$)\n\t\t-\n</code></pre>\n<h2 id=\"模型实现\">模型实现</h2>\n<ul>\n<li>数据准备</li>\n<li>模型建立</li>\n<li>模型训练</li>\n<li>模型评估</li>\n<li>预测结果</li>\n</ul>\n<h2 id=\"案例说明\">案例说明</h2>\n<ul>\n<li>这个例子用于演示。\n<ul>\n<li>例子：为了简单起见，例子不区分训练集和测试集，训练和预测均在同一个数据集上完成</li>\n<li>实际：实际中，训练集和测试集是分开的，测试集不参与训练</li>\n</ul>\n</li>\n</ul>\n<p>模型实现: <a href=\"http://127.0.0.1:8888/lab/workspaces/auto-q/tree/%E5%95%86%E4%B8%9A%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/Day04%20-%20%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/04-03%20%E6%89%8B%E6%9C%BA%E7%B1%BB%E5%9E%8B%E8%AF%86%E5%88%AB-BP%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C.ipynb\">04-03 手机类型识别-BP神经网络.ipynb</a></p>\n<h2 id=\"其他说明\">其他说明</h2>\n<p>AI 没法用 <a href=''>AI-环境说明</a></p>\n"},{"title":"04-机器学习模型理解","share":true,"date":"2022-11-14T05:50:35.000Z","updated":"2022-12-22T13:28:14.000Z","aliases":["04-机器学习模型理解"],"_content":"\n\n\n## 机器学习一般化理解\n\n- 对于现实中的一个问题, 我们需要使用机器学习的方法对其进行建模, 其建模步骤:\n\t- 👉 根据 **数据特征** 选择一个模型 (回归模型)\n\t\t- 比如下图中的数据\n\t\t- ![static/attachment/Pasted image 20221107135019.png](/images/b32c68fa9d60da210505be648152958708936b6a.png)\n\t\t- 我们选择的模型是 $y=ax+b$\n\t- 👉 定义模型预测值和真实值的度量方式 (`loss`), 如均方误差 ( Mean Squared Error/MSE)\n\t\t- $MSE=\\frac{1}{N}\\sum(y-y_{pred})^2$\n\t- 👉 问题转化: 转化为求最值问题\n\t- 👉 求解模型\n\t\t- 通过梯度下降 (求最值的方法), 求解 `loss` 对未知参数的梯度, 然后逐步更新参数\n","source":"_posts/04-机器学习模型理解.md","raw":"---\ntitle: 04-机器学习模型理解\nshare: true\ntags:\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-11-14 13:50:35 \nupdated: 2022-12-22 21:28:14 \ncategories: [uncategory]\naliases:\n  - 04-机器学习模型理解\n---\n\n\n\n## 机器学习一般化理解\n\n- 对于现实中的一个问题, 我们需要使用机器学习的方法对其进行建模, 其建模步骤:\n\t- 👉 根据 **数据特征** 选择一个模型 (回归模型)\n\t\t- 比如下图中的数据\n\t\t- ![static/attachment/Pasted image 20221107135019.png](/images/b32c68fa9d60da210505be648152958708936b6a.png)\n\t\t- 我们选择的模型是 $y=ax+b$\n\t- 👉 定义模型预测值和真实值的度量方式 (`loss`), 如均方误差 ( Mean Squared Error/MSE)\n\t\t- $MSE=\\frac{1}{N}\\sum(y-y_{pred})^2$\n\t- 👉 问题转化: 转化为求最值问题\n\t- 👉 求解模型\n\t\t- 通过梯度下降 (求最值的方法), 求解 `loss` 对未知参数的梯度, 然后逐步更新参数\n","slug":"04-机器学习模型理解","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709i000k4cv9380d5hgg","content":"<h2 id=\"机器学习一般化理解\">机器学习一般化理解</h2>\n<ul>\n<li>对于现实中的一个问题, 我们需要使用机器学习的方法对其进行建模, 其建模步骤:\n<ul>\n<li>👉 根据 <strong>数据特征</strong> 选择一个模型 (回归模型)\n<ul>\n<li>比如下图中的数据</li>\n<li><img src=\"/images/b32c68fa9d60da210505be648152958708936b6a.png\" alt=\"static/attachment/Pasted image 20221107135019.png\"></li>\n<li>我们选择的模型是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y=ax+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n</ul>\n</li>\n<li>👉 定义模型预测值和真实值的度量方式 (<code>loss</code>), 如均方误差 ( Mean Squared Error/MSE)\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>S</mi><mi>E</mi><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><mo>∑</mo><mo stretchy=\"false\">(</mo><mi>y</mi><mo>−</mo><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">MSE=\\frac{1}{N}\\sum(y-y_{pred})^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">MSE</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1002em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></li>\n</ul>\n</li>\n<li>👉 问题转化: 转化为求最值问题</li>\n<li>👉 求解模型\n<ul>\n<li>通过梯度下降 (求最值的方法), 求解 <code>loss</code> 对未知参数的梯度, 然后逐步更新参数</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover7.JPG","excerpt":"","more":"<h2 id=\"机器学习一般化理解\">机器学习一般化理解</h2>\n<ul>\n<li>对于现实中的一个问题, 我们需要使用机器学习的方法对其进行建模, 其建模步骤:\n<ul>\n<li>👉 根据 <strong>数据特征</strong> 选择一个模型 (回归模型)\n<ul>\n<li>比如下图中的数据</li>\n<li><img src=\"/images/b32c68fa9d60da210505be648152958708936b6a.png\" alt=\"static/attachment/Pasted image 20221107135019.png\"></li>\n<li>我们选择的模型是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mi>a</mi><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">y=ax+b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span></li>\n</ul>\n</li>\n<li>👉 定义模型预测值和真实值的度量方式 (<code>loss</code>), 如均方误差 ( Mean Squared Error/MSE)\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>S</mi><mi>E</mi><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><mo>∑</mo><mo stretchy=\"false\">(</mo><mi>y</mi><mo>−</mo><msub><mi>y</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi></mrow></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">MSE=\\frac{1}{N}\\sum(y-y_{pred})^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">MSE</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1002em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">re</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></li>\n</ul>\n</li>\n<li>👉 问题转化: 转化为求最值问题</li>\n<li>👉 求解模型\n<ul>\n<li>通过梯度下降 (求最值的方法), 求解 <code>loss</code> 对未知参数的梯度, 然后逐步更新参数</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"04-课程内容安排","share":true,"date":"2022-11-14T05:44:54.000Z","updated":"2022-12-22T13:27:57.000Z","aliases":["04-课程内容安排"],"_content":"\n## 线性回归回忆 (回归问题)\n\n![[培训资料/2022-10 贵州大学商业数据分析/03-线性回归原理分析及实现#模型表示]]\n\n## 机器学习模型理解与总结\n\n![[培训资料/2022-10 贵州大学商业数据分析/04-机器学习模型理解#机器学习一般化理解]]  \n\n## 神经网络与手机品牌预测\n\n<a href='{% post_path 04-手机品牌识别之神经网络 %}'>04-手机品牌识别之神经网络</a>  \n","source":"_posts/04-课程内容安排.md","raw":"---\ntitle: 04-课程内容安排\nshare: true\ntags:\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-11-14 13:44:54 \nupdated: 2022-12-22 21:27:57 \ncategories: [uncategory]\naliases:\n  - 04-课程内容安排\n---\n\n## 线性回归回忆 (回归问题)\n\n![[培训资料/2022-10 贵州大学商业数据分析/03-线性回归原理分析及实现#模型表示]]\n\n## 机器学习模型理解与总结\n\n![[培训资料/2022-10 贵州大学商业数据分析/04-机器学习模型理解#机器学习一般化理解]]  \n\n## 神经网络与手机品牌预测\n\n<a href='{% post_path 04-手机品牌识别之神经网络 %}'>04-手机品牌识别之神经网络</a>  \n","slug":"04-课程内容安排","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709j000p4cv99pq03kxj","content":"<h2 id=\"线性回归回忆-回归问题\">线性回归回忆 (回归问题)</h2>\n<p>![[培训资料/2022-10 贵州大学商业数据分析/03-线性回归原理分析及实现#模型表示]]</p>\n<h2 id=\"机器学习模型理解与总结\">机器学习模型理解与总结</h2>\n<p>![[培训资料/2022-10 贵州大学商业数据分析/04-机器学习模型理解#机器学习一般化理解]]</p>\n<h2 id=\"神经网络与手机品牌预测\">神经网络与手机品牌预测</h2>\n<p><a href='/uncategory/316ec7ed5cda.html'>04-手机品牌识别之神经网络</a></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover8.JPG","excerpt":"","more":"<h2 id=\"线性回归回忆-回归问题\">线性回归回忆 (回归问题)</h2>\n<p>![[培训资料/2022-10 贵州大学商业数据分析/03-线性回归原理分析及实现#模型表示]]</p>\n<h2 id=\"机器学习模型理解与总结\">机器学习模型理解与总结</h2>\n<p>![[培训资料/2022-10 贵州大学商业数据分析/04-机器学习模型理解#机器学习一般化理解]]</p>\n<h2 id=\"神经网络与手机品牌预测\">神经网络与手机品牌预测</h2>\n<p><a href='/uncategory/316ec7ed5cda.html'>04-手机品牌识别之神经网络</a></p>\n"},{"title":"1.1 网站到底是什么？","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:47.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","_content":"\n网站 **是由一个一个网页构成的**，**要想理解网站是什么，首先要理解网页是什么。**\n\n## 1\\. 什么是网页？\n\n百度网页的主城：\n\n前端：\n\nHTML\n\nCSS\n\nJavsScript\n\n后端：\n\n数据库 (Oracle, Mysql, Greenplum(postgresql)\n\n服务器（Pythonflask , java tomcat , apache , nojs pm2, go go server)\n\n通讯协议：\n\n前后端如何通讯：通过协议（http,https, tcp, udp,socket)\n\n![Excalidraw/1.1 网站到底是什么？ 2022-06-21 09.27.20.excalidraw](/images/5f05cfdffce3a0c09cd852a09dddb4415b663c68.png)\n\n**网页其实就是放在服务器上的一个文件**. 当我们浏览网页时，这个文件会被下载到我们本地的电脑，然后再由浏览器解析，渲染出各种漂亮的界面，比如表格、图片、标题、列表等。\n\n网页文件的后缀有很多种，比如 `.html`、`.php`、`.jsp`、`.asp` 等，相信读者在浏览器的地址栏里也都见到过，如下图所示：\n\n![在浏览器地址栏中查看 URL](http://c.biancheng.net/uploads/allimg/200317/1-20031GF551201.gif)  \n图 1：在浏览器地址栏中查看 URL\n\n**但不管网页的后缀是什么，它的本质都是一样的，就是由 HTML 代码构成的纯文本文件**。\n\n我们可以使用记事本、Notepad++、Sublime Text、Vim 等文本编辑器打开网页文件，看到它的所有内容，就像下面这样：\n\n```\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>这是网页标题</title>\n</head>\n<body>\n    <p>这是一段文本</p>\n    <a href=\"http://c.biancheng.net/\">这个一个超链接</a>\n    <ul>\n        <li>条目1</li>\n        <li>条目2</li>\n        <li>条目3</li>\n    </ul>\n</body>\n</html>\n```\n\n这就是 HTML 代码！我们可以看到很多由 `<>` 包围的特殊标记，**这叫做 HTML 标签（Tag）**，浏览器通过识别这些 HTML 标签来渲染出各种界面和效果。\n\n**每种 HTML 标签都有不同的含义，适用于不同的场景，能展示出不同的效果**，例如：\n\n- \\<html> 标签用来包围当前网页的所有 HTML 代码，可以把它看做一个外壳。\n- \\<head> 标签表示网页的头部，用来设置一些网页的参数，在浏览器中是看不到的：\n\t- \\<meta charset=\"UTF-8\"> 用来指明当前网页的编码格式是 UTF-8；\n\t- \\<title> 用来设置当前网页的标题，相当于文件的名字，它会显示在浏览器的标题栏。\n- \\<body> 标签表示网页的正文内容，也就是需要在浏览器主界面中显示的内容：\n\t- \\<p> 标签用来表示一个段落，能容纳一段文本；\n\t- \\<a> 标签用来表示一个超链接，用鼠标点击后可以跳转到其它网页；\n\t- \\<ul> 标签用来表示一个列表，其中的每个 \\<li> 都是子标签，用来表示一个列表项。\n\n将上面的代码保存到 index.html，拖到浏览器中运行，可以看到如下的效果：\n\n![一个简单的网页](http://c.biancheng.net/uploads/allimg/200317/1-20031G34H6447.png)  \n图 2：一个简单的网页\n\n这是一个非常简陋的网页，仅作为例子来演示，真实网页的 HTML 代码远比这复杂，你可以在网页上单击鼠标右键，然后在弹出菜单中选择“查看网页源代码”，就可以查看当前网页的 HTML 代码。\n\n## 2\\. 什么是网站？\n\n一个网站由很多网页组成，可以将多个网页放在一个文件夹中，这个文件夹还可以嵌套其它子文件夹，最终形成一个树状结构，如下图所示：\n\n![一个简单的网站结构](http://c.biancheng.net/uploads/allimg/200317/1-20031G44142Y3.gif)  \n图 3：一个简单的网站结构\n\n如果我们给顶级目录 program 绑定一个域名 www.domain.com，那么用户就可以通过 www.domain.com 来访问 program 文件夹中的所有文件（包括子文件夹），例如：\n\n- www.domain.com/demo.html\n- www.domain.com/python/\n- www.domain.com/java/spring.html\n- www.domain.com/java/maven/profile.html\n\n可以认为，网站就是一个绑定了域名的文件夹，该文件夹中可以包含子文件夹以及各种各样的文件，这些文件都可以通过域名来访问。当我们在地址栏中输入一个 URL 时，它其实已经展示了服务器上的目录结构，例如 [http://c.biancheng.net/linux/ln.html](http://c.biancheng.net/linux/ln.html)，就表示访问 linux 目录下的 ln.html 文件。\n\n当然，你也可以不绑定域名，只要在服务器上设置某个文件夹提供 Web 服务，用户也可以通过 IP 地址来访问。\n\n互联网上的所有服务器都是通过 IP 地址来定位的，域名只是 IP 地址的一种助记符，帮助用户记住网站的链接以及品牌。使用域名访问网站时，浏览器会先找到域名对应的 IP 地址，然后再通过 IP 地址请求服务器上的文件；这个过程叫做域名解析，是通过 DNS 服务器来完成的。\n\n网站的作用是把计算机上的数据（文章、博客、图片、视频等）分享出去，让别人也能获取到有用的信息；同时，别人也能发布自己的数据（发布文章、留言、上传视频等），让网站的内容更加丰富。网站和用户之间是一个相互促进的关系，网站用户越多，积累的数据也就越多，然后就会吸引更多用户继续分享数据，这是一个良性循环，是一个健康的生态。\n\n网站是互联网的基石，它让用户获取信息，也让用户分享信息，所以现在的互联网才能丰富多彩。\n\n## 3\\. 网站服务器（Server）\n\n我们都知道网站放在服务器上，服务器其实就是一台计算机，它和我们平时使用的笔记本、台式机并没有什么区别，都由主板、CPU、内存、风扇等部件构成。不过，服务器一般是不带显示器、键盘、音响等外设的（当然它也支持这些外设），因为服务器的唯一用途就是运行网站，没有其它作用，所以用家庭台式机的主机箱来类比服务器更加恰当。\n\n服务器一般放在专业的机房中，这些机房温度恒定、网络畅通、有备用电源、有容灾备份，能够保证服务器 7×24 小时不间断运行。\n\n另外，为了让服务器能够放入机柜中，避免占用太多空间，服务器一般看起来很薄，是扁平的，这就是人们常说的“刀片”。\n\n![刀片式服务器](http://c.biancheng.net/uploads/allimg/200317/1-20031GK1152b.jpg)  \n图 4：刀片式服务器\n\n![服务器机柜](http://c.biancheng.net/uploads/allimg/200317/1-20031GK145228.jpg)  \n图 5：服务器机柜\n\n## 4\\. 总结\n\n**网站可以认为是放在服务器上的一个文件夹，它包含了很多网页文件以及很多子文件夹**。用户访问网站就是读取文件的内容，用户分享数据就是修改文件的内容，或者删除现有的文件，或者创建一个新的文件。\n","source":"_posts/1.1-网站到底是什么？.md","raw":"---\ntitle: 1.1 网站到底是什么？\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:47 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategories:\n  - research\n---\n\n网站 **是由一个一个网页构成的**，**要想理解网站是什么，首先要理解网页是什么。**\n\n## 1\\. 什么是网页？\n\n百度网页的主城：\n\n前端：\n\nHTML\n\nCSS\n\nJavsScript\n\n后端：\n\n数据库 (Oracle, Mysql, Greenplum(postgresql)\n\n服务器（Pythonflask , java tomcat , apache , nojs pm2, go go server)\n\n通讯协议：\n\n前后端如何通讯：通过协议（http,https, tcp, udp,socket)\n\n![Excalidraw/1.1 网站到底是什么？ 2022-06-21 09.27.20.excalidraw](/images/5f05cfdffce3a0c09cd852a09dddb4415b663c68.png)\n\n**网页其实就是放在服务器上的一个文件**. 当我们浏览网页时，这个文件会被下载到我们本地的电脑，然后再由浏览器解析，渲染出各种漂亮的界面，比如表格、图片、标题、列表等。\n\n网页文件的后缀有很多种，比如 `.html`、`.php`、`.jsp`、`.asp` 等，相信读者在浏览器的地址栏里也都见到过，如下图所示：\n\n![在浏览器地址栏中查看 URL](http://c.biancheng.net/uploads/allimg/200317/1-20031GF551201.gif)  \n图 1：在浏览器地址栏中查看 URL\n\n**但不管网页的后缀是什么，它的本质都是一样的，就是由 HTML 代码构成的纯文本文件**。\n\n我们可以使用记事本、Notepad++、Sublime Text、Vim 等文本编辑器打开网页文件，看到它的所有内容，就像下面这样：\n\n```\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>这是网页标题</title>\n</head>\n<body>\n    <p>这是一段文本</p>\n    <a href=\"http://c.biancheng.net/\">这个一个超链接</a>\n    <ul>\n        <li>条目1</li>\n        <li>条目2</li>\n        <li>条目3</li>\n    </ul>\n</body>\n</html>\n```\n\n这就是 HTML 代码！我们可以看到很多由 `<>` 包围的特殊标记，**这叫做 HTML 标签（Tag）**，浏览器通过识别这些 HTML 标签来渲染出各种界面和效果。\n\n**每种 HTML 标签都有不同的含义，适用于不同的场景，能展示出不同的效果**，例如：\n\n- \\<html> 标签用来包围当前网页的所有 HTML 代码，可以把它看做一个外壳。\n- \\<head> 标签表示网页的头部，用来设置一些网页的参数，在浏览器中是看不到的：\n\t- \\<meta charset=\"UTF-8\"> 用来指明当前网页的编码格式是 UTF-8；\n\t- \\<title> 用来设置当前网页的标题，相当于文件的名字，它会显示在浏览器的标题栏。\n- \\<body> 标签表示网页的正文内容，也就是需要在浏览器主界面中显示的内容：\n\t- \\<p> 标签用来表示一个段落，能容纳一段文本；\n\t- \\<a> 标签用来表示一个超链接，用鼠标点击后可以跳转到其它网页；\n\t- \\<ul> 标签用来表示一个列表，其中的每个 \\<li> 都是子标签，用来表示一个列表项。\n\n将上面的代码保存到 index.html，拖到浏览器中运行，可以看到如下的效果：\n\n![一个简单的网页](http://c.biancheng.net/uploads/allimg/200317/1-20031G34H6447.png)  \n图 2：一个简单的网页\n\n这是一个非常简陋的网页，仅作为例子来演示，真实网页的 HTML 代码远比这复杂，你可以在网页上单击鼠标右键，然后在弹出菜单中选择“查看网页源代码”，就可以查看当前网页的 HTML 代码。\n\n## 2\\. 什么是网站？\n\n一个网站由很多网页组成，可以将多个网页放在一个文件夹中，这个文件夹还可以嵌套其它子文件夹，最终形成一个树状结构，如下图所示：\n\n![一个简单的网站结构](http://c.biancheng.net/uploads/allimg/200317/1-20031G44142Y3.gif)  \n图 3：一个简单的网站结构\n\n如果我们给顶级目录 program 绑定一个域名 www.domain.com，那么用户就可以通过 www.domain.com 来访问 program 文件夹中的所有文件（包括子文件夹），例如：\n\n- www.domain.com/demo.html\n- www.domain.com/python/\n- www.domain.com/java/spring.html\n- www.domain.com/java/maven/profile.html\n\n可以认为，网站就是一个绑定了域名的文件夹，该文件夹中可以包含子文件夹以及各种各样的文件，这些文件都可以通过域名来访问。当我们在地址栏中输入一个 URL 时，它其实已经展示了服务器上的目录结构，例如 [http://c.biancheng.net/linux/ln.html](http://c.biancheng.net/linux/ln.html)，就表示访问 linux 目录下的 ln.html 文件。\n\n当然，你也可以不绑定域名，只要在服务器上设置某个文件夹提供 Web 服务，用户也可以通过 IP 地址来访问。\n\n互联网上的所有服务器都是通过 IP 地址来定位的，域名只是 IP 地址的一种助记符，帮助用户记住网站的链接以及品牌。使用域名访问网站时，浏览器会先找到域名对应的 IP 地址，然后再通过 IP 地址请求服务器上的文件；这个过程叫做域名解析，是通过 DNS 服务器来完成的。\n\n网站的作用是把计算机上的数据（文章、博客、图片、视频等）分享出去，让别人也能获取到有用的信息；同时，别人也能发布自己的数据（发布文章、留言、上传视频等），让网站的内容更加丰富。网站和用户之间是一个相互促进的关系，网站用户越多，积累的数据也就越多，然后就会吸引更多用户继续分享数据，这是一个良性循环，是一个健康的生态。\n\n网站是互联网的基石，它让用户获取信息，也让用户分享信息，所以现在的互联网才能丰富多彩。\n\n## 3\\. 网站服务器（Server）\n\n我们都知道网站放在服务器上，服务器其实就是一台计算机，它和我们平时使用的笔记本、台式机并没有什么区别，都由主板、CPU、内存、风扇等部件构成。不过，服务器一般是不带显示器、键盘、音响等外设的（当然它也支持这些外设），因为服务器的唯一用途就是运行网站，没有其它作用，所以用家庭台式机的主机箱来类比服务器更加恰当。\n\n服务器一般放在专业的机房中，这些机房温度恒定、网络畅通、有备用电源、有容灾备份，能够保证服务器 7×24 小时不间断运行。\n\n另外，为了让服务器能够放入机柜中，避免占用太多空间，服务器一般看起来很薄，是扁平的，这就是人们常说的“刀片”。\n\n![刀片式服务器](http://c.biancheng.net/uploads/allimg/200317/1-20031GK1152b.jpg)  \n图 4：刀片式服务器\n\n![服务器机柜](http://c.biancheng.net/uploads/allimg/200317/1-20031GK145228.jpg)  \n图 5：服务器机柜\n\n## 4\\. 总结\n\n**网站可以认为是放在服务器上的一个文件夹，它包含了很多网页文件以及很多子文件夹**。用户访问网站就是读取文件的内容，用户分享数据就是修改文件的内容，或者删除现有的文件，或者创建一个新的文件。\n","slug":"1.1-网站到底是什么？","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709l000s4cv9el430w7p","content":"<p>网站 <strong>是由一个一个网页构成的</strong>，<strong>要想理解网站是什么，首先要理解网页是什么。</strong></p>\n<h2 id=\"1-什么是网页？\">1. 什么是网页？</h2>\n<p>百度网页的主城：</p>\n<p>前端：</p>\n<p>HTML</p>\n<p>CSS</p>\n<p>JavsScript</p>\n<p>后端：</p>\n<p>数据库 (Oracle, Mysql, Greenplum(postgresql)</p>\n<p>服务器（Pythonflask , java tomcat , apache , nojs pm2, go go server)</p>\n<p>通讯协议：</p>\n<p>前后端如何通讯：通过协议（http,https, tcp, udp,socket)</p>\n<p><img src=\"/images/5f05cfdffce3a0c09cd852a09dddb4415b663c68.png\" alt=\"Excalidraw/1.1 网站到底是什么？ 2022-06-21 09.27.20.excalidraw\"></p>\n<p><strong>网页其实就是放在服务器上的一个文件</strong>. 当我们浏览网页时，这个文件会被下载到我们本地的电脑，然后再由浏览器解析，渲染出各种漂亮的界面，比如表格、图片、标题、列表等。</p>\n<p>网页文件的后缀有很多种，比如 <code>.html</code>、<code>.php</code>、<code>.jsp</code>、<code>.asp</code> 等，相信读者在浏览器的地址栏里也都见到过，如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031GF551201.gif\" alt=\"在浏览器地址栏中查看 URL\"><br>\n图 1：在浏览器地址栏中查看 URL</p>\n<p><strong>但不管网页的后缀是什么，它的本质都是一样的，就是由 HTML 代码构成的纯文本文件</strong>。</p>\n<p>我们可以使用记事本、Notepad++、Sublime Text、Vim 等文本编辑器打开网页文件，看到它的所有内容，就像下面这样：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;这是网页标题&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p&gt;这是一段文本&lt;/p&gt;</span><br><span class=\"line\">    &lt;a href=&quot;http://c.biancheng.net/&quot;&gt;这个一个超链接&lt;/a&gt;</span><br><span class=\"line\">    &lt;ul&gt;</span><br><span class=\"line\">        &lt;li&gt;条目1&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;条目2&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;条目3&lt;/li&gt;</span><br><span class=\"line\">    &lt;/ul&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>这就是 HTML 代码！我们可以看到很多由 <code>&lt;&gt;</code> 包围的特殊标记，<strong>这叫做 HTML 标签（Tag）</strong>，浏览器通过识别这些 HTML 标签来渲染出各种界面和效果。</p>\n<p><strong>每种 HTML 标签都有不同的含义，适用于不同的场景，能展示出不同的效果</strong>，例如：</p>\n<ul>\n<li>&lt;html&gt; 标签用来包围当前网页的所有 HTML 代码，可以把它看做一个外壳。</li>\n<li>&lt;head&gt; 标签表示网页的头部，用来设置一些网页的参数，在浏览器中是看不到的：\n<ul>\n<li>&lt;meta charset=“UTF-8”&gt; 用来指明当前网页的编码格式是 UTF-8；</li>\n<li>&lt;title&gt; 用来设置当前网页的标题，相当于文件的名字，它会显示在浏览器的标题栏。</li>\n</ul>\n</li>\n<li>&lt;body&gt; 标签表示网页的正文内容，也就是需要在浏览器主界面中显示的内容：\n<ul>\n<li>&lt;p&gt; 标签用来表示一个段落，能容纳一段文本；</li>\n<li>&lt;a&gt; 标签用来表示一个超链接，用鼠标点击后可以跳转到其它网页；</li>\n<li>&lt;ul&gt; 标签用来表示一个列表，其中的每个 &lt;li&gt; 都是子标签，用来表示一个列表项。</li>\n</ul>\n</li>\n</ul>\n<p>将上面的代码保存到 index.html，拖到浏览器中运行，可以看到如下的效果：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031G34H6447.png\" alt=\"一个简单的网页\"><br>\n图 2：一个简单的网页</p>\n<p>这是一个非常简陋的网页，仅作为例子来演示，真实网页的 HTML 代码远比这复杂，你可以在网页上单击鼠标右键，然后在弹出菜单中选择“查看网页源代码”，就可以查看当前网页的 HTML 代码。</p>\n<h2 id=\"2-什么是网站？\">2. 什么是网站？</h2>\n<p>一个网站由很多网页组成，可以将多个网页放在一个文件夹中，这个文件夹还可以嵌套其它子文件夹，最终形成一个树状结构，如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031G44142Y3.gif\" alt=\"一个简单的网站结构\"><br>\n图 3：一个简单的网站结构</p>\n<p>如果我们给顶级目录 program 绑定一个域名 <a href=\"http://www.domain.com\">www.domain.com</a>，那么用户就可以通过 <a href=\"http://www.domain.com\">www.domain.com</a> 来访问 program 文件夹中的所有文件（包括子文件夹），例如：</p>\n<ul>\n<li><a href=\"http://www.domain.com/demo.html\">www.domain.com/demo.html</a></li>\n<li><a href=\"http://www.domain.com/python/\">www.domain.com/python/</a></li>\n<li><a href=\"http://www.domain.com/java/spring.html\">www.domain.com/java/spring.html</a></li>\n<li><a href=\"http://www.domain.com/java/maven/profile.html\">www.domain.com/java/maven/profile.html</a></li>\n</ul>\n<p>可以认为，网站就是一个绑定了域名的文件夹，该文件夹中可以包含子文件夹以及各种各样的文件，这些文件都可以通过域名来访问。当我们在地址栏中输入一个 URL 时，它其实已经展示了服务器上的目录结构，例如 <a href=\"http://c.biancheng.net/linux/ln.html\">http://c.biancheng.net/linux/ln.html</a>，就表示访问 linux 目录下的 ln.html 文件。</p>\n<p>当然，你也可以不绑定域名，只要在服务器上设置某个文件夹提供 Web 服务，用户也可以通过 IP 地址来访问。</p>\n<p>互联网上的所有服务器都是通过 IP 地址来定位的，域名只是 IP 地址的一种助记符，帮助用户记住网站的链接以及品牌。使用域名访问网站时，浏览器会先找到域名对应的 IP 地址，然后再通过 IP 地址请求服务器上的文件；这个过程叫做域名解析，是通过 DNS 服务器来完成的。</p>\n<p>网站的作用是把计算机上的数据（文章、博客、图片、视频等）分享出去，让别人也能获取到有用的信息；同时，别人也能发布自己的数据（发布文章、留言、上传视频等），让网站的内容更加丰富。网站和用户之间是一个相互促进的关系，网站用户越多，积累的数据也就越多，然后就会吸引更多用户继续分享数据，这是一个良性循环，是一个健康的生态。</p>\n<p>网站是互联网的基石，它让用户获取信息，也让用户分享信息，所以现在的互联网才能丰富多彩。</p>\n<h2 id=\"3-网站服务器（Server）\">3. 网站服务器（Server）</h2>\n<p>我们都知道网站放在服务器上，服务器其实就是一台计算机，它和我们平时使用的笔记本、台式机并没有什么区别，都由主板、CPU、内存、风扇等部件构成。不过，服务器一般是不带显示器、键盘、音响等外设的（当然它也支持这些外设），因为服务器的唯一用途就是运行网站，没有其它作用，所以用家庭台式机的主机箱来类比服务器更加恰当。</p>\n<p>服务器一般放在专业的机房中，这些机房温度恒定、网络畅通、有备用电源、有容灾备份，能够保证服务器 7×24 小时不间断运行。</p>\n<p>另外，为了让服务器能够放入机柜中，避免占用太多空间，服务器一般看起来很薄，是扁平的，这就是人们常说的“刀片”。</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031GK1152b.jpg\" alt=\"刀片式服务器\"><br>\n图 4：刀片式服务器</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031GK145228.jpg\" alt=\"服务器机柜\"><br>\n图 5：服务器机柜</p>\n<h2 id=\"4-总结\">4. 总结</h2>\n<p><strong>网站可以认为是放在服务器上的一个文件夹，它包含了很多网页文件以及很多子文件夹</strong>。用户访问网站就是读取文件的内容，用户分享数据就是修改文件的内容，或者删除现有的文件，或者创建一个新的文件。</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<p>网站 <strong>是由一个一个网页构成的</strong>，<strong>要想理解网站是什么，首先要理解网页是什么。</strong></p>\n<h2 id=\"1-什么是网页？\">1. 什么是网页？</h2>\n<p>百度网页的主城：</p>\n<p>前端：</p>\n<p>HTML</p>\n<p>CSS</p>\n<p>JavsScript</p>\n<p>后端：</p>\n<p>数据库 (Oracle, Mysql, Greenplum(postgresql)</p>\n<p>服务器（Pythonflask , java tomcat , apache , nojs pm2, go go server)</p>\n<p>通讯协议：</p>\n<p>前后端如何通讯：通过协议（http,https, tcp, udp,socket)</p>\n<p><img src=\"/images/5f05cfdffce3a0c09cd852a09dddb4415b663c68.png\" alt=\"Excalidraw/1.1 网站到底是什么？ 2022-06-21 09.27.20.excalidraw\"></p>\n<p><strong>网页其实就是放在服务器上的一个文件</strong>. 当我们浏览网页时，这个文件会被下载到我们本地的电脑，然后再由浏览器解析，渲染出各种漂亮的界面，比如表格、图片、标题、列表等。</p>\n<p>网页文件的后缀有很多种，比如 <code>.html</code>、<code>.php</code>、<code>.jsp</code>、<code>.asp</code> 等，相信读者在浏览器的地址栏里也都见到过，如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031GF551201.gif\" alt=\"在浏览器地址栏中查看 URL\"><br>\n图 1：在浏览器地址栏中查看 URL</p>\n<p><strong>但不管网页的后缀是什么，它的本质都是一样的，就是由 HTML 代码构成的纯文本文件</strong>。</p>\n<p>我们可以使用记事本、Notepad++、Sublime Text、Vim 等文本编辑器打开网页文件，看到它的所有内容，就像下面这样：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;这是网页标题&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p&gt;这是一段文本&lt;/p&gt;</span><br><span class=\"line\">    &lt;a href=&quot;http://c.biancheng.net/&quot;&gt;这个一个超链接&lt;/a&gt;</span><br><span class=\"line\">    &lt;ul&gt;</span><br><span class=\"line\">        &lt;li&gt;条目1&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;条目2&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;条目3&lt;/li&gt;</span><br><span class=\"line\">    &lt;/ul&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>这就是 HTML 代码！我们可以看到很多由 <code>&lt;&gt;</code> 包围的特殊标记，<strong>这叫做 HTML 标签（Tag）</strong>，浏览器通过识别这些 HTML 标签来渲染出各种界面和效果。</p>\n<p><strong>每种 HTML 标签都有不同的含义，适用于不同的场景，能展示出不同的效果</strong>，例如：</p>\n<ul>\n<li>&lt;html&gt; 标签用来包围当前网页的所有 HTML 代码，可以把它看做一个外壳。</li>\n<li>&lt;head&gt; 标签表示网页的头部，用来设置一些网页的参数，在浏览器中是看不到的：\n<ul>\n<li>&lt;meta charset=“UTF-8”&gt; 用来指明当前网页的编码格式是 UTF-8；</li>\n<li>&lt;title&gt; 用来设置当前网页的标题，相当于文件的名字，它会显示在浏览器的标题栏。</li>\n</ul>\n</li>\n<li>&lt;body&gt; 标签表示网页的正文内容，也就是需要在浏览器主界面中显示的内容：\n<ul>\n<li>&lt;p&gt; 标签用来表示一个段落，能容纳一段文本；</li>\n<li>&lt;a&gt; 标签用来表示一个超链接，用鼠标点击后可以跳转到其它网页；</li>\n<li>&lt;ul&gt; 标签用来表示一个列表，其中的每个 &lt;li&gt; 都是子标签，用来表示一个列表项。</li>\n</ul>\n</li>\n</ul>\n<p>将上面的代码保存到 index.html，拖到浏览器中运行，可以看到如下的效果：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031G34H6447.png\" alt=\"一个简单的网页\"><br>\n图 2：一个简单的网页</p>\n<p>这是一个非常简陋的网页，仅作为例子来演示，真实网页的 HTML 代码远比这复杂，你可以在网页上单击鼠标右键，然后在弹出菜单中选择“查看网页源代码”，就可以查看当前网页的 HTML 代码。</p>\n<h2 id=\"2-什么是网站？\">2. 什么是网站？</h2>\n<p>一个网站由很多网页组成，可以将多个网页放在一个文件夹中，这个文件夹还可以嵌套其它子文件夹，最终形成一个树状结构，如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031G44142Y3.gif\" alt=\"一个简单的网站结构\"><br>\n图 3：一个简单的网站结构</p>\n<p>如果我们给顶级目录 program 绑定一个域名 <a href=\"http://www.domain.com\">www.domain.com</a>，那么用户就可以通过 <a href=\"http://www.domain.com\">www.domain.com</a> 来访问 program 文件夹中的所有文件（包括子文件夹），例如：</p>\n<ul>\n<li><a href=\"http://www.domain.com/demo.html\">www.domain.com/demo.html</a></li>\n<li><a href=\"http://www.domain.com/python/\">www.domain.com/python/</a></li>\n<li><a href=\"http://www.domain.com/java/spring.html\">www.domain.com/java/spring.html</a></li>\n<li><a href=\"http://www.domain.com/java/maven/profile.html\">www.domain.com/java/maven/profile.html</a></li>\n</ul>\n<p>可以认为，网站就是一个绑定了域名的文件夹，该文件夹中可以包含子文件夹以及各种各样的文件，这些文件都可以通过域名来访问。当我们在地址栏中输入一个 URL 时，它其实已经展示了服务器上的目录结构，例如 <a href=\"http://c.biancheng.net/linux/ln.html\">http://c.biancheng.net/linux/ln.html</a>，就表示访问 linux 目录下的 ln.html 文件。</p>\n<p>当然，你也可以不绑定域名，只要在服务器上设置某个文件夹提供 Web 服务，用户也可以通过 IP 地址来访问。</p>\n<p>互联网上的所有服务器都是通过 IP 地址来定位的，域名只是 IP 地址的一种助记符，帮助用户记住网站的链接以及品牌。使用域名访问网站时，浏览器会先找到域名对应的 IP 地址，然后再通过 IP 地址请求服务器上的文件；这个过程叫做域名解析，是通过 DNS 服务器来完成的。</p>\n<p>网站的作用是把计算机上的数据（文章、博客、图片、视频等）分享出去，让别人也能获取到有用的信息；同时，别人也能发布自己的数据（发布文章、留言、上传视频等），让网站的内容更加丰富。网站和用户之间是一个相互促进的关系，网站用户越多，积累的数据也就越多，然后就会吸引更多用户继续分享数据，这是一个良性循环，是一个健康的生态。</p>\n<p>网站是互联网的基石，它让用户获取信息，也让用户分享信息，所以现在的互联网才能丰富多彩。</p>\n<h2 id=\"3-网站服务器（Server）\">3. 网站服务器（Server）</h2>\n<p>我们都知道网站放在服务器上，服务器其实就是一台计算机，它和我们平时使用的笔记本、台式机并没有什么区别，都由主板、CPU、内存、风扇等部件构成。不过，服务器一般是不带显示器、键盘、音响等外设的（当然它也支持这些外设），因为服务器的唯一用途就是运行网站，没有其它作用，所以用家庭台式机的主机箱来类比服务器更加恰当。</p>\n<p>服务器一般放在专业的机房中，这些机房温度恒定、网络畅通、有备用电源、有容灾备份，能够保证服务器 7×24 小时不间断运行。</p>\n<p>另外，为了让服务器能够放入机柜中，避免占用太多空间，服务器一般看起来很薄，是扁平的，这就是人们常说的“刀片”。</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031GK1152b.jpg\" alt=\"刀片式服务器\"><br>\n图 4：刀片式服务器</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/200317/1-20031GK145228.jpg\" alt=\"服务器机柜\"><br>\n图 5：服务器机柜</p>\n<h2 id=\"4-总结\">4. 总结</h2>\n<p><strong>网站可以认为是放在服务器上的一个文件夹，它包含了很多网页文件以及很多子文件夹</strong>。用户访问网站就是读取文件的内容，用户分享数据就是修改文件的内容，或者删除现有的文件，或者创建一个新的文件。</p>\n"},{"title":"1.2 HTML是什么？","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:47.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["1.2 HTML是什么？"],"_content":"\nHTML 英文全称是 Hyper Text Markup Language，中文译为“超文本标记语言”，**专门用来设计和编辑网页**。\n\n使用 HTML 编写的文件称为“HTML 文档”，一般后缀为 `.html`（也可以使用 `.htm`，不过比较少见）。\n\n**HTML 文档是一种纯文本文件**，您可以使用 Windows 记事本、Linux Vim、Notepad++、Sublime Text、VS Code 等文本编辑来打开或者创建。\n\n**每个网页都是一个 HTML 文档，使用浏览器访问一个链接（URL），实际上就是下载、解析和显示 HTML 文档的过程** (**浏览器演示**）。将众多 HTML 文档放在一个文件夹中，然后提供对外访问权限，就构成了一个网站。\n\n**HTML 中的不同标签具有不同的含义，学习 HTML 其实就是学习各个标签的含义。**\n\n## HTML 到底是什么？\n\n首先，HTML 不是编程语言，没有逻辑处理能力，没有计算能力，不能动态地生成内容，而只能静态地展示网页信息。\n\n我们从 HTML 中文全称来分析一下它的本质：\n\n#### 1) 超文本\n\n也即 **超越纯文本**，这意味着 HTML 文档不仅能包含文本（文字），还能包含图片、音视频、表格、列表、链接、按钮、输入框等高级内容。\n\n超链接是互联网的纽带，它能将众多网页连接起来，让它们交织在一起，形成一张“网”。没有超链接，就没有互联网。\n\n#### 2) 标记语言\n\nHTML 是一种计算机语言，但它不能编程，只能 **用来标记网页中的内容**。HTML 通过不同的标签来标记不同的内容、格式、布局等，例如：\n\n- \\<img\\>标签表示一张图片；\n- \\<a> 标签表示一个链接；\n- \\<table> 标签表示一个表格；\n- \\<input> 标签表示一个输入框；\n- \\<p> 标签表示一段文本；\n- \\<strong> 标签表示文本加粗效果；\n- \\<div> 标签表示块级布局。\n\n本文最后给出的示例中演示了 HTML 标签的用法，您也可以转到《HTML 标签与元素》学习 HTML 标签的具体语法格式。\n\n#### 总结\n\nHTML 是一种用来开发网页的计算机语言，它通过标签（标记式指令）将文本、音视频、图片、表格、按钮、输入框等内容显示出来。**也就是说，HTML 是用来给网页内容进行排版和布局的。**\n\n## HTML 版本\n\n自 HTML 诞生以来，经过不断的发展，市面上出现了许多 HTML 版本，有关 HTML 版本的简要介绍如下所示：\n\n| HTML 版本 | 版本说明 |\n| --- | --- |\n| HTML 1.0 | HTML 的第一个版本，发布于 1991 年。|\n| HTML 2.0 | HTML 的第二个版本，发布于 1995 年，该版本中增加了表单元素以及文件上传等功能。|\n| HTML 3.2 | HTML 的第三个版本由 W3C 于 1997 年初发布，该版本增加了创建表格以及表单的功能。|\n| HTML 4.01 | HTML 4.01 于 1999 年 12 月发布，该版本增加了对样式表（CSS）的支持。HTML 4.01 是一个非常稳定的版本，是当前的官方标准。|\n| HTML 5 | HTML5 的初稿于 2008 年 1 月发布，是公认的下一代 Web 语言，极大地提升了 Web 在富媒体、富内容和富应用等方面的能力，被喻为终将改变移动互联网的重要推手。|\n\nHTML 4 和 HTML 5（简称 H5）是两个最重要版本，HTML 4 适应了 PC 互联网时代，HTML 5 适应了移动互联网时代。\n\nHTML 5 在 HTML 4 的基础上增加了很多语义化的标签，功能更加强大，除了较低版本的 IE 浏览器，几乎所有其它浏览器都能很好地支持 HTML 5。如果您的用户很少使用 IE 浏览器，那么请放心地使用 HTML 5。\n\n## HTML 标签\n\n如上所述，**HTML 是一种标记语言**，使用各种标签来格式化内容，标签的特点如下所示：\n\n- HTML 标签由尖括号包围的关键词构成，比如\\<html>；\n- 除了少数标签外，大多数 HTML 标签都是成对出现的，比如\\ <b> 和 \\</b>；\n- 成对出现的标签中，第一个标签称为开始标签，第二个标签称为结束标签（闭合标签）。\n\n**HTML 中的不同标签具有不同的含义，学习 HTML 其实就是学习各个标签的含义。**\n\n## HTML 文档结构\n\nHTML 页面的基本结构如下所示，其中包含了各种创建网页所需的标签（例如 doctype、html、head、title 和 body 等）。\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>HTML演示</title>\n</head>\n<body>\n    <h1>这是一个标题</h1>\n    <p>这是一个段落</p>\n    <p>这是另一个段落</p>\n    <a href=\"http://c.biancheng.net/\" target=\"_blank\">这是一个链接</a>\n    <ul>\n        <li>HTML教程</li>\n        <li>CSS教程</li>\n        <li>JavaScript教程</li>\n    </ul>\n\n    <input type=\"text\" placeholder=\"请输入内容\" />\n</body>\n</html>\n```\n\n代码实现，来电真东西\n","source":"_posts/1.2-HTML是什么？.md","raw":"---\ntitle: 1.2 HTML是什么？\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:47 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 1.2 HTML是什么？\n---\n\nHTML 英文全称是 Hyper Text Markup Language，中文译为“超文本标记语言”，**专门用来设计和编辑网页**。\n\n使用 HTML 编写的文件称为“HTML 文档”，一般后缀为 `.html`（也可以使用 `.htm`，不过比较少见）。\n\n**HTML 文档是一种纯文本文件**，您可以使用 Windows 记事本、Linux Vim、Notepad++、Sublime Text、VS Code 等文本编辑来打开或者创建。\n\n**每个网页都是一个 HTML 文档，使用浏览器访问一个链接（URL），实际上就是下载、解析和显示 HTML 文档的过程** (**浏览器演示**）。将众多 HTML 文档放在一个文件夹中，然后提供对外访问权限，就构成了一个网站。\n\n**HTML 中的不同标签具有不同的含义，学习 HTML 其实就是学习各个标签的含义。**\n\n## HTML 到底是什么？\n\n首先，HTML 不是编程语言，没有逻辑处理能力，没有计算能力，不能动态地生成内容，而只能静态地展示网页信息。\n\n我们从 HTML 中文全称来分析一下它的本质：\n\n#### 1) 超文本\n\n也即 **超越纯文本**，这意味着 HTML 文档不仅能包含文本（文字），还能包含图片、音视频、表格、列表、链接、按钮、输入框等高级内容。\n\n超链接是互联网的纽带，它能将众多网页连接起来，让它们交织在一起，形成一张“网”。没有超链接，就没有互联网。\n\n#### 2) 标记语言\n\nHTML 是一种计算机语言，但它不能编程，只能 **用来标记网页中的内容**。HTML 通过不同的标签来标记不同的内容、格式、布局等，例如：\n\n- \\<img\\>标签表示一张图片；\n- \\<a> 标签表示一个链接；\n- \\<table> 标签表示一个表格；\n- \\<input> 标签表示一个输入框；\n- \\<p> 标签表示一段文本；\n- \\<strong> 标签表示文本加粗效果；\n- \\<div> 标签表示块级布局。\n\n本文最后给出的示例中演示了 HTML 标签的用法，您也可以转到《HTML 标签与元素》学习 HTML 标签的具体语法格式。\n\n#### 总结\n\nHTML 是一种用来开发网页的计算机语言，它通过标签（标记式指令）将文本、音视频、图片、表格、按钮、输入框等内容显示出来。**也就是说，HTML 是用来给网页内容进行排版和布局的。**\n\n## HTML 版本\n\n自 HTML 诞生以来，经过不断的发展，市面上出现了许多 HTML 版本，有关 HTML 版本的简要介绍如下所示：\n\n| HTML 版本 | 版本说明 |\n| --- | --- |\n| HTML 1.0 | HTML 的第一个版本，发布于 1991 年。|\n| HTML 2.0 | HTML 的第二个版本，发布于 1995 年，该版本中增加了表单元素以及文件上传等功能。|\n| HTML 3.2 | HTML 的第三个版本由 W3C 于 1997 年初发布，该版本增加了创建表格以及表单的功能。|\n| HTML 4.01 | HTML 4.01 于 1999 年 12 月发布，该版本增加了对样式表（CSS）的支持。HTML 4.01 是一个非常稳定的版本，是当前的官方标准。|\n| HTML 5 | HTML5 的初稿于 2008 年 1 月发布，是公认的下一代 Web 语言，极大地提升了 Web 在富媒体、富内容和富应用等方面的能力，被喻为终将改变移动互联网的重要推手。|\n\nHTML 4 和 HTML 5（简称 H5）是两个最重要版本，HTML 4 适应了 PC 互联网时代，HTML 5 适应了移动互联网时代。\n\nHTML 5 在 HTML 4 的基础上增加了很多语义化的标签，功能更加强大，除了较低版本的 IE 浏览器，几乎所有其它浏览器都能很好地支持 HTML 5。如果您的用户很少使用 IE 浏览器，那么请放心地使用 HTML 5。\n\n## HTML 标签\n\n如上所述，**HTML 是一种标记语言**，使用各种标签来格式化内容，标签的特点如下所示：\n\n- HTML 标签由尖括号包围的关键词构成，比如\\<html>；\n- 除了少数标签外，大多数 HTML 标签都是成对出现的，比如\\ <b> 和 \\</b>；\n- 成对出现的标签中，第一个标签称为开始标签，第二个标签称为结束标签（闭合标签）。\n\n**HTML 中的不同标签具有不同的含义，学习 HTML 其实就是学习各个标签的含义。**\n\n## HTML 文档结构\n\nHTML 页面的基本结构如下所示，其中包含了各种创建网页所需的标签（例如 doctype、html、head、title 和 body 等）。\n\n```\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>HTML演示</title>\n</head>\n<body>\n    <h1>这是一个标题</h1>\n    <p>这是一个段落</p>\n    <p>这是另一个段落</p>\n    <a href=\"http://c.biancheng.net/\" target=\"_blank\">这是一个链接</a>\n    <ul>\n        <li>HTML教程</li>\n        <li>CSS教程</li>\n        <li>JavaScript教程</li>\n    </ul>\n\n    <input type=\"text\" placeholder=\"请输入内容\" />\n</body>\n</html>\n```\n\n代码实现，来电真东西\n","slug":"1.2-HTML是什么？","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709m000x4cv91ynj66yi","content":"<p>HTML 英文全称是 Hyper Text Markup Language，中文译为“超文本标记语言”，<strong>专门用来设计和编辑网页</strong>。</p>\n<p>使用 HTML 编写的文件称为“HTML 文档”，一般后缀为 <code>.html</code>（也可以使用 <code>.htm</code>，不过比较少见）。</p>\n<p><strong>HTML 文档是一种纯文本文件</strong>，您可以使用 Windows 记事本、Linux Vim、Notepad++、Sublime Text、VS Code 等文本编辑来打开或者创建。</p>\n<p><strong>每个网页都是一个 HTML 文档，使用浏览器访问一个链接（URL），实际上就是下载、解析和显示 HTML 文档的过程</strong> (<strong>浏览器演示</strong>）。将众多 HTML 文档放在一个文件夹中，然后提供对外访问权限，就构成了一个网站。</p>\n<p><strong>HTML 中的不同标签具有不同的含义，学习 HTML 其实就是学习各个标签的含义。</strong></p>\n<h2 id=\"HTML-到底是什么？\">HTML 到底是什么？</h2>\n<p>首先，HTML 不是编程语言，没有逻辑处理能力，没有计算能力，不能动态地生成内容，而只能静态地展示网页信息。</p>\n<p>我们从 HTML 中文全称来分析一下它的本质：</p>\n<h4 id=\"1-超文本\">1) 超文本</h4>\n<p>也即 <strong>超越纯文本</strong>，这意味着 HTML 文档不仅能包含文本（文字），还能包含图片、音视频、表格、列表、链接、按钮、输入框等高级内容。</p>\n<p>超链接是互联网的纽带，它能将众多网页连接起来，让它们交织在一起，形成一张“网”。没有超链接，就没有互联网。</p>\n<h4 id=\"2-标记语言\">2) 标记语言</h4>\n<p>HTML 是一种计算机语言，但它不能编程，只能 <strong>用来标记网页中的内容</strong>。HTML 通过不同的标签来标记不同的内容、格式、布局等，例如：</p>\n<ul>\n<li>&lt;img&gt;标签表示一张图片；</li>\n<li>&lt;a&gt; 标签表示一个链接；</li>\n<li>&lt;table&gt; 标签表示一个表格；</li>\n<li>&lt;input&gt; 标签表示一个输入框；</li>\n<li>&lt;p&gt; 标签表示一段文本；</li>\n<li>&lt;strong&gt; 标签表示文本加粗效果；</li>\n<li>&lt;div&gt; 标签表示块级布局。</li>\n</ul>\n<p>本文最后给出的示例中演示了 HTML 标签的用法，您也可以转到《HTML 标签与元素》学习 HTML 标签的具体语法格式。</p>\n<h4 id=\"总结\">总结</h4>\n<p>HTML 是一种用来开发网页的计算机语言，它通过标签（标记式指令）将文本、音视频、图片、表格、按钮、输入框等内容显示出来。<strong>也就是说，HTML 是用来给网页内容进行排版和布局的。</strong></p>\n<h2 id=\"HTML-版本\">HTML 版本</h2>\n<p>自 HTML 诞生以来，经过不断的发展，市面上出现了许多 HTML 版本，有关 HTML 版本的简要介绍如下所示：</p>\n<table>\n<thead>\n<tr>\n<th>HTML 版本</th>\n<th>版本说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>HTML 1.0</td>\n<td>HTML 的第一个版本，发布于 1991 年。</td>\n</tr>\n<tr>\n<td>HTML 2.0</td>\n<td>HTML 的第二个版本，发布于 1995 年，该版本中增加了表单元素以及文件上传等功能。</td>\n</tr>\n<tr>\n<td>HTML 3.2</td>\n<td>HTML 的第三个版本由 W3C 于 1997 年初发布，该版本增加了创建表格以及表单的功能。</td>\n</tr>\n<tr>\n<td>HTML 4.01</td>\n<td>HTML 4.01 于 1999 年 12 月发布，该版本增加了对样式表（CSS）的支持。HTML 4.01 是一个非常稳定的版本，是当前的官方标准。</td>\n</tr>\n<tr>\n<td>HTML 5</td>\n<td>HTML5 的初稿于 2008 年 1 月发布，是公认的下一代 Web 语言，极大地提升了 Web 在富媒体、富内容和富应用等方面的能力，被喻为终将改变移动互联网的重要推手。</td>\n</tr>\n</tbody>\n</table>\n<p>HTML 4 和 HTML 5（简称 H5）是两个最重要版本，HTML 4 适应了 PC 互联网时代，HTML 5 适应了移动互联网时代。</p>\n<p>HTML 5 在 HTML 4 的基础上增加了很多语义化的标签，功能更加强大，除了较低版本的 IE 浏览器，几乎所有其它浏览器都能很好地支持 HTML 5。如果您的用户很少使用 IE 浏览器，那么请放心地使用 HTML 5。</p>\n<h2 id=\"HTML-标签\">HTML 标签</h2>\n<p>如上所述，<strong>HTML 是一种标记语言</strong>，使用各种标签来格式化内容，标签的特点如下所示：</p>\n<ul>\n<li>HTML 标签由尖括号包围的关键词构成，比如&lt;html&gt;；</li>\n<li>除了少数标签外，大多数 HTML 标签都是成对出现的，比如\\ <b> 和 &lt;/b&gt;；</li>\n<li>成对出现的标签中，第一个标签称为开始标签，第二个标签称为结束标签（闭合标签）。</li>\n</ul>\n<p><strong>HTML 中的不同标签具有不同的含义，学习 HTML 其实就是学习各个标签的含义。</strong></p>\n<h2 id=\"HTML-文档结构\">HTML 文档结构</h2>\n<p>HTML 页面的基本结构如下所示，其中包含了各种创建网页所需的标签（例如 doctype、html、head、title 和 body 等）。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;HTML演示&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;这是一个标题&lt;/h1&gt;</span><br><span class=\"line\">    &lt;p&gt;这是一个段落&lt;/p&gt;</span><br><span class=\"line\">    &lt;p&gt;这是另一个段落&lt;/p&gt;</span><br><span class=\"line\">    &lt;a href=&quot;http://c.biancheng.net/&quot; target=&quot;_blank&quot;&gt;这是一个链接&lt;/a&gt;</span><br><span class=\"line\">    &lt;ul&gt;</span><br><span class=\"line\">        &lt;li&gt;HTML教程&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;CSS教程&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;JavaScript教程&lt;/li&gt;</span><br><span class=\"line\">    &lt;/ul&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;input type=&quot;text&quot; placeholder=&quot;请输入内容&quot; /&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>代码实现，来电真东西</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover5.JPG","excerpt":"","more":"<p>HTML 英文全称是 Hyper Text Markup Language，中文译为“超文本标记语言”，<strong>专门用来设计和编辑网页</strong>。</p>\n<p>使用 HTML 编写的文件称为“HTML 文档”，一般后缀为 <code>.html</code>（也可以使用 <code>.htm</code>，不过比较少见）。</p>\n<p><strong>HTML 文档是一种纯文本文件</strong>，您可以使用 Windows 记事本、Linux Vim、Notepad++、Sublime Text、VS Code 等文本编辑来打开或者创建。</p>\n<p><strong>每个网页都是一个 HTML 文档，使用浏览器访问一个链接（URL），实际上就是下载、解析和显示 HTML 文档的过程</strong> (<strong>浏览器演示</strong>）。将众多 HTML 文档放在一个文件夹中，然后提供对外访问权限，就构成了一个网站。</p>\n<p><strong>HTML 中的不同标签具有不同的含义，学习 HTML 其实就是学习各个标签的含义。</strong></p>\n<h2 id=\"HTML-到底是什么？\">HTML 到底是什么？</h2>\n<p>首先，HTML 不是编程语言，没有逻辑处理能力，没有计算能力，不能动态地生成内容，而只能静态地展示网页信息。</p>\n<p>我们从 HTML 中文全称来分析一下它的本质：</p>\n<h4 id=\"1-超文本\">1) 超文本</h4>\n<p>也即 <strong>超越纯文本</strong>，这意味着 HTML 文档不仅能包含文本（文字），还能包含图片、音视频、表格、列表、链接、按钮、输入框等高级内容。</p>\n<p>超链接是互联网的纽带，它能将众多网页连接起来，让它们交织在一起，形成一张“网”。没有超链接，就没有互联网。</p>\n<h4 id=\"2-标记语言\">2) 标记语言</h4>\n<p>HTML 是一种计算机语言，但它不能编程，只能 <strong>用来标记网页中的内容</strong>。HTML 通过不同的标签来标记不同的内容、格式、布局等，例如：</p>\n<ul>\n<li>&lt;img&gt;标签表示一张图片；</li>\n<li>&lt;a&gt; 标签表示一个链接；</li>\n<li>&lt;table&gt; 标签表示一个表格；</li>\n<li>&lt;input&gt; 标签表示一个输入框；</li>\n<li>&lt;p&gt; 标签表示一段文本；</li>\n<li>&lt;strong&gt; 标签表示文本加粗效果；</li>\n<li>&lt;div&gt; 标签表示块级布局。</li>\n</ul>\n<p>本文最后给出的示例中演示了 HTML 标签的用法，您也可以转到《HTML 标签与元素》学习 HTML 标签的具体语法格式。</p>\n<h4 id=\"总结\">总结</h4>\n<p>HTML 是一种用来开发网页的计算机语言，它通过标签（标记式指令）将文本、音视频、图片、表格、按钮、输入框等内容显示出来。<strong>也就是说，HTML 是用来给网页内容进行排版和布局的。</strong></p>\n<h2 id=\"HTML-版本\">HTML 版本</h2>\n<p>自 HTML 诞生以来，经过不断的发展，市面上出现了许多 HTML 版本，有关 HTML 版本的简要介绍如下所示：</p>\n<table>\n<thead>\n<tr>\n<th>HTML 版本</th>\n<th>版本说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>HTML 1.0</td>\n<td>HTML 的第一个版本，发布于 1991 年。</td>\n</tr>\n<tr>\n<td>HTML 2.0</td>\n<td>HTML 的第二个版本，发布于 1995 年，该版本中增加了表单元素以及文件上传等功能。</td>\n</tr>\n<tr>\n<td>HTML 3.2</td>\n<td>HTML 的第三个版本由 W3C 于 1997 年初发布，该版本增加了创建表格以及表单的功能。</td>\n</tr>\n<tr>\n<td>HTML 4.01</td>\n<td>HTML 4.01 于 1999 年 12 月发布，该版本增加了对样式表（CSS）的支持。HTML 4.01 是一个非常稳定的版本，是当前的官方标准。</td>\n</tr>\n<tr>\n<td>HTML 5</td>\n<td>HTML5 的初稿于 2008 年 1 月发布，是公认的下一代 Web 语言，极大地提升了 Web 在富媒体、富内容和富应用等方面的能力，被喻为终将改变移动互联网的重要推手。</td>\n</tr>\n</tbody>\n</table>\n<p>HTML 4 和 HTML 5（简称 H5）是两个最重要版本，HTML 4 适应了 PC 互联网时代，HTML 5 适应了移动互联网时代。</p>\n<p>HTML 5 在 HTML 4 的基础上增加了很多语义化的标签，功能更加强大，除了较低版本的 IE 浏览器，几乎所有其它浏览器都能很好地支持 HTML 5。如果您的用户很少使用 IE 浏览器，那么请放心地使用 HTML 5。</p>\n<h2 id=\"HTML-标签\">HTML 标签</h2>\n<p>如上所述，<strong>HTML 是一种标记语言</strong>，使用各种标签来格式化内容，标签的特点如下所示：</p>\n<ul>\n<li>HTML 标签由尖括号包围的关键词构成，比如&lt;html&gt;；</li>\n<li>除了少数标签外，大多数 HTML 标签都是成对出现的，比如\\ <b> 和 &lt;/b&gt;；</li>\n<li>成对出现的标签中，第一个标签称为开始标签，第二个标签称为结束标签（闭合标签）。</li>\n</ul>\n<p><strong>HTML 中的不同标签具有不同的含义，学习 HTML 其实就是学习各个标签的含义。</strong></p>\n<h2 id=\"HTML-文档结构\">HTML 文档结构</h2>\n<p>HTML 页面的基本结构如下所示，其中包含了各种创建网页所需的标签（例如 doctype、html、head、title 和 body 等）。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;HTML演示&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;这是一个标题&lt;/h1&gt;</span><br><span class=\"line\">    &lt;p&gt;这是一个段落&lt;/p&gt;</span><br><span class=\"line\">    &lt;p&gt;这是另一个段落&lt;/p&gt;</span><br><span class=\"line\">    &lt;a href=&quot;http://c.biancheng.net/&quot; target=&quot;_blank&quot;&gt;这是一个链接&lt;/a&gt;</span><br><span class=\"line\">    &lt;ul&gt;</span><br><span class=\"line\">        &lt;li&gt;HTML教程&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;CSS教程&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;JavaScript教程&lt;/li&gt;</span><br><span class=\"line\">    &lt;/ul&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;input type=&quot;text&quot; placeholder=&quot;请输入内容&quot; /&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>代码实现，来电真东西</p>\n"},{"title":"1.2 解析内容并保存数据库","share":true,"date":"2022-06-27T15:46:57.000Z","updated":"2022-12-18T00:07:47.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["1.2 解析内容并保存数据库"],"_content":"\n## 目标\n\n将获取到的互联网上的内容解析，保存到数据库\n\n---\n\n### 知识点\n\n- HTML\n- css\n- Beautiful Soup\n- xpath（了解）\n- python 操作数据库\n\t- mysql-connector\n\t- 数据库的连接/关闭\n\t- 增、删、改、查\n\n---\n\n## Html\n\n一种用于定义内容结构的标记语言\n\n---\n\n### Html 样例\n\n```python\n<!DOCTYPE html> # 文档声明\n<html>          # 标记为文档的 \n  <head>        # metadata 区域\n    <meta charset=\"utf-8\">\n    <title>测试页面</title>\n  </head>\n  <body>        # 数据区域\n    <img src=\"images/firefox-icon.png\" alt=\"测试图片\">\n  </body>\n</html> \n```\n\n https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/HTML_basics\n---\n\n### HTML 与课程的关系\n\n我们研究（操作）的对象\n\n---\n\n## Beautiful Soup\n\nBeautiful Soup 是一个可以从 HTML 或 XML 文件中提取数据的 Python 库. 它能够通过你喜欢的转换器实现惯用的文档导航,查找, 修改文档的方式.Beautiful Soup 会帮你节省数小时甚至数天的工作时间.  \nhttps://www.crummy.com/software/BeautifulSoup/bs4/doc/\n\n---\n\n### Beautiful Soup 与课程的关系\n\n操作 HTML 的库（工具）\n\n---\n\n### 基本操作\n\n```python\n# 解析文档\nfrom bs4 import BeautifulSoup\nsoup = BeautifulSoup(html_doc, 'html.parser') \n```\n\n```python\n# 获取文档标题\nsoup.title\n```\n\n```python\n# 获取文档标题内容\nsoup.title.name\n```\n\n```python\n# 获取所有 url 链接\nfor link in soup.find_all('a'):\n    print(link.get('href'))\n# http://example.com/elsie\n# http://example.com/lacie\n```\n\n---\n\n## Css\n\nCSS 是一种描述 HTML 文档样式的语言。\n\n```python\nbody {\n  background-color: lightblue;\n}\n\nh1 {\n  color: white;\n  text-align: center;\n}\n\np {\n  font-family: verdana;\n  font-size: 20px;\n} \n```\n\n---\n\n### Css 与课程的关系\n\n- css 是用于选择 html 节点的一种工具\n\n---\n\n### 例子\n\n```python\n# 查找 class 为 sister 的 a 标签\nsoup.find_all(\"a\", class_=\"sister\") \n```\n\n---\n\n### 如何获取 Class?\n\ndevtools\n\n---\n\n## Xpath\n\nXML Path Language，用于 XML 文档中查找和定位信息。\n\n```python\n# 选取 bookstore 元素的所有子节点\nxml.xpath(“bookstore”)\n# 选取根元素 bookstore。\nxml.xpath(“/bookstore”)\n# 选取属于 bookstore 的子元素的所有 book 元素。\nxml.xpath(“bookstore/book”)\n# 选取所有 book 子元素，而不管它们在文档中的位置。\nxml.xpath(“//book”)\n# 选择属于 bookstore 元素的后代的所有 book 元素，\n# 而不管它们位于 bookstore 之下的什么位置。\nxml.xpath(“bookstore//book”)\n# 选取名为 lang 的所有属性。 \nxml.xpath(“//@lang”)\n```\n\n---\n\n### 基本规则\n\n![static/attachment/Pasted image 20220619195957.png](static/attachment/Pasted%20image%2020220619195957.png)\n\n---\n\n### 基本使用\n\n```python\nfrom lxml import etree \ntree = etree.parse('./test.html')\ntree.xpath('/html/head') \n```\n\n---\n\n## database(以 mysql 为例）\n\n```python\n# 依赖安装\npython -m pip install mysql-connector \n```\n\n---\n\n### 连接与关闭数据库\n\n```python\n# 连接数据库\nimport mysql.connector\nmysql_config={\n    \"host\" : \"114.55.41.175\",\n    \"user\" : \"root\",\n    \"passwd\" : \"qwerasdf1234\",\n    \"port\" : 9201,\n    \"database\" : \"opt\"\n} \ncnx = mysql.connector.connect(**mysql_config)\n\n# 关闭数据库\ncnx.close()\n```\n\n https://dev.mysql.com/doc/connector-python/en/connector-python-example-connecting.html\n\n---\n\n### 增、删、改、查\n\n```python\n# 执行语句（ 增、删、改、查）\ncursor.execute(\"select * from mytable\")\n\n# 获取执行结果\nvalues = cursor.fetchall()\n```\n\n---\n\n## 各模块之间的关系\n\nHTML/BS/XPATH/CSS/MySql 的关系？\n\n---\n\n## 实战\n\n将百度首页中的所有 URL，并将其存储到数据库中  \n<a href='{% post_path 操作手册.pdf %}'>操作手册.pdf</a>\n\n---\n\n## 作业\n\n各组选取不同的网站，将其中的内容存储到数据库中，要求：\n\n- 各组所选网站不能相同\n- 需提交 word 报告和演示视频（视频中包含代码运行结果）\n\n## 相关链接\n\nHTML: http://c.biancheng.net/html/  \nCSS: http://c.biancheng.net/css/\n","source":"_posts/1.2-解析内容并保存数据库.md","raw":"---\ntitle: 1.2 解析内容并保存数据库\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 23:46:57 \nupdated: 2022-12-18 08:07:47 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 1.2 解析内容并保存数据库\n---\n\n## 目标\n\n将获取到的互联网上的内容解析，保存到数据库\n\n---\n\n### 知识点\n\n- HTML\n- css\n- Beautiful Soup\n- xpath（了解）\n- python 操作数据库\n\t- mysql-connector\n\t- 数据库的连接/关闭\n\t- 增、删、改、查\n\n---\n\n## Html\n\n一种用于定义内容结构的标记语言\n\n---\n\n### Html 样例\n\n```python\n<!DOCTYPE html> # 文档声明\n<html>          # 标记为文档的 \n  <head>        # metadata 区域\n    <meta charset=\"utf-8\">\n    <title>测试页面</title>\n  </head>\n  <body>        # 数据区域\n    <img src=\"images/firefox-icon.png\" alt=\"测试图片\">\n  </body>\n</html> \n```\n\n https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/HTML_basics\n---\n\n### HTML 与课程的关系\n\n我们研究（操作）的对象\n\n---\n\n## Beautiful Soup\n\nBeautiful Soup 是一个可以从 HTML 或 XML 文件中提取数据的 Python 库. 它能够通过你喜欢的转换器实现惯用的文档导航,查找, 修改文档的方式.Beautiful Soup 会帮你节省数小时甚至数天的工作时间.  \nhttps://www.crummy.com/software/BeautifulSoup/bs4/doc/\n\n---\n\n### Beautiful Soup 与课程的关系\n\n操作 HTML 的库（工具）\n\n---\n\n### 基本操作\n\n```python\n# 解析文档\nfrom bs4 import BeautifulSoup\nsoup = BeautifulSoup(html_doc, 'html.parser') \n```\n\n```python\n# 获取文档标题\nsoup.title\n```\n\n```python\n# 获取文档标题内容\nsoup.title.name\n```\n\n```python\n# 获取所有 url 链接\nfor link in soup.find_all('a'):\n    print(link.get('href'))\n# http://example.com/elsie\n# http://example.com/lacie\n```\n\n---\n\n## Css\n\nCSS 是一种描述 HTML 文档样式的语言。\n\n```python\nbody {\n  background-color: lightblue;\n}\n\nh1 {\n  color: white;\n  text-align: center;\n}\n\np {\n  font-family: verdana;\n  font-size: 20px;\n} \n```\n\n---\n\n### Css 与课程的关系\n\n- css 是用于选择 html 节点的一种工具\n\n---\n\n### 例子\n\n```python\n# 查找 class 为 sister 的 a 标签\nsoup.find_all(\"a\", class_=\"sister\") \n```\n\n---\n\n### 如何获取 Class?\n\ndevtools\n\n---\n\n## Xpath\n\nXML Path Language，用于 XML 文档中查找和定位信息。\n\n```python\n# 选取 bookstore 元素的所有子节点\nxml.xpath(“bookstore”)\n# 选取根元素 bookstore。\nxml.xpath(“/bookstore”)\n# 选取属于 bookstore 的子元素的所有 book 元素。\nxml.xpath(“bookstore/book”)\n# 选取所有 book 子元素，而不管它们在文档中的位置。\nxml.xpath(“//book”)\n# 选择属于 bookstore 元素的后代的所有 book 元素，\n# 而不管它们位于 bookstore 之下的什么位置。\nxml.xpath(“bookstore//book”)\n# 选取名为 lang 的所有属性。 \nxml.xpath(“//@lang”)\n```\n\n---\n\n### 基本规则\n\n![static/attachment/Pasted image 20220619195957.png](static/attachment/Pasted%20image%2020220619195957.png)\n\n---\n\n### 基本使用\n\n```python\nfrom lxml import etree \ntree = etree.parse('./test.html')\ntree.xpath('/html/head') \n```\n\n---\n\n## database(以 mysql 为例）\n\n```python\n# 依赖安装\npython -m pip install mysql-connector \n```\n\n---\n\n### 连接与关闭数据库\n\n```python\n# 连接数据库\nimport mysql.connector\nmysql_config={\n    \"host\" : \"114.55.41.175\",\n    \"user\" : \"root\",\n    \"passwd\" : \"qwerasdf1234\",\n    \"port\" : 9201,\n    \"database\" : \"opt\"\n} \ncnx = mysql.connector.connect(**mysql_config)\n\n# 关闭数据库\ncnx.close()\n```\n\n https://dev.mysql.com/doc/connector-python/en/connector-python-example-connecting.html\n\n---\n\n### 增、删、改、查\n\n```python\n# 执行语句（ 增、删、改、查）\ncursor.execute(\"select * from mytable\")\n\n# 获取执行结果\nvalues = cursor.fetchall()\n```\n\n---\n\n## 各模块之间的关系\n\nHTML/BS/XPATH/CSS/MySql 的关系？\n\n---\n\n## 实战\n\n将百度首页中的所有 URL，并将其存储到数据库中  \n<a href='{% post_path 操作手册.pdf %}'>操作手册.pdf</a>\n\n---\n\n## 作业\n\n各组选取不同的网站，将其中的内容存储到数据库中，要求：\n\n- 各组所选网站不能相同\n- 需提交 word 报告和演示视频（视频中包含代码运行结果）\n\n## 相关链接\n\nHTML: http://c.biancheng.net/html/  \nCSS: http://c.biancheng.net/css/\n","slug":"1.2-解析内容并保存数据库","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709n00104cv9fp298tiy","content":"<h2 id=\"目标\">目标</h2>\n<p>将获取到的互联网上的内容解析，保存到数据库</p>\n<hr>\n<h3 id=\"知识点\">知识点</h3>\n<ul>\n<li>HTML</li>\n<li>css</li>\n<li>Beautiful Soup</li>\n<li>xpath（了解）</li>\n<li>python 操作数据库\n<ul>\n<li>mysql-connector</li>\n<li>数据库的连接/关闭</li>\n<li>增、删、改、查</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"Html\">Html</h2>\n<p>一种用于定义内容结构的标记语言</p>\n<hr>\n<h3 id=\"Html-样例\">Html 样例</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt; <span class=\"comment\"># 文档声明</span></span><br><span class=\"line\">&lt;html&gt;          <span class=\"comment\"># 标记为文档的 </span></span><br><span class=\"line\">  &lt;head&gt;        <span class=\"comment\"># metadata 区域</span></span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">&quot;utf-8&quot;</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;测试页面&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;        <span class=\"comment\"># 数据区域</span></span><br><span class=\"line\">    &lt;img src=<span class=\"string\">&quot;images/firefox-icon.png&quot;</span> alt=<span class=\"string\">&quot;测试图片&quot;</span>&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt; </span><br></pre></td></tr></table></figure>\n<h2 id=\"https-developer-mozilla-org-zh-CN-docs-Learn-Getting-started-with-the-web-HTML-basics\"><a href=\"https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/HTML_basics\">https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/HTML_basics</a></h2>\n<h3 id=\"HTML-与课程的关系\">HTML 与课程的关系</h3>\n<p>我们研究（操作）的对象</p>\n<hr>\n<h2 id=\"Beautiful-Soup\">Beautiful Soup</h2>\n<p>Beautiful Soup 是一个可以从 HTML 或 XML 文件中提取数据的 Python 库. 它能够通过你喜欢的转换器实现惯用的文档导航,查找, 修改文档的方式.Beautiful Soup 会帮你节省数小时甚至数天的工作时间.<br>\n<a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a></p>\n<hr>\n<h3 id=\"Beautiful-Soup-与课程的关系\">Beautiful Soup 与课程的关系</h3>\n<p>操作 HTML 的库（工具）</p>\n<hr>\n<h3 id=\"基本操作\">基本操作</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 解析文档</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\">soup = BeautifulSoup(html_doc, <span class=\"string\">&#x27;html.parser&#x27;</span>) </span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 获取文档标题</span></span><br><span class=\"line\">soup.title</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 获取文档标题内容</span></span><br><span class=\"line\">soup.title.name</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 获取所有 url 链接</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> link <span class=\"keyword\">in</span> soup.find_all(<span class=\"string\">&#x27;a&#x27;</span>):</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(link.get(<span class=\"string\">&#x27;href&#x27;</span>))</span><br><span class=\"line\"><span class=\"comment\"># http://example.com/elsie</span></span><br><span class=\"line\"><span class=\"comment\"># http://example.com/lacie</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Css\">Css</h2>\n<p>CSS 是一种描述 HTML 文档样式的语言。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">body &#123;</span><br><span class=\"line\">  background-color: lightblue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">h1 &#123;</span><br><span class=\"line\">  color: white;</span><br><span class=\"line\">  text-align: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">p &#123;</span><br><span class=\"line\">  font-family: verdana;</span><br><span class=\"line\">  font-size: 20px;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Css-与课程的关系\">Css 与课程的关系</h3>\n<ul>\n<li>css 是用于选择 html 节点的一种工具</li>\n</ul>\n<hr>\n<h3 id=\"例子\">例子</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查找 class 为 sister 的 a 标签</span></span><br><span class=\"line\">soup.find_all(<span class=\"string\">&quot;a&quot;</span>, class_=<span class=\"string\">&quot;sister&quot;</span>) </span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"如何获取-Class\">如何获取 Class?</h3>\n<p>devtools</p>\n<hr>\n<h2 id=\"Xpath\">Xpath</h2>\n<p>XML Path Language，用于 XML 文档中查找和定位信息。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 选取 bookstore 元素的所有子节点</span></span><br><span class=\"line\">xml.xpath(“bookstore”)</span><br><span class=\"line\"><span class=\"comment\"># 选取根元素 bookstore。</span></span><br><span class=\"line\">xml.xpath(“/bookstore”)</span><br><span class=\"line\"><span class=\"comment\"># 选取属于 bookstore 的子元素的所有 book 元素。</span></span><br><span class=\"line\">xml.xpath(“bookstore/book”)</span><br><span class=\"line\"><span class=\"comment\"># 选取所有 book 子元素，而不管它们在文档中的位置。</span></span><br><span class=\"line\">xml.xpath(“//book”)</span><br><span class=\"line\"><span class=\"comment\"># 选择属于 bookstore 元素的后代的所有 book 元素，</span></span><br><span class=\"line\"><span class=\"comment\"># 而不管它们位于 bookstore 之下的什么位置。</span></span><br><span class=\"line\">xml.xpath(“bookstore//book”)</span><br><span class=\"line\"><span class=\"comment\"># 选取名为 lang 的所有属性。 </span></span><br><span class=\"line\">xml.xpath(“//@lang”)</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"基本规则\">基本规则</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220619195957.png\" alt=\"static/attachment/Pasted image 20220619195957.png\"></p>\n<hr>\n<h3 id=\"基本使用\">基本使用</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> lxml <span class=\"keyword\">import</span> etree </span><br><span class=\"line\">tree = etree.parse(<span class=\"string\">&#x27;./test.html&#x27;</span>)</span><br><span class=\"line\">tree.xpath(<span class=\"string\">&#x27;/html/head&#x27;</span>) </span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"database-以-mysql-为例）\">database(以 mysql 为例）</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 依赖安装</span></span><br><span class=\"line\">python -m pip install mysql-connector </span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"连接与关闭数据库\">连接与关闭数据库</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 连接数据库</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> mysql.connector</span><br><span class=\"line\">mysql_config=&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;host&quot;</span> : <span class=\"string\">&quot;114.55.41.175&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;user&quot;</span> : <span class=\"string\">&quot;root&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;passwd&quot;</span> : <span class=\"string\">&quot;qwerasdf1234&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;port&quot;</span> : <span class=\"number\">9201</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;database&quot;</span> : <span class=\"string\">&quot;opt&quot;</span></span><br><span class=\"line\">&#125; </span><br><span class=\"line\">cnx = mysql.connector.connect(**mysql_config)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 关闭数据库</span></span><br><span class=\"line\">cnx.close()</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://dev.mysql.com/doc/connector-python/en/connector-python-example-connecting.html\">https://dev.mysql.com/doc/connector-python/en/connector-python-example-connecting.html</a></p>\n<hr>\n<h3 id=\"增、删、改、查\">增、删、改、查</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 执行语句（ 增、删、改、查）</span></span><br><span class=\"line\">cursor.execute(<span class=\"string\">&quot;select * from mytable&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 获取执行结果</span></span><br><span class=\"line\">values = cursor.fetchall()</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"各模块之间的关系\">各模块之间的关系</h2>\n<p>HTML/BS/XPATH/CSS/MySql 的关系？</p>\n<hr>\n<h2 id=\"实战\">实战</h2>\n<p>将百度首页中的所有 URL，并将其存储到数据库中<br>\n<a href=''>操作手册.pdf</a></p>\n<hr>\n<h2 id=\"作业\">作业</h2>\n<p>各组选取不同的网站，将其中的内容存储到数据库中，要求：</p>\n<ul>\n<li>各组所选网站不能相同</li>\n<li>需提交 word 报告和演示视频（视频中包含代码运行结果）</li>\n</ul>\n<h2 id=\"相关链接\">相关链接</h2>\n<p>HTML: <a href=\"http://c.biancheng.net/html/\">http://c.biancheng.net/html/</a><br>\nCSS: <a href=\"http://c.biancheng.net/css/\">http://c.biancheng.net/css/</a></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover5.JPG","excerpt":"","more":"<h2 id=\"目标\">目标</h2>\n<p>将获取到的互联网上的内容解析，保存到数据库</p>\n<hr>\n<h3 id=\"知识点\">知识点</h3>\n<ul>\n<li>HTML</li>\n<li>css</li>\n<li>Beautiful Soup</li>\n<li>xpath（了解）</li>\n<li>python 操作数据库\n<ul>\n<li>mysql-connector</li>\n<li>数据库的连接/关闭</li>\n<li>增、删、改、查</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"Html\">Html</h2>\n<p>一种用于定义内容结构的标记语言</p>\n<hr>\n<h3 id=\"Html-样例\">Html 样例</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt; <span class=\"comment\"># 文档声明</span></span><br><span class=\"line\">&lt;html&gt;          <span class=\"comment\"># 标记为文档的 </span></span><br><span class=\"line\">  &lt;head&gt;        <span class=\"comment\"># metadata 区域</span></span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">&quot;utf-8&quot;</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;测试页面&lt;/title&gt;</span><br><span class=\"line\">  &lt;/head&gt;</span><br><span class=\"line\">  &lt;body&gt;        <span class=\"comment\"># 数据区域</span></span><br><span class=\"line\">    &lt;img src=<span class=\"string\">&quot;images/firefox-icon.png&quot;</span> alt=<span class=\"string\">&quot;测试图片&quot;</span>&gt;</span><br><span class=\"line\">  &lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt; </span><br></pre></td></tr></table></figure>\n<h2 id=\"https-developer-mozilla-org-zh-CN-docs-Learn-Getting-started-with-the-web-HTML-basics\"><a href=\"https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/HTML_basics\">https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/HTML_basics</a></h2>\n<h3 id=\"HTML-与课程的关系\">HTML 与课程的关系</h3>\n<p>我们研究（操作）的对象</p>\n<hr>\n<h2 id=\"Beautiful-Soup\">Beautiful Soup</h2>\n<p>Beautiful Soup 是一个可以从 HTML 或 XML 文件中提取数据的 Python 库. 它能够通过你喜欢的转换器实现惯用的文档导航,查找, 修改文档的方式.Beautiful Soup 会帮你节省数小时甚至数天的工作时间.<br>\n<a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a></p>\n<hr>\n<h3 id=\"Beautiful-Soup-与课程的关系\">Beautiful Soup 与课程的关系</h3>\n<p>操作 HTML 的库（工具）</p>\n<hr>\n<h3 id=\"基本操作\">基本操作</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 解析文档</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> bs4 <span class=\"keyword\">import</span> BeautifulSoup</span><br><span class=\"line\">soup = BeautifulSoup(html_doc, <span class=\"string\">&#x27;html.parser&#x27;</span>) </span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 获取文档标题</span></span><br><span class=\"line\">soup.title</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 获取文档标题内容</span></span><br><span class=\"line\">soup.title.name</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 获取所有 url 链接</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> link <span class=\"keyword\">in</span> soup.find_all(<span class=\"string\">&#x27;a&#x27;</span>):</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(link.get(<span class=\"string\">&#x27;href&#x27;</span>))</span><br><span class=\"line\"><span class=\"comment\"># http://example.com/elsie</span></span><br><span class=\"line\"><span class=\"comment\"># http://example.com/lacie</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Css\">Css</h2>\n<p>CSS 是一种描述 HTML 文档样式的语言。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">body &#123;</span><br><span class=\"line\">  background-color: lightblue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">h1 &#123;</span><br><span class=\"line\">  color: white;</span><br><span class=\"line\">  text-align: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">p &#123;</span><br><span class=\"line\">  font-family: verdana;</span><br><span class=\"line\">  font-size: 20px;</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Css-与课程的关系\">Css 与课程的关系</h3>\n<ul>\n<li>css 是用于选择 html 节点的一种工具</li>\n</ul>\n<hr>\n<h3 id=\"例子\">例子</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 查找 class 为 sister 的 a 标签</span></span><br><span class=\"line\">soup.find_all(<span class=\"string\">&quot;a&quot;</span>, class_=<span class=\"string\">&quot;sister&quot;</span>) </span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"如何获取-Class\">如何获取 Class?</h3>\n<p>devtools</p>\n<hr>\n<h2 id=\"Xpath\">Xpath</h2>\n<p>XML Path Language，用于 XML 文档中查找和定位信息。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 选取 bookstore 元素的所有子节点</span></span><br><span class=\"line\">xml.xpath(“bookstore”)</span><br><span class=\"line\"><span class=\"comment\"># 选取根元素 bookstore。</span></span><br><span class=\"line\">xml.xpath(“/bookstore”)</span><br><span class=\"line\"><span class=\"comment\"># 选取属于 bookstore 的子元素的所有 book 元素。</span></span><br><span class=\"line\">xml.xpath(“bookstore/book”)</span><br><span class=\"line\"><span class=\"comment\"># 选取所有 book 子元素，而不管它们在文档中的位置。</span></span><br><span class=\"line\">xml.xpath(“//book”)</span><br><span class=\"line\"><span class=\"comment\"># 选择属于 bookstore 元素的后代的所有 book 元素，</span></span><br><span class=\"line\"><span class=\"comment\"># 而不管它们位于 bookstore 之下的什么位置。</span></span><br><span class=\"line\">xml.xpath(“bookstore//book”)</span><br><span class=\"line\"><span class=\"comment\"># 选取名为 lang 的所有属性。 </span></span><br><span class=\"line\">xml.xpath(“//@lang”)</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"基本规则\">基本规则</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220619195957.png\" alt=\"static/attachment/Pasted image 20220619195957.png\"></p>\n<hr>\n<h3 id=\"基本使用\">基本使用</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> lxml <span class=\"keyword\">import</span> etree </span><br><span class=\"line\">tree = etree.parse(<span class=\"string\">&#x27;./test.html&#x27;</span>)</span><br><span class=\"line\">tree.xpath(<span class=\"string\">&#x27;/html/head&#x27;</span>) </span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"database-以-mysql-为例）\">database(以 mysql 为例）</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 依赖安装</span></span><br><span class=\"line\">python -m pip install mysql-connector </span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"连接与关闭数据库\">连接与关闭数据库</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 连接数据库</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> mysql.connector</span><br><span class=\"line\">mysql_config=&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;host&quot;</span> : <span class=\"string\">&quot;114.55.41.175&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;user&quot;</span> : <span class=\"string\">&quot;root&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;passwd&quot;</span> : <span class=\"string\">&quot;qwerasdf1234&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;port&quot;</span> : <span class=\"number\">9201</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;database&quot;</span> : <span class=\"string\">&quot;opt&quot;</span></span><br><span class=\"line\">&#125; </span><br><span class=\"line\">cnx = mysql.connector.connect(**mysql_config)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 关闭数据库</span></span><br><span class=\"line\">cnx.close()</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://dev.mysql.com/doc/connector-python/en/connector-python-example-connecting.html\">https://dev.mysql.com/doc/connector-python/en/connector-python-example-connecting.html</a></p>\n<hr>\n<h3 id=\"增、删、改、查\">增、删、改、查</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 执行语句（ 增、删、改、查）</span></span><br><span class=\"line\">cursor.execute(<span class=\"string\">&quot;select * from mytable&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 获取执行结果</span></span><br><span class=\"line\">values = cursor.fetchall()</span><br></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"各模块之间的关系\">各模块之间的关系</h2>\n<p>HTML/BS/XPATH/CSS/MySql 的关系？</p>\n<hr>\n<h2 id=\"实战\">实战</h2>\n<p>将百度首页中的所有 URL，并将其存储到数据库中<br>\n<a href=''>操作手册.pdf</a></p>\n<hr>\n<h2 id=\"作业\">作业</h2>\n<p>各组选取不同的网站，将其中的内容存储到数据库中，要求：</p>\n<ul>\n<li>各组所选网站不能相同</li>\n<li>需提交 word 报告和演示视频（视频中包含代码运行结果）</li>\n</ul>\n<h2 id=\"相关链接\">相关链接</h2>\n<p>HTML: <a href=\"http://c.biancheng.net/html/\">http://c.biancheng.net/html/</a><br>\nCSS: <a href=\"http://c.biancheng.net/css/\">http://c.biancheng.net/css/</a></p>\n"},{"title":"1.1 获取互联网上的内容","share":true,"date":"2022-06-27T15:51:20.000Z","updated":"2022-12-18T00:07:47.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["1.1 获取互联网上的内容"],"_content":"\n## 课程目标\n\n利用 **Urllib** 库、**requests 库获取互联网上的内容**\n\n从互联网的各站点页面中获取想要的数据\n\n---\n\n### 知识点\n\n- urllib 库\n- url 的构成\n- requests 库\n- 工具函数的封装\n- requests 库的安装\n\n---\n\n## urllib？\n\n---\n\n### Urllib is\n\na package that collects several modules for working with URLs:  \n![static/attachment/Pasted image 20220619160722.png](static/attachment/Pasted%20image%2020220619160722.png)  \nhttps://docs.python.org/3.9/library/urllib.html\n\n---\n\nURL?\n\n---\n\n### URL is\n\nUniform Resource Locator (URL)\n\n---\n\nURL 与 urllib 的关系？\n\n---\n\nurllib 是用来操作 URL 的一个 package\n\n---\n\n### The Componets of URL\n\n- scheme\n- netloc\n- path\n- parameters\n- fragment  \n\nscheme://netloc/path;parameters?query#fragment\n\n---\n\n### A Set of Examples for Scheme\n\nfile, ftp, gopher, hdl, http, https, imap, mailto, mms, news, nntp, prospero, rsync, rtsp, rtspu, sftp, shttp, sip, sips, snews, svn, svn+ssh, telnet, wais, ws, wss.\n\n### A Example of Netloc\n\ndocs.python.org:80\n\n---\n\na real example of URL  \nhttp://docs.python.org:80/3/library/urllib.parse.html?highlight=params#url-parsing\n\n---\n\n### urllib.parse\n\nA submodule of urllib that focus on splitting a URL string into its components\n\n---\n\n```python\nfrom urllib.parse import urlparse\no = urlparse(\"http://docs.python.org:80/3/library/urllib.parse.html?\"\n             \"highlight=params#url-parsing\")\no\n\no.scheme\no.netloc\no.hostname\no.port\no._replace(fragment=\"\").geturl() \n```\n\n---\n\nThe attributes of urllib  \n![static/attachment/Pasted image 20220619162811.png](static/attachment/Pasted%20image%2020220619162811.png)\n\n---\n\n## requests？\n\nRequests is a simple, yet(but) elegant, HTTP library  \nhttps://pypi.org/project/requests/\n\n---\n\n### 基本操作\n\n- 打开网页并获取响应内容\n- 获取网页状态码\n- 解析 URL\n- 模块封装\n\t- 输入: URL\n\t- 输出：状态码，网页内容\n\n---\n\n## ✍\n\n- 安装 miniconda 最新版：https://docs.conda.io/en/latest/miniconda.html\n- 安装 pycharm 2021.1.1：https://www.jetbrains.com/pycharm/download/other.html\n- 安装 conda install jupyter\n\n---\n\n## 可能的问题\n\n- request 包不存在\n","source":"_posts/1.1-获取互联网上的内容.md","raw":"---\ntitle: 1.1 获取互联网上的内容\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 23:51:20 \nupdated: 2022-12-18 08:07:47 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 1.1 获取互联网上的内容\n---\n\n## 课程目标\n\n利用 **Urllib** 库、**requests 库获取互联网上的内容**\n\n从互联网的各站点页面中获取想要的数据\n\n---\n\n### 知识点\n\n- urllib 库\n- url 的构成\n- requests 库\n- 工具函数的封装\n- requests 库的安装\n\n---\n\n## urllib？\n\n---\n\n### Urllib is\n\na package that collects several modules for working with URLs:  \n![static/attachment/Pasted image 20220619160722.png](static/attachment/Pasted%20image%2020220619160722.png)  \nhttps://docs.python.org/3.9/library/urllib.html\n\n---\n\nURL?\n\n---\n\n### URL is\n\nUniform Resource Locator (URL)\n\n---\n\nURL 与 urllib 的关系？\n\n---\n\nurllib 是用来操作 URL 的一个 package\n\n---\n\n### The Componets of URL\n\n- scheme\n- netloc\n- path\n- parameters\n- fragment  \n\nscheme://netloc/path;parameters?query#fragment\n\n---\n\n### A Set of Examples for Scheme\n\nfile, ftp, gopher, hdl, http, https, imap, mailto, mms, news, nntp, prospero, rsync, rtsp, rtspu, sftp, shttp, sip, sips, snews, svn, svn+ssh, telnet, wais, ws, wss.\n\n### A Example of Netloc\n\ndocs.python.org:80\n\n---\n\na real example of URL  \nhttp://docs.python.org:80/3/library/urllib.parse.html?highlight=params#url-parsing\n\n---\n\n### urllib.parse\n\nA submodule of urllib that focus on splitting a URL string into its components\n\n---\n\n```python\nfrom urllib.parse import urlparse\no = urlparse(\"http://docs.python.org:80/3/library/urllib.parse.html?\"\n             \"highlight=params#url-parsing\")\no\n\no.scheme\no.netloc\no.hostname\no.port\no._replace(fragment=\"\").geturl() \n```\n\n---\n\nThe attributes of urllib  \n![static/attachment/Pasted image 20220619162811.png](static/attachment/Pasted%20image%2020220619162811.png)\n\n---\n\n## requests？\n\nRequests is a simple, yet(but) elegant, HTTP library  \nhttps://pypi.org/project/requests/\n\n---\n\n### 基本操作\n\n- 打开网页并获取响应内容\n- 获取网页状态码\n- 解析 URL\n- 模块封装\n\t- 输入: URL\n\t- 输出：状态码，网页内容\n\n---\n\n## ✍\n\n- 安装 miniconda 最新版：https://docs.conda.io/en/latest/miniconda.html\n- 安装 pycharm 2021.1.1：https://www.jetbrains.com/pycharm/download/other.html\n- 安装 conda install jupyter\n\n---\n\n## 可能的问题\n\n- request 包不存在\n","slug":"1.1-获取互联网上的内容","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709o00144cv94g5h1tqu","content":"<h2 id=\"课程目标\">课程目标</h2>\n<p>利用 <strong>Urllib</strong> 库、<strong>requests 库获取互联网上的内容</strong></p>\n<p>从互联网的各站点页面中获取想要的数据</p>\n<hr>\n<h3 id=\"知识点\">知识点</h3>\n<ul>\n<li>urllib 库</li>\n<li>url 的构成</li>\n<li>requests 库</li>\n<li>工具函数的封装</li>\n<li>requests 库的安装</li>\n</ul>\n<hr>\n<h2 id=\"urllib？\">urllib？</h2>\n<hr>\n<h3 id=\"Urllib-is\">Urllib is</h3>\n<p>a package that collects several modules for working with URLs:<br>\n<img src=\"static/attachment/Pasted%20image%2020220619160722.png\" alt=\"static/attachment/Pasted image 20220619160722.png\"><br>\n<a href=\"https://docs.python.org/3.9/library/urllib.html\">https://docs.python.org/3.9/library/urllib.html</a></p>\n<hr>\n<p>URL?</p>\n<hr>\n<h3 id=\"URL-is\">URL is</h3>\n<p>Uniform Resource Locator (URL)</p>\n<hr>\n<p>URL 与 urllib 的关系？</p>\n<hr>\n<p>urllib 是用来操作 URL 的一个 package</p>\n<hr>\n<h3 id=\"The-Componets-of-URL\">The Componets of URL</h3>\n<ul>\n<li>scheme</li>\n<li>netloc</li>\n<li>path</li>\n<li>parameters</li>\n<li>fragment</li>\n</ul>\n<p>scheme://netloc/path;parameters?query#fragment</p>\n<hr>\n<h3 id=\"A-Set-of-Examples-for-Scheme\">A Set of Examples for Scheme</h3>\n<p>file, ftp, gopher, hdl, http, https, imap, mailto, mms, news, nntp, prospero, rsync, rtsp, rtspu, sftp, shttp, sip, sips, snews, svn, svn+ssh, telnet, wais, ws, wss.</p>\n<h3 id=\"A-Example-of-Netloc\">A Example of Netloc</h3>\n<p><a href=\"http://docs.python.org:80\">docs.python.org:80</a></p>\n<hr>\n<p>a real example of URL<br>\n<a href=\"http://docs.python.org:80/3/library/urllib.parse.html?highlight=params#url-parsing\">http://docs.python.org:80/3/library/urllib.parse.html?highlight=params#url-parsing</a></p>\n<hr>\n<h3 id=\"urllib-parse\">urllib.parse</h3>\n<p>A submodule of urllib that focus on splitting a URL string into its components</p>\n<hr>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> urllib.parse <span class=\"keyword\">import</span> urlparse</span><br><span class=\"line\">o = urlparse(<span class=\"string\">&quot;http://docs.python.org:80/3/library/urllib.parse.html?&quot;</span></span><br><span class=\"line\">             <span class=\"string\">&quot;highlight=params#url-parsing&quot;</span>)</span><br><span class=\"line\">o</span><br><span class=\"line\"></span><br><span class=\"line\">o.scheme</span><br><span class=\"line\">o.netloc</span><br><span class=\"line\">o.hostname</span><br><span class=\"line\">o.port</span><br><span class=\"line\">o._replace(fragment=<span class=\"string\">&quot;&quot;</span>).geturl() </span><br></pre></td></tr></table></figure>\n<hr>\n<p>The attributes of urllib<br>\n<img src=\"static/attachment/Pasted%20image%2020220619162811.png\" alt=\"static/attachment/Pasted image 20220619162811.png\"></p>\n<hr>\n<h2 id=\"requests？\">requests？</h2>\n<p>Requests is a simple, yet(but) elegant, HTTP library<br>\n<a href=\"https://pypi.org/project/requests/\">https://pypi.org/project/requests/</a></p>\n<hr>\n<h3 id=\"基本操作\">基本操作</h3>\n<ul>\n<li>打开网页并获取响应内容</li>\n<li>获取网页状态码</li>\n<li>解析 URL</li>\n<li>模块封装\n<ul>\n<li>输入: URL</li>\n<li>输出：状态码，网页内容</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"✍\">✍</h2>\n<ul>\n<li>安装 miniconda 最新版：<a href=\"https://docs.conda.io/en/latest/miniconda.html\">https://docs.conda.io/en/latest/miniconda.html</a></li>\n<li>安装 pycharm 2021.1.1：<a href=\"https://www.jetbrains.com/pycharm/download/other.html\">https://www.jetbrains.com/pycharm/download/other.html</a></li>\n<li>安装 conda install jupyter</li>\n</ul>\n<hr>\n<h2 id=\"可能的问题\">可能的问题</h2>\n<ul>\n<li>request 包不存在</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover8.JPG","excerpt":"","more":"<h2 id=\"课程目标\">课程目标</h2>\n<p>利用 <strong>Urllib</strong> 库、<strong>requests 库获取互联网上的内容</strong></p>\n<p>从互联网的各站点页面中获取想要的数据</p>\n<hr>\n<h3 id=\"知识点\">知识点</h3>\n<ul>\n<li>urllib 库</li>\n<li>url 的构成</li>\n<li>requests 库</li>\n<li>工具函数的封装</li>\n<li>requests 库的安装</li>\n</ul>\n<hr>\n<h2 id=\"urllib？\">urllib？</h2>\n<hr>\n<h3 id=\"Urllib-is\">Urllib is</h3>\n<p>a package that collects several modules for working with URLs:<br>\n<img src=\"static/attachment/Pasted%20image%2020220619160722.png\" alt=\"static/attachment/Pasted image 20220619160722.png\"><br>\n<a href=\"https://docs.python.org/3.9/library/urllib.html\">https://docs.python.org/3.9/library/urllib.html</a></p>\n<hr>\n<p>URL?</p>\n<hr>\n<h3 id=\"URL-is\">URL is</h3>\n<p>Uniform Resource Locator (URL)</p>\n<hr>\n<p>URL 与 urllib 的关系？</p>\n<hr>\n<p>urllib 是用来操作 URL 的一个 package</p>\n<hr>\n<h3 id=\"The-Componets-of-URL\">The Componets of URL</h3>\n<ul>\n<li>scheme</li>\n<li>netloc</li>\n<li>path</li>\n<li>parameters</li>\n<li>fragment</li>\n</ul>\n<p>scheme://netloc/path;parameters?query#fragment</p>\n<hr>\n<h3 id=\"A-Set-of-Examples-for-Scheme\">A Set of Examples for Scheme</h3>\n<p>file, ftp, gopher, hdl, http, https, imap, mailto, mms, news, nntp, prospero, rsync, rtsp, rtspu, sftp, shttp, sip, sips, snews, svn, svn+ssh, telnet, wais, ws, wss.</p>\n<h3 id=\"A-Example-of-Netloc\">A Example of Netloc</h3>\n<p><a href=\"http://docs.python.org:80\">docs.python.org:80</a></p>\n<hr>\n<p>a real example of URL<br>\n<a href=\"http://docs.python.org:80/3/library/urllib.parse.html?highlight=params#url-parsing\">http://docs.python.org:80/3/library/urllib.parse.html?highlight=params#url-parsing</a></p>\n<hr>\n<h3 id=\"urllib-parse\">urllib.parse</h3>\n<p>A submodule of urllib that focus on splitting a URL string into its components</p>\n<hr>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> urllib.parse <span class=\"keyword\">import</span> urlparse</span><br><span class=\"line\">o = urlparse(<span class=\"string\">&quot;http://docs.python.org:80/3/library/urllib.parse.html?&quot;</span></span><br><span class=\"line\">             <span class=\"string\">&quot;highlight=params#url-parsing&quot;</span>)</span><br><span class=\"line\">o</span><br><span class=\"line\"></span><br><span class=\"line\">o.scheme</span><br><span class=\"line\">o.netloc</span><br><span class=\"line\">o.hostname</span><br><span class=\"line\">o.port</span><br><span class=\"line\">o._replace(fragment=<span class=\"string\">&quot;&quot;</span>).geturl() </span><br></pre></td></tr></table></figure>\n<hr>\n<p>The attributes of urllib<br>\n<img src=\"static/attachment/Pasted%20image%2020220619162811.png\" alt=\"static/attachment/Pasted image 20220619162811.png\"></p>\n<hr>\n<h2 id=\"requests？\">requests？</h2>\n<p>Requests is a simple, yet(but) elegant, HTTP library<br>\n<a href=\"https://pypi.org/project/requests/\">https://pypi.org/project/requests/</a></p>\n<hr>\n<h3 id=\"基本操作\">基本操作</h3>\n<ul>\n<li>打开网页并获取响应内容</li>\n<li>获取网页状态码</li>\n<li>解析 URL</li>\n<li>模块封装\n<ul>\n<li>输入: URL</li>\n<li>输出：状态码，网页内容</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"✍\">✍</h2>\n<ul>\n<li>安装 miniconda 最新版：<a href=\"https://docs.conda.io/en/latest/miniconda.html\">https://docs.conda.io/en/latest/miniconda.html</a></li>\n<li>安装 pycharm 2021.1.1：<a href=\"https://www.jetbrains.com/pycharm/download/other.html\">https://www.jetbrains.com/pycharm/download/other.html</a></li>\n<li>安装 conda install jupyter</li>\n</ul>\n<hr>\n<h2 id=\"可能的问题\">可能的问题</h2>\n<ul>\n<li>request 包不存在</li>\n</ul>\n"},{"title":"1.3 HTML标签的语法格式","share":true,"date":"2022-06-27T15:49:44.000Z","updated":"2022-12-18T00:07:47.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["1.3 HTML标签的语法格式"],"_content":"\nHTML 中的标签就像关键字一样，每个标签都有自己的语义（含义），例如 `<p>` 标签代表段落，`<b>` 标签代表加粗。根据标签的不同，浏览器会使用不同的方式展示标签中的内容。\n\n在实际开发中，有时我们也将 HTML 标签称为 HTML 元素。\n\n## HTML 标签的语法格式\n\n一般情况下，一个 HTML 标签由 **开始标签、属性、内容和结束标签组成，标签的名称不区分大小写**，但大多数属性的值需要区分大小写，如下所示：\n\n![static/attachment/Pasted image 20220620230805.png](static/attachment/Pasted%20image%2020220620230805.png)  \n除了 class 属性外，开始标签中还可以包含其它属性信息 **比如 id、title 等**，这些我们会在后面进行讲解。\n\n注意，虽然 HTML 标签在语法上不区分大小写，但是为了规范和专业，强烈建议在定义标签时一律采用小写。\n\n当使用浏览器打开我们编写的 HTML 文档时，浏览器会从上到下依次读取文档中的内容，并根据 HTML 标签和属性将标签中的内容呈现在浏览器中。\n\n一个 HTML 文档中必须具有一些基本的标签，以便浏览器区分普通文本和 HTML 文档。您可以根据想要实现的效果使用任意数量的标签，但有以下几点需要注意：\n\n- 所有 HTML 标签都必须放在尖括号 `< >` 内；\n- HTML 中不同的标签可以实现不同的效果；\n- 如果使用了某个标签，则必须使用对应的结束标签来结尾（自闭和标签除外）。\n\n## 自闭和标签\n\n有一些 HTML 标签没有单独的结束标签，而是在开始标签中添加 `/` 来进行闭合，这种标签称为自闭和标签。请看下面的例子：\n\n```\n<img src=\"./logo.png\" alt=\"logo说明\" />  \n<hr />  \n<br />  \n<input type=\"text\" placeholder=\"请输入内容\" />  \n```\n\n自闭和标签不用包围内容，所以不需要单独的结束标签。只有少部分 HTML 标签是自闭和的。\n\n<!--  --> 表示 HTML 注释，用来对 HTML 代码进行说明，浏览器会忽略注释内容，所以用户在网页中看不到注释，我们将会在《HTML 注释》中详细讲解。\n\n## 嵌套 HTML 标签\n\n ```python\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>HTML演示</title>\n</head>\n<body>\n    <h1>这是一个标题</h1>\n    <p>这是一个段落</p>\n    <p>这是另一个段落</p>\n    <a href=\"http://c.biancheng.net/\" target=\"_blank\">这是一个链接</a>\n    <ul>\n        <li>HTML教程</li>\n        <li>CSS教程</li>\n        <li>JavaScript教程</li>\n    </ul>\n\n    <input type=\"text\" placeholder=\"请输入内容\" />\n</body>\n</html> \n```\n","source":"_posts/1.3-HTML标签的语法格式.md","raw":"---\ntitle: 1.3 HTML标签的语法格式\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 23:49:44 \nupdated: 2022-12-18 08:07:47 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 1.3 HTML标签的语法格式\n---\n\nHTML 中的标签就像关键字一样，每个标签都有自己的语义（含义），例如 `<p>` 标签代表段落，`<b>` 标签代表加粗。根据标签的不同，浏览器会使用不同的方式展示标签中的内容。\n\n在实际开发中，有时我们也将 HTML 标签称为 HTML 元素。\n\n## HTML 标签的语法格式\n\n一般情况下，一个 HTML 标签由 **开始标签、属性、内容和结束标签组成，标签的名称不区分大小写**，但大多数属性的值需要区分大小写，如下所示：\n\n![static/attachment/Pasted image 20220620230805.png](static/attachment/Pasted%20image%2020220620230805.png)  \n除了 class 属性外，开始标签中还可以包含其它属性信息 **比如 id、title 等**，这些我们会在后面进行讲解。\n\n注意，虽然 HTML 标签在语法上不区分大小写，但是为了规范和专业，强烈建议在定义标签时一律采用小写。\n\n当使用浏览器打开我们编写的 HTML 文档时，浏览器会从上到下依次读取文档中的内容，并根据 HTML 标签和属性将标签中的内容呈现在浏览器中。\n\n一个 HTML 文档中必须具有一些基本的标签，以便浏览器区分普通文本和 HTML 文档。您可以根据想要实现的效果使用任意数量的标签，但有以下几点需要注意：\n\n- 所有 HTML 标签都必须放在尖括号 `< >` 内；\n- HTML 中不同的标签可以实现不同的效果；\n- 如果使用了某个标签，则必须使用对应的结束标签来结尾（自闭和标签除外）。\n\n## 自闭和标签\n\n有一些 HTML 标签没有单独的结束标签，而是在开始标签中添加 `/` 来进行闭合，这种标签称为自闭和标签。请看下面的例子：\n\n```\n<img src=\"./logo.png\" alt=\"logo说明\" />  \n<hr />  \n<br />  \n<input type=\"text\" placeholder=\"请输入内容\" />  \n```\n\n自闭和标签不用包围内容，所以不需要单独的结束标签。只有少部分 HTML 标签是自闭和的。\n\n<!--  --> 表示 HTML 注释，用来对 HTML 代码进行说明，浏览器会忽略注释内容，所以用户在网页中看不到注释，我们将会在《HTML 注释》中详细讲解。\n\n## 嵌套 HTML 标签\n\n ```python\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>HTML演示</title>\n</head>\n<body>\n    <h1>这是一个标题</h1>\n    <p>这是一个段落</p>\n    <p>这是另一个段落</p>\n    <a href=\"http://c.biancheng.net/\" target=\"_blank\">这是一个链接</a>\n    <ul>\n        <li>HTML教程</li>\n        <li>CSS教程</li>\n        <li>JavaScript教程</li>\n    </ul>\n\n    <input type=\"text\" placeholder=\"请输入内容\" />\n</body>\n</html> \n```\n","slug":"1.3-HTML标签的语法格式","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709o00174cv972ox0qd2","content":"<p>HTML 中的标签就像关键字一样，每个标签都有自己的语义（含义），例如 <code>&lt;p&gt;</code> 标签代表段落，<code>&lt;b&gt;</code> 标签代表加粗。根据标签的不同，浏览器会使用不同的方式展示标签中的内容。</p>\n<p>在实际开发中，有时我们也将 HTML 标签称为 HTML 元素。</p>\n<h2 id=\"HTML-标签的语法格式\">HTML 标签的语法格式</h2>\n<p>一般情况下，一个 HTML 标签由 <strong>开始标签、属性、内容和结束标签组成，标签的名称不区分大小写</strong>，但大多数属性的值需要区分大小写，如下所示：</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220620230805.png\" alt=\"static/attachment/Pasted image 20220620230805.png\"><br>\n除了 class 属性外，开始标签中还可以包含其它属性信息 <strong>比如 id、title 等</strong>，这些我们会在后面进行讲解。</p>\n<p>注意，虽然 HTML 标签在语法上不区分大小写，但是为了规范和专业，强烈建议在定义标签时一律采用小写。</p>\n<p>当使用浏览器打开我们编写的 HTML 文档时，浏览器会从上到下依次读取文档中的内容，并根据 HTML 标签和属性将标签中的内容呈现在浏览器中。</p>\n<p>一个 HTML 文档中必须具有一些基本的标签，以便浏览器区分普通文本和 HTML 文档。您可以根据想要实现的效果使用任意数量的标签，但有以下几点需要注意：</p>\n<ul>\n<li>所有 HTML 标签都必须放在尖括号 <code>&lt; &gt;</code> 内；</li>\n<li>HTML 中不同的标签可以实现不同的效果；</li>\n<li>如果使用了某个标签，则必须使用对应的结束标签来结尾（自闭和标签除外）。</li>\n</ul>\n<h2 id=\"自闭和标签\">自闭和标签</h2>\n<p>有一些 HTML 标签没有单独的结束标签，而是在开始标签中添加 <code>/</code> 来进行闭合，这种标签称为自闭和标签。请看下面的例子：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;img src=&quot;./logo.png&quot; alt=&quot;logo说明&quot; /&gt;  </span><br><span class=\"line\">&lt;hr /&gt;  </span><br><span class=\"line\">&lt;br /&gt;  </span><br><span class=\"line\">&lt;input type=&quot;text&quot; placeholder=&quot;请输入内容&quot; /&gt;  </span><br></pre></td></tr></table></figure>\n<p>自闭和标签不用包围内容，所以不需要单独的结束标签。只有少部分 HTML 标签是自闭和的。</p>\n<!--  --> 表示 HTML 注释，用来对 HTML 代码进行说明，浏览器会忽略注释内容，所以用户在网页中看不到注释，我们将会在《HTML 注释》中详细讲解。\n<h2 id=\"嵌套-HTML-标签\">嵌套 HTML 标签</h2>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">&quot;en&quot;</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;HTML演示&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;这是一个标题&lt;/h1&gt;</span><br><span class=\"line\">    &lt;p&gt;这是一个段落&lt;/p&gt;</span><br><span class=\"line\">    &lt;p&gt;这是另一个段落&lt;/p&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">&quot;http://c.biancheng.net/&quot;</span> target=<span class=\"string\">&quot;_blank&quot;</span>&gt;这是一个链接&lt;/a&gt;</span><br><span class=\"line\">    &lt;ul&gt;</span><br><span class=\"line\">        &lt;li&gt;HTML教程&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;CSS教程&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;JavaScript教程&lt;/li&gt;</span><br><span class=\"line\">    &lt;/ul&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;<span class=\"built_in\">input</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;请输入内容&quot;</span> /&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt; </span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover5.JPG","excerpt":"","more":"<p>HTML 中的标签就像关键字一样，每个标签都有自己的语义（含义），例如 <code>&lt;p&gt;</code> 标签代表段落，<code>&lt;b&gt;</code> 标签代表加粗。根据标签的不同，浏览器会使用不同的方式展示标签中的内容。</p>\n<p>在实际开发中，有时我们也将 HTML 标签称为 HTML 元素。</p>\n<h2 id=\"HTML-标签的语法格式\">HTML 标签的语法格式</h2>\n<p>一般情况下，一个 HTML 标签由 <strong>开始标签、属性、内容和结束标签组成，标签的名称不区分大小写</strong>，但大多数属性的值需要区分大小写，如下所示：</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220620230805.png\" alt=\"static/attachment/Pasted image 20220620230805.png\"><br>\n除了 class 属性外，开始标签中还可以包含其它属性信息 <strong>比如 id、title 等</strong>，这些我们会在后面进行讲解。</p>\n<p>注意，虽然 HTML 标签在语法上不区分大小写，但是为了规范和专业，强烈建议在定义标签时一律采用小写。</p>\n<p>当使用浏览器打开我们编写的 HTML 文档时，浏览器会从上到下依次读取文档中的内容，并根据 HTML 标签和属性将标签中的内容呈现在浏览器中。</p>\n<p>一个 HTML 文档中必须具有一些基本的标签，以便浏览器区分普通文本和 HTML 文档。您可以根据想要实现的效果使用任意数量的标签，但有以下几点需要注意：</p>\n<ul>\n<li>所有 HTML 标签都必须放在尖括号 <code>&lt; &gt;</code> 内；</li>\n<li>HTML 中不同的标签可以实现不同的效果；</li>\n<li>如果使用了某个标签，则必须使用对应的结束标签来结尾（自闭和标签除外）。</li>\n</ul>\n<h2 id=\"自闭和标签\">自闭和标签</h2>\n<p>有一些 HTML 标签没有单独的结束标签，而是在开始标签中添加 <code>/</code> 来进行闭合，这种标签称为自闭和标签。请看下面的例子：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;img src=&quot;./logo.png&quot; alt=&quot;logo说明&quot; /&gt;  </span><br><span class=\"line\">&lt;hr /&gt;  </span><br><span class=\"line\">&lt;br /&gt;  </span><br><span class=\"line\">&lt;input type=&quot;text&quot; placeholder=&quot;请输入内容&quot; /&gt;  </span><br></pre></td></tr></table></figure>\n<p>自闭和标签不用包围内容，所以不需要单独的结束标签。只有少部分 HTML 标签是自闭和的。</p>\n<!--  --> 表示 HTML 注释，用来对 HTML 代码进行说明，浏览器会忽略注释内容，所以用户在网页中看不到注释，我们将会在《HTML 注释》中详细讲解。\n<h2 id=\"嵌套-HTML-标签\">嵌套 HTML 标签</h2>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">&quot;en&quot;</span>&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;HTML演示&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;h1&gt;这是一个标题&lt;/h1&gt;</span><br><span class=\"line\">    &lt;p&gt;这是一个段落&lt;/p&gt;</span><br><span class=\"line\">    &lt;p&gt;这是另一个段落&lt;/p&gt;</span><br><span class=\"line\">    &lt;a href=<span class=\"string\">&quot;http://c.biancheng.net/&quot;</span> target=<span class=\"string\">&quot;_blank&quot;</span>&gt;这是一个链接&lt;/a&gt;</span><br><span class=\"line\">    &lt;ul&gt;</span><br><span class=\"line\">        &lt;li&gt;HTML教程&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;CSS教程&lt;/li&gt;</span><br><span class=\"line\">        &lt;li&gt;JavaScript教程&lt;/li&gt;</span><br><span class=\"line\">    &lt;/ul&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;<span class=\"built_in\">input</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;text&quot;</span> placeholder=<span class=\"string\">&quot;请输入内容&quot;</span> /&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt; </span><br></pre></td></tr></table></figure>\n"},{"title":"1.4 HTML属性的概念和使用","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:47.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["1.4 HTML属性的概念和使用"],"_content":"\n通过前面的学习，我们已经对 HTML 标签有了简单的认识，知道可以在标签中可以添加一些属性，这些属性包含了标签的额外信息，例如：\n\n- href 属性可以为 \\<a> 标签提供链接地址；\n- src 属性可以为 \\<img> 标签提供图像的路径；\n- style 属性可以为几乎所有标签定义 CSS 样式。\n","source":"_posts/1.4-HTML属性的概念和使用.md","raw":"---\ntitle: 1.4 HTML属性的概念和使用\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:47 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 1.4 HTML属性的概念和使用\n---\n\n通过前面的学习，我们已经对 HTML 标签有了简单的认识，知道可以在标签中可以添加一些属性，这些属性包含了标签的额外信息，例如：\n\n- href 属性可以为 \\<a> 标签提供链接地址；\n- src 属性可以为 \\<img> 标签提供图像的路径；\n- style 属性可以为几乎所有标签定义 CSS 样式。\n","slug":"1.4-HTML属性的概念和使用","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709p001b4cv9bw3g5un7","content":"<p>通过前面的学习，我们已经对 HTML 标签有了简单的认识，知道可以在标签中可以添加一些属性，这些属性包含了标签的额外信息，例如：</p>\n<ul>\n<li>href 属性可以为 &lt;a&gt; 标签提供链接地址；</li>\n<li>src 属性可以为 &lt;img&gt; 标签提供图像的路径；</li>\n<li>style 属性可以为几乎所有标签定义 CSS 样式。</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<p>通过前面的学习，我们已经对 HTML 标签有了简单的认识，知道可以在标签中可以添加一些属性，这些属性包含了标签的额外信息，例如：</p>\n<ul>\n<li>href 属性可以为 &lt;a&gt; 标签提供链接地址；</li>\n<li>src 属性可以为 &lt;img&gt; 标签提供图像的路径；</li>\n<li>style 属性可以为几乎所有标签定义 CSS 样式。</li>\n</ul>\n"},{"title":"1.4 仿造登录态","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["1.4 仿造登录态"],"_content":"\n## 目标\n\n运用 cookie 仿造成登录态\n\n---\n\n## Cookie 和 Session 的运行机制\n\n---\n\n### 利用 Cookie 仿造成已登录态\n\n```python\n# https://requests.readthedocs.io/en/latest/user/quickstart/#cookies\ncookies={}\nr = requests.get(url, cookies=cookies)\n```\n","source":"_posts/1.4-仿造登录态.md","raw":"---\ntitle: 1.4 仿造登录态\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 1.4 仿造登录态\n---\n\n## 目标\n\n运用 cookie 仿造成登录态\n\n---\n\n## Cookie 和 Session 的运行机制\n\n---\n\n### 利用 Cookie 仿造成已登录态\n\n```python\n# https://requests.readthedocs.io/en/latest/user/quickstart/#cookies\ncookies={}\nr = requests.get(url, cookies=cookies)\n```\n","slug":"1.4-仿造登录态","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709p001e4cv9btrjbiwq","content":"<h2 id=\"目标\">目标</h2>\n<p>运用 cookie 仿造成登录态</p>\n<hr>\n<h2 id=\"Cookie-和-Session-的运行机制\">Cookie 和 Session 的运行机制</h2>\n<hr>\n<h3 id=\"利用-Cookie-仿造成已登录态\">利用 Cookie 仿造成已登录态</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># https://requests.readthedocs.io/en/latest/user/quickstart/#cookies</span></span><br><span class=\"line\">cookies=&#123;&#125;</span><br><span class=\"line\">r = requests.get(url, cookies=cookies)</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover5.JPG","excerpt":"","more":"<h2 id=\"目标\">目标</h2>\n<p>运用 cookie 仿造成登录态</p>\n<hr>\n<h2 id=\"Cookie-和-Session-的运行机制\">Cookie 和 Session 的运行机制</h2>\n<hr>\n<h3 id=\"利用-Cookie-仿造成已登录态\">利用 Cookie 仿造成已登录态</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># https://requests.readthedocs.io/en/latest/user/quickstart/#cookies</span></span><br><span class=\"line\">cookies=&#123;&#125;</span><br><span class=\"line\">r = requests.get(url, cookies=cookies)</span><br></pre></td></tr></table></figure>\n"},{"title":"1.5 HTML超链接标签","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["1.5 HTML超链接标签"],"_content":"\n在 HTML 中，我们使用 <a> 标签来表示超链接。\n\n超链接（Hyperlink）通常简称为链接（Link），是指从一个网页指向另一个目标的连接关系，这个目标可以是另一个网页，也可以是当前网页中的其它位置，还可以是图片、文件、应用程序等。链接的两端分别称为源锚点和目标锚点，通过点击源锚点即可以跳转到目标锚点。\n\n超链接是网页中最常见的元素之一，整个互联网都是基于超链接而构建的。网站由众多网页构成，超链接使得网页之间不再独立，它就像一根线，把网页连接在一起，形成一个网状结构。互联网之所以能够称之为“网”，就是因为有超链接的存在。\n\n<a> 标签的语法格式如下：\n\n<a href=\"url\"  target=\"opentype\">链接文本</a>\n\n其中，href 属性用来指明要跳转到的 url，target 属性用来指明新页面的打开方式，链接文本需要写在 <a> 和 </a> 之间。\n\n例如，链接到 C 语言中文网首页，并在浏览器新窗口中打开：\n\n```\n<a href=\"http://c.biancheng.net\" target=\"_blank\">C语言中文网</a>\n```\n\n链接到 HTML 教程的第一篇文章，并在当前窗口中打开：\n\n```\n<a href=\"http://c.biancheng.net/view/7410.html\" target=\"_blank\">网站到底是什么</a>\n```\n\n## Href 属性\n\nhref 属性指定链接的目标，也就是要跳转到什么位置。href 可以有多种形式，例如：\n\n- href 可以指向一个网页（.html、.php、.jsp、.asp 等格式），这也是最常见的形式，例如 href=\"http://c.biancheng.net/view/1719.html\"；\n- href 可以指向图片（.jpg、.gif、.png 等格式）、音频（.mp3、.wav 等格式）、视频（.mp4、.mkv 格式）等媒体文件，例如 href=\"/uploads/allimg/181221/134I32557-0.jpg\"；\n- href 可以指向压缩文件（.zip、.rar 等格式）、可执行程序（.exe）等，一些下载网站的链接就可以写成这种形式，例如 href=\"./../uploads/data\\_package/ComputerFoundation.zip\"；\n- href 甚至还可以指向本机的文件，只是很少这样使用，例如 href=\"D:/Program Files/360/360safe/360Safe.exe\"。\n\n你看，href 本质上就是指向一个文件，这个文件几乎可以是任意格式的。如果浏览器支持这种格式，那么它就可以在浏览器上显示，比如常见的图片、音频、视频等，如果浏览器不支持这种格式，那么就提示用户下载。\n\n另外，href 使用的路径可以是绝对路径，也可以是相对路径。绝对路径往往以域名为起点，例如 http://c.biancheng.net/view/1719.html；相对路径往往以当前文件或者当前域名为起点，例如  ./../uploads/data\\_package/ComputerFoundation.zip。对 URL 结构不了解的读者，请转到《[绝对路径与相对路径](http://c.biancheng.net/view/7538.html)》进行学习。\n\n## Target 属性\n\ntarget 是可选属性，用来指明新页面的打开方式。默认情况下，新页面在当前浏览器窗口中打开，我们可以使用 target 属性来改变新页面的打开方式。常见的打开方式如下表所示：\n\n<table><caption>target 属性值</caption><tbody><tr><th>属性值</th><th>说明</th></tr><tr><td>_self</td><td>默认，在现有窗口中打开新页面，原窗口将被覆盖。</td></tr><tr><td>_blank</td><td>在新窗口中打开新页面，原窗口将被保留。</td></tr><tr><td>_parent</td><td>在当前框架的上一层打开新页面。</td></tr><tr><td>_top</td><td>在顶层框架中打开新页面。</td></tr></tbody></table>\n\n绝大部分情况下，target 属性要么不写，保持默认的 \\_self，要么将它的值设置为 \\_blank，在新窗口中打开页面。例如：\n\n```\n<a href=\"http://c.biancheng.net/html/\" target=\"_blank\">HTML教程（新窗口打开）</a><a href=\"http://c.biancheng.net/css3/\">CSS教程（当前窗口打开）</a>\n```\n\n## <a> 标签的默认样式\n\n浏览器会为 <a> 标签设置一些默认样式。\n\n#### 1) 鼠标样式\n\n当鼠标移入链接区域时，会变成一只小手；当鼠标移出链接区域时，会变回箭头形状。\n\n#### 2) 颜色及下划线\n\n超链接被点击之前为蓝色，超链接被点击之后变成紫色。超链接默认带有下划线，下划线颜色和文本颜色保持一致。 \n\n浏览器根据历史记录来判断超链接是否被点击过，如果 href 属性和历史记录中的某条 URL 重合，那么说明该链接被点击了。清空浏览器的历史记录会让超链接的颜色再次变回蓝色。\n\n【示例】HTML 超链接的多种形式：\n\n```\n<!DOCTYPE html><html lang=\"en\"><head>    <meta charset=\"UTF-8\">    <title>HTML &lt;a&gt;标签演示</title></head><body>    <p>        <a href=\"http://c.biancheng.net/html/\" target=\"_blank\">HTML教程（新窗口打开）</a><br>        <a href=\"http://c.biancheng.net/css3/\">CSS教程（当前窗口打开）</a><br>        <a href=\"http://c.biancheng.net/js/\">JS教程（被点击过）</a>    </p></body></html>\n```\n\n运行效果：\n\n![HTML超链接演示](http://c.biancheng.net/uploads/allimg/210929/1-21092Z9442V60.png)  \n图 1：HTML 超链接演示\n","source":"_posts/1.5-HTML超链接标签.md","raw":"---\ntitle: 1.5 HTML超链接标签\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 1.5 HTML超链接标签\n---\n\n在 HTML 中，我们使用 <a> 标签来表示超链接。\n\n超链接（Hyperlink）通常简称为链接（Link），是指从一个网页指向另一个目标的连接关系，这个目标可以是另一个网页，也可以是当前网页中的其它位置，还可以是图片、文件、应用程序等。链接的两端分别称为源锚点和目标锚点，通过点击源锚点即可以跳转到目标锚点。\n\n超链接是网页中最常见的元素之一，整个互联网都是基于超链接而构建的。网站由众多网页构成，超链接使得网页之间不再独立，它就像一根线，把网页连接在一起，形成一个网状结构。互联网之所以能够称之为“网”，就是因为有超链接的存在。\n\n<a> 标签的语法格式如下：\n\n<a href=\"url\"  target=\"opentype\">链接文本</a>\n\n其中，href 属性用来指明要跳转到的 url，target 属性用来指明新页面的打开方式，链接文本需要写在 <a> 和 </a> 之间。\n\n例如，链接到 C 语言中文网首页，并在浏览器新窗口中打开：\n\n```\n<a href=\"http://c.biancheng.net\" target=\"_blank\">C语言中文网</a>\n```\n\n链接到 HTML 教程的第一篇文章，并在当前窗口中打开：\n\n```\n<a href=\"http://c.biancheng.net/view/7410.html\" target=\"_blank\">网站到底是什么</a>\n```\n\n## Href 属性\n\nhref 属性指定链接的目标，也就是要跳转到什么位置。href 可以有多种形式，例如：\n\n- href 可以指向一个网页（.html、.php、.jsp、.asp 等格式），这也是最常见的形式，例如 href=\"http://c.biancheng.net/view/1719.html\"；\n- href 可以指向图片（.jpg、.gif、.png 等格式）、音频（.mp3、.wav 等格式）、视频（.mp4、.mkv 格式）等媒体文件，例如 href=\"/uploads/allimg/181221/134I32557-0.jpg\"；\n- href 可以指向压缩文件（.zip、.rar 等格式）、可执行程序（.exe）等，一些下载网站的链接就可以写成这种形式，例如 href=\"./../uploads/data\\_package/ComputerFoundation.zip\"；\n- href 甚至还可以指向本机的文件，只是很少这样使用，例如 href=\"D:/Program Files/360/360safe/360Safe.exe\"。\n\n你看，href 本质上就是指向一个文件，这个文件几乎可以是任意格式的。如果浏览器支持这种格式，那么它就可以在浏览器上显示，比如常见的图片、音频、视频等，如果浏览器不支持这种格式，那么就提示用户下载。\n\n另外，href 使用的路径可以是绝对路径，也可以是相对路径。绝对路径往往以域名为起点，例如 http://c.biancheng.net/view/1719.html；相对路径往往以当前文件或者当前域名为起点，例如  ./../uploads/data\\_package/ComputerFoundation.zip。对 URL 结构不了解的读者，请转到《[绝对路径与相对路径](http://c.biancheng.net/view/7538.html)》进行学习。\n\n## Target 属性\n\ntarget 是可选属性，用来指明新页面的打开方式。默认情况下，新页面在当前浏览器窗口中打开，我们可以使用 target 属性来改变新页面的打开方式。常见的打开方式如下表所示：\n\n<table><caption>target 属性值</caption><tbody><tr><th>属性值</th><th>说明</th></tr><tr><td>_self</td><td>默认，在现有窗口中打开新页面，原窗口将被覆盖。</td></tr><tr><td>_blank</td><td>在新窗口中打开新页面，原窗口将被保留。</td></tr><tr><td>_parent</td><td>在当前框架的上一层打开新页面。</td></tr><tr><td>_top</td><td>在顶层框架中打开新页面。</td></tr></tbody></table>\n\n绝大部分情况下，target 属性要么不写，保持默认的 \\_self，要么将它的值设置为 \\_blank，在新窗口中打开页面。例如：\n\n```\n<a href=\"http://c.biancheng.net/html/\" target=\"_blank\">HTML教程（新窗口打开）</a><a href=\"http://c.biancheng.net/css3/\">CSS教程（当前窗口打开）</a>\n```\n\n## <a> 标签的默认样式\n\n浏览器会为 <a> 标签设置一些默认样式。\n\n#### 1) 鼠标样式\n\n当鼠标移入链接区域时，会变成一只小手；当鼠标移出链接区域时，会变回箭头形状。\n\n#### 2) 颜色及下划线\n\n超链接被点击之前为蓝色，超链接被点击之后变成紫色。超链接默认带有下划线，下划线颜色和文本颜色保持一致。 \n\n浏览器根据历史记录来判断超链接是否被点击过，如果 href 属性和历史记录中的某条 URL 重合，那么说明该链接被点击了。清空浏览器的历史记录会让超链接的颜色再次变回蓝色。\n\n【示例】HTML 超链接的多种形式：\n\n```\n<!DOCTYPE html><html lang=\"en\"><head>    <meta charset=\"UTF-8\">    <title>HTML &lt;a&gt;标签演示</title></head><body>    <p>        <a href=\"http://c.biancheng.net/html/\" target=\"_blank\">HTML教程（新窗口打开）</a><br>        <a href=\"http://c.biancheng.net/css3/\">CSS教程（当前窗口打开）</a><br>        <a href=\"http://c.biancheng.net/js/\">JS教程（被点击过）</a>    </p></body></html>\n```\n\n运行效果：\n\n![HTML超链接演示](http://c.biancheng.net/uploads/allimg/210929/1-21092Z9442V60.png)  \n图 1：HTML 超链接演示\n","slug":"1.5-HTML超链接标签","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709q001i4cv9e3cz07ie","content":"<p>在 HTML 中，我们使用 <a> 标签来表示超链接。</p>\n<p>超链接（Hyperlink）通常简称为链接（Link），是指从一个网页指向另一个目标的连接关系，这个目标可以是另一个网页，也可以是当前网页中的其它位置，还可以是图片、文件、应用程序等。链接的两端分别称为源锚点和目标锚点，通过点击源锚点即可以跳转到目标锚点。</p>\n<p>超链接是网页中最常见的元素之一，整个互联网都是基于超链接而构建的。网站由众多网页构成，超链接使得网页之间不再独立，它就像一根线，把网页连接在一起，形成一个网状结构。互联网之所以能够称之为“网”，就是因为有超链接的存在。</p>\n<p><a> 标签的语法格式如下：</p>\n<p><a href=\"url\"  target=\"opentype\">链接文本</a></p>\n<p>其中，href 属性用来指明要跳转到的 url，target 属性用来指明新页面的打开方式，链接文本需要写在 <a> 和 </a> 之间。</p>\n<p>例如，链接到 C 语言中文网首页，并在浏览器新窗口中打开：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;a href=&quot;http://c.biancheng.net&quot; target=&quot;_blank&quot;&gt;C语言中文网&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n<p>链接到 HTML 教程的第一篇文章，并在当前窗口中打开：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;a href=&quot;http://c.biancheng.net/view/7410.html&quot; target=&quot;_blank&quot;&gt;网站到底是什么&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Href-属性\">Href 属性</h2>\n<p>href 属性指定链接的目标，也就是要跳转到什么位置。href 可以有多种形式，例如：</p>\n<ul>\n<li>href 可以指向一个网页（.html、.php、.jsp、.asp 等格式），这也是最常见的形式，例如 href=“<a href=\"http://c.biancheng.net/view/1719.html\">http://c.biancheng.net/view/1719.html</a>”；</li>\n<li>href 可以指向图片（.jpg、.gif、.png 等格式）、音频（.mp3、.wav 等格式）、视频（.mp4、.mkv 格式）等媒体文件，例如 href=“/uploads/allimg/181221/134I32557-0.jpg”；</li>\n<li>href 可以指向压缩文件（.zip、.rar 等格式）、可执行程序（.exe）等，一些下载网站的链接就可以写成这种形式，例如 href=“./…/uploads/data_package/ComputerFoundation.zip”；</li>\n<li>href 甚至还可以指向本机的文件，只是很少这样使用，例如 href=“D:/Program Files/360/360safe/360Safe.exe”。</li>\n</ul>\n<p>你看，href 本质上就是指向一个文件，这个文件几乎可以是任意格式的。如果浏览器支持这种格式，那么它就可以在浏览器上显示，比如常见的图片、音频、视频等，如果浏览器不支持这种格式，那么就提示用户下载。</p>\n<p>另外，href 使用的路径可以是绝对路径，也可以是相对路径。绝对路径往往以域名为起点，例如 <a href=\"http://c.biancheng.net/view/1719.html%EF%BC%9B%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E5%BE%80%E5%BE%80%E4%BB%A5%E5%BD%93%E5%89%8D%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E5%BD%93%E5%89%8D%E5%9F%9F%E5%90%8D%E4%B8%BA%E8%B5%B7%E7%82%B9%EF%BC%8C%E4%BE%8B%E5%A6%82\">http://c.biancheng.net/view/1719.html；相对路径往往以当前文件或者当前域名为起点，例如</a>  ./…/uploads/data_package/ComputerFoundation.zip。对 URL 结构不了解的读者，请转到《<a href=\"http://c.biancheng.net/view/7538.html\">绝对路径与相对路径</a>》进行学习。</p>\n<h2 id=\"Target-属性\">Target 属性</h2>\n<p>target 是可选属性，用来指明新页面的打开方式。默认情况下，新页面在当前浏览器窗口中打开，我们可以使用 target 属性来改变新页面的打开方式。常见的打开方式如下表所示：</p>\n<table><caption>target 属性值</caption><tbody><tr><th>属性值</th><th>说明</th></tr><tr><td>_self</td><td>默认，在现有窗口中打开新页面，原窗口将被覆盖。</td></tr><tr><td>_blank</td><td>在新窗口中打开新页面，原窗口将被保留。</td></tr><tr><td>_parent</td><td>在当前框架的上一层打开新页面。</td></tr><tr><td>_top</td><td>在顶层框架中打开新页面。</td></tr></tbody></table>\n<p>绝大部分情况下，target 属性要么不写，保持默认的 _self，要么将它的值设置为 _blank，在新窗口中打开页面。例如：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;a href=&quot;http://c.biancheng.net/html/&quot; target=&quot;_blank&quot;&gt;HTML教程（新窗口打开）&lt;/a&gt;&lt;a href=&quot;http://c.biancheng.net/css3/&quot;&gt;CSS教程（当前窗口打开）&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"a-标签的默认样式\"><a> 标签的默认样式</h2>\n<p>浏览器会为 <a> 标签设置一些默认样式。</p>\n<h4 id=\"1-鼠标样式\">1) 鼠标样式</h4>\n<p>当鼠标移入链接区域时，会变成一只小手；当鼠标移出链接区域时，会变回箭头形状。</p>\n<h4 id=\"2-颜色及下划线\">2) 颜色及下划线</h4>\n<p>超链接被点击之前为蓝色，超链接被点击之后变成紫色。超链接默认带有下划线，下划线颜色和文本颜色保持一致。</p>\n<p>浏览器根据历史记录来判断超链接是否被点击过，如果 href 属性和历史记录中的某条 URL 重合，那么说明该链接被点击了。清空浏览器的历史记录会让超链接的颜色再次变回蓝色。</p>\n<p>【示例】HTML 超链接的多种形式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;HTML &amp;lt;a&amp;gt;标签演示&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;        &lt;a href=&quot;http://c.biancheng.net/html/&quot; target=&quot;_blank&quot;&gt;HTML教程（新窗口打开）&lt;/a&gt;&lt;br&gt;        &lt;a href=&quot;http://c.biancheng.net/css3/&quot;&gt;CSS教程（当前窗口打开）&lt;/a&gt;&lt;br&gt;        &lt;a href=&quot;http://c.biancheng.net/js/&quot;&gt;JS教程（被点击过）&lt;/a&gt;    &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>运行效果：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/210929/1-21092Z9442V60.png\" alt=\"HTML超链接演示\"><br>\n图 1：HTML 超链接演示</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<p>在 HTML 中，我们使用 <a> 标签来表示超链接。</p>\n<p>超链接（Hyperlink）通常简称为链接（Link），是指从一个网页指向另一个目标的连接关系，这个目标可以是另一个网页，也可以是当前网页中的其它位置，还可以是图片、文件、应用程序等。链接的两端分别称为源锚点和目标锚点，通过点击源锚点即可以跳转到目标锚点。</p>\n<p>超链接是网页中最常见的元素之一，整个互联网都是基于超链接而构建的。网站由众多网页构成，超链接使得网页之间不再独立，它就像一根线，把网页连接在一起，形成一个网状结构。互联网之所以能够称之为“网”，就是因为有超链接的存在。</p>\n<p><a> 标签的语法格式如下：</p>\n<p><a href=\"url\"  target=\"opentype\">链接文本</a></p>\n<p>其中，href 属性用来指明要跳转到的 url，target 属性用来指明新页面的打开方式，链接文本需要写在 <a> 和 </a> 之间。</p>\n<p>例如，链接到 C 语言中文网首页，并在浏览器新窗口中打开：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;a href=&quot;http://c.biancheng.net&quot; target=&quot;_blank&quot;&gt;C语言中文网&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n<p>链接到 HTML 教程的第一篇文章，并在当前窗口中打开：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;a href=&quot;http://c.biancheng.net/view/7410.html&quot; target=&quot;_blank&quot;&gt;网站到底是什么&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Href-属性\">Href 属性</h2>\n<p>href 属性指定链接的目标，也就是要跳转到什么位置。href 可以有多种形式，例如：</p>\n<ul>\n<li>href 可以指向一个网页（.html、.php、.jsp、.asp 等格式），这也是最常见的形式，例如 href=“<a href=\"http://c.biancheng.net/view/1719.html\">http://c.biancheng.net/view/1719.html</a>”；</li>\n<li>href 可以指向图片（.jpg、.gif、.png 等格式）、音频（.mp3、.wav 等格式）、视频（.mp4、.mkv 格式）等媒体文件，例如 href=“/uploads/allimg/181221/134I32557-0.jpg”；</li>\n<li>href 可以指向压缩文件（.zip、.rar 等格式）、可执行程序（.exe）等，一些下载网站的链接就可以写成这种形式，例如 href=“./…/uploads/data_package/ComputerFoundation.zip”；</li>\n<li>href 甚至还可以指向本机的文件，只是很少这样使用，例如 href=“D:/Program Files/360/360safe/360Safe.exe”。</li>\n</ul>\n<p>你看，href 本质上就是指向一个文件，这个文件几乎可以是任意格式的。如果浏览器支持这种格式，那么它就可以在浏览器上显示，比如常见的图片、音频、视频等，如果浏览器不支持这种格式，那么就提示用户下载。</p>\n<p>另外，href 使用的路径可以是绝对路径，也可以是相对路径。绝对路径往往以域名为起点，例如 <a href=\"http://c.biancheng.net/view/1719.html%EF%BC%9B%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E5%BE%80%E5%BE%80%E4%BB%A5%E5%BD%93%E5%89%8D%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E5%BD%93%E5%89%8D%E5%9F%9F%E5%90%8D%E4%B8%BA%E8%B5%B7%E7%82%B9%EF%BC%8C%E4%BE%8B%E5%A6%82\">http://c.biancheng.net/view/1719.html；相对路径往往以当前文件或者当前域名为起点，例如</a>  ./…/uploads/data_package/ComputerFoundation.zip。对 URL 结构不了解的读者，请转到《<a href=\"http://c.biancheng.net/view/7538.html\">绝对路径与相对路径</a>》进行学习。</p>\n<h2 id=\"Target-属性\">Target 属性</h2>\n<p>target 是可选属性，用来指明新页面的打开方式。默认情况下，新页面在当前浏览器窗口中打开，我们可以使用 target 属性来改变新页面的打开方式。常见的打开方式如下表所示：</p>\n<table><caption>target 属性值</caption><tbody><tr><th>属性值</th><th>说明</th></tr><tr><td>_self</td><td>默认，在现有窗口中打开新页面，原窗口将被覆盖。</td></tr><tr><td>_blank</td><td>在新窗口中打开新页面，原窗口将被保留。</td></tr><tr><td>_parent</td><td>在当前框架的上一层打开新页面。</td></tr><tr><td>_top</td><td>在顶层框架中打开新页面。</td></tr></tbody></table>\n<p>绝大部分情况下，target 属性要么不写，保持默认的 _self，要么将它的值设置为 _blank，在新窗口中打开页面。例如：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;a href=&quot;http://c.biancheng.net/html/&quot; target=&quot;_blank&quot;&gt;HTML教程（新窗口打开）&lt;/a&gt;&lt;a href=&quot;http://c.biancheng.net/css3/&quot;&gt;CSS教程（当前窗口打开）&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"a-标签的默认样式\"><a> 标签的默认样式</h2>\n<p>浏览器会为 <a> 标签设置一些默认样式。</p>\n<h4 id=\"1-鼠标样式\">1) 鼠标样式</h4>\n<p>当鼠标移入链接区域时，会变成一只小手；当鼠标移出链接区域时，会变回箭头形状。</p>\n<h4 id=\"2-颜色及下划线\">2) 颜色及下划线</h4>\n<p>超链接被点击之前为蓝色，超链接被点击之后变成紫色。超链接默认带有下划线，下划线颜色和文本颜色保持一致。</p>\n<p>浏览器根据历史记录来判断超链接是否被点击过，如果 href 属性和历史记录中的某条 URL 重合，那么说明该链接被点击了。清空浏览器的历史记录会让超链接的颜色再次变回蓝色。</p>\n<p>【示例】HTML 超链接的多种形式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;HTML &amp;lt;a&amp;gt;标签演示&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;p&gt;        &lt;a href=&quot;http://c.biancheng.net/html/&quot; target=&quot;_blank&quot;&gt;HTML教程（新窗口打开）&lt;/a&gt;&lt;br&gt;        &lt;a href=&quot;http://c.biancheng.net/css3/&quot;&gt;CSS教程（当前窗口打开）&lt;/a&gt;&lt;br&gt;        &lt;a href=&quot;http://c.biancheng.net/js/&quot;&gt;JS教程（被点击过）&lt;/a&gt;    &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>运行效果：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/210929/1-21092Z9442V60.png\" alt=\"HTML超链接演示\"><br>\n图 1：HTML 超链接演示</p>\n"},{"title":"1.6 HTML样式CSS","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["1.6 HTML样式CSS"],"_content":"\n**HTML 仅能呈现一些信息，表现能力非常有限，需要结合 CSS 一起使用，以使页面更加精美。**\n\nCSS 样式既可以作为单独的文件（`.css` 类型的文件）引入到 HTML 文档中，也可以直接写在 HTML 文档中，大致分为如下四种方法：\n\n- 行内样式：使用 HTML 标签的 style 属性定义 CSS 样式；\n- 内嵌样式：使用 \\\\<style\\> 标签在 HTML 文档头部（\\\\<head\\> 和 \\\\<head\\> 之间）定义 CSS 样式。\n- 链接式：使用 \\<link> 标签引入外部 CSS 样式表文件。\n- 导入式：使用 @import 命令导入外部 CSS 样式表文件。\n\n第 1 种和第 2 种方法都是将 CSS 样式写到当前 HTML 文档中，第 3 种和第 4 种方法都是将 CSS 样式放在外部文件中，然后再导入到当前 HTML 文档中。\n\n 1\\. 行内样式（内联样式）\n\n行内样式就是把 CSS 样式直接放在代码行内的标签中，一般都是放入标签的 `style` 属性中，由于行内样式直接插入标签中，故是最直接的一种方式，同时也是修改最不方便的样式。\n\n【示例 1】针对段落、\\<h2> 标签、\\<em> 标签、\\<strong>标签以及 \\<div> 标签，分别应用 CSS 行内样式。\n\n```\n<!doctype html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>行内样式</title>\n</head>\n<body>\n    <p style=\"background-color: 999900\">行内元素，控制段落-1</p>\n    <h2 style=\"background-color: FF6633\">行内元素，h2 标题元素</h2>\n    <p style=\"background-color: 999900\">行内元素，控制段落-2</p>\n    <strong style=\"font-size:30px;\">行内元素，strong 比 em 效果要强</strong>\n    <div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素</div>\n    <em style=\"font-size:2em;\">行内元素，em 强调</em>\n</body>\n</html>\n```\n\n页面演示效果如下图所示：\n\n![HTML行内样式的应用](http://c.biancheng.net/uploads/allimg/181109/1-1Q10915253S16.gif)  \n图 1：行内样式的应用\n\n在上面示例中，行内样式由 HTML 元素的 style 属性嵌入，即将 CSS 代码放入 `style=\"\"` 引号内即可，多个 CSS 属性值则通过分号 `;` 间隔。例如示例中的 \\<div> 标签：\n\n\\<div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素 \\</div>\n\n段落 \\<p> 标签设置背景色为褐色（background-color: 999900），标题 \\<h2> 标签设置背景色为红色（background-color: FF6633）。\n\n\\<strong> 标签设置字体为 30 像素（font-size:30px;），\\<div> 标签设置高度和行高为 30 像素以及进行背景色、颜色的设置（background-color:66CC99; color:993300; height:30px; line-height:30px;），\\<em> 标签设置字体大小为相对单位（font-size: 2em;）。\n\n两个段落 \\<p> 标签，虽内容不同，但使用一样的背景色设置，却添加两次 CSS 行内属性设置背景色 background-color: 999900。\n\n行内元素虽然编写简单，但通过示例可以发现存在以下缺陷：\n\n- 每一个标签要设置样式都需要添加 style 属性。\n- 与过去网页制作者将 HTML 的标签和样式糅杂在一起的效果不同的是，现在是通过 CSS 编写行内样式，过去釆用的是 HTML 标签属性实现的样式效果。虽方式不同，但导致的后果是一样的：后期维护成本高，即当修改页面时需要逐个打开网站每个页面一一修改，根本看不到 CSS 所起到的作用。\n- 添加如此多的行内样式，页面体积大，门户网站若釆用这种方式编写，那将浪费服务器带宽和流量。\n\n网络上有些网页通过查看源文件可以看到这种编写方式，虽然一个网页只有一部分是如此做的，但需要分情况：\n\n- 若网页制作者编写这样的行内样式，可以快速更改当前样式，不必考虑以前编写的样式冲突问题；\n- 网页中若存在这种情况则是后台编辑时，通过编辑器生成的样式，或后台未开发完整，需为编辑人员开发可选择样式的选项而非通过编辑器直接改变颜色、粗细、背景色、倾斜等效果。\n\n 2\\. 内嵌样式\n\n内嵌样式通过将 CSS 写在网页源文件的头部，即在 \\<head> 和 \\<head> 之间，通过使用 HTML 标签中的 \\<style> 标签将其包围，其特点是该样式只能在此页使用，解决行内样式多次书写的弊端。\n\n【示例 2】为段落设置内嵌式样式书写方法，减少代码量。\n\n```\n<!doctype html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>行内样式</title>\n</head>\n<body>\n    <p style=\"background-color: 999900\">行内元素，控制段落-1</p>\n    <h2 style=\"background-color: FF6633\">行内元素，h2 标题元素</h2>\n    <p style=\"background-color: 999900\">行内元素，控制段落-2</p>\n    <strong style=\"font-size:30px;\">行内元素，strong 比 em 效果要强</strong>\n    <div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素</div>\n    <em style=\"font-size:2em;\">行内元素，em 强调</em>\n</body>\n</html>\n```\n\n页面演示效果如下图所示：\n\n![HTML内嵌样式的使用](http://c.biancheng.net/uploads/allimg/181109/1-1Q10915435Q30.gif)  \n图 2：内嵌样式的应用\n\n在上面示例中，段落进行如下设置：文本左对齐、字体为 14 号、行高 25 像素、宽度 500 像素、下边距 20 像素、浏览器下居中、首行缩进两个文字大小空间。首行缩进使用相对单位，此设置的作用是当字体大小改变时（如 `font-size: 18px;`）依然能够实现缩进两个文字大小空间。\n\n行内样式带来了样式修改的不方便，例如上个示例中两个段落都使用同样的样式，但需要编写两遍；而使用内嵌式样式后，就可以将所有的段落样式放在一起。\n\nstyle 不仅可定义 CSS 样式，还可以定义 [JavaScript](http://c.biancheng.net/js/) 脚本，故使用 style 时需要注意。当 style 的 type 值为 `text/css` 时，内部编写 CSS 样式；若 style 的 type 值为 `text/javascript` 时，内部编写 [Java](http://c.biancheng.net/java/)Script 脚本。\n\n style 标签的 title 属性\n\nstyle 中有一个比较特殊的属性 title，使用 title 可以为不同的样式设置一个标题，浏览者就可以根据标题选择不同的样式达到浏览器中切换的效果，但 IE 浏览器不支持，Firefox 浏览器支持此效果。\n\n【示例 3】分别为火狐浏览器设置两种字体大小样式，通过火狐“查看”菜单进行修改。\n\n```\n<!doctype html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>行内样式</title>\n</head>\n<body>\n    <p style=\"background-color: 999900\">行内元素，控制段落-1</p>\n    <h2 style=\"background-color: FF6633\">行内元素，h2 标题元素</h2>\n    <p style=\"background-color: 999900\">行内元素，控制段落-2</p>\n    <strong style=\"font-size:30px;\">行内元素，strong 比 em 效果要强</strong>\n    <div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素</div>\n    <em style=\"font-size:2em;\">行内元素，em 强调</em>\n</body>\n</html>\n```\n\n页面演示效果如下图所示。\n\n![](http://c.biancheng.net/uploads/allimg/181109/1-1Q109161042339.gif)  \n图 3：火狐浏览器内嵌式更换样式\n\n在上面不例中，通过 `\\<style type=\"text/css\" title=\"名称\">` 定义了两种字体大小，通过火狐浏览器“查看”菜单下的“页面样式”子菜单中有两个选项：字体 14 号、字体 18 号，默认情况下显示的是第一次书写的 `\\<style type=\"text/css\" title=\"名称\">`，通过菜单可以改变该页面样式。\n\n 3\\. 链接式\n\n链接式通过 HTML 的 \\<link> 标签，将外部样式表文件链接到 HTML 文档中，这也是网络上网站应用最多的方式，同时也是最实用的方式。这种方法将 HTML 文档和 CSS 文件完全分离，实现结构层和表示层的彻底分离，增强网页结构的扩展性和 CSS 样式的可维护性。\n\n【示例 4】使用链接式为 HTML 代码应用样式，书写、更改方便。\n\n```\n<!doctype html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>行内样式</title>\n</head>\n<body>\n    <p style=\"background-color: 999900\">行内元素，控制段落-1</p>\n    <h2 style=\"background-color: FF6633\">行内元素，h2 标题元素</h2>\n    <p style=\"background-color: 999900\">行内元素，控制段落-2</p>\n    <strong style=\"font-size:30px;\">行内元素，strong 比 em 效果要强</strong>\n    <div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素</div>\n    <em style=\"font-size:2em;\">行内元素，em 强调</em>\n</body>\n</html>\n```\n\n页面演示效果如下图所示：\n\n![HTML链接式嵌入CSS样式](http://c.biancheng.net/uploads/allimg/181109/1-1Q1091626121A.gif)  \n图 4：链接式的应用\n\n在上面示例中，通过 link 链接两个 CSS 文件，且都有效，这也是网站制作者将公共部分放入一个 CSS 文件，当前页面样式编写新的样式文件。\n\nlianjie.css 文件代码：\n\n```\nh3{\n    font-weight: normal;  /*取消标题默认加粗效果*/\n    background-color: 66CC99;  /* 设置背景色 */\n    height: 50px;  /*设置标签的高度*/\n    line-height:50px;  /* 设置标签的行高 */\n}\nspan{\n    color: FFOOOO;  /* 字体颜色 */\n    font-weight:bold;  /* 字体加粗 */\n}\n```\n\nlianjie-2.css 文件代码：\n\n```\np{\n    color: FF3333;  /*字体颜色设置*/\n    font-weight: bold;  /* 字体加粗 */\n    border-bottom: 3px dashed 009933;  /* 设置下边框线 */\n    line-height: 30px;  /* 设置行高 */\n}\n```\n\n链接式样式使 CSS 代码和 HTML 代码完全分离，达到结构与样式的分开，使 HTML 代码专门构建页面结构，而美化工作由 CSS 完成。\n\n链接式导入 CSS 样式的好处：\n\n- CSS 文件可以放在不同的 HTML 文件中，使网站所有页面样式统一；\n- 再者将 CSS 代码放入一个 CSS 文件中便于管理、减少代码以及维护时间；\n- 当修改 CSS 文件时，所有应用此 CSS 文件的 HTML 文件都将更新，而不必从服务器上将所有的页面取回再修改完毕后上传。\n\n 4\\. 导入样式\n\n导入样式使用 @import 命令导入外部样式表。导入样式有 6 种书写方式：\n\n```\n@import daoru.css;@import 'daomxss';@import \"daoru.css\";@import url(daoru.css);@import url('daoru.css');@import url(\"daoru.css\");\n```\n\n【示例 5】导入样式表 lianjie.css 和 daoru.css 以及书写 \\<body> 标签的背景色，注意导入样式表和 \\<body> 标签样式的前后不可颠倒。\n\n```\n@import daoru.css;\n@import 'daomxss';\n@import \"daoru.css\";\n@import url(daoru.css);\n@import url('daoru.css');\n@import url(\"daoru.css\");\n```\n\n页面演示效果如下图所示。\n\n![](http://c.biancheng.net/uploads/allimg/181109/1-1Q1091640541b.gif)  \n图 5：导入样式应用\n\n在上面示例中，必须是 `@import url(\"lianjie-2.css\"); p{text-indent: 3em;}`，而不能是 `p{text-indent:3em;} @import url(\"lianjie-2.css\");`，否则将导入效果无效。在 CSS 文件中也需要将 @import 放在前面，后面加入 CSS 样式，否则也是无效。\n\nlianjie.css 文件代码，同上一个示例即链接式。\n\ndaoru.css 文件代码：\n\n```\n@import url(\"lianjie-2.css\");p { text-indent: 3em; }\n```\n\n总结:  \n![Excalidraw/贵州商学院课程看板 2022-06-21 10.11.58.excalidraw](/images/c8624fc2295d64c8b3fcc52fa48f2f1d263b696f.png)\n","source":"_posts/1.6-HTML样式CSS.md","raw":"---\ntitle: 1.6 HTML样式CSS\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 1.6 HTML样式CSS\n---\n\n**HTML 仅能呈现一些信息，表现能力非常有限，需要结合 CSS 一起使用，以使页面更加精美。**\n\nCSS 样式既可以作为单独的文件（`.css` 类型的文件）引入到 HTML 文档中，也可以直接写在 HTML 文档中，大致分为如下四种方法：\n\n- 行内样式：使用 HTML 标签的 style 属性定义 CSS 样式；\n- 内嵌样式：使用 \\\\<style\\> 标签在 HTML 文档头部（\\\\<head\\> 和 \\\\<head\\> 之间）定义 CSS 样式。\n- 链接式：使用 \\<link> 标签引入外部 CSS 样式表文件。\n- 导入式：使用 @import 命令导入外部 CSS 样式表文件。\n\n第 1 种和第 2 种方法都是将 CSS 样式写到当前 HTML 文档中，第 3 种和第 4 种方法都是将 CSS 样式放在外部文件中，然后再导入到当前 HTML 文档中。\n\n 1\\. 行内样式（内联样式）\n\n行内样式就是把 CSS 样式直接放在代码行内的标签中，一般都是放入标签的 `style` 属性中，由于行内样式直接插入标签中，故是最直接的一种方式，同时也是修改最不方便的样式。\n\n【示例 1】针对段落、\\<h2> 标签、\\<em> 标签、\\<strong>标签以及 \\<div> 标签，分别应用 CSS 行内样式。\n\n```\n<!doctype html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>行内样式</title>\n</head>\n<body>\n    <p style=\"background-color: 999900\">行内元素，控制段落-1</p>\n    <h2 style=\"background-color: FF6633\">行内元素，h2 标题元素</h2>\n    <p style=\"background-color: 999900\">行内元素，控制段落-2</p>\n    <strong style=\"font-size:30px;\">行内元素，strong 比 em 效果要强</strong>\n    <div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素</div>\n    <em style=\"font-size:2em;\">行内元素，em 强调</em>\n</body>\n</html>\n```\n\n页面演示效果如下图所示：\n\n![HTML行内样式的应用](http://c.biancheng.net/uploads/allimg/181109/1-1Q10915253S16.gif)  \n图 1：行内样式的应用\n\n在上面示例中，行内样式由 HTML 元素的 style 属性嵌入，即将 CSS 代码放入 `style=\"\"` 引号内即可，多个 CSS 属性值则通过分号 `;` 间隔。例如示例中的 \\<div> 标签：\n\n\\<div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素 \\</div>\n\n段落 \\<p> 标签设置背景色为褐色（background-color: 999900），标题 \\<h2> 标签设置背景色为红色（background-color: FF6633）。\n\n\\<strong> 标签设置字体为 30 像素（font-size:30px;），\\<div> 标签设置高度和行高为 30 像素以及进行背景色、颜色的设置（background-color:66CC99; color:993300; height:30px; line-height:30px;），\\<em> 标签设置字体大小为相对单位（font-size: 2em;）。\n\n两个段落 \\<p> 标签，虽内容不同，但使用一样的背景色设置，却添加两次 CSS 行内属性设置背景色 background-color: 999900。\n\n行内元素虽然编写简单，但通过示例可以发现存在以下缺陷：\n\n- 每一个标签要设置样式都需要添加 style 属性。\n- 与过去网页制作者将 HTML 的标签和样式糅杂在一起的效果不同的是，现在是通过 CSS 编写行内样式，过去釆用的是 HTML 标签属性实现的样式效果。虽方式不同，但导致的后果是一样的：后期维护成本高，即当修改页面时需要逐个打开网站每个页面一一修改，根本看不到 CSS 所起到的作用。\n- 添加如此多的行内样式，页面体积大，门户网站若釆用这种方式编写，那将浪费服务器带宽和流量。\n\n网络上有些网页通过查看源文件可以看到这种编写方式，虽然一个网页只有一部分是如此做的，但需要分情况：\n\n- 若网页制作者编写这样的行内样式，可以快速更改当前样式，不必考虑以前编写的样式冲突问题；\n- 网页中若存在这种情况则是后台编辑时，通过编辑器生成的样式，或后台未开发完整，需为编辑人员开发可选择样式的选项而非通过编辑器直接改变颜色、粗细、背景色、倾斜等效果。\n\n 2\\. 内嵌样式\n\n内嵌样式通过将 CSS 写在网页源文件的头部，即在 \\<head> 和 \\<head> 之间，通过使用 HTML 标签中的 \\<style> 标签将其包围，其特点是该样式只能在此页使用，解决行内样式多次书写的弊端。\n\n【示例 2】为段落设置内嵌式样式书写方法，减少代码量。\n\n```\n<!doctype html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>行内样式</title>\n</head>\n<body>\n    <p style=\"background-color: 999900\">行内元素，控制段落-1</p>\n    <h2 style=\"background-color: FF6633\">行内元素，h2 标题元素</h2>\n    <p style=\"background-color: 999900\">行内元素，控制段落-2</p>\n    <strong style=\"font-size:30px;\">行内元素，strong 比 em 效果要强</strong>\n    <div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素</div>\n    <em style=\"font-size:2em;\">行内元素，em 强调</em>\n</body>\n</html>\n```\n\n页面演示效果如下图所示：\n\n![HTML内嵌样式的使用](http://c.biancheng.net/uploads/allimg/181109/1-1Q10915435Q30.gif)  \n图 2：内嵌样式的应用\n\n在上面示例中，段落进行如下设置：文本左对齐、字体为 14 号、行高 25 像素、宽度 500 像素、下边距 20 像素、浏览器下居中、首行缩进两个文字大小空间。首行缩进使用相对单位，此设置的作用是当字体大小改变时（如 `font-size: 18px;`）依然能够实现缩进两个文字大小空间。\n\n行内样式带来了样式修改的不方便，例如上个示例中两个段落都使用同样的样式，但需要编写两遍；而使用内嵌式样式后，就可以将所有的段落样式放在一起。\n\nstyle 不仅可定义 CSS 样式，还可以定义 [JavaScript](http://c.biancheng.net/js/) 脚本，故使用 style 时需要注意。当 style 的 type 值为 `text/css` 时，内部编写 CSS 样式；若 style 的 type 值为 `text/javascript` 时，内部编写 [Java](http://c.biancheng.net/java/)Script 脚本。\n\n style 标签的 title 属性\n\nstyle 中有一个比较特殊的属性 title，使用 title 可以为不同的样式设置一个标题，浏览者就可以根据标题选择不同的样式达到浏览器中切换的效果，但 IE 浏览器不支持，Firefox 浏览器支持此效果。\n\n【示例 3】分别为火狐浏览器设置两种字体大小样式，通过火狐“查看”菜单进行修改。\n\n```\n<!doctype html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>行内样式</title>\n</head>\n<body>\n    <p style=\"background-color: 999900\">行内元素，控制段落-1</p>\n    <h2 style=\"background-color: FF6633\">行内元素，h2 标题元素</h2>\n    <p style=\"background-color: 999900\">行内元素，控制段落-2</p>\n    <strong style=\"font-size:30px;\">行内元素，strong 比 em 效果要强</strong>\n    <div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素</div>\n    <em style=\"font-size:2em;\">行内元素，em 强调</em>\n</body>\n</html>\n```\n\n页面演示效果如下图所示。\n\n![](http://c.biancheng.net/uploads/allimg/181109/1-1Q109161042339.gif)  \n图 3：火狐浏览器内嵌式更换样式\n\n在上面不例中，通过 `\\<style type=\"text/css\" title=\"名称\">` 定义了两种字体大小，通过火狐浏览器“查看”菜单下的“页面样式”子菜单中有两个选项：字体 14 号、字体 18 号，默认情况下显示的是第一次书写的 `\\<style type=\"text/css\" title=\"名称\">`，通过菜单可以改变该页面样式。\n\n 3\\. 链接式\n\n链接式通过 HTML 的 \\<link> 标签，将外部样式表文件链接到 HTML 文档中，这也是网络上网站应用最多的方式，同时也是最实用的方式。这种方法将 HTML 文档和 CSS 文件完全分离，实现结构层和表示层的彻底分离，增强网页结构的扩展性和 CSS 样式的可维护性。\n\n【示例 4】使用链接式为 HTML 代码应用样式，书写、更改方便。\n\n```\n<!doctype html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>行内样式</title>\n</head>\n<body>\n    <p style=\"background-color: 999900\">行内元素，控制段落-1</p>\n    <h2 style=\"background-color: FF6633\">行内元素，h2 标题元素</h2>\n    <p style=\"background-color: 999900\">行内元素，控制段落-2</p>\n    <strong style=\"font-size:30px;\">行内元素，strong 比 em 效果要强</strong>\n    <div style=\"background-color:66CC99; color:993300; height:30px; line-height:30px;\">行内元素，div 块级元素</div>\n    <em style=\"font-size:2em;\">行内元素，em 强调</em>\n</body>\n</html>\n```\n\n页面演示效果如下图所示：\n\n![HTML链接式嵌入CSS样式](http://c.biancheng.net/uploads/allimg/181109/1-1Q1091626121A.gif)  \n图 4：链接式的应用\n\n在上面示例中，通过 link 链接两个 CSS 文件，且都有效，这也是网站制作者将公共部分放入一个 CSS 文件，当前页面样式编写新的样式文件。\n\nlianjie.css 文件代码：\n\n```\nh3{\n    font-weight: normal;  /*取消标题默认加粗效果*/\n    background-color: 66CC99;  /* 设置背景色 */\n    height: 50px;  /*设置标签的高度*/\n    line-height:50px;  /* 设置标签的行高 */\n}\nspan{\n    color: FFOOOO;  /* 字体颜色 */\n    font-weight:bold;  /* 字体加粗 */\n}\n```\n\nlianjie-2.css 文件代码：\n\n```\np{\n    color: FF3333;  /*字体颜色设置*/\n    font-weight: bold;  /* 字体加粗 */\n    border-bottom: 3px dashed 009933;  /* 设置下边框线 */\n    line-height: 30px;  /* 设置行高 */\n}\n```\n\n链接式样式使 CSS 代码和 HTML 代码完全分离，达到结构与样式的分开，使 HTML 代码专门构建页面结构，而美化工作由 CSS 完成。\n\n链接式导入 CSS 样式的好处：\n\n- CSS 文件可以放在不同的 HTML 文件中，使网站所有页面样式统一；\n- 再者将 CSS 代码放入一个 CSS 文件中便于管理、减少代码以及维护时间；\n- 当修改 CSS 文件时，所有应用此 CSS 文件的 HTML 文件都将更新，而不必从服务器上将所有的页面取回再修改完毕后上传。\n\n 4\\. 导入样式\n\n导入样式使用 @import 命令导入外部样式表。导入样式有 6 种书写方式：\n\n```\n@import daoru.css;@import 'daomxss';@import \"daoru.css\";@import url(daoru.css);@import url('daoru.css');@import url(\"daoru.css\");\n```\n\n【示例 5】导入样式表 lianjie.css 和 daoru.css 以及书写 \\<body> 标签的背景色，注意导入样式表和 \\<body> 标签样式的前后不可颠倒。\n\n```\n@import daoru.css;\n@import 'daomxss';\n@import \"daoru.css\";\n@import url(daoru.css);\n@import url('daoru.css');\n@import url(\"daoru.css\");\n```\n\n页面演示效果如下图所示。\n\n![](http://c.biancheng.net/uploads/allimg/181109/1-1Q1091640541b.gif)  \n图 5：导入样式应用\n\n在上面示例中，必须是 `@import url(\"lianjie-2.css\"); p{text-indent: 3em;}`，而不能是 `p{text-indent:3em;} @import url(\"lianjie-2.css\");`，否则将导入效果无效。在 CSS 文件中也需要将 @import 放在前面，后面加入 CSS 样式，否则也是无效。\n\nlianjie.css 文件代码，同上一个示例即链接式。\n\ndaoru.css 文件代码：\n\n```\n@import url(\"lianjie-2.css\");p { text-indent: 3em; }\n```\n\n总结:  \n![Excalidraw/贵州商学院课程看板 2022-06-21 10.11.58.excalidraw](/images/c8624fc2295d64c8b3fcc52fa48f2f1d263b696f.png)\n","slug":"1.6-HTML样式CSS","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709q001l4cv92ekhb9y8","content":"<p><strong>HTML 仅能呈现一些信息，表现能力非常有限，需要结合 CSS 一起使用，以使页面更加精美。</strong></p>\n<p>CSS 样式既可以作为单独的文件（<code>.css</code> 类型的文件）引入到 HTML 文档中，也可以直接写在 HTML 文档中，大致分为如下四种方法：</p>\n<ul>\n<li>行内样式：使用 HTML 标签的 style 属性定义 CSS 样式；</li>\n<li>内嵌样式：使用 \\&lt;style&gt; 标签在 HTML 文档头部（\\&lt;head&gt; 和 \\&lt;head&gt; 之间）定义 CSS 样式。</li>\n<li>链接式：使用 &lt;link&gt; 标签引入外部 CSS 样式表文件。</li>\n<li>导入式：使用 @import 命令导入外部 CSS 样式表文件。</li>\n</ul>\n<p>第 1 种和第 2 种方法都是将 CSS 样式写到当前 HTML 文档中，第 3 种和第 4 种方法都是将 CSS 样式放在外部文件中，然后再导入到当前 HTML 文档中。</p>\n<p>1. 行内样式（内联样式）</p>\n<p>行内样式就是把 CSS 样式直接放在代码行内的标签中，一般都是放入标签的 <code>style</code> 属性中，由于行内样式直接插入标签中，故是最直接的一种方式，同时也是修改最不方便的样式。</p>\n<p>【示例 1】针对段落、&lt;h2&gt; 标签、&lt;em&gt; 标签、&lt;strong&gt;标签以及 &lt;div&gt; 标签，分别应用 CSS 行内样式。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;行内样式&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-1&lt;/p&gt;</span><br><span class=\"line\">    &lt;h2 style=&quot;background-color: FF6633&quot;&gt;行内元素，h2 标题元素&lt;/h2&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-2&lt;/p&gt;</span><br><span class=\"line\">    &lt;strong style=&quot;font-size:30px;&quot;&gt;行内元素，strong 比 em 效果要强&lt;/strong&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background-color:66CC99; color:993300; height:30px; line-height:30px;&quot;&gt;行内元素，div 块级元素&lt;/div&gt;</span><br><span class=\"line\">    &lt;em style=&quot;font-size:2em;&quot;&gt;行内元素，em 强调&lt;/em&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q10915253S16.gif\" alt=\"HTML行内样式的应用\"><br>\n图 1：行内样式的应用</p>\n<p>在上面示例中，行内样式由 HTML 元素的 style 属性嵌入，即将 CSS 代码放入 <code>style=&quot;&quot;</code> 引号内即可，多个 CSS 属性值则通过分号 <code>;</code> 间隔。例如示例中的 &lt;div&gt; 标签：</p>\n<p>&lt;div style=“background-color:66CC99; color:993300; height:30px; line-height:30px;”&gt;行内元素，div 块级元素 &lt;/div&gt;</p>\n<p>段落 &lt;p&gt; 标签设置背景色为褐色（background-color: 999900），标题 &lt;h2&gt; 标签设置背景色为红色（background-color: FF6633）。</p>\n<p>&lt;strong&gt; 标签设置字体为 30 像素（font-size:30px;），&lt;div&gt; 标签设置高度和行高为 30 像素以及进行背景色、颜色的设置（background-color:66CC99; color:993300; height:30px; line-height:30px;），&lt;em&gt; 标签设置字体大小为相对单位（font-size: 2em;）。</p>\n<p>两个段落 &lt;p&gt; 标签，虽内容不同，但使用一样的背景色设置，却添加两次 CSS 行内属性设置背景色 background-color: 999900。</p>\n<p>行内元素虽然编写简单，但通过示例可以发现存在以下缺陷：</p>\n<ul>\n<li>每一个标签要设置样式都需要添加 style 属性。</li>\n<li>与过去网页制作者将 HTML 的标签和样式糅杂在一起的效果不同的是，现在是通过 CSS 编写行内样式，过去釆用的是 HTML 标签属性实现的样式效果。虽方式不同，但导致的后果是一样的：后期维护成本高，即当修改页面时需要逐个打开网站每个页面一一修改，根本看不到 CSS 所起到的作用。</li>\n<li>添加如此多的行内样式，页面体积大，门户网站若釆用这种方式编写，那将浪费服务器带宽和流量。</li>\n</ul>\n<p>网络上有些网页通过查看源文件可以看到这种编写方式，虽然一个网页只有一部分是如此做的，但需要分情况：</p>\n<ul>\n<li>若网页制作者编写这样的行内样式，可以快速更改当前样式，不必考虑以前编写的样式冲突问题；</li>\n<li>网页中若存在这种情况则是后台编辑时，通过编辑器生成的样式，或后台未开发完整，需为编辑人员开发可选择样式的选项而非通过编辑器直接改变颜色、粗细、背景色、倾斜等效果。</li>\n</ul>\n<p>2. 内嵌样式</p>\n<p>内嵌样式通过将 CSS 写在网页源文件的头部，即在 &lt;head&gt; 和 &lt;head&gt; 之间，通过使用 HTML 标签中的 &lt;style&gt; 标签将其包围，其特点是该样式只能在此页使用，解决行内样式多次书写的弊端。</p>\n<p>【示例 2】为段落设置内嵌式样式书写方法，减少代码量。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;行内样式&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-1&lt;/p&gt;</span><br><span class=\"line\">    &lt;h2 style=&quot;background-color: FF6633&quot;&gt;行内元素，h2 标题元素&lt;/h2&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-2&lt;/p&gt;</span><br><span class=\"line\">    &lt;strong style=&quot;font-size:30px;&quot;&gt;行内元素，strong 比 em 效果要强&lt;/strong&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background-color:66CC99; color:993300; height:30px; line-height:30px;&quot;&gt;行内元素，div 块级元素&lt;/div&gt;</span><br><span class=\"line\">    &lt;em style=&quot;font-size:2em;&quot;&gt;行内元素，em 强调&lt;/em&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q10915435Q30.gif\" alt=\"HTML内嵌样式的使用\"><br>\n图 2：内嵌样式的应用</p>\n<p>在上面示例中，段落进行如下设置：文本左对齐、字体为 14 号、行高 25 像素、宽度 500 像素、下边距 20 像素、浏览器下居中、首行缩进两个文字大小空间。首行缩进使用相对单位，此设置的作用是当字体大小改变时（如 <code>font-size: 18px;</code>）依然能够实现缩进两个文字大小空间。</p>\n<p>行内样式带来了样式修改的不方便，例如上个示例中两个段落都使用同样的样式，但需要编写两遍；而使用内嵌式样式后，就可以将所有的段落样式放在一起。</p>\n<p>style 不仅可定义 CSS 样式，还可以定义 <a href=\"http://c.biancheng.net/js/\">JavaScript</a> 脚本，故使用 style 时需要注意。当 style 的 type 值为 <code>text/css</code> 时，内部编写 CSS 样式；若 style 的 type 值为 <code>text/javascript</code> 时，内部编写 <a href=\"http://c.biancheng.net/java/\">Java</a>Script 脚本。</p>\n<p>style 标签的 title 属性</p>\n<p>style 中有一个比较特殊的属性 title，使用 title 可以为不同的样式设置一个标题，浏览者就可以根据标题选择不同的样式达到浏览器中切换的效果，但 IE 浏览器不支持，Firefox 浏览器支持此效果。</p>\n<p>【示例 3】分别为火狐浏览器设置两种字体大小样式，通过火狐“查看”菜单进行修改。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;行内样式&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-1&lt;/p&gt;</span><br><span class=\"line\">    &lt;h2 style=&quot;background-color: FF6633&quot;&gt;行内元素，h2 标题元素&lt;/h2&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-2&lt;/p&gt;</span><br><span class=\"line\">    &lt;strong style=&quot;font-size:30px;&quot;&gt;行内元素，strong 比 em 效果要强&lt;/strong&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background-color:66CC99; color:993300; height:30px; line-height:30px;&quot;&gt;行内元素，div 块级元素&lt;/div&gt;</span><br><span class=\"line\">    &lt;em style=&quot;font-size:2em;&quot;&gt;行内元素，em 强调&lt;/em&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示。</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q109161042339.gif\" alt=\"\"><br>\n图 3：火狐浏览器内嵌式更换样式</p>\n<p>在上面不例中，通过 <code>\\&lt;style type=&quot;text/css&quot; title=&quot;名称&quot;&gt;</code> 定义了两种字体大小，通过火狐浏览器“查看”菜单下的“页面样式”子菜单中有两个选项：字体 14 号、字体 18 号，默认情况下显示的是第一次书写的 <code>\\&lt;style type=&quot;text/css&quot; title=&quot;名称&quot;&gt;</code>，通过菜单可以改变该页面样式。</p>\n<p>3. 链接式</p>\n<p>链接式通过 HTML 的 &lt;link&gt; 标签，将外部样式表文件链接到 HTML 文档中，这也是网络上网站应用最多的方式，同时也是最实用的方式。这种方法将 HTML 文档和 CSS 文件完全分离，实现结构层和表示层的彻底分离，增强网页结构的扩展性和 CSS 样式的可维护性。</p>\n<p>【示例 4】使用链接式为 HTML 代码应用样式，书写、更改方便。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;行内样式&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-1&lt;/p&gt;</span><br><span class=\"line\">    &lt;h2 style=&quot;background-color: FF6633&quot;&gt;行内元素，h2 标题元素&lt;/h2&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-2&lt;/p&gt;</span><br><span class=\"line\">    &lt;strong style=&quot;font-size:30px;&quot;&gt;行内元素，strong 比 em 效果要强&lt;/strong&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background-color:66CC99; color:993300; height:30px; line-height:30px;&quot;&gt;行内元素，div 块级元素&lt;/div&gt;</span><br><span class=\"line\">    &lt;em style=&quot;font-size:2em;&quot;&gt;行内元素，em 强调&lt;/em&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q1091626121A.gif\" alt=\"HTML链接式嵌入CSS样式\"><br>\n图 4：链接式的应用</p>\n<p>在上面示例中，通过 link 链接两个 CSS 文件，且都有效，这也是网站制作者将公共部分放入一个 CSS 文件，当前页面样式编写新的样式文件。</p>\n<p>lianjie.css 文件代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h3&#123;</span><br><span class=\"line\">    font-weight: normal;  /*取消标题默认加粗效果*/</span><br><span class=\"line\">    background-color: 66CC99;  /* 设置背景色 */</span><br><span class=\"line\">    height: 50px;  /*设置标签的高度*/</span><br><span class=\"line\">    line-height:50px;  /* 设置标签的行高 */</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">span&#123;</span><br><span class=\"line\">    color: FFOOOO;  /* 字体颜色 */</span><br><span class=\"line\">    font-weight:bold;  /* 字体加粗 */</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>lianjie-2.css 文件代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">p&#123;</span><br><span class=\"line\">    color: FF3333;  /*字体颜色设置*/</span><br><span class=\"line\">    font-weight: bold;  /* 字体加粗 */</span><br><span class=\"line\">    border-bottom: 3px dashed 009933;  /* 设置下边框线 */</span><br><span class=\"line\">    line-height: 30px;  /* 设置行高 */</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>链接式样式使 CSS 代码和 HTML 代码完全分离，达到结构与样式的分开，使 HTML 代码专门构建页面结构，而美化工作由 CSS 完成。</p>\n<p>链接式导入 CSS 样式的好处：</p>\n<ul>\n<li>CSS 文件可以放在不同的 HTML 文件中，使网站所有页面样式统一；</li>\n<li>再者将 CSS 代码放入一个 CSS 文件中便于管理、减少代码以及维护时间；</li>\n<li>当修改 CSS 文件时，所有应用此 CSS 文件的 HTML 文件都将更新，而不必从服务器上将所有的页面取回再修改完毕后上传。</li>\n</ul>\n<p>4. 导入样式</p>\n<p>导入样式使用 @import 命令导入外部样式表。导入样式有 6 种书写方式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@import daoru.css;@import &#x27;daomxss&#x27;;@import &quot;daoru.css&quot;;@import url(daoru.css);@import url(&#x27;daoru.css&#x27;);@import url(&quot;daoru.css&quot;);</span><br></pre></td></tr></table></figure>\n<p>【示例 5】导入样式表 lianjie.css 和 daoru.css 以及书写 &lt;body&gt; 标签的背景色，注意导入样式表和 &lt;body&gt; 标签样式的前后不可颠倒。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@import daoru.css;</span><br><span class=\"line\">@import &#x27;daomxss&#x27;;</span><br><span class=\"line\">@import &quot;daoru.css&quot;;</span><br><span class=\"line\">@import url(daoru.css);</span><br><span class=\"line\">@import url(&#x27;daoru.css&#x27;);</span><br><span class=\"line\">@import url(&quot;daoru.css&quot;);</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示。</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q1091640541b.gif\" alt=\"\"><br>\n图 5：导入样式应用</p>\n<p>在上面示例中，必须是 <code>@import url(&quot;lianjie-2.css&quot;); p&#123;text-indent: 3em;&#125;</code>，而不能是 <code>p&#123;text-indent:3em;&#125; @import url(&quot;lianjie-2.css&quot;);</code>，否则将导入效果无效。在 CSS 文件中也需要将 @import 放在前面，后面加入 CSS 样式，否则也是无效。</p>\n<p>lianjie.css 文件代码，同上一个示例即链接式。</p>\n<p>daoru.css 文件代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@import url(&quot;lianjie-2.css&quot;);p &#123; text-indent: 3em; &#125;</span><br></pre></td></tr></table></figure>\n<p>总结:<br>\n<img src=\"/images/c8624fc2295d64c8b3fcc52fa48f2f1d263b696f.png\" alt=\"Excalidraw/贵州商学院课程看板 2022-06-21 10.11.58.excalidraw\"></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover2.jpg","excerpt":"","more":"<p><strong>HTML 仅能呈现一些信息，表现能力非常有限，需要结合 CSS 一起使用，以使页面更加精美。</strong></p>\n<p>CSS 样式既可以作为单独的文件（<code>.css</code> 类型的文件）引入到 HTML 文档中，也可以直接写在 HTML 文档中，大致分为如下四种方法：</p>\n<ul>\n<li>行内样式：使用 HTML 标签的 style 属性定义 CSS 样式；</li>\n<li>内嵌样式：使用 \\&lt;style&gt; 标签在 HTML 文档头部（\\&lt;head&gt; 和 \\&lt;head&gt; 之间）定义 CSS 样式。</li>\n<li>链接式：使用 &lt;link&gt; 标签引入外部 CSS 样式表文件。</li>\n<li>导入式：使用 @import 命令导入外部 CSS 样式表文件。</li>\n</ul>\n<p>第 1 种和第 2 种方法都是将 CSS 样式写到当前 HTML 文档中，第 3 种和第 4 种方法都是将 CSS 样式放在外部文件中，然后再导入到当前 HTML 文档中。</p>\n<p>1. 行内样式（内联样式）</p>\n<p>行内样式就是把 CSS 样式直接放在代码行内的标签中，一般都是放入标签的 <code>style</code> 属性中，由于行内样式直接插入标签中，故是最直接的一种方式，同时也是修改最不方便的样式。</p>\n<p>【示例 1】针对段落、&lt;h2&gt; 标签、&lt;em&gt; 标签、&lt;strong&gt;标签以及 &lt;div&gt; 标签，分别应用 CSS 行内样式。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;行内样式&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-1&lt;/p&gt;</span><br><span class=\"line\">    &lt;h2 style=&quot;background-color: FF6633&quot;&gt;行内元素，h2 标题元素&lt;/h2&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-2&lt;/p&gt;</span><br><span class=\"line\">    &lt;strong style=&quot;font-size:30px;&quot;&gt;行内元素，strong 比 em 效果要强&lt;/strong&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background-color:66CC99; color:993300; height:30px; line-height:30px;&quot;&gt;行内元素，div 块级元素&lt;/div&gt;</span><br><span class=\"line\">    &lt;em style=&quot;font-size:2em;&quot;&gt;行内元素，em 强调&lt;/em&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q10915253S16.gif\" alt=\"HTML行内样式的应用\"><br>\n图 1：行内样式的应用</p>\n<p>在上面示例中，行内样式由 HTML 元素的 style 属性嵌入，即将 CSS 代码放入 <code>style=&quot;&quot;</code> 引号内即可，多个 CSS 属性值则通过分号 <code>;</code> 间隔。例如示例中的 &lt;div&gt; 标签：</p>\n<p>&lt;div style=“background-color:66CC99; color:993300; height:30px; line-height:30px;”&gt;行内元素，div 块级元素 &lt;/div&gt;</p>\n<p>段落 &lt;p&gt; 标签设置背景色为褐色（background-color: 999900），标题 &lt;h2&gt; 标签设置背景色为红色（background-color: FF6633）。</p>\n<p>&lt;strong&gt; 标签设置字体为 30 像素（font-size:30px;），&lt;div&gt; 标签设置高度和行高为 30 像素以及进行背景色、颜色的设置（background-color:66CC99; color:993300; height:30px; line-height:30px;），&lt;em&gt; 标签设置字体大小为相对单位（font-size: 2em;）。</p>\n<p>两个段落 &lt;p&gt; 标签，虽内容不同，但使用一样的背景色设置，却添加两次 CSS 行内属性设置背景色 background-color: 999900。</p>\n<p>行内元素虽然编写简单，但通过示例可以发现存在以下缺陷：</p>\n<ul>\n<li>每一个标签要设置样式都需要添加 style 属性。</li>\n<li>与过去网页制作者将 HTML 的标签和样式糅杂在一起的效果不同的是，现在是通过 CSS 编写行内样式，过去釆用的是 HTML 标签属性实现的样式效果。虽方式不同，但导致的后果是一样的：后期维护成本高，即当修改页面时需要逐个打开网站每个页面一一修改，根本看不到 CSS 所起到的作用。</li>\n<li>添加如此多的行内样式，页面体积大，门户网站若釆用这种方式编写，那将浪费服务器带宽和流量。</li>\n</ul>\n<p>网络上有些网页通过查看源文件可以看到这种编写方式，虽然一个网页只有一部分是如此做的，但需要分情况：</p>\n<ul>\n<li>若网页制作者编写这样的行内样式，可以快速更改当前样式，不必考虑以前编写的样式冲突问题；</li>\n<li>网页中若存在这种情况则是后台编辑时，通过编辑器生成的样式，或后台未开发完整，需为编辑人员开发可选择样式的选项而非通过编辑器直接改变颜色、粗细、背景色、倾斜等效果。</li>\n</ul>\n<p>2. 内嵌样式</p>\n<p>内嵌样式通过将 CSS 写在网页源文件的头部，即在 &lt;head&gt; 和 &lt;head&gt; 之间，通过使用 HTML 标签中的 &lt;style&gt; 标签将其包围，其特点是该样式只能在此页使用，解决行内样式多次书写的弊端。</p>\n<p>【示例 2】为段落设置内嵌式样式书写方法，减少代码量。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;行内样式&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-1&lt;/p&gt;</span><br><span class=\"line\">    &lt;h2 style=&quot;background-color: FF6633&quot;&gt;行内元素，h2 标题元素&lt;/h2&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-2&lt;/p&gt;</span><br><span class=\"line\">    &lt;strong style=&quot;font-size:30px;&quot;&gt;行内元素，strong 比 em 效果要强&lt;/strong&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background-color:66CC99; color:993300; height:30px; line-height:30px;&quot;&gt;行内元素，div 块级元素&lt;/div&gt;</span><br><span class=\"line\">    &lt;em style=&quot;font-size:2em;&quot;&gt;行内元素，em 强调&lt;/em&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q10915435Q30.gif\" alt=\"HTML内嵌样式的使用\"><br>\n图 2：内嵌样式的应用</p>\n<p>在上面示例中，段落进行如下设置：文本左对齐、字体为 14 号、行高 25 像素、宽度 500 像素、下边距 20 像素、浏览器下居中、首行缩进两个文字大小空间。首行缩进使用相对单位，此设置的作用是当字体大小改变时（如 <code>font-size: 18px;</code>）依然能够实现缩进两个文字大小空间。</p>\n<p>行内样式带来了样式修改的不方便，例如上个示例中两个段落都使用同样的样式，但需要编写两遍；而使用内嵌式样式后，就可以将所有的段落样式放在一起。</p>\n<p>style 不仅可定义 CSS 样式，还可以定义 <a href=\"http://c.biancheng.net/js/\">JavaScript</a> 脚本，故使用 style 时需要注意。当 style 的 type 值为 <code>text/css</code> 时，内部编写 CSS 样式；若 style 的 type 值为 <code>text/javascript</code> 时，内部编写 <a href=\"http://c.biancheng.net/java/\">Java</a>Script 脚本。</p>\n<p>style 标签的 title 属性</p>\n<p>style 中有一个比较特殊的属性 title，使用 title 可以为不同的样式设置一个标题，浏览者就可以根据标题选择不同的样式达到浏览器中切换的效果，但 IE 浏览器不支持，Firefox 浏览器支持此效果。</p>\n<p>【示例 3】分别为火狐浏览器设置两种字体大小样式，通过火狐“查看”菜单进行修改。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;行内样式&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-1&lt;/p&gt;</span><br><span class=\"line\">    &lt;h2 style=&quot;background-color: FF6633&quot;&gt;行内元素，h2 标题元素&lt;/h2&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-2&lt;/p&gt;</span><br><span class=\"line\">    &lt;strong style=&quot;font-size:30px;&quot;&gt;行内元素，strong 比 em 效果要强&lt;/strong&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background-color:66CC99; color:993300; height:30px; line-height:30px;&quot;&gt;行内元素，div 块级元素&lt;/div&gt;</span><br><span class=\"line\">    &lt;em style=&quot;font-size:2em;&quot;&gt;行内元素，em 强调&lt;/em&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示。</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q109161042339.gif\" alt=\"\"><br>\n图 3：火狐浏览器内嵌式更换样式</p>\n<p>在上面不例中，通过 <code>\\&lt;style type=&quot;text/css&quot; title=&quot;名称&quot;&gt;</code> 定义了两种字体大小，通过火狐浏览器“查看”菜单下的“页面样式”子菜单中有两个选项：字体 14 号、字体 18 号，默认情况下显示的是第一次书写的 <code>\\&lt;style type=&quot;text/css&quot; title=&quot;名称&quot;&gt;</code>，通过菜单可以改变该页面样式。</p>\n<p>3. 链接式</p>\n<p>链接式通过 HTML 的 &lt;link&gt; 标签，将外部样式表文件链接到 HTML 文档中，这也是网络上网站应用最多的方式，同时也是最实用的方式。这种方法将 HTML 文档和 CSS 文件完全分离，实现结构层和表示层的彻底分离，增强网页结构的扩展性和 CSS 样式的可维护性。</p>\n<p>【示例 4】使用链接式为 HTML 代码应用样式，书写、更改方便。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!doctype html&gt;</span><br><span class=\"line\">&lt;html&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">&lt;title&gt;行内样式&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-1&lt;/p&gt;</span><br><span class=\"line\">    &lt;h2 style=&quot;background-color: FF6633&quot;&gt;行内元素，h2 标题元素&lt;/h2&gt;</span><br><span class=\"line\">    &lt;p style=&quot;background-color: 999900&quot;&gt;行内元素，控制段落-2&lt;/p&gt;</span><br><span class=\"line\">    &lt;strong style=&quot;font-size:30px;&quot;&gt;行内元素，strong 比 em 效果要强&lt;/strong&gt;</span><br><span class=\"line\">    &lt;div style=&quot;background-color:66CC99; color:993300; height:30px; line-height:30px;&quot;&gt;行内元素，div 块级元素&lt;/div&gt;</span><br><span class=\"line\">    &lt;em style=&quot;font-size:2em;&quot;&gt;行内元素，em 强调&lt;/em&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示：</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q1091626121A.gif\" alt=\"HTML链接式嵌入CSS样式\"><br>\n图 4：链接式的应用</p>\n<p>在上面示例中，通过 link 链接两个 CSS 文件，且都有效，这也是网站制作者将公共部分放入一个 CSS 文件，当前页面样式编写新的样式文件。</p>\n<p>lianjie.css 文件代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">h3&#123;</span><br><span class=\"line\">    font-weight: normal;  /*取消标题默认加粗效果*/</span><br><span class=\"line\">    background-color: 66CC99;  /* 设置背景色 */</span><br><span class=\"line\">    height: 50px;  /*设置标签的高度*/</span><br><span class=\"line\">    line-height:50px;  /* 设置标签的行高 */</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">span&#123;</span><br><span class=\"line\">    color: FFOOOO;  /* 字体颜色 */</span><br><span class=\"line\">    font-weight:bold;  /* 字体加粗 */</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>lianjie-2.css 文件代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">p&#123;</span><br><span class=\"line\">    color: FF3333;  /*字体颜色设置*/</span><br><span class=\"line\">    font-weight: bold;  /* 字体加粗 */</span><br><span class=\"line\">    border-bottom: 3px dashed 009933;  /* 设置下边框线 */</span><br><span class=\"line\">    line-height: 30px;  /* 设置行高 */</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>链接式样式使 CSS 代码和 HTML 代码完全分离，达到结构与样式的分开，使 HTML 代码专门构建页面结构，而美化工作由 CSS 完成。</p>\n<p>链接式导入 CSS 样式的好处：</p>\n<ul>\n<li>CSS 文件可以放在不同的 HTML 文件中，使网站所有页面样式统一；</li>\n<li>再者将 CSS 代码放入一个 CSS 文件中便于管理、减少代码以及维护时间；</li>\n<li>当修改 CSS 文件时，所有应用此 CSS 文件的 HTML 文件都将更新，而不必从服务器上将所有的页面取回再修改完毕后上传。</li>\n</ul>\n<p>4. 导入样式</p>\n<p>导入样式使用 @import 命令导入外部样式表。导入样式有 6 种书写方式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@import daoru.css;@import &#x27;daomxss&#x27;;@import &quot;daoru.css&quot;;@import url(daoru.css);@import url(&#x27;daoru.css&#x27;);@import url(&quot;daoru.css&quot;);</span><br></pre></td></tr></table></figure>\n<p>【示例 5】导入样式表 lianjie.css 和 daoru.css 以及书写 &lt;body&gt; 标签的背景色，注意导入样式表和 &lt;body&gt; 标签样式的前后不可颠倒。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@import daoru.css;</span><br><span class=\"line\">@import &#x27;daomxss&#x27;;</span><br><span class=\"line\">@import &quot;daoru.css&quot;;</span><br><span class=\"line\">@import url(daoru.css);</span><br><span class=\"line\">@import url(&#x27;daoru.css&#x27;);</span><br><span class=\"line\">@import url(&quot;daoru.css&quot;);</span><br></pre></td></tr></table></figure>\n<p>页面演示效果如下图所示。</p>\n<p><img src=\"http://c.biancheng.net/uploads/allimg/181109/1-1Q1091640541b.gif\" alt=\"\"><br>\n图 5：导入样式应用</p>\n<p>在上面示例中，必须是 <code>@import url(&quot;lianjie-2.css&quot;); p&#123;text-indent: 3em;&#125;</code>，而不能是 <code>p&#123;text-indent:3em;&#125; @import url(&quot;lianjie-2.css&quot;);</code>，否则将导入效果无效。在 CSS 文件中也需要将 @import 放在前面，后面加入 CSS 样式，否则也是无效。</p>\n<p>lianjie.css 文件代码，同上一个示例即链接式。</p>\n<p>daoru.css 文件代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@import url(&quot;lianjie-2.css&quot;);p &#123; text-indent: 3em; &#125;</span><br></pre></td></tr></table></figure>\n<p>总结:<br>\n<img src=\"/images/c8624fc2295d64c8b3fcc52fa48f2f1d263b696f.png\" alt=\"Excalidraw/贵州商学院课程看板 2022-06-21 10.11.58.excalidraw\"></p>\n"},{"title":"2022-12-17 实验设计","share":true,"date":"2022-12-17T00:51:54.000Z","updated":"2022-12-29T01:27:51.000Z","_content":"\n## 实验场景/方法/目标\n\n==背景== 在 <u>时间序列异常检测算法的超参数优化任务</u>中，==方法== 1) 我们在 COCA [^5] 的超参数空间中, 使用随机抽样 (Random Sampling, RS) 抽取 32 组超参数 $HP_{i,}i \\in \\{1,2,\\dots,32 \\}$, 随后 2) 在 AIOps [^1] 的 4 个异常率不同的 KPI 中, 使用 RS 在训练集抽取不同比例 $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}$ 的子集来训练 COCA , ==目标== 期望以更短的时间，能获得一个精度相似的模型。\n\n## 实验设计\n\n本章介绍实验的 1) 硬件环境, 2) 算法及其超参数, 3) 所使用的数据集, 4) 训练集的处理, 5) 性能评估指标, 6) 结果分析.\n\n### 实验硬件环境\n\n本实验的硬件环境如下表所示:\n\n| 项目 | 值                         | 数量 |\n| ---- | -------------------------- | ---- |\n| CPU  | Intel(R) Xeon(R) Gold 5220 | 1    |\n| OS   | Ubuntu  16.04              |      |\n| GPU  | RTX 2080 TI                | 4     |\n\n### 数据集选择及处理\n\n实验所用的数据集来源于 AIOps [^1] , AIOps 中包含了 29 个类型不同的 KPI (Key Performance Indictor). 本文按照 **异常率高中低** 的标准, 从中选择 4 个不同 KPI, 4 个 KPI 的统计信息如下表: (<u>为了简化表示表示, 下文中将使用 KPI ID 的前 8 个字母表示该 KPI, 例如, 下文将使用 `a07ac296` 表示数据集 `a07ac296-de40-3a7c-8df3-91f642cc14d0`</u>)\n\n| KPI ID                               | \\#points |\\#anomaly points | anomaly rate(%) |\n|--------------------------------------|---------|-----------------|-----------------|\n| a07ac296-de40-3a7c-8df3-91f642cc14d0 | 217782  | 7922            | 3.64            |\n| 6efa3a07-4544-34a0-b921-a155bd1a05e8 | 294283  | 8050            | 2.74            |\n| adb2fde9-8589-3f5b-a410-5fe14386c7af | 295409  | 3120            | 1.06            |\n| c02607e8-7399-3dde-9d28-8a8da5e5d251 | 17568   | 67              | 0.38            |\n\n对于每个 KPI, 本文按照 1:1 的方法划分训练集 (training set) 与测试集 (test set); 对于每个训练集, 我们将其按照 8:2 的比例, 再次划分为训练集和验证集 (valid dataset). COCA [^5] 中的数据处理方式与本文一致.\n\n### 超参数与模型选择\n\n实验在 COCA [^5] 的 12 个超参数空间中（见 <a href='{% post_path 模型超参数 %}#COCA-的-12-个模型超参数'>模型超参数#COCA-的-12-个模型超参数</a>)，使用随机抽样算法（RS）抽取 32 组超参数样本 $HP_i$ , $i \\in \\left\\{1,2,\\dots,32\\right\\}$，构成 32 个不同的 COCA 模型 $COCA_{HP_i}$ , $COCA_{HP_i}$ 表示超参数示 $HP_i$ 的 COCA 模型.\n\n$COCA_{HP_{i},}i \\in \\{1,2,\\dots,32\\}$ 为 32 个超参数不同的 COCA 模型, **本文的间接目标是使用最少的时间, 找出这 32 个模型中性能最好的一个模型.**\n\n### 训练集及其抽样\n\n为了增加模型的训练速度，我们使用 RS 在各个数据集的训练集 (training set) 中抽取比率为 $r$ 的子集分别训练每组 $COCA_{hp_i}$, 其中, $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}$. 对于验证集和测试集, 本文不使用任何抽样算法, 也就是说, 本文使用全量的验证集和测试集来评估模型.\n\n为了便于读者理解, 这里给出一个例子. 以数据集 `a07ac296` 为例, 其总数据量为 217782, 那么训练集的数据点为 108891, 假设抽样比率 $r=1/4$, 那么, 我们将在训练集 108891 的点中抽取 $1/4$ 的子集来训练模型, 也就是随机抽取 $108891*1/4 \\approx 27223$ 点来训练模型.\n\n### 性能指标选择\n\n本文选择时间序列异常检测研究中 4 个常用的指标来评估模型的性能, 即 Affiliation F1 score [^2], point-wise F1 score (PW F1) [^2], point-adjusted F1 score (PA F1) [^3],revised point-adjusted F1 score ( RPA F1) [^4].\n\n本文中所得的性能数据均在测试集上进行评估.\n\n### 实验结果\n\n下图是 4 个数据集在不同抽样比率下的模型性能变化情况 (这里我暂时不分析训练时间, 因为在 <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>, <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 已经得到了证明, 这里不需要再分析证明了😷):\n\n![static/attachment/Figure_1 3.png](/images/e8780ed3dc89ed8fd4b96fbe5931aff56d2bb1ff.png)\n\n在分析图之前, 再次明确一下本文期望得到的结论: **期望使用少量的数据集, 得到一个模型相似的模型**, 也就是说, 当我们逐渐降低训练模型的数据量时, 模型的性能会逐渐降低.\n\n从上图中, 我们得不到我们想要的结论 (与 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>, <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a> 一致), 主要有几个 **与预期不同的地方**:\n\n- 图 (1) 与 图 (3) 中, 随着训练数据量的降低 (抽样比例从 $\\frac{1}{1}$ 降到 $\\frac{1}{128}$) , 模型性能 (Affiliation F1) 逐渐升高 (**预期是降低**)\n- 图 (2) 与 图 (4) 中, 随着训练数据量的降低 (抽样比例从 $\\frac{1}{1}$ 降到 $\\frac{1}{128}$), 模型性能 (Affiliation F1) 先升高后降低 (**预期是降低**)\n\n另外, 从图中我倒是可以得到一个其他的结论: <u>从训练集中抽取部分数据来训练模型, 得到的模型比使用全量数据训练得到的更优. </u>\n\n## 结论及讨论\n\n通过本次实验结果与 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>, <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a> , 我总分析了共计 13 个不同数据集与两个模型 (VAE 与 COCA), 发现:\n\n- **从训练集中抽取部分数据集来训练模型, 模型的性能可能升高, 也有可能降低**. 至于什么时候升高, 什么时候降低, 这是一个黑盒问题,暂无法得知原因\n\n<u>我在想, 这个试验是否真的有可能做出来吗? 现在已有的 13 个实验数据告诉我好像不行.</u>\n\n## 其他相关实验\n\n<a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>  \n<a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>  \n<a href='{% post_path 2022-12-09-实验设计 %}'>2022-12-09-实验设计</a>  \n\n## 实验数据备份\n\n```python\nzip -r  2022-12-17.zip b0y8iknf 6jhyr43c yx3sr4bz t3ux4d02 hron3zwt 0md2ksg4 stpk957f 6xujrm1y h9e6o5vc 2b4ze69j ordie3jq 4ijcxywz vugs0nk6 8wdqb65r 4e5j7ow8 mkv65cxb qs7wgelu ygb5jol9 jbsie371 c7k12bmy f9qpdn5g d64wg39c zawvsgo5 h3adu1vg\n```\n\n阿里云数据备份地址:\n\n![static/attachment/Pasted image 20221229082947.png](/images/4d95b6706a50af37ec806510797acd8f699f7975.png)\n\n## 参考文献\n\n[^1]: 2018.KPI Anomaly Detection Competition. Retrieved December, 2022 from https://competition.aiops-challenge.com/home/competition/1484452272200032281\n\n[^2]: Huet, A., Navarro, J. M., & Rossi, D. 2022. Local Evaluation of Time Series Anomaly Detection Algorithms. Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, 635–645.\n\n[^3]: H. Xu et al., “Unsupervised anomaly detection via variational auto-encoder for seasonal kpis in web applications,” in Proceedings of the 2018 world wide web conference, 2018, pp. 187–196.\n\n[^4]: Hundman, Kyle, et al. \"Detecting spacecraft anomalies using lstms and nonparametric dynamic thresholding.\" Proceedings of the 24th ACM SIGKDD international conference on knowledge discovery & data mining. 2018.\n\n[^5]: R. Wang et al., “Deep Contrastive One-Class Time Series Anomaly Detection.” arXiv, Oct. 08, 2022. Accessed: Dec. 09, 2022. [Online]. Available: http://arxiv.org/abs/2207.01472\n","source":"_posts/2022-12-17-实验设计.md","raw":"---\ntitle: 2022-12-17 实验设计\nshare: true \ntags:\n  - docs\ndate: 2022-12-17 08:51:54 \nupdated: 2022-12-29 09:27:51 \ncategories: research\n---\n\n## 实验场景/方法/目标\n\n==背景== 在 <u>时间序列异常检测算法的超参数优化任务</u>中，==方法== 1) 我们在 COCA [^5] 的超参数空间中, 使用随机抽样 (Random Sampling, RS) 抽取 32 组超参数 $HP_{i,}i \\in \\{1,2,\\dots,32 \\}$, 随后 2) 在 AIOps [^1] 的 4 个异常率不同的 KPI 中, 使用 RS 在训练集抽取不同比例 $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}$ 的子集来训练 COCA , ==目标== 期望以更短的时间，能获得一个精度相似的模型。\n\n## 实验设计\n\n本章介绍实验的 1) 硬件环境, 2) 算法及其超参数, 3) 所使用的数据集, 4) 训练集的处理, 5) 性能评估指标, 6) 结果分析.\n\n### 实验硬件环境\n\n本实验的硬件环境如下表所示:\n\n| 项目 | 值                         | 数量 |\n| ---- | -------------------------- | ---- |\n| CPU  | Intel(R) Xeon(R) Gold 5220 | 1    |\n| OS   | Ubuntu  16.04              |      |\n| GPU  | RTX 2080 TI                | 4     |\n\n### 数据集选择及处理\n\n实验所用的数据集来源于 AIOps [^1] , AIOps 中包含了 29 个类型不同的 KPI (Key Performance Indictor). 本文按照 **异常率高中低** 的标准, 从中选择 4 个不同 KPI, 4 个 KPI 的统计信息如下表: (<u>为了简化表示表示, 下文中将使用 KPI ID 的前 8 个字母表示该 KPI, 例如, 下文将使用 `a07ac296` 表示数据集 `a07ac296-de40-3a7c-8df3-91f642cc14d0`</u>)\n\n| KPI ID                               | \\#points |\\#anomaly points | anomaly rate(%) |\n|--------------------------------------|---------|-----------------|-----------------|\n| a07ac296-de40-3a7c-8df3-91f642cc14d0 | 217782  | 7922            | 3.64            |\n| 6efa3a07-4544-34a0-b921-a155bd1a05e8 | 294283  | 8050            | 2.74            |\n| adb2fde9-8589-3f5b-a410-5fe14386c7af | 295409  | 3120            | 1.06            |\n| c02607e8-7399-3dde-9d28-8a8da5e5d251 | 17568   | 67              | 0.38            |\n\n对于每个 KPI, 本文按照 1:1 的方法划分训练集 (training set) 与测试集 (test set); 对于每个训练集, 我们将其按照 8:2 的比例, 再次划分为训练集和验证集 (valid dataset). COCA [^5] 中的数据处理方式与本文一致.\n\n### 超参数与模型选择\n\n实验在 COCA [^5] 的 12 个超参数空间中（见 <a href='{% post_path 模型超参数 %}#COCA-的-12-个模型超参数'>模型超参数#COCA-的-12-个模型超参数</a>)，使用随机抽样算法（RS）抽取 32 组超参数样本 $HP_i$ , $i \\in \\left\\{1,2,\\dots,32\\right\\}$，构成 32 个不同的 COCA 模型 $COCA_{HP_i}$ , $COCA_{HP_i}$ 表示超参数示 $HP_i$ 的 COCA 模型.\n\n$COCA_{HP_{i},}i \\in \\{1,2,\\dots,32\\}$ 为 32 个超参数不同的 COCA 模型, **本文的间接目标是使用最少的时间, 找出这 32 个模型中性能最好的一个模型.**\n\n### 训练集及其抽样\n\n为了增加模型的训练速度，我们使用 RS 在各个数据集的训练集 (training set) 中抽取比率为 $r$ 的子集分别训练每组 $COCA_{hp_i}$, 其中, $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}$. 对于验证集和测试集, 本文不使用任何抽样算法, 也就是说, 本文使用全量的验证集和测试集来评估模型.\n\n为了便于读者理解, 这里给出一个例子. 以数据集 `a07ac296` 为例, 其总数据量为 217782, 那么训练集的数据点为 108891, 假设抽样比率 $r=1/4$, 那么, 我们将在训练集 108891 的点中抽取 $1/4$ 的子集来训练模型, 也就是随机抽取 $108891*1/4 \\approx 27223$ 点来训练模型.\n\n### 性能指标选择\n\n本文选择时间序列异常检测研究中 4 个常用的指标来评估模型的性能, 即 Affiliation F1 score [^2], point-wise F1 score (PW F1) [^2], point-adjusted F1 score (PA F1) [^3],revised point-adjusted F1 score ( RPA F1) [^4].\n\n本文中所得的性能数据均在测试集上进行评估.\n\n### 实验结果\n\n下图是 4 个数据集在不同抽样比率下的模型性能变化情况 (这里我暂时不分析训练时间, 因为在 <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>, <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 已经得到了证明, 这里不需要再分析证明了😷):\n\n![static/attachment/Figure_1 3.png](/images/e8780ed3dc89ed8fd4b96fbe5931aff56d2bb1ff.png)\n\n在分析图之前, 再次明确一下本文期望得到的结论: **期望使用少量的数据集, 得到一个模型相似的模型**, 也就是说, 当我们逐渐降低训练模型的数据量时, 模型的性能会逐渐降低.\n\n从上图中, 我们得不到我们想要的结论 (与 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>, <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a> 一致), 主要有几个 **与预期不同的地方**:\n\n- 图 (1) 与 图 (3) 中, 随着训练数据量的降低 (抽样比例从 $\\frac{1}{1}$ 降到 $\\frac{1}{128}$) , 模型性能 (Affiliation F1) 逐渐升高 (**预期是降低**)\n- 图 (2) 与 图 (4) 中, 随着训练数据量的降低 (抽样比例从 $\\frac{1}{1}$ 降到 $\\frac{1}{128}$), 模型性能 (Affiliation F1) 先升高后降低 (**预期是降低**)\n\n另外, 从图中我倒是可以得到一个其他的结论: <u>从训练集中抽取部分数据来训练模型, 得到的模型比使用全量数据训练得到的更优. </u>\n\n## 结论及讨论\n\n通过本次实验结果与 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>, <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a> , 我总分析了共计 13 个不同数据集与两个模型 (VAE 与 COCA), 发现:\n\n- **从训练集中抽取部分数据集来训练模型, 模型的性能可能升高, 也有可能降低**. 至于什么时候升高, 什么时候降低, 这是一个黑盒问题,暂无法得知原因\n\n<u>我在想, 这个试验是否真的有可能做出来吗? 现在已有的 13 个实验数据告诉我好像不行.</u>\n\n## 其他相关实验\n\n<a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>  \n<a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>  \n<a href='{% post_path 2022-12-09-实验设计 %}'>2022-12-09-实验设计</a>  \n\n## 实验数据备份\n\n```python\nzip -r  2022-12-17.zip b0y8iknf 6jhyr43c yx3sr4bz t3ux4d02 hron3zwt 0md2ksg4 stpk957f 6xujrm1y h9e6o5vc 2b4ze69j ordie3jq 4ijcxywz vugs0nk6 8wdqb65r 4e5j7ow8 mkv65cxb qs7wgelu ygb5jol9 jbsie371 c7k12bmy f9qpdn5g d64wg39c zawvsgo5 h3adu1vg\n```\n\n阿里云数据备份地址:\n\n![static/attachment/Pasted image 20221229082947.png](/images/4d95b6706a50af37ec806510797acd8f699f7975.png)\n\n## 参考文献\n\n[^1]: 2018.KPI Anomaly Detection Competition. Retrieved December, 2022 from https://competition.aiops-challenge.com/home/competition/1484452272200032281\n\n[^2]: Huet, A., Navarro, J. M., & Rossi, D. 2022. Local Evaluation of Time Series Anomaly Detection Algorithms. Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, 635–645.\n\n[^3]: H. Xu et al., “Unsupervised anomaly detection via variational auto-encoder for seasonal kpis in web applications,” in Proceedings of the 2018 world wide web conference, 2018, pp. 187–196.\n\n[^4]: Hundman, Kyle, et al. \"Detecting spacecraft anomalies using lstms and nonparametric dynamic thresholding.\" Proceedings of the 24th ACM SIGKDD international conference on knowledge discovery & data mining. 2018.\n\n[^5]: R. Wang et al., “Deep Contrastive One-Class Time Series Anomaly Detection.” arXiv, Oct. 08, 2022. Accessed: Dec. 09, 2022. [Online]. Available: http://arxiv.org/abs/2207.01472\n","slug":"2022-12-17-实验设计","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709r001p4cv9b10k4gml","content":"<h2 id=\"实验场景-方法-目标\">实验场景/方法/目标</h2>\n<p><mark>背景</mark> 在 <u>时间序列异常检测算法的超参数优化任务</u>中，<mark>方法</mark> 1) 我们在 COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup> 的超参数空间中, 使用随机抽样 (Random Sampling, RS) 抽取 32 组超参数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mrow><mi>i</mi><mo separator=\"true\">,</mo></mrow></msub><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">HP_{i,}i \\in \\{1,2,\\dots,32 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mpunct mtight\">,</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span>, 随后 2) 在 AIOps <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2\">[2]</a></sup> 的 4 个异常率不同的 KPI 中, 使用 RS 在训练集抽取不同比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>128</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/128</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span> 的子集来训练 COCA , <mark>目标</mark> 期望以更短的时间，能获得一个精度相似的模型。</p>\n<h2 id=\"实验设计\">实验设计</h2>\n<p>本章介绍实验的 1) 硬件环境, 2) 算法及其超参数, 3) 所使用的数据集, 4) 训练集的处理, 5) 性能评估指标, 6) 结果分析.</p>\n<h3 id=\"实验硬件环境\">实验硬件环境</h3>\n<p>本实验的硬件环境如下表所示:</p>\n<table>\n<thead>\n<tr>\n<th>项目</th>\n<th>值</th>\n<th>数量</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>CPU</td>\n<td>Intel® Xeon® Gold 5220</td>\n<td>1</td>\n</tr>\n<tr>\n<td>OS</td>\n<td>Ubuntu  16.04</td>\n<td></td>\n</tr>\n<tr>\n<td>GPU</td>\n<td>RTX 2080 TI</td>\n<td>4</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"数据集选择及处理\">数据集选择及处理</h3>\n<p>实验所用的数据集来源于 AIOps <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2:1\">[2:1]</a></sup> , AIOps 中包含了 29 个类型不同的 KPI (Key Performance Indictor). 本文按照 <strong>异常率高中低</strong> 的标准, 从中选择 4 个不同 KPI, 4 个 KPI 的统计信息如下表: (<u>为了简化表示表示, 下文中将使用 KPI ID 的前 8 个字母表示该 KPI, 例如, 下文将使用 <code>a07ac296</code> 表示数据集 <code>a07ac296-de40-3a7c-8df3-91f642cc14d0</code></u>)</p>\n<table>\n<thead>\n<tr>\n<th>KPI ID</th>\n<th>#points</th>\n<th>#anomaly points</th>\n<th>anomaly rate(%)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>a07ac296-de40-3a7c-8df3-91f642cc14d0</td>\n<td>217782</td>\n<td>7922</td>\n<td>3.64</td>\n</tr>\n<tr>\n<td>6efa3a07-4544-34a0-b921-a155bd1a05e8</td>\n<td>294283</td>\n<td>8050</td>\n<td>2.74</td>\n</tr>\n<tr>\n<td>adb2fde9-8589-3f5b-a410-5fe14386c7af</td>\n<td>295409</td>\n<td>3120</td>\n<td>1.06</td>\n</tr>\n<tr>\n<td>c02607e8-7399-3dde-9d28-8a8da5e5d251</td>\n<td>17568</td>\n<td>67</td>\n<td>0.38</td>\n</tr>\n</tbody>\n</table>\n<p>对于每个 KPI, 本文按照 1:1 的方法划分训练集 (training set) 与测试集 (test set); 对于每个训练集, 我们将其按照 8:2 的比例, 再次划分为训练集和验证集 (valid dataset). COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:1\">[1:1]</a></sup> 中的数据处理方式与本文一致.</p>\n<h3 id=\"超参数与模型选择\">超参数与模型选择</h3>\n<p>实验在 COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:2\">[1:2]</a></sup> 的 12 个超参数空间中（见 <a href='/research/b4f95541e96e.html#COCA-的-12-个模型超参数'>模型超参数#COCA-的-12-个模型超参数</a>)，使用随机抽样算法（RS）抽取 32 组超参数样本 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">i \\in \\left\\{1,2,\\dots,32\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>，构成 32 个不同的 COCA 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> 表示超参数示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的 COCA 模型.</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub><mo separator=\"true\">,</mo></mrow></msub><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_{i},}i \\in \\{1,2,\\dots,32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span> 为 32 个超参数不同的 COCA 模型, <strong>本文的间接目标是使用最少的时间, 找出这 32 个模型中性能最好的一个模型.</strong></p>\n<h3 id=\"训练集及其抽样\">训练集及其抽样</h3>\n<p>为了增加模型的训练速度，我们使用 RS 在各个数据集的训练集 (training set) 中抽取比率为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 的子集分别训练每组 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>128</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/128</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>. 对于验证集和测试集, 本文不使用任何抽样算法, 也就是说, 本文使用全量的验证集和测试集来评估模型.</p>\n<p>为了便于读者理解, 这里给出一个例子. 以数据集 <code>a07ac296</code> 为例, 其总数据量为 217782, 那么训练集的数据点为 108891, 假设抽样比率 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span>, 那么, 我们将在训练集 108891 的点中抽取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 的子集来训练模型, 也就是随机抽取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>108891</mn><mo>∗</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo>≈</mo><mn>27223</mn></mrow><annotation encoding=\"application/x-tex\">108891*1/4 \\approx 27223</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">108891</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">27223</span></span></span></span> 点来训练模型.</p>\n<h3 id=\"性能指标选择\">性能指标选择</h3>\n<p>本文选择时间序列异常检测研究中 4 个常用的指标来评估模型的性能, 即 Affiliation F1 score <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3\">[3]</a></sup>, point-wise F1 score (PW F1) <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3:1\">[3:1]</a></sup>, point-adjusted F1 score (PA F1) <sup class=\"footnote-ref\"><a href=\"#fn4\" id=\"fnref4\">[4]</a></sup>,revised point-adjusted F1 score ( RPA F1) <sup class=\"footnote-ref\"><a href=\"#fn5\" id=\"fnref5\">[5]</a></sup>.</p>\n<p>本文中所得的性能数据均在测试集上进行评估.</p>\n<h3 id=\"实验结果\">实验结果</h3>\n<p>下图是 4 个数据集在不同抽样比率下的模型性能变化情况 (这里我暂时不分析训练时间, 因为在 <a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a>, <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 已经得到了证明, 这里不需要再分析证明了😷):</p>\n<p><img src=\"/images/e8780ed3dc89ed8fd4b96fbe5931aff56d2bb1ff.png\" alt=\"static/attachment/Figure_1 3.png\"></p>\n<p>在分析图之前, 再次明确一下本文期望得到的结论: <strong>期望使用少量的数据集, 得到一个模型相似的模型</strong>, 也就是说, 当我们逐渐降低训练模型的数据量时, 模型的性能会逐渐降低.</p>\n<p>从上图中, 我们得不到我们想要的结论 (与 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a>, <a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a> 一致), 主要有几个 <strong>与预期不同的地方</strong>:</p>\n<ul>\n<li>图 (1) 与 图 (3) 中, 随着训练数据量的降低 (抽样比例从 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>1</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 降到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>128</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{128}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">128</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>) , 模型性能 (Affiliation F1) 逐渐升高 (<strong>预期是降低</strong>)</li>\n<li>图 (2) 与 图 (4) 中, 随着训练数据量的降低 (抽样比例从 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>1</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 降到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>128</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{128}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">128</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>), 模型性能 (Affiliation F1) 先升高后降低 (<strong>预期是降低</strong>)</li>\n</ul>\n<p>另外, 从图中我倒是可以得到一个其他的结论: <u>从训练集中抽取部分数据来训练模型, 得到的模型比使用全量数据训练得到的更优. </u></p>\n<h2 id=\"结论及讨论\">结论及讨论</h2>\n<p>通过本次实验结果与 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a>, <a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a> , 我总分析了共计 13 个不同数据集与两个模型 (VAE 与 COCA), 发现:</p>\n<ul>\n<li><strong>从训练集中抽取部分数据集来训练模型, 模型的性能可能升高, 也有可能降低</strong>. 至于什么时候升高, 什么时候降低, 这是一个黑盒问题,暂无法得知原因</li>\n</ul>\n<p><u>我在想, 这个试验是否真的有可能做出来吗? 现在已有的 13 个实验数据告诉我好像不行.</u></p>\n<h2 id=\"其他相关实验\">其他相关实验</h2>\n<p><a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a><br>\n<a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a><br>\n<a href=''>2022-12-09-实验设计</a></p>\n<h2 id=\"实验数据备份\">实验数据备份</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r  <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">17.</span><span class=\"built_in\">zip</span> b0y8iknf 6jhyr43c yx3sr4bz t3ux4d02 hron3zwt 0md2ksg4 stpk957f 6xujrm1y h9e6o5vc 2b4ze69j ordie3jq 4ijcxywz vugs0nk6 8wdqb65r 4e5j7ow8 mkv65cxb qs7wgelu ygb5jol9 jbsie371 c7k12bmy f9qpdn5g d64wg39c zawvsgo5 h3adu1vg</span><br></pre></td></tr></table></figure>\n<p>阿里云数据备份地址:</p>\n<p><img src=\"/images/4d95b6706a50af37ec806510797acd8f699f7975.png\" alt=\"static/attachment/Pasted image 20221229082947.png\"></p>\n<h2 id=\"参考文献\">参考文献</h2>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>R. Wang et al., “Deep Contrastive One-Class Time Series Anomaly Detection.” arXiv, Oct. 08, 2022. Accessed: Dec. 09, 2022. [Online]. Available: <a href=\"http://arxiv.org/abs/2207.01472\">http://arxiv.org/abs/2207.01472</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:2\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn2\" class=\"footnote-item\"><p>2018.KPI Anomaly Detection Competition. Retrieved December, 2022 from <a href=\"https://competition.aiops-challenge.com/home/competition/1484452272200032281\">https://competition.aiops-challenge.com/home/competition/1484452272200032281</a> <a href=\"#fnref2\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref2:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn3\" class=\"footnote-item\"><p>Huet, A., Navarro, J. M., &amp; Rossi, D. 2022. Local Evaluation of Time Series Anomaly Detection Algorithms. Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, 635–645. <a href=\"#fnref3\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref3:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn4\" class=\"footnote-item\"><p>H. Xu et al., “Unsupervised anomaly detection via variational auto-encoder for seasonal kpis in web applications,” in Proceedings of the 2018 world wide web conference, 2018, pp. 187–196. <a href=\"#fnref4\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn5\" class=\"footnote-item\"><p>Hundman, Kyle, et al. “Detecting spacecraft anomalies using lstms and nonparametric dynamic thresholding.” Proceedings of the 24th ACM SIGKDD international conference on knowledge discovery &amp; data mining. 2018. <a href=\"#fnref5\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<h2 id=\"实验场景-方法-目标\">实验场景/方法/目标</h2>\n<p><mark>背景</mark> 在 <u>时间序列异常检测算法的超参数优化任务</u>中，<mark>方法</mark> 1) 我们在 COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup> 的超参数空间中, 使用随机抽样 (Random Sampling, RS) 抽取 32 组超参数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mrow><mi>i</mi><mo separator=\"true\">,</mo></mrow></msub><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">HP_{i,}i \\in \\{1,2,\\dots,32 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mpunct mtight\">,</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span>, 随后 2) 在 AIOps <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2\">[2]</a></sup> 的 4 个异常率不同的 KPI 中, 使用 RS 在训练集抽取不同比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>128</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/128</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span> 的子集来训练 COCA , <mark>目标</mark> 期望以更短的时间，能获得一个精度相似的模型。</p>\n<h2 id=\"实验设计\">实验设计</h2>\n<p>本章介绍实验的 1) 硬件环境, 2) 算法及其超参数, 3) 所使用的数据集, 4) 训练集的处理, 5) 性能评估指标, 6) 结果分析.</p>\n<h3 id=\"实验硬件环境\">实验硬件环境</h3>\n<p>本实验的硬件环境如下表所示:</p>\n<table>\n<thead>\n<tr>\n<th>项目</th>\n<th>值</th>\n<th>数量</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>CPU</td>\n<td>Intel® Xeon® Gold 5220</td>\n<td>1</td>\n</tr>\n<tr>\n<td>OS</td>\n<td>Ubuntu  16.04</td>\n<td></td>\n</tr>\n<tr>\n<td>GPU</td>\n<td>RTX 2080 TI</td>\n<td>4</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"数据集选择及处理\">数据集选择及处理</h3>\n<p>实验所用的数据集来源于 AIOps <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2:1\">[2:1]</a></sup> , AIOps 中包含了 29 个类型不同的 KPI (Key Performance Indictor). 本文按照 <strong>异常率高中低</strong> 的标准, 从中选择 4 个不同 KPI, 4 个 KPI 的统计信息如下表: (<u>为了简化表示表示, 下文中将使用 KPI ID 的前 8 个字母表示该 KPI, 例如, 下文将使用 <code>a07ac296</code> 表示数据集 <code>a07ac296-de40-3a7c-8df3-91f642cc14d0</code></u>)</p>\n<table>\n<thead>\n<tr>\n<th>KPI ID</th>\n<th>#points</th>\n<th>#anomaly points</th>\n<th>anomaly rate(%)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>a07ac296-de40-3a7c-8df3-91f642cc14d0</td>\n<td>217782</td>\n<td>7922</td>\n<td>3.64</td>\n</tr>\n<tr>\n<td>6efa3a07-4544-34a0-b921-a155bd1a05e8</td>\n<td>294283</td>\n<td>8050</td>\n<td>2.74</td>\n</tr>\n<tr>\n<td>adb2fde9-8589-3f5b-a410-5fe14386c7af</td>\n<td>295409</td>\n<td>3120</td>\n<td>1.06</td>\n</tr>\n<tr>\n<td>c02607e8-7399-3dde-9d28-8a8da5e5d251</td>\n<td>17568</td>\n<td>67</td>\n<td>0.38</td>\n</tr>\n</tbody>\n</table>\n<p>对于每个 KPI, 本文按照 1:1 的方法划分训练集 (training set) 与测试集 (test set); 对于每个训练集, 我们将其按照 8:2 的比例, 再次划分为训练集和验证集 (valid dataset). COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:1\">[1:1]</a></sup> 中的数据处理方式与本文一致.</p>\n<h3 id=\"超参数与模型选择\">超参数与模型选择</h3>\n<p>实验在 COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:2\">[1:2]</a></sup> 的 12 个超参数空间中（见 <a href='/research/b4f95541e96e.html#COCA-的-12-个模型超参数'>模型超参数#COCA-的-12-个模型超参数</a>)，使用随机抽样算法（RS）抽取 32 组超参数样本 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">i \\in \\left\\{1,2,\\dots,32\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>，构成 32 个不同的 COCA 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> 表示超参数示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的 COCA 模型.</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub><mo separator=\"true\">,</mo></mrow></msub><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_{i},}i \\in \\{1,2,\\dots,32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span> 为 32 个超参数不同的 COCA 模型, <strong>本文的间接目标是使用最少的时间, 找出这 32 个模型中性能最好的一个模型.</strong></p>\n<h3 id=\"训练集及其抽样\">训练集及其抽样</h3>\n<p>为了增加模型的训练速度，我们使用 RS 在各个数据集的训练集 (training set) 中抽取比率为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 的子集分别训练每组 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>128</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/128</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>. 对于验证集和测试集, 本文不使用任何抽样算法, 也就是说, 本文使用全量的验证集和测试集来评估模型.</p>\n<p>为了便于读者理解, 这里给出一个例子. 以数据集 <code>a07ac296</code> 为例, 其总数据量为 217782, 那么训练集的数据点为 108891, 假设抽样比率 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span>, 那么, 我们将在训练集 108891 的点中抽取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 的子集来训练模型, 也就是随机抽取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>108891</mn><mo>∗</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo>≈</mo><mn>27223</mn></mrow><annotation encoding=\"application/x-tex\">108891*1/4 \\approx 27223</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">108891</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">27223</span></span></span></span> 点来训练模型.</p>\n<h3 id=\"性能指标选择\">性能指标选择</h3>\n<p>本文选择时间序列异常检测研究中 4 个常用的指标来评估模型的性能, 即 Affiliation F1 score <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3\">[3]</a></sup>, point-wise F1 score (PW F1) <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3:1\">[3:1]</a></sup>, point-adjusted F1 score (PA F1) <sup class=\"footnote-ref\"><a href=\"#fn4\" id=\"fnref4\">[4]</a></sup>,revised point-adjusted F1 score ( RPA F1) <sup class=\"footnote-ref\"><a href=\"#fn5\" id=\"fnref5\">[5]</a></sup>.</p>\n<p>本文中所得的性能数据均在测试集上进行评估.</p>\n<h3 id=\"实验结果\">实验结果</h3>\n<p>下图是 4 个数据集在不同抽样比率下的模型性能变化情况 (这里我暂时不分析训练时间, 因为在 <a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a>, <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 已经得到了证明, 这里不需要再分析证明了😷):</p>\n<p><img src=\"/images/e8780ed3dc89ed8fd4b96fbe5931aff56d2bb1ff.png\" alt=\"static/attachment/Figure_1 3.png\"></p>\n<p>在分析图之前, 再次明确一下本文期望得到的结论: <strong>期望使用少量的数据集, 得到一个模型相似的模型</strong>, 也就是说, 当我们逐渐降低训练模型的数据量时, 模型的性能会逐渐降低.</p>\n<p>从上图中, 我们得不到我们想要的结论 (与 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a>, <a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a> 一致), 主要有几个 <strong>与预期不同的地方</strong>:</p>\n<ul>\n<li>图 (1) 与 图 (3) 中, 随着训练数据量的降低 (抽样比例从 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>1</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 降到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>128</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{128}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">128</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>) , 模型性能 (Affiliation F1) 逐渐升高 (<strong>预期是降低</strong>)</li>\n<li>图 (2) 与 图 (4) 中, 随着训练数据量的降低 (抽样比例从 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>1</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> 降到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>128</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{128}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">128</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>), 模型性能 (Affiliation F1) 先升高后降低 (<strong>预期是降低</strong>)</li>\n</ul>\n<p>另外, 从图中我倒是可以得到一个其他的结论: <u>从训练集中抽取部分数据来训练模型, 得到的模型比使用全量数据训练得到的更优. </u></p>\n<h2 id=\"结论及讨论\">结论及讨论</h2>\n<p>通过本次实验结果与 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a>, <a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a> , 我总分析了共计 13 个不同数据集与两个模型 (VAE 与 COCA), 发现:</p>\n<ul>\n<li><strong>从训练集中抽取部分数据集来训练模型, 模型的性能可能升高, 也有可能降低</strong>. 至于什么时候升高, 什么时候降低, 这是一个黑盒问题,暂无法得知原因</li>\n</ul>\n<p><u>我在想, 这个试验是否真的有可能做出来吗? 现在已有的 13 个实验数据告诉我好像不行.</u></p>\n<h2 id=\"其他相关实验\">其他相关实验</h2>\n<p><a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a><br>\n<a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a><br>\n<a href=''>2022-12-09-实验设计</a></p>\n<h2 id=\"实验数据备份\">实验数据备份</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r  <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">17.</span><span class=\"built_in\">zip</span> b0y8iknf 6jhyr43c yx3sr4bz t3ux4d02 hron3zwt 0md2ksg4 stpk957f 6xujrm1y h9e6o5vc 2b4ze69j ordie3jq 4ijcxywz vugs0nk6 8wdqb65r 4e5j7ow8 mkv65cxb qs7wgelu ygb5jol9 jbsie371 c7k12bmy f9qpdn5g d64wg39c zawvsgo5 h3adu1vg</span><br></pre></td></tr></table></figure>\n<p>阿里云数据备份地址:</p>\n<p><img src=\"/images/4d95b6706a50af37ec806510797acd8f699f7975.png\" alt=\"static/attachment/Pasted image 20221229082947.png\"></p>\n<h2 id=\"参考文献\">参考文献</h2>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>R. Wang et al., “Deep Contrastive One-Class Time Series Anomaly Detection.” arXiv, Oct. 08, 2022. Accessed: Dec. 09, 2022. [Online]. Available: <a href=\"http://arxiv.org/abs/2207.01472\">http://arxiv.org/abs/2207.01472</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:2\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn2\" class=\"footnote-item\"><p>2018.KPI Anomaly Detection Competition. Retrieved December, 2022 from <a href=\"https://competition.aiops-challenge.com/home/competition/1484452272200032281\">https://competition.aiops-challenge.com/home/competition/1484452272200032281</a> <a href=\"#fnref2\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref2:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn3\" class=\"footnote-item\"><p>Huet, A., Navarro, J. M., &amp; Rossi, D. 2022. Local Evaluation of Time Series Anomaly Detection Algorithms. Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, 635–645. <a href=\"#fnref3\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref3:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn4\" class=\"footnote-item\"><p>H. Xu et al., “Unsupervised anomaly detection via variational auto-encoder for seasonal kpis in web applications,” in Proceedings of the 2018 world wide web conference, 2018, pp. 187–196. <a href=\"#fnref4\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn5\" class=\"footnote-item\"><p>Hundman, Kyle, et al. “Detecting spacecraft anomalies using lstms and nonparametric dynamic thresholding.” Proceedings of the 24th ACM SIGKDD international conference on knowledge discovery &amp; data mining. 2018. <a href=\"#fnref5\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n"},{"title":"2022-11-26 实验结果","share":true,"date":"2022-11-25T22:30:09.000Z","updated":"2022-12-30T02:25:34.000Z","aliases":["2022-11-26 实验结果","2022-11-26实验结果"],"_content":"\n\n\n上次结果: <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>.  \n\n## 摘要\n\n### ==目标==\n\n按 **维度高中低，异常率高中低** 的分类标准, 挑选 9 个 ODDS 数据集 ( <a href='{% post_path ODDS-数据集划分标准及常见问题 %}'>ODDS-数据集划分标准及常见问题</a>) 并进行实验, 实验方法参考本文 \" 实验设计章节 \".\n\n### ==实验结论==\n\n九个数据集上:\n\n- 3 个数据集的 $AUC^*$ ==不符合预期==\n- 5 个数据集的 $Test_{loss} *$ ==不符合预期==.\n- 9 个 (所有)**Training time** 全部符合预期\n\n细节:\n\n- **Training time(minutes)**: 在所有数据集上, 训练时间都随 $r$ 的降低而降低, 与 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 一致.\n- $AUC^*$(==预期: ==随着训练数据量的降低, AUC 降低 )\n\t- **符合预期**: 与 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 一致 (或我认为正确) 实验 (随着训练数据数据量的降低, AUC 减少)\n\t\t- Fig.2 Dataset MNIST\n\t\t- Fig.3 Dataset MUSK\n\t\t- Fig.4 Dataset SATELLITE\n\t\t- Fig.9 Dataset MAMMOGRAPHY )\n\t- ==不符合预期==\n\t\t- Fig.1 Dataset ARRHYTHMIA: 训练数据量减少, $AUC^*$ 先增后降低  \n\t\t- Fig.5 Dataset LETTER : AUC 在训练数据很少的时候升高了 (期望降低)  \n\t\t- Fig.9 Dataset MAMMOGRAPHY: 在 $r=1/4$ 的 $AUC^*$ 大于 $r=1/8$ 的 $AUC^*$  \n- $Test_{loss} *$ ,下文简称 loss (==预期: ==: 随着训练数据量的降低, $Test_{loss} *$ 增加)  \n\t- ==不符合预期== 的实验 ( 训练数据量减少, loss 反而降低)\n\t\t- Fig.2 Dataset MNIST\n\t\t- Fig.5 Dataset LETTER  \n\t\t- Fig.6 Dataset OPTDIGITS\n\t\t- Fig.8 Dataset ANNTHYROID  \n\t\t- Fig.9 Dataset MAMMOGRAPHY  \n<embed src='/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf' width='100%' height='750' type='application/pdf'>\n\n### ==可能原因分析==\n\n#### 不符合预期 AUC 可能原因分析\n\n- Fig.1 Dataset ARRHYTHMIA: 训练数据量减少, $AUC^*$ 先增后降低  \n\t- ==原因猜想== (没有实验证明): 数据量少 (452 条), 维度高 (274 维) 导致过拟合\n- Fig.5 Dataset LETTER : AUC 在训练数据很少 ($r=1/32,r=1/64$) 的时候升高了 (期望降低)  \n\t- ==原因猜想==: 数据量少 (在 $r=1/32,r=1/64$ 是, 训练数据分别只有 50/25 条 ), 导致过拟合 (dim=32)\n- Fig.9 Dataset MAMMOGRAPHY: 在 $r=1/4$ 的 $AUC^*$ 小于 $r=1/8$ 的 $AUC^*$  \n\t- ==原因猜想==: 在 $r=1/4$ 时抽到的训练数据没有代表性, 而 $r=1/8$ 时抽到的数据更有代表性. (数据量 11183, dim=6)\n\n#### Loss 不符合预期可能原因分析\n\n不符合预期的实验 ( 训练数据量减少, loss 反而降低)  \n\n- Fig.2 Dataset MNIST  \n\t- ==原因猜想== 模型没有学到数据的特征, 得到的 loss 随机的\n- Fig.5 Dataset LETTER  \n\t- ==原因猜想== 暂时想不出来\n- Fig.6 Dataset OPTDIGITS\n\t- ==原因猜想== 暂时想不出来\n\t- 对于的 loss 图像 ![static/attachment/Pasted image 20221201110026.png](/images/990e8dc15dfc3d4fbf6b0bc347ce50c486580b24.png)\n- Fig.8 Dataset ANNTHYROID / Fig.9 Dataset MAMMOGRAPHY\n\t- - ==原因猜想== 两个数据都是低纬数据, 是不是有什么关联?\n\t- loss 展示 ![static/attachment/Pasted image 20221201110235.png](/images/3e468fe601bb6c15b0ac6f549c0c5e45c728f9d1.png)\n\n### 本次工作与上次工作的不同之处\n\n- 数据集从 3 个变为 9 个 (https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn)\n- 训练集的抽样比例增加了 **两个抽取比例 $1/32,1/64$**, 即由 $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24\\right\\}$ 变为 $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24, 1/32, 1/64 \\right\\}$\n- 损失函数替换为 Mean Square Error(MSE)(原概率损失 (binary cross-entropy)\n- 数据集归一化处理 (原标准化); 标注化假设原始数据服从高斯分布, 但是这里我们不清楚 ODDS 的数据是否服从高斯分布, 因此为了稳妥, 我们采用归一化.\n- 本次更多工作详细请参考章节 \" 本次工作内容总结 \".  \n\n## 实验背景/方法/目标\n\n==背景== 在时间序列异常检测算法的超参数优化的任务中，==方法== 在 1) 超参数空间 和 2) 训练数据 中使用随机抽样 (Random Sampling, RS) 算法，==目标== 期望以 1) 更短的时间 2) 获得一个精度相似的模型。\n\n## 实验设计\n\n==超参数与模型设置== 实验在 VAE 的 11 个超参数（见 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 附录 1）空间中 (超参数空间指: 所有的超参数可能取值的笛卡尔积)，使用随机抽样算法（RS）抽取 32 组超参数样本 $HP_i$, $i \\in \\left\\{1,2,\\dots,32\\right\\}$，构成 32 个不同的 VAE 模型 $VAE_{hp_i}$ 每个\n\n==数据集选择及处理== 从 ODDS 中的按照 **维度高中低，异常率高中低** 的方法选择数据量不同的 [9 个数据集]( https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn) $D_i$, $i$ 表示数据集的序号, $i \\in \\{1,\\dots,9 \\}$，并按照 $6:4$ 的比例将每个数据集划分为训练集 (training set) 与测试集 (test set), 所有的数据均被归一化处理 ($\\bar{x}=\\frac{x-min(x)}{max(x)-min(x)}$)\n\n==训练集抽样设置== 为了增加模型的训练速度，使用 RS 在训练集 (training set) 中抽取不同比率 ($r$) 的 子数据集分别训练每个模型 $VAE_{hp_i}$, 其中, $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24, 1/32, 1/64 \\right\\}$; 例如, $r=1/1$ 表示使用全部的训练集 (training set) 训练所有的模型 $VAE_{hp_i}$，$r=1/8$ 表示使用训练集的 $1/8$ (subset, 占总训练集的 $1/8$) 训练所有模型 $VAE_{hp_i}$。$VAE_{hp_i}^{D_{i_r}}$ 表示该 VAE 的超参数是 $hp_i$ ,其训练数据是从数据集 $D_i$ 中安装比例 $r$ 进行抽取的.\n\n==评估标准== 本文选择三个度量标准来度量模型的性能, 包括: $Test_{loss}*$ / $AUC^*$ / Training time.\n\n- 👉 $Test_{loss}*$ : 在每个数据集 $D_i$ 上, 我们会以不同的比例 $r$ 将 $D_i$ 的训练集间距分为多个数据集 $D_i^r$; 然后使用 $D_i^r$ 训练一组超参数不同的 VAE 模型 $VAE_{hp_i}$, 我们将 $D_i^r$ 训练的这一组模型记为 $VAE_{hp_i}^{D_{i_r}}$; 在本例中, $i \\in \\{1, 2, \\dots, 32\\}$, 因为在超参数空间中使用 RS 抽取了 32 组不同的超参数样本. 在 $VAE_{hp_i}^{D_{i_r}}$ 中, 存在一个模型 $VAE_{hp*}=\\arg \\min_{hp_i} (VAE_{loss_{test}})$ , 其具有最小的平均 (使用 $D_i$ 中的 test set 独立重复评估 $VAE_{hp*}$ 10 次) 测试误差 ($Test_{loss}*$ )\n- 👉 **$AUC^*$** : $VAE_{hp*}$ 的 AUC, 即 $VAE_{hp_i}^{D_{i_r}}$ 中 **损失最小的模型的 AUC.**\n- 👉 **Training time**: 在 $VAE_{hp_i}^{D_{i_r}}$ 中, 使用数据集 $D_{i_r}$ (训练集) 训练每个模型 $VAE_{hp_i}$ 的训练时间总和, 其中, $VAE_{hp_i}, i \\in \\{1, 2, \\dots, 32\\}$ .\n\n## 本次工作内容总结\n\n- 按照<u>异常率</u> 与 <u>维度</u> 高中低重新划分数据集. 划分标准: <a href='{% post_path ODDS-数据集划分标准及常见问题 %}'>ODDS-数据集划分标准及常见问题</a>\n- <u>修改 VAE 的损失函数</u>. 将 binary cross-entropy 修改为 mean_absolute_error.\n\t- 原因: 基于 binary crossentropy 的损失差不多趋于 $-\\inf$ , 表现异常, 详细参考 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>\n\t- 证明 VAE 模型的正确性. 通过 5 个例子, 测试损失函数为 mean_absolute_error 的 VAE. <a href='{% post_path vae_mse_example-1.pdf %}'>vae_mse_example-1.pdf</a>\n- 调研数据处理方式 (是归一化还是标注化) <a href='{% post_path 时间序列异常检测论文中常见的数据预处理方式 %}'>时间序列异常检测论文中常见的数据预处理方式</a>,\n\t- 结论: 都有, 只是场景不同\n\t- 调研方式: 读论文\n- 将 ODDS 数据集的标注化处理方式转为归一化 ($\\bar{x}=\\frac{x-min(x)}{max(x)-min(x)}$)\n\t- 原因: 标注化数据的 <u>前提是</u> 数据 follow normal distribution, if the data does not follow normal distribution then this will make problems. (Ali, Peshawa Jamal Muhammad, et al. \"Data normalization and standardization: a technical report.\" Mach Learn Tech Rep 1.1 (2014): 1-6.)\n\t- 对于 ODDS 的数据集来说, 其是否 follow normal distribution 我并不知道, 也不关心, 因此就直接采用归一化的方式\n- 下载并处理分好的 9 个数据集 https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn\n- 验证数据处理的正确性.\n\t- 结论: 正确处理.\n\t- 通过可视化已处理的 9 个数据集, 其所有数据的取值 $x \\in [0,1]$ , 表示数据处理正确. 可视化后的九个数据的概览图如下图所示:![static/attachment/Pasted image 20221126203842.png](/images/e058a82acde3fe0d917cc172375c1838b5fa959e.png)\n- 解决 NNI 实验失败后, 无法接着训练的问题\n- 跑完 9 个数据集上的实验结果 <embed src='/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf' width='100%' height='750' type='application/pdf'>\n\n## 实验备份\n\n```python\nzip -r 2022-11-26.zip f9omc0ti mg7btkzy xt3g5y7s dq7frc69 ujezgyc4 egzpk3c1 8u7o9t6l 0zv9usjd h0l8zpnv ejmah84w adosi6x4 c29h1fri kx4s23hg qdj380ob ks1iw8ph 2ua34em8 02tv5uw7 8qjk1fou bxv91cjs pbce0f6w rulezjsn zhnglwb2 tjysp3im xdsyi2wq qrg62t8a 7czejnsg zqjh4m7x zb8e5wcf t1q34liz l28n7kxe run7g18q 1x9z4bhe melfx54w 7g06dwbv z9q20tkc mr8zjhc4 asu96p8r rbny563z il8asyge i52eo9mp m7lu0nrj noeuqtv7 fbypvi31 0i4yht2j hxp8t1ye jid5sv0h a8dewtzx 98un4k3l s9io7k4d lr8u1n3c 4jvocizd y9f6ecml dog2qumk rvshyopu nauvd3xp 3l71tsdu b4ljh703 1vfhm3sb lbs239pt xlicmvbn 24psw53r 7horcnk5 xbnhjo07 olu4zqg1 jxtlg50k iwktemax liym5tzq plvxs4ce vtfqg7dh 0i3ferbc zc1td3s0 7ymsz4wj 2gnb6al8 7g1xqhyl uae01czm in4sbvl6 swcgdpol lk30ae7r yktc59v4 b6dzql1h wq618mf9 fs0rvdbg pkozn786 gs27ryjx lgua6ox4 aklxj7d9 w5hfluvg hc65txvk iolyd70e wgy57es2 zxlhj956 jv7qoxmb by2zvwh9 xv7mn2b1 ual53vbt z6ahtyk9 37awf5dc  \n```\n","source":"_posts/2022-11-26-实验结果.md","raw":"---\ntitle: 2022-11-26 实验结果\nshare: true\ntags:\n  - uncategory\ndate: 2022-11-26 06:30:09 \nupdated: 2022-12-30 10:25:34 \ncategories: research \naliases:\n  - 2022-11-26 实验结果\n  - 2022-11-26实验结果\n---\n\n\n\n上次结果: <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>.  \n\n## 摘要\n\n### ==目标==\n\n按 **维度高中低，异常率高中低** 的分类标准, 挑选 9 个 ODDS 数据集 ( <a href='{% post_path ODDS-数据集划分标准及常见问题 %}'>ODDS-数据集划分标准及常见问题</a>) 并进行实验, 实验方法参考本文 \" 实验设计章节 \".\n\n### ==实验结论==\n\n九个数据集上:\n\n- 3 个数据集的 $AUC^*$ ==不符合预期==\n- 5 个数据集的 $Test_{loss} *$ ==不符合预期==.\n- 9 个 (所有)**Training time** 全部符合预期\n\n细节:\n\n- **Training time(minutes)**: 在所有数据集上, 训练时间都随 $r$ 的降低而降低, 与 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 一致.\n- $AUC^*$(==预期: ==随着训练数据量的降低, AUC 降低 )\n\t- **符合预期**: 与 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 一致 (或我认为正确) 实验 (随着训练数据数据量的降低, AUC 减少)\n\t\t- Fig.2 Dataset MNIST\n\t\t- Fig.3 Dataset MUSK\n\t\t- Fig.4 Dataset SATELLITE\n\t\t- Fig.9 Dataset MAMMOGRAPHY )\n\t- ==不符合预期==\n\t\t- Fig.1 Dataset ARRHYTHMIA: 训练数据量减少, $AUC^*$ 先增后降低  \n\t\t- Fig.5 Dataset LETTER : AUC 在训练数据很少的时候升高了 (期望降低)  \n\t\t- Fig.9 Dataset MAMMOGRAPHY: 在 $r=1/4$ 的 $AUC^*$ 大于 $r=1/8$ 的 $AUC^*$  \n- $Test_{loss} *$ ,下文简称 loss (==预期: ==: 随着训练数据量的降低, $Test_{loss} *$ 增加)  \n\t- ==不符合预期== 的实验 ( 训练数据量减少, loss 反而降低)\n\t\t- Fig.2 Dataset MNIST\n\t\t- Fig.5 Dataset LETTER  \n\t\t- Fig.6 Dataset OPTDIGITS\n\t\t- Fig.8 Dataset ANNTHYROID  \n\t\t- Fig.9 Dataset MAMMOGRAPHY  \n<embed src='/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf' width='100%' height='750' type='application/pdf'>\n\n### ==可能原因分析==\n\n#### 不符合预期 AUC 可能原因分析\n\n- Fig.1 Dataset ARRHYTHMIA: 训练数据量减少, $AUC^*$ 先增后降低  \n\t- ==原因猜想== (没有实验证明): 数据量少 (452 条), 维度高 (274 维) 导致过拟合\n- Fig.5 Dataset LETTER : AUC 在训练数据很少 ($r=1/32,r=1/64$) 的时候升高了 (期望降低)  \n\t- ==原因猜想==: 数据量少 (在 $r=1/32,r=1/64$ 是, 训练数据分别只有 50/25 条 ), 导致过拟合 (dim=32)\n- Fig.9 Dataset MAMMOGRAPHY: 在 $r=1/4$ 的 $AUC^*$ 小于 $r=1/8$ 的 $AUC^*$  \n\t- ==原因猜想==: 在 $r=1/4$ 时抽到的训练数据没有代表性, 而 $r=1/8$ 时抽到的数据更有代表性. (数据量 11183, dim=6)\n\n#### Loss 不符合预期可能原因分析\n\n不符合预期的实验 ( 训练数据量减少, loss 反而降低)  \n\n- Fig.2 Dataset MNIST  \n\t- ==原因猜想== 模型没有学到数据的特征, 得到的 loss 随机的\n- Fig.5 Dataset LETTER  \n\t- ==原因猜想== 暂时想不出来\n- Fig.6 Dataset OPTDIGITS\n\t- ==原因猜想== 暂时想不出来\n\t- 对于的 loss 图像 ![static/attachment/Pasted image 20221201110026.png](/images/990e8dc15dfc3d4fbf6b0bc347ce50c486580b24.png)\n- Fig.8 Dataset ANNTHYROID / Fig.9 Dataset MAMMOGRAPHY\n\t- - ==原因猜想== 两个数据都是低纬数据, 是不是有什么关联?\n\t- loss 展示 ![static/attachment/Pasted image 20221201110235.png](/images/3e468fe601bb6c15b0ac6f549c0c5e45c728f9d1.png)\n\n### 本次工作与上次工作的不同之处\n\n- 数据集从 3 个变为 9 个 (https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn)\n- 训练集的抽样比例增加了 **两个抽取比例 $1/32,1/64$**, 即由 $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24\\right\\}$ 变为 $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24, 1/32, 1/64 \\right\\}$\n- 损失函数替换为 Mean Square Error(MSE)(原概率损失 (binary cross-entropy)\n- 数据集归一化处理 (原标准化); 标注化假设原始数据服从高斯分布, 但是这里我们不清楚 ODDS 的数据是否服从高斯分布, 因此为了稳妥, 我们采用归一化.\n- 本次更多工作详细请参考章节 \" 本次工作内容总结 \".  \n\n## 实验背景/方法/目标\n\n==背景== 在时间序列异常检测算法的超参数优化的任务中，==方法== 在 1) 超参数空间 和 2) 训练数据 中使用随机抽样 (Random Sampling, RS) 算法，==目标== 期望以 1) 更短的时间 2) 获得一个精度相似的模型。\n\n## 实验设计\n\n==超参数与模型设置== 实验在 VAE 的 11 个超参数（见 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 附录 1）空间中 (超参数空间指: 所有的超参数可能取值的笛卡尔积)，使用随机抽样算法（RS）抽取 32 组超参数样本 $HP_i$, $i \\in \\left\\{1,2,\\dots,32\\right\\}$，构成 32 个不同的 VAE 模型 $VAE_{hp_i}$ 每个\n\n==数据集选择及处理== 从 ODDS 中的按照 **维度高中低，异常率高中低** 的方法选择数据量不同的 [9 个数据集]( https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn) $D_i$, $i$ 表示数据集的序号, $i \\in \\{1,\\dots,9 \\}$，并按照 $6:4$ 的比例将每个数据集划分为训练集 (training set) 与测试集 (test set), 所有的数据均被归一化处理 ($\\bar{x}=\\frac{x-min(x)}{max(x)-min(x)}$)\n\n==训练集抽样设置== 为了增加模型的训练速度，使用 RS 在训练集 (training set) 中抽取不同比率 ($r$) 的 子数据集分别训练每个模型 $VAE_{hp_i}$, 其中, $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24, 1/32, 1/64 \\right\\}$; 例如, $r=1/1$ 表示使用全部的训练集 (training set) 训练所有的模型 $VAE_{hp_i}$，$r=1/8$ 表示使用训练集的 $1/8$ (subset, 占总训练集的 $1/8$) 训练所有模型 $VAE_{hp_i}$。$VAE_{hp_i}^{D_{i_r}}$ 表示该 VAE 的超参数是 $hp_i$ ,其训练数据是从数据集 $D_i$ 中安装比例 $r$ 进行抽取的.\n\n==评估标准== 本文选择三个度量标准来度量模型的性能, 包括: $Test_{loss}*$ / $AUC^*$ / Training time.\n\n- 👉 $Test_{loss}*$ : 在每个数据集 $D_i$ 上, 我们会以不同的比例 $r$ 将 $D_i$ 的训练集间距分为多个数据集 $D_i^r$; 然后使用 $D_i^r$ 训练一组超参数不同的 VAE 模型 $VAE_{hp_i}$, 我们将 $D_i^r$ 训练的这一组模型记为 $VAE_{hp_i}^{D_{i_r}}$; 在本例中, $i \\in \\{1, 2, \\dots, 32\\}$, 因为在超参数空间中使用 RS 抽取了 32 组不同的超参数样本. 在 $VAE_{hp_i}^{D_{i_r}}$ 中, 存在一个模型 $VAE_{hp*}=\\arg \\min_{hp_i} (VAE_{loss_{test}})$ , 其具有最小的平均 (使用 $D_i$ 中的 test set 独立重复评估 $VAE_{hp*}$ 10 次) 测试误差 ($Test_{loss}*$ )\n- 👉 **$AUC^*$** : $VAE_{hp*}$ 的 AUC, 即 $VAE_{hp_i}^{D_{i_r}}$ 中 **损失最小的模型的 AUC.**\n- 👉 **Training time**: 在 $VAE_{hp_i}^{D_{i_r}}$ 中, 使用数据集 $D_{i_r}$ (训练集) 训练每个模型 $VAE_{hp_i}$ 的训练时间总和, 其中, $VAE_{hp_i}, i \\in \\{1, 2, \\dots, 32\\}$ .\n\n## 本次工作内容总结\n\n- 按照<u>异常率</u> 与 <u>维度</u> 高中低重新划分数据集. 划分标准: <a href='{% post_path ODDS-数据集划分标准及常见问题 %}'>ODDS-数据集划分标准及常见问题</a>\n- <u>修改 VAE 的损失函数</u>. 将 binary cross-entropy 修改为 mean_absolute_error.\n\t- 原因: 基于 binary crossentropy 的损失差不多趋于 $-\\inf$ , 表现异常, 详细参考 <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>\n\t- 证明 VAE 模型的正确性. 通过 5 个例子, 测试损失函数为 mean_absolute_error 的 VAE. <a href='{% post_path vae_mse_example-1.pdf %}'>vae_mse_example-1.pdf</a>\n- 调研数据处理方式 (是归一化还是标注化) <a href='{% post_path 时间序列异常检测论文中常见的数据预处理方式 %}'>时间序列异常检测论文中常见的数据预处理方式</a>,\n\t- 结论: 都有, 只是场景不同\n\t- 调研方式: 读论文\n- 将 ODDS 数据集的标注化处理方式转为归一化 ($\\bar{x}=\\frac{x-min(x)}{max(x)-min(x)}$)\n\t- 原因: 标注化数据的 <u>前提是</u> 数据 follow normal distribution, if the data does not follow normal distribution then this will make problems. (Ali, Peshawa Jamal Muhammad, et al. \"Data normalization and standardization: a technical report.\" Mach Learn Tech Rep 1.1 (2014): 1-6.)\n\t- 对于 ODDS 的数据集来说, 其是否 follow normal distribution 我并不知道, 也不关心, 因此就直接采用归一化的方式\n- 下载并处理分好的 9 个数据集 https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn\n- 验证数据处理的正确性.\n\t- 结论: 正确处理.\n\t- 通过可视化已处理的 9 个数据集, 其所有数据的取值 $x \\in [0,1]$ , 表示数据处理正确. 可视化后的九个数据的概览图如下图所示:![static/attachment/Pasted image 20221126203842.png](/images/e058a82acde3fe0d917cc172375c1838b5fa959e.png)\n- 解决 NNI 实验失败后, 无法接着训练的问题\n- 跑完 9 个数据集上的实验结果 <embed src='/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf' width='100%' height='750' type='application/pdf'>\n\n## 实验备份\n\n```python\nzip -r 2022-11-26.zip f9omc0ti mg7btkzy xt3g5y7s dq7frc69 ujezgyc4 egzpk3c1 8u7o9t6l 0zv9usjd h0l8zpnv ejmah84w adosi6x4 c29h1fri kx4s23hg qdj380ob ks1iw8ph 2ua34em8 02tv5uw7 8qjk1fou bxv91cjs pbce0f6w rulezjsn zhnglwb2 tjysp3im xdsyi2wq qrg62t8a 7czejnsg zqjh4m7x zb8e5wcf t1q34liz l28n7kxe run7g18q 1x9z4bhe melfx54w 7g06dwbv z9q20tkc mr8zjhc4 asu96p8r rbny563z il8asyge i52eo9mp m7lu0nrj noeuqtv7 fbypvi31 0i4yht2j hxp8t1ye jid5sv0h a8dewtzx 98un4k3l s9io7k4d lr8u1n3c 4jvocizd y9f6ecml dog2qumk rvshyopu nauvd3xp 3l71tsdu b4ljh703 1vfhm3sb lbs239pt xlicmvbn 24psw53r 7horcnk5 xbnhjo07 olu4zqg1 jxtlg50k iwktemax liym5tzq plvxs4ce vtfqg7dh 0i3ferbc zc1td3s0 7ymsz4wj 2gnb6al8 7g1xqhyl uae01czm in4sbvl6 swcgdpol lk30ae7r yktc59v4 b6dzql1h wq618mf9 fs0rvdbg pkozn786 gs27ryjx lgua6ox4 aklxj7d9 w5hfluvg hc65txvk iolyd70e wgy57es2 zxlhj956 jv7qoxmb by2zvwh9 xv7mn2b1 ual53vbt z6ahtyk9 37awf5dc  \n```\n","slug":"2022-11-26-实验结果","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709t001s4cv9gal19bo0","content":"<p>上次结果: <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a>.</p>\n<h2 id=\"摘要\">摘要</h2>\n<h3 id=\"目标\"><mark>目标</mark></h3>\n<p>按 <strong>维度高中低，异常率高中低</strong> 的分类标准, 挑选 9 个 ODDS 数据集 ( <a href='/research/eeccc2c79565.html'>ODDS-数据集划分标准及常见问题</a>) 并进行实验, 实验方法参考本文 &quot; 实验设计章节 &quot;.</p>\n<h3 id=\"实验结论\"><mark>实验结论</mark></h3>\n<p>九个数据集上:</p>\n<ul>\n<li>3 个数据集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> <mark>不符合预期</mark></li>\n<li>5 个数据集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss} *</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> <mark>不符合预期</mark>.</li>\n<li>9 个 (所有)<strong>Training time</strong> 全部符合预期</li>\n</ul>\n<p>细节:</p>\n<ul>\n<li><strong>Training time(minutes)</strong>: 在所有数据集上, 训练时间都随 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 的降低而降低, 与 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 一致.</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span>(==预期: ==随着训练数据量的降低, AUC 降低 )\n<ul>\n<li><strong>符合预期</strong>: 与 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 一致 (或我认为正确) 实验 (随着训练数据数据量的降低, AUC 减少)\n<ul>\n<li>Fig.2 Dataset MNIST</li>\n<li>Fig.3 Dataset MUSK</li>\n<li>Fig.4 Dataset SATELLITE</li>\n<li>Fig.9 Dataset MAMMOGRAPHY )</li>\n</ul>\n</li>\n<li><mark>不符合预期</mark>\n<ul>\n<li>Fig.1 Dataset ARRHYTHMIA: 训练数据量减少, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 先增后降低</li>\n<li>Fig.5 Dataset LETTER : AUC 在训练数据很少的时候升高了 (期望降低)</li>\n<li>Fig.9 Dataset MAMMOGRAPHY: 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 大于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss} *</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> ,下文简称 loss (==预期: ==: 随着训练数据量的降低, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss} *</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> 增加)\n<ul>\n<li><mark>不符合预期</mark> 的实验 ( 训练数据量减少, loss 反而降低)\n<ul>\n<li>Fig.2 Dataset MNIST</li>\n<li>Fig.5 Dataset LETTER</li>\n<li>Fig.6 Dataset OPTDIGITS</li>\n<li>Fig.8 Dataset ANNTHYROID</li>\n<li>Fig.9 Dataset MAMMOGRAPHY<br>\n<embed src='/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf' width='100%' height='750' type='application/pdf'></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"可能原因分析\"><mark>可能原因分析</mark></h3>\n<h4 id=\"不符合预期-AUC-可能原因分析\">不符合预期 AUC 可能原因分析</h4>\n<ul>\n<li>Fig.1 Dataset ARRHYTHMIA: 训练数据量减少, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 先增后降低\n<ul>\n<li><mark>原因猜想</mark> (没有实验证明): 数据量少 (452 条), 维度高 (274 维) 导致过拟合</li>\n</ul>\n</li>\n<li>Fig.5 Dataset LETTER : AUC 在训练数据很少 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn></mrow><annotation encoding=\"application/x-tex\">r=1/32,r=1/64</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/64</span></span></span></span>) 的时候升高了 (期望降低)\n<ul>\n<li><mark>原因猜想</mark>: 数据量少 (在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn></mrow><annotation encoding=\"application/x-tex\">r=1/32,r=1/64</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/64</span></span></span></span> 是, 训练数据分别只有 50/25 条 ), 导致过拟合 (dim=32)</li>\n</ul>\n</li>\n<li>Fig.9 Dataset MAMMOGRAPHY: 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 小于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span>\n<ul>\n<li><mark>原因猜想</mark>: 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 时抽到的训练数据没有代表性, 而 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 时抽到的数据更有代表性. (数据量 11183, dim=6)</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Loss-不符合预期可能原因分析\">Loss 不符合预期可能原因分析</h4>\n<p>不符合预期的实验 ( 训练数据量减少, loss 反而降低)</p>\n<ul>\n<li>Fig.2 Dataset MNIST\n<ul>\n<li><mark>原因猜想</mark> 模型没有学到数据的特征, 得到的 loss 随机的</li>\n</ul>\n</li>\n<li>Fig.5 Dataset LETTER\n<ul>\n<li><mark>原因猜想</mark> 暂时想不出来</li>\n</ul>\n</li>\n<li>Fig.6 Dataset OPTDIGITS\n<ul>\n<li><mark>原因猜想</mark> 暂时想不出来</li>\n<li>对于的 loss 图像 <img src=\"/images/990e8dc15dfc3d4fbf6b0bc347ce50c486580b24.png\" alt=\"static/attachment/Pasted image 20221201110026.png\"></li>\n</ul>\n</li>\n<li>Fig.8 Dataset ANNTHYROID / Fig.9 Dataset MAMMOGRAPHY\n<ul>\n<li>\n<ul>\n<li><mark>原因猜想</mark> 两个数据都是低纬数据, 是不是有什么关联?</li>\n</ul>\n</li>\n<li>loss 展示 <img src=\"/images/3e468fe601bb6c15b0ac6f549c0c5e45c728f9d1.png\" alt=\"static/attachment/Pasted image 20221201110235.png\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"本次工作与上次工作的不同之处\">本次工作与上次工作的不同之处</h3>\n<ul>\n<li>数据集从 3 个变为 9 个 (<a href=\"https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn\">https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn</a>)</li>\n<li>训练集的抽样比例增加了 <strong>两个抽取比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn></mrow><annotation encoding=\"application/x-tex\">1/32,1/64</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span></span></span></span></strong>, 即由 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/16</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/24</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span> 变为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24, 1/32, 1/64 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/16</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/24</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span></li>\n<li>损失函数替换为 Mean Square Error(MSE)(原概率损失 (binary cross-entropy)</li>\n<li>数据集归一化处理 (原标准化); 标注化假设原始数据服从高斯分布, 但是这里我们不清楚 ODDS 的数据是否服从高斯分布, 因此为了稳妥, 我们采用归一化.</li>\n<li>本次更多工作详细请参考章节 &quot; 本次工作内容总结 &quot;.</li>\n</ul>\n<h2 id=\"实验背景-方法-目标\">实验背景/方法/目标</h2>\n<p><mark>背景</mark> 在时间序列异常检测算法的超参数优化的任务中，<mark>方法</mark> 在 1) 超参数空间 和 2) 训练数据 中使用随机抽样 (Random Sampling, RS) 算法，<mark>目标</mark> 期望以 1) 更短的时间 2) 获得一个精度相似的模型。</p>\n<h2 id=\"实验设计\">实验设计</h2>\n<p><mark>超参数与模型设置</mark> 实验在 VAE 的 11 个超参数（见 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 附录 1）空间中 (超参数空间指: 所有的超参数可能取值的笛卡尔积)，使用随机抽样算法（RS）抽取 32 组超参数样本 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">i \\in \\left\\{1,2,\\dots,32\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>，构成 32 个不同的 VAE 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 每个</p>\n<p><mark>数据集选择及处理</mark> 从 ODDS 中的按照 <strong>维度高中低，异常率高中低</strong> 的方法选择数据量不同的 <a href=\"https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn\">9 个数据集</a> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 表示数据集的序号, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>9</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">i \\in \\{1,\\dots,9 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">9</span><span class=\"mclose\">}</span></span></span></span>，并按照 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>6</mn><mo>:</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">6:4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">4</span></span></span></span> 的比例将每个数据集划分为训练集 (training set) 与测试集 (test set), 所有的数据均被归一化处理 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>ˉ</mo></mover><mo>=</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\bar{x}=\\frac{x-min(x)}{max(x)-min(x)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5678em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\">x</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2222em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.53em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ma</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">min</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">min</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>)</p>\n<p><mark>训练集抽样设置</mark> 为了增加模型的训练速度，使用 RS 在训练集 (training set) 中抽取不同比率 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span>) 的 子数据集分别训练每个模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24, 1/32, 1/64 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/16</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/24</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>; 例如, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1/1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/1</span></span></span></span> 表示使用全部的训练集 (training set) 训练所有的模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 表示使用训练集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> (subset, 占总训练集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span>) 训练所有模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>。<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 表示该 VAE 的超参数是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">hp_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ,其训练数据是从数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 中安装比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 进行抽取的.</p>\n<p><mark>评估标准</mark> 本文选择三个度量标准来度量模型的性能, 包括: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss}*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> / <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> / Training time.</p>\n<ul>\n<li>👉 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss}*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> : 在每个数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 上, 我们会以不同的比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 将 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的训练集间距分为多个数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>D</mi><mi>i</mi><mi>r</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">D_i^r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.942em;vertical-align:-0.2587em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.4413em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2587em;\"><span></span></span></span></span></span></span></span></span></span>; 然后使用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>D</mi><mi>i</mi><mi>r</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">D_i^r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.942em;vertical-align:-0.2587em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.4413em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2587em;\"><span></span></span></span></span></span></span></span></span></span> 训练一组超参数不同的 VAE 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 我们将 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>D</mi><mi>i</mi><mi>r</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">D_i^r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.942em;vertical-align:-0.2587em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.4413em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2587em;\"><span></span></span></span></span></span></span></span></span></span> 训练的这一组模型记为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span>; 在本例中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">i \\in \\{1, 2, \\dots, 32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span>, 因为在超参数空间中使用 RS 抽取了 32 组不同的超参数样本. 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 中, 存在一个模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><mi>p</mi><mo>∗</mo></mrow></msub><mo>=</mo><mi>arg</mi><mo>⁡</mo><msub><mrow><mi>min</mi><mo>⁡</mo></mrow><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub><mo stretchy=\"false\">(</mo><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi></mrow></msub></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">VAE_{hp*}=\\arg \\min_{hp_i} (VAE_{loss_{test}})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mtight\">∗</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop\">min</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">os</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2963em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">es</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> , 其具有最小的平均 (使用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 中的 test set 独立重复评估 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><mi>p</mi><mo>∗</mo></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp*}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mtight\">∗</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 10 次) 测试误差 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss}*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> )</li>\n<li>👉 <strong><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span></strong> : <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><mi>p</mi><mo>∗</mo></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp*}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mtight\">∗</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 的 AUC, 即 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 中 <strong>损失最小的模型的 AUC.</strong></li>\n<li>👉 <strong>Training time</strong>: 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 中, 使用数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></mrow><annotation encoding=\"application/x-tex\">D_{i_r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1645em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> (训练集) 训练每个模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 的训练时间总和, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub><mo separator=\"true\">,</mo><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}, i \\in \\{1, 2, \\dots, 32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span> .</li>\n</ul>\n<h2 id=\"本次工作内容总结\">本次工作内容总结</h2>\n<ul>\n<li>按照<u>异常率</u> 与 <u>维度</u> 高中低重新划分数据集. 划分标准: <a href='/research/eeccc2c79565.html'>ODDS-数据集划分标准及常见问题</a></li>\n<li><u>修改 VAE 的损失函数</u>. 将 binary cross-entropy 修改为 mean_absolute_error.\n<ul>\n<li>原因: 基于 binary crossentropy 的损失差不多趋于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mi>inf</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">-\\inf</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">in<span style=\"margin-right:0.07778em;\">f</span></span></span></span></span> , 表现异常, 详细参考 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a></li>\n<li>证明 VAE 模型的正确性. 通过 5 个例子, 测试损失函数为 mean_absolute_error 的 VAE. <a href=''>vae_mse_example-1.pdf</a></li>\n</ul>\n</li>\n<li>调研数据处理方式 (是归一化还是标注化) <a href=''>时间序列异常检测论文中常见的数据预处理方式</a>,\n<ul>\n<li>结论: 都有, 只是场景不同</li>\n<li>调研方式: 读论文</li>\n</ul>\n</li>\n<li>将 ODDS 数据集的标注化处理方式转为归一化 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>ˉ</mo></mover><mo>=</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\bar{x}=\\frac{x-min(x)}{max(x)-min(x)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5678em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\">x</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2222em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.53em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ma</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">min</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">min</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>)\n<ul>\n<li>原因: 标注化数据的 <u>前提是</u> 数据 follow normal distribution, if the data does not follow normal distribution then this will make problems. (Ali, Peshawa Jamal Muhammad, et al. “Data normalization and standardization: a technical report.” Mach Learn Tech Rep 1.1 (2014): 1-6.)</li>\n<li>对于 ODDS 的数据集来说, 其是否 follow normal distribution 我并不知道, 也不关心, 因此就直接采用归一化的方式</li>\n</ul>\n</li>\n<li>下载并处理分好的 9 个数据集 <a href=\"https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn\">https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn</a></li>\n<li>验证数据处理的正确性.\n<ul>\n<li>结论: 正确处理.</li>\n<li>通过可视化已处理的 9 个数据集, 其所有数据的取值 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">x \\in [0,1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> , 表示数据处理正确. 可视化后的九个数据的概览图如下图所示:<img src=\"/images/e058a82acde3fe0d917cc172375c1838b5fa959e.png\" alt=\"static/attachment/Pasted image 20221126203842.png\"></li>\n</ul>\n</li>\n<li>解决 NNI 实验失败后, 无法接着训练的问题</li>\n<li>跑完 9 个数据集上的实验结果 <embed src='/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf' width='100%' height='750' type='application/pdf'></li>\n</ul>\n<h2 id=\"实验备份\">实验备份</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r <span class=\"number\">2022</span>-<span class=\"number\">11</span>-<span class=\"number\">26.</span><span class=\"built_in\">zip</span> f9omc0ti mg7btkzy xt3g5y7s dq7frc69 ujezgyc4 egzpk3c1 8u7o9t6l 0zv9usjd h0l8zpnv ejmah84w adosi6x4 c29h1fri kx4s23hg qdj380ob ks1iw8ph 2ua34em8 02tv5uw7 8qjk1fou bxv91cjs pbce0f6w rulezjsn zhnglwb2 tjysp3im xdsyi2wq qrg62t8a 7czejnsg zqjh4m7x zb8e5wcf t1q34liz l28n7kxe run7g18q 1x9z4bhe melfx54w 7g06dwbv z9q20tkc mr8zjhc4 asu96p8r rbny563z il8asyge i52eo9mp m7lu0nrj noeuqtv7 fbypvi31 0i4yht2j hxp8t1ye jid5sv0h a8dewtzx 98un4k3l s9io7k4d lr8u1n3c 4jvocizd y9f6ecml dog2qumk rvshyopu nauvd3xp 3l71tsdu b4ljh703 1vfhm3sb lbs239pt xlicmvbn 24psw53r 7horcnk5 xbnhjo07 olu4zqg1 jxtlg50k iwktemax liym5tzq plvxs4ce vtfqg7dh 0i3ferbc zc1td3s0 7ymsz4wj 2gnb6al8 7g1xqhyl uae01czm in4sbvl6 swcgdpol lk30ae7r yktc59v4 b6dzql1h wq618mf9 fs0rvdbg pkozn786 gs27ryjx lgua6ox4 aklxj7d9 w5hfluvg hc65txvk iolyd70e wgy57es2 zxlhj956 jv7qoxmb by2zvwh9 xv7mn2b1 ual53vbt z6ahtyk9 37awf5dc  </span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover1.JPG","excerpt":"","more":"<p>上次结果: <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a>.</p>\n<h2 id=\"摘要\">摘要</h2>\n<h3 id=\"目标\"><mark>目标</mark></h3>\n<p>按 <strong>维度高中低，异常率高中低</strong> 的分类标准, 挑选 9 个 ODDS 数据集 ( <a href='/research/eeccc2c79565.html'>ODDS-数据集划分标准及常见问题</a>) 并进行实验, 实验方法参考本文 &quot; 实验设计章节 &quot;.</p>\n<h3 id=\"实验结论\"><mark>实验结论</mark></h3>\n<p>九个数据集上:</p>\n<ul>\n<li>3 个数据集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> <mark>不符合预期</mark></li>\n<li>5 个数据集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss} *</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> <mark>不符合预期</mark>.</li>\n<li>9 个 (所有)<strong>Training time</strong> 全部符合预期</li>\n</ul>\n<p>细节:</p>\n<ul>\n<li><strong>Training time(minutes)</strong>: 在所有数据集上, 训练时间都随 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 的降低而降低, 与 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 一致.</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span>(==预期: ==随着训练数据量的降低, AUC 降低 )\n<ul>\n<li><strong>符合预期</strong>: 与 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 一致 (或我认为正确) 实验 (随着训练数据数据量的降低, AUC 减少)\n<ul>\n<li>Fig.2 Dataset MNIST</li>\n<li>Fig.3 Dataset MUSK</li>\n<li>Fig.4 Dataset SATELLITE</li>\n<li>Fig.9 Dataset MAMMOGRAPHY )</li>\n</ul>\n</li>\n<li><mark>不符合预期</mark>\n<ul>\n<li>Fig.1 Dataset ARRHYTHMIA: 训练数据量减少, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 先增后降低</li>\n<li>Fig.5 Dataset LETTER : AUC 在训练数据很少的时候升高了 (期望降低)</li>\n<li>Fig.9 Dataset MAMMOGRAPHY: 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 大于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss} *</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> ,下文简称 loss (==预期: ==: 随着训练数据量的降低, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss} *</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> 增加)\n<ul>\n<li><mark>不符合预期</mark> 的实验 ( 训练数据量减少, loss 反而降低)\n<ul>\n<li>Fig.2 Dataset MNIST</li>\n<li>Fig.5 Dataset LETTER</li>\n<li>Fig.6 Dataset OPTDIGITS</li>\n<li>Fig.8 Dataset ANNTHYROID</li>\n<li>Fig.9 Dataset MAMMOGRAPHY<br>\n<embed src='/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf' width='100%' height='750' type='application/pdf'></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"可能原因分析\"><mark>可能原因分析</mark></h3>\n<h4 id=\"不符合预期-AUC-可能原因分析\">不符合预期 AUC 可能原因分析</h4>\n<ul>\n<li>Fig.1 Dataset ARRHYTHMIA: 训练数据量减少, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 先增后降低\n<ul>\n<li><mark>原因猜想</mark> (没有实验证明): 数据量少 (452 条), 维度高 (274 维) 导致过拟合</li>\n</ul>\n</li>\n<li>Fig.5 Dataset LETTER : AUC 在训练数据很少 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn></mrow><annotation encoding=\"application/x-tex\">r=1/32,r=1/64</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/64</span></span></span></span>) 的时候升高了 (期望降低)\n<ul>\n<li><mark>原因猜想</mark>: 数据量少 (在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn></mrow><annotation encoding=\"application/x-tex\">r=1/32,r=1/64</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/64</span></span></span></span> 是, 训练数据分别只有 50/25 条 ), 导致过拟合 (dim=32)</li>\n</ul>\n</li>\n<li>Fig.9 Dataset MAMMOGRAPHY: 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 小于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span>\n<ul>\n<li><mark>原因猜想</mark>: 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 时抽到的训练数据没有代表性, 而 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 时抽到的数据更有代表性. (数据量 11183, dim=6)</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Loss-不符合预期可能原因分析\">Loss 不符合预期可能原因分析</h4>\n<p>不符合预期的实验 ( 训练数据量减少, loss 反而降低)</p>\n<ul>\n<li>Fig.2 Dataset MNIST\n<ul>\n<li><mark>原因猜想</mark> 模型没有学到数据的特征, 得到的 loss 随机的</li>\n</ul>\n</li>\n<li>Fig.5 Dataset LETTER\n<ul>\n<li><mark>原因猜想</mark> 暂时想不出来</li>\n</ul>\n</li>\n<li>Fig.6 Dataset OPTDIGITS\n<ul>\n<li><mark>原因猜想</mark> 暂时想不出来</li>\n<li>对于的 loss 图像 <img src=\"/images/990e8dc15dfc3d4fbf6b0bc347ce50c486580b24.png\" alt=\"static/attachment/Pasted image 20221201110026.png\"></li>\n</ul>\n</li>\n<li>Fig.8 Dataset ANNTHYROID / Fig.9 Dataset MAMMOGRAPHY\n<ul>\n<li>\n<ul>\n<li><mark>原因猜想</mark> 两个数据都是低纬数据, 是不是有什么关联?</li>\n</ul>\n</li>\n<li>loss 展示 <img src=\"/images/3e468fe601bb6c15b0ac6f549c0c5e45c728f9d1.png\" alt=\"static/attachment/Pasted image 20221201110235.png\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"本次工作与上次工作的不同之处\">本次工作与上次工作的不同之处</h3>\n<ul>\n<li>数据集从 3 个变为 9 个 (<a href=\"https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn\">https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn</a>)</li>\n<li>训练集的抽样比例增加了 <strong>两个抽取比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn></mrow><annotation encoding=\"application/x-tex\">1/32,1/64</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span></span></span></span></strong>, 即由 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/16</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/24</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span> 变为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24, 1/32, 1/64 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/16</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/24</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span></li>\n<li>损失函数替换为 Mean Square Error(MSE)(原概率损失 (binary cross-entropy)</li>\n<li>数据集归一化处理 (原标准化); 标注化假设原始数据服从高斯分布, 但是这里我们不清楚 ODDS 的数据是否服从高斯分布, 因此为了稳妥, 我们采用归一化.</li>\n<li>本次更多工作详细请参考章节 &quot; 本次工作内容总结 &quot;.</li>\n</ul>\n<h2 id=\"实验背景-方法-目标\">实验背景/方法/目标</h2>\n<p><mark>背景</mark> 在时间序列异常检测算法的超参数优化的任务中，<mark>方法</mark> 在 1) 超参数空间 和 2) 训练数据 中使用随机抽样 (Random Sampling, RS) 算法，<mark>目标</mark> 期望以 1) 更短的时间 2) 获得一个精度相似的模型。</p>\n<h2 id=\"实验设计\">实验设计</h2>\n<p><mark>超参数与模型设置</mark> 实验在 VAE 的 11 个超参数（见 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 附录 1）空间中 (超参数空间指: 所有的超参数可能取值的笛卡尔积)，使用随机抽样算法（RS）抽取 32 组超参数样本 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">i \\in \\left\\{1,2,\\dots,32\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>，构成 32 个不同的 VAE 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 每个</p>\n<p><mark>数据集选择及处理</mark> 从 ODDS 中的按照 <strong>维度高中低，异常率高中低</strong> 的方法选择数据量不同的 <a href=\"https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn\">9 个数据集</a> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 表示数据集的序号, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>9</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">i \\in \\{1,\\dots,9 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">9</span><span class=\"mclose\">}</span></span></span></span>，并按照 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>6</mn><mo>:</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">6:4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">4</span></span></span></span> 的比例将每个数据集划分为训练集 (training set) 与测试集 (test set), 所有的数据均被归一化处理 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>ˉ</mo></mover><mo>=</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\bar{x}=\\frac{x-min(x)}{max(x)-min(x)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5678em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\">x</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2222em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.53em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ma</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">min</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">min</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>)</p>\n<p><mark>训练集抽样设置</mark> 为了增加模型的训练速度，使用 RS 在训练集 (training set) 中抽取不同比率 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span>) 的 子数据集分别训练每个模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24, 1/32, 1/64 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/16</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/24</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>; 例如, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1/1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/1</span></span></span></span> 表示使用全部的训练集 (training set) 训练所有的模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 表示使用训练集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> (subset, 占总训练集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span>) 训练所有模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>。<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 表示该 VAE 的超参数是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">hp_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> ,其训练数据是从数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 中安装比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 进行抽取的.</p>\n<p><mark>评估标准</mark> 本文选择三个度量标准来度量模型的性能, 包括: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss}*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> / <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> / Training time.</p>\n<ul>\n<li>👉 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss}*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> : 在每个数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 上, 我们会以不同的比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 将 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的训练集间距分为多个数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>D</mi><mi>i</mi><mi>r</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">D_i^r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.942em;vertical-align:-0.2587em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.4413em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2587em;\"><span></span></span></span></span></span></span></span></span></span>; 然后使用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>D</mi><mi>i</mi><mi>r</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">D_i^r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.942em;vertical-align:-0.2587em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.4413em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2587em;\"><span></span></span></span></span></span></span></span></span></span> 训练一组超参数不同的 VAE 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 我们将 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>D</mi><mi>i</mi><mi>r</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">D_i^r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.942em;vertical-align:-0.2587em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.4413em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2587em;\"><span></span></span></span></span></span></span></span></span></span> 训练的这一组模型记为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span>; 在本例中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">i \\in \\{1, 2, \\dots, 32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span>, 因为在超参数空间中使用 RS 抽取了 32 组不同的超参数样本. 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 中, 存在一个模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><mi>p</mi><mo>∗</mo></mrow></msub><mo>=</mo><mi>arg</mi><mo>⁡</mo><msub><mrow><mi>min</mi><mo>⁡</mo></mrow><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub><mo stretchy=\"false\">(</mo><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi></mrow></msub></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">VAE_{hp*}=\\arg \\min_{hp_i} (VAE_{loss_{test}})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mtight\">∗</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop\">min</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">os</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2963em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">es</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> , 其具有最小的平均 (使用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 中的 test set 独立重复评估 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><mi>p</mi><mo>∗</mo></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp*}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mtight\">∗</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 10 次) 测试误差 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>e</mi><mi>s</mi><msub><mi>t</mi><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow></msub><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">Test_{loss}*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">es</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">oss</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∗</span></span></span></span> )</li>\n<li>👉 <strong><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>U</mi><msup><mi>C</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">AUC^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span></strong> : <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><mi>p</mi><mo>∗</mo></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp*}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mtight\">∗</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 的 AUC, 即 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 中 <strong>损失最小的模型的 AUC.</strong></li>\n<li>👉 <strong>Training time</strong>: 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msubsup><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></msubsup></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}^{D_{i_r}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4606em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0232em;\"><span style=\"top:-2.3987em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.2449em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2306em;\"><span style=\"top:-2.3em;margin-left:0em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2859em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 中, 使用数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><msub><mi>i</mi><mi>r</mi></msub></msub></mrow><annotation encoding=\"application/x-tex\">D_{i_r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1645em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> (训练集) 训练每个模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 的训练时间总和, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub><mo separator=\"true\">,</mo><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}, i \\in \\{1, 2, \\dots, 32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span> .</li>\n</ul>\n<h2 id=\"本次工作内容总结\">本次工作内容总结</h2>\n<ul>\n<li>按照<u>异常率</u> 与 <u>维度</u> 高中低重新划分数据集. 划分标准: <a href='/research/eeccc2c79565.html'>ODDS-数据集划分标准及常见问题</a></li>\n<li><u>修改 VAE 的损失函数</u>. 将 binary cross-entropy 修改为 mean_absolute_error.\n<ul>\n<li>原因: 基于 binary crossentropy 的损失差不多趋于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mi>inf</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">-\\inf</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">in<span style=\"margin-right:0.07778em;\">f</span></span></span></span></span> , 表现异常, 详细参考 <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a></li>\n<li>证明 VAE 模型的正确性. 通过 5 个例子, 测试损失函数为 mean_absolute_error 的 VAE. <a href=''>vae_mse_example-1.pdf</a></li>\n</ul>\n</li>\n<li>调研数据处理方式 (是归一化还是标注化) <a href=''>时间序列异常检测论文中常见的数据预处理方式</a>,\n<ul>\n<li>结论: 都有, 只是场景不同</li>\n<li>调研方式: 读论文</li>\n</ul>\n</li>\n<li>将 ODDS 数据集的标注化处理方式转为归一化 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>ˉ</mo></mover><mo>=</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\bar{x}=\\frac{x-min(x)}{max(x)-min(x)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5678em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\">x</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2222em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.53em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ma</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">min</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">min</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>)\n<ul>\n<li>原因: 标注化数据的 <u>前提是</u> 数据 follow normal distribution, if the data does not follow normal distribution then this will make problems. (Ali, Peshawa Jamal Muhammad, et al. “Data normalization and standardization: a technical report.” Mach Learn Tech Rep 1.1 (2014): 1-6.)</li>\n<li>对于 ODDS 的数据集来说, 其是否 follow normal distribution 我并不知道, 也不关心, 因此就直接采用归一化的方式</li>\n</ul>\n</li>\n<li>下载并处理分好的 9 个数据集 <a href=\"https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn\">https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=7ersyn</a></li>\n<li>验证数据处理的正确性.\n<ul>\n<li>结论: 正确处理.</li>\n<li>通过可视化已处理的 9 个数据集, 其所有数据的取值 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">x \\in [0,1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> , 表示数据处理正确. 可视化后的九个数据的概览图如下图所示:<img src=\"/images/e058a82acde3fe0d917cc172375c1838b5fa959e.png\" alt=\"static/attachment/Pasted image 20221126203842.png\"></li>\n</ul>\n</li>\n<li>解决 NNI 实验失败后, 无法接着训练的问题</li>\n<li>跑完 9 个数据集上的实验结果 <embed src='/images/b23c0bd9ae3daf506c0007c5ef379485485e1226.pdf' width='100%' height='750' type='application/pdf'></li>\n</ul>\n<h2 id=\"实验备份\">实验备份</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r <span class=\"number\">2022</span>-<span class=\"number\">11</span>-<span class=\"number\">26.</span><span class=\"built_in\">zip</span> f9omc0ti mg7btkzy xt3g5y7s dq7frc69 ujezgyc4 egzpk3c1 8u7o9t6l 0zv9usjd h0l8zpnv ejmah84w adosi6x4 c29h1fri kx4s23hg qdj380ob ks1iw8ph 2ua34em8 02tv5uw7 8qjk1fou bxv91cjs pbce0f6w rulezjsn zhnglwb2 tjysp3im xdsyi2wq qrg62t8a 7czejnsg zqjh4m7x zb8e5wcf t1q34liz l28n7kxe run7g18q 1x9z4bhe melfx54w 7g06dwbv z9q20tkc mr8zjhc4 asu96p8r rbny563z il8asyge i52eo9mp m7lu0nrj noeuqtv7 fbypvi31 0i4yht2j hxp8t1ye jid5sv0h a8dewtzx 98un4k3l s9io7k4d lr8u1n3c 4jvocizd y9f6ecml dog2qumk rvshyopu nauvd3xp 3l71tsdu b4ljh703 1vfhm3sb lbs239pt xlicmvbn 24psw53r 7horcnk5 xbnhjo07 olu4zqg1 jxtlg50k iwktemax liym5tzq plvxs4ce vtfqg7dh 0i3ferbc zc1td3s0 7ymsz4wj 2gnb6al8 7g1xqhyl uae01czm in4sbvl6 swcgdpol lk30ae7r yktc59v4 b6dzql1h wq618mf9 fs0rvdbg pkozn786 gs27ryjx lgua6ox4 aklxj7d9 w5hfluvg hc65txvk iolyd70e wgy57es2 zxlhj956 jv7qoxmb by2zvwh9 xv7mn2b1 ual53vbt z6ahtyk9 37awf5dc  </span><br></pre></td></tr></table></figure>\n"},{"title":"2022-11-25 实验结果","share":true,"date":"2022-11-25T02:40:51.000Z","updated":"2022-12-30T05:17:09.000Z","aliases":["2022-11-25实验结果","2022-11-25 实验结果","2022-11-25 实验交流汇报","2022-11-25 实验结果"],"_content":"\n\n\n这次的实验结果感觉能用, 请李老师评估一下是否能用\n\n## 实验背景/方法/目标\n\n==背景== 在超参数优化的任务中，==方法== 在 1) 超参数空间 和 2) 训练数据 中使用随机抽样 (Random Sampling, RS) 算法，==目标== 期望以更短的时间，获得一个精度相似的模型。\n\n## 实验设计\n\n==超参数与模型设置== 实验在 VAE 的 11 个超参数（见附录 1）空间中 (超参数空间指: 所有的超参数取值范围的笛卡尔积)，使用随机抽样算法（RS）抽取 32 组超参数样本 $HP_i$, $i \\in \\left\\{1,2,\\dots,32\\right\\}$，构成 32 个不同的 VAE 模型 $VAE_{hp_i}$。\n\n==数据集选择及处理== 从 ODDS 中的选择数据量不同的三个数据集 $D_i$, $i \\in \\{THYROID,SATELLITE,MUSK\\}$（附录 2），并按照 $6:4$ 的比例将数据集划分为训练集 (training set) 与测试集 (test set), 所有的数据均被标准化处理 ($\\bar{x}=\\frac{x-mean}{std}$)\n\n==训练集抽样设置== 为了增加模型的训练速度，我们从训练集中使用随机抽样算法 (Random Sampling, RS), 在训练集 (training set) 中抽取不同比率 ($r$) 的 子数据集分别训练模型 $VAE_{hp_i}$, 其中, $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24\\right\\}$; $r=1/1$ 表示使用全部的训练集 (training set) 训练模型模型，$r=1/8$ 表示使用训练集的 $1/8$ (subset, 占总训练集的 $1/8$) 训练模型。\n\n==模型度量== 本文选择三个度量标准来度量模型的性能, 包括: Minimal Test Loss / Maximal AUC / Training time.\n\n- Minimal Test Loss: 数据集 $D_i$ 在 $VAE_{hp_i}$ 中的最小的 $loss_{avg}$. 实验中使用 $D_i$ 中的 test set 独立重复评估 $VAE_{hp_i}$ 10 次, 每次评估的结果记为 $loss_i$, $i \\in \\{1,2,\\dots, 10\\}$, 因此, $loss_{avg}$= $\\frac{1}{10}\\sum(loss_i)$\n- Maximal AUC: $loss_{avg}$ 取得最小值时对于的 AUC, 即 Maximal AUC.\n- Training time: 使用数据集 $D_i$ 训练 $VAE_{hp_i}$ 所花费的时间. 其中, $VAE_{hp_i}$ 指 32 个超参数不同的 VAE 模型.\n\n## 实验结果及结论\n\n当在三个数据集 (MUSK/SATELITE/THYROID) 的训练集 (training set) 中抽取不同比率 (sampling rate, r) 的子集训练模型后, $VAE_{hp_i}$ 最小的测试误差 (test loss)、最小测试误差对应的 AUC、以及 $VAE_{hp_i}$ 的总训练时间如下图所示 (原始数据见附录 3):\n\n![static/attachment/Pasted image 20221125162709.png](/images/0f8310bececba0c2bb686514134da7b4a0bad7a7.png)  \n**正向结论:**\n\n- 在数据集 MUSK 上, 因为 MUSK 维度 (dimension) 过大, 导致 VAE 失去异常识别的能力, 导致 AUC 为 0.\n- **在训练集中抽取一定比例的数据训练模型时, 可以在更少的时间内得到精度相似的模型.** 上图中, 在三个数据集上, 当 $r=1/16$ 时, 模型的训练时间 (相对于 $r=1/1$ 时) 分别减少了 102(142)、153(229)、126(175) 分钟 (括号中的数字表示 $r=1$ 时的训练时间; 在数据集 SATELITE 和 THYROID 上, 其 AUC 仅降低了 0.0001 和 0.04.\n\n**存在的问题 (待排查)**:  \n在三个数据集上, test loss 由是重构误差与 KL 误差构成, 在图 (1) 与图 (2) 中, 训练集的比例从 $1/16$ 变为 $1/24$ 时, test loss **会升高的原因未知**.\n\n## 附录\n\n### 附录 1: VAE 的 11 个超参数及搜索空间\n\n超参数的表示方式参考 [Microsoft NNI](https://nni.readthedocs.io/en/stable/hpo/search_space.html), 超参数的表示方式如下:\n\n```json\n \"batch_size\": {           # 超参数名称\n    \"_value\": [256,1024],  # batch_size 取值范围. \n\t\t\t\t\t  # 256 表示取值下限, 即 batch_size 能够取到的最小值;\n\t\t\t\t\t  # 1024 表示取值上限, 即 batch_size 能够取到的最大值.(256 <= batch_size <= 1024)\n\t\t\t\t\t  \n    \"_type\": \"uniform\",    # 超参数取值方式; uniform 表示在  batch_size 取值范围内, 以 uniform 的分布取值, \n\t\t\t\t\t  # 即随机取值(在[256,1024]的范围内,每个值取到的概率是相等的)\n  },\n```\n\nVAE 中的 11 个超参数如下:\n\n```python\n{\n  \"batch_size\": {   \n    \"_type\": \"uniform\",\n    \"_value\": [\n      256,\n      1024\n    ]\n  },\n  \"hidden_activation\": {\n    \"_type\": \"choice\",\n    \"_value\": [\n      \"relu\",\n      \"sigmoid\",\n      \"softmax\",\n      \"softplus\",\n      \"tanh\",\n      \"selu\"\n    ]\n  },\n  \"output_activation\": {\n    \"_type\": \"choice\",\n    \"_value\": [\n      \"relu\",\n      \"sigmoid\",\n      \"softmax\",\n      \"softplus\",\n      \"tanh\",\n      \"selu\"\n    ]\n  },\n  \"l2_regularizer\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-08,\n      1e-01\n    ]\n  },\n  \"learning_rate\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-08,\n      1e-01\n    ]\n  },\n  \"drop_rate\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-08,\n      1e-01\n    ]\n  },\n  \"epochs\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      16,\n      128\n    ]\n  },\n  \"latent_dim\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      20\n    ]\n  },\n  \"n_neurons_layer1\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      32,\n      256\n    ]\n  },\n  \"n_neurons_layer2\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      16,\n      128\n    ]\n  },\n  \"n_neurons_layer3\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      8,\n      64\n    ]\n  }\n}\n \n```\n\n### 附录 2: ODDS 的三个数据集\n\n[ODDS](http://odds.cs.stonybrook.edu) 中主要是多维 (多变量) 时间序列数据, 我们从中选择了三个数据集作为实验数据集, 数据统计信息如下表:\n\n| Dataset | \\#points\t|\\#dim. | \\#outliers(%) | 备注 |\n| --------- | --------------- | ------------ | ---------- | ----------- |  \n| THYROID | 3772 | 6 | 93 (2.5%) | exp_thy_214 |  \n| SATELLITE | 6435 | 36 | 2036 (32%) | exp_sat_214 |  \n| MUSK | 3062 | 166 | 97 (3.2%) | exp_mus_214 |  \n\n这三个数据集的不同之处在于:\n\n1. 维度 (dim) 相差大 (DIM 分别是 6 , 36 ,166 )\n2. 异常率不同 (2.5%, 3.2%, 32%)\n\n### 附录 3: 实验原始数据 (表格)\n\n| SHORT\\_EXP\\_NAME              | TRIALCMD\\_DATASET | TRAINING\\_SAMPLE\\_RATE\\_FRAC | AVG\\_LOSS     | AVG\\_AUC | TOTAL\\_TRAINING\\_TIME\\(min\\) | EXPID    | TRIALJOBID |\n|:----------------------------- |:----------------- |:---------------------------- |:------------- |:-------- |:---------------------------- |:-------- |:---------- |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/1                          | -808695.0625  | 0        | 141.5655                     | pkozn786 | G0uPz      |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/4                          | -348153.8844  | 0        | 61.9486                      | gs27ryjx | vQQqv      |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/8                          | -242783644.8  | 0        | 46.5635                      | lgua6ox4 | LsX3U      |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/16                         | -1486302809.6 | 0        | 39.9584                      | aklxj7d9 | yyF60      |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/24                         | -751732729.6  | 0        | 38.2083                      | w5hfluvg | Z1ALW      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/1                          | -99676.8828   | 0.7      | 229.4541                     | hc65txvk | fr5ii      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/4                          | -21157.9785   | 0.6852   | 140.2635                     | iolyd70e | IdzWE      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/8                          | -10318.3757   | 0.6903   | 86.9189                      | wgy57es2 | uISww      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/16                         | -4292663      | 0.6608   | 76.4871                      | zxlhj956 | kzW2k      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/24                         | -3274989.2    | 0.565    | 72.0015                      | jv7qoxmb | lhjCa      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/1                          | -3309.7899    | 0.8987   | 175.2527                     | by2zvwh9 | AwyaZ      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/4                          | -1196.3076    | 0.911    | 75.0442                      | xv7mn2b1 | qw1uJ      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/8                          | -469.6848     | 0.9104   | 56.7766                      | ual53vbt | uRSdY      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/16                         | -417792       | 0.8977   | 49.0220                      | z6ahtyk9 | tYrqz      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/24                         | -473460.8688  | 0.8495   | 44.4155                      | 37awf5dc | vdlR5      |\n\n## 实验结果备份\n\n```python\nzip -r 2022-11-25.zip  pkozn786 gs27ryjx lgua6ox4 aklxj7d9 w5hfluvg hc65txvk iolyd70e wgy57es2 zxlhj956 jv7qoxmb by2zvwh9 xv7mn2b1 ual53vbt z6ahtyk9 37awf5dc  \n```\n\n阿里云: 2022-11-25.zip\n","source":"_posts/2022-11-25-实验结果.md","raw":"---\ntitle: 2022-11-25 实验结果\nshare: true\ntags:\n  - uncategory\n  - research\ndate: 2022-11-25 10:40:51 \nupdated: 2022-12-30 13:17:09 \ncategories: research \naliases:\n  - 2022-11-25实验结果\n  - 2022-11-25 实验结果\n  - 2022-11-25 实验交流汇报\n  - 2022-11-25 实验结果\n---\n\n\n\n这次的实验结果感觉能用, 请李老师评估一下是否能用\n\n## 实验背景/方法/目标\n\n==背景== 在超参数优化的任务中，==方法== 在 1) 超参数空间 和 2) 训练数据 中使用随机抽样 (Random Sampling, RS) 算法，==目标== 期望以更短的时间，获得一个精度相似的模型。\n\n## 实验设计\n\n==超参数与模型设置== 实验在 VAE 的 11 个超参数（见附录 1）空间中 (超参数空间指: 所有的超参数取值范围的笛卡尔积)，使用随机抽样算法（RS）抽取 32 组超参数样本 $HP_i$, $i \\in \\left\\{1,2,\\dots,32\\right\\}$，构成 32 个不同的 VAE 模型 $VAE_{hp_i}$。\n\n==数据集选择及处理== 从 ODDS 中的选择数据量不同的三个数据集 $D_i$, $i \\in \\{THYROID,SATELLITE,MUSK\\}$（附录 2），并按照 $6:4$ 的比例将数据集划分为训练集 (training set) 与测试集 (test set), 所有的数据均被标准化处理 ($\\bar{x}=\\frac{x-mean}{std}$)\n\n==训练集抽样设置== 为了增加模型的训练速度，我们从训练集中使用随机抽样算法 (Random Sampling, RS), 在训练集 (training set) 中抽取不同比率 ($r$) 的 子数据集分别训练模型 $VAE_{hp_i}$, 其中, $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24\\right\\}$; $r=1/1$ 表示使用全部的训练集 (training set) 训练模型模型，$r=1/8$ 表示使用训练集的 $1/8$ (subset, 占总训练集的 $1/8$) 训练模型。\n\n==模型度量== 本文选择三个度量标准来度量模型的性能, 包括: Minimal Test Loss / Maximal AUC / Training time.\n\n- Minimal Test Loss: 数据集 $D_i$ 在 $VAE_{hp_i}$ 中的最小的 $loss_{avg}$. 实验中使用 $D_i$ 中的 test set 独立重复评估 $VAE_{hp_i}$ 10 次, 每次评估的结果记为 $loss_i$, $i \\in \\{1,2,\\dots, 10\\}$, 因此, $loss_{avg}$= $\\frac{1}{10}\\sum(loss_i)$\n- Maximal AUC: $loss_{avg}$ 取得最小值时对于的 AUC, 即 Maximal AUC.\n- Training time: 使用数据集 $D_i$ 训练 $VAE_{hp_i}$ 所花费的时间. 其中, $VAE_{hp_i}$ 指 32 个超参数不同的 VAE 模型.\n\n## 实验结果及结论\n\n当在三个数据集 (MUSK/SATELITE/THYROID) 的训练集 (training set) 中抽取不同比率 (sampling rate, r) 的子集训练模型后, $VAE_{hp_i}$ 最小的测试误差 (test loss)、最小测试误差对应的 AUC、以及 $VAE_{hp_i}$ 的总训练时间如下图所示 (原始数据见附录 3):\n\n![static/attachment/Pasted image 20221125162709.png](/images/0f8310bececba0c2bb686514134da7b4a0bad7a7.png)  \n**正向结论:**\n\n- 在数据集 MUSK 上, 因为 MUSK 维度 (dimension) 过大, 导致 VAE 失去异常识别的能力, 导致 AUC 为 0.\n- **在训练集中抽取一定比例的数据训练模型时, 可以在更少的时间内得到精度相似的模型.** 上图中, 在三个数据集上, 当 $r=1/16$ 时, 模型的训练时间 (相对于 $r=1/1$ 时) 分别减少了 102(142)、153(229)、126(175) 分钟 (括号中的数字表示 $r=1$ 时的训练时间; 在数据集 SATELITE 和 THYROID 上, 其 AUC 仅降低了 0.0001 和 0.04.\n\n**存在的问题 (待排查)**:  \n在三个数据集上, test loss 由是重构误差与 KL 误差构成, 在图 (1) 与图 (2) 中, 训练集的比例从 $1/16$ 变为 $1/24$ 时, test loss **会升高的原因未知**.\n\n## 附录\n\n### 附录 1: VAE 的 11 个超参数及搜索空间\n\n超参数的表示方式参考 [Microsoft NNI](https://nni.readthedocs.io/en/stable/hpo/search_space.html), 超参数的表示方式如下:\n\n```json\n \"batch_size\": {           # 超参数名称\n    \"_value\": [256,1024],  # batch_size 取值范围. \n\t\t\t\t\t  # 256 表示取值下限, 即 batch_size 能够取到的最小值;\n\t\t\t\t\t  # 1024 表示取值上限, 即 batch_size 能够取到的最大值.(256 <= batch_size <= 1024)\n\t\t\t\t\t  \n    \"_type\": \"uniform\",    # 超参数取值方式; uniform 表示在  batch_size 取值范围内, 以 uniform 的分布取值, \n\t\t\t\t\t  # 即随机取值(在[256,1024]的范围内,每个值取到的概率是相等的)\n  },\n```\n\nVAE 中的 11 个超参数如下:\n\n```python\n{\n  \"batch_size\": {   \n    \"_type\": \"uniform\",\n    \"_value\": [\n      256,\n      1024\n    ]\n  },\n  \"hidden_activation\": {\n    \"_type\": \"choice\",\n    \"_value\": [\n      \"relu\",\n      \"sigmoid\",\n      \"softmax\",\n      \"softplus\",\n      \"tanh\",\n      \"selu\"\n    ]\n  },\n  \"output_activation\": {\n    \"_type\": \"choice\",\n    \"_value\": [\n      \"relu\",\n      \"sigmoid\",\n      \"softmax\",\n      \"softplus\",\n      \"tanh\",\n      \"selu\"\n    ]\n  },\n  \"l2_regularizer\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-08,\n      1e-01\n    ]\n  },\n  \"learning_rate\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-08,\n      1e-01\n    ]\n  },\n  \"drop_rate\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-08,\n      1e-01\n    ]\n  },\n  \"epochs\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      16,\n      128\n    ]\n  },\n  \"latent_dim\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      20\n    ]\n  },\n  \"n_neurons_layer1\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      32,\n      256\n    ]\n  },\n  \"n_neurons_layer2\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      16,\n      128\n    ]\n  },\n  \"n_neurons_layer3\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      8,\n      64\n    ]\n  }\n}\n \n```\n\n### 附录 2: ODDS 的三个数据集\n\n[ODDS](http://odds.cs.stonybrook.edu) 中主要是多维 (多变量) 时间序列数据, 我们从中选择了三个数据集作为实验数据集, 数据统计信息如下表:\n\n| Dataset | \\#points\t|\\#dim. | \\#outliers(%) | 备注 |\n| --------- | --------------- | ------------ | ---------- | ----------- |  \n| THYROID | 3772 | 6 | 93 (2.5%) | exp_thy_214 |  \n| SATELLITE | 6435 | 36 | 2036 (32%) | exp_sat_214 |  \n| MUSK | 3062 | 166 | 97 (3.2%) | exp_mus_214 |  \n\n这三个数据集的不同之处在于:\n\n1. 维度 (dim) 相差大 (DIM 分别是 6 , 36 ,166 )\n2. 异常率不同 (2.5%, 3.2%, 32%)\n\n### 附录 3: 实验原始数据 (表格)\n\n| SHORT\\_EXP\\_NAME              | TRIALCMD\\_DATASET | TRAINING\\_SAMPLE\\_RATE\\_FRAC | AVG\\_LOSS     | AVG\\_AUC | TOTAL\\_TRAINING\\_TIME\\(min\\) | EXPID    | TRIALJOBID |\n|:----------------------------- |:----------------- |:---------------------------- |:------------- |:-------- |:---------------------------- |:-------- |:---------- |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/1                          | -808695.0625  | 0        | 141.5655                     | pkozn786 | G0uPz      |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/4                          | -348153.8844  | 0        | 61.9486                      | gs27ryjx | vQQqv      |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/8                          | -242783644.8  | 0        | 46.5635                      | lgua6ox4 | LsX3U      |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/16                         | -1486302809.6 | 0        | 39.9584                      | aklxj7d9 | yyF60      |\n| EXP\\_MUS\\_214\\_20221124070846 | MUSK              | 1/24                         | -751732729.6  | 0        | 38.2083                      | w5hfluvg | Z1ALW      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/1                          | -99676.8828   | 0.7      | 229.4541                     | hc65txvk | fr5ii      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/4                          | -21157.9785   | 0.6852   | 140.2635                     | iolyd70e | IdzWE      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/8                          | -10318.3757   | 0.6903   | 86.9189                      | wgy57es2 | uISww      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/16                         | -4292663      | 0.6608   | 76.4871                      | zxlhj956 | kzW2k      |\n| EXP\\_SAT\\_214\\_20221124080724 | SATELLITE         | 1/24                         | -3274989.2    | 0.565    | 72.0015                      | jv7qoxmb | lhjCa      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/1                          | -3309.7899    | 0.8987   | 175.2527                     | by2zvwh9 | AwyaZ      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/4                          | -1196.3076    | 0.911    | 75.0442                      | xv7mn2b1 | qw1uJ      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/8                          | -469.6848     | 0.9104   | 56.7766                      | ual53vbt | uRSdY      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/16                         | -417792       | 0.8977   | 49.0220                      | z6ahtyk9 | tYrqz      |\n| EXP\\_THY\\_214\\_20221124060301 | THYROID           | 1/24                         | -473460.8688  | 0.8495   | 44.4155                      | 37awf5dc | vdlR5      |\n\n## 实验结果备份\n\n```python\nzip -r 2022-11-25.zip  pkozn786 gs27ryjx lgua6ox4 aklxj7d9 w5hfluvg hc65txvk iolyd70e wgy57es2 zxlhj956 jv7qoxmb by2zvwh9 xv7mn2b1 ual53vbt z6ahtyk9 37awf5dc  \n```\n\n阿里云: 2022-11-25.zip\n","slug":"2022-11-25-实验结果","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709t001w4cv967h7foie","content":"<p>这次的实验结果感觉能用, 请李老师评估一下是否能用</p>\n<h2 id=\"实验背景-方法-目标\">实验背景/方法/目标</h2>\n<p><mark>背景</mark> 在超参数优化的任务中，<mark>方法</mark> 在 1) 超参数空间 和 2) 训练数据 中使用随机抽样 (Random Sampling, RS) 算法，<mark>目标</mark> 期望以更短的时间，获得一个精度相似的模型。</p>\n<h2 id=\"实验设计\">实验设计</h2>\n<p><mark>超参数与模型设置</mark> 实验在 VAE 的 11 个超参数（见附录 1）空间中 (超参数空间指: 所有的超参数取值范围的笛卡尔积)，使用随机抽样算法（RS）抽取 32 组超参数样本 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">i \\in \\left\\{1,2,\\dots,32\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>，构成 32 个不同的 VAE 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>。</p>\n<p><mark>数据集选择及处理</mark> 从 ODDS 中的选择数据量不同的三个数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mi>T</mi><mi>H</mi><mi>Y</mi><mi>R</mi><mi>O</mi><mi>I</mi><mi>D</mi><mo separator=\"true\">,</mo><mi>S</mi><mi>A</mi><mi>T</mi><mi>E</mi><mi>L</mi><mi>L</mi><mi>I</mi><mi>T</mi><mi>E</mi><mo separator=\"true\">,</mo><mi>M</mi><mi>U</mi><mi>S</mi><mi>K</mi><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">i \\in \\{THYROID,SATELLITE,MUSK\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">RO</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">TE</span><span class=\"mord mathnormal\">LL</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">TE</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose\">}</span></span></span></span>（附录 2），并按照 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>6</mn><mo>:</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">6:4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">4</span></span></span></span> 的比例将数据集划分为训练集 (training set) 与测试集 (test set), 所有的数据均被标准化处理 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>ˉ</mo></mover><mo>=</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mi>m</mi><mi>e</mi><mi>a</mi><mi>n</mi></mrow><mrow><mi>s</mi><mi>t</mi><mi>d</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\bar{x}=\\frac{x-mean}{std}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5678em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\">x</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2222em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1473em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8023em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">s</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">d</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\">an</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>)</p>\n<p><mark>训练集抽样设置</mark> 为了增加模型的训练速度，我们从训练集中使用随机抽样算法 (Random Sampling, RS), 在训练集 (training set) 中抽取不同比率 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span>) 的 子数据集分别训练模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/16</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/24</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>; <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1/1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/1</span></span></span></span> 表示使用全部的训练集 (training set) 训练模型模型，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 表示使用训练集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> (subset, 占总训练集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span>) 训练模型。</p>\n<p><mark>模型度量</mark> 本文选择三个度量标准来度量模型的性能, 包括: Minimal Test Loss / Maximal AUC / Training time.</p>\n<ul>\n<li>Minimal Test Loss: 数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 中的最小的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">loss_{avg}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">vg</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>. 实验中使用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 中的 test set 独立重复评估 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 10 次, 每次评估的结果记为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">loss_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>10</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">i \\in \\{1,2,\\dots, 10\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">10</span><span class=\"mclose\">}</span></span></span></span>, 因此, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">loss_{avg}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">vg</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>= <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>10</mn></mfrac><mo>∑</mo><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{10}\\sum(loss_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></li>\n<li>Maximal AUC: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">loss_{avg}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">vg</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 取得最小值时对于的 AUC, 即 Maximal AUC.</li>\n<li>Training time: 使用数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 训练 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 所花费的时间. 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 指 32 个超参数不同的 VAE 模型.</li>\n</ul>\n<h2 id=\"实验结果及结论\">实验结果及结论</h2>\n<p>当在三个数据集 (MUSK/SATELITE/THYROID) 的训练集 (training set) 中抽取不同比率 (sampling rate, r) 的子集训练模型后, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 最小的测试误差 (test loss)、最小测试误差对应的 AUC、以及 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 的总训练时间如下图所示 (原始数据见附录 3):</p>\n<p><img src=\"/images/0f8310bececba0c2bb686514134da7b4a0bad7a7.png\" alt=\"static/attachment/Pasted image 20221125162709.png\"><br>\n<strong>正向结论:</strong></p>\n<ul>\n<li>在数据集 MUSK 上, 因为 MUSK 维度 (dimension) 过大, 导致 VAE 失去异常识别的能力, 导致 AUC 为 0.</li>\n<li><strong>在训练集中抽取一定比例的数据训练模型时, 可以在更少的时间内得到精度相似的模型.</strong> 上图中, 在三个数据集上, 当 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn></mrow><annotation encoding=\"application/x-tex\">r=1/16</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/16</span></span></span></span> 时, 模型的训练时间 (相对于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1/1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/1</span></span></span></span> 时) 分别减少了 102(142)、153(229)、126(175) 分钟 (括号中的数字表示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> 时的训练时间; 在数据集 SATELITE 和 THYROID 上, 其 AUC 仅降低了 0.0001 和 0.04.</li>\n</ul>\n<p><strong>存在的问题 (待排查)</strong>:<br>\n在三个数据集上, test loss 由是重构误差与 KL 误差构成, 在图 (1) 与图 (2) 中, 训练集的比例从 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn></mrow><annotation encoding=\"application/x-tex\">1/16</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/16</span></span></span></span> 变为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">1/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/24</span></span></span></span> 时, test loss <strong>会升高的原因未知</strong>.</p>\n<h2 id=\"附录\">附录</h2>\n<h3 id=\"附录-1-VAE-的-11-个超参数及搜索空间\">附录 1: VAE 的 11 个超参数及搜索空间</h3>\n<p>超参数的表示方式参考 <a href=\"https://nni.readthedocs.io/en/stable/hpo/search_space.html\">Microsoft NNI</a>, 超参数的表示方式如下:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;batch_size&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span>           # 超参数名称</span><br><span class=\"line\">   <span class=\"attr\">&quot;_value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"number\">256</span><span class=\"punctuation\">,</span><span class=\"number\">1024</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span>  # batch_size 取值范围. </span><br><span class=\"line\">\t\t\t\t  # <span class=\"number\">256</span> 表示取值下限<span class=\"punctuation\">,</span> 即 batch_size 能够取到的最小值;</span><br><span class=\"line\">\t\t\t\t  # <span class=\"number\">1024</span> 表示取值上限<span class=\"punctuation\">,</span> 即 batch_size 能够取到的最大值.(<span class=\"number\">256</span> &lt;= batch_size &lt;= <span class=\"number\">1024</span>)</span><br><span class=\"line\">\t\t\t\t  </span><br><span class=\"line\">   <span class=\"attr\">&quot;_type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;uniform&quot;</span><span class=\"punctuation\">,</span>    # 超参数取值方式; uniform 表示在  batch_size 取值范围内<span class=\"punctuation\">,</span> 以 uniform 的分布取值<span class=\"punctuation\">,</span> </span><br><span class=\"line\">\t\t\t\t  # 即随机取值(在<span class=\"punctuation\">[</span><span class=\"number\">256</span><span class=\"punctuation\">,</span><span class=\"number\">1024</span><span class=\"punctuation\">]</span>的范围内<span class=\"punctuation\">,</span>每个值取到的概率是相等的)</span><br><span class=\"line\"> <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br></pre></td></tr></table></figure>\n<p>VAE 中的 11 个超参数如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;batch_size&quot;</span>: &#123;   </span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">256</span>,</span><br><span class=\"line\">      <span class=\"number\">1024</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;hidden_activation&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;choice&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;relu&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;sigmoid&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;softmax&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;softplus&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;tanh&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;selu&quot;</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;output_activation&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;choice&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;relu&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;sigmoid&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;softmax&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;softplus&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;tanh&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;selu&quot;</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;l2_regularizer&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-08</span>,</span><br><span class=\"line\">      <span class=\"number\">1e-01</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;learning_rate&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-08</span>,</span><br><span class=\"line\">      <span class=\"number\">1e-01</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;drop_rate&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-08</span>,</span><br><span class=\"line\">      <span class=\"number\">1e-01</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;epochs&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">16</span>,</span><br><span class=\"line\">      <span class=\"number\">128</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;latent_dim&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">20</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;n_neurons_layer1&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">32</span>,</span><br><span class=\"line\">      <span class=\"number\">256</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;n_neurons_layer2&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">16</span>,</span><br><span class=\"line\">      <span class=\"number\">128</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;n_neurons_layer3&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">8</span>,</span><br><span class=\"line\">      <span class=\"number\">64</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<h3 id=\"附录-2-ODDS-的三个数据集\">附录 2: ODDS 的三个数据集</h3>\n<p><a href=\"http://odds.cs.stonybrook.edu\">ODDS</a> 中主要是多维 (多变量) 时间序列数据, 我们从中选择了三个数据集作为实验数据集, 数据统计信息如下表:</p>\n<table>\n<thead>\n<tr>\n<th>Dataset</th>\n<th>#points</th>\n<th>#dim.</th>\n<th>#outliers(%)</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>THYROID</td>\n<td>3772</td>\n<td>6</td>\n<td>93 (2.5%)</td>\n<td>exp_thy_214</td>\n</tr>\n<tr>\n<td>SATELLITE</td>\n<td>6435</td>\n<td>36</td>\n<td>2036 (32%)</td>\n<td>exp_sat_214</td>\n</tr>\n<tr>\n<td>MUSK</td>\n<td>3062</td>\n<td>166</td>\n<td>97 (3.2%)</td>\n<td>exp_mus_214</td>\n</tr>\n</tbody>\n</table>\n<p>这三个数据集的不同之处在于:</p>\n<ol>\n<li>维度 (dim) 相差大 (DIM 分别是 6 , 36 ,166 )</li>\n<li>异常率不同 (2.5%, 3.2%, 32%)</li>\n</ol>\n<h3 id=\"附录-3-实验原始数据-表格\">附录 3: 实验原始数据 (表格)</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">SHORT_EXP_NAME</th>\n<th style=\"text-align:left\">TRIALCMD_DATASET</th>\n<th style=\"text-align:left\">TRAINING_SAMPLE_RATE_FRAC</th>\n<th style=\"text-align:left\">AVG_LOSS</th>\n<th style=\"text-align:left\">AVG_AUC</th>\n<th style=\"text-align:left\">TOTAL_TRAINING_TIME(min)</th>\n<th style=\"text-align:left\">EXPID</th>\n<th style=\"text-align:left\">TRIALJOBID</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/1</td>\n<td style=\"text-align:left\">-808695.0625</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">141.5655</td>\n<td style=\"text-align:left\">pkozn786</td>\n<td style=\"text-align:left\">G0uPz</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/4</td>\n<td style=\"text-align:left\">-348153.8844</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">61.9486</td>\n<td style=\"text-align:left\">gs27ryjx</td>\n<td style=\"text-align:left\">vQQqv</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/8</td>\n<td style=\"text-align:left\">-242783644.8</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">46.5635</td>\n<td style=\"text-align:left\">lgua6ox4</td>\n<td style=\"text-align:left\">LsX3U</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/16</td>\n<td style=\"text-align:left\">-1486302809.6</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">39.9584</td>\n<td style=\"text-align:left\">aklxj7d9</td>\n<td style=\"text-align:left\">yyF60</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/24</td>\n<td style=\"text-align:left\">-751732729.6</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">38.2083</td>\n<td style=\"text-align:left\">w5hfluvg</td>\n<td style=\"text-align:left\">Z1ALW</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/1</td>\n<td style=\"text-align:left\">-99676.8828</td>\n<td style=\"text-align:left\">0.7</td>\n<td style=\"text-align:left\">229.4541</td>\n<td style=\"text-align:left\">hc65txvk</td>\n<td style=\"text-align:left\">fr5ii</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/4</td>\n<td style=\"text-align:left\">-21157.9785</td>\n<td style=\"text-align:left\">0.6852</td>\n<td style=\"text-align:left\">140.2635</td>\n<td style=\"text-align:left\">iolyd70e</td>\n<td style=\"text-align:left\">IdzWE</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/8</td>\n<td style=\"text-align:left\">-10318.3757</td>\n<td style=\"text-align:left\">0.6903</td>\n<td style=\"text-align:left\">86.9189</td>\n<td style=\"text-align:left\">wgy57es2</td>\n<td style=\"text-align:left\">uISww</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/16</td>\n<td style=\"text-align:left\">-4292663</td>\n<td style=\"text-align:left\">0.6608</td>\n<td style=\"text-align:left\">76.4871</td>\n<td style=\"text-align:left\">zxlhj956</td>\n<td style=\"text-align:left\">kzW2k</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/24</td>\n<td style=\"text-align:left\">-3274989.2</td>\n<td style=\"text-align:left\">0.565</td>\n<td style=\"text-align:left\">72.0015</td>\n<td style=\"text-align:left\">jv7qoxmb</td>\n<td style=\"text-align:left\">lhjCa</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/1</td>\n<td style=\"text-align:left\">-3309.7899</td>\n<td style=\"text-align:left\">0.8987</td>\n<td style=\"text-align:left\">175.2527</td>\n<td style=\"text-align:left\">by2zvwh9</td>\n<td style=\"text-align:left\">AwyaZ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/4</td>\n<td style=\"text-align:left\">-1196.3076</td>\n<td style=\"text-align:left\">0.911</td>\n<td style=\"text-align:left\">75.0442</td>\n<td style=\"text-align:left\">xv7mn2b1</td>\n<td style=\"text-align:left\">qw1uJ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/8</td>\n<td style=\"text-align:left\">-469.6848</td>\n<td style=\"text-align:left\">0.9104</td>\n<td style=\"text-align:left\">56.7766</td>\n<td style=\"text-align:left\">ual53vbt</td>\n<td style=\"text-align:left\">uRSdY</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/16</td>\n<td style=\"text-align:left\">-417792</td>\n<td style=\"text-align:left\">0.8977</td>\n<td style=\"text-align:left\">49.0220</td>\n<td style=\"text-align:left\">z6ahtyk9</td>\n<td style=\"text-align:left\">tYrqz</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/24</td>\n<td style=\"text-align:left\">-473460.8688</td>\n<td style=\"text-align:left\">0.8495</td>\n<td style=\"text-align:left\">44.4155</td>\n<td style=\"text-align:left\">37awf5dc</td>\n<td style=\"text-align:left\">vdlR5</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"实验结果备份\">实验结果备份</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r <span class=\"number\">2022</span>-<span class=\"number\">11</span>-<span class=\"number\">25.</span><span class=\"built_in\">zip</span>  pkozn786 gs27ryjx lgua6ox4 aklxj7d9 w5hfluvg hc65txvk iolyd70e wgy57es2 zxlhj956 jv7qoxmb by2zvwh9 xv7mn2b1 ual53vbt z6ahtyk9 37awf5dc  </span><br></pre></td></tr></table></figure>\n<p>阿里云: 2022-11-25.zip</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover3.jpg","excerpt":"","more":"<p>这次的实验结果感觉能用, 请李老师评估一下是否能用</p>\n<h2 id=\"实验背景-方法-目标\">实验背景/方法/目标</h2>\n<p><mark>背景</mark> 在超参数优化的任务中，<mark>方法</mark> 在 1) 超参数空间 和 2) 训练数据 中使用随机抽样 (Random Sampling, RS) 算法，<mark>目标</mark> 期望以更短的时间，获得一个精度相似的模型。</p>\n<h2 id=\"实验设计\">实验设计</h2>\n<p><mark>超参数与模型设置</mark> 实验在 VAE 的 11 个超参数（见附录 1）空间中 (超参数空间指: 所有的超参数取值范围的笛卡尔积)，使用随机抽样算法（RS）抽取 32 组超参数样本 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">i \\in \\left\\{1,2,\\dots,32\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>，构成 32 个不同的 VAE 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>。</p>\n<p><mark>数据集选择及处理</mark> 从 ODDS 中的选择数据量不同的三个数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mi>T</mi><mi>H</mi><mi>Y</mi><mi>R</mi><mi>O</mi><mi>I</mi><mi>D</mi><mo separator=\"true\">,</mo><mi>S</mi><mi>A</mi><mi>T</mi><mi>E</mi><mi>L</mi><mi>L</mi><mi>I</mi><mi>T</mi><mi>E</mi><mo separator=\"true\">,</mo><mi>M</mi><mi>U</mi><mi>S</mi><mi>K</mi><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">i \\in \\{THYROID,SATELLITE,MUSK\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">RO</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">TE</span><span class=\"mord mathnormal\">LL</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">TE</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose\">}</span></span></span></span>（附录 2），并按照 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>6</mn><mo>:</mo><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">6:4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">6</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">4</span></span></span></span> 的比例将数据集划分为训练集 (training set) 与测试集 (test set), 所有的数据均被标准化处理 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>x</mi><mo>ˉ</mo></mover><mo>=</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mi>m</mi><mi>e</mi><mi>a</mi><mi>n</mi></mrow><mrow><mi>s</mi><mi>t</mi><mi>d</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\bar{x}=\\frac{x-mean}{std}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5678em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5678em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\">x</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.2222em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1473em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8023em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">s</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">d</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">m</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\">an</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>)</p>\n<p><mark>训练集抽样设置</mark> 为了增加模型的训练速度，我们从训练集中使用随机抽样算法 (Random Sampling, RS), 在训练集 (training set) 中抽取不同比率 (<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span>) 的 子数据集分别训练模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/16, 1/24\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/16</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/24</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>; <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1/1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/1</span></span></span></span> 表示使用全部的训练集 (training set) 训练模型模型，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">r=1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> 表示使用训练集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span> (subset, 占总训练集的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn></mrow><annotation encoding=\"application/x-tex\">1/8</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/8</span></span></span></span>) 训练模型。</p>\n<p><mark>模型度量</mark> 本文选择三个度量标准来度量模型的性能, 包括: Minimal Test Loss / Maximal AUC / Training time.</p>\n<ul>\n<li>Minimal Test Loss: 数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 中的最小的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">loss_{avg}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">vg</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>. 实验中使用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 中的 test set 独立重复评估 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 10 次, 每次评估的结果记为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">loss_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>10</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">i \\in \\{1,2,\\dots, 10\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">10</span><span class=\"mclose\">}</span></span></span></span>, 因此, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">loss_{avg}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">vg</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>= <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>10</mn></mfrac><mo>∑</mo><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{10}\\sum(loss_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></li>\n<li>Maximal AUC: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">loss_{avg}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">vg</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 取得最小值时对于的 AUC, 即 Maximal AUC.</li>\n<li>Training time: 使用数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 训练 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 所花费的时间. 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 指 32 个超参数不同的 VAE 模型.</li>\n</ul>\n<h2 id=\"实验结果及结论\">实验结果及结论</h2>\n<p>当在三个数据集 (MUSK/SATELITE/THYROID) 的训练集 (training set) 中抽取不同比率 (sampling rate, r) 的子集训练模型后, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 最小的测试误差 (test loss)、最小测试误差对应的 AUC、以及 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi>A</mi><msub><mi>E</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">VAE_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathnormal\">A</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 的总训练时间如下图所示 (原始数据见附录 3):</p>\n<p><img src=\"/images/0f8310bececba0c2bb686514134da7b4a0bad7a7.png\" alt=\"static/attachment/Pasted image 20221125162709.png\"><br>\n<strong>正向结论:</strong></p>\n<ul>\n<li>在数据集 MUSK 上, 因为 MUSK 维度 (dimension) 过大, 导致 VAE 失去异常识别的能力, 导致 AUC 为 0.</li>\n<li><strong>在训练集中抽取一定比例的数据训练模型时, 可以在更少的时间内得到精度相似的模型.</strong> 上图中, 在三个数据集上, 当 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn></mrow><annotation encoding=\"application/x-tex\">r=1/16</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/16</span></span></span></span> 时, 模型的训练时间 (相对于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1/1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/1</span></span></span></span> 时) 分别减少了 102(142)、153(229)、126(175) 分钟 (括号中的数字表示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> 时的训练时间; 在数据集 SATELITE 和 THYROID 上, 其 AUC 仅降低了 0.0001 和 0.04.</li>\n</ul>\n<p><strong>存在的问题 (待排查)</strong>:<br>\n在三个数据集上, test loss 由是重构误差与 KL 误差构成, 在图 (1) 与图 (2) 中, 训练集的比例从 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>16</mn></mrow><annotation encoding=\"application/x-tex\">1/16</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/16</span></span></span></span> 变为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>24</mn></mrow><annotation encoding=\"application/x-tex\">1/24</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/24</span></span></span></span> 时, test loss <strong>会升高的原因未知</strong>.</p>\n<h2 id=\"附录\">附录</h2>\n<h3 id=\"附录-1-VAE-的-11-个超参数及搜索空间\">附录 1: VAE 的 11 个超参数及搜索空间</h3>\n<p>超参数的表示方式参考 <a href=\"https://nni.readthedocs.io/en/stable/hpo/search_space.html\">Microsoft NNI</a>, 超参数的表示方式如下:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;batch_size&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span>           # 超参数名称</span><br><span class=\"line\">   <span class=\"attr\">&quot;_value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"number\">256</span><span class=\"punctuation\">,</span><span class=\"number\">1024</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span>  # batch_size 取值范围. </span><br><span class=\"line\">\t\t\t\t  # <span class=\"number\">256</span> 表示取值下限<span class=\"punctuation\">,</span> 即 batch_size 能够取到的最小值;</span><br><span class=\"line\">\t\t\t\t  # <span class=\"number\">1024</span> 表示取值上限<span class=\"punctuation\">,</span> 即 batch_size 能够取到的最大值.(<span class=\"number\">256</span> &lt;= batch_size &lt;= <span class=\"number\">1024</span>)</span><br><span class=\"line\">\t\t\t\t  </span><br><span class=\"line\">   <span class=\"attr\">&quot;_type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;uniform&quot;</span><span class=\"punctuation\">,</span>    # 超参数取值方式; uniform 表示在  batch_size 取值范围内<span class=\"punctuation\">,</span> 以 uniform 的分布取值<span class=\"punctuation\">,</span> </span><br><span class=\"line\">\t\t\t\t  # 即随机取值(在<span class=\"punctuation\">[</span><span class=\"number\">256</span><span class=\"punctuation\">,</span><span class=\"number\">1024</span><span class=\"punctuation\">]</span>的范围内<span class=\"punctuation\">,</span>每个值取到的概率是相等的)</span><br><span class=\"line\"> <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br></pre></td></tr></table></figure>\n<p>VAE 中的 11 个超参数如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;batch_size&quot;</span>: &#123;   </span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">256</span>,</span><br><span class=\"line\">      <span class=\"number\">1024</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;hidden_activation&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;choice&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;relu&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;sigmoid&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;softmax&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;softplus&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;tanh&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;selu&quot;</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;output_activation&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;choice&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;relu&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;sigmoid&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;softmax&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;softplus&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;tanh&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;selu&quot;</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;l2_regularizer&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-08</span>,</span><br><span class=\"line\">      <span class=\"number\">1e-01</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;learning_rate&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-08</span>,</span><br><span class=\"line\">      <span class=\"number\">1e-01</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;drop_rate&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-08</span>,</span><br><span class=\"line\">      <span class=\"number\">1e-01</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;epochs&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">16</span>,</span><br><span class=\"line\">      <span class=\"number\">128</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;latent_dim&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">20</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;n_neurons_layer1&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">32</span>,</span><br><span class=\"line\">      <span class=\"number\">256</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;n_neurons_layer2&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">16</span>,</span><br><span class=\"line\">      <span class=\"number\">128</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;n_neurons_layer3&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">8</span>,</span><br><span class=\"line\">      <span class=\"number\">64</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<h3 id=\"附录-2-ODDS-的三个数据集\">附录 2: ODDS 的三个数据集</h3>\n<p><a href=\"http://odds.cs.stonybrook.edu\">ODDS</a> 中主要是多维 (多变量) 时间序列数据, 我们从中选择了三个数据集作为实验数据集, 数据统计信息如下表:</p>\n<table>\n<thead>\n<tr>\n<th>Dataset</th>\n<th>#points</th>\n<th>#dim.</th>\n<th>#outliers(%)</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>THYROID</td>\n<td>3772</td>\n<td>6</td>\n<td>93 (2.5%)</td>\n<td>exp_thy_214</td>\n</tr>\n<tr>\n<td>SATELLITE</td>\n<td>6435</td>\n<td>36</td>\n<td>2036 (32%)</td>\n<td>exp_sat_214</td>\n</tr>\n<tr>\n<td>MUSK</td>\n<td>3062</td>\n<td>166</td>\n<td>97 (3.2%)</td>\n<td>exp_mus_214</td>\n</tr>\n</tbody>\n</table>\n<p>这三个数据集的不同之处在于:</p>\n<ol>\n<li>维度 (dim) 相差大 (DIM 分别是 6 , 36 ,166 )</li>\n<li>异常率不同 (2.5%, 3.2%, 32%)</li>\n</ol>\n<h3 id=\"附录-3-实验原始数据-表格\">附录 3: 实验原始数据 (表格)</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">SHORT_EXP_NAME</th>\n<th style=\"text-align:left\">TRIALCMD_DATASET</th>\n<th style=\"text-align:left\">TRAINING_SAMPLE_RATE_FRAC</th>\n<th style=\"text-align:left\">AVG_LOSS</th>\n<th style=\"text-align:left\">AVG_AUC</th>\n<th style=\"text-align:left\">TOTAL_TRAINING_TIME(min)</th>\n<th style=\"text-align:left\">EXPID</th>\n<th style=\"text-align:left\">TRIALJOBID</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/1</td>\n<td style=\"text-align:left\">-808695.0625</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">141.5655</td>\n<td style=\"text-align:left\">pkozn786</td>\n<td style=\"text-align:left\">G0uPz</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/4</td>\n<td style=\"text-align:left\">-348153.8844</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">61.9486</td>\n<td style=\"text-align:left\">gs27ryjx</td>\n<td style=\"text-align:left\">vQQqv</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/8</td>\n<td style=\"text-align:left\">-242783644.8</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">46.5635</td>\n<td style=\"text-align:left\">lgua6ox4</td>\n<td style=\"text-align:left\">LsX3U</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/16</td>\n<td style=\"text-align:left\">-1486302809.6</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">39.9584</td>\n<td style=\"text-align:left\">aklxj7d9</td>\n<td style=\"text-align:left\">yyF60</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_MUS_214_20221124070846</td>\n<td style=\"text-align:left\">MUSK</td>\n<td style=\"text-align:left\">1/24</td>\n<td style=\"text-align:left\">-751732729.6</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">38.2083</td>\n<td style=\"text-align:left\">w5hfluvg</td>\n<td style=\"text-align:left\">Z1ALW</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/1</td>\n<td style=\"text-align:left\">-99676.8828</td>\n<td style=\"text-align:left\">0.7</td>\n<td style=\"text-align:left\">229.4541</td>\n<td style=\"text-align:left\">hc65txvk</td>\n<td style=\"text-align:left\">fr5ii</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/4</td>\n<td style=\"text-align:left\">-21157.9785</td>\n<td style=\"text-align:left\">0.6852</td>\n<td style=\"text-align:left\">140.2635</td>\n<td style=\"text-align:left\">iolyd70e</td>\n<td style=\"text-align:left\">IdzWE</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/8</td>\n<td style=\"text-align:left\">-10318.3757</td>\n<td style=\"text-align:left\">0.6903</td>\n<td style=\"text-align:left\">86.9189</td>\n<td style=\"text-align:left\">wgy57es2</td>\n<td style=\"text-align:left\">uISww</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/16</td>\n<td style=\"text-align:left\">-4292663</td>\n<td style=\"text-align:left\">0.6608</td>\n<td style=\"text-align:left\">76.4871</td>\n<td style=\"text-align:left\">zxlhj956</td>\n<td style=\"text-align:left\">kzW2k</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_SAT_214_20221124080724</td>\n<td style=\"text-align:left\">SATELLITE</td>\n<td style=\"text-align:left\">1/24</td>\n<td style=\"text-align:left\">-3274989.2</td>\n<td style=\"text-align:left\">0.565</td>\n<td style=\"text-align:left\">72.0015</td>\n<td style=\"text-align:left\">jv7qoxmb</td>\n<td style=\"text-align:left\">lhjCa</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/1</td>\n<td style=\"text-align:left\">-3309.7899</td>\n<td style=\"text-align:left\">0.8987</td>\n<td style=\"text-align:left\">175.2527</td>\n<td style=\"text-align:left\">by2zvwh9</td>\n<td style=\"text-align:left\">AwyaZ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/4</td>\n<td style=\"text-align:left\">-1196.3076</td>\n<td style=\"text-align:left\">0.911</td>\n<td style=\"text-align:left\">75.0442</td>\n<td style=\"text-align:left\">xv7mn2b1</td>\n<td style=\"text-align:left\">qw1uJ</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/8</td>\n<td style=\"text-align:left\">-469.6848</td>\n<td style=\"text-align:left\">0.9104</td>\n<td style=\"text-align:left\">56.7766</td>\n<td style=\"text-align:left\">ual53vbt</td>\n<td style=\"text-align:left\">uRSdY</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/16</td>\n<td style=\"text-align:left\">-417792</td>\n<td style=\"text-align:left\">0.8977</td>\n<td style=\"text-align:left\">49.0220</td>\n<td style=\"text-align:left\">z6ahtyk9</td>\n<td style=\"text-align:left\">tYrqz</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">EXP_THY_214_20221124060301</td>\n<td style=\"text-align:left\">THYROID</td>\n<td style=\"text-align:left\">1/24</td>\n<td style=\"text-align:left\">-473460.8688</td>\n<td style=\"text-align:left\">0.8495</td>\n<td style=\"text-align:left\">44.4155</td>\n<td style=\"text-align:left\">37awf5dc</td>\n<td style=\"text-align:left\">vdlR5</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"实验结果备份\">实验结果备份</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r <span class=\"number\">2022</span>-<span class=\"number\">11</span>-<span class=\"number\">25.</span><span class=\"built_in\">zip</span>  pkozn786 gs27ryjx lgua6ox4 aklxj7d9 w5hfluvg hc65txvk iolyd70e wgy57es2 zxlhj956 jv7qoxmb by2zvwh9 xv7mn2b1 ual53vbt z6ahtyk9 37awf5dc  </span><br></pre></td></tr></table></figure>\n<p>阿里云: 2022-11-25.zip</p>\n"},{"title":"2022-第49周","share":true,"date":"2022-12-22T12:34:31.000Z","updated":"2022-12-22T12:38:27.000Z","_content":"\n![static/attachment/Pasted image 20221222203651.png](/images/e3a16065aae77a1bf18a9c7d0b133f7de9cb852e.png)\n","source":"_posts/2022-第49周.md","raw":"---\ntitle: 2022-第49周\nshare: true\ntags:\n  - 学习快照\ndate: 2022-12-22 20:34:31 \nupdated: 2022-12-22 20:38:27 \ncategories: research\n---\n\n![static/attachment/Pasted image 20221222203651.png](/images/e3a16065aae77a1bf18a9c7d0b133f7de9cb852e.png)\n","slug":"2022-第49周","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709u001z4cv9e6b03gy4","content":"<p><img src=\"/images/e3a16065aae77a1bf18a9c7d0b133f7de9cb852e.png\" alt=\"static/attachment/Pasted image 20221222203651.png\"></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover1.JPG","excerpt":"","more":"<p><img src=\"/images/e3a16065aae77a1bf18a9c7d0b133f7de9cb852e.png\" alt=\"static/attachment/Pasted image 20221222203651.png\"></p>\n"},{"title":"2022-第50周","share":true,"date":"2022-12-22T12:34:12.000Z","updated":"2022-12-22T12:38:41.000Z","_content":"\n![static/attachment/Pasted image 20221222203414.png](/images/504720d95877e593475c0b3d02c7e75051c00b0f.png)\n","source":"_posts/2022-第50周.md","raw":"---\ntitle: 2022-第50周\nshare: true\ntags:\n  - 学习快照\ndate: 2022-12-22 20:34:12 \nupdated: 2022-12-22 20:38:41 \ncategories: research\n---\n\n![static/attachment/Pasted image 20221222203414.png](/images/504720d95877e593475c0b3d02c7e75051c00b0f.png)\n","slug":"2022-第50周","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709u00234cv99wzae1ap","content":"<p><img src=\"/images/504720d95877e593475c0b3d02c7e75051c00b0f.png\" alt=\"static/attachment/Pasted image 20221222203414.png\"></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover1.JPG","excerpt":"","more":"<p><img src=\"/images/504720d95877e593475c0b3d02c7e75051c00b0f.png\" alt=\"static/attachment/Pasted image 20221222203414.png\"></p>\n"},{"title":"2023-01-02 AIOps 的29个KPI在 COCA 模型上的性能分析","share":true,"date":"2023-01-02T09:24:13.000Z","updated":"2023-01-03T07:19:05.000Z","_content":"\n## 实验场景/方法/目标\n\n==背景== 在 <u>时间序列异常检测算法的超参数优化任务</u>中，==方法== 1) 本文在 COCA [^5] 的超参数空间中 (共 12 个超参数), 使用随机抽样 (Random Sampling, RS) 抽取 32 组超参数 $HP_{i,}i \\in \\{1,2,\\dots,32 \\}$, 随后 2) 在 AIOps [^1] 的 4 个异常率不同的 KPI 中, 使用 RS 在训练集抽取不同比例 $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}$ 的子集来训练 COCA , ==目标== 期望以更短的时间，能获得一个精度相似的模型。\n\n## 实验设计\n\n本章介绍实验的 1) 硬件环境, 2) 算法及其超参数, 3) 所使用的数据集, 4) 训练集的处理, 5) 性能评估指标, 6) 结果分析.\n\n### 实验硬件环境\n\n本实验的硬件环境如下表所示:\n\n| 项目 | 值                         | 数量 |\n| ---- | -------------------------- | ---- |\n| CPU  | Intel(R) Xeon(R) Gold 5220 | 1    |\n| OS   | Ubuntu  16.04              |      |\n| GPU  | RTX 2080 TI                | 4     |\n\n### 数据集选择及处理\n\n实验所用的数据集来源于 AIOps [^1] , AIOps 中包含了 29 个类型不同的 KPI (Key Performance Indictor), 本文选择所有的 KPI 进行实验, KPI 统计信息见 [AIOps 统计](https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD).\n\n对于每个 KPI, 本文按照 1:1 的方法划分训练集 (training set) 与测试集 (test set); 对于每个训练集, 我们将其按照 8:2 的比例, 再次划分为训练集和验证集 (valid dataset). COCA [^5] 中的数据处理方式与本文一致.\n\n### 超参数与模型选择\n\n实验在 COCA [^5] 的 12 个超参数空间中（见 <a href='{% post_path 模型超参数 %}#COCA-的-12-个模型超参数'>模型超参数#COCA-的-12-个模型超参数</a>)，使用随机抽样算法（RS）抽取 32 组超参数样本 $HP_i$ , $i \\in \\left\\{1,2,\\dots,32\\right\\}$，构成 32 个不同的 COCA 模型 $COCA_{HP_i}$ , $COCA_{HP_i}$ 表示超参数示 $HP_i$ 的 COCA 模型.\n\n$COCA_{HP_{i},}i \\in \\{1,2,\\dots,32\\}$ 为 32 个超参数不同的 COCA 模型, **本文的间接目标是使用最少的时间, 找出这 32 个模型中性能最好的一个模型.**\n\n### 训练集及其抽样\n\n为了增加模型的训练速度，我们使用 RS 在各个数据集 $D_k, k=\\{1,2,\\dots,32\\}$ 的训练集 (training set) 中抽取比率为 $r$ 的子集分别训练每组 $COCA_{hp_i}$, 其中, $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}$, $r=1/1$ 为对比基准 (baseline); 本文用 $COCA_{hp_i}^{D_k^r}$ 表示在数据集 $D_k$ 的训练集中随机抽取比例为 $r$ 的数据来训练超参数是 $hp_i$ 的 COCA 模型, 对于本实验来说, $COCA_{hp_i}$ 有 32 个超参数不同的模型. 对于验证集和测试集, 本文不使用任何抽样算法, 也就是说, 本文使用全量的验证集和测试集来评估模型.\n\n为了便于读者理解, 这里给出一个例子. 以数据集 `a07ac296` 为例, 其总数据量为 217782, 那么训练集的数据点为 108891, 假设抽样比率 $r=1/4$, 那么, 我们将在训练集 108891 的点中抽取 $1/4$ 的子集来训练模型, 也就是随机抽取 $108891*1/4 \\approx 27223$ 点来训练模型.\n\n### 性能指标选择\n\n本文选择 5 个指标来评估实验. 第 1 个指标是测试损失 (test loss), 即测试数据集在模型上的损失; 另外 4 个指标是时间序列异常检测研究中 4 个常用的指标, 即 Affiliation F1 score [^2], point-wise F1 score (PW F1) [^2], point-adjusted F1 score (PA F1) [^3],revised point-adjusted F1 score ( RPA F1) [^4].\n\n### 最优模型选择\n\n对于 $D_k$ 的部分训练数据训练的模型 $COCA_{hp_i}^{D_k^r}$, 本文选择 $COCA^*=\\arg \\underset{hp_i}{\\max}(loss_{valid})$ 为最优模型, 即在训练数据 $D_k^r$ 训练的一组模型 $COCA_{hp_i}$ 中找到 <u>验证损失 (valid loss) 最小</u> 的模型作为最优模型.\n\n## 实验结果\n\n本章分析实验总体结果和可能存在的结论\n\n### 实验总体结果\n\n本实在 AIOps 的 29 个时间序列数据上进行了实验, 选用的模型为 COCA[^5], 每个 KPI 通过 KPI ID 区分, 如下图中左上角 `05f10d3a-239c-3bef-9bdc-a2feeb0037aa` 表示第一个 KPI 的 KPI ID.\n\n对于每个 KPI, 图 a) 中包含 *最小验证损失* (minimal valid loss) 和 *测试损失* (test loss) 两个性能指标; *最小验证损失* 是在 $COCA_{hp_i}^{D_k^r}$ 中, 存在一个模型 $COCA^*$, $COCA*$ 使数据集 $D_k$ 在验证集上的 *验证损失 (valid loss)* 最小, 即 $COCA^*=\\arg \\underset{hp_i}{\\max}(loss_{valid})$, $COCA^*$ 是一组模型 $COCA_{hp_i}$ 中验证损失 (valid loss) 最小的那个模型; *测试损失* (test loss) 是模型 $COCA*$ 在测试集上对于的损失; *训练损失* (train loss) 是模型 $COCA*$ 在训练集上对于的损失. 图 b) 是 $COCA^*$ 的 4 个性能指标: Affiliation F1 score [^2], point-wise F1 score (PW F1) [^2], point-adjusted F1 score (PA F1) [^3],revised point-adjusted F1 score ( RPA F1) [^4]. 本实验中, *最小验证损失* (minimal valid loss) 模型选择.\n\n<embed src='/images/b0296588d434292d0fe14f9101f52ef821c3d917.pdf' width='100%' height='750' type='application/pdf'>\n\n(这里我暂时不分析训练时间, 因为在 <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>, <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 已经得到了证明, 这里不需要再分析证明了😷):\n\n在分析图之前, 再次明确一下本文期望得到的结论 : 🎯 **本文期望使用少量的数据集, 得到一个模型相似的模型**, 这可以理解为: 当我们逐渐降低训练模型的数据量时, 模型的性能会逐渐降低.\n\n从上面的 29 个 KPI 中, **没有一个性能指标够满足期望**:\n\n- Test loss 在不同的 $r$ 下都一样\n- 4 种 F1 在不同的 $r$ 下很难看出规律 (或许就没有规律)\n\n### 💡💡💡 可能的结论 💡💡💡\n\n从图中我倒是可以得到一个其他的结论: <u>从训练集中抽取部分数据来训练模型, 得到的模型比使用全量数据训练得到的更优</u>;\n\n证明: 处理图 9 和 15 不能证明, 其他 27 个 KPI(总 29) 都能证明.\n\n### 实验结果异常的地方\n\n本实验存在 1 个异常的地方\n\n- train loss/ test loss / valid loss 几乎都是一样的 (模型本身的问题?).\n## 讨论\n\n在本实验中验证了 29 个 KPI, 但是均无法得到预期结论.\n\n- <u>我在想, 这个试验是否真的有可能做出来吗? 现在已有的 13 +29 个实验数据告诉我好像不行.</u>\n\n## 下一步实验设计\n\n本文在 AIOps 的 29 个 KPI 上, 使用 COCA 模型进行了丰富的实验, 但是没有拿到期望的结果. 那这里就抛出了其他问题: ❓ 是 COCA 比较特殊吗 (因为 test loss/valid loss/train loss 一样), 在其他模型是否能得到期望结论?\n\n因此, 下一步个工作自然明了, 那就是再换两个模型试试, <span style=\"background:#ff4d4f\">如果两个模型都不成功, 那么我可能认为这个实验做不下去了</span>. 为了选择与 COCA 不同的模型, 下一步本文选择 OC-SVM 与 Deep SVDD, 这两个模型来源于 [^6].\n\n![static/attachment/Pasted image 20230103101330.png](/images/269ef9d591e009f549a30de55cc43d48911d3e16.png)\n\n## 下一次汇报时间估计\n\n出结果估计需要一个周, 2 天调试 +5 天跑结果 (4GPU), 预计 10 号可得到结果.\n\n## 其他相关实验\n\n<a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>  \n<a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>  \n<a href='{% post_path 2022-12-09-实验设计 %}'>2022-12-09-实验设计</a>  \n<a href='{% post_path 2022-12-30-实验结果 %}'>2022-12-30-实验结果</a>\n\n## 实验数据备份\n\n```python\nzip -r  2023-01-03.zip  t83mwvb0 vwzm1pgt wtxe41ld 0uzjydne eahnb6td 9gvbin7u 23odhckw vubtmwi7 1l3xa28c bkos25zt zk1yc630 eonvg4ks jvsl3dw0 czvw0lhu 4nj5v2py zawcukx1 knio0pmf gnhsv4xp irnvt567 akjmgrd7 bi1ge75s 6qdw18or emgjzaw0 rmc2v7dp ew3f0uqj bhxgvisr 3j2wvbns 4y3cir0p ob5376it 2wv85hyb zj37ey8u 4e587woy 8ok0t42u wprs8m64 3p5uvkys kbw3f6p5 ano5t9u2 4jr38st1 agsek0xy o37wl8tq s3bwnzed d5jscf4u 25t6l7hq d1kr6cgo cuh0n5mj z9ctsv5r 81ceryxl 2e5i3hwz o4nwkrav z9w0n5qh ikfe9wz7 t5bd4jmw xue3i4db 92f6u3kp v5c4afmk ptce5mj3 3iv4n7aw jvb4kof0 w5ez2crj 5pj2bsug rf5a91mi sqc3uvnm cwrg2v1k brp67e5a xuq82c3l xlo94fb2 6pogej4f n0j8mf5b u5qmz39t uk7qjda3 yjhz2i9b 0hctn6ia d3b91mvr p7wm8c1j 47x0jecu keo1x82u rkq0w31d d9htv780 xucosj4l sgxc65ar wdbvxykn qz235sfd 2vab9exg a6vt5281 k8r75stu q4rgytvp o2uy6ejg 3b5g4af1 5hdemgjo jcfbugn3 g196luik lvxhuae1 z7h0s1rx t4xn5g0a ksv21fxy 9gorcjmz jfb2wkmq e56l8jtq 9ks78xln 0uqaf9ct 8ruw0cmv obskziyr jr6dwh2z gw42cfo1 v04ug53m vt6rop8u orgfye7w nfip4kut kfv7rxbo e3591ifo 8s04pvom psjwz30k fvjrtwc5 1tg5cbix 13dny5q4 0hgevksl rity2g5z ulaqdgs0 4puvymot b2e1896x 1uqxds0z jcv0t6dq fytrcvzm zjv0ugr8 jhc2nfod r6etdfaq txpzb9mn obwxte8y s9m1b3zl 2nl1hgx6 e427lnoa kaw8nz64 wh63osyc tc150mqj 3tbervyz zdagyrc3 zva8otkh xowivnb2 0mkwzu6v neuk3asp 78olrsv3 tqh0lxu3 irwgs2m0 ujkdpy3n gybnv59l 1z4hrun2 0at2s4uv fk5zs4dc mi6d5w2u a2u4m0g1 qybutxi9 yih6orsk rh5eoidp hyg3epd1 dfkgq983 mx9j6y0f j27lingh 1m4la8j9 8gxnv6ah 19tu6q3s 3vo281hi gejvzx4d 89qdp4jo lvzkhrs7 0posmafd 7kniu8zc b4datgwm xlse8aru n45feblc qwe738co tnxwe508 fcwk0238 1w4d86vi 7qr6i08l \n```\n\n阿里云数据备份地址: `文件 > 09-实验数据备份`\n\n## 参考文献\n\n[^1]: 2018.KPI Anomaly Detection Competition. Retrieved December, 2022 from https://competition.aiops-challenge.com/home/competition/1484452272200032281\n\n[^2]: Huet, A., Navarro, J. M., & Rossi, D. 2022. Local Evaluation of Time Series Anomaly Detection Algorithms. Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, 635–645.\n\n[^3]: H. Xu et al., “Unsupervised anomaly detection via variational auto-encoder for seasonal kpis in web applications,” in Proceedings of the 2018 world wide web conference, 2018, pp. 187–196.\n\n[^4]: Hundman, Kyle, et al. \"Detecting spacecraft anomalies using lstms and nonparametric dynamic thresholding.\" Proceedings of the 24th ACM SIGKDD international conference on knowledge discovery & data mining. 2018.\n\n[^5]: R. Wang et al., “Deep Contrastive One-Class Time Series Anomaly Detection.” arXiv, Oct. 08, 2022. Accessed: Dec. 09, 2022. [Online]. Available: http://arxiv.org/abs/2207.01472\n\n[^6]: Bhatnagar, A., Kassianik, P., Liu, C., Lan, T., Yang, W., et al. 2021. Merlion: A machine learning library for time series. ***ArXiv Preprint ArXiv:2109.09265***.\n","source":"_posts/2023-01-02-AIOps-的29个KPI在-COCA-模型上的性能分析.md","raw":"---\ntitle: 2023-01-02 AIOps 的29个KPI在 COCA 模型上的性能分析\nshare: true\ntags:\n  - uncategory\ndate: 2023-01-02 17:24:13 \nupdated: 2023-01-03 15:19:05 \ncategories: research\n---\n\n## 实验场景/方法/目标\n\n==背景== 在 <u>时间序列异常检测算法的超参数优化任务</u>中，==方法== 1) 本文在 COCA [^5] 的超参数空间中 (共 12 个超参数), 使用随机抽样 (Random Sampling, RS) 抽取 32 组超参数 $HP_{i,}i \\in \\{1,2,\\dots,32 \\}$, 随后 2) 在 AIOps [^1] 的 4 个异常率不同的 KPI 中, 使用 RS 在训练集抽取不同比例 $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}$ 的子集来训练 COCA , ==目标== 期望以更短的时间，能获得一个精度相似的模型。\n\n## 实验设计\n\n本章介绍实验的 1) 硬件环境, 2) 算法及其超参数, 3) 所使用的数据集, 4) 训练集的处理, 5) 性能评估指标, 6) 结果分析.\n\n### 实验硬件环境\n\n本实验的硬件环境如下表所示:\n\n| 项目 | 值                         | 数量 |\n| ---- | -------------------------- | ---- |\n| CPU  | Intel(R) Xeon(R) Gold 5220 | 1    |\n| OS   | Ubuntu  16.04              |      |\n| GPU  | RTX 2080 TI                | 4     |\n\n### 数据集选择及处理\n\n实验所用的数据集来源于 AIOps [^1] , AIOps 中包含了 29 个类型不同的 KPI (Key Performance Indictor), 本文选择所有的 KPI 进行实验, KPI 统计信息见 [AIOps 统计](https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD).\n\n对于每个 KPI, 本文按照 1:1 的方法划分训练集 (training set) 与测试集 (test set); 对于每个训练集, 我们将其按照 8:2 的比例, 再次划分为训练集和验证集 (valid dataset). COCA [^5] 中的数据处理方式与本文一致.\n\n### 超参数与模型选择\n\n实验在 COCA [^5] 的 12 个超参数空间中（见 <a href='{% post_path 模型超参数 %}#COCA-的-12-个模型超参数'>模型超参数#COCA-的-12-个模型超参数</a>)，使用随机抽样算法（RS）抽取 32 组超参数样本 $HP_i$ , $i \\in \\left\\{1,2,\\dots,32\\right\\}$，构成 32 个不同的 COCA 模型 $COCA_{HP_i}$ , $COCA_{HP_i}$ 表示超参数示 $HP_i$ 的 COCA 模型.\n\n$COCA_{HP_{i},}i \\in \\{1,2,\\dots,32\\}$ 为 32 个超参数不同的 COCA 模型, **本文的间接目标是使用最少的时间, 找出这 32 个模型中性能最好的一个模型.**\n\n### 训练集及其抽样\n\n为了增加模型的训练速度，我们使用 RS 在各个数据集 $D_k, k=\\{1,2,\\dots,32\\}$ 的训练集 (training set) 中抽取比率为 $r$ 的子集分别训练每组 $COCA_{hp_i}$, 其中, $r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}$, $r=1/1$ 为对比基准 (baseline); 本文用 $COCA_{hp_i}^{D_k^r}$ 表示在数据集 $D_k$ 的训练集中随机抽取比例为 $r$ 的数据来训练超参数是 $hp_i$ 的 COCA 模型, 对于本实验来说, $COCA_{hp_i}$ 有 32 个超参数不同的模型. 对于验证集和测试集, 本文不使用任何抽样算法, 也就是说, 本文使用全量的验证集和测试集来评估模型.\n\n为了便于读者理解, 这里给出一个例子. 以数据集 `a07ac296` 为例, 其总数据量为 217782, 那么训练集的数据点为 108891, 假设抽样比率 $r=1/4$, 那么, 我们将在训练集 108891 的点中抽取 $1/4$ 的子集来训练模型, 也就是随机抽取 $108891*1/4 \\approx 27223$ 点来训练模型.\n\n### 性能指标选择\n\n本文选择 5 个指标来评估实验. 第 1 个指标是测试损失 (test loss), 即测试数据集在模型上的损失; 另外 4 个指标是时间序列异常检测研究中 4 个常用的指标, 即 Affiliation F1 score [^2], point-wise F1 score (PW F1) [^2], point-adjusted F1 score (PA F1) [^3],revised point-adjusted F1 score ( RPA F1) [^4].\n\n### 最优模型选择\n\n对于 $D_k$ 的部分训练数据训练的模型 $COCA_{hp_i}^{D_k^r}$, 本文选择 $COCA^*=\\arg \\underset{hp_i}{\\max}(loss_{valid})$ 为最优模型, 即在训练数据 $D_k^r$ 训练的一组模型 $COCA_{hp_i}$ 中找到 <u>验证损失 (valid loss) 最小</u> 的模型作为最优模型.\n\n## 实验结果\n\n本章分析实验总体结果和可能存在的结论\n\n### 实验总体结果\n\n本实在 AIOps 的 29 个时间序列数据上进行了实验, 选用的模型为 COCA[^5], 每个 KPI 通过 KPI ID 区分, 如下图中左上角 `05f10d3a-239c-3bef-9bdc-a2feeb0037aa` 表示第一个 KPI 的 KPI ID.\n\n对于每个 KPI, 图 a) 中包含 *最小验证损失* (minimal valid loss) 和 *测试损失* (test loss) 两个性能指标; *最小验证损失* 是在 $COCA_{hp_i}^{D_k^r}$ 中, 存在一个模型 $COCA^*$, $COCA*$ 使数据集 $D_k$ 在验证集上的 *验证损失 (valid loss)* 最小, 即 $COCA^*=\\arg \\underset{hp_i}{\\max}(loss_{valid})$, $COCA^*$ 是一组模型 $COCA_{hp_i}$ 中验证损失 (valid loss) 最小的那个模型; *测试损失* (test loss) 是模型 $COCA*$ 在测试集上对于的损失; *训练损失* (train loss) 是模型 $COCA*$ 在训练集上对于的损失. 图 b) 是 $COCA^*$ 的 4 个性能指标: Affiliation F1 score [^2], point-wise F1 score (PW F1) [^2], point-adjusted F1 score (PA F1) [^3],revised point-adjusted F1 score ( RPA F1) [^4]. 本实验中, *最小验证损失* (minimal valid loss) 模型选择.\n\n<embed src='/images/b0296588d434292d0fe14f9101f52ef821c3d917.pdf' width='100%' height='750' type='application/pdf'>\n\n(这里我暂时不分析训练时间, 因为在 <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>, <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a> 已经得到了证明, 这里不需要再分析证明了😷):\n\n在分析图之前, 再次明确一下本文期望得到的结论 : 🎯 **本文期望使用少量的数据集, 得到一个模型相似的模型**, 这可以理解为: 当我们逐渐降低训练模型的数据量时, 模型的性能会逐渐降低.\n\n从上面的 29 个 KPI 中, **没有一个性能指标够满足期望**:\n\n- Test loss 在不同的 $r$ 下都一样\n- 4 种 F1 在不同的 $r$ 下很难看出规律 (或许就没有规律)\n\n### 💡💡💡 可能的结论 💡💡💡\n\n从图中我倒是可以得到一个其他的结论: <u>从训练集中抽取部分数据来训练模型, 得到的模型比使用全量数据训练得到的更优</u>;\n\n证明: 处理图 9 和 15 不能证明, 其他 27 个 KPI(总 29) 都能证明.\n\n### 实验结果异常的地方\n\n本实验存在 1 个异常的地方\n\n- train loss/ test loss / valid loss 几乎都是一样的 (模型本身的问题?).\n## 讨论\n\n在本实验中验证了 29 个 KPI, 但是均无法得到预期结论.\n\n- <u>我在想, 这个试验是否真的有可能做出来吗? 现在已有的 13 +29 个实验数据告诉我好像不行.</u>\n\n## 下一步实验设计\n\n本文在 AIOps 的 29 个 KPI 上, 使用 COCA 模型进行了丰富的实验, 但是没有拿到期望的结果. 那这里就抛出了其他问题: ❓ 是 COCA 比较特殊吗 (因为 test loss/valid loss/train loss 一样), 在其他模型是否能得到期望结论?\n\n因此, 下一步个工作自然明了, 那就是再换两个模型试试, <span style=\"background:#ff4d4f\">如果两个模型都不成功, 那么我可能认为这个实验做不下去了</span>. 为了选择与 COCA 不同的模型, 下一步本文选择 OC-SVM 与 Deep SVDD, 这两个模型来源于 [^6].\n\n![static/attachment/Pasted image 20230103101330.png](/images/269ef9d591e009f549a30de55cc43d48911d3e16.png)\n\n## 下一次汇报时间估计\n\n出结果估计需要一个周, 2 天调试 +5 天跑结果 (4GPU), 预计 10 号可得到结果.\n\n## 其他相关实验\n\n<a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>  \n<a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>  \n<a href='{% post_path 2022-12-09-实验设计 %}'>2022-12-09-实验设计</a>  \n<a href='{% post_path 2022-12-30-实验结果 %}'>2022-12-30-实验结果</a>\n\n## 实验数据备份\n\n```python\nzip -r  2023-01-03.zip  t83mwvb0 vwzm1pgt wtxe41ld 0uzjydne eahnb6td 9gvbin7u 23odhckw vubtmwi7 1l3xa28c bkos25zt zk1yc630 eonvg4ks jvsl3dw0 czvw0lhu 4nj5v2py zawcukx1 knio0pmf gnhsv4xp irnvt567 akjmgrd7 bi1ge75s 6qdw18or emgjzaw0 rmc2v7dp ew3f0uqj bhxgvisr 3j2wvbns 4y3cir0p ob5376it 2wv85hyb zj37ey8u 4e587woy 8ok0t42u wprs8m64 3p5uvkys kbw3f6p5 ano5t9u2 4jr38st1 agsek0xy o37wl8tq s3bwnzed d5jscf4u 25t6l7hq d1kr6cgo cuh0n5mj z9ctsv5r 81ceryxl 2e5i3hwz o4nwkrav z9w0n5qh ikfe9wz7 t5bd4jmw xue3i4db 92f6u3kp v5c4afmk ptce5mj3 3iv4n7aw jvb4kof0 w5ez2crj 5pj2bsug rf5a91mi sqc3uvnm cwrg2v1k brp67e5a xuq82c3l xlo94fb2 6pogej4f n0j8mf5b u5qmz39t uk7qjda3 yjhz2i9b 0hctn6ia d3b91mvr p7wm8c1j 47x0jecu keo1x82u rkq0w31d d9htv780 xucosj4l sgxc65ar wdbvxykn qz235sfd 2vab9exg a6vt5281 k8r75stu q4rgytvp o2uy6ejg 3b5g4af1 5hdemgjo jcfbugn3 g196luik lvxhuae1 z7h0s1rx t4xn5g0a ksv21fxy 9gorcjmz jfb2wkmq e56l8jtq 9ks78xln 0uqaf9ct 8ruw0cmv obskziyr jr6dwh2z gw42cfo1 v04ug53m vt6rop8u orgfye7w nfip4kut kfv7rxbo e3591ifo 8s04pvom psjwz30k fvjrtwc5 1tg5cbix 13dny5q4 0hgevksl rity2g5z ulaqdgs0 4puvymot b2e1896x 1uqxds0z jcv0t6dq fytrcvzm zjv0ugr8 jhc2nfod r6etdfaq txpzb9mn obwxte8y s9m1b3zl 2nl1hgx6 e427lnoa kaw8nz64 wh63osyc tc150mqj 3tbervyz zdagyrc3 zva8otkh xowivnb2 0mkwzu6v neuk3asp 78olrsv3 tqh0lxu3 irwgs2m0 ujkdpy3n gybnv59l 1z4hrun2 0at2s4uv fk5zs4dc mi6d5w2u a2u4m0g1 qybutxi9 yih6orsk rh5eoidp hyg3epd1 dfkgq983 mx9j6y0f j27lingh 1m4la8j9 8gxnv6ah 19tu6q3s 3vo281hi gejvzx4d 89qdp4jo lvzkhrs7 0posmafd 7kniu8zc b4datgwm xlse8aru n45feblc qwe738co tnxwe508 fcwk0238 1w4d86vi 7qr6i08l \n```\n\n阿里云数据备份地址: `文件 > 09-实验数据备份`\n\n## 参考文献\n\n[^1]: 2018.KPI Anomaly Detection Competition. Retrieved December, 2022 from https://competition.aiops-challenge.com/home/competition/1484452272200032281\n\n[^2]: Huet, A., Navarro, J. M., & Rossi, D. 2022. Local Evaluation of Time Series Anomaly Detection Algorithms. Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, 635–645.\n\n[^3]: H. Xu et al., “Unsupervised anomaly detection via variational auto-encoder for seasonal kpis in web applications,” in Proceedings of the 2018 world wide web conference, 2018, pp. 187–196.\n\n[^4]: Hundman, Kyle, et al. \"Detecting spacecraft anomalies using lstms and nonparametric dynamic thresholding.\" Proceedings of the 24th ACM SIGKDD international conference on knowledge discovery & data mining. 2018.\n\n[^5]: R. Wang et al., “Deep Contrastive One-Class Time Series Anomaly Detection.” arXiv, Oct. 08, 2022. Accessed: Dec. 09, 2022. [Online]. Available: http://arxiv.org/abs/2207.01472\n\n[^6]: Bhatnagar, A., Kassianik, P., Liu, C., Lan, T., Yang, W., et al. 2021. Merlion: A machine learning library for time series. ***ArXiv Preprint ArXiv:2109.09265***.\n","slug":"2023-01-02-AIOps-的29个KPI在-COCA-模型上的性能分析","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709v00264cv9bkft9ll9","content":"<h2 id=\"实验场景-方法-目标\">实验场景/方法/目标</h2>\n<p><mark>背景</mark> 在 <u>时间序列异常检测算法的超参数优化任务</u>中，<mark>方法</mark> 1) 本文在 COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup> 的超参数空间中 (共 12 个超参数), 使用随机抽样 (Random Sampling, RS) 抽取 32 组超参数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mrow><mi>i</mi><mo separator=\"true\">,</mo></mrow></msub><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">HP_{i,}i \\in \\{1,2,\\dots,32 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mpunct mtight\">,</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span>, 随后 2) 在 AIOps <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2\">[2]</a></sup> 的 4 个异常率不同的 KPI 中, 使用 RS 在训练集抽取不同比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>128</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/128</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span> 的子集来训练 COCA , <mark>目标</mark> 期望以更短的时间，能获得一个精度相似的模型。</p>\n<h2 id=\"实验设计\">实验设计</h2>\n<p>本章介绍实验的 1) 硬件环境, 2) 算法及其超参数, 3) 所使用的数据集, 4) 训练集的处理, 5) 性能评估指标, 6) 结果分析.</p>\n<h3 id=\"实验硬件环境\">实验硬件环境</h3>\n<p>本实验的硬件环境如下表所示:</p>\n<table>\n<thead>\n<tr>\n<th>项目</th>\n<th>值</th>\n<th>数量</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>CPU</td>\n<td>Intel® Xeon® Gold 5220</td>\n<td>1</td>\n</tr>\n<tr>\n<td>OS</td>\n<td>Ubuntu  16.04</td>\n<td></td>\n</tr>\n<tr>\n<td>GPU</td>\n<td>RTX 2080 TI</td>\n<td>4</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"数据集选择及处理\">数据集选择及处理</h3>\n<p>实验所用的数据集来源于 AIOps <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2:1\">[2:1]</a></sup> , AIOps 中包含了 29 个类型不同的 KPI (Key Performance Indictor), 本文选择所有的 KPI 进行实验, KPI 统计信息见 <a href=\"https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD\">AIOps 统计</a>.</p>\n<p>对于每个 KPI, 本文按照 1:1 的方法划分训练集 (training set) 与测试集 (test set); 对于每个训练集, 我们将其按照 8:2 的比例, 再次划分为训练集和验证集 (valid dataset). COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:1\">[1:1]</a></sup> 中的数据处理方式与本文一致.</p>\n<h3 id=\"超参数与模型选择\">超参数与模型选择</h3>\n<p>实验在 COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:2\">[1:2]</a></sup> 的 12 个超参数空间中（见 <a href='/research/b4f95541e96e.html#COCA-的-12-个模型超参数'>模型超参数#COCA-的-12-个模型超参数</a>)，使用随机抽样算法（RS）抽取 32 组超参数样本 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">i \\in \\left\\{1,2,\\dots,32\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>，构成 32 个不同的 COCA 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> 表示超参数示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的 COCA 模型.</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub><mo separator=\"true\">,</mo></mrow></msub><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_{i},}i \\in \\{1,2,\\dots,32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span> 为 32 个超参数不同的 COCA 模型, <strong>本文的间接目标是使用最少的时间, 找出这 32 个模型中性能最好的一个模型.</strong></p>\n<h3 id=\"训练集及其抽样\">训练集及其抽样</h3>\n<p>为了增加模型的训练速度，我们使用 RS 在各个数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><mi>k</mi><mo>=</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">D_k, k=\\{1,2,\\dots,32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span> 的训练集 (training set) 中抽取比率为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 的子集分别训练每组 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>128</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/128</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1/1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/1</span></span></span></span> 为对比基准 (baseline); 本文用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msubsup><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msubsup><mi>D</mi><mi>k</mi><mi>r</mi></msubsup></msubsup></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}^{D_k^r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4994em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.062em;\"><span style=\"top:-2.3987em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.245em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7385em;\"><span style=\"top:-2.214em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 表示在数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的训练集中随机抽取比例为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 的数据来训练超参数是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">hp_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的 COCA 模型, 对于本实验来说, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 有 32 个超参数不同的模型. 对于验证集和测试集, 本文不使用任何抽样算法, 也就是说, 本文使用全量的验证集和测试集来评估模型.</p>\n<p>为了便于读者理解, 这里给出一个例子. 以数据集 <code>a07ac296</code> 为例, 其总数据量为 217782, 那么训练集的数据点为 108891, 假设抽样比率 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span>, 那么, 我们将在训练集 108891 的点中抽取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 的子集来训练模型, 也就是随机抽取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>108891</mn><mo>∗</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo>≈</mo><mn>27223</mn></mrow><annotation encoding=\"application/x-tex\">108891*1/4 \\approx 27223</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">108891</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">27223</span></span></span></span> 点来训练模型.</p>\n<h3 id=\"性能指标选择\">性能指标选择</h3>\n<p>本文选择 5 个指标来评估实验. 第 1 个指标是测试损失 (test loss), 即测试数据集在模型上的损失; 另外 4 个指标是时间序列异常检测研究中 4 个常用的指标, 即 Affiliation F1 score <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3\">[3]</a></sup>, point-wise F1 score (PW F1) <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3:1\">[3:1]</a></sup>, point-adjusted F1 score (PA F1) <sup class=\"footnote-ref\"><a href=\"#fn4\" id=\"fnref4\">[4]</a></sup>,revised point-adjusted F1 score ( RPA F1) <sup class=\"footnote-ref\"><a href=\"#fn5\" id=\"fnref5\">[5]</a></sup>.</p>\n<h3 id=\"最优模型选择\">最优模型选择</h3>\n<p>对于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的部分训练数据训练的模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msubsup><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msubsup><mi>D</mi><mi>k</mi><mi>r</mi></msubsup></msubsup></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}^{D_k^r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4994em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.062em;\"><span style=\"top:-2.3987em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.245em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7385em;\"><span style=\"top:-2.214em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span>, 本文选择 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup><mo>=</mo><mi>arg</mi><mo>⁡</mo><mi><munder><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></munder></mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">COCA^*=\\arg \\underset{hp_i}{\\max}(loss_{valid})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.6382em;vertical-align:-0.8882em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.3479em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\"><span class=\"mop\">max</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 为最优模型, 即在训练数据 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>D</mi><mi>k</mi><mi>r</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">D_k^r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9664em;vertical-align:-0.2831em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.4169em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831em;\"><span></span></span></span></span></span></span></span></span></span> 训练的一组模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 中找到 <u>验证损失 (valid loss) 最小</u> 的模型作为最优模型.</p>\n<h2 id=\"实验结果\">实验结果</h2>\n<p>本章分析实验总体结果和可能存在的结论</p>\n<h3 id=\"实验总体结果\">实验总体结果</h3>\n<p>本实在 AIOps 的 29 个时间序列数据上进行了实验, 选用的模型为 COCA<sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:3\">[1:3]</a></sup>, 每个 KPI 通过 KPI ID 区分, 如下图中左上角 <code>05f10d3a-239c-3bef-9bdc-a2feeb0037aa</code> 表示第一个 KPI 的 KPI ID.</p>\n<p>对于每个 KPI, 图 a) 中包含 <em>最小验证损失</em> (minimal valid loss) 和 <em>测试损失</em> (test loss) 两个性能指标; <em>最小验证损失</em> 是在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msubsup><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msubsup><mi>D</mi><mi>k</mi><mi>r</mi></msubsup></msubsup></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}^{D_k^r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4994em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.062em;\"><span style=\"top:-2.3987em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.245em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7385em;\"><span style=\"top:-2.214em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 中, 存在一个模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">COCA^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><mi>A</mi><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">COCA*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord mathnormal\">A</span><span class=\"mord\">∗</span></span></span></span> 使数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 在验证集上的 <em>验证损失 (valid loss)</em> 最小, 即 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup><mo>=</mo><mi>arg</mi><mo>⁡</mo><mi><munder><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></munder></mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">COCA^*=\\arg \\underset{hp_i}{\\max}(loss_{valid})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.6382em;vertical-align:-0.8882em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.3479em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\"><span class=\"mop\">max</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">COCA^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 是一组模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 中验证损失 (valid loss) 最小的那个模型; <em>测试损失</em> (test loss) 是模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><mi>A</mi><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">COCA*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord mathnormal\">A</span><span class=\"mord\">∗</span></span></span></span> 在测试集上对于的损失; <em>训练损失</em> (train loss) 是模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><mi>A</mi><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">COCA*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord mathnormal\">A</span><span class=\"mord\">∗</span></span></span></span> 在训练集上对于的损失. 图 b) 是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">COCA^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 的 4 个性能指标: Affiliation F1 score <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3:2\">[3:2]</a></sup>, point-wise F1 score (PW F1) <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3:3\">[3:3]</a></sup>, point-adjusted F1 score (PA F1) <sup class=\"footnote-ref\"><a href=\"#fn4\" id=\"fnref4:1\">[4:1]</a></sup>,revised point-adjusted F1 score ( RPA F1) <sup class=\"footnote-ref\"><a href=\"#fn5\" id=\"fnref5:1\">[5:1]</a></sup>. 本实验中, <em>最小验证损失</em> (minimal valid loss) 模型选择.</p>\n<embed src='/images/b0296588d434292d0fe14f9101f52ef821c3d917.pdf' width='100%' height='750' type='application/pdf'>\n<p>(这里我暂时不分析训练时间, 因为在 <a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a>, <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 已经得到了证明, 这里不需要再分析证明了😷):</p>\n<p>在分析图之前, 再次明确一下本文期望得到的结论 : 🎯 <strong>本文期望使用少量的数据集, 得到一个模型相似的模型</strong>, 这可以理解为: 当我们逐渐降低训练模型的数据量时, 模型的性能会逐渐降低.</p>\n<p>从上面的 29 个 KPI 中, <strong>没有一个性能指标够满足期望</strong>:</p>\n<ul>\n<li>Test loss 在不同的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 下都一样</li>\n<li>4 种 F1 在不同的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 下很难看出规律 (或许就没有规律)</li>\n</ul>\n<h3 id=\"💡💡💡-可能的结论-💡💡💡\">💡💡💡 可能的结论 💡💡💡</h3>\n<p>从图中我倒是可以得到一个其他的结论: <u>从训练集中抽取部分数据来训练模型, 得到的模型比使用全量数据训练得到的更优</u>;</p>\n<p>证明: 处理图 9 和 15 不能证明, 其他 27 个 KPI(总 29) 都能证明.</p>\n<h3 id=\"实验结果异常的地方\">实验结果异常的地方</h3>\n<p>本实验存在 1 个异常的地方</p>\n<ul>\n<li>train loss/ test loss / valid loss 几乎都是一样的 (模型本身的问题?).</li>\n</ul>\n<h2 id=\"讨论\">讨论</h2>\n<p>在本实验中验证了 29 个 KPI, 但是均无法得到预期结论.</p>\n<ul>\n<li><u>我在想, 这个试验是否真的有可能做出来吗? 现在已有的 13 +29 个实验数据告诉我好像不行.</u></li>\n</ul>\n<h2 id=\"下一步实验设计\">下一步实验设计</h2>\n<p>本文在 AIOps 的 29 个 KPI 上, 使用 COCA 模型进行了丰富的实验, 但是没有拿到期望的结果. 那这里就抛出了其他问题: ❓ 是 COCA 比较特殊吗 (因为 test loss/valid loss/train loss 一样), 在其他模型是否能得到期望结论?</p>\n<p>因此, 下一步个工作自然明了, 那就是再换两个模型试试, <span style=\"background:#ff4d4f\">如果两个模型都不成功, 那么我可能认为这个实验做不下去了</span>. 为了选择与 COCA 不同的模型, 下一步本文选择 OC-SVM 与 Deep SVDD, 这两个模型来源于 <sup class=\"footnote-ref\"><a href=\"#fn6\" id=\"fnref6\">[6]</a></sup>.</p>\n<p><img src=\"/images/269ef9d591e009f549a30de55cc43d48911d3e16.png\" alt=\"static/attachment/Pasted image 20230103101330.png\"></p>\n<h2 id=\"下一次汇报时间估计\">下一次汇报时间估计</h2>\n<p>出结果估计需要一个周, 2 天调试 +5 天跑结果 (4GPU), 预计 10 号可得到结果.</p>\n<h2 id=\"其他相关实验\">其他相关实验</h2>\n<p><a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a><br>\n<a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a><br>\n<a href=''>2022-12-09-实验设计</a><br>\n<a href='/research/0efa46192bde.html'>2022-12-30-实验结果</a></p>\n<h2 id=\"实验数据备份\">实验数据备份</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r  <span class=\"number\">2023</span>-01-<span class=\"number\">03.</span><span class=\"built_in\">zip</span>  t83mwvb0 vwzm1pgt wtxe41ld 0uzjydne eahnb6td 9gvbin7u 23odhckw vubtmwi7 1l3xa28c bkos25zt zk1yc630 eonvg4ks jvsl3dw0 czvw0lhu 4nj5v2py zawcukx1 knio0pmf gnhsv4xp irnvt567 akjmgrd7 bi1ge75s 6qdw18or emgjzaw0 rmc2v7dp ew3f0uqj bhxgvisr 3j2wvbns 4y3cir0p ob5376it 2wv85hyb zj37ey8u 4e587woy 8ok0t42u wprs8m64 3p5uvkys kbw3f6p5 ano5t9u2 4jr38st1 agsek0xy o37wl8tq s3bwnzed d5jscf4u 25t6l7hq d1kr6cgo cuh0n5mj z9ctsv5r 81ceryxl 2e5i3hwz o4nwkrav z9w0n5qh ikfe9wz7 t5bd4jmw xue3i4db 92f6u3kp v5c4afmk ptce5mj3 3iv4n7aw jvb4kof0 w5ez2crj 5pj2bsug rf5a91mi sqc3uvnm cwrg2v1k brp67e5a xuq82c3l xlo94fb2 6pogej4f n0j8mf5b u5qmz39t uk7qjda3 yjhz2i9b 0hctn6ia d3b91mvr p7wm8c1j 47x0jecu keo1x82u rkq0w31d d9htv780 xucosj4l sgxc65ar wdbvxykn qz235sfd 2vab9exg a6vt5281 k8r75stu q4rgytvp o2uy6ejg 3b5g4af1 5hdemgjo jcfbugn3 g196luik lvxhuae1 z7h0s1rx t4xn5g0a ksv21fxy 9gorcjmz jfb2wkmq e56l8jtq 9ks78xln 0uqaf9ct 8ruw0cmv obskziyr jr6dwh2z gw42cfo1 v04ug53m vt6rop8u orgfye7w nfip4kut kfv7rxbo e3591ifo 8s04pvom psjwz30k fvjrtwc5 1tg5cbix 13dny5q4 0hgevksl rity2g5z ulaqdgs0 4puvymot b2e1896x 1uqxds0z jcv0t6dq fytrcvzm zjv0ugr8 jhc2nfod r6etdfaq txpzb9mn obwxte8y s9m1b3zl 2nl1hgx6 e427lnoa kaw8nz64 wh63osyc tc150mqj 3tbervyz zdagyrc3 zva8otkh xowivnb2 0mkwzu6v neuk3asp 78olrsv3 tqh0lxu3 irwgs2m0 ujkdpy3n gybnv59l 1z4hrun2 0at2s4uv fk5zs4dc mi6d5w2u a2u4m0g1 qybutxi9 yih6orsk rh5eoidp hyg3epd1 dfkgq983 mx9j6y0f j27lingh 1m4la8j9 8gxnv6ah 19tu6q3s 3vo281hi gejvzx4d 89qdp4jo lvzkhrs7 0posmafd 7kniu8zc b4datgwm xlse8aru n45feblc qwe738co tnxwe508 fcwk0238 1w4d86vi 7qr6i08l </span><br></pre></td></tr></table></figure>\n<p>阿里云数据备份地址: <code>文件 &gt; 09-实验数据备份</code></p>\n<h2 id=\"参考文献\">参考文献</h2>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>R. Wang et al., “Deep Contrastive One-Class Time Series Anomaly Detection.” arXiv, Oct. 08, 2022. Accessed: Dec. 09, 2022. [Online]. Available: <a href=\"http://arxiv.org/abs/2207.01472\">http://arxiv.org/abs/2207.01472</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:2\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:3\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn2\" class=\"footnote-item\"><p>2018.KPI Anomaly Detection Competition. Retrieved December, 2022 from <a href=\"https://competition.aiops-challenge.com/home/competition/1484452272200032281\">https://competition.aiops-challenge.com/home/competition/1484452272200032281</a> <a href=\"#fnref2\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref2:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn3\" class=\"footnote-item\"><p>Huet, A., Navarro, J. M., &amp; Rossi, D. 2022. Local Evaluation of Time Series Anomaly Detection Algorithms. Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, 635–645. <a href=\"#fnref3\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref3:1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref3:2\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref3:3\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn4\" class=\"footnote-item\"><p>H. Xu et al., “Unsupervised anomaly detection via variational auto-encoder for seasonal kpis in web applications,” in Proceedings of the 2018 world wide web conference, 2018, pp. 187–196. <a href=\"#fnref4\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref4:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn5\" class=\"footnote-item\"><p>Hundman, Kyle, et al. “Detecting spacecraft anomalies using lstms and nonparametric dynamic thresholding.” Proceedings of the 24th ACM SIGKDD international conference on knowledge discovery &amp; data mining. 2018. <a href=\"#fnref5\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref5:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn6\" class=\"footnote-item\"><p>Bhatnagar, A., Kassianik, P., Liu, C., Lan, T., Yang, W., et al. 2021. Merlion: A machine learning library for time series. <em><strong>ArXiv Preprint ArXiv:2109.09265</strong></em>. <a href=\"#fnref6\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover5.JPG","excerpt":"","more":"<h2 id=\"实验场景-方法-目标\">实验场景/方法/目标</h2>\n<p><mark>背景</mark> 在 <u>时间序列异常检测算法的超参数优化任务</u>中，<mark>方法</mark> 1) 本文在 COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup> 的超参数空间中 (共 12 个超参数), 使用随机抽样 (Random Sampling, RS) 抽取 32 组超参数 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mrow><mi>i</mi><mo separator=\"true\">,</mo></mrow></msub><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">HP_{i,}i \\in \\{1,2,\\dots,32 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mpunct mtight\">,</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span>, 随后 2) 在 AIOps <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2\">[2]</a></sup> 的 4 个异常率不同的 KPI 中, 使用 RS 在训练集抽取不同比例 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>128</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/128</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span> 的子集来训练 COCA , <mark>目标</mark> 期望以更短的时间，能获得一个精度相似的模型。</p>\n<h2 id=\"实验设计\">实验设计</h2>\n<p>本章介绍实验的 1) 硬件环境, 2) 算法及其超参数, 3) 所使用的数据集, 4) 训练集的处理, 5) 性能评估指标, 6) 结果分析.</p>\n<h3 id=\"实验硬件环境\">实验硬件环境</h3>\n<p>本实验的硬件环境如下表所示:</p>\n<table>\n<thead>\n<tr>\n<th>项目</th>\n<th>值</th>\n<th>数量</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>CPU</td>\n<td>Intel® Xeon® Gold 5220</td>\n<td>1</td>\n</tr>\n<tr>\n<td>OS</td>\n<td>Ubuntu  16.04</td>\n<td></td>\n</tr>\n<tr>\n<td>GPU</td>\n<td>RTX 2080 TI</td>\n<td>4</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"数据集选择及处理\">数据集选择及处理</h3>\n<p>实验所用的数据集来源于 AIOps <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2:1\">[2:1]</a></sup> , AIOps 中包含了 29 个类型不同的 KPI (Key Performance Indictor), 本文选择所有的 KPI 进行实验, KPI 统计信息见 <a href=\"https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD\">AIOps 统计</a>.</p>\n<p>对于每个 KPI, 本文按照 1:1 的方法划分训练集 (training set) 与测试集 (test set); 对于每个训练集, 我们将其按照 8:2 的比例, 再次划分为训练集和验证集 (valid dataset). COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:1\">[1:1]</a></sup> 中的数据处理方式与本文一致.</p>\n<h3 id=\"超参数与模型选择\">超参数与模型选择</h3>\n<p>实验在 COCA <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:2\">[1:2]</a></sup> 的 12 个超参数空间中（见 <a href='/research/b4f95541e96e.html#COCA-的-12-个模型超参数'>模型超参数#COCA-的-12-个模型超参数</a>)，使用随机抽样算法（RS）抽取 32 组超参数样本 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">i \\in \\left\\{1,2,\\dots,32\\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6986em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>，构成 32 个不同的 COCA 模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span></span></span></span> 表示超参数示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">HP_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的 COCA 模型.</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>H</mi><msub><mi>P</mi><mi>i</mi></msub><mo separator=\"true\">,</mo></mrow></msub><mi>i</mi><mo>∈</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">COCA_{HP_{i},}i \\in \\{1,2,\\dots,32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.08125em;\">H</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mpunct mtight\">,</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span> 为 32 个超参数不同的 COCA 模型, <strong>本文的间接目标是使用最少的时间, 找出这 32 个模型中性能最好的一个模型.</strong></p>\n<h3 id=\"训练集及其抽样\">训练集及其抽样</h3>\n<p>为了增加模型的训练速度，我们使用 RS 在各个数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><mi>k</mi><mo>=</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mn>32</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">D_k, k=\\{1,2,\\dots,32\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">32</span><span class=\"mclose\">}</span></span></span></span> 的训练集 (training set) 中抽取比率为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 的子集分别训练每组 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, 其中, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>∈</mo><mrow><mo fence=\"true\">{</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>8</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>32</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>64</mn><mo separator=\"true\">,</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>128</mn><mo fence=\"true\">}</mo></mrow></mrow><annotation encoding=\"application/x-tex\">r \\in \\left\\{ 1/1, 1/4, 1/8, 1/32, 1/64, 1/128 \\right\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\">{</span><span class=\"mord\">1/1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/8</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/32</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/64</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1/128</span><span class=\"mclose delimcenter\" style=\"top:0em;\">}</span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">r=1/1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/1</span></span></span></span> 为对比基准 (baseline); 本文用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msubsup><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msubsup><mi>D</mi><mi>k</mi><mi>r</mi></msubsup></msubsup></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}^{D_k^r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4994em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.062em;\"><span style=\"top:-2.3987em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.245em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7385em;\"><span style=\"top:-2.214em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 表示在数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的训练集中随机抽取比例为 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 的数据来训练超参数是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">hp_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的 COCA 模型, 对于本实验来说, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 有 32 个超参数不同的模型. 对于验证集和测试集, 本文不使用任何抽样算法, 也就是说, 本文使用全量的验证集和测试集来评估模型.</p>\n<p>为了便于读者理解, 这里给出一个例子. 以数据集 <code>a07ac296</code> 为例, 其总数据量为 217782, 那么训练集的数据点为 108891, 假设抽样比率 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">r=1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span>, 那么, 我们将在训练集 108891 的点中抽取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> 的子集来训练模型, 也就是随机抽取 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>108891</mn><mo>∗</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo>≈</mo><mn>27223</mn></mrow><annotation encoding=\"application/x-tex\">108891*1/4 \\approx 27223</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">108891</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">27223</span></span></span></span> 点来训练模型.</p>\n<h3 id=\"性能指标选择\">性能指标选择</h3>\n<p>本文选择 5 个指标来评估实验. 第 1 个指标是测试损失 (test loss), 即测试数据集在模型上的损失; 另外 4 个指标是时间序列异常检测研究中 4 个常用的指标, 即 Affiliation F1 score <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3\">[3]</a></sup>, point-wise F1 score (PW F1) <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3:1\">[3:1]</a></sup>, point-adjusted F1 score (PA F1) <sup class=\"footnote-ref\"><a href=\"#fn4\" id=\"fnref4\">[4]</a></sup>,revised point-adjusted F1 score ( RPA F1) <sup class=\"footnote-ref\"><a href=\"#fn5\" id=\"fnref5\">[5]</a></sup>.</p>\n<h3 id=\"最优模型选择\">最优模型选择</h3>\n<p>对于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的部分训练数据训练的模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msubsup><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msubsup><mi>D</mi><mi>k</mi><mi>r</mi></msubsup></msubsup></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}^{D_k^r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4994em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.062em;\"><span style=\"top:-2.3987em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.245em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7385em;\"><span style=\"top:-2.214em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span>, 本文选择 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup><mo>=</mo><mi>arg</mi><mo>⁡</mo><mi><munder><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></munder></mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">COCA^*=\\arg \\underset{hp_i}{\\max}(loss_{valid})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.6382em;vertical-align:-0.8882em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.3479em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\"><span class=\"mop\">max</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 为最优模型, 即在训练数据 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>D</mi><mi>k</mi><mi>r</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">D_k^r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9664em;vertical-align:-0.2831em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.4169em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2831em;\"><span></span></span></span></span></span></span></span></span></span> 训练的一组模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 中找到 <u>验证损失 (valid loss) 最小</u> 的模型作为最优模型.</p>\n<h2 id=\"实验结果\">实验结果</h2>\n<p>本章分析实验总体结果和可能存在的结论</p>\n<h3 id=\"实验总体结果\">实验总体结果</h3>\n<p>本实在 AIOps 的 29 个时间序列数据上进行了实验, 选用的模型为 COCA<sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1:3\">[1:3]</a></sup>, 每个 KPI 通过 KPI ID 区分, 如下图中左上角 <code>05f10d3a-239c-3bef-9bdc-a2feeb0037aa</code> 表示第一个 KPI 的 KPI ID.</p>\n<p>对于每个 KPI, 图 a) 中包含 <em>最小验证损失</em> (minimal valid loss) 和 <em>测试损失</em> (test loss) 两个性能指标; <em>最小验证损失</em> 是在 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msubsup><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><msubsup><mi>D</mi><mi>k</mi><mi>r</mi></msubsup></msubsup></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}^{D_k^r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4994em;vertical-align:-0.4374em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.062em;\"><span style=\"top:-2.3987em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.245em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7385em;\"><span style=\"top:-2.214em;margin-left:-0.0278em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4374em;\"><span></span></span></span></span></span></span></span></span></span> 中, 存在一个模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">COCA^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><mi>A</mi><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">COCA*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord mathnormal\">A</span><span class=\"mord\">∗</span></span></span></span> 使数据集 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 在验证集上的 <em>验证损失 (valid loss)</em> 最小, 即 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup><mo>=</mo><mi>arg</mi><mo>⁡</mo><mi><munder><mo><mi>max</mi><mo>⁡</mo></mo><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></munder></mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>s</mi><msub><mi>s</mi><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">COCA^*=\\arg \\underset{hp_i}{\\max}(loss_{valid})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.6382em;vertical-align:-0.8882em;\"></span><span class=\"mop\">ar<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span style=\"top:-2.3479em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\"><span class=\"mop\">max</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8882em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">os</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\">d</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">COCA^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 是一组模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msub><mi>A</mi><mrow><mi>h</mi><msub><mi>p</mi><mi>i</mi></msub></mrow></msub></mrow><annotation encoding=\"application/x-tex\">COCA_{hp_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">h</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> 中验证损失 (valid loss) 最小的那个模型; <em>测试损失</em> (test loss) 是模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><mi>A</mi><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">COCA*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord mathnormal\">A</span><span class=\"mord\">∗</span></span></span></span> 在测试集上对于的损失; <em>训练损失</em> (train loss) 是模型 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><mi>A</mi><mo>∗</mo></mrow><annotation encoding=\"application/x-tex\">COCA*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord mathnormal\">A</span><span class=\"mord\">∗</span></span></span></span> 在训练集上对于的损失. 图 b) 是 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>O</mi><mi>C</mi><msup><mi>A</mi><mo>∗</mo></msup></mrow><annotation encoding=\"application/x-tex\">COCA^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6887em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">COC</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span></span></span></span></span></span></span></span> 的 4 个性能指标: Affiliation F1 score <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3:2\">[3:2]</a></sup>, point-wise F1 score (PW F1) <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3:3\">[3:3]</a></sup>, point-adjusted F1 score (PA F1) <sup class=\"footnote-ref\"><a href=\"#fn4\" id=\"fnref4:1\">[4:1]</a></sup>,revised point-adjusted F1 score ( RPA F1) <sup class=\"footnote-ref\"><a href=\"#fn5\" id=\"fnref5:1\">[5:1]</a></sup>. 本实验中, <em>最小验证损失</em> (minimal valid loss) 模型选择.</p>\n<embed src='/images/b0296588d434292d0fe14f9101f52ef821c3d917.pdf' width='100%' height='750' type='application/pdf'>\n<p>(这里我暂时不分析训练时间, 因为在 <a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a>, <a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a> 已经得到了证明, 这里不需要再分析证明了😷):</p>\n<p>在分析图之前, 再次明确一下本文期望得到的结论 : 🎯 <strong>本文期望使用少量的数据集, 得到一个模型相似的模型</strong>, 这可以理解为: 当我们逐渐降低训练模型的数据量时, 模型的性能会逐渐降低.</p>\n<p>从上面的 29 个 KPI 中, <strong>没有一个性能指标够满足期望</strong>:</p>\n<ul>\n<li>Test loss 在不同的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 下都一样</li>\n<li>4 种 F1 在不同的 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> 下很难看出规律 (或许就没有规律)</li>\n</ul>\n<h3 id=\"💡💡💡-可能的结论-💡💡💡\">💡💡💡 可能的结论 💡💡💡</h3>\n<p>从图中我倒是可以得到一个其他的结论: <u>从训练集中抽取部分数据来训练模型, 得到的模型比使用全量数据训练得到的更优</u>;</p>\n<p>证明: 处理图 9 和 15 不能证明, 其他 27 个 KPI(总 29) 都能证明.</p>\n<h3 id=\"实验结果异常的地方\">实验结果异常的地方</h3>\n<p>本实验存在 1 个异常的地方</p>\n<ul>\n<li>train loss/ test loss / valid loss 几乎都是一样的 (模型本身的问题?).</li>\n</ul>\n<h2 id=\"讨论\">讨论</h2>\n<p>在本实验中验证了 29 个 KPI, 但是均无法得到预期结论.</p>\n<ul>\n<li><u>我在想, 这个试验是否真的有可能做出来吗? 现在已有的 13 +29 个实验数据告诉我好像不行.</u></li>\n</ul>\n<h2 id=\"下一步实验设计\">下一步实验设计</h2>\n<p>本文在 AIOps 的 29 个 KPI 上, 使用 COCA 模型进行了丰富的实验, 但是没有拿到期望的结果. 那这里就抛出了其他问题: ❓ 是 COCA 比较特殊吗 (因为 test loss/valid loss/train loss 一样), 在其他模型是否能得到期望结论?</p>\n<p>因此, 下一步个工作自然明了, 那就是再换两个模型试试, <span style=\"background:#ff4d4f\">如果两个模型都不成功, 那么我可能认为这个实验做不下去了</span>. 为了选择与 COCA 不同的模型, 下一步本文选择 OC-SVM 与 Deep SVDD, 这两个模型来源于 <sup class=\"footnote-ref\"><a href=\"#fn6\" id=\"fnref6\">[6]</a></sup>.</p>\n<p><img src=\"/images/269ef9d591e009f549a30de55cc43d48911d3e16.png\" alt=\"static/attachment/Pasted image 20230103101330.png\"></p>\n<h2 id=\"下一次汇报时间估计\">下一次汇报时间估计</h2>\n<p>出结果估计需要一个周, 2 天调试 +5 天跑结果 (4GPU), 预计 10 号可得到结果.</p>\n<h2 id=\"其他相关实验\">其他相关实验</h2>\n<p><a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a><br>\n<a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a><br>\n<a href=''>2022-12-09-实验设计</a><br>\n<a href='/research/0efa46192bde.html'>2022-12-30-实验结果</a></p>\n<h2 id=\"实验数据备份\">实验数据备份</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r  <span class=\"number\">2023</span>-01-<span class=\"number\">03.</span><span class=\"built_in\">zip</span>  t83mwvb0 vwzm1pgt wtxe41ld 0uzjydne eahnb6td 9gvbin7u 23odhckw vubtmwi7 1l3xa28c bkos25zt zk1yc630 eonvg4ks jvsl3dw0 czvw0lhu 4nj5v2py zawcukx1 knio0pmf gnhsv4xp irnvt567 akjmgrd7 bi1ge75s 6qdw18or emgjzaw0 rmc2v7dp ew3f0uqj bhxgvisr 3j2wvbns 4y3cir0p ob5376it 2wv85hyb zj37ey8u 4e587woy 8ok0t42u wprs8m64 3p5uvkys kbw3f6p5 ano5t9u2 4jr38st1 agsek0xy o37wl8tq s3bwnzed d5jscf4u 25t6l7hq d1kr6cgo cuh0n5mj z9ctsv5r 81ceryxl 2e5i3hwz o4nwkrav z9w0n5qh ikfe9wz7 t5bd4jmw xue3i4db 92f6u3kp v5c4afmk ptce5mj3 3iv4n7aw jvb4kof0 w5ez2crj 5pj2bsug rf5a91mi sqc3uvnm cwrg2v1k brp67e5a xuq82c3l xlo94fb2 6pogej4f n0j8mf5b u5qmz39t uk7qjda3 yjhz2i9b 0hctn6ia d3b91mvr p7wm8c1j 47x0jecu keo1x82u rkq0w31d d9htv780 xucosj4l sgxc65ar wdbvxykn qz235sfd 2vab9exg a6vt5281 k8r75stu q4rgytvp o2uy6ejg 3b5g4af1 5hdemgjo jcfbugn3 g196luik lvxhuae1 z7h0s1rx t4xn5g0a ksv21fxy 9gorcjmz jfb2wkmq e56l8jtq 9ks78xln 0uqaf9ct 8ruw0cmv obskziyr jr6dwh2z gw42cfo1 v04ug53m vt6rop8u orgfye7w nfip4kut kfv7rxbo e3591ifo 8s04pvom psjwz30k fvjrtwc5 1tg5cbix 13dny5q4 0hgevksl rity2g5z ulaqdgs0 4puvymot b2e1896x 1uqxds0z jcv0t6dq fytrcvzm zjv0ugr8 jhc2nfod r6etdfaq txpzb9mn obwxte8y s9m1b3zl 2nl1hgx6 e427lnoa kaw8nz64 wh63osyc tc150mqj 3tbervyz zdagyrc3 zva8otkh xowivnb2 0mkwzu6v neuk3asp 78olrsv3 tqh0lxu3 irwgs2m0 ujkdpy3n gybnv59l 1z4hrun2 0at2s4uv fk5zs4dc mi6d5w2u a2u4m0g1 qybutxi9 yih6orsk rh5eoidp hyg3epd1 dfkgq983 mx9j6y0f j27lingh 1m4la8j9 8gxnv6ah 19tu6q3s 3vo281hi gejvzx4d 89qdp4jo lvzkhrs7 0posmafd 7kniu8zc b4datgwm xlse8aru n45feblc qwe738co tnxwe508 fcwk0238 1w4d86vi 7qr6i08l </span><br></pre></td></tr></table></figure>\n<p>阿里云数据备份地址: <code>文件 &gt; 09-实验数据备份</code></p>\n<h2 id=\"参考文献\">参考文献</h2>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>R. Wang et al., “Deep Contrastive One-Class Time Series Anomaly Detection.” arXiv, Oct. 08, 2022. Accessed: Dec. 09, 2022. [Online]. Available: <a href=\"http://arxiv.org/abs/2207.01472\">http://arxiv.org/abs/2207.01472</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:2\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref1:3\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn2\" class=\"footnote-item\"><p>2018.KPI Anomaly Detection Competition. Retrieved December, 2022 from <a href=\"https://competition.aiops-challenge.com/home/competition/1484452272200032281\">https://competition.aiops-challenge.com/home/competition/1484452272200032281</a> <a href=\"#fnref2\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref2:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn3\" class=\"footnote-item\"><p>Huet, A., Navarro, J. M., &amp; Rossi, D. 2022. Local Evaluation of Time Series Anomaly Detection Algorithms. Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining, 635–645. <a href=\"#fnref3\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref3:1\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref3:2\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref3:3\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn4\" class=\"footnote-item\"><p>H. Xu et al., “Unsupervised anomaly detection via variational auto-encoder for seasonal kpis in web applications,” in Proceedings of the 2018 world wide web conference, 2018, pp. 187–196. <a href=\"#fnref4\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref4:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn5\" class=\"footnote-item\"><p>Hundman, Kyle, et al. “Detecting spacecraft anomalies using lstms and nonparametric dynamic thresholding.” Proceedings of the 24th ACM SIGKDD international conference on knowledge discovery &amp; data mining. 2018. <a href=\"#fnref5\" class=\"footnote-backref\">↩︎</a> <a href=\"#fnref5:1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn6\" class=\"footnote-item\"><p>Bhatnagar, A., Kassianik, P., Liu, C., Lan, T., Yang, W., et al. 2021. Merlion: A machine learning library for time series. <em><strong>ArXiv Preprint ArXiv:2109.09265</strong></em>. <a href=\"#fnref6\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n"},{"title":"3.1  可视化分析入门","share":true,"date":"2022-06-21T13:15:24.000Z","updated":"2022-12-18T00:07:46.000Z","_content":"","source":"_posts/3.1--可视化分析入门.md","raw":"---\ntitle: 3.1  可视化分析入门\nshare: true\ntags:\n  - uncategory\ndate: 2022-06-21 21:15:24 \nupdated: 2022-12-18 08:07:46 \ncategories:\n  - research\n---\n","slug":"3.1--可视化分析入门","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709v002a4cv9cxpq0xqe","content":"","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":""},{"title":"COCA源码分析","share":true,"date":"2022-12-11T11:50:56.000Z","updated":"2023-01-05T02:02:54.000Z","_content":"\n<a href='{% post_path COCA模型改造 %}'>COCA模型改造</a>\n\n## 总结\n- COCA 并没有填充缺失数据\n- 归一化和标注化的均值和方差是 `训练集与测试集=总数据` 的均值 (scale) 和方差 (bias)\n- ![Excalidraw/COCA源码分析 2022-12-13 09.26.38.excalidraw](/images/46300e066e18a1a004cc63138f21c3566c1d387e.png)\n\n## 安装\n\n```python\nmake install \n```\n\n```python\ngit clone https://github.com/salesforce/Merlion.git\ncd Merlion\npip install salesforce-merlion==1.1.1\npip install -e ts_datasets/\npip install -r requirements.txt \n```\n\n## 原始代码训练结果与代码加速\n\n原始训练结果\n\n![[static/attachment/coco_source.log]]\n\n优化过的训练结果 (4 次)\n\n![[static/attachment/coca_accelarate.log]]\n\n![[static/attachment/coca_accelarate_20221214_033956.log]]\n\n![[static/attachment/coca_accelarate_20221214_033740.log]]\n\n![[static/attachment/coca_accelarate_20221214_033729.log]]\n\n小结:\n\n修改后训练时间从 **3:09:46** 减少到 **0:40:37**\n\n评估指标修改前后变化 (原文结果: Aﬃliation F1= 66.78±2.91)(**在 63.87-69.69 都正常**)\n\n```python\n# 修改前\naffiliation metrics:\n Precision: 0.92778\n Recall:    0.50379\n f1:        0.65300\n# 修改后 1 \naffiliation metrics:\n Precision: 0.92732\n Recall:    0.50441\n f1:        0.65340 \n# 修改后 2\naffiliation metrics:\n Precision: 0.92703\n Recall:    0.50450\n f1:        0.65341\n# 修改后 3\naffiliation metrics:\n Precision: 0.92744\n Recall:    0.50436\nf1:        0.65340\n# 修改后 4\naffiliation metrics:\n Precision: 0.92737\n Recall:    0.50510\nf1:        0.65400\n```\n\n## Dataset 的表示是什么样?\n\nDataset 是多个 KPI 的表示.  \n\nall dataset:  \n![static/attachment/Pasted image 20221211204935.png](/images/0399299fb68cd20b1dbbf9bfc411a229dca7c1f6.png)  \n![static/attachment/Pasted image 20221211205148.png](/images/ecb7c0fed195365ef31c17fb5f0cf2deb9423e79.png)\n\n## `time_series, meta_data = dt[idx]` 是什么\n\ntime_series 包含 `DateTime` 和 `value`  \nmeta_data 包含 `anomaly`(是否是一次) 与 `trainval`(是否是训练集)  \n![static/attachment/Pasted image 20221212080901.png](/images/ab245dbb3a70ff7671109b47f39a1375aa896e67.png)  \n![static/attachment/Pasted image 20221212080845.png](/images/8a55323c68ecb1797e67f3018b72feb6780e3def.png)\n\n## 如何获取训练集和测试集\n\n```python\ntrain_data = TimeSeries.from_pd(time_series[meta_data.trainval])\ntest_data = TimeSeries.from_pd(time_series[~meta_data.trainval])\ntrain_labels = TimeSeries.from_pd(meta_data.anomaly[meta_data.trainval])\ntest_labels = TimeSeries.from_pd(meta_data.anomaly[~meta_data.trainval]) \n```\n\n### `meta_data.trainval` 存储是否是训练集\n\n![static/attachment/Pasted image 20221212081230.png](/images/db90a8315faa1528cf9847b300e3d9d4b25c54de.png)\n\n### `~meta_data.trainval` 取反\n\n```python\n~np.ndarray 表示取反:\n数组中的 true 变 False\nFalse 变 True \n```\n\n![static/attachment/Pasted image 20221212081325.png](/images/bfccfee6cba1e46a6031d9c7c2b70da97c13423c.png)\n\n## COCA 是一次使用全部的数据训练模型吗?\n\n不是, 是一个一个的训练  \n![static/attachment/Pasted image 20221212081932.png](/images/e03e984c489d88c178be758aee9b839174c1ba5b.png)\n\n## COCA 是如何处理缺失数据点的?\n\n'COCA' 未处理缺失数据点.\n\n```python\nkpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa  \n训练集总数量: 146255  \n测试集总数量: 149130  \n总量: 295385 (未加缺失数据 3668(295385+3668=299053(加上缺失数据点后,与我的统计结果一致)))  \n```\n\n标注化后的数据统计:\n\n```python\ntest_time_series=(149130, 1) \n```\n\n我的统计结果:\n\n| kpi_id                               | \\#count_all | \\#train_datapoints | \\#test_datapoints | \\#missing_all |\n| ------------------------------------ | ---------- | ----------------- | ---------------- | ------------ |\n| 05f10d3a-239c-3bef-9bdc-a2feeb0037aa | 299053     | 149526            | 149527           | 3668         |\n\n数据处理流程分析: `data_generator4`\n\ntest_time_series_ts  \n![static/attachment/Pasted image 20221212084211.png](/images/f6df3690fe8dcff8aaa65aaebfe30a859049fafb.png)  \ntrain_time_series  \n![static/attachment/Pasted image 20221212090126.png](/images/e68f82882020d7d891a80e98459c280c481572a9.png)  \ntrain_time_series 转换为窗口后的数据 `configs.window_size=16, configs.time_step=2`  \n![static/attachment/Pasted image 20221212090200.png](/images/e4c4ab79e883880c71761e195ce99f95079141a6.png)\n\n### 如何标准化?\n\n求 **训练集 + 测试集** 所有的数据均值和方差, 然后标准化 (均值 scale, 方差 bias)\n\n```python\nmvn = MeanVarNormalize()\nmvn.train(train_time_series_ts + test_time_series_ts)\nbias, scale = mvn.bias, mvn.scale \n```\n\n### train_time_series 是什么?\n\n被标准后的训练数据.\n\n![static/attachment/Pasted image 20221212084458.png](/images/d959af017055f0c9d66531ee5e22e402b329b6c0.png)\n\n## COCA 的模型如何表示?\n\n```python\nfrom torch import nn\nimport torch\n\n\nclass base_Model(nn.Module):\n    def __init__(self, configs, device):\n        super(base_Model, self).__init__()\n        self.input_channels = configs.input_channels\n        self.final_out_channels = configs.final_out_channels\n        self.features_len = configs.features_len\n        self.project_channels = configs.project_channels\n        self.hidden_size = configs.hidden_size\n        self.window_size = configs.window_size\n        self.device = device\n        self.num_layers = configs.num_layers\n        self.kernel_size = configs.kernel_size\n        self.stride = configs.stride\n        self.dropout = configs.dropout\n\n        self.conv_block1 = nn.Sequential(\n            nn.Conv1d(self.input_channels, 32, kernel_size=self.kernel_size,\n                      stride=self.stride, bias=False, padding=(self.kernel_size//2)),\n            nn.BatchNorm1d(32),\n            nn.ReLU(),\n            nn.MaxPool1d(kernel_size=2, stride=2, padding=1),\n            nn.Dropout(self.dropout)\n        )\n\n        self.conv_block2 = nn.Sequential(\n            nn.Conv1d(32, self.final_out_channels, kernel_size=8, stride=1, bias=False, padding=4),\n            nn.BatchNorm1d(self.final_out_channels),\n            nn.ReLU(),\n            nn.MaxPool1d(kernel_size=2, stride=2, padding=1)\n        )\n\n        self.conv_block3 = nn.Sequential(\n            nn.Conv1d(64, self.final_out_channels, kernel_size=8, stride=1, bias=False, padding=4),\n            nn.BatchNorm1d(self.final_out_channels),\n            nn.ReLU(),\n            nn.MaxPool1d(kernel_size=2, stride=2, padding=1),\n        )\n\n        self.encoder = nn.LSTM(\n            self.final_out_channels,\n            self.hidden_size,\n            batch_first=True,\n            num_layers=self.num_layers,\n            bias=False,\n            dropout=self.dropout,\n        )\n        self.decoder = nn.LSTM(\n            self.final_out_channels,\n            self.hidden_size,\n            batch_first=True,\n            num_layers=self.num_layers,\n            bias=False,\n            dropout=self.dropout,\n        )\n\n        self.output_layer = nn.Linear(self.hidden_size, self.final_out_channels)\n        self.project = nn.Linear(self.final_out_channels * self.features_len, self.project_channels, bias=False)\n        self.projection_head = nn.Sequential(\n            nn.Linear(self.final_out_channels * self.features_len, self.final_out_channels * self.features_len // 2),\n            nn.BatchNorm1d(self.final_out_channels * self.features_len // 2),\n            nn.ReLU(inplace=True),\n            nn.Linear(self.final_out_channels * self.features_len // 2, self.project_channels),\n        )\n\n    def init_hidden_state(self, batch_size):\n        h = torch.zeros((self.num_layers, batch_size, self.hidden_size)).to(self.device)\n        c = torch.zeros((self.num_layers, batch_size, self.hidden_size)).to(self.device)\n        return h, c\n\n    def forward(self, x_in):\n        if torch.isnan(x_in).any():\n            print('tensor contain nan')\n        # 1D CNN feature extraction\n        x = self.conv_block1(x_in)\n        x = self.conv_block2(x)\n        # Encoder\n        hidden = x.permute(0, 2, 1)\n        # enc_hidden = self.init_hidden_state(hidden.shape[0])\n        _, enc_hidden = self.encoder(hidden)\n        # _, enc_hidden = self.encoder(hidden, enc_hidden)\n        # Decoder\n        dec_hidden = enc_hidden\n        output = torch.zeros(hidden.shape).to(self.device)\n        for i in reversed(range(hidden.shape[1])):\n            output[:, i, :] = self.output_layer(dec_hidden[0][0, :])\n            if self.training:\n                _, dec_hidden = self.decoder(hidden[:, i].unsqueeze(1).float(), dec_hidden)\n            else:\n                _, dec_hidden = self.decoder(output[:, i].unsqueeze(1), dec_hidden)\n        hidden = hidden.reshape(hidden.size(0), -1)\n        output = output.reshape(output.size(0), -1)\n        project = self.projection_head(hidden)\n        rec_project = self.projection_head(output)\n\n        return project, rec_project \n```\n\n## 实验结果输出是什么?\n\n```python\npython  coca.py --device cuda\n=============================================\nDataset: IOpsCompetition\nMethod:  COCA\n=============================================\n  0%|                                                                                                            | 0/29 [00:00<?, ?it/s]0time series,kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 146255\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 149130\nData loaded ...\nTraining started ....\n\nEpoch : 1\nTrain Loss     : 587.1270\t |\nValid Loss     : 115.9886\t  |\nTest Loss     : 110.1476\t  |\n\n\nEpoch : 2\nTrain Loss     : 2.5306\t |\nValid Loss     : 0.9269\t  |\nTest Loss     : 0.9269\t  |\n\n\nEpoch : 3\nTrain Loss     : 0.9320\t |\nValid Loss     : 0.7648\t  |\nTest Loss     : 0.7649\t  |\n\n\nEpoch : 4\nTrain Loss     : 0.7760\t |\nValid Loss     : 0.6570\t  |\nTest Loss     : 0.6571\t  |\n\n\nEpoch : 5\nTrain Loss     : 0.6353\t |\nValid Loss     : 0.4868\t  |\nTest Loss     : 0.4911\t  |\n\n\n################## Training is Done! #########################\n\n\nBest affiliation quantile: 0.267\nBest anomaly quantile: 0.124\nBest affiliation quantile: 0.296\nBest anomaly quantile: 0.145\nValid affiliation-metrics\nTest precision: 0.9883  | \tTest recall: 0.4635\n\nValid RAP F1\nValid F1: 0.2857  | \tValid precision: 0.3077  | \tValid recall: 0.2667\n\nTest affiliation-metrics\nTest precision: 0.9235  | \tTest recall: 0.5715\n\nTest RAP F1\nTest F1: 0.3194  | \tTest precision: 0.2805  | \tTest recall: 0.3710\n\n********************************\nINFO - Saving gif to /root/rumtime//img_1670811334.373728.png\n  3%|███▎                                                                                             | 1/29 [08:27<3:56:40, 507.15s/it]1time series,kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 8784\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 8784\nData loaded ...\nTraining started ....\n\nEpoch : 1\nTrain Loss     : 1527.4913\t |\nValid Loss     : 602.3031\t  |\nTest Loss     : 625.7771\t  |\n\n\nEpoch : 2\nTrain Loss     : 196.4226\t |\nValid Loss     : 2.7703\t  |\nTest Loss     : 2.7703\t  |\n\n\nEpoch : 3\nTrain Loss     : 2.8363\t |\nValid Loss     : 2.7490\t  |\nTest Loss     : 2.7490\t  |\n\n\nEpoch : 4\nTrain Loss     : 2.8169\t |\nValid Loss     : 2.7477\t  |\nTest Loss     : 2.7476\t  |\n\n\nEpoch : 5\nTrain Loss     : 2.8162\t |\nValid Loss     : 2.7078\t  |\nTest Loss     : 2.7078\t  |\n\n\n################## Training is Done! #########################\nBest affiliation quantile: 0.115\nBest anomaly quantile: 0.001 \n```\n\n## 跑完一个 COCA, 看看结果?\n\n论文结果: 66.78±2.91  \n我跑出来的结果: 65.30\n\n```python\naffiliation metrics:\n Precision: 0.92778\n Recall:    0.50379\n f1:        0.65300\nRevised-point-adjusted metrics:\n F1 score:  0.24675\n Precision: 0.20459\n Recall:    0.31079\nPoint-adjusted metrics:\n F1 score:  0.51525\n Precision: 0.85390\n Recall:    0.36893\nNAB Scores:\n NAB Score (balanced):       0.29219\n NAB Score (high precision): 0.28211\n NAB Score (high recall):    0.29839\nseed: 2 \nconfig setup:\n\ndataset:IOpsCompetition\ninput_channels:1\nkernel_size:4\nstride:1\nfinal_out_channels:32\nhidden_size:64\nnum_layers:3\nproject_channels:20\ndropout:0.45\nfeatures_len:6\nwindow_size:16\ntime_step:2\nnum_epoch:5\nfreeze_length_epoch:2\nchange_center_epoch:1\ncenter_eps:0.1\nomega1:1\nomega2:0.1\nbeta1:0.9\nbeta2:0.99\nlr:0.0001\ndrop_last:False\nbatch_size:512\nnu:0.001\ndetect_nu:0.0015\nthreshold_determine:floating\nobjective:soft-boundary\nloss_type:distance\naugmentation:<conf.coca.IOpsCompetition_Configs.augmentations object at 0x7f2afb3fa370>\nscale_ratio:1.1\njitter_ratio:0.1\nTraining time is : 3:09:46.206420 \n```\n\n## Time Step Ts 用来干嘛?\n\ntime step is the step while sliding, 实际是什么意思?\n\n## COCA 的超参数有哪些?\n- **repre channels**: the dimension of the ﬁnal representations Z\n- **hidden size** is the dimension of the Seq2Seq in the model\n- **project channels** is the dimension of the projector\n- **window size** is the size of time window.\n- **time step** is the step while sliding.  \n![static/attachment/Pasted image 20221212161412.png](/images/477f24a0d47507502f0dfc97355a94d92f735509.png)\n\n## 常见的性能评估指标?\n- NAB Score\n- Point-Adjusted (PA)\n- Revised Point-Adjusted (RPA)\n\n## Center 是什么?\n\n是一个 vector, (dim=20)  \n![static/attachment/Pasted image 20221212230925.png](/images/6ada637a949cf249034ab68f78aed795e61af20b.png)\n\n## model_train 的参数是些什么?\n\n`def model_train(model, model_optimizer, train_loader, center, length, config, device, epoch):`  \n![static/attachment/Pasted image 20221212231047.png](/images/f5ebef5abe60bb2772d33dee08181a8149cb9fde.png)\n\n## train_loader 中是些什么?\n- aug1 我猜是 jittering (noise addition)\n- aug2 我猜是 scaling (pattern-wise magnitude change)  \n![static/attachment/Pasted image 20221212231235.png](/images/c4b0621e622948b0f276c177681fc93042e22fba.png)\n\n## Score 如何计算?\n\n```python\nscore = distance1 + distance_dec1 \n```\n\n## Distance 如何计算?包含哪些?\n\ndistance1 是 cosine_similarity  \n\n- `feature1.shape=torch.Size([1536, 20])`\n- `distance_dec1=center.shape=torch.Size([1, 20])`\n\n```python\ndistance1 = F.cosine_similarity(feature1, center, eps=1e-6) \ndistance_dec1 = F.cosine_similarity(feature_dec1, center, eps=1e-6)\n```\n\n## What are distance1 and distance_dec1?\n- distance1: feature1 与 center 的 cosine_similarity\n- distance2: feature_dec1 与 center 的 cosine_similarity\n\n## feature_dec1 与 feature1 是什么?\n\n```python\nfeature1=project # project: the project of hidden(representation) Z\nfeature_dec1=feature_dec1 # rec_project: the project of the output (reconstruction representation)\n\n```\n\nproject(feature1) and rec_project(feature_dec1)\n\n![static/attachment/Pasted image 20221213114728.png](/images/00bf6b1d3993dfd678ac116ba75b5363f8901c01.png)\n\n## score 是什么?\n\nscore 是 distance1 and distance_dec1 的距离之和?\n\n```python\nscore = distance1 + distance_dec1\n```\n\ndistance1 是 projector(representation $Z$) 与 center 的 cosine_similarity\n\ndistance_dec1 是 projector(reconstruction representation $z'$) 的 cosine_similarity\n\nprojector 是:\n\n```python\nself.project = nn.Linear(self.final_out_channels * self.features_len, self.project_channels, bias=False)\nself.projection_head = nn.Sequential(\n  nn.Linear(self.final_out_channels * self.features_len, self.final_out_channels * self.features_len // 2),\n  nn.BatchNorm1d(self.final_out_channels * self.features_len // 2),\n  nn.ReLU(inplace=True),\n  nn.Linear(self.final_out_channels * self.features_len // 2, self.project_channels),\n) \n```\n\n## Threshold 如何定?\n\n按异常率指定:\n\n```python\nthreshold = np.percentile(scores, 100-detect_nu) \n```\n\n**detect_mu** is a set in nu_list, $\\operatorname{nu\\_list} \\in [0.001, 0.3]$ :![static/attachment/Pasted image 20221213121235.png](/images/87719b28415cdcff43416487c2813d47375a6961.png)\n\n## 单个 KPI 的 Affiliation Metrix 如何计算\n- 固定异常率为 `self.detect_nu = 0.0005`\n\n计算 `mu`:\n\n![static/attachment/Pasted image 20221213120925.png](/images/1a334b7c374f4d28bfb35f39ed5a141b5711586f.png)\n\n## Affiliation-F1 是最优 F1 吗? 类似于 AUC 的那种\n\n不是. Affiliation-F1 是 `score > threshold` 生成的的一系列 0,1 计算出来的值. 计算方法:\n\n`affiliation_f1 = 2 * (dic[\"precision\"] * dic[\"recall\"]) / (dic[\"precision\"] + dic[\"recall\"])`\n\n## predict 是什么?\n\npredict 是根据 threshold 定好的一个二分类的值: 0 或 1\n\n![static/attachment/Pasted image 20221213171810.png](/images/86992fa08b32b69f2d7deb9c16c686410a529d29.png)\n\n## val_target 是什么\n\n应该是验证集的 标签 (label)\n\n## VAL 指的是什么\n\nval 指 valid, 如:\n\n- val_loss 表示验证损失\n\n## ad_predict 在干什么\n- 找出最大的 nu_max1\n- 找出最大的 nu_max2\n\n返回找到的最大 affiliation metric 的 (precision, recall) ![static/attachment/Pasted image 20221213174343.png](/images/b4ce19e68228c0f00f158e92e801a4e8f8718236.png)\n\n## COCA 费时的地方\n\n```python\n################## Training is Done! #########################\n\nBest affiliation quantile: 0.267\nBest anomaly quantile: 0.124\n---- 上一步到下一步之间很费时 ----\nBest affiliation quantile: 0.296\nBest anomaly quantile: 0.145 \n```\n\n## COCA 中评估 DAGMM\n\n```python\npython baseline.py  --dataset  IOpsCompetition --models  DAGMM\npython baseline.py  --dataset  IOpsCompetition --models LSTMED\npython baseline.py  --dataset  IOpsCompetition --models models.DeepSVDD:DeepSVDD\n```\n\noption\n\n```python\n--dataset 'MSL', 'UCR', 'IOpsCompetition', 'NAB', 'Synthetic', 'SMD', 'SMAP'\n\n--models 'DefaultDetector', 'DBL', 'DynamicBaseline', 'WindStats', 'RRCF', 'RandomCutForest', 'ISF', 'IsolationForest', 'Arima', 'ARIMA', 'ArimaDetector', 'HoltWinter', 'AdditiveHoltWinter', 'ETS', 'ETSDetector', 'Prophet', 'ProphetDetector', 'StatThreshold', 'SR', 'SpectralResidual', 'ZMS', 'AE', 'AutoEncoder', 'VariationalAutoEncoder', 'VAE', 'DeepGaussianMixture', 'DAGMM', 'LSTMEncoderDecoder', 'LSTMED', 'DeepSVDD', 'models.DeepSVDD:DeepSVDD', 'CPC', 'models.CPC:CPC', 'OCSVM', 'models.OCSVM:OCSVM'\n```\n\nbaseline 训练日志\n\n![[static/attachment/baseline_20221214_154151.log]]\n\n```python\nRevised point-adjusted metrics\nF1 score:  0.1879\nPrecision: 0.1274\nRecall:    0.3578\n\nMean Time To Detect Anomalies:  -0 days 00:18:03\nMean Detected Anomaly Duration: 0 days 01:14:04\nMean Anomaly Duration:          0 days 00:41:38\n```\n\n## COCA 中如何调用 DAGMM 计算 Affiliation Metric\n\n在 `baseline.py` 中会写入文件 `./log.txt`\n\n```python\n['DAGMM'] IOpsCompetition Affiliation Metrics\n['DAGMM'] IOpsCompetition  {'precision': 0.41254758453288576, 'recall': 0.24370771196396945}\n['DAGMM'] IOpsCompetition Affiliation Metrics\n['DAGMM'] IOpsCompetition  {'precision': 0.43984316475087665, 'recall': 0.23352023005803885}\n['DAGMM'] IOpsCompetition Affiliation Metrics\n['DAGMM'] IOpsCompetition  {'precision': 0.43201223250585297, 'recall': 0.24751992148434693} \n```\n\n| Affiliation precision | Affiliation recall | Affiliation F1 |\n| --------------------- | ------------------ | -------------- |\n| 0.412547585           | 0.243707712        | 0.306408279    |\n| 0.439843165           | 0.23352023         | 0.305072351    |\n| 0.432012233           | 0.247519921        | 0.314721337    |\n\n原始论文:\n\n![static/attachment/Pasted image 20221215083156.png](/images/f19caf1299d1db71e9fe3c7589d16c801050ac6b.png)\n\n结论:\n\n相差 4% 左右\n\n<u></u>## 如何使用作者编写的 DeepSVDD 模型?\n\n```python\npython baseline.py  --dataset  IOpsCompetition --models models.DeepSVDD:DeepSVDD \n```\n\n## Affiliation F1 如何计算\n\n```python\n0.0 if p == 0 or r == 0 else 2 * p * r / (p + r) \n```\n\np: precision\n\nr: Recall\n\n## DeepSVDD 的结果\n\n==结论==: 源代码运行结果 与 原文实验结果基本一致.\n\n源代码运行结果 (IOpsCompetition Affiliation Metrics):\n\n```python\n{'precision': 0.4714819300747144, 'recall': 0.32748809986047706, 'f1': 0.3865094199121414}\n{'precision': 0.4682508714752369, 'recall': 0.3339264963170998, 'f1': 0.38984239443073504} \n{'precision': 0.4746654049791827, 'recall': 0.32840964548183676, 'f1': 0.388219500237786}\n```\n\n源论文中的实验结果: $[37.58, 38.88]$\n\n![static/attachment/Pasted image 20221216075058.png](/images/e796e8b06ad07e98f1d6db479bd4cdd35f66acb8.png)\n\n## coca_debug.py 解析\n### data process\n\n```python\ntrain_data.shape=  ( 1, 605)\ntest_data.shape=( 1 , 3427) \nconfig:\n\taugmentation = {augmentations} <conf.coca.IOpsCompetition_Configs.augmentations>\n\tbatch_size = {int} 512\n\tbeta1 = {float} 0.9\n\tbeta2 = {float} 0.99\n\tcenter_eps = {float} 0.1\n\tchange_center_epoch = {int} 1\n\tdataset = {str} 'IOpsCompetition'\n\tdetect_nu = {float} 0.0015\n\tdrop_last = {bool} False\n\tdropout = {float} 0.45\n\tfeatures_len = {int} 6\n\tfinal_out_channels = {int} 32\n\tfreeze_length_epoch = {int} 2\n\thidden_size = {int} 64\n\tinput_channels = {int} 1\n\tkernel_size = {int} 4\n\tloss_type = {str} 'distance'\n\tlr = {float} 0.0001\n\tnu = {float} 0.001\n\tnum_epoch = {int} 5\n\tnum_layers = {int} 3\n\tobjective = {str} 'soft-boundary'\n\tomega1 = {int} 1\n\tomega2 = {float} 0.1\n\tproject_channels = {int} 20\n\tstride = {int} 1\n\tthreshold_determine = {str} 'floating'\n\ttime_step = {int} 2\n\twindow_size = {int} 16\n\tdata_generator4(train_data, test_data, train_labels,test_labels, configs)\n\ndata_generator4\n1. 使用所有数据的(训练集和测试集)均值和方差标准化数据集\n2. 将训练集划分为训练集集和验证集(8:2)(train,val,test_data)\n3. 将所有数据处理为窗口数据(time_step=2)\n\t1. train_x.shape=(236, 1, 16)\n\t2. val_x.shape=(59, 1, 16)\n\t3. test_x.shape=(1706, 1, 16)\n4. 将训练集/测试集/验证集(train,test,val) 封装到dict中, 键名分别为 'samples', `labels`\n5. 数据增强(即 aug1,aug2)\n\t1. weak_aug = scaling(sample, config.augmentation.scale_ratio)\n\t2. strong_aug = jitter(sample, config.augmentation.jitter_ratio)\n6. shuffle 训练集, 验证集和测试集不shuffle \n```\n\n### model training\n\n```python\n1. 初始化 center: torch.zeros(config.project_channels, device=device)\n2. 初始化 length: length = torch.tensor(0, device=device)\n3. 调用训练函数 model_train(): model_train(model, model_optimizer, train_dl, center,length, config, device, epoch)\n\t1. 获取数据集: data, target, aug1, aug2\n\t2. 拼接训练数据(原始数据+增强后的数据, 增强 weak_aug,strong_aug): all_data = torch.cat((data, aug1, aug2), dim=0)\n\t3. 计算 z 和 output 的 project : feature1, feature_dec1 = model(all_data)\n\t4. 计算损失和score,score= (z project 与 center 的 cosine_similarity + output(recon_x) project 与 center 的 cosine_similarity)\n\t5. 重命名 score : predcit= score.detach().cpu().numpy()\n```\n\n### model evaluate\n\n```python\n1. 计算 feature1, feature_dec1 =  model(data)\n2. 计算 loss 和 score: loss, score = train(feature1, feature_dec1, center, length, epoch, config, device)\n3. 重命名 score: predict=score.detach().cpu().numpy()\n4. 计算 performance:\n\t1. val_target, val_score_origin, val_loss, all_projection \n```\n\n### ad_predict\n\n```python\n1. 调用 ad_predict(target, scores, mode, nu)\n\t1. target: label\n\t2. scores:  预测score\n\t3. mode: str, floating\n\t4. nu: 0.0015, 用来干嘛\n```\n\n## all_target, all_predict, total_loss, all_projection 是什么?\n\n```python\nall_target: 数据标签 label \nall_predict: score, dist(project of z, center)+dist(project of output, center)\ntotal_loss: 多个 batch_size 的loss的累加和\nall_projection: project of z\n```\n\n## 数据增强 scaling,jitter 实现\n\n```python\ndef scaling(x, sigma=1.1):\n    # https://arxiv.org/pdf/1706.00527.pdf\n    factor = np.random.normal(loc=2., scale=sigma, size=(x.shape[0], x.shape[2]))\n    ai = []\n    for i in range(x.shape[1]):\n        xi = x[:, i, :]\n        ai.append(np.multiply(xi, factor[:, :])[:, np.newaxis, :])\n    return np.concatenate((ai), axis=1)\n    \ndef jitter(x, sigma=0.8):\n    # https://arxiv.org/pdf/1706.00527.pdf\n    return x + np.random.normal(loc=0., scale=sigma, size=x.shape)\n```\n\n## ## score 是按 rolling window 计算的还是按照 point 计算的?  \n\n按照窗口计算的, 每个窗口计算一个 score\n\n```python\ntest_batch_data.shape=torch.Size([59, 1, 16])\nfeature1.shape=torch.Size([59, 20])\nfeature_dec1.shape=torch.Size([59, 20])\nscore.shape=59(每个窗口计算一个)\n```\n\n## COCA 的源码是按照 rolling windows 计算 score, 那么, 如何映射到原始数据到一个点呢?\n\n使用一个窗口代表当前数据点. 直接用窗口代替一个单独的数据点.\n\n```python\ntime_series.shape=(1, 3427)\nscore.shape= 3427\n```\n\n## 在计算 score 时, 第一个窗口前数据不够如何处理\n\n使用 score 的第一个值填充\n\n```python\nscores = np.zeros((X.shape[0],), dtype=float)\ntest_scores = np.sum(np.abs(r - y.cpu().data.numpy()), axis=1)\nscores[self.k - 1 :] = test_scores\nscores[: self.k - 1] = test_scores[0] \n```\n\n## 在 IOpsCompetition 的 05f10d3a-239c-3bef-9bdc-a2feeb0037aa 的训练结果\n\n原代码运行结果\n\n```python\n\n================================================================\n========== \t train_data.shape:146255,test_data.shape:149130\n================================================================\ntrain: 58496,valid:14624, test:74558\nTraining started ....\nINFO - Length:0 \nINFO - Epoch: 1, Train Loss: 396.1574, Valid Loss: 115.7214, Test Loss: 109.9165 \nINFO - Length:0.4248124946355827 \nINFO - Epoch: 2, Train Loss: 1.4987, Valid Loss: 0.5217, Test Loss: 0.5218 \nINFO - Length:0.3707212271690369 \nINFO - Epoch: 3, Train Loss: 0.5671, Valid Loss: 0.4676, Test Loss: 0.4677 \nINFO - Length:0.2905264883637429 \nINFO - Epoch: 4, Train Loss: 0.4960, Valid Loss: 0.3880, Test Loss: 0.3884 \nINFO - Length:0.2738433243036271 \nINFO - Epoch: 5, Train Loss: 0.4482, Valid Loss: 0.3709, Test Loss: 0.3710 \n\n################## Training is Done! #########################\n\n################## Start to evaluate! #########################\n\n================================================================\n========== \t Calculating validation metrics\n================================================================\nBest affiliation quantile: 0.2520204081632653\nBest affiliation  metric: {'precision': 0.9991141275746687, 'recall': 0.7897834771523201}\nBest revised point adjusted anomaly quantile: 0.23977551020408164\nBest revised point adjusted: {'f1': 0.7096774193548386, 'precision': 0.6875, 'recall': 0.7333333333333333}\n\n================================================================\n========== \t Calculating testing metrics\n================================================================\nBest affiliation quantile: 0.301\nBest affiliation  metric: {'precision': 0.8333357886680556, 'recall': 0.7724293430234433}\nBest revised point adjusted anomaly quantile: 0.0683469387755102\nBest revised point adjusted: {'f1': 0.42592592592592593, 'precision': 0.5, 'recall': 0.3709677419354839}\n\n================================================================\n========== \t Validation metrics\n================================================================\nValid affiliation precision: 0.9991\nValid affiliation recall: 0.7898\n\nValid RevisedPointAdjusted F1: 0.7097  \nValid RevisedPointAdjusted precision: 0.6875 \nValid RevisedPointAdjusted recall: 0.7333\n\n================================================================\n========== \t Testing metric\n================================================================\nTest affiliation precision: 0.8333 \nTest affiliation recall: 0.7724\n\nTest RevisedPointAdjusted F1: 0.4259\nTest RevisedPointAdjusted precision: 0.5000\nTest RevisedPointAdjusted recall: 0.3710\n\n================================================================\n========== \t Configuration of the model\n================================================================\ndataset:IOpsCompetition\ninput_channels:1\nkernel_size:4\nstride:1\nfinal_out_channels:32\nhidden_size:64\nnum_layers:3\nproject_channels:20\ndropout:0.45\nfeatures_len:6\nwindow_size:16\ntime_step:2\nnum_epoch:5\nfreeze_length_epoch:2\nchange_center_epoch:1\ncenter_eps:0.1\nomega1:1\nomega2:0.1\nbeta1:0.9\nbeta2:0.99\nlr:0.0001\ndrop_last:False\nbatch_size:512\nnu:0.001\ndetect_nu:0.0015\nthreshold_determine:floating\nobjective:soft-boundary\nloss_type:distance\naugmentation:<conf.coca.IOpsCompetition_Configs.augmentations object at 0x10143e700>\nTraining time: 257.978011\n```\n\n我的代码结果\n\n```python\n(sw_torch_1_10) sunwu@mac-m1 p1_ch05 % make test_aiops\npython main_torch.py --dataset IOpsCompetition --data_id 05f10d3a-239c-3bef-9bdc-a2feeb0037aa --gpus 0\n<frozen importlib._bootstrap>:219: RuntimeWarning: scipy._lib.messagestream.MessageStream size changed, may indicate binary incompatibility. Expected 56 from C header, got 64 from PyObject\nINFO - Specified gpus: 0 \nINFO - CUDA is not available, using GPU to work. \nINFO - Target device: cpu \nINFO - train: (1, 146255), test: (1, 149130) \nINFO - train_loader.len=58496,val_loader:14624,test_loader=74558 \nINFO - Training started .... \nINFO - Length:0 \nINFO - Epoch: 1, Train Loss: 396.1574, Valid Loss: 115.7214 \nINFO - Length:0.4676222130060199 \nINFO - Epoch: 2, Train Loss: 1.4527, Valid Loss: 0.5645 \nINFO - Length:0.36364347952604353 \nINFO - Epoch: 3, Train Loss: 0.5727, Valid Loss: 0.4605 \nINFO - Length:0.32340016061067595 \nINFO - Epoch: 4, Train Loss: 0.5025, Valid Loss: 0.4203 \nINFO - Length:0.26546983695030246 \nINFO - Epoch: 5, Train Loss: 0.4409, Valid Loss: 0.3641 \n\n================================================================\n==========       Calculating validation metrics\n================================================================\nBest affiliation quantile: 0.28875510204081634\nBest affiliation  metric: {'precision': 0.9983926575606217, 'recall': 0.8555412157787603}\nBest revised point adjusted anomaly quantile: 0.2826326530612245\nBest revised point adjusted: {'f1': 0.7058823529411765, 'precision': 0.631578947368421, 'recall': 0.8}\n\n================================================================\n==========       Calculating testing metrics\n================================================================\nBest affiliation quantile: 0.2826326530612245\nBest affiliation  metric: {'precision': 0.845356229045622, 'recall': 0.7913941253003326}\nBest revised point adjusted anomaly quantile: 0.07446938775510203\nBest revised point adjusted: {'f1': 0.4070796460176991, 'precision': 0.45098039215686275, 'recall': 0.3709677419354839}\n\n================================================================\n==========       Validation metrics\n================================================================\nValid affiliation precision: 0.9984\nValid affiliation recall: 0.8555\n\nValid RevisedPointAdjusted F1: 0.7059  \nValid RevisedPointAdjusted precision: 0.6316 \nValid RevisedPointAdjusted recall: 0.8000\n\n================================================================\n==========       Testing metric\n================================================================\nTest affiliation precision: 0.8454 \nTest affiliation recall: 0.7914\n\nTest RevisedPointAdjusted F1: 0.4071\nTest RevisedPointAdjusted precision: 0.4510\nTest RevisedPointAdjusted recall: 0.3710\n\n```\n\n## time_step =2 时, score 如何计算?\n\n## 同样的代码, 为何执行结果不一致?\n\nQ: 我将 COCA 封装为类, 在测试的时候, 出现如下神奇问题: 我的修改版本和 COCA 源代码中, 第一个执行结果的 epoch 的 loss 一致, 但是到第二个 epoch 以后, loss 就不一致了. 执行结果如下:\n\n- 第一个 epoch, loss 一致 (左边表示 coca 的源代码输出日志, 右边表示我的修改版本输出日志)![static/attachment/Pasted image 20221222101010.png](/images/a1eca7b2a04b83f569459e5be19e5e1d501ba561.png)\n\n- 第二个 epoch 的 loss <u>不一致了</u> ![static/attachment/Pasted image 20221222100911.png](/images/0cbcacd8ee62ee0c50d3c6934afa402cadda2481.png)\n\n### 结论\n\n经过加班熬夜近 8 个小时,发现问题是: COCA 在训练的时候, 使用了测试集评估了模型, 而我没有: (左: 我的版本, 右: COCA 源码)\n\n![static/attachment/Pasted image 20221222102021.png](/images/aac3f753a34df8ae438f91a2690e018619dd7bc6.png)\n\n当我吧上图中黄色注释掉之后, 两者运行结果完全一致.如下是 eopch =3 和 epoch=5 的快照, 可知两者完全一致.\n\n![static/attachment/Pasted image 20221222102402.png](/images/a4d3fdf4957cef7cf3bb12e7f8e8ac0c7f620df3.png)\n\n![static/attachment/Pasted image 20221222102325.png](/images/15823f33dacbc6167202b406986639e89767154e.png)\n\n如果加上测试集的评估代码, 结果又回到了不一样. 我取消了如下代码的注释\n\n```python\n# test_target, test_score_origin, test_loss, all_projection = model_evaluate(model, test_dl, center, length,\n#                                                                            config, device, epoch) \n```\n\n重复执行结果又不同了\n\n![static/attachment/Pasted image 20221222102703.png](/images/e3a7ff82fce93e8f5235dbcac4bd167d537bb558.png)\n\n那问题来了, 为什么训练的时候要使用测试集评估其性能呢? 去掉行不行?\n\n### 论文问题: 可能数据使用不当\n\nCOCA 在训练的时候, 让模型看到了测试集, 导致结果 COCA 的性能偏高\n\n![static/attachment/Pasted image 20221222104232.png](/images/e15f4946f025f21858959bec16073b32077dbd31.png)\n\n## 在训练期间使用/不使用测试集评估模型的影响\n\n结论: 有区别, 但是很小\n\nNAB 的数据集 1:\n\n![static/attachment/Pasted image 20221222105911.png](/images/7ec6d7fbaa4df7de5b8b75be102dd3ac5cddce65.png)\n\nNAB 的数据集 2:\n\n![static/attachment/Pasted image 20221222110007.png](/images/9b67738bd58cd4fa3d5bc257d0377735e0b99d1c.png)\n\n## AIOPS 的 05f10d3a-239c-3bef-9bdc-a2feeb0037aa 对比\n\n左: coca , 右: 我的实现\n\n结论: 性能指标差不多 (0.01, 证明我的实现 ok, 问题不大)\n\n![static/attachment/Pasted image 20221222111421.png](/images/1e42d7af05dbfab89643e9268b13d7bac4df9527.png)\n\n## RuntimeError: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)\n\nThe parameters when error occurs:\n\n```python\nINFO - Load configuration from nni, loaded parameters: \n{'num_layers': 3.5879567896971647, 'project_channels': 46.7047622771687, 'dropout': 0.3002211281022341, 'features_len': 8.300394615230376, 'window_size': 53.69552169749169, 'time_step': 4.514415263158897, 'num_epoch': 7.697804748314586, 'center_eps': 0.20709294499972672, 'lr': 0.08785427712258059, 'batch_size': 2.478578387644, 'hidden_size': 190.4429211984154, 'final_out_channels': 29.479373928427712} \nINFO - Updating parameters num_layers           = 4 \nINFO - Updating parameters project_channels     = 47 \nINFO - Updating parameters dropout              = 0.3002211281022341 \nINFO - Updating parameters features_len         = 8 \nINFO - Updating parameters window_size          = 54 \nINFO - Updating parameters time_step            = 5 \nINFO - Updating parameters num_epoch            = 8 \nINFO - Updating parameters center_eps           = 0.20709294499972672 \nINFO - Updating parameters lr                   = 0.08785427712258059 \nINFO - Updating parameters batch_size           = 2 \nINFO - Updating parameters hidden_size          = 190 \nINFO - Updating parameters final_out_channels   = 29 \nINFO - The number of parameters updated:         12  \n```\n\n```python\nall_data.shape=torch.Size([6, 1, 54]) \nx_in.shape=all_data=torch.Size([6, 1, 54]) \nx.shape=torch.Size([6, 29, 15])\nhidden.shape=torch.Size([6, 15, 29])\n\n....\n\nhidde.shape= torch.Size([6, 435])\ntorch.nn.Linear.in=self.final_out_channels * self.features_len=232\n54\n```\n\n关系: ` self.final_out_channels * self.features_len=232` = `hidden.shape[1]`\n\n```python\nself.input_channels\nself.final_out_channels \n53: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)\n16: mat1 and mat2 shapes cannot be multiplied (6x174 and 232x116)\n\n\nwindow_size=54\nall_data=torch.Size([6, 1, 54]) \n```\n\n![Excalidraw/COCA源码分析 2022-12-23 14.56.42.excalidraw](/images/053eb65a3953e5e9eb2dda772a4dd0c702afd5ca.png)\n\n### 修复代码\n\n将 `project_input_features= self.final_out_channels * self.features_len` 修改为:\n\n```python\nl1_out_conv1d = get_l_out_of_max_pool_1d(self.window_size, kernel_size=self.kernel_size, stride=self.stride,\n\t\t\t\t\t\t\t    padding=self.kernel_size // 2)\nl1_out_maxpool1d = get_l_out_of_max_pool_1d(l1_out_conv1d, kernel_size=2, stride=2, padding=1)\n\nl2_out_conv1d = get_l_out_of_max_pool_1d(l1_out_maxpool1d, kernel_size=8, stride=1, padding=4)\nl2_out = get_l_out_of_max_pool_1d(l2_out_conv1d, kernel_size=2, stride=2, padding=1)\nproject_input_features = self.final_out_channels * l2_out \n\n```\n\n`get_l_out_of_max_pool_1d`:\n\n```python\ndef get_l_out_of_max_pool_1d(l_in, kernel_size, padding=0, dilation=1, stride=1):\n    \"\"\"\n    Get the L_out of MAXPOOL1D  https://pytorch.org/docs/stable/generated/torch.nn.MaxPool1d.html\n    or CONV1D https://pytorch.org/docs/stable/generated/torch.nn.Conv1d.html\n\n\n    Parameters\n    ----------\n    l_in :\n    padding :\n    dilation :\n    kernel_size :\n    stride :\n\n    Returnsoc\n    -------\n\n    \"\"\"\n    return int(1 + ((l_in + (2 * padding) - dilation * (kernel_size - 1) - 1) / stride))\n```\n\n## NAB 测试结果\n\n我封装的代码和 COCA 原始代码运行结果\n\n![static/attachment/Pasted image 20221223204407.png](/images/349241e4425a5abf17e3ceb1e21715854fa139a7.png)\n\n第二个 EPOCH 不一致的原因是: COCA 在训练的时候使用了 test set.\n\n![static/attachment/Pasted image 20221223204503.png](/images/36c66f727541f20bfd022c1a05f1d3b74cbf2878.png)\n\n代码重现:\n\n```python\nmake p_nab\n```\n\nor\n\n```python\npython /Users/sunwu/SW-Research/COCA-main/coca_debug.py  --dataset NAB  >  /Users/sunwu/Desktop/text/coca_debug.txt 2>&1\npython /Users/sunwu/SW-Research/p1_ch05/main_torch.py --dataset NAB  > /Users/sunwu/Desktop/text/main_torch.txt  2>&1 \n```\n\n## COCA 输入/出分析\n\n目的: COCA 如何计算模型性能\n\n- 数据初试处理结果, 16 是 **窗口大小**:\n\t- `train_dat_dict['samples'].shape=(236, 1, 16)`\n- 训练阶段 (**59 是 batch_size, 16 是窗口大小**):\n\t- 验证数据: `torch.Size([59, 1, 16])`\n\t- `feature1.shape=torch.Size([59, 20])`\n\t- `feature_dec1.shape=torch.Size([59, 20])`\n\t- `score=(59,)`\n### 结论\n\n每个窗口计算一个 score?\n\n- 输入: batch window `torch.Size([59, 1, 16])`\n- 输出: batch score `score=(59,)`\n\n原文是嘛?\n\n## coca 中 time_step 为 2 时, 如何计算 score?\n![[时间序列(源于coca)中的 time step]]","source":"_posts/COCA源码分析.md","raw":"---\ntitle: COCA源码分析\nshare: true\ntags:\n  - uncategory\n  - research\ndate: 2022-12-11 19:50:56 \nupdated: 2023-01-05 10:02:54 \ncategories: research\n---\n\n<a href='{% post_path COCA模型改造 %}'>COCA模型改造</a>\n\n## 总结\n- COCA 并没有填充缺失数据\n- 归一化和标注化的均值和方差是 `训练集与测试集=总数据` 的均值 (scale) 和方差 (bias)\n- ![Excalidraw/COCA源码分析 2022-12-13 09.26.38.excalidraw](/images/46300e066e18a1a004cc63138f21c3566c1d387e.png)\n\n## 安装\n\n```python\nmake install \n```\n\n```python\ngit clone https://github.com/salesforce/Merlion.git\ncd Merlion\npip install salesforce-merlion==1.1.1\npip install -e ts_datasets/\npip install -r requirements.txt \n```\n\n## 原始代码训练结果与代码加速\n\n原始训练结果\n\n![[static/attachment/coco_source.log]]\n\n优化过的训练结果 (4 次)\n\n![[static/attachment/coca_accelarate.log]]\n\n![[static/attachment/coca_accelarate_20221214_033956.log]]\n\n![[static/attachment/coca_accelarate_20221214_033740.log]]\n\n![[static/attachment/coca_accelarate_20221214_033729.log]]\n\n小结:\n\n修改后训练时间从 **3:09:46** 减少到 **0:40:37**\n\n评估指标修改前后变化 (原文结果: Aﬃliation F1= 66.78±2.91)(**在 63.87-69.69 都正常**)\n\n```python\n# 修改前\naffiliation metrics:\n Precision: 0.92778\n Recall:    0.50379\n f1:        0.65300\n# 修改后 1 \naffiliation metrics:\n Precision: 0.92732\n Recall:    0.50441\n f1:        0.65340 \n# 修改后 2\naffiliation metrics:\n Precision: 0.92703\n Recall:    0.50450\n f1:        0.65341\n# 修改后 3\naffiliation metrics:\n Precision: 0.92744\n Recall:    0.50436\nf1:        0.65340\n# 修改后 4\naffiliation metrics:\n Precision: 0.92737\n Recall:    0.50510\nf1:        0.65400\n```\n\n## Dataset 的表示是什么样?\n\nDataset 是多个 KPI 的表示.  \n\nall dataset:  \n![static/attachment/Pasted image 20221211204935.png](/images/0399299fb68cd20b1dbbf9bfc411a229dca7c1f6.png)  \n![static/attachment/Pasted image 20221211205148.png](/images/ecb7c0fed195365ef31c17fb5f0cf2deb9423e79.png)\n\n## `time_series, meta_data = dt[idx]` 是什么\n\ntime_series 包含 `DateTime` 和 `value`  \nmeta_data 包含 `anomaly`(是否是一次) 与 `trainval`(是否是训练集)  \n![static/attachment/Pasted image 20221212080901.png](/images/ab245dbb3a70ff7671109b47f39a1375aa896e67.png)  \n![static/attachment/Pasted image 20221212080845.png](/images/8a55323c68ecb1797e67f3018b72feb6780e3def.png)\n\n## 如何获取训练集和测试集\n\n```python\ntrain_data = TimeSeries.from_pd(time_series[meta_data.trainval])\ntest_data = TimeSeries.from_pd(time_series[~meta_data.trainval])\ntrain_labels = TimeSeries.from_pd(meta_data.anomaly[meta_data.trainval])\ntest_labels = TimeSeries.from_pd(meta_data.anomaly[~meta_data.trainval]) \n```\n\n### `meta_data.trainval` 存储是否是训练集\n\n![static/attachment/Pasted image 20221212081230.png](/images/db90a8315faa1528cf9847b300e3d9d4b25c54de.png)\n\n### `~meta_data.trainval` 取反\n\n```python\n~np.ndarray 表示取反:\n数组中的 true 变 False\nFalse 变 True \n```\n\n![static/attachment/Pasted image 20221212081325.png](/images/bfccfee6cba1e46a6031d9c7c2b70da97c13423c.png)\n\n## COCA 是一次使用全部的数据训练模型吗?\n\n不是, 是一个一个的训练  \n![static/attachment/Pasted image 20221212081932.png](/images/e03e984c489d88c178be758aee9b839174c1ba5b.png)\n\n## COCA 是如何处理缺失数据点的?\n\n'COCA' 未处理缺失数据点.\n\n```python\nkpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa  \n训练集总数量: 146255  \n测试集总数量: 149130  \n总量: 295385 (未加缺失数据 3668(295385+3668=299053(加上缺失数据点后,与我的统计结果一致)))  \n```\n\n标注化后的数据统计:\n\n```python\ntest_time_series=(149130, 1) \n```\n\n我的统计结果:\n\n| kpi_id                               | \\#count_all | \\#train_datapoints | \\#test_datapoints | \\#missing_all |\n| ------------------------------------ | ---------- | ----------------- | ---------------- | ------------ |\n| 05f10d3a-239c-3bef-9bdc-a2feeb0037aa | 299053     | 149526            | 149527           | 3668         |\n\n数据处理流程分析: `data_generator4`\n\ntest_time_series_ts  \n![static/attachment/Pasted image 20221212084211.png](/images/f6df3690fe8dcff8aaa65aaebfe30a859049fafb.png)  \ntrain_time_series  \n![static/attachment/Pasted image 20221212090126.png](/images/e68f82882020d7d891a80e98459c280c481572a9.png)  \ntrain_time_series 转换为窗口后的数据 `configs.window_size=16, configs.time_step=2`  \n![static/attachment/Pasted image 20221212090200.png](/images/e4c4ab79e883880c71761e195ce99f95079141a6.png)\n\n### 如何标准化?\n\n求 **训练集 + 测试集** 所有的数据均值和方差, 然后标准化 (均值 scale, 方差 bias)\n\n```python\nmvn = MeanVarNormalize()\nmvn.train(train_time_series_ts + test_time_series_ts)\nbias, scale = mvn.bias, mvn.scale \n```\n\n### train_time_series 是什么?\n\n被标准后的训练数据.\n\n![static/attachment/Pasted image 20221212084458.png](/images/d959af017055f0c9d66531ee5e22e402b329b6c0.png)\n\n## COCA 的模型如何表示?\n\n```python\nfrom torch import nn\nimport torch\n\n\nclass base_Model(nn.Module):\n    def __init__(self, configs, device):\n        super(base_Model, self).__init__()\n        self.input_channels = configs.input_channels\n        self.final_out_channels = configs.final_out_channels\n        self.features_len = configs.features_len\n        self.project_channels = configs.project_channels\n        self.hidden_size = configs.hidden_size\n        self.window_size = configs.window_size\n        self.device = device\n        self.num_layers = configs.num_layers\n        self.kernel_size = configs.kernel_size\n        self.stride = configs.stride\n        self.dropout = configs.dropout\n\n        self.conv_block1 = nn.Sequential(\n            nn.Conv1d(self.input_channels, 32, kernel_size=self.kernel_size,\n                      stride=self.stride, bias=False, padding=(self.kernel_size//2)),\n            nn.BatchNorm1d(32),\n            nn.ReLU(),\n            nn.MaxPool1d(kernel_size=2, stride=2, padding=1),\n            nn.Dropout(self.dropout)\n        )\n\n        self.conv_block2 = nn.Sequential(\n            nn.Conv1d(32, self.final_out_channels, kernel_size=8, stride=1, bias=False, padding=4),\n            nn.BatchNorm1d(self.final_out_channels),\n            nn.ReLU(),\n            nn.MaxPool1d(kernel_size=2, stride=2, padding=1)\n        )\n\n        self.conv_block3 = nn.Sequential(\n            nn.Conv1d(64, self.final_out_channels, kernel_size=8, stride=1, bias=False, padding=4),\n            nn.BatchNorm1d(self.final_out_channels),\n            nn.ReLU(),\n            nn.MaxPool1d(kernel_size=2, stride=2, padding=1),\n        )\n\n        self.encoder = nn.LSTM(\n            self.final_out_channels,\n            self.hidden_size,\n            batch_first=True,\n            num_layers=self.num_layers,\n            bias=False,\n            dropout=self.dropout,\n        )\n        self.decoder = nn.LSTM(\n            self.final_out_channels,\n            self.hidden_size,\n            batch_first=True,\n            num_layers=self.num_layers,\n            bias=False,\n            dropout=self.dropout,\n        )\n\n        self.output_layer = nn.Linear(self.hidden_size, self.final_out_channels)\n        self.project = nn.Linear(self.final_out_channels * self.features_len, self.project_channels, bias=False)\n        self.projection_head = nn.Sequential(\n            nn.Linear(self.final_out_channels * self.features_len, self.final_out_channels * self.features_len // 2),\n            nn.BatchNorm1d(self.final_out_channels * self.features_len // 2),\n            nn.ReLU(inplace=True),\n            nn.Linear(self.final_out_channels * self.features_len // 2, self.project_channels),\n        )\n\n    def init_hidden_state(self, batch_size):\n        h = torch.zeros((self.num_layers, batch_size, self.hidden_size)).to(self.device)\n        c = torch.zeros((self.num_layers, batch_size, self.hidden_size)).to(self.device)\n        return h, c\n\n    def forward(self, x_in):\n        if torch.isnan(x_in).any():\n            print('tensor contain nan')\n        # 1D CNN feature extraction\n        x = self.conv_block1(x_in)\n        x = self.conv_block2(x)\n        # Encoder\n        hidden = x.permute(0, 2, 1)\n        # enc_hidden = self.init_hidden_state(hidden.shape[0])\n        _, enc_hidden = self.encoder(hidden)\n        # _, enc_hidden = self.encoder(hidden, enc_hidden)\n        # Decoder\n        dec_hidden = enc_hidden\n        output = torch.zeros(hidden.shape).to(self.device)\n        for i in reversed(range(hidden.shape[1])):\n            output[:, i, :] = self.output_layer(dec_hidden[0][0, :])\n            if self.training:\n                _, dec_hidden = self.decoder(hidden[:, i].unsqueeze(1).float(), dec_hidden)\n            else:\n                _, dec_hidden = self.decoder(output[:, i].unsqueeze(1), dec_hidden)\n        hidden = hidden.reshape(hidden.size(0), -1)\n        output = output.reshape(output.size(0), -1)\n        project = self.projection_head(hidden)\n        rec_project = self.projection_head(output)\n\n        return project, rec_project \n```\n\n## 实验结果输出是什么?\n\n```python\npython  coca.py --device cuda\n=============================================\nDataset: IOpsCompetition\nMethod:  COCA\n=============================================\n  0%|                                                                                                            | 0/29 [00:00<?, ?it/s]0time series,kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 146255\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 149130\nData loaded ...\nTraining started ....\n\nEpoch : 1\nTrain Loss     : 587.1270\t |\nValid Loss     : 115.9886\t  |\nTest Loss     : 110.1476\t  |\n\n\nEpoch : 2\nTrain Loss     : 2.5306\t |\nValid Loss     : 0.9269\t  |\nTest Loss     : 0.9269\t  |\n\n\nEpoch : 3\nTrain Loss     : 0.9320\t |\nValid Loss     : 0.7648\t  |\nTest Loss     : 0.7649\t  |\n\n\nEpoch : 4\nTrain Loss     : 0.7760\t |\nValid Loss     : 0.6570\t  |\nTest Loss     : 0.6571\t  |\n\n\nEpoch : 5\nTrain Loss     : 0.6353\t |\nValid Loss     : 0.4868\t  |\nTest Loss     : 0.4911\t  |\n\n\n################## Training is Done! #########################\n\n\nBest affiliation quantile: 0.267\nBest anomaly quantile: 0.124\nBest affiliation quantile: 0.296\nBest anomaly quantile: 0.145\nValid affiliation-metrics\nTest precision: 0.9883  | \tTest recall: 0.4635\n\nValid RAP F1\nValid F1: 0.2857  | \tValid precision: 0.3077  | \tValid recall: 0.2667\n\nTest affiliation-metrics\nTest precision: 0.9235  | \tTest recall: 0.5715\n\nTest RAP F1\nTest F1: 0.3194  | \tTest precision: 0.2805  | \tTest recall: 0.3710\n\n********************************\nINFO - Saving gif to /root/rumtime//img_1670811334.373728.png\n  3%|███▎                                                                                             | 1/29 [08:27<3:56:40, 507.15s/it]1time series,kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 8784\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 8784\nData loaded ...\nTraining started ....\n\nEpoch : 1\nTrain Loss     : 1527.4913\t |\nValid Loss     : 602.3031\t  |\nTest Loss     : 625.7771\t  |\n\n\nEpoch : 2\nTrain Loss     : 196.4226\t |\nValid Loss     : 2.7703\t  |\nTest Loss     : 2.7703\t  |\n\n\nEpoch : 3\nTrain Loss     : 2.8363\t |\nValid Loss     : 2.7490\t  |\nTest Loss     : 2.7490\t  |\n\n\nEpoch : 4\nTrain Loss     : 2.8169\t |\nValid Loss     : 2.7477\t  |\nTest Loss     : 2.7476\t  |\n\n\nEpoch : 5\nTrain Loss     : 2.8162\t |\nValid Loss     : 2.7078\t  |\nTest Loss     : 2.7078\t  |\n\n\n################## Training is Done! #########################\nBest affiliation quantile: 0.115\nBest anomaly quantile: 0.001 \n```\n\n## 跑完一个 COCA, 看看结果?\n\n论文结果: 66.78±2.91  \n我跑出来的结果: 65.30\n\n```python\naffiliation metrics:\n Precision: 0.92778\n Recall:    0.50379\n f1:        0.65300\nRevised-point-adjusted metrics:\n F1 score:  0.24675\n Precision: 0.20459\n Recall:    0.31079\nPoint-adjusted metrics:\n F1 score:  0.51525\n Precision: 0.85390\n Recall:    0.36893\nNAB Scores:\n NAB Score (balanced):       0.29219\n NAB Score (high precision): 0.28211\n NAB Score (high recall):    0.29839\nseed: 2 \nconfig setup:\n\ndataset:IOpsCompetition\ninput_channels:1\nkernel_size:4\nstride:1\nfinal_out_channels:32\nhidden_size:64\nnum_layers:3\nproject_channels:20\ndropout:0.45\nfeatures_len:6\nwindow_size:16\ntime_step:2\nnum_epoch:5\nfreeze_length_epoch:2\nchange_center_epoch:1\ncenter_eps:0.1\nomega1:1\nomega2:0.1\nbeta1:0.9\nbeta2:0.99\nlr:0.0001\ndrop_last:False\nbatch_size:512\nnu:0.001\ndetect_nu:0.0015\nthreshold_determine:floating\nobjective:soft-boundary\nloss_type:distance\naugmentation:<conf.coca.IOpsCompetition_Configs.augmentations object at 0x7f2afb3fa370>\nscale_ratio:1.1\njitter_ratio:0.1\nTraining time is : 3:09:46.206420 \n```\n\n## Time Step Ts 用来干嘛?\n\ntime step is the step while sliding, 实际是什么意思?\n\n## COCA 的超参数有哪些?\n- **repre channels**: the dimension of the ﬁnal representations Z\n- **hidden size** is the dimension of the Seq2Seq in the model\n- **project channels** is the dimension of the projector\n- **window size** is the size of time window.\n- **time step** is the step while sliding.  \n![static/attachment/Pasted image 20221212161412.png](/images/477f24a0d47507502f0dfc97355a94d92f735509.png)\n\n## 常见的性能评估指标?\n- NAB Score\n- Point-Adjusted (PA)\n- Revised Point-Adjusted (RPA)\n\n## Center 是什么?\n\n是一个 vector, (dim=20)  \n![static/attachment/Pasted image 20221212230925.png](/images/6ada637a949cf249034ab68f78aed795e61af20b.png)\n\n## model_train 的参数是些什么?\n\n`def model_train(model, model_optimizer, train_loader, center, length, config, device, epoch):`  \n![static/attachment/Pasted image 20221212231047.png](/images/f5ebef5abe60bb2772d33dee08181a8149cb9fde.png)\n\n## train_loader 中是些什么?\n- aug1 我猜是 jittering (noise addition)\n- aug2 我猜是 scaling (pattern-wise magnitude change)  \n![static/attachment/Pasted image 20221212231235.png](/images/c4b0621e622948b0f276c177681fc93042e22fba.png)\n\n## Score 如何计算?\n\n```python\nscore = distance1 + distance_dec1 \n```\n\n## Distance 如何计算?包含哪些?\n\ndistance1 是 cosine_similarity  \n\n- `feature1.shape=torch.Size([1536, 20])`\n- `distance_dec1=center.shape=torch.Size([1, 20])`\n\n```python\ndistance1 = F.cosine_similarity(feature1, center, eps=1e-6) \ndistance_dec1 = F.cosine_similarity(feature_dec1, center, eps=1e-6)\n```\n\n## What are distance1 and distance_dec1?\n- distance1: feature1 与 center 的 cosine_similarity\n- distance2: feature_dec1 与 center 的 cosine_similarity\n\n## feature_dec1 与 feature1 是什么?\n\n```python\nfeature1=project # project: the project of hidden(representation) Z\nfeature_dec1=feature_dec1 # rec_project: the project of the output (reconstruction representation)\n\n```\n\nproject(feature1) and rec_project(feature_dec1)\n\n![static/attachment/Pasted image 20221213114728.png](/images/00bf6b1d3993dfd678ac116ba75b5363f8901c01.png)\n\n## score 是什么?\n\nscore 是 distance1 and distance_dec1 的距离之和?\n\n```python\nscore = distance1 + distance_dec1\n```\n\ndistance1 是 projector(representation $Z$) 与 center 的 cosine_similarity\n\ndistance_dec1 是 projector(reconstruction representation $z'$) 的 cosine_similarity\n\nprojector 是:\n\n```python\nself.project = nn.Linear(self.final_out_channels * self.features_len, self.project_channels, bias=False)\nself.projection_head = nn.Sequential(\n  nn.Linear(self.final_out_channels * self.features_len, self.final_out_channels * self.features_len // 2),\n  nn.BatchNorm1d(self.final_out_channels * self.features_len // 2),\n  nn.ReLU(inplace=True),\n  nn.Linear(self.final_out_channels * self.features_len // 2, self.project_channels),\n) \n```\n\n## Threshold 如何定?\n\n按异常率指定:\n\n```python\nthreshold = np.percentile(scores, 100-detect_nu) \n```\n\n**detect_mu** is a set in nu_list, $\\operatorname{nu\\_list} \\in [0.001, 0.3]$ :![static/attachment/Pasted image 20221213121235.png](/images/87719b28415cdcff43416487c2813d47375a6961.png)\n\n## 单个 KPI 的 Affiliation Metrix 如何计算\n- 固定异常率为 `self.detect_nu = 0.0005`\n\n计算 `mu`:\n\n![static/attachment/Pasted image 20221213120925.png](/images/1a334b7c374f4d28bfb35f39ed5a141b5711586f.png)\n\n## Affiliation-F1 是最优 F1 吗? 类似于 AUC 的那种\n\n不是. Affiliation-F1 是 `score > threshold` 生成的的一系列 0,1 计算出来的值. 计算方法:\n\n`affiliation_f1 = 2 * (dic[\"precision\"] * dic[\"recall\"]) / (dic[\"precision\"] + dic[\"recall\"])`\n\n## predict 是什么?\n\npredict 是根据 threshold 定好的一个二分类的值: 0 或 1\n\n![static/attachment/Pasted image 20221213171810.png](/images/86992fa08b32b69f2d7deb9c16c686410a529d29.png)\n\n## val_target 是什么\n\n应该是验证集的 标签 (label)\n\n## VAL 指的是什么\n\nval 指 valid, 如:\n\n- val_loss 表示验证损失\n\n## ad_predict 在干什么\n- 找出最大的 nu_max1\n- 找出最大的 nu_max2\n\n返回找到的最大 affiliation metric 的 (precision, recall) ![static/attachment/Pasted image 20221213174343.png](/images/b4ce19e68228c0f00f158e92e801a4e8f8718236.png)\n\n## COCA 费时的地方\n\n```python\n################## Training is Done! #########################\n\nBest affiliation quantile: 0.267\nBest anomaly quantile: 0.124\n---- 上一步到下一步之间很费时 ----\nBest affiliation quantile: 0.296\nBest anomaly quantile: 0.145 \n```\n\n## COCA 中评估 DAGMM\n\n```python\npython baseline.py  --dataset  IOpsCompetition --models  DAGMM\npython baseline.py  --dataset  IOpsCompetition --models LSTMED\npython baseline.py  --dataset  IOpsCompetition --models models.DeepSVDD:DeepSVDD\n```\n\noption\n\n```python\n--dataset 'MSL', 'UCR', 'IOpsCompetition', 'NAB', 'Synthetic', 'SMD', 'SMAP'\n\n--models 'DefaultDetector', 'DBL', 'DynamicBaseline', 'WindStats', 'RRCF', 'RandomCutForest', 'ISF', 'IsolationForest', 'Arima', 'ARIMA', 'ArimaDetector', 'HoltWinter', 'AdditiveHoltWinter', 'ETS', 'ETSDetector', 'Prophet', 'ProphetDetector', 'StatThreshold', 'SR', 'SpectralResidual', 'ZMS', 'AE', 'AutoEncoder', 'VariationalAutoEncoder', 'VAE', 'DeepGaussianMixture', 'DAGMM', 'LSTMEncoderDecoder', 'LSTMED', 'DeepSVDD', 'models.DeepSVDD:DeepSVDD', 'CPC', 'models.CPC:CPC', 'OCSVM', 'models.OCSVM:OCSVM'\n```\n\nbaseline 训练日志\n\n![[static/attachment/baseline_20221214_154151.log]]\n\n```python\nRevised point-adjusted metrics\nF1 score:  0.1879\nPrecision: 0.1274\nRecall:    0.3578\n\nMean Time To Detect Anomalies:  -0 days 00:18:03\nMean Detected Anomaly Duration: 0 days 01:14:04\nMean Anomaly Duration:          0 days 00:41:38\n```\n\n## COCA 中如何调用 DAGMM 计算 Affiliation Metric\n\n在 `baseline.py` 中会写入文件 `./log.txt`\n\n```python\n['DAGMM'] IOpsCompetition Affiliation Metrics\n['DAGMM'] IOpsCompetition  {'precision': 0.41254758453288576, 'recall': 0.24370771196396945}\n['DAGMM'] IOpsCompetition Affiliation Metrics\n['DAGMM'] IOpsCompetition  {'precision': 0.43984316475087665, 'recall': 0.23352023005803885}\n['DAGMM'] IOpsCompetition Affiliation Metrics\n['DAGMM'] IOpsCompetition  {'precision': 0.43201223250585297, 'recall': 0.24751992148434693} \n```\n\n| Affiliation precision | Affiliation recall | Affiliation F1 |\n| --------------------- | ------------------ | -------------- |\n| 0.412547585           | 0.243707712        | 0.306408279    |\n| 0.439843165           | 0.23352023         | 0.305072351    |\n| 0.432012233           | 0.247519921        | 0.314721337    |\n\n原始论文:\n\n![static/attachment/Pasted image 20221215083156.png](/images/f19caf1299d1db71e9fe3c7589d16c801050ac6b.png)\n\n结论:\n\n相差 4% 左右\n\n<u></u>## 如何使用作者编写的 DeepSVDD 模型?\n\n```python\npython baseline.py  --dataset  IOpsCompetition --models models.DeepSVDD:DeepSVDD \n```\n\n## Affiliation F1 如何计算\n\n```python\n0.0 if p == 0 or r == 0 else 2 * p * r / (p + r) \n```\n\np: precision\n\nr: Recall\n\n## DeepSVDD 的结果\n\n==结论==: 源代码运行结果 与 原文实验结果基本一致.\n\n源代码运行结果 (IOpsCompetition Affiliation Metrics):\n\n```python\n{'precision': 0.4714819300747144, 'recall': 0.32748809986047706, 'f1': 0.3865094199121414}\n{'precision': 0.4682508714752369, 'recall': 0.3339264963170998, 'f1': 0.38984239443073504} \n{'precision': 0.4746654049791827, 'recall': 0.32840964548183676, 'f1': 0.388219500237786}\n```\n\n源论文中的实验结果: $[37.58, 38.88]$\n\n![static/attachment/Pasted image 20221216075058.png](/images/e796e8b06ad07e98f1d6db479bd4cdd35f66acb8.png)\n\n## coca_debug.py 解析\n### data process\n\n```python\ntrain_data.shape=  ( 1, 605)\ntest_data.shape=( 1 , 3427) \nconfig:\n\taugmentation = {augmentations} <conf.coca.IOpsCompetition_Configs.augmentations>\n\tbatch_size = {int} 512\n\tbeta1 = {float} 0.9\n\tbeta2 = {float} 0.99\n\tcenter_eps = {float} 0.1\n\tchange_center_epoch = {int} 1\n\tdataset = {str} 'IOpsCompetition'\n\tdetect_nu = {float} 0.0015\n\tdrop_last = {bool} False\n\tdropout = {float} 0.45\n\tfeatures_len = {int} 6\n\tfinal_out_channels = {int} 32\n\tfreeze_length_epoch = {int} 2\n\thidden_size = {int} 64\n\tinput_channels = {int} 1\n\tkernel_size = {int} 4\n\tloss_type = {str} 'distance'\n\tlr = {float} 0.0001\n\tnu = {float} 0.001\n\tnum_epoch = {int} 5\n\tnum_layers = {int} 3\n\tobjective = {str} 'soft-boundary'\n\tomega1 = {int} 1\n\tomega2 = {float} 0.1\n\tproject_channels = {int} 20\n\tstride = {int} 1\n\tthreshold_determine = {str} 'floating'\n\ttime_step = {int} 2\n\twindow_size = {int} 16\n\tdata_generator4(train_data, test_data, train_labels,test_labels, configs)\n\ndata_generator4\n1. 使用所有数据的(训练集和测试集)均值和方差标准化数据集\n2. 将训练集划分为训练集集和验证集(8:2)(train,val,test_data)\n3. 将所有数据处理为窗口数据(time_step=2)\n\t1. train_x.shape=(236, 1, 16)\n\t2. val_x.shape=(59, 1, 16)\n\t3. test_x.shape=(1706, 1, 16)\n4. 将训练集/测试集/验证集(train,test,val) 封装到dict中, 键名分别为 'samples', `labels`\n5. 数据增强(即 aug1,aug2)\n\t1. weak_aug = scaling(sample, config.augmentation.scale_ratio)\n\t2. strong_aug = jitter(sample, config.augmentation.jitter_ratio)\n6. shuffle 训练集, 验证集和测试集不shuffle \n```\n\n### model training\n\n```python\n1. 初始化 center: torch.zeros(config.project_channels, device=device)\n2. 初始化 length: length = torch.tensor(0, device=device)\n3. 调用训练函数 model_train(): model_train(model, model_optimizer, train_dl, center,length, config, device, epoch)\n\t1. 获取数据集: data, target, aug1, aug2\n\t2. 拼接训练数据(原始数据+增强后的数据, 增强 weak_aug,strong_aug): all_data = torch.cat((data, aug1, aug2), dim=0)\n\t3. 计算 z 和 output 的 project : feature1, feature_dec1 = model(all_data)\n\t4. 计算损失和score,score= (z project 与 center 的 cosine_similarity + output(recon_x) project 与 center 的 cosine_similarity)\n\t5. 重命名 score : predcit= score.detach().cpu().numpy()\n```\n\n### model evaluate\n\n```python\n1. 计算 feature1, feature_dec1 =  model(data)\n2. 计算 loss 和 score: loss, score = train(feature1, feature_dec1, center, length, epoch, config, device)\n3. 重命名 score: predict=score.detach().cpu().numpy()\n4. 计算 performance:\n\t1. val_target, val_score_origin, val_loss, all_projection \n```\n\n### ad_predict\n\n```python\n1. 调用 ad_predict(target, scores, mode, nu)\n\t1. target: label\n\t2. scores:  预测score\n\t3. mode: str, floating\n\t4. nu: 0.0015, 用来干嘛\n```\n\n## all_target, all_predict, total_loss, all_projection 是什么?\n\n```python\nall_target: 数据标签 label \nall_predict: score, dist(project of z, center)+dist(project of output, center)\ntotal_loss: 多个 batch_size 的loss的累加和\nall_projection: project of z\n```\n\n## 数据增强 scaling,jitter 实现\n\n```python\ndef scaling(x, sigma=1.1):\n    # https://arxiv.org/pdf/1706.00527.pdf\n    factor = np.random.normal(loc=2., scale=sigma, size=(x.shape[0], x.shape[2]))\n    ai = []\n    for i in range(x.shape[1]):\n        xi = x[:, i, :]\n        ai.append(np.multiply(xi, factor[:, :])[:, np.newaxis, :])\n    return np.concatenate((ai), axis=1)\n    \ndef jitter(x, sigma=0.8):\n    # https://arxiv.org/pdf/1706.00527.pdf\n    return x + np.random.normal(loc=0., scale=sigma, size=x.shape)\n```\n\n## ## score 是按 rolling window 计算的还是按照 point 计算的?  \n\n按照窗口计算的, 每个窗口计算一个 score\n\n```python\ntest_batch_data.shape=torch.Size([59, 1, 16])\nfeature1.shape=torch.Size([59, 20])\nfeature_dec1.shape=torch.Size([59, 20])\nscore.shape=59(每个窗口计算一个)\n```\n\n## COCA 的源码是按照 rolling windows 计算 score, 那么, 如何映射到原始数据到一个点呢?\n\n使用一个窗口代表当前数据点. 直接用窗口代替一个单独的数据点.\n\n```python\ntime_series.shape=(1, 3427)\nscore.shape= 3427\n```\n\n## 在计算 score 时, 第一个窗口前数据不够如何处理\n\n使用 score 的第一个值填充\n\n```python\nscores = np.zeros((X.shape[0],), dtype=float)\ntest_scores = np.sum(np.abs(r - y.cpu().data.numpy()), axis=1)\nscores[self.k - 1 :] = test_scores\nscores[: self.k - 1] = test_scores[0] \n```\n\n## 在 IOpsCompetition 的 05f10d3a-239c-3bef-9bdc-a2feeb0037aa 的训练结果\n\n原代码运行结果\n\n```python\n\n================================================================\n========== \t train_data.shape:146255,test_data.shape:149130\n================================================================\ntrain: 58496,valid:14624, test:74558\nTraining started ....\nINFO - Length:0 \nINFO - Epoch: 1, Train Loss: 396.1574, Valid Loss: 115.7214, Test Loss: 109.9165 \nINFO - Length:0.4248124946355827 \nINFO - Epoch: 2, Train Loss: 1.4987, Valid Loss: 0.5217, Test Loss: 0.5218 \nINFO - Length:0.3707212271690369 \nINFO - Epoch: 3, Train Loss: 0.5671, Valid Loss: 0.4676, Test Loss: 0.4677 \nINFO - Length:0.2905264883637429 \nINFO - Epoch: 4, Train Loss: 0.4960, Valid Loss: 0.3880, Test Loss: 0.3884 \nINFO - Length:0.2738433243036271 \nINFO - Epoch: 5, Train Loss: 0.4482, Valid Loss: 0.3709, Test Loss: 0.3710 \n\n################## Training is Done! #########################\n\n################## Start to evaluate! #########################\n\n================================================================\n========== \t Calculating validation metrics\n================================================================\nBest affiliation quantile: 0.2520204081632653\nBest affiliation  metric: {'precision': 0.9991141275746687, 'recall': 0.7897834771523201}\nBest revised point adjusted anomaly quantile: 0.23977551020408164\nBest revised point adjusted: {'f1': 0.7096774193548386, 'precision': 0.6875, 'recall': 0.7333333333333333}\n\n================================================================\n========== \t Calculating testing metrics\n================================================================\nBest affiliation quantile: 0.301\nBest affiliation  metric: {'precision': 0.8333357886680556, 'recall': 0.7724293430234433}\nBest revised point adjusted anomaly quantile: 0.0683469387755102\nBest revised point adjusted: {'f1': 0.42592592592592593, 'precision': 0.5, 'recall': 0.3709677419354839}\n\n================================================================\n========== \t Validation metrics\n================================================================\nValid affiliation precision: 0.9991\nValid affiliation recall: 0.7898\n\nValid RevisedPointAdjusted F1: 0.7097  \nValid RevisedPointAdjusted precision: 0.6875 \nValid RevisedPointAdjusted recall: 0.7333\n\n================================================================\n========== \t Testing metric\n================================================================\nTest affiliation precision: 0.8333 \nTest affiliation recall: 0.7724\n\nTest RevisedPointAdjusted F1: 0.4259\nTest RevisedPointAdjusted precision: 0.5000\nTest RevisedPointAdjusted recall: 0.3710\n\n================================================================\n========== \t Configuration of the model\n================================================================\ndataset:IOpsCompetition\ninput_channels:1\nkernel_size:4\nstride:1\nfinal_out_channels:32\nhidden_size:64\nnum_layers:3\nproject_channels:20\ndropout:0.45\nfeatures_len:6\nwindow_size:16\ntime_step:2\nnum_epoch:5\nfreeze_length_epoch:2\nchange_center_epoch:1\ncenter_eps:0.1\nomega1:1\nomega2:0.1\nbeta1:0.9\nbeta2:0.99\nlr:0.0001\ndrop_last:False\nbatch_size:512\nnu:0.001\ndetect_nu:0.0015\nthreshold_determine:floating\nobjective:soft-boundary\nloss_type:distance\naugmentation:<conf.coca.IOpsCompetition_Configs.augmentations object at 0x10143e700>\nTraining time: 257.978011\n```\n\n我的代码结果\n\n```python\n(sw_torch_1_10) sunwu@mac-m1 p1_ch05 % make test_aiops\npython main_torch.py --dataset IOpsCompetition --data_id 05f10d3a-239c-3bef-9bdc-a2feeb0037aa --gpus 0\n<frozen importlib._bootstrap>:219: RuntimeWarning: scipy._lib.messagestream.MessageStream size changed, may indicate binary incompatibility. Expected 56 from C header, got 64 from PyObject\nINFO - Specified gpus: 0 \nINFO - CUDA is not available, using GPU to work. \nINFO - Target device: cpu \nINFO - train: (1, 146255), test: (1, 149130) \nINFO - train_loader.len=58496,val_loader:14624,test_loader=74558 \nINFO - Training started .... \nINFO - Length:0 \nINFO - Epoch: 1, Train Loss: 396.1574, Valid Loss: 115.7214 \nINFO - Length:0.4676222130060199 \nINFO - Epoch: 2, Train Loss: 1.4527, Valid Loss: 0.5645 \nINFO - Length:0.36364347952604353 \nINFO - Epoch: 3, Train Loss: 0.5727, Valid Loss: 0.4605 \nINFO - Length:0.32340016061067595 \nINFO - Epoch: 4, Train Loss: 0.5025, Valid Loss: 0.4203 \nINFO - Length:0.26546983695030246 \nINFO - Epoch: 5, Train Loss: 0.4409, Valid Loss: 0.3641 \n\n================================================================\n==========       Calculating validation metrics\n================================================================\nBest affiliation quantile: 0.28875510204081634\nBest affiliation  metric: {'precision': 0.9983926575606217, 'recall': 0.8555412157787603}\nBest revised point adjusted anomaly quantile: 0.2826326530612245\nBest revised point adjusted: {'f1': 0.7058823529411765, 'precision': 0.631578947368421, 'recall': 0.8}\n\n================================================================\n==========       Calculating testing metrics\n================================================================\nBest affiliation quantile: 0.2826326530612245\nBest affiliation  metric: {'precision': 0.845356229045622, 'recall': 0.7913941253003326}\nBest revised point adjusted anomaly quantile: 0.07446938775510203\nBest revised point adjusted: {'f1': 0.4070796460176991, 'precision': 0.45098039215686275, 'recall': 0.3709677419354839}\n\n================================================================\n==========       Validation metrics\n================================================================\nValid affiliation precision: 0.9984\nValid affiliation recall: 0.8555\n\nValid RevisedPointAdjusted F1: 0.7059  \nValid RevisedPointAdjusted precision: 0.6316 \nValid RevisedPointAdjusted recall: 0.8000\n\n================================================================\n==========       Testing metric\n================================================================\nTest affiliation precision: 0.8454 \nTest affiliation recall: 0.7914\n\nTest RevisedPointAdjusted F1: 0.4071\nTest RevisedPointAdjusted precision: 0.4510\nTest RevisedPointAdjusted recall: 0.3710\n\n```\n\n## time_step =2 时, score 如何计算?\n\n## 同样的代码, 为何执行结果不一致?\n\nQ: 我将 COCA 封装为类, 在测试的时候, 出现如下神奇问题: 我的修改版本和 COCA 源代码中, 第一个执行结果的 epoch 的 loss 一致, 但是到第二个 epoch 以后, loss 就不一致了. 执行结果如下:\n\n- 第一个 epoch, loss 一致 (左边表示 coca 的源代码输出日志, 右边表示我的修改版本输出日志)![static/attachment/Pasted image 20221222101010.png](/images/a1eca7b2a04b83f569459e5be19e5e1d501ba561.png)\n\n- 第二个 epoch 的 loss <u>不一致了</u> ![static/attachment/Pasted image 20221222100911.png](/images/0cbcacd8ee62ee0c50d3c6934afa402cadda2481.png)\n\n### 结论\n\n经过加班熬夜近 8 个小时,发现问题是: COCA 在训练的时候, 使用了测试集评估了模型, 而我没有: (左: 我的版本, 右: COCA 源码)\n\n![static/attachment/Pasted image 20221222102021.png](/images/aac3f753a34df8ae438f91a2690e018619dd7bc6.png)\n\n当我吧上图中黄色注释掉之后, 两者运行结果完全一致.如下是 eopch =3 和 epoch=5 的快照, 可知两者完全一致.\n\n![static/attachment/Pasted image 20221222102402.png](/images/a4d3fdf4957cef7cf3bb12e7f8e8ac0c7f620df3.png)\n\n![static/attachment/Pasted image 20221222102325.png](/images/15823f33dacbc6167202b406986639e89767154e.png)\n\n如果加上测试集的评估代码, 结果又回到了不一样. 我取消了如下代码的注释\n\n```python\n# test_target, test_score_origin, test_loss, all_projection = model_evaluate(model, test_dl, center, length,\n#                                                                            config, device, epoch) \n```\n\n重复执行结果又不同了\n\n![static/attachment/Pasted image 20221222102703.png](/images/e3a7ff82fce93e8f5235dbcac4bd167d537bb558.png)\n\n那问题来了, 为什么训练的时候要使用测试集评估其性能呢? 去掉行不行?\n\n### 论文问题: 可能数据使用不当\n\nCOCA 在训练的时候, 让模型看到了测试集, 导致结果 COCA 的性能偏高\n\n![static/attachment/Pasted image 20221222104232.png](/images/e15f4946f025f21858959bec16073b32077dbd31.png)\n\n## 在训练期间使用/不使用测试集评估模型的影响\n\n结论: 有区别, 但是很小\n\nNAB 的数据集 1:\n\n![static/attachment/Pasted image 20221222105911.png](/images/7ec6d7fbaa4df7de5b8b75be102dd3ac5cddce65.png)\n\nNAB 的数据集 2:\n\n![static/attachment/Pasted image 20221222110007.png](/images/9b67738bd58cd4fa3d5bc257d0377735e0b99d1c.png)\n\n## AIOPS 的 05f10d3a-239c-3bef-9bdc-a2feeb0037aa 对比\n\n左: coca , 右: 我的实现\n\n结论: 性能指标差不多 (0.01, 证明我的实现 ok, 问题不大)\n\n![static/attachment/Pasted image 20221222111421.png](/images/1e42d7af05dbfab89643e9268b13d7bac4df9527.png)\n\n## RuntimeError: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)\n\nThe parameters when error occurs:\n\n```python\nINFO - Load configuration from nni, loaded parameters: \n{'num_layers': 3.5879567896971647, 'project_channels': 46.7047622771687, 'dropout': 0.3002211281022341, 'features_len': 8.300394615230376, 'window_size': 53.69552169749169, 'time_step': 4.514415263158897, 'num_epoch': 7.697804748314586, 'center_eps': 0.20709294499972672, 'lr': 0.08785427712258059, 'batch_size': 2.478578387644, 'hidden_size': 190.4429211984154, 'final_out_channels': 29.479373928427712} \nINFO - Updating parameters num_layers           = 4 \nINFO - Updating parameters project_channels     = 47 \nINFO - Updating parameters dropout              = 0.3002211281022341 \nINFO - Updating parameters features_len         = 8 \nINFO - Updating parameters window_size          = 54 \nINFO - Updating parameters time_step            = 5 \nINFO - Updating parameters num_epoch            = 8 \nINFO - Updating parameters center_eps           = 0.20709294499972672 \nINFO - Updating parameters lr                   = 0.08785427712258059 \nINFO - Updating parameters batch_size           = 2 \nINFO - Updating parameters hidden_size          = 190 \nINFO - Updating parameters final_out_channels   = 29 \nINFO - The number of parameters updated:         12  \n```\n\n```python\nall_data.shape=torch.Size([6, 1, 54]) \nx_in.shape=all_data=torch.Size([6, 1, 54]) \nx.shape=torch.Size([6, 29, 15])\nhidden.shape=torch.Size([6, 15, 29])\n\n....\n\nhidde.shape= torch.Size([6, 435])\ntorch.nn.Linear.in=self.final_out_channels * self.features_len=232\n54\n```\n\n关系: ` self.final_out_channels * self.features_len=232` = `hidden.shape[1]`\n\n```python\nself.input_channels\nself.final_out_channels \n53: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)\n16: mat1 and mat2 shapes cannot be multiplied (6x174 and 232x116)\n\n\nwindow_size=54\nall_data=torch.Size([6, 1, 54]) \n```\n\n![Excalidraw/COCA源码分析 2022-12-23 14.56.42.excalidraw](/images/053eb65a3953e5e9eb2dda772a4dd0c702afd5ca.png)\n\n### 修复代码\n\n将 `project_input_features= self.final_out_channels * self.features_len` 修改为:\n\n```python\nl1_out_conv1d = get_l_out_of_max_pool_1d(self.window_size, kernel_size=self.kernel_size, stride=self.stride,\n\t\t\t\t\t\t\t    padding=self.kernel_size // 2)\nl1_out_maxpool1d = get_l_out_of_max_pool_1d(l1_out_conv1d, kernel_size=2, stride=2, padding=1)\n\nl2_out_conv1d = get_l_out_of_max_pool_1d(l1_out_maxpool1d, kernel_size=8, stride=1, padding=4)\nl2_out = get_l_out_of_max_pool_1d(l2_out_conv1d, kernel_size=2, stride=2, padding=1)\nproject_input_features = self.final_out_channels * l2_out \n\n```\n\n`get_l_out_of_max_pool_1d`:\n\n```python\ndef get_l_out_of_max_pool_1d(l_in, kernel_size, padding=0, dilation=1, stride=1):\n    \"\"\"\n    Get the L_out of MAXPOOL1D  https://pytorch.org/docs/stable/generated/torch.nn.MaxPool1d.html\n    or CONV1D https://pytorch.org/docs/stable/generated/torch.nn.Conv1d.html\n\n\n    Parameters\n    ----------\n    l_in :\n    padding :\n    dilation :\n    kernel_size :\n    stride :\n\n    Returnsoc\n    -------\n\n    \"\"\"\n    return int(1 + ((l_in + (2 * padding) - dilation * (kernel_size - 1) - 1) / stride))\n```\n\n## NAB 测试结果\n\n我封装的代码和 COCA 原始代码运行结果\n\n![static/attachment/Pasted image 20221223204407.png](/images/349241e4425a5abf17e3ceb1e21715854fa139a7.png)\n\n第二个 EPOCH 不一致的原因是: COCA 在训练的时候使用了 test set.\n\n![static/attachment/Pasted image 20221223204503.png](/images/36c66f727541f20bfd022c1a05f1d3b74cbf2878.png)\n\n代码重现:\n\n```python\nmake p_nab\n```\n\nor\n\n```python\npython /Users/sunwu/SW-Research/COCA-main/coca_debug.py  --dataset NAB  >  /Users/sunwu/Desktop/text/coca_debug.txt 2>&1\npython /Users/sunwu/SW-Research/p1_ch05/main_torch.py --dataset NAB  > /Users/sunwu/Desktop/text/main_torch.txt  2>&1 \n```\n\n## COCA 输入/出分析\n\n目的: COCA 如何计算模型性能\n\n- 数据初试处理结果, 16 是 **窗口大小**:\n\t- `train_dat_dict['samples'].shape=(236, 1, 16)`\n- 训练阶段 (**59 是 batch_size, 16 是窗口大小**):\n\t- 验证数据: `torch.Size([59, 1, 16])`\n\t- `feature1.shape=torch.Size([59, 20])`\n\t- `feature_dec1.shape=torch.Size([59, 20])`\n\t- `score=(59,)`\n### 结论\n\n每个窗口计算一个 score?\n\n- 输入: batch window `torch.Size([59, 1, 16])`\n- 输出: batch score `score=(59,)`\n\n原文是嘛?\n\n## coca 中 time_step 为 2 时, 如何计算 score?\n![[时间序列(源于coca)中的 time step]]","slug":"COCA源码分析","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709v002d4cv9go82c8um","content":"<p><a href=''>COCA模型改造</a></p>\n<h2 id=\"总结\">总结</h2>\n<ul>\n<li>COCA 并没有填充缺失数据</li>\n<li>归一化和标注化的均值和方差是 <code>训练集与测试集=总数据</code> 的均值 (scale) 和方差 (bias)</li>\n<li><img src=\"/images/46300e066e18a1a004cc63138f21c3566c1d387e.png\" alt=\"Excalidraw/COCA源码分析 2022-12-13 09.26.38.excalidraw\"></li>\n</ul>\n<h2 id=\"安装\">安装</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make install </span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/salesforce/Merlion.git</span><br><span class=\"line\">cd Merlion</span><br><span class=\"line\">pip install salesforce-merlion==<span class=\"number\">1.1</span><span class=\"number\">.1</span></span><br><span class=\"line\">pip install -e ts_datasets/</span><br><span class=\"line\">pip install -r requirements.txt </span><br></pre></td></tr></table></figure>\n<h2 id=\"原始代码训练结果与代码加速\">原始代码训练结果与代码加速</h2>\n<p>原始训练结果</p>\n<p>![[static/attachment/coco_source.log]]</p>\n<p>优化过的训练结果 (4 次)</p>\n<p>![[static/attachment/coca_accelarate.log]]</p>\n<p>![[static/attachment/coca_accelarate_20221214_033956.log]]</p>\n<p>![[static/attachment/coca_accelarate_20221214_033740.log]]</p>\n<p>![[static/attachment/coca_accelarate_20221214_033729.log]]</p>\n<p>小结:</p>\n<p>修改后训练时间从 <strong>3:09:46</strong> 减少到 <strong>0:40:37</strong></p>\n<p>评估指标修改前后变化 (原文结果: Aﬃliation F1= 66.78±2.91)(<strong>在 63.87-69.69 都正常</strong>)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 修改前</span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92778</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50379</span></span><br><span class=\"line\"> f1:        <span class=\"number\">0.65300</span></span><br><span class=\"line\"><span class=\"comment\"># 修改后 1 </span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92732</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50441</span></span><br><span class=\"line\"> f1:        <span class=\"number\">0.65340</span> </span><br><span class=\"line\"><span class=\"comment\"># 修改后 2</span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92703</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50450</span></span><br><span class=\"line\"> f1:        <span class=\"number\">0.65341</span></span><br><span class=\"line\"><span class=\"comment\"># 修改后 3</span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92744</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50436</span></span><br><span class=\"line\">f1:        <span class=\"number\">0.65340</span></span><br><span class=\"line\"><span class=\"comment\"># 修改后 4</span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92737</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50510</span></span><br><span class=\"line\">f1:        <span class=\"number\">0.65400</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Dataset-的表示是什么样\">Dataset 的表示是什么样?</h2>\n<p>Dataset 是多个 KPI 的表示.</p>\n<p>all dataset:<br>\n<img src=\"/images/0399299fb68cd20b1dbbf9bfc411a229dca7c1f6.png\" alt=\"static/attachment/Pasted image 20221211204935.png\"><br>\n<img src=\"/images/ecb7c0fed195365ef31c17fb5f0cf2deb9423e79.png\" alt=\"static/attachment/Pasted image 20221211205148.png\"></p>\n<h2 id=\"time-series-meta-data-dt-idx-是什么\"><code>time_series, meta_data = dt[idx]</code> 是什么</h2>\n<p>time_series 包含 <code>DateTime</code> 和 <code>value</code><br>\nmeta_data 包含 <code>anomaly</code>(是否是一次) 与 <code>trainval</code>(是否是训练集)<br>\n<img src=\"/images/ab245dbb3a70ff7671109b47f39a1375aa896e67.png\" alt=\"static/attachment/Pasted image 20221212080901.png\"><br>\n<img src=\"/images/8a55323c68ecb1797e67f3018b72feb6780e3def.png\" alt=\"static/attachment/Pasted image 20221212080845.png\"></p>\n<h2 id=\"如何获取训练集和测试集\">如何获取训练集和测试集</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train_data = TimeSeries.from_pd(time_series[meta_data.trainval])</span><br><span class=\"line\">test_data = TimeSeries.from_pd(time_series[~meta_data.trainval])</span><br><span class=\"line\">train_labels = TimeSeries.from_pd(meta_data.anomaly[meta_data.trainval])</span><br><span class=\"line\">test_labels = TimeSeries.from_pd(meta_data.anomaly[~meta_data.trainval]) </span><br></pre></td></tr></table></figure>\n<h3 id=\"meta-data-trainval-存储是否是训练集\"><code>meta_data.trainval</code> 存储是否是训练集</h3>\n<p><img src=\"/images/db90a8315faa1528cf9847b300e3d9d4b25c54de.png\" alt=\"static/attachment/Pasted image 20221212081230.png\"></p>\n<h3 id=\"meta-data-trainval-取反\"><code>~meta_data.trainval</code> 取反</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~np.ndarray 表示取反:</span><br><span class=\"line\">数组中的 true 变 <span class=\"literal\">False</span></span><br><span class=\"line\"><span class=\"literal\">False</span> 变 <span class=\"literal\">True</span> </span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/bfccfee6cba1e46a6031d9c7c2b70da97c13423c.png\" alt=\"static/attachment/Pasted image 20221212081325.png\"></p>\n<h2 id=\"COCA-是一次使用全部的数据训练模型吗\">COCA 是一次使用全部的数据训练模型吗?</h2>\n<p>不是, 是一个一个的训练<br>\n<img src=\"/images/e03e984c489d88c178be758aee9b839174c1ba5b.png\" alt=\"static/attachment/Pasted image 20221212081932.png\"></p>\n<h2 id=\"COCA-是如何处理缺失数据点的\">COCA 是如何处理缺失数据点的?</h2>\n<p>‘COCA’ 未处理缺失数据点.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa  </span><br><span class=\"line\">训练集总数量: <span class=\"number\">146255</span>  </span><br><span class=\"line\">测试集总数量: <span class=\"number\">149130</span>  </span><br><span class=\"line\">总量: <span class=\"number\">295385</span> (未加缺失数据 <span class=\"number\">3668</span>(<span class=\"number\">295385</span>+<span class=\"number\">3668</span>=<span class=\"number\">299053</span>(加上缺失数据点后,与我的统计结果一致)))  </span><br></pre></td></tr></table></figure>\n<p>标注化后的数据统计:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test_time_series=(<span class=\"number\">149130</span>, <span class=\"number\">1</span>) </span><br></pre></td></tr></table></figure>\n<p>我的统计结果:</p>\n<table>\n<thead>\n<tr>\n<th>kpi_id</th>\n<th>#count_all</th>\n<th>#train_datapoints</th>\n<th>#test_datapoints</th>\n<th>#missing_all</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>05f10d3a-239c-3bef-9bdc-a2feeb0037aa</td>\n<td>299053</td>\n<td>149526</td>\n<td>149527</td>\n<td>3668</td>\n</tr>\n</tbody>\n</table>\n<p>数据处理流程分析: <code>data_generator4</code></p>\n<p>test_time_series_ts<br>\n<img src=\"/images/f6df3690fe8dcff8aaa65aaebfe30a859049fafb.png\" alt=\"static/attachment/Pasted image 20221212084211.png\"><br>\ntrain_time_series<br>\n<img src=\"/images/e68f82882020d7d891a80e98459c280c481572a9.png\" alt=\"static/attachment/Pasted image 20221212090126.png\"><br>\ntrain_time_series 转换为窗口后的数据 <code>configs.window_size=16, configs.time_step=2</code><br>\n<img src=\"/images/e4c4ab79e883880c71761e195ce99f95079141a6.png\" alt=\"static/attachment/Pasted image 20221212090200.png\"></p>\n<h3 id=\"如何标准化\">如何标准化?</h3>\n<p>求 <strong>训练集 + 测试集</strong> 所有的数据均值和方差, 然后标准化 (均值 scale, 方差 bias)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn = MeanVarNormalize()</span><br><span class=\"line\">mvn.train(train_time_series_ts + test_time_series_ts)</span><br><span class=\"line\">bias, scale = mvn.bias, mvn.scale </span><br></pre></td></tr></table></figure>\n<h3 id=\"train-time-series-是什么\">train_time_series 是什么?</h3>\n<p>被标准后的训练数据.</p>\n<p><img src=\"/images/d959af017055f0c9d66531ee5e22e402b329b6c0.png\" alt=\"static/attachment/Pasted image 20221212084458.png\"></p>\n<h2 id=\"COCA-的模型如何表示\">COCA 的模型如何表示?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> torch <span class=\"keyword\">import</span> nn</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">base_Model</span>(nn.Module):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, configs, device</span>):</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(base_Model, self).__init__()</span><br><span class=\"line\">        self.input_channels = configs.input_channels</span><br><span class=\"line\">        self.final_out_channels = configs.final_out_channels</span><br><span class=\"line\">        self.features_len = configs.features_len</span><br><span class=\"line\">        self.project_channels = configs.project_channels</span><br><span class=\"line\">        self.hidden_size = configs.hidden_size</span><br><span class=\"line\">        self.window_size = configs.window_size</span><br><span class=\"line\">        self.device = device</span><br><span class=\"line\">        self.num_layers = configs.num_layers</span><br><span class=\"line\">        self.kernel_size = configs.kernel_size</span><br><span class=\"line\">        self.stride = configs.stride</span><br><span class=\"line\">        self.dropout = configs.dropout</span><br><span class=\"line\"></span><br><span class=\"line\">        self.conv_block1 = nn.Sequential(</span><br><span class=\"line\">            nn.Conv1d(self.input_channels, <span class=\"number\">32</span>, kernel_size=self.kernel_size,</span><br><span class=\"line\">                      stride=self.stride, bias=<span class=\"literal\">False</span>, padding=(self.kernel_size//<span class=\"number\">2</span>)),</span><br><span class=\"line\">            nn.BatchNorm1d(<span class=\"number\">32</span>),</span><br><span class=\"line\">            nn.ReLU(),</span><br><span class=\"line\">            nn.MaxPool1d(kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>),</span><br><span class=\"line\">            nn.Dropout(self.dropout)</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        self.conv_block2 = nn.Sequential(</span><br><span class=\"line\">            nn.Conv1d(<span class=\"number\">32</span>, self.final_out_channels, kernel_size=<span class=\"number\">8</span>, stride=<span class=\"number\">1</span>, bias=<span class=\"literal\">False</span>, padding=<span class=\"number\">4</span>),</span><br><span class=\"line\">            nn.BatchNorm1d(self.final_out_channels),</span><br><span class=\"line\">            nn.ReLU(),</span><br><span class=\"line\">            nn.MaxPool1d(kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>)</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        self.conv_block3 = nn.Sequential(</span><br><span class=\"line\">            nn.Conv1d(<span class=\"number\">64</span>, self.final_out_channels, kernel_size=<span class=\"number\">8</span>, stride=<span class=\"number\">1</span>, bias=<span class=\"literal\">False</span>, padding=<span class=\"number\">4</span>),</span><br><span class=\"line\">            nn.BatchNorm1d(self.final_out_channels),</span><br><span class=\"line\">            nn.ReLU(),</span><br><span class=\"line\">            nn.MaxPool1d(kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>),</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        self.encoder = nn.LSTM(</span><br><span class=\"line\">            self.final_out_channels,</span><br><span class=\"line\">            self.hidden_size,</span><br><span class=\"line\">            batch_first=<span class=\"literal\">True</span>,</span><br><span class=\"line\">            num_layers=self.num_layers,</span><br><span class=\"line\">            bias=<span class=\"literal\">False</span>,</span><br><span class=\"line\">            dropout=self.dropout,</span><br><span class=\"line\">        )</span><br><span class=\"line\">        self.decoder = nn.LSTM(</span><br><span class=\"line\">            self.final_out_channels,</span><br><span class=\"line\">            self.hidden_size,</span><br><span class=\"line\">            batch_first=<span class=\"literal\">True</span>,</span><br><span class=\"line\">            num_layers=self.num_layers,</span><br><span class=\"line\">            bias=<span class=\"literal\">False</span>,</span><br><span class=\"line\">            dropout=self.dropout,</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        self.output_layer = nn.Linear(self.hidden_size, self.final_out_channels)</span><br><span class=\"line\">        self.project = nn.Linear(self.final_out_channels * self.features_len, self.project_channels, bias=<span class=\"literal\">False</span>)</span><br><span class=\"line\">        self.projection_head = nn.Sequential(</span><br><span class=\"line\">            nn.Linear(self.final_out_channels * self.features_len, self.final_out_channels * self.features_len // <span class=\"number\">2</span>),</span><br><span class=\"line\">            nn.BatchNorm1d(self.final_out_channels * self.features_len // <span class=\"number\">2</span>),</span><br><span class=\"line\">            nn.ReLU(inplace=<span class=\"literal\">True</span>),</span><br><span class=\"line\">            nn.Linear(self.final_out_channels * self.features_len // <span class=\"number\">2</span>, self.project_channels),</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">init_hidden_state</span>(<span class=\"params\">self, batch_size</span>):</span><br><span class=\"line\">        h = torch.zeros((self.num_layers, batch_size, self.hidden_size)).to(self.device)</span><br><span class=\"line\">        c = torch.zeros((self.num_layers, batch_size, self.hidden_size)).to(self.device)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> h, c</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">forward</span>(<span class=\"params\">self, x_in</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> torch.isnan(x_in).<span class=\"built_in\">any</span>():</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;tensor contain nan&#x27;</span>)</span><br><span class=\"line\">        <span class=\"comment\"># 1D CNN feature extraction</span></span><br><span class=\"line\">        x = self.conv_block1(x_in)</span><br><span class=\"line\">        x = self.conv_block2(x)</span><br><span class=\"line\">        <span class=\"comment\"># Encoder</span></span><br><span class=\"line\">        hidden = x.permute(<span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"comment\"># enc_hidden = self.init_hidden_state(hidden.shape[0])</span></span><br><span class=\"line\">        _, enc_hidden = self.encoder(hidden)</span><br><span class=\"line\">        <span class=\"comment\"># _, enc_hidden = self.encoder(hidden, enc_hidden)</span></span><br><span class=\"line\">        <span class=\"comment\"># Decoder</span></span><br><span class=\"line\">        dec_hidden = enc_hidden</span><br><span class=\"line\">        output = torch.zeros(hidden.shape).to(self.device)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">reversed</span>(<span class=\"built_in\">range</span>(hidden.shape[<span class=\"number\">1</span>])):</span><br><span class=\"line\">            output[:, i, :] = self.output_layer(dec_hidden[<span class=\"number\">0</span>][<span class=\"number\">0</span>, :])</span><br><span class=\"line\">            <span class=\"keyword\">if</span> self.training:</span><br><span class=\"line\">                _, dec_hidden = self.decoder(hidden[:, i].unsqueeze(<span class=\"number\">1</span>).<span class=\"built_in\">float</span>(), dec_hidden)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                _, dec_hidden = self.decoder(output[:, i].unsqueeze(<span class=\"number\">1</span>), dec_hidden)</span><br><span class=\"line\">        hidden = hidden.reshape(hidden.size(<span class=\"number\">0</span>), -<span class=\"number\">1</span>)</span><br><span class=\"line\">        output = output.reshape(output.size(<span class=\"number\">0</span>), -<span class=\"number\">1</span>)</span><br><span class=\"line\">        project = self.projection_head(hidden)</span><br><span class=\"line\">        rec_project = self.projection_head(output)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> project, rec_project </span><br></pre></td></tr></table></figure>\n<h2 id=\"实验结果输出是什么\">实验结果输出是什么?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python  coca.py --device cuda</span><br><span class=\"line\">=============================================</span><br><span class=\"line\">Dataset: IOpsCompetition</span><br><span class=\"line\">Method:  COCA</span><br><span class=\"line\">=============================================</span><br><span class=\"line\">  <span class=\"number\">0</span>%|                                                                                                            | <span class=\"number\">0</span>/<span class=\"number\">29</span> [<span class=\"number\">00</span>:<span class=\"number\">00</span>&lt;?, ?it/s]0time series,kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">146255</span></span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">149130</span></span><br><span class=\"line\">Data loaded ...</span><br><span class=\"line\">Training started ....</span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">1</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">587.1270</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">115.9886</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">110.1476</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">2</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">2.5306</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.9269</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.9269</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">3</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.9320</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.7648</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.7649</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">4</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.7760</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.6570</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.6571</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">5</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.6353</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.4868</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.4911</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.267</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.124</span></span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.296</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.145</span></span><br><span class=\"line\">Valid affiliation-metrics</span><br><span class=\"line\">Test precision: <span class=\"number\">0.9883</span>  | \tTest recall: <span class=\"number\">0.4635</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RAP F1</span><br><span class=\"line\">Valid F1: <span class=\"number\">0.2857</span>  | \tValid precision: <span class=\"number\">0.3077</span>  | \tValid recall: <span class=\"number\">0.2667</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test affiliation-metrics</span><br><span class=\"line\">Test precision: <span class=\"number\">0.9235</span>  | \tTest recall: <span class=\"number\">0.5715</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RAP F1</span><br><span class=\"line\">Test F1: <span class=\"number\">0.3194</span>  | \tTest precision: <span class=\"number\">0.2805</span>  | \tTest recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br><span class=\"line\">********************************</span><br><span class=\"line\">INFO - Saving gif to /root/rumtime//img_1670811334<span class=\"number\">.373728</span>.png</span><br><span class=\"line\">  <span class=\"number\">3</span>%|███▎                                                                                             | <span class=\"number\">1</span>/<span class=\"number\">29</span> [08:<span class=\"number\">27</span>&lt;<span class=\"number\">3</span>:<span class=\"number\">56</span>:<span class=\"number\">40</span>, <span class=\"number\">507.15</span>s/it]1time series,kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">8784</span></span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">8784</span></span><br><span class=\"line\">Data loaded ...</span><br><span class=\"line\">Training started ....</span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">1</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">1527.4913</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">602.3031</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">625.7771</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">2</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">196.4226</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">2.7703</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">2.7703</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">3</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">2.8363</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">2.7490</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">2.7490</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">4</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">2.8169</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">2.7477</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">2.7476</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">5</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">2.8162</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">2.7078</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">2.7078</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.115</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.001</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"跑完一个-COCA-看看结果\">跑完一个 COCA, 看看结果?</h2>\n<p>论文结果: 66.78±2.91<br>\n我跑出来的结果: 65.30</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92778</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50379</span></span><br><span class=\"line\"> f1:        <span class=\"number\">0.65300</span></span><br><span class=\"line\">Revised-point-adjusted metrics:</span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.24675</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.20459</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.31079</span></span><br><span class=\"line\">Point-adjusted metrics:</span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.51525</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.85390</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.36893</span></span><br><span class=\"line\">NAB Scores:</span><br><span class=\"line\"> NAB Score (balanced):       <span class=\"number\">0.29219</span></span><br><span class=\"line\"> NAB Score (high precision): <span class=\"number\">0.28211</span></span><br><span class=\"line\"> NAB Score (high recall):    <span class=\"number\">0.29839</span></span><br><span class=\"line\">seed: <span class=\"number\">2</span> </span><br><span class=\"line\">config setup:</span><br><span class=\"line\"></span><br><span class=\"line\">dataset:IOpsCompetition</span><br><span class=\"line\">input_channels:<span class=\"number\">1</span></span><br><span class=\"line\">kernel_size:<span class=\"number\">4</span></span><br><span class=\"line\">stride:<span class=\"number\">1</span></span><br><span class=\"line\">final_out_channels:<span class=\"number\">32</span></span><br><span class=\"line\">hidden_size:<span class=\"number\">64</span></span><br><span class=\"line\">num_layers:<span class=\"number\">3</span></span><br><span class=\"line\">project_channels:<span class=\"number\">20</span></span><br><span class=\"line\">dropout:<span class=\"number\">0.45</span></span><br><span class=\"line\">features_len:<span class=\"number\">6</span></span><br><span class=\"line\">window_size:<span class=\"number\">16</span></span><br><span class=\"line\">time_step:<span class=\"number\">2</span></span><br><span class=\"line\">num_epoch:<span class=\"number\">5</span></span><br><span class=\"line\">freeze_length_epoch:<span class=\"number\">2</span></span><br><span class=\"line\">change_center_epoch:<span class=\"number\">1</span></span><br><span class=\"line\">center_eps:<span class=\"number\">0.1</span></span><br><span class=\"line\">omega1:<span class=\"number\">1</span></span><br><span class=\"line\">omega2:<span class=\"number\">0.1</span></span><br><span class=\"line\">beta1:<span class=\"number\">0.9</span></span><br><span class=\"line\">beta2:<span class=\"number\">0.99</span></span><br><span class=\"line\">lr:<span class=\"number\">0.0001</span></span><br><span class=\"line\">drop_last:<span class=\"literal\">False</span></span><br><span class=\"line\">batch_size:<span class=\"number\">512</span></span><br><span class=\"line\">nu:<span class=\"number\">0.001</span></span><br><span class=\"line\">detect_nu:<span class=\"number\">0.0015</span></span><br><span class=\"line\">threshold_determine:floating</span><br><span class=\"line\">objective:soft-boundary</span><br><span class=\"line\">loss_type:distance</span><br><span class=\"line\">augmentation:&lt;conf.coca.IOpsCompetition_Configs.augmentations <span class=\"built_in\">object</span> at <span class=\"number\">0x7f2afb3fa370</span>&gt;</span><br><span class=\"line\">scale_ratio:<span class=\"number\">1.1</span></span><br><span class=\"line\">jitter_ratio:<span class=\"number\">0.1</span></span><br><span class=\"line\">Training time <span class=\"keyword\">is</span> : <span class=\"number\">3</span>:09:<span class=\"number\">46.206420</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"Time-Step-Ts-用来干嘛\">Time Step Ts 用来干嘛?</h2>\n<p>time step is the step while sliding, 实际是什么意思?</p>\n<h2 id=\"COCA-的超参数有哪些\">COCA 的超参数有哪些?</h2>\n<ul>\n<li><strong>repre channels</strong>: the dimension of the ﬁnal representations Z</li>\n<li><strong>hidden size</strong> is the dimension of the Seq2Seq in the model</li>\n<li><strong>project channels</strong> is the dimension of the projector</li>\n<li><strong>window size</strong> is the size of time window.</li>\n<li><strong>time step</strong> is the step while sliding.<br>\n<img src=\"/images/477f24a0d47507502f0dfc97355a94d92f735509.png\" alt=\"static/attachment/Pasted image 20221212161412.png\"></li>\n</ul>\n<h2 id=\"常见的性能评估指标\">常见的性能评估指标?</h2>\n<ul>\n<li>NAB Score</li>\n<li>Point-Adjusted (PA)</li>\n<li>Revised Point-Adjusted (RPA)</li>\n</ul>\n<h2 id=\"Center-是什么\">Center 是什么?</h2>\n<p>是一个 vector, (dim=20)<br>\n<img src=\"/images/6ada637a949cf249034ab68f78aed795e61af20b.png\" alt=\"static/attachment/Pasted image 20221212230925.png\"></p>\n<h2 id=\"model-train-的参数是些什么\">model_train 的参数是些什么?</h2>\n<p><code>def model_train(model, model_optimizer, train_loader, center, length, config, device, epoch):</code><br>\n<img src=\"/images/f5ebef5abe60bb2772d33dee08181a8149cb9fde.png\" alt=\"static/attachment/Pasted image 20221212231047.png\"></p>\n<h2 id=\"train-loader-中是些什么\">train_loader 中是些什么?</h2>\n<ul>\n<li>aug1 我猜是 jittering (noise addition)</li>\n<li>aug2 我猜是 scaling (pattern-wise magnitude change)<br>\n<img src=\"/images/c4b0621e622948b0f276c177681fc93042e22fba.png\" alt=\"static/attachment/Pasted image 20221212231235.png\"></li>\n</ul>\n<h2 id=\"Score-如何计算\">Score 如何计算?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">score = distance1 + distance_dec1 </span><br></pre></td></tr></table></figure>\n<h2 id=\"Distance-如何计算-包含哪些\">Distance 如何计算?包含哪些?</h2>\n<p>distance1 是 cosine_similarity</p>\n<ul>\n<li><code>feature1.shape=torch.Size([1536, 20])</code></li>\n<li><code>distance_dec1=center.shape=torch.Size([1, 20])</code></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">distance1 = F.cosine_similarity(feature1, center, eps=<span class=\"number\">1e-6</span>) </span><br><span class=\"line\">distance_dec1 = F.cosine_similarity(feature_dec1, center, eps=<span class=\"number\">1e-6</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"What-are-distance1-and-distance-dec1\">What are distance1 and distance_dec1?</h2>\n<ul>\n<li>distance1: feature1 与 center 的 cosine_similarity</li>\n<li>distance2: feature_dec1 与 center 的 cosine_similarity</li>\n</ul>\n<h2 id=\"feature-dec1-与-feature1-是什么\">feature_dec1 与 feature1 是什么?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">feature1=project <span class=\"comment\"># project: the project of hidden(representation) Z</span></span><br><span class=\"line\">feature_dec1=feature_dec1 <span class=\"comment\"># rec_project: the project of the output (reconstruction representation)</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>project(feature1) and rec_project(feature_dec1)</p>\n<p><img src=\"/images/00bf6b1d3993dfd678ac116ba75b5363f8901c01.png\" alt=\"static/attachment/Pasted image 20221213114728.png\"></p>\n<h2 id=\"score-是什么\">score 是什么?</h2>\n<p>score 是 distance1 and distance_dec1 的距离之和?</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">score = distance1 + distance_dec1</span><br></pre></td></tr></table></figure>\n<p>distance1 是 projector(representation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Z</mi></mrow><annotation encoding=\"application/x-tex\">Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span></span>) 与 center 的 cosine_similarity</p>\n<p>distance_dec1 是 projector(reconstruction representation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>z</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">z&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span>) 的 cosine_similarity</p>\n<p>projector 是:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.project = nn.Linear(self.final_out_channels * self.features_len, self.project_channels, bias=<span class=\"literal\">False</span>)</span><br><span class=\"line\">self.projection_head = nn.Sequential(</span><br><span class=\"line\">  nn.Linear(self.final_out_channels * self.features_len, self.final_out_channels * self.features_len // <span class=\"number\">2</span>),</span><br><span class=\"line\">  nn.BatchNorm1d(self.final_out_channels * self.features_len // <span class=\"number\">2</span>),</span><br><span class=\"line\">  nn.ReLU(inplace=<span class=\"literal\">True</span>),</span><br><span class=\"line\">  nn.Linear(self.final_out_channels * self.features_len // <span class=\"number\">2</span>, self.project_channels),</span><br><span class=\"line\">) </span><br></pre></td></tr></table></figure>\n<h2 id=\"Threshold-如何定\">Threshold 如何定?</h2>\n<p>按异常率指定:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">threshold = np.percentile(scores, <span class=\"number\">100</span>-detect_nu) </span><br></pre></td></tr></table></figure>\n<p><strong>detect_mu</strong> is a set in nu_list, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">nu_list</mi><mo>⁡</mo><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0.001</mn><mo separator=\"true\">,</mo><mn>0.3</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\operatorname{nu\\_list} \\in [0.001, 0.3]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0044em;vertical-align:-0.31em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">nu_list</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0.001</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.3</span><span class=\"mclose\">]</span></span></span></span> :<img src=\"/images/87719b28415cdcff43416487c2813d47375a6961.png\" alt=\"static/attachment/Pasted image 20221213121235.png\"></p>\n<h2 id=\"单个-KPI-的-Affiliation-Metrix-如何计算\">单个 KPI 的 Affiliation Metrix 如何计算</h2>\n<ul>\n<li>固定异常率为 <code>self.detect_nu = 0.0005</code></li>\n</ul>\n<p>计算 <code>mu</code>:</p>\n<p><img src=\"/images/1a334b7c374f4d28bfb35f39ed5a141b5711586f.png\" alt=\"static/attachment/Pasted image 20221213120925.png\"></p>\n<h2 id=\"Affiliation-F1-是最优-F1-吗-类似于-AUC-的那种\">Affiliation-F1 是最优 F1 吗? 类似于 AUC 的那种</h2>\n<p>不是. Affiliation-F1 是 <code>score &gt; threshold</code> 生成的的一系列 0,1 计算出来的值. 计算方法:</p>\n<p><code>affiliation_f1 = 2 * (dic[&quot;precision&quot;] * dic[&quot;recall&quot;]) / (dic[&quot;precision&quot;] + dic[&quot;recall&quot;])</code></p>\n<h2 id=\"predict-是什么\">predict 是什么?</h2>\n<p>predict 是根据 threshold 定好的一个二分类的值: 0 或 1</p>\n<p><img src=\"/images/86992fa08b32b69f2d7deb9c16c686410a529d29.png\" alt=\"static/attachment/Pasted image 20221213171810.png\"></p>\n<h2 id=\"val-target-是什么\">val_target 是什么</h2>\n<p>应该是验证集的 标签 (label)</p>\n<h2 id=\"VAL-指的是什么\">VAL 指的是什么</h2>\n<p>val 指 valid, 如:</p>\n<ul>\n<li>val_loss 表示验证损失</li>\n</ul>\n<h2 id=\"ad-predict-在干什么\">ad_predict 在干什么</h2>\n<ul>\n<li>找出最大的 nu_max1</li>\n<li>找出最大的 nu_max2</li>\n</ul>\n<p>返回找到的最大 affiliation metric 的 (precision, recall) <img src=\"/images/b4ce19e68228c0f00f158e92e801a4e8f8718236.png\" alt=\"static/attachment/Pasted image 20221213174343.png\"></p>\n<h2 id=\"COCA-费时的地方\">COCA 费时的地方</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.267</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.124</span></span><br><span class=\"line\">---- 上一步到下一步之间很费时 ----</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.296</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.145</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-中评估-DAGMM\">COCA 中评估 DAGMM</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python baseline.py  --dataset  IOpsCompetition --models  DAGMM</span><br><span class=\"line\">python baseline.py  --dataset  IOpsCompetition --models LSTMED</span><br><span class=\"line\">python baseline.py  --dataset  IOpsCompetition --models models.DeepSVDD:DeepSVDD</span><br></pre></td></tr></table></figure>\n<p>option</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--dataset <span class=\"string\">&#x27;MSL&#x27;</span>, <span class=\"string\">&#x27;UCR&#x27;</span>, <span class=\"string\">&#x27;IOpsCompetition&#x27;</span>, <span class=\"string\">&#x27;NAB&#x27;</span>, <span class=\"string\">&#x27;Synthetic&#x27;</span>, <span class=\"string\">&#x27;SMD&#x27;</span>, <span class=\"string\">&#x27;SMAP&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">--models <span class=\"string\">&#x27;DefaultDetector&#x27;</span>, <span class=\"string\">&#x27;DBL&#x27;</span>, <span class=\"string\">&#x27;DynamicBaseline&#x27;</span>, <span class=\"string\">&#x27;WindStats&#x27;</span>, <span class=\"string\">&#x27;RRCF&#x27;</span>, <span class=\"string\">&#x27;RandomCutForest&#x27;</span>, <span class=\"string\">&#x27;ISF&#x27;</span>, <span class=\"string\">&#x27;IsolationForest&#x27;</span>, <span class=\"string\">&#x27;Arima&#x27;</span>, <span class=\"string\">&#x27;ARIMA&#x27;</span>, <span class=\"string\">&#x27;ArimaDetector&#x27;</span>, <span class=\"string\">&#x27;HoltWinter&#x27;</span>, <span class=\"string\">&#x27;AdditiveHoltWinter&#x27;</span>, <span class=\"string\">&#x27;ETS&#x27;</span>, <span class=\"string\">&#x27;ETSDetector&#x27;</span>, <span class=\"string\">&#x27;Prophet&#x27;</span>, <span class=\"string\">&#x27;ProphetDetector&#x27;</span>, <span class=\"string\">&#x27;StatThreshold&#x27;</span>, <span class=\"string\">&#x27;SR&#x27;</span>, <span class=\"string\">&#x27;SpectralResidual&#x27;</span>, <span class=\"string\">&#x27;ZMS&#x27;</span>, <span class=\"string\">&#x27;AE&#x27;</span>, <span class=\"string\">&#x27;AutoEncoder&#x27;</span>, <span class=\"string\">&#x27;VariationalAutoEncoder&#x27;</span>, <span class=\"string\">&#x27;VAE&#x27;</span>, <span class=\"string\">&#x27;DeepGaussianMixture&#x27;</span>, <span class=\"string\">&#x27;DAGMM&#x27;</span>, <span class=\"string\">&#x27;LSTMEncoderDecoder&#x27;</span>, <span class=\"string\">&#x27;LSTMED&#x27;</span>, <span class=\"string\">&#x27;DeepSVDD&#x27;</span>, <span class=\"string\">&#x27;models.DeepSVDD:DeepSVDD&#x27;</span>, <span class=\"string\">&#x27;CPC&#x27;</span>, <span class=\"string\">&#x27;models.CPC:CPC&#x27;</span>, <span class=\"string\">&#x27;OCSVM&#x27;</span>, <span class=\"string\">&#x27;models.OCSVM:OCSVM&#x27;</span></span><br></pre></td></tr></table></figure>\n<p>baseline 训练日志</p>\n<p>![[static/attachment/baseline_20221214_154151.log]]</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Revised point-adjusted metrics</span><br><span class=\"line\">F1 score:  <span class=\"number\">0.1879</span></span><br><span class=\"line\">Precision: <span class=\"number\">0.1274</span></span><br><span class=\"line\">Recall:    <span class=\"number\">0.3578</span></span><br><span class=\"line\"></span><br><span class=\"line\">Mean Time To Detect Anomalies:  -<span class=\"number\">0</span> days <span class=\"number\">00</span>:<span class=\"number\">18</span>:03</span><br><span class=\"line\">Mean Detected Anomaly Duration: <span class=\"number\">0</span> days 01:<span class=\"number\">14</span>:04</span><br><span class=\"line\">Mean Anomaly Duration:          <span class=\"number\">0</span> days <span class=\"number\">00</span>:<span class=\"number\">41</span>:<span class=\"number\">38</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-中如何调用-DAGMM-计算-Affiliation-Metric\">COCA 中如何调用 DAGMM 计算 Affiliation Metric</h2>\n<p>在 <code>baseline.py</code> 中会写入文件 <code>./log.txt</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition Affiliation Metrics</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition  &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.41254758453288576</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.24370771196396945</span>&#125;</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition Affiliation Metrics</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition  &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.43984316475087665</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.23352023005803885</span>&#125;</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition Affiliation Metrics</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition  &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.43201223250585297</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.24751992148434693</span>&#125; </span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>Affiliation precision</th>\n<th>Affiliation recall</th>\n<th>Affiliation F1</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0.412547585</td>\n<td>0.243707712</td>\n<td>0.306408279</td>\n</tr>\n<tr>\n<td>0.439843165</td>\n<td>0.23352023</td>\n<td>0.305072351</td>\n</tr>\n<tr>\n<td>0.432012233</td>\n<td>0.247519921</td>\n<td>0.314721337</td>\n</tr>\n</tbody>\n</table>\n<p>原始论文:</p>\n<p><img src=\"/images/f19caf1299d1db71e9fe3c7589d16c801050ac6b.png\" alt=\"static/attachment/Pasted image 20221215083156.png\"></p>\n<p>结论:</p>\n<p>相差 4% 左右</p>\n<p><u></u>## 如何使用作者编写的 DeepSVDD 模型?</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python baseline.py  --dataset  IOpsCompetition --models models.DeepSVDD:DeepSVDD </span><br></pre></td></tr></table></figure>\n<h2 id=\"Affiliation-F1-如何计算\">Affiliation F1 如何计算</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0.0</span> <span class=\"keyword\">if</span> p == <span class=\"number\">0</span> <span class=\"keyword\">or</span> r == <span class=\"number\">0</span> <span class=\"keyword\">else</span> <span class=\"number\">2</span> * p * r / (p + r) </span><br></pre></td></tr></table></figure>\n<p>p: precision</p>\n<p>r: Recall</p>\n<h2 id=\"DeepSVDD-的结果\">DeepSVDD 的结果</h2>\n<p><mark>结论</mark>: 源代码运行结果 与 原文实验结果基本一致.</p>\n<p>源代码运行结果 (IOpsCompetition Affiliation Metrics):</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.4714819300747144</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.32748809986047706</span>, <span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.3865094199121414</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.4682508714752369</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.3339264963170998</span>, <span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.38984239443073504</span>&#125; </span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.4746654049791827</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.32840964548183676</span>, <span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.388219500237786</span>&#125;</span><br></pre></td></tr></table></figure>\n<p>源论文中的实验结果: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>37.58</mn><mo separator=\"true\">,</mo><mn>38.88</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[37.58, 38.88]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">37.58</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">38.88</span><span class=\"mclose\">]</span></span></span></span></p>\n<p><img src=\"/images/e796e8b06ad07e98f1d6db479bd4cdd35f66acb8.png\" alt=\"static/attachment/Pasted image 20221216075058.png\"></p>\n<h2 id=\"coca-debug-py-解析\">coca_debug.py 解析</h2>\n<h3 id=\"data-process\">data process</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train_data.shape=  ( <span class=\"number\">1</span>, <span class=\"number\">605</span>)</span><br><span class=\"line\">test_data.shape=( <span class=\"number\">1</span> , <span class=\"number\">3427</span>) </span><br><span class=\"line\">config:</span><br><span class=\"line\">\taugmentation = &#123;augmentations&#125; &lt;conf.coca.IOpsCompetition_Configs.augmentations&gt;</span><br><span class=\"line\">\tbatch_size = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">512</span></span><br><span class=\"line\">\tbeta1 = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.9</span></span><br><span class=\"line\">\tbeta2 = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.99</span></span><br><span class=\"line\">\tcenter_eps = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.1</span></span><br><span class=\"line\">\tchange_center_epoch = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">1</span></span><br><span class=\"line\">\tdataset = &#123;<span class=\"built_in\">str</span>&#125; <span class=\"string\">&#x27;IOpsCompetition&#x27;</span></span><br><span class=\"line\">\tdetect_nu = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.0015</span></span><br><span class=\"line\">\tdrop_last = &#123;<span class=\"built_in\">bool</span>&#125; <span class=\"literal\">False</span></span><br><span class=\"line\">\tdropout = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.45</span></span><br><span class=\"line\">\tfeatures_len = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">6</span></span><br><span class=\"line\">\tfinal_out_channels = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">32</span></span><br><span class=\"line\">\tfreeze_length_epoch = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">2</span></span><br><span class=\"line\">\thidden_size = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">64</span></span><br><span class=\"line\">\tinput_channels = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">1</span></span><br><span class=\"line\">\tkernel_size = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">4</span></span><br><span class=\"line\">\tloss_type = &#123;<span class=\"built_in\">str</span>&#125; <span class=\"string\">&#x27;distance&#x27;</span></span><br><span class=\"line\">\tlr = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.0001</span></span><br><span class=\"line\">\tnu = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.001</span></span><br><span class=\"line\">\tnum_epoch = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">5</span></span><br><span class=\"line\">\tnum_layers = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">3</span></span><br><span class=\"line\">\tobjective = &#123;<span class=\"built_in\">str</span>&#125; <span class=\"string\">&#x27;soft-boundary&#x27;</span></span><br><span class=\"line\">\tomega1 = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">1</span></span><br><span class=\"line\">\tomega2 = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.1</span></span><br><span class=\"line\">\tproject_channels = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">20</span></span><br><span class=\"line\">\tstride = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">1</span></span><br><span class=\"line\">\tthreshold_determine = &#123;<span class=\"built_in\">str</span>&#125; <span class=\"string\">&#x27;floating&#x27;</span></span><br><span class=\"line\">\ttime_step = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">2</span></span><br><span class=\"line\">\twindow_size = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">16</span></span><br><span class=\"line\">\tdata_generator4(train_data, test_data, train_labels,test_labels, configs)</span><br><span class=\"line\"></span><br><span class=\"line\">data_generator4</span><br><span class=\"line\"><span class=\"number\">1.</span> 使用所有数据的(训练集和测试集)均值和方差标准化数据集</span><br><span class=\"line\"><span class=\"number\">2.</span> 将训练集划分为训练集集和验证集(<span class=\"number\">8</span>:<span class=\"number\">2</span>)(train,val,test_data)</span><br><span class=\"line\"><span class=\"number\">3.</span> 将所有数据处理为窗口数据(time_step=<span class=\"number\">2</span>)</span><br><span class=\"line\">\t<span class=\"number\">1.</span> train_x.shape=(<span class=\"number\">236</span>, <span class=\"number\">1</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">\t<span class=\"number\">2.</span> val_x.shape=(<span class=\"number\">59</span>, <span class=\"number\">1</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">\t<span class=\"number\">3.</span> test_x.shape=(<span class=\"number\">1706</span>, <span class=\"number\">1</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\"><span class=\"number\">4.</span> 将训练集/测试集/验证集(train,test,val) 封装到<span class=\"built_in\">dict</span>中, 键名分别为 <span class=\"string\">&#x27;samples&#x27;</span>, `labels`</span><br><span class=\"line\"><span class=\"number\">5.</span> 数据增强(即 aug1,aug2)</span><br><span class=\"line\">\t<span class=\"number\">1.</span> weak_aug = scaling(sample, config.augmentation.scale_ratio)</span><br><span class=\"line\">\t<span class=\"number\">2.</span> strong_aug = jitter(sample, config.augmentation.jitter_ratio)</span><br><span class=\"line\"><span class=\"number\">6.</span> shuffle 训练集, 验证集和测试集不shuffle </span><br></pre></td></tr></table></figure>\n<h3 id=\"model-training\">model training</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> 初始化 center: torch.zeros(config.project_channels, device=device)</span><br><span class=\"line\"><span class=\"number\">2.</span> 初始化 length: length = torch.tensor(<span class=\"number\">0</span>, device=device)</span><br><span class=\"line\"><span class=\"number\">3.</span> 调用训练函数 model_train(): model_train(model, model_optimizer, train_dl, center,length, config, device, epoch)</span><br><span class=\"line\">\t<span class=\"number\">1.</span> 获取数据集: data, target, aug1, aug2</span><br><span class=\"line\">\t<span class=\"number\">2.</span> 拼接训练数据(原始数据+增强后的数据, 增强 weak_aug,strong_aug): all_data = torch.cat((data, aug1, aug2), dim=<span class=\"number\">0</span>)</span><br><span class=\"line\">\t<span class=\"number\">3.</span> 计算 z 和 output 的 project : feature1, feature_dec1 = model(all_data)</span><br><span class=\"line\">\t<span class=\"number\">4.</span> 计算损失和score,score= (z project 与 center 的 cosine_similarity + output(recon_x) project 与 center 的 cosine_similarity)</span><br><span class=\"line\">\t<span class=\"number\">5.</span> 重命名 score : predcit= score.detach().cpu().numpy()</span><br></pre></td></tr></table></figure>\n<h3 id=\"model-evaluate\">model evaluate</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> 计算 feature1, feature_dec1 =  model(data)</span><br><span class=\"line\"><span class=\"number\">2.</span> 计算 loss 和 score: loss, score = train(feature1, feature_dec1, center, length, epoch, config, device)</span><br><span class=\"line\"><span class=\"number\">3.</span> 重命名 score: predict=score.detach().cpu().numpy()</span><br><span class=\"line\"><span class=\"number\">4.</span> 计算 performance:</span><br><span class=\"line\">\t<span class=\"number\">1.</span> val_target, val_score_origin, val_loss, all_projection </span><br></pre></td></tr></table></figure>\n<h3 id=\"ad-predict\">ad_predict</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> 调用 ad_predict(target, scores, mode, nu)</span><br><span class=\"line\">\t<span class=\"number\">1.</span> target: label</span><br><span class=\"line\">\t<span class=\"number\">2.</span> scores:  预测score</span><br><span class=\"line\">\t<span class=\"number\">3.</span> mode: <span class=\"built_in\">str</span>, floating</span><br><span class=\"line\">\t<span class=\"number\">4.</span> nu: <span class=\"number\">0.0015</span>, 用来干嘛</span><br></pre></td></tr></table></figure>\n<h2 id=\"all-target-all-predict-total-loss-all-projection-是什么\">all_target, all_predict, total_loss, all_projection 是什么?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">all_target: 数据标签 label </span><br><span class=\"line\">all_predict: score, dist(project of z, center)+dist(project of output, center)</span><br><span class=\"line\">total_loss: 多个 batch_size 的loss的累加和</span><br><span class=\"line\">all_projection: project of z</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据增强-scaling-jitter-实现\">数据增强 scaling,jitter 实现</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">scaling</span>(<span class=\"params\">x, sigma=<span class=\"number\">1.1</span></span>):</span><br><span class=\"line\">    <span class=\"comment\"># https://arxiv.org/pdf/1706.00527.pdf</span></span><br><span class=\"line\">    factor = np.random.normal(loc=<span class=\"number\">2.</span>, scale=sigma, size=(x.shape[<span class=\"number\">0</span>], x.shape[<span class=\"number\">2</span>]))</span><br><span class=\"line\">    ai = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(x.shape[<span class=\"number\">1</span>]):</span><br><span class=\"line\">        xi = x[:, i, :]</span><br><span class=\"line\">        ai.append(np.multiply(xi, factor[:, :])[:, np.newaxis, :])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> np.concatenate((ai), axis=<span class=\"number\">1</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">jitter</span>(<span class=\"params\">x, sigma=<span class=\"number\">0.8</span></span>):</span><br><span class=\"line\">    <span class=\"comment\"># https://arxiv.org/pdf/1706.00527.pdf</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + np.random.normal(loc=<span class=\"number\">0.</span>, scale=sigma, size=x.shape)</span><br></pre></td></tr></table></figure>\n<h2 id=\"score-是按-rolling-window-计算的还是按照-point-计算的\">## score 是按 rolling window 计算的还是按照 point 计算的?</h2>\n<p>按照窗口计算的, 每个窗口计算一个 score</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test_batch_data.shape=torch.Size([<span class=\"number\">59</span>, <span class=\"number\">1</span>, <span class=\"number\">16</span>])</span><br><span class=\"line\">feature1.shape=torch.Size([<span class=\"number\">59</span>, <span class=\"number\">20</span>])</span><br><span class=\"line\">feature_dec1.shape=torch.Size([<span class=\"number\">59</span>, <span class=\"number\">20</span>])</span><br><span class=\"line\">score.shape=<span class=\"number\">59</span>(每个窗口计算一个)</span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-的源码是按照-rolling-windows-计算-score-那么-如何映射到原始数据到一个点呢\">COCA 的源码是按照 rolling windows 计算 score, 那么, 如何映射到原始数据到一个点呢?</h2>\n<p>使用一个窗口代表当前数据点. 直接用窗口代替一个单独的数据点.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">time_series.shape=(<span class=\"number\">1</span>, <span class=\"number\">3427</span>)</span><br><span class=\"line\">score.shape= <span class=\"number\">3427</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"在计算-score-时-第一个窗口前数据不够如何处理\">在计算 score 时, 第一个窗口前数据不够如何处理</h2>\n<p>使用 score 的第一个值填充</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scores = np.zeros((X.shape[<span class=\"number\">0</span>],), dtype=<span class=\"built_in\">float</span>)</span><br><span class=\"line\">test_scores = np.<span class=\"built_in\">sum</span>(np.<span class=\"built_in\">abs</span>(r - y.cpu().data.numpy()), axis=<span class=\"number\">1</span>)</span><br><span class=\"line\">scores[self.k - <span class=\"number\">1</span> :] = test_scores</span><br><span class=\"line\">scores[: self.k - <span class=\"number\">1</span>] = test_scores[<span class=\"number\">0</span>] </span><br></pre></td></tr></table></figure>\n<h2 id=\"在-IOpsCompetition-的-05f10d3a-239c-3bef-9bdc-a2feeb0037aa-的训练结果\">在 IOpsCompetition 的 05f10d3a-239c-3bef-9bdc-a2feeb0037aa 的训练结果</h2>\n<p>原代码运行结果</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t train_data.shape:<span class=\"number\">146255</span>,test_data.shape:<span class=\"number\">149130</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">train: <span class=\"number\">58496</span>,valid:<span class=\"number\">14624</span>, test:<span class=\"number\">74558</span></span><br><span class=\"line\">Training started ....</span><br><span class=\"line\">INFO - Length:<span class=\"number\">0</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">1</span>, Train Loss: <span class=\"number\">396.1574</span>, Valid Loss: <span class=\"number\">115.7214</span>, Test Loss: <span class=\"number\">109.9165</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.4248124946355827</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">2</span>, Train Loss: <span class=\"number\">1.4987</span>, Valid Loss: <span class=\"number\">0.5217</span>, Test Loss: <span class=\"number\">0.5218</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.3707212271690369</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">3</span>, Train Loss: <span class=\"number\">0.5671</span>, Valid Loss: <span class=\"number\">0.4676</span>, Test Loss: <span class=\"number\">0.4677</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.2905264883637429</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">4</span>, Train Loss: <span class=\"number\">0.4960</span>, Valid Loss: <span class=\"number\">0.3880</span>, Test Loss: <span class=\"number\">0.3884</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.2738433243036271</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">5</span>, Train Loss: <span class=\"number\">0.4482</span>, Valid Loss: <span class=\"number\">0.3709</span>, Test Loss: <span class=\"number\">0.3710</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Start to evaluate! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Calculating validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.2520204081632653</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.9991141275746687</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7897834771523201</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.23977551020408164</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.7096774193548386</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.6875</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7333333333333333</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Calculating testing metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.301</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.8333357886680556</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7724293430234433</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.0683469387755102</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.42592592592592593</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.5</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.3709677419354839</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Valid affiliation precision: <span class=\"number\">0.9991</span></span><br><span class=\"line\">Valid affiliation recall: <span class=\"number\">0.7898</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RevisedPointAdjusted F1: <span class=\"number\">0.7097</span>  </span><br><span class=\"line\">Valid RevisedPointAdjusted precision: <span class=\"number\">0.6875</span> </span><br><span class=\"line\">Valid RevisedPointAdjusted recall: <span class=\"number\">0.7333</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Testing metric</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Test affiliation precision: <span class=\"number\">0.8333</span> </span><br><span class=\"line\">Test affiliation recall: <span class=\"number\">0.7724</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RevisedPointAdjusted F1: <span class=\"number\">0.4259</span></span><br><span class=\"line\">Test RevisedPointAdjusted precision: <span class=\"number\">0.5000</span></span><br><span class=\"line\">Test RevisedPointAdjusted recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Configuration of the model</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">dataset:IOpsCompetition</span><br><span class=\"line\">input_channels:<span class=\"number\">1</span></span><br><span class=\"line\">kernel_size:<span class=\"number\">4</span></span><br><span class=\"line\">stride:<span class=\"number\">1</span></span><br><span class=\"line\">final_out_channels:<span class=\"number\">32</span></span><br><span class=\"line\">hidden_size:<span class=\"number\">64</span></span><br><span class=\"line\">num_layers:<span class=\"number\">3</span></span><br><span class=\"line\">project_channels:<span class=\"number\">20</span></span><br><span class=\"line\">dropout:<span class=\"number\">0.45</span></span><br><span class=\"line\">features_len:<span class=\"number\">6</span></span><br><span class=\"line\">window_size:<span class=\"number\">16</span></span><br><span class=\"line\">time_step:<span class=\"number\">2</span></span><br><span class=\"line\">num_epoch:<span class=\"number\">5</span></span><br><span class=\"line\">freeze_length_epoch:<span class=\"number\">2</span></span><br><span class=\"line\">change_center_epoch:<span class=\"number\">1</span></span><br><span class=\"line\">center_eps:<span class=\"number\">0.1</span></span><br><span class=\"line\">omega1:<span class=\"number\">1</span></span><br><span class=\"line\">omega2:<span class=\"number\">0.1</span></span><br><span class=\"line\">beta1:<span class=\"number\">0.9</span></span><br><span class=\"line\">beta2:<span class=\"number\">0.99</span></span><br><span class=\"line\">lr:<span class=\"number\">0.0001</span></span><br><span class=\"line\">drop_last:<span class=\"literal\">False</span></span><br><span class=\"line\">batch_size:<span class=\"number\">512</span></span><br><span class=\"line\">nu:<span class=\"number\">0.001</span></span><br><span class=\"line\">detect_nu:<span class=\"number\">0.0015</span></span><br><span class=\"line\">threshold_determine:floating</span><br><span class=\"line\">objective:soft-boundary</span><br><span class=\"line\">loss_type:distance</span><br><span class=\"line\">augmentation:&lt;conf.coca.IOpsCompetition_Configs.augmentations <span class=\"built_in\">object</span> at <span class=\"number\">0x10143e700</span>&gt;</span><br><span class=\"line\">Training time: <span class=\"number\">257.978011</span></span><br></pre></td></tr></table></figure>\n<p>我的代码结果</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(sw_torch_1_10) sunwu@mac-m1 p1_ch05 % make test_aiops</span><br><span class=\"line\">python main_torch.py --dataset IOpsCompetition --data_id 05f10d3a-239c-3bef-9bdc-a2feeb0037aa --gpus <span class=\"number\">0</span></span><br><span class=\"line\">&lt;frozen importlib._bootstrap&gt;:<span class=\"number\">219</span>: RuntimeWarning: scipy._lib.messagestream.MessageStream size changed, may indicate binary incompatibility. Expected <span class=\"number\">56</span> <span class=\"keyword\">from</span> C header, got <span class=\"number\">64</span> <span class=\"keyword\">from</span> PyObject</span><br><span class=\"line\">INFO - Specified gpus: <span class=\"number\">0</span> </span><br><span class=\"line\">INFO - CUDA <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> available, using GPU to work. </span><br><span class=\"line\">INFO - Target device: cpu </span><br><span class=\"line\">INFO - train: (<span class=\"number\">1</span>, <span class=\"number\">146255</span>), test: (<span class=\"number\">1</span>, <span class=\"number\">149130</span>) </span><br><span class=\"line\">INFO - train_loader.<span class=\"built_in\">len</span>=<span class=\"number\">58496</span>,val_loader:<span class=\"number\">14624</span>,test_loader=<span class=\"number\">74558</span> </span><br><span class=\"line\">INFO - Training started .... </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">1</span>, Train Loss: <span class=\"number\">396.1574</span>, Valid Loss: <span class=\"number\">115.7214</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.4676222130060199</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">2</span>, Train Loss: <span class=\"number\">1.4527</span>, Valid Loss: <span class=\"number\">0.5645</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.36364347952604353</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">3</span>, Train Loss: <span class=\"number\">0.5727</span>, Valid Loss: <span class=\"number\">0.4605</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.32340016061067595</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">4</span>, Train Loss: <span class=\"number\">0.5025</span>, Valid Loss: <span class=\"number\">0.4203</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.26546983695030246</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">5</span>, Train Loss: <span class=\"number\">0.4409</span>, Valid Loss: <span class=\"number\">0.3641</span> </span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========       Calculating validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.28875510204081634</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.9983926575606217</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.8555412157787603</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.2826326530612245</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.7058823529411765</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.631578947368421</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.8</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========       Calculating testing metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.2826326530612245</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.845356229045622</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7913941253003326</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.07446938775510203</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.4070796460176991</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.45098039215686275</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.3709677419354839</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========       Validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Valid affiliation precision: <span class=\"number\">0.9984</span></span><br><span class=\"line\">Valid affiliation recall: <span class=\"number\">0.8555</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RevisedPointAdjusted F1: <span class=\"number\">0.7059</span>  </span><br><span class=\"line\">Valid RevisedPointAdjusted precision: <span class=\"number\">0.6316</span> </span><br><span class=\"line\">Valid RevisedPointAdjusted recall: <span class=\"number\">0.8000</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========       Testing metric</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Test affiliation precision: <span class=\"number\">0.8454</span> </span><br><span class=\"line\">Test affiliation recall: <span class=\"number\">0.7914</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RevisedPointAdjusted F1: <span class=\"number\">0.4071</span></span><br><span class=\"line\">Test RevisedPointAdjusted precision: <span class=\"number\">0.4510</span></span><br><span class=\"line\">Test RevisedPointAdjusted recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"time-step-2-时-score-如何计算\">time_step =2 时, score 如何计算?</h2>\n<h2 id=\"同样的代码-为何执行结果不一致\">同样的代码, 为何执行结果不一致?</h2>\n<p>Q: 我将 COCA 封装为类, 在测试的时候, 出现如下神奇问题: 我的修改版本和 COCA 源代码中, 第一个执行结果的 epoch 的 loss 一致, 但是到第二个 epoch 以后, loss 就不一致了. 执行结果如下:</p>\n<ul>\n<li>\n<p>第一个 epoch, loss 一致 (左边表示 coca 的源代码输出日志, 右边表示我的修改版本输出日志)<img src=\"/images/a1eca7b2a04b83f569459e5be19e5e1d501ba561.png\" alt=\"static/attachment/Pasted image 20221222101010.png\"></p>\n</li>\n<li>\n<p>第二个 epoch 的 loss <u>不一致了</u> <img src=\"/images/0cbcacd8ee62ee0c50d3c6934afa402cadda2481.png\" alt=\"static/attachment/Pasted image 20221222100911.png\"></p>\n</li>\n</ul>\n<h3 id=\"结论\">结论</h3>\n<p>经过加班熬夜近 8 个小时,发现问题是: COCA 在训练的时候, 使用了测试集评估了模型, 而我没有: (左: 我的版本, 右: COCA 源码)</p>\n<p><img src=\"/images/aac3f753a34df8ae438f91a2690e018619dd7bc6.png\" alt=\"static/attachment/Pasted image 20221222102021.png\"></p>\n<p>当我吧上图中黄色注释掉之后, 两者运行结果完全一致.如下是 eopch =3 和 epoch=5 的快照, 可知两者完全一致.</p>\n<p><img src=\"/images/a4d3fdf4957cef7cf3bb12e7f8e8ac0c7f620df3.png\" alt=\"static/attachment/Pasted image 20221222102402.png\"></p>\n<p><img src=\"/images/15823f33dacbc6167202b406986639e89767154e.png\" alt=\"static/attachment/Pasted image 20221222102325.png\"></p>\n<p>如果加上测试集的评估代码, 结果又回到了不一样. 我取消了如下代码的注释</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># test_target, test_score_origin, test_loss, all_projection = model_evaluate(model, test_dl, center, length,</span></span><br><span class=\"line\"><span class=\"comment\">#                                                                            config, device, epoch) </span></span><br></pre></td></tr></table></figure>\n<p>重复执行结果又不同了</p>\n<p><img src=\"/images/e3a7ff82fce93e8f5235dbcac4bd167d537bb558.png\" alt=\"static/attachment/Pasted image 20221222102703.png\"></p>\n<p>那问题来了, 为什么训练的时候要使用测试集评估其性能呢? 去掉行不行?</p>\n<h3 id=\"论文问题-可能数据使用不当\">论文问题: 可能数据使用不当</h3>\n<p>COCA 在训练的时候, 让模型看到了测试集, 导致结果 COCA 的性能偏高</p>\n<p><img src=\"/images/e15f4946f025f21858959bec16073b32077dbd31.png\" alt=\"static/attachment/Pasted image 20221222104232.png\"></p>\n<h2 id=\"在训练期间使用-不使用测试集评估模型的影响\">在训练期间使用/不使用测试集评估模型的影响</h2>\n<p>结论: 有区别, 但是很小</p>\n<p>NAB 的数据集 1:</p>\n<p><img src=\"/images/7ec6d7fbaa4df7de5b8b75be102dd3ac5cddce65.png\" alt=\"static/attachment/Pasted image 20221222105911.png\"></p>\n<p>NAB 的数据集 2:</p>\n<p><img src=\"/images/9b67738bd58cd4fa3d5bc257d0377735e0b99d1c.png\" alt=\"static/attachment/Pasted image 20221222110007.png\"></p>\n<h2 id=\"AIOPS-的-05f10d3a-239c-3bef-9bdc-a2feeb0037aa-对比\">AIOPS 的 05f10d3a-239c-3bef-9bdc-a2feeb0037aa 对比</h2>\n<p>左: coca , 右: 我的实现</p>\n<p>结论: 性能指标差不多 (0.01, 证明我的实现 ok, 问题不大)</p>\n<p><img src=\"/images/1e42d7af05dbfab89643e9268b13d7bac4df9527.png\" alt=\"static/attachment/Pasted image 20221222111421.png\"></p>\n<h2 id=\"RuntimeError-mat1-and-mat2-shapes-cannot-be-multiplied-6x435-and-232x116\">RuntimeError: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)</h2>\n<p>The parameters when error occurs:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INFO - Load configuration <span class=\"keyword\">from</span> nni, loaded parameters: </span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;num_layers&#x27;</span>: <span class=\"number\">3.5879567896971647</span>, <span class=\"string\">&#x27;project_channels&#x27;</span>: <span class=\"number\">46.7047622771687</span>, <span class=\"string\">&#x27;dropout&#x27;</span>: <span class=\"number\">0.3002211281022341</span>, <span class=\"string\">&#x27;features_len&#x27;</span>: <span class=\"number\">8.300394615230376</span>, <span class=\"string\">&#x27;window_size&#x27;</span>: <span class=\"number\">53.69552169749169</span>, <span class=\"string\">&#x27;time_step&#x27;</span>: <span class=\"number\">4.514415263158897</span>, <span class=\"string\">&#x27;num_epoch&#x27;</span>: <span class=\"number\">7.697804748314586</span>, <span class=\"string\">&#x27;center_eps&#x27;</span>: <span class=\"number\">0.20709294499972672</span>, <span class=\"string\">&#x27;lr&#x27;</span>: <span class=\"number\">0.08785427712258059</span>, <span class=\"string\">&#x27;batch_size&#x27;</span>: <span class=\"number\">2.478578387644</span>, <span class=\"string\">&#x27;hidden_size&#x27;</span>: <span class=\"number\">190.4429211984154</span>, <span class=\"string\">&#x27;final_out_channels&#x27;</span>: <span class=\"number\">29.479373928427712</span>&#125; </span><br><span class=\"line\">INFO - Updating parameters num_layers           = <span class=\"number\">4</span> </span><br><span class=\"line\">INFO - Updating parameters project_channels     = <span class=\"number\">47</span> </span><br><span class=\"line\">INFO - Updating parameters dropout              = <span class=\"number\">0.3002211281022341</span> </span><br><span class=\"line\">INFO - Updating parameters features_len         = <span class=\"number\">8</span> </span><br><span class=\"line\">INFO - Updating parameters window_size          = <span class=\"number\">54</span> </span><br><span class=\"line\">INFO - Updating parameters time_step            = <span class=\"number\">5</span> </span><br><span class=\"line\">INFO - Updating parameters num_epoch            = <span class=\"number\">8</span> </span><br><span class=\"line\">INFO - Updating parameters center_eps           = <span class=\"number\">0.20709294499972672</span> </span><br><span class=\"line\">INFO - Updating parameters lr                   = <span class=\"number\">0.08785427712258059</span> </span><br><span class=\"line\">INFO - Updating parameters batch_size           = <span class=\"number\">2</span> </span><br><span class=\"line\">INFO - Updating parameters hidden_size          = <span class=\"number\">190</span> </span><br><span class=\"line\">INFO - Updating parameters final_out_channels   = <span class=\"number\">29</span> </span><br><span class=\"line\">INFO - The number of parameters updated:         <span class=\"number\">12</span>  </span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">all_data.shape=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">1</span>, <span class=\"number\">54</span>]) </span><br><span class=\"line\">x_in.shape=all_data=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">1</span>, <span class=\"number\">54</span>]) </span><br><span class=\"line\">x.shape=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">29</span>, <span class=\"number\">15</span>])</span><br><span class=\"line\">hidden.shape=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">15</span>, <span class=\"number\">29</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">....</span><br><span class=\"line\"></span><br><span class=\"line\">hidde.shape= torch.Size([<span class=\"number\">6</span>, <span class=\"number\">435</span>])</span><br><span class=\"line\">torch.nn.Linear.<span class=\"keyword\">in</span>=self.final_out_channels * self.features_len=<span class=\"number\">232</span></span><br><span class=\"line\"><span class=\"number\">54</span></span><br></pre></td></tr></table></figure>\n<p>关系: <code> self.final_out_channels * self.features_len=232</code> = <code>hidden.shape[1]</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.input_channels</span><br><span class=\"line\">self.final_out_channels </span><br><span class=\"line\"><span class=\"number\">53</span>: mat1 <span class=\"keyword\">and</span> mat2 shapes cannot be multiplied (6x435 <span class=\"keyword\">and</span> 232x116)</span><br><span class=\"line\"><span class=\"number\">16</span>: mat1 <span class=\"keyword\">and</span> mat2 shapes cannot be multiplied (6x174 <span class=\"keyword\">and</span> 232x116)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">window_size=<span class=\"number\">54</span></span><br><span class=\"line\">all_data=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">1</span>, <span class=\"number\">54</span>]) </span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/053eb65a3953e5e9eb2dda772a4dd0c702afd5ca.png\" alt=\"Excalidraw/COCA源码分析 2022-12-23 14.56.42.excalidraw\"></p>\n<h3 id=\"修复代码\">修复代码</h3>\n<p>将 <code>project_input_features= self.final_out_channels * self.features_len</code> 修改为:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">l1_out_conv1d = get_l_out_of_max_pool_1d(self.window_size, kernel_size=self.kernel_size, stride=self.stride,</span><br><span class=\"line\">\t\t\t\t\t\t\t    padding=self.kernel_size // <span class=\"number\">2</span>)</span><br><span class=\"line\">l1_out_maxpool1d = get_l_out_of_max_pool_1d(l1_out_conv1d, kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">l2_out_conv1d = get_l_out_of_max_pool_1d(l1_out_maxpool1d, kernel_size=<span class=\"number\">8</span>, stride=<span class=\"number\">1</span>, padding=<span class=\"number\">4</span>)</span><br><span class=\"line\">l2_out = get_l_out_of_max_pool_1d(l2_out_conv1d, kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>)</span><br><span class=\"line\">project_input_features = self.final_out_channels * l2_out </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><code>get_l_out_of_max_pool_1d</code>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get_l_out_of_max_pool_1d</span>(<span class=\"params\">l_in, kernel_size, padding=<span class=\"number\">0</span>, dilation=<span class=\"number\">1</span>, stride=<span class=\"number\">1</span></span>):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    Get the L_out of MAXPOOL1D  https://pytorch.org/docs/stable/generated/torch.nn.MaxPool1d.html</span></span><br><span class=\"line\"><span class=\"string\">    or CONV1D https://pytorch.org/docs/stable/generated/torch.nn.Conv1d.html</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    l_in :</span></span><br><span class=\"line\"><span class=\"string\">    padding :</span></span><br><span class=\"line\"><span class=\"string\">    dilation :</span></span><br><span class=\"line\"><span class=\"string\">    kernel_size :</span></span><br><span class=\"line\"><span class=\"string\">    stride :</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returnsoc</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">int</span>(<span class=\"number\">1</span> + ((l_in + (<span class=\"number\">2</span> * padding) - dilation * (kernel_size - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) / stride))</span><br></pre></td></tr></table></figure>\n<h2 id=\"NAB-测试结果\">NAB 测试结果</h2>\n<p>我封装的代码和 COCA 原始代码运行结果</p>\n<p><img src=\"/images/349241e4425a5abf17e3ceb1e21715854fa139a7.png\" alt=\"static/attachment/Pasted image 20221223204407.png\"></p>\n<p>第二个 EPOCH 不一致的原因是: COCA 在训练的时候使用了 test set.</p>\n<p><img src=\"/images/36c66f727541f20bfd022c1a05f1d3b74cbf2878.png\" alt=\"static/attachment/Pasted image 20221223204503.png\"></p>\n<p>代码重现:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make p_nab</span><br></pre></td></tr></table></figure>\n<p>or</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python /Users/sunwu/SW-Research/COCA-main/coca_debug.py  --dataset NAB  &gt;  /Users/sunwu/Desktop/text/coca_debug.txt <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span></span><br><span class=\"line\">python /Users/sunwu/SW-Research/p1_ch05/main_torch.py --dataset NAB  &gt; /Users/sunwu/Desktop/text/main_torch.txt  <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-输入-出分析\">COCA 输入/出分析</h2>\n<p>目的: COCA 如何计算模型性能</p>\n<ul>\n<li>数据初试处理结果, 16 是 <strong>窗口大小</strong>:\n<ul>\n<li><code>train_dat_dict['samples'].shape=(236, 1, 16)</code></li>\n</ul>\n</li>\n<li>训练阶段 (<strong>59 是 batch_size, 16 是窗口大小</strong>):\n<ul>\n<li>验证数据: <code>torch.Size([59, 1, 16])</code></li>\n<li><code>feature1.shape=torch.Size([59, 20])</code></li>\n<li><code>feature_dec1.shape=torch.Size([59, 20])</code></li>\n<li><code>score=(59,)</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"结论-2\">结论</h3>\n<p>每个窗口计算一个 score?</p>\n<ul>\n<li>输入: batch window <code>torch.Size([59, 1, 16])</code></li>\n<li>输出: batch score <code>score=(59,)</code></li>\n</ul>\n<p>原文是嘛?</p>\n<h2 id=\"coca-中-time-step-为-2-时-如何计算-score\">coca 中 time_step 为 2 时, 如何计算 score?</h2>\n<p>![[时间序列(源于coca)中的 time step]]</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<p><a href=''>COCA模型改造</a></p>\n<h2 id=\"总结\">总结</h2>\n<ul>\n<li>COCA 并没有填充缺失数据</li>\n<li>归一化和标注化的均值和方差是 <code>训练集与测试集=总数据</code> 的均值 (scale) 和方差 (bias)</li>\n<li><img src=\"/images/46300e066e18a1a004cc63138f21c3566c1d387e.png\" alt=\"Excalidraw/COCA源码分析 2022-12-13 09.26.38.excalidraw\"></li>\n</ul>\n<h2 id=\"安装\">安装</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make install </span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/salesforce/Merlion.git</span><br><span class=\"line\">cd Merlion</span><br><span class=\"line\">pip install salesforce-merlion==<span class=\"number\">1.1</span><span class=\"number\">.1</span></span><br><span class=\"line\">pip install -e ts_datasets/</span><br><span class=\"line\">pip install -r requirements.txt </span><br></pre></td></tr></table></figure>\n<h2 id=\"原始代码训练结果与代码加速\">原始代码训练结果与代码加速</h2>\n<p>原始训练结果</p>\n<p>![[static/attachment/coco_source.log]]</p>\n<p>优化过的训练结果 (4 次)</p>\n<p>![[static/attachment/coca_accelarate.log]]</p>\n<p>![[static/attachment/coca_accelarate_20221214_033956.log]]</p>\n<p>![[static/attachment/coca_accelarate_20221214_033740.log]]</p>\n<p>![[static/attachment/coca_accelarate_20221214_033729.log]]</p>\n<p>小结:</p>\n<p>修改后训练时间从 <strong>3:09:46</strong> 减少到 <strong>0:40:37</strong></p>\n<p>评估指标修改前后变化 (原文结果: Aﬃliation F1= 66.78±2.91)(<strong>在 63.87-69.69 都正常</strong>)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 修改前</span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92778</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50379</span></span><br><span class=\"line\"> f1:        <span class=\"number\">0.65300</span></span><br><span class=\"line\"><span class=\"comment\"># 修改后 1 </span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92732</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50441</span></span><br><span class=\"line\"> f1:        <span class=\"number\">0.65340</span> </span><br><span class=\"line\"><span class=\"comment\"># 修改后 2</span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92703</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50450</span></span><br><span class=\"line\"> f1:        <span class=\"number\">0.65341</span></span><br><span class=\"line\"><span class=\"comment\"># 修改后 3</span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92744</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50436</span></span><br><span class=\"line\">f1:        <span class=\"number\">0.65340</span></span><br><span class=\"line\"><span class=\"comment\"># 修改后 4</span></span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92737</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50510</span></span><br><span class=\"line\">f1:        <span class=\"number\">0.65400</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Dataset-的表示是什么样\">Dataset 的表示是什么样?</h2>\n<p>Dataset 是多个 KPI 的表示.</p>\n<p>all dataset:<br>\n<img src=\"/images/0399299fb68cd20b1dbbf9bfc411a229dca7c1f6.png\" alt=\"static/attachment/Pasted image 20221211204935.png\"><br>\n<img src=\"/images/ecb7c0fed195365ef31c17fb5f0cf2deb9423e79.png\" alt=\"static/attachment/Pasted image 20221211205148.png\"></p>\n<h2 id=\"time-series-meta-data-dt-idx-是什么\"><code>time_series, meta_data = dt[idx]</code> 是什么</h2>\n<p>time_series 包含 <code>DateTime</code> 和 <code>value</code><br>\nmeta_data 包含 <code>anomaly</code>(是否是一次) 与 <code>trainval</code>(是否是训练集)<br>\n<img src=\"/images/ab245dbb3a70ff7671109b47f39a1375aa896e67.png\" alt=\"static/attachment/Pasted image 20221212080901.png\"><br>\n<img src=\"/images/8a55323c68ecb1797e67f3018b72feb6780e3def.png\" alt=\"static/attachment/Pasted image 20221212080845.png\"></p>\n<h2 id=\"如何获取训练集和测试集\">如何获取训练集和测试集</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train_data = TimeSeries.from_pd(time_series[meta_data.trainval])</span><br><span class=\"line\">test_data = TimeSeries.from_pd(time_series[~meta_data.trainval])</span><br><span class=\"line\">train_labels = TimeSeries.from_pd(meta_data.anomaly[meta_data.trainval])</span><br><span class=\"line\">test_labels = TimeSeries.from_pd(meta_data.anomaly[~meta_data.trainval]) </span><br></pre></td></tr></table></figure>\n<h3 id=\"meta-data-trainval-存储是否是训练集\"><code>meta_data.trainval</code> 存储是否是训练集</h3>\n<p><img src=\"/images/db90a8315faa1528cf9847b300e3d9d4b25c54de.png\" alt=\"static/attachment/Pasted image 20221212081230.png\"></p>\n<h3 id=\"meta-data-trainval-取反\"><code>~meta_data.trainval</code> 取反</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~np.ndarray 表示取反:</span><br><span class=\"line\">数组中的 true 变 <span class=\"literal\">False</span></span><br><span class=\"line\"><span class=\"literal\">False</span> 变 <span class=\"literal\">True</span> </span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/bfccfee6cba1e46a6031d9c7c2b70da97c13423c.png\" alt=\"static/attachment/Pasted image 20221212081325.png\"></p>\n<h2 id=\"COCA-是一次使用全部的数据训练模型吗\">COCA 是一次使用全部的数据训练模型吗?</h2>\n<p>不是, 是一个一个的训练<br>\n<img src=\"/images/e03e984c489d88c178be758aee9b839174c1ba5b.png\" alt=\"static/attachment/Pasted image 20221212081932.png\"></p>\n<h2 id=\"COCA-是如何处理缺失数据点的\">COCA 是如何处理缺失数据点的?</h2>\n<p>‘COCA’ 未处理缺失数据点.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa  </span><br><span class=\"line\">训练集总数量: <span class=\"number\">146255</span>  </span><br><span class=\"line\">测试集总数量: <span class=\"number\">149130</span>  </span><br><span class=\"line\">总量: <span class=\"number\">295385</span> (未加缺失数据 <span class=\"number\">3668</span>(<span class=\"number\">295385</span>+<span class=\"number\">3668</span>=<span class=\"number\">299053</span>(加上缺失数据点后,与我的统计结果一致)))  </span><br></pre></td></tr></table></figure>\n<p>标注化后的数据统计:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test_time_series=(<span class=\"number\">149130</span>, <span class=\"number\">1</span>) </span><br></pre></td></tr></table></figure>\n<p>我的统计结果:</p>\n<table>\n<thead>\n<tr>\n<th>kpi_id</th>\n<th>#count_all</th>\n<th>#train_datapoints</th>\n<th>#test_datapoints</th>\n<th>#missing_all</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>05f10d3a-239c-3bef-9bdc-a2feeb0037aa</td>\n<td>299053</td>\n<td>149526</td>\n<td>149527</td>\n<td>3668</td>\n</tr>\n</tbody>\n</table>\n<p>数据处理流程分析: <code>data_generator4</code></p>\n<p>test_time_series_ts<br>\n<img src=\"/images/f6df3690fe8dcff8aaa65aaebfe30a859049fafb.png\" alt=\"static/attachment/Pasted image 20221212084211.png\"><br>\ntrain_time_series<br>\n<img src=\"/images/e68f82882020d7d891a80e98459c280c481572a9.png\" alt=\"static/attachment/Pasted image 20221212090126.png\"><br>\ntrain_time_series 转换为窗口后的数据 <code>configs.window_size=16, configs.time_step=2</code><br>\n<img src=\"/images/e4c4ab79e883880c71761e195ce99f95079141a6.png\" alt=\"static/attachment/Pasted image 20221212090200.png\"></p>\n<h3 id=\"如何标准化\">如何标准化?</h3>\n<p>求 <strong>训练集 + 测试集</strong> 所有的数据均值和方差, 然后标准化 (均值 scale, 方差 bias)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mvn = MeanVarNormalize()</span><br><span class=\"line\">mvn.train(train_time_series_ts + test_time_series_ts)</span><br><span class=\"line\">bias, scale = mvn.bias, mvn.scale </span><br></pre></td></tr></table></figure>\n<h3 id=\"train-time-series-是什么\">train_time_series 是什么?</h3>\n<p>被标准后的训练数据.</p>\n<p><img src=\"/images/d959af017055f0c9d66531ee5e22e402b329b6c0.png\" alt=\"static/attachment/Pasted image 20221212084458.png\"></p>\n<h2 id=\"COCA-的模型如何表示\">COCA 的模型如何表示?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> torch <span class=\"keyword\">import</span> nn</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">base_Model</span>(nn.Module):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, configs, device</span>):</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(base_Model, self).__init__()</span><br><span class=\"line\">        self.input_channels = configs.input_channels</span><br><span class=\"line\">        self.final_out_channels = configs.final_out_channels</span><br><span class=\"line\">        self.features_len = configs.features_len</span><br><span class=\"line\">        self.project_channels = configs.project_channels</span><br><span class=\"line\">        self.hidden_size = configs.hidden_size</span><br><span class=\"line\">        self.window_size = configs.window_size</span><br><span class=\"line\">        self.device = device</span><br><span class=\"line\">        self.num_layers = configs.num_layers</span><br><span class=\"line\">        self.kernel_size = configs.kernel_size</span><br><span class=\"line\">        self.stride = configs.stride</span><br><span class=\"line\">        self.dropout = configs.dropout</span><br><span class=\"line\"></span><br><span class=\"line\">        self.conv_block1 = nn.Sequential(</span><br><span class=\"line\">            nn.Conv1d(self.input_channels, <span class=\"number\">32</span>, kernel_size=self.kernel_size,</span><br><span class=\"line\">                      stride=self.stride, bias=<span class=\"literal\">False</span>, padding=(self.kernel_size//<span class=\"number\">2</span>)),</span><br><span class=\"line\">            nn.BatchNorm1d(<span class=\"number\">32</span>),</span><br><span class=\"line\">            nn.ReLU(),</span><br><span class=\"line\">            nn.MaxPool1d(kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>),</span><br><span class=\"line\">            nn.Dropout(self.dropout)</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        self.conv_block2 = nn.Sequential(</span><br><span class=\"line\">            nn.Conv1d(<span class=\"number\">32</span>, self.final_out_channels, kernel_size=<span class=\"number\">8</span>, stride=<span class=\"number\">1</span>, bias=<span class=\"literal\">False</span>, padding=<span class=\"number\">4</span>),</span><br><span class=\"line\">            nn.BatchNorm1d(self.final_out_channels),</span><br><span class=\"line\">            nn.ReLU(),</span><br><span class=\"line\">            nn.MaxPool1d(kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>)</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        self.conv_block3 = nn.Sequential(</span><br><span class=\"line\">            nn.Conv1d(<span class=\"number\">64</span>, self.final_out_channels, kernel_size=<span class=\"number\">8</span>, stride=<span class=\"number\">1</span>, bias=<span class=\"literal\">False</span>, padding=<span class=\"number\">4</span>),</span><br><span class=\"line\">            nn.BatchNorm1d(self.final_out_channels),</span><br><span class=\"line\">            nn.ReLU(),</span><br><span class=\"line\">            nn.MaxPool1d(kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>),</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        self.encoder = nn.LSTM(</span><br><span class=\"line\">            self.final_out_channels,</span><br><span class=\"line\">            self.hidden_size,</span><br><span class=\"line\">            batch_first=<span class=\"literal\">True</span>,</span><br><span class=\"line\">            num_layers=self.num_layers,</span><br><span class=\"line\">            bias=<span class=\"literal\">False</span>,</span><br><span class=\"line\">            dropout=self.dropout,</span><br><span class=\"line\">        )</span><br><span class=\"line\">        self.decoder = nn.LSTM(</span><br><span class=\"line\">            self.final_out_channels,</span><br><span class=\"line\">            self.hidden_size,</span><br><span class=\"line\">            batch_first=<span class=\"literal\">True</span>,</span><br><span class=\"line\">            num_layers=self.num_layers,</span><br><span class=\"line\">            bias=<span class=\"literal\">False</span>,</span><br><span class=\"line\">            dropout=self.dropout,</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        self.output_layer = nn.Linear(self.hidden_size, self.final_out_channels)</span><br><span class=\"line\">        self.project = nn.Linear(self.final_out_channels * self.features_len, self.project_channels, bias=<span class=\"literal\">False</span>)</span><br><span class=\"line\">        self.projection_head = nn.Sequential(</span><br><span class=\"line\">            nn.Linear(self.final_out_channels * self.features_len, self.final_out_channels * self.features_len // <span class=\"number\">2</span>),</span><br><span class=\"line\">            nn.BatchNorm1d(self.final_out_channels * self.features_len // <span class=\"number\">2</span>),</span><br><span class=\"line\">            nn.ReLU(inplace=<span class=\"literal\">True</span>),</span><br><span class=\"line\">            nn.Linear(self.final_out_channels * self.features_len // <span class=\"number\">2</span>, self.project_channels),</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">init_hidden_state</span>(<span class=\"params\">self, batch_size</span>):</span><br><span class=\"line\">        h = torch.zeros((self.num_layers, batch_size, self.hidden_size)).to(self.device)</span><br><span class=\"line\">        c = torch.zeros((self.num_layers, batch_size, self.hidden_size)).to(self.device)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> h, c</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">forward</span>(<span class=\"params\">self, x_in</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> torch.isnan(x_in).<span class=\"built_in\">any</span>():</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;tensor contain nan&#x27;</span>)</span><br><span class=\"line\">        <span class=\"comment\"># 1D CNN feature extraction</span></span><br><span class=\"line\">        x = self.conv_block1(x_in)</span><br><span class=\"line\">        x = self.conv_block2(x)</span><br><span class=\"line\">        <span class=\"comment\"># Encoder</span></span><br><span class=\"line\">        hidden = x.permute(<span class=\"number\">0</span>, <span class=\"number\">2</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"comment\"># enc_hidden = self.init_hidden_state(hidden.shape[0])</span></span><br><span class=\"line\">        _, enc_hidden = self.encoder(hidden)</span><br><span class=\"line\">        <span class=\"comment\"># _, enc_hidden = self.encoder(hidden, enc_hidden)</span></span><br><span class=\"line\">        <span class=\"comment\"># Decoder</span></span><br><span class=\"line\">        dec_hidden = enc_hidden</span><br><span class=\"line\">        output = torch.zeros(hidden.shape).to(self.device)</span><br><span class=\"line\">        <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">reversed</span>(<span class=\"built_in\">range</span>(hidden.shape[<span class=\"number\">1</span>])):</span><br><span class=\"line\">            output[:, i, :] = self.output_layer(dec_hidden[<span class=\"number\">0</span>][<span class=\"number\">0</span>, :])</span><br><span class=\"line\">            <span class=\"keyword\">if</span> self.training:</span><br><span class=\"line\">                _, dec_hidden = self.decoder(hidden[:, i].unsqueeze(<span class=\"number\">1</span>).<span class=\"built_in\">float</span>(), dec_hidden)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                _, dec_hidden = self.decoder(output[:, i].unsqueeze(<span class=\"number\">1</span>), dec_hidden)</span><br><span class=\"line\">        hidden = hidden.reshape(hidden.size(<span class=\"number\">0</span>), -<span class=\"number\">1</span>)</span><br><span class=\"line\">        output = output.reshape(output.size(<span class=\"number\">0</span>), -<span class=\"number\">1</span>)</span><br><span class=\"line\">        project = self.projection_head(hidden)</span><br><span class=\"line\">        rec_project = self.projection_head(output)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> project, rec_project </span><br></pre></td></tr></table></figure>\n<h2 id=\"实验结果输出是什么\">实验结果输出是什么?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python  coca.py --device cuda</span><br><span class=\"line\">=============================================</span><br><span class=\"line\">Dataset: IOpsCompetition</span><br><span class=\"line\">Method:  COCA</span><br><span class=\"line\">=============================================</span><br><span class=\"line\">  <span class=\"number\">0</span>%|                                                                                                            | <span class=\"number\">0</span>/<span class=\"number\">29</span> [<span class=\"number\">00</span>:<span class=\"number\">00</span>&lt;?, ?it/s]0time series,kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">146255</span></span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">149130</span></span><br><span class=\"line\">Data loaded ...</span><br><span class=\"line\">Training started ....</span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">1</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">587.1270</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">115.9886</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">110.1476</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">2</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">2.5306</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.9269</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.9269</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">3</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.9320</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.7648</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.7649</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">4</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.7760</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.6570</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.6571</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">5</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.6353</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.4868</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.4911</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.267</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.124</span></span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.296</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.145</span></span><br><span class=\"line\">Valid affiliation-metrics</span><br><span class=\"line\">Test precision: <span class=\"number\">0.9883</span>  | \tTest recall: <span class=\"number\">0.4635</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RAP F1</span><br><span class=\"line\">Valid F1: <span class=\"number\">0.2857</span>  | \tValid precision: <span class=\"number\">0.3077</span>  | \tValid recall: <span class=\"number\">0.2667</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test affiliation-metrics</span><br><span class=\"line\">Test precision: <span class=\"number\">0.9235</span>  | \tTest recall: <span class=\"number\">0.5715</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RAP F1</span><br><span class=\"line\">Test F1: <span class=\"number\">0.3194</span>  | \tTest precision: <span class=\"number\">0.2805</span>  | \tTest recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br><span class=\"line\">********************************</span><br><span class=\"line\">INFO - Saving gif to /root/rumtime//img_1670811334<span class=\"number\">.373728</span>.png</span><br><span class=\"line\">  <span class=\"number\">3</span>%|███▎                                                                                             | <span class=\"number\">1</span>/<span class=\"number\">29</span> [08:<span class=\"number\">27</span>&lt;<span class=\"number\">3</span>:<span class=\"number\">56</span>:<span class=\"number\">40</span>, <span class=\"number\">507.15</span>s/it]1time series,kpi_id=05f10d3a-239c-3bef-9bdc-a2feeb0037aa</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">8784</span></span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">8784</span></span><br><span class=\"line\">Data loaded ...</span><br><span class=\"line\">Training started ....</span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">1</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">1527.4913</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">602.3031</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">625.7771</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">2</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">196.4226</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">2.7703</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">2.7703</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">3</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">2.8363</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">2.7490</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">2.7490</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">4</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">2.8169</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">2.7477</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">2.7476</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">5</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">2.8162</span>\t |</span><br><span class=\"line\">Valid Loss     : <span class=\"number\">2.7078</span>\t  |</span><br><span class=\"line\">Test Loss     : <span class=\"number\">2.7078</span>\t  |</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.115</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.001</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"跑完一个-COCA-看看结果\">跑完一个 COCA, 看看结果?</h2>\n<p>论文结果: 66.78±2.91<br>\n我跑出来的结果: 65.30</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.92778</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.50379</span></span><br><span class=\"line\"> f1:        <span class=\"number\">0.65300</span></span><br><span class=\"line\">Revised-point-adjusted metrics:</span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.24675</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.20459</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.31079</span></span><br><span class=\"line\">Point-adjusted metrics:</span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.51525</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.85390</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.36893</span></span><br><span class=\"line\">NAB Scores:</span><br><span class=\"line\"> NAB Score (balanced):       <span class=\"number\">0.29219</span></span><br><span class=\"line\"> NAB Score (high precision): <span class=\"number\">0.28211</span></span><br><span class=\"line\"> NAB Score (high recall):    <span class=\"number\">0.29839</span></span><br><span class=\"line\">seed: <span class=\"number\">2</span> </span><br><span class=\"line\">config setup:</span><br><span class=\"line\"></span><br><span class=\"line\">dataset:IOpsCompetition</span><br><span class=\"line\">input_channels:<span class=\"number\">1</span></span><br><span class=\"line\">kernel_size:<span class=\"number\">4</span></span><br><span class=\"line\">stride:<span class=\"number\">1</span></span><br><span class=\"line\">final_out_channels:<span class=\"number\">32</span></span><br><span class=\"line\">hidden_size:<span class=\"number\">64</span></span><br><span class=\"line\">num_layers:<span class=\"number\">3</span></span><br><span class=\"line\">project_channels:<span class=\"number\">20</span></span><br><span class=\"line\">dropout:<span class=\"number\">0.45</span></span><br><span class=\"line\">features_len:<span class=\"number\">6</span></span><br><span class=\"line\">window_size:<span class=\"number\">16</span></span><br><span class=\"line\">time_step:<span class=\"number\">2</span></span><br><span class=\"line\">num_epoch:<span class=\"number\">5</span></span><br><span class=\"line\">freeze_length_epoch:<span class=\"number\">2</span></span><br><span class=\"line\">change_center_epoch:<span class=\"number\">1</span></span><br><span class=\"line\">center_eps:<span class=\"number\">0.1</span></span><br><span class=\"line\">omega1:<span class=\"number\">1</span></span><br><span class=\"line\">omega2:<span class=\"number\">0.1</span></span><br><span class=\"line\">beta1:<span class=\"number\">0.9</span></span><br><span class=\"line\">beta2:<span class=\"number\">0.99</span></span><br><span class=\"line\">lr:<span class=\"number\">0.0001</span></span><br><span class=\"line\">drop_last:<span class=\"literal\">False</span></span><br><span class=\"line\">batch_size:<span class=\"number\">512</span></span><br><span class=\"line\">nu:<span class=\"number\">0.001</span></span><br><span class=\"line\">detect_nu:<span class=\"number\">0.0015</span></span><br><span class=\"line\">threshold_determine:floating</span><br><span class=\"line\">objective:soft-boundary</span><br><span class=\"line\">loss_type:distance</span><br><span class=\"line\">augmentation:&lt;conf.coca.IOpsCompetition_Configs.augmentations <span class=\"built_in\">object</span> at <span class=\"number\">0x7f2afb3fa370</span>&gt;</span><br><span class=\"line\">scale_ratio:<span class=\"number\">1.1</span></span><br><span class=\"line\">jitter_ratio:<span class=\"number\">0.1</span></span><br><span class=\"line\">Training time <span class=\"keyword\">is</span> : <span class=\"number\">3</span>:09:<span class=\"number\">46.206420</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"Time-Step-Ts-用来干嘛\">Time Step Ts 用来干嘛?</h2>\n<p>time step is the step while sliding, 实际是什么意思?</p>\n<h2 id=\"COCA-的超参数有哪些\">COCA 的超参数有哪些?</h2>\n<ul>\n<li><strong>repre channels</strong>: the dimension of the ﬁnal representations Z</li>\n<li><strong>hidden size</strong> is the dimension of the Seq2Seq in the model</li>\n<li><strong>project channels</strong> is the dimension of the projector</li>\n<li><strong>window size</strong> is the size of time window.</li>\n<li><strong>time step</strong> is the step while sliding.<br>\n<img src=\"/images/477f24a0d47507502f0dfc97355a94d92f735509.png\" alt=\"static/attachment/Pasted image 20221212161412.png\"></li>\n</ul>\n<h2 id=\"常见的性能评估指标\">常见的性能评估指标?</h2>\n<ul>\n<li>NAB Score</li>\n<li>Point-Adjusted (PA)</li>\n<li>Revised Point-Adjusted (RPA)</li>\n</ul>\n<h2 id=\"Center-是什么\">Center 是什么?</h2>\n<p>是一个 vector, (dim=20)<br>\n<img src=\"/images/6ada637a949cf249034ab68f78aed795e61af20b.png\" alt=\"static/attachment/Pasted image 20221212230925.png\"></p>\n<h2 id=\"model-train-的参数是些什么\">model_train 的参数是些什么?</h2>\n<p><code>def model_train(model, model_optimizer, train_loader, center, length, config, device, epoch):</code><br>\n<img src=\"/images/f5ebef5abe60bb2772d33dee08181a8149cb9fde.png\" alt=\"static/attachment/Pasted image 20221212231047.png\"></p>\n<h2 id=\"train-loader-中是些什么\">train_loader 中是些什么?</h2>\n<ul>\n<li>aug1 我猜是 jittering (noise addition)</li>\n<li>aug2 我猜是 scaling (pattern-wise magnitude change)<br>\n<img src=\"/images/c4b0621e622948b0f276c177681fc93042e22fba.png\" alt=\"static/attachment/Pasted image 20221212231235.png\"></li>\n</ul>\n<h2 id=\"Score-如何计算\">Score 如何计算?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">score = distance1 + distance_dec1 </span><br></pre></td></tr></table></figure>\n<h2 id=\"Distance-如何计算-包含哪些\">Distance 如何计算?包含哪些?</h2>\n<p>distance1 是 cosine_similarity</p>\n<ul>\n<li><code>feature1.shape=torch.Size([1536, 20])</code></li>\n<li><code>distance_dec1=center.shape=torch.Size([1, 20])</code></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">distance1 = F.cosine_similarity(feature1, center, eps=<span class=\"number\">1e-6</span>) </span><br><span class=\"line\">distance_dec1 = F.cosine_similarity(feature_dec1, center, eps=<span class=\"number\">1e-6</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"What-are-distance1-and-distance-dec1\">What are distance1 and distance_dec1?</h2>\n<ul>\n<li>distance1: feature1 与 center 的 cosine_similarity</li>\n<li>distance2: feature_dec1 与 center 的 cosine_similarity</li>\n</ul>\n<h2 id=\"feature-dec1-与-feature1-是什么\">feature_dec1 与 feature1 是什么?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">feature1=project <span class=\"comment\"># project: the project of hidden(representation) Z</span></span><br><span class=\"line\">feature_dec1=feature_dec1 <span class=\"comment\"># rec_project: the project of the output (reconstruction representation)</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>project(feature1) and rec_project(feature_dec1)</p>\n<p><img src=\"/images/00bf6b1d3993dfd678ac116ba75b5363f8901c01.png\" alt=\"static/attachment/Pasted image 20221213114728.png\"></p>\n<h2 id=\"score-是什么\">score 是什么?</h2>\n<p>score 是 distance1 and distance_dec1 的距离之和?</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">score = distance1 + distance_dec1</span><br></pre></td></tr></table></figure>\n<p>distance1 是 projector(representation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Z</mi></mrow><annotation encoding=\"application/x-tex\">Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span></span></span></span>) 与 center 的 cosine_similarity</p>\n<p>distance_dec1 是 projector(reconstruction representation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>z</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">z&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span>) 的 cosine_similarity</p>\n<p>projector 是:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.project = nn.Linear(self.final_out_channels * self.features_len, self.project_channels, bias=<span class=\"literal\">False</span>)</span><br><span class=\"line\">self.projection_head = nn.Sequential(</span><br><span class=\"line\">  nn.Linear(self.final_out_channels * self.features_len, self.final_out_channels * self.features_len // <span class=\"number\">2</span>),</span><br><span class=\"line\">  nn.BatchNorm1d(self.final_out_channels * self.features_len // <span class=\"number\">2</span>),</span><br><span class=\"line\">  nn.ReLU(inplace=<span class=\"literal\">True</span>),</span><br><span class=\"line\">  nn.Linear(self.final_out_channels * self.features_len // <span class=\"number\">2</span>, self.project_channels),</span><br><span class=\"line\">) </span><br></pre></td></tr></table></figure>\n<h2 id=\"Threshold-如何定\">Threshold 如何定?</h2>\n<p>按异常率指定:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">threshold = np.percentile(scores, <span class=\"number\">100</span>-detect_nu) </span><br></pre></td></tr></table></figure>\n<p><strong>detect_mu</strong> is a set in nu_list, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">nu_list</mi><mo>⁡</mo><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0.001</mn><mo separator=\"true\">,</mo><mn>0.3</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\operatorname{nu\\_list} \\in [0.001, 0.3]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0044em;vertical-align:-0.31em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">nu_list</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0.001</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0.3</span><span class=\"mclose\">]</span></span></span></span> :<img src=\"/images/87719b28415cdcff43416487c2813d47375a6961.png\" alt=\"static/attachment/Pasted image 20221213121235.png\"></p>\n<h2 id=\"单个-KPI-的-Affiliation-Metrix-如何计算\">单个 KPI 的 Affiliation Metrix 如何计算</h2>\n<ul>\n<li>固定异常率为 <code>self.detect_nu = 0.0005</code></li>\n</ul>\n<p>计算 <code>mu</code>:</p>\n<p><img src=\"/images/1a334b7c374f4d28bfb35f39ed5a141b5711586f.png\" alt=\"static/attachment/Pasted image 20221213120925.png\"></p>\n<h2 id=\"Affiliation-F1-是最优-F1-吗-类似于-AUC-的那种\">Affiliation-F1 是最优 F1 吗? 类似于 AUC 的那种</h2>\n<p>不是. Affiliation-F1 是 <code>score &gt; threshold</code> 生成的的一系列 0,1 计算出来的值. 计算方法:</p>\n<p><code>affiliation_f1 = 2 * (dic[&quot;precision&quot;] * dic[&quot;recall&quot;]) / (dic[&quot;precision&quot;] + dic[&quot;recall&quot;])</code></p>\n<h2 id=\"predict-是什么\">predict 是什么?</h2>\n<p>predict 是根据 threshold 定好的一个二分类的值: 0 或 1</p>\n<p><img src=\"/images/86992fa08b32b69f2d7deb9c16c686410a529d29.png\" alt=\"static/attachment/Pasted image 20221213171810.png\"></p>\n<h2 id=\"val-target-是什么\">val_target 是什么</h2>\n<p>应该是验证集的 标签 (label)</p>\n<h2 id=\"VAL-指的是什么\">VAL 指的是什么</h2>\n<p>val 指 valid, 如:</p>\n<ul>\n<li>val_loss 表示验证损失</li>\n</ul>\n<h2 id=\"ad-predict-在干什么\">ad_predict 在干什么</h2>\n<ul>\n<li>找出最大的 nu_max1</li>\n<li>找出最大的 nu_max2</li>\n</ul>\n<p>返回找到的最大 affiliation metric 的 (precision, recall) <img src=\"/images/b4ce19e68228c0f00f158e92e801a4e8f8718236.png\" alt=\"static/attachment/Pasted image 20221213174343.png\"></p>\n<h2 id=\"COCA-费时的地方\">COCA 费时的地方</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.267</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.124</span></span><br><span class=\"line\">---- 上一步到下一步之间很费时 ----</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.296</span></span><br><span class=\"line\">Best anomaly quantile: <span class=\"number\">0.145</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-中评估-DAGMM\">COCA 中评估 DAGMM</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python baseline.py  --dataset  IOpsCompetition --models  DAGMM</span><br><span class=\"line\">python baseline.py  --dataset  IOpsCompetition --models LSTMED</span><br><span class=\"line\">python baseline.py  --dataset  IOpsCompetition --models models.DeepSVDD:DeepSVDD</span><br></pre></td></tr></table></figure>\n<p>option</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--dataset <span class=\"string\">&#x27;MSL&#x27;</span>, <span class=\"string\">&#x27;UCR&#x27;</span>, <span class=\"string\">&#x27;IOpsCompetition&#x27;</span>, <span class=\"string\">&#x27;NAB&#x27;</span>, <span class=\"string\">&#x27;Synthetic&#x27;</span>, <span class=\"string\">&#x27;SMD&#x27;</span>, <span class=\"string\">&#x27;SMAP&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">--models <span class=\"string\">&#x27;DefaultDetector&#x27;</span>, <span class=\"string\">&#x27;DBL&#x27;</span>, <span class=\"string\">&#x27;DynamicBaseline&#x27;</span>, <span class=\"string\">&#x27;WindStats&#x27;</span>, <span class=\"string\">&#x27;RRCF&#x27;</span>, <span class=\"string\">&#x27;RandomCutForest&#x27;</span>, <span class=\"string\">&#x27;ISF&#x27;</span>, <span class=\"string\">&#x27;IsolationForest&#x27;</span>, <span class=\"string\">&#x27;Arima&#x27;</span>, <span class=\"string\">&#x27;ARIMA&#x27;</span>, <span class=\"string\">&#x27;ArimaDetector&#x27;</span>, <span class=\"string\">&#x27;HoltWinter&#x27;</span>, <span class=\"string\">&#x27;AdditiveHoltWinter&#x27;</span>, <span class=\"string\">&#x27;ETS&#x27;</span>, <span class=\"string\">&#x27;ETSDetector&#x27;</span>, <span class=\"string\">&#x27;Prophet&#x27;</span>, <span class=\"string\">&#x27;ProphetDetector&#x27;</span>, <span class=\"string\">&#x27;StatThreshold&#x27;</span>, <span class=\"string\">&#x27;SR&#x27;</span>, <span class=\"string\">&#x27;SpectralResidual&#x27;</span>, <span class=\"string\">&#x27;ZMS&#x27;</span>, <span class=\"string\">&#x27;AE&#x27;</span>, <span class=\"string\">&#x27;AutoEncoder&#x27;</span>, <span class=\"string\">&#x27;VariationalAutoEncoder&#x27;</span>, <span class=\"string\">&#x27;VAE&#x27;</span>, <span class=\"string\">&#x27;DeepGaussianMixture&#x27;</span>, <span class=\"string\">&#x27;DAGMM&#x27;</span>, <span class=\"string\">&#x27;LSTMEncoderDecoder&#x27;</span>, <span class=\"string\">&#x27;LSTMED&#x27;</span>, <span class=\"string\">&#x27;DeepSVDD&#x27;</span>, <span class=\"string\">&#x27;models.DeepSVDD:DeepSVDD&#x27;</span>, <span class=\"string\">&#x27;CPC&#x27;</span>, <span class=\"string\">&#x27;models.CPC:CPC&#x27;</span>, <span class=\"string\">&#x27;OCSVM&#x27;</span>, <span class=\"string\">&#x27;models.OCSVM:OCSVM&#x27;</span></span><br></pre></td></tr></table></figure>\n<p>baseline 训练日志</p>\n<p>![[static/attachment/baseline_20221214_154151.log]]</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Revised point-adjusted metrics</span><br><span class=\"line\">F1 score:  <span class=\"number\">0.1879</span></span><br><span class=\"line\">Precision: <span class=\"number\">0.1274</span></span><br><span class=\"line\">Recall:    <span class=\"number\">0.3578</span></span><br><span class=\"line\"></span><br><span class=\"line\">Mean Time To Detect Anomalies:  -<span class=\"number\">0</span> days <span class=\"number\">00</span>:<span class=\"number\">18</span>:03</span><br><span class=\"line\">Mean Detected Anomaly Duration: <span class=\"number\">0</span> days 01:<span class=\"number\">14</span>:04</span><br><span class=\"line\">Mean Anomaly Duration:          <span class=\"number\">0</span> days <span class=\"number\">00</span>:<span class=\"number\">41</span>:<span class=\"number\">38</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-中如何调用-DAGMM-计算-Affiliation-Metric\">COCA 中如何调用 DAGMM 计算 Affiliation Metric</h2>\n<p>在 <code>baseline.py</code> 中会写入文件 <code>./log.txt</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition Affiliation Metrics</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition  &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.41254758453288576</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.24370771196396945</span>&#125;</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition Affiliation Metrics</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition  &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.43984316475087665</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.23352023005803885</span>&#125;</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition Affiliation Metrics</span><br><span class=\"line\">[<span class=\"string\">&#x27;DAGMM&#x27;</span>] IOpsCompetition  &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.43201223250585297</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.24751992148434693</span>&#125; </span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th>Affiliation precision</th>\n<th>Affiliation recall</th>\n<th>Affiliation F1</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0.412547585</td>\n<td>0.243707712</td>\n<td>0.306408279</td>\n</tr>\n<tr>\n<td>0.439843165</td>\n<td>0.23352023</td>\n<td>0.305072351</td>\n</tr>\n<tr>\n<td>0.432012233</td>\n<td>0.247519921</td>\n<td>0.314721337</td>\n</tr>\n</tbody>\n</table>\n<p>原始论文:</p>\n<p><img src=\"/images/f19caf1299d1db71e9fe3c7589d16c801050ac6b.png\" alt=\"static/attachment/Pasted image 20221215083156.png\"></p>\n<p>结论:</p>\n<p>相差 4% 左右</p>\n<p><u></u>## 如何使用作者编写的 DeepSVDD 模型?</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python baseline.py  --dataset  IOpsCompetition --models models.DeepSVDD:DeepSVDD </span><br></pre></td></tr></table></figure>\n<h2 id=\"Affiliation-F1-如何计算\">Affiliation F1 如何计算</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0.0</span> <span class=\"keyword\">if</span> p == <span class=\"number\">0</span> <span class=\"keyword\">or</span> r == <span class=\"number\">0</span> <span class=\"keyword\">else</span> <span class=\"number\">2</span> * p * r / (p + r) </span><br></pre></td></tr></table></figure>\n<p>p: precision</p>\n<p>r: Recall</p>\n<h2 id=\"DeepSVDD-的结果\">DeepSVDD 的结果</h2>\n<p><mark>结论</mark>: 源代码运行结果 与 原文实验结果基本一致.</p>\n<p>源代码运行结果 (IOpsCompetition Affiliation Metrics):</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.4714819300747144</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.32748809986047706</span>, <span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.3865094199121414</span>&#125;</span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.4682508714752369</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.3339264963170998</span>, <span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.38984239443073504</span>&#125; </span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.4746654049791827</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.32840964548183676</span>, <span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.388219500237786</span>&#125;</span><br></pre></td></tr></table></figure>\n<p>源论文中的实验结果: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>37.58</mn><mo separator=\"true\">,</mo><mn>38.88</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[37.58, 38.88]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">37.58</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">38.88</span><span class=\"mclose\">]</span></span></span></span></p>\n<p><img src=\"/images/e796e8b06ad07e98f1d6db479bd4cdd35f66acb8.png\" alt=\"static/attachment/Pasted image 20221216075058.png\"></p>\n<h2 id=\"coca-debug-py-解析\">coca_debug.py 解析</h2>\n<h3 id=\"data-process\">data process</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train_data.shape=  ( <span class=\"number\">1</span>, <span class=\"number\">605</span>)</span><br><span class=\"line\">test_data.shape=( <span class=\"number\">1</span> , <span class=\"number\">3427</span>) </span><br><span class=\"line\">config:</span><br><span class=\"line\">\taugmentation = &#123;augmentations&#125; &lt;conf.coca.IOpsCompetition_Configs.augmentations&gt;</span><br><span class=\"line\">\tbatch_size = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">512</span></span><br><span class=\"line\">\tbeta1 = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.9</span></span><br><span class=\"line\">\tbeta2 = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.99</span></span><br><span class=\"line\">\tcenter_eps = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.1</span></span><br><span class=\"line\">\tchange_center_epoch = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">1</span></span><br><span class=\"line\">\tdataset = &#123;<span class=\"built_in\">str</span>&#125; <span class=\"string\">&#x27;IOpsCompetition&#x27;</span></span><br><span class=\"line\">\tdetect_nu = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.0015</span></span><br><span class=\"line\">\tdrop_last = &#123;<span class=\"built_in\">bool</span>&#125; <span class=\"literal\">False</span></span><br><span class=\"line\">\tdropout = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.45</span></span><br><span class=\"line\">\tfeatures_len = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">6</span></span><br><span class=\"line\">\tfinal_out_channels = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">32</span></span><br><span class=\"line\">\tfreeze_length_epoch = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">2</span></span><br><span class=\"line\">\thidden_size = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">64</span></span><br><span class=\"line\">\tinput_channels = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">1</span></span><br><span class=\"line\">\tkernel_size = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">4</span></span><br><span class=\"line\">\tloss_type = &#123;<span class=\"built_in\">str</span>&#125; <span class=\"string\">&#x27;distance&#x27;</span></span><br><span class=\"line\">\tlr = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.0001</span></span><br><span class=\"line\">\tnu = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.001</span></span><br><span class=\"line\">\tnum_epoch = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">5</span></span><br><span class=\"line\">\tnum_layers = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">3</span></span><br><span class=\"line\">\tobjective = &#123;<span class=\"built_in\">str</span>&#125; <span class=\"string\">&#x27;soft-boundary&#x27;</span></span><br><span class=\"line\">\tomega1 = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">1</span></span><br><span class=\"line\">\tomega2 = &#123;<span class=\"built_in\">float</span>&#125; <span class=\"number\">0.1</span></span><br><span class=\"line\">\tproject_channels = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">20</span></span><br><span class=\"line\">\tstride = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">1</span></span><br><span class=\"line\">\tthreshold_determine = &#123;<span class=\"built_in\">str</span>&#125; <span class=\"string\">&#x27;floating&#x27;</span></span><br><span class=\"line\">\ttime_step = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">2</span></span><br><span class=\"line\">\twindow_size = &#123;<span class=\"built_in\">int</span>&#125; <span class=\"number\">16</span></span><br><span class=\"line\">\tdata_generator4(train_data, test_data, train_labels,test_labels, configs)</span><br><span class=\"line\"></span><br><span class=\"line\">data_generator4</span><br><span class=\"line\"><span class=\"number\">1.</span> 使用所有数据的(训练集和测试集)均值和方差标准化数据集</span><br><span class=\"line\"><span class=\"number\">2.</span> 将训练集划分为训练集集和验证集(<span class=\"number\">8</span>:<span class=\"number\">2</span>)(train,val,test_data)</span><br><span class=\"line\"><span class=\"number\">3.</span> 将所有数据处理为窗口数据(time_step=<span class=\"number\">2</span>)</span><br><span class=\"line\">\t<span class=\"number\">1.</span> train_x.shape=(<span class=\"number\">236</span>, <span class=\"number\">1</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">\t<span class=\"number\">2.</span> val_x.shape=(<span class=\"number\">59</span>, <span class=\"number\">1</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\">\t<span class=\"number\">3.</span> test_x.shape=(<span class=\"number\">1706</span>, <span class=\"number\">1</span>, <span class=\"number\">16</span>)</span><br><span class=\"line\"><span class=\"number\">4.</span> 将训练集/测试集/验证集(train,test,val) 封装到<span class=\"built_in\">dict</span>中, 键名分别为 <span class=\"string\">&#x27;samples&#x27;</span>, `labels`</span><br><span class=\"line\"><span class=\"number\">5.</span> 数据增强(即 aug1,aug2)</span><br><span class=\"line\">\t<span class=\"number\">1.</span> weak_aug = scaling(sample, config.augmentation.scale_ratio)</span><br><span class=\"line\">\t<span class=\"number\">2.</span> strong_aug = jitter(sample, config.augmentation.jitter_ratio)</span><br><span class=\"line\"><span class=\"number\">6.</span> shuffle 训练集, 验证集和测试集不shuffle </span><br></pre></td></tr></table></figure>\n<h3 id=\"model-training\">model training</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> 初始化 center: torch.zeros(config.project_channels, device=device)</span><br><span class=\"line\"><span class=\"number\">2.</span> 初始化 length: length = torch.tensor(<span class=\"number\">0</span>, device=device)</span><br><span class=\"line\"><span class=\"number\">3.</span> 调用训练函数 model_train(): model_train(model, model_optimizer, train_dl, center,length, config, device, epoch)</span><br><span class=\"line\">\t<span class=\"number\">1.</span> 获取数据集: data, target, aug1, aug2</span><br><span class=\"line\">\t<span class=\"number\">2.</span> 拼接训练数据(原始数据+增强后的数据, 增强 weak_aug,strong_aug): all_data = torch.cat((data, aug1, aug2), dim=<span class=\"number\">0</span>)</span><br><span class=\"line\">\t<span class=\"number\">3.</span> 计算 z 和 output 的 project : feature1, feature_dec1 = model(all_data)</span><br><span class=\"line\">\t<span class=\"number\">4.</span> 计算损失和score,score= (z project 与 center 的 cosine_similarity + output(recon_x) project 与 center 的 cosine_similarity)</span><br><span class=\"line\">\t<span class=\"number\">5.</span> 重命名 score : predcit= score.detach().cpu().numpy()</span><br></pre></td></tr></table></figure>\n<h3 id=\"model-evaluate\">model evaluate</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> 计算 feature1, feature_dec1 =  model(data)</span><br><span class=\"line\"><span class=\"number\">2.</span> 计算 loss 和 score: loss, score = train(feature1, feature_dec1, center, length, epoch, config, device)</span><br><span class=\"line\"><span class=\"number\">3.</span> 重命名 score: predict=score.detach().cpu().numpy()</span><br><span class=\"line\"><span class=\"number\">4.</span> 计算 performance:</span><br><span class=\"line\">\t<span class=\"number\">1.</span> val_target, val_score_origin, val_loss, all_projection </span><br></pre></td></tr></table></figure>\n<h3 id=\"ad-predict\">ad_predict</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span> 调用 ad_predict(target, scores, mode, nu)</span><br><span class=\"line\">\t<span class=\"number\">1.</span> target: label</span><br><span class=\"line\">\t<span class=\"number\">2.</span> scores:  预测score</span><br><span class=\"line\">\t<span class=\"number\">3.</span> mode: <span class=\"built_in\">str</span>, floating</span><br><span class=\"line\">\t<span class=\"number\">4.</span> nu: <span class=\"number\">0.0015</span>, 用来干嘛</span><br></pre></td></tr></table></figure>\n<h2 id=\"all-target-all-predict-total-loss-all-projection-是什么\">all_target, all_predict, total_loss, all_projection 是什么?</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">all_target: 数据标签 label </span><br><span class=\"line\">all_predict: score, dist(project of z, center)+dist(project of output, center)</span><br><span class=\"line\">total_loss: 多个 batch_size 的loss的累加和</span><br><span class=\"line\">all_projection: project of z</span><br></pre></td></tr></table></figure>\n<h2 id=\"数据增强-scaling-jitter-实现\">数据增强 scaling,jitter 实现</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">scaling</span>(<span class=\"params\">x, sigma=<span class=\"number\">1.1</span></span>):</span><br><span class=\"line\">    <span class=\"comment\"># https://arxiv.org/pdf/1706.00527.pdf</span></span><br><span class=\"line\">    factor = np.random.normal(loc=<span class=\"number\">2.</span>, scale=sigma, size=(x.shape[<span class=\"number\">0</span>], x.shape[<span class=\"number\">2</span>]))</span><br><span class=\"line\">    ai = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(x.shape[<span class=\"number\">1</span>]):</span><br><span class=\"line\">        xi = x[:, i, :]</span><br><span class=\"line\">        ai.append(np.multiply(xi, factor[:, :])[:, np.newaxis, :])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> np.concatenate((ai), axis=<span class=\"number\">1</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">jitter</span>(<span class=\"params\">x, sigma=<span class=\"number\">0.8</span></span>):</span><br><span class=\"line\">    <span class=\"comment\"># https://arxiv.org/pdf/1706.00527.pdf</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + np.random.normal(loc=<span class=\"number\">0.</span>, scale=sigma, size=x.shape)</span><br></pre></td></tr></table></figure>\n<h2 id=\"score-是按-rolling-window-计算的还是按照-point-计算的\">## score 是按 rolling window 计算的还是按照 point 计算的?</h2>\n<p>按照窗口计算的, 每个窗口计算一个 score</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test_batch_data.shape=torch.Size([<span class=\"number\">59</span>, <span class=\"number\">1</span>, <span class=\"number\">16</span>])</span><br><span class=\"line\">feature1.shape=torch.Size([<span class=\"number\">59</span>, <span class=\"number\">20</span>])</span><br><span class=\"line\">feature_dec1.shape=torch.Size([<span class=\"number\">59</span>, <span class=\"number\">20</span>])</span><br><span class=\"line\">score.shape=<span class=\"number\">59</span>(每个窗口计算一个)</span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-的源码是按照-rolling-windows-计算-score-那么-如何映射到原始数据到一个点呢\">COCA 的源码是按照 rolling windows 计算 score, 那么, 如何映射到原始数据到一个点呢?</h2>\n<p>使用一个窗口代表当前数据点. 直接用窗口代替一个单独的数据点.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">time_series.shape=(<span class=\"number\">1</span>, <span class=\"number\">3427</span>)</span><br><span class=\"line\">score.shape= <span class=\"number\">3427</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"在计算-score-时-第一个窗口前数据不够如何处理\">在计算 score 时, 第一个窗口前数据不够如何处理</h2>\n<p>使用 score 的第一个值填充</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scores = np.zeros((X.shape[<span class=\"number\">0</span>],), dtype=<span class=\"built_in\">float</span>)</span><br><span class=\"line\">test_scores = np.<span class=\"built_in\">sum</span>(np.<span class=\"built_in\">abs</span>(r - y.cpu().data.numpy()), axis=<span class=\"number\">1</span>)</span><br><span class=\"line\">scores[self.k - <span class=\"number\">1</span> :] = test_scores</span><br><span class=\"line\">scores[: self.k - <span class=\"number\">1</span>] = test_scores[<span class=\"number\">0</span>] </span><br></pre></td></tr></table></figure>\n<h2 id=\"在-IOpsCompetition-的-05f10d3a-239c-3bef-9bdc-a2feeb0037aa-的训练结果\">在 IOpsCompetition 的 05f10d3a-239c-3bef-9bdc-a2feeb0037aa 的训练结果</h2>\n<p>原代码运行结果</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t train_data.shape:<span class=\"number\">146255</span>,test_data.shape:<span class=\"number\">149130</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">train: <span class=\"number\">58496</span>,valid:<span class=\"number\">14624</span>, test:<span class=\"number\">74558</span></span><br><span class=\"line\">Training started ....</span><br><span class=\"line\">INFO - Length:<span class=\"number\">0</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">1</span>, Train Loss: <span class=\"number\">396.1574</span>, Valid Loss: <span class=\"number\">115.7214</span>, Test Loss: <span class=\"number\">109.9165</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.4248124946355827</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">2</span>, Train Loss: <span class=\"number\">1.4987</span>, Valid Loss: <span class=\"number\">0.5217</span>, Test Loss: <span class=\"number\">0.5218</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.3707212271690369</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">3</span>, Train Loss: <span class=\"number\">0.5671</span>, Valid Loss: <span class=\"number\">0.4676</span>, Test Loss: <span class=\"number\">0.4677</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.2905264883637429</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">4</span>, Train Loss: <span class=\"number\">0.4960</span>, Valid Loss: <span class=\"number\">0.3880</span>, Test Loss: <span class=\"number\">0.3884</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.2738433243036271</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">5</span>, Train Loss: <span class=\"number\">0.4482</span>, Valid Loss: <span class=\"number\">0.3709</span>, Test Loss: <span class=\"number\">0.3710</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Start to evaluate! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Calculating validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.2520204081632653</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.9991141275746687</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7897834771523201</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.23977551020408164</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.7096774193548386</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.6875</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7333333333333333</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Calculating testing metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.301</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.8333357886680556</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7724293430234433</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.0683469387755102</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.42592592592592593</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.5</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.3709677419354839</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Valid affiliation precision: <span class=\"number\">0.9991</span></span><br><span class=\"line\">Valid affiliation recall: <span class=\"number\">0.7898</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RevisedPointAdjusted F1: <span class=\"number\">0.7097</span>  </span><br><span class=\"line\">Valid RevisedPointAdjusted precision: <span class=\"number\">0.6875</span> </span><br><span class=\"line\">Valid RevisedPointAdjusted recall: <span class=\"number\">0.7333</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Testing metric</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Test affiliation precision: <span class=\"number\">0.8333</span> </span><br><span class=\"line\">Test affiliation recall: <span class=\"number\">0.7724</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RevisedPointAdjusted F1: <span class=\"number\">0.4259</span></span><br><span class=\"line\">Test RevisedPointAdjusted precision: <span class=\"number\">0.5000</span></span><br><span class=\"line\">Test RevisedPointAdjusted recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Configuration of the model</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">dataset:IOpsCompetition</span><br><span class=\"line\">input_channels:<span class=\"number\">1</span></span><br><span class=\"line\">kernel_size:<span class=\"number\">4</span></span><br><span class=\"line\">stride:<span class=\"number\">1</span></span><br><span class=\"line\">final_out_channels:<span class=\"number\">32</span></span><br><span class=\"line\">hidden_size:<span class=\"number\">64</span></span><br><span class=\"line\">num_layers:<span class=\"number\">3</span></span><br><span class=\"line\">project_channels:<span class=\"number\">20</span></span><br><span class=\"line\">dropout:<span class=\"number\">0.45</span></span><br><span class=\"line\">features_len:<span class=\"number\">6</span></span><br><span class=\"line\">window_size:<span class=\"number\">16</span></span><br><span class=\"line\">time_step:<span class=\"number\">2</span></span><br><span class=\"line\">num_epoch:<span class=\"number\">5</span></span><br><span class=\"line\">freeze_length_epoch:<span class=\"number\">2</span></span><br><span class=\"line\">change_center_epoch:<span class=\"number\">1</span></span><br><span class=\"line\">center_eps:<span class=\"number\">0.1</span></span><br><span class=\"line\">omega1:<span class=\"number\">1</span></span><br><span class=\"line\">omega2:<span class=\"number\">0.1</span></span><br><span class=\"line\">beta1:<span class=\"number\">0.9</span></span><br><span class=\"line\">beta2:<span class=\"number\">0.99</span></span><br><span class=\"line\">lr:<span class=\"number\">0.0001</span></span><br><span class=\"line\">drop_last:<span class=\"literal\">False</span></span><br><span class=\"line\">batch_size:<span class=\"number\">512</span></span><br><span class=\"line\">nu:<span class=\"number\">0.001</span></span><br><span class=\"line\">detect_nu:<span class=\"number\">0.0015</span></span><br><span class=\"line\">threshold_determine:floating</span><br><span class=\"line\">objective:soft-boundary</span><br><span class=\"line\">loss_type:distance</span><br><span class=\"line\">augmentation:&lt;conf.coca.IOpsCompetition_Configs.augmentations <span class=\"built_in\">object</span> at <span class=\"number\">0x10143e700</span>&gt;</span><br><span class=\"line\">Training time: <span class=\"number\">257.978011</span></span><br></pre></td></tr></table></figure>\n<p>我的代码结果</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(sw_torch_1_10) sunwu@mac-m1 p1_ch05 % make test_aiops</span><br><span class=\"line\">python main_torch.py --dataset IOpsCompetition --data_id 05f10d3a-239c-3bef-9bdc-a2feeb0037aa --gpus <span class=\"number\">0</span></span><br><span class=\"line\">&lt;frozen importlib._bootstrap&gt;:<span class=\"number\">219</span>: RuntimeWarning: scipy._lib.messagestream.MessageStream size changed, may indicate binary incompatibility. Expected <span class=\"number\">56</span> <span class=\"keyword\">from</span> C header, got <span class=\"number\">64</span> <span class=\"keyword\">from</span> PyObject</span><br><span class=\"line\">INFO - Specified gpus: <span class=\"number\">0</span> </span><br><span class=\"line\">INFO - CUDA <span class=\"keyword\">is</span> <span class=\"keyword\">not</span> available, using GPU to work. </span><br><span class=\"line\">INFO - Target device: cpu </span><br><span class=\"line\">INFO - train: (<span class=\"number\">1</span>, <span class=\"number\">146255</span>), test: (<span class=\"number\">1</span>, <span class=\"number\">149130</span>) </span><br><span class=\"line\">INFO - train_loader.<span class=\"built_in\">len</span>=<span class=\"number\">58496</span>,val_loader:<span class=\"number\">14624</span>,test_loader=<span class=\"number\">74558</span> </span><br><span class=\"line\">INFO - Training started .... </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">1</span>, Train Loss: <span class=\"number\">396.1574</span>, Valid Loss: <span class=\"number\">115.7214</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.4676222130060199</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">2</span>, Train Loss: <span class=\"number\">1.4527</span>, Valid Loss: <span class=\"number\">0.5645</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.36364347952604353</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">3</span>, Train Loss: <span class=\"number\">0.5727</span>, Valid Loss: <span class=\"number\">0.4605</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.32340016061067595</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">4</span>, Train Loss: <span class=\"number\">0.5025</span>, Valid Loss: <span class=\"number\">0.4203</span> </span><br><span class=\"line\">INFO - Length:<span class=\"number\">0.26546983695030246</span> </span><br><span class=\"line\">INFO - Epoch: <span class=\"number\">5</span>, Train Loss: <span class=\"number\">0.4409</span>, Valid Loss: <span class=\"number\">0.3641</span> </span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========       Calculating validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.28875510204081634</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.9983926575606217</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.8555412157787603</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.2826326530612245</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.7058823529411765</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.631578947368421</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.8</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========       Calculating testing metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.2826326530612245</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.845356229045622</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7913941253003326</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.07446938775510203</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.4070796460176991</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.45098039215686275</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.3709677419354839</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========       Validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Valid affiliation precision: <span class=\"number\">0.9984</span></span><br><span class=\"line\">Valid affiliation recall: <span class=\"number\">0.8555</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RevisedPointAdjusted F1: <span class=\"number\">0.7059</span>  </span><br><span class=\"line\">Valid RevisedPointAdjusted precision: <span class=\"number\">0.6316</span> </span><br><span class=\"line\">Valid RevisedPointAdjusted recall: <span class=\"number\">0.8000</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========       Testing metric</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Test affiliation precision: <span class=\"number\">0.8454</span> </span><br><span class=\"line\">Test affiliation recall: <span class=\"number\">0.7914</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RevisedPointAdjusted F1: <span class=\"number\">0.4071</span></span><br><span class=\"line\">Test RevisedPointAdjusted precision: <span class=\"number\">0.4510</span></span><br><span class=\"line\">Test RevisedPointAdjusted recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"time-step-2-时-score-如何计算\">time_step =2 时, score 如何计算?</h2>\n<h2 id=\"同样的代码-为何执行结果不一致\">同样的代码, 为何执行结果不一致?</h2>\n<p>Q: 我将 COCA 封装为类, 在测试的时候, 出现如下神奇问题: 我的修改版本和 COCA 源代码中, 第一个执行结果的 epoch 的 loss 一致, 但是到第二个 epoch 以后, loss 就不一致了. 执行结果如下:</p>\n<ul>\n<li>\n<p>第一个 epoch, loss 一致 (左边表示 coca 的源代码输出日志, 右边表示我的修改版本输出日志)<img src=\"/images/a1eca7b2a04b83f569459e5be19e5e1d501ba561.png\" alt=\"static/attachment/Pasted image 20221222101010.png\"></p>\n</li>\n<li>\n<p>第二个 epoch 的 loss <u>不一致了</u> <img src=\"/images/0cbcacd8ee62ee0c50d3c6934afa402cadda2481.png\" alt=\"static/attachment/Pasted image 20221222100911.png\"></p>\n</li>\n</ul>\n<h3 id=\"结论\">结论</h3>\n<p>经过加班熬夜近 8 个小时,发现问题是: COCA 在训练的时候, 使用了测试集评估了模型, 而我没有: (左: 我的版本, 右: COCA 源码)</p>\n<p><img src=\"/images/aac3f753a34df8ae438f91a2690e018619dd7bc6.png\" alt=\"static/attachment/Pasted image 20221222102021.png\"></p>\n<p>当我吧上图中黄色注释掉之后, 两者运行结果完全一致.如下是 eopch =3 和 epoch=5 的快照, 可知两者完全一致.</p>\n<p><img src=\"/images/a4d3fdf4957cef7cf3bb12e7f8e8ac0c7f620df3.png\" alt=\"static/attachment/Pasted image 20221222102402.png\"></p>\n<p><img src=\"/images/15823f33dacbc6167202b406986639e89767154e.png\" alt=\"static/attachment/Pasted image 20221222102325.png\"></p>\n<p>如果加上测试集的评估代码, 结果又回到了不一样. 我取消了如下代码的注释</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># test_target, test_score_origin, test_loss, all_projection = model_evaluate(model, test_dl, center, length,</span></span><br><span class=\"line\"><span class=\"comment\">#                                                                            config, device, epoch) </span></span><br></pre></td></tr></table></figure>\n<p>重复执行结果又不同了</p>\n<p><img src=\"/images/e3a7ff82fce93e8f5235dbcac4bd167d537bb558.png\" alt=\"static/attachment/Pasted image 20221222102703.png\"></p>\n<p>那问题来了, 为什么训练的时候要使用测试集评估其性能呢? 去掉行不行?</p>\n<h3 id=\"论文问题-可能数据使用不当\">论文问题: 可能数据使用不当</h3>\n<p>COCA 在训练的时候, 让模型看到了测试集, 导致结果 COCA 的性能偏高</p>\n<p><img src=\"/images/e15f4946f025f21858959bec16073b32077dbd31.png\" alt=\"static/attachment/Pasted image 20221222104232.png\"></p>\n<h2 id=\"在训练期间使用-不使用测试集评估模型的影响\">在训练期间使用/不使用测试集评估模型的影响</h2>\n<p>结论: 有区别, 但是很小</p>\n<p>NAB 的数据集 1:</p>\n<p><img src=\"/images/7ec6d7fbaa4df7de5b8b75be102dd3ac5cddce65.png\" alt=\"static/attachment/Pasted image 20221222105911.png\"></p>\n<p>NAB 的数据集 2:</p>\n<p><img src=\"/images/9b67738bd58cd4fa3d5bc257d0377735e0b99d1c.png\" alt=\"static/attachment/Pasted image 20221222110007.png\"></p>\n<h2 id=\"AIOPS-的-05f10d3a-239c-3bef-9bdc-a2feeb0037aa-对比\">AIOPS 的 05f10d3a-239c-3bef-9bdc-a2feeb0037aa 对比</h2>\n<p>左: coca , 右: 我的实现</p>\n<p>结论: 性能指标差不多 (0.01, 证明我的实现 ok, 问题不大)</p>\n<p><img src=\"/images/1e42d7af05dbfab89643e9268b13d7bac4df9527.png\" alt=\"static/attachment/Pasted image 20221222111421.png\"></p>\n<h2 id=\"RuntimeError-mat1-and-mat2-shapes-cannot-be-multiplied-6x435-and-232x116\">RuntimeError: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)</h2>\n<p>The parameters when error occurs:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INFO - Load configuration <span class=\"keyword\">from</span> nni, loaded parameters: </span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;num_layers&#x27;</span>: <span class=\"number\">3.5879567896971647</span>, <span class=\"string\">&#x27;project_channels&#x27;</span>: <span class=\"number\">46.7047622771687</span>, <span class=\"string\">&#x27;dropout&#x27;</span>: <span class=\"number\">0.3002211281022341</span>, <span class=\"string\">&#x27;features_len&#x27;</span>: <span class=\"number\">8.300394615230376</span>, <span class=\"string\">&#x27;window_size&#x27;</span>: <span class=\"number\">53.69552169749169</span>, <span class=\"string\">&#x27;time_step&#x27;</span>: <span class=\"number\">4.514415263158897</span>, <span class=\"string\">&#x27;num_epoch&#x27;</span>: <span class=\"number\">7.697804748314586</span>, <span class=\"string\">&#x27;center_eps&#x27;</span>: <span class=\"number\">0.20709294499972672</span>, <span class=\"string\">&#x27;lr&#x27;</span>: <span class=\"number\">0.08785427712258059</span>, <span class=\"string\">&#x27;batch_size&#x27;</span>: <span class=\"number\">2.478578387644</span>, <span class=\"string\">&#x27;hidden_size&#x27;</span>: <span class=\"number\">190.4429211984154</span>, <span class=\"string\">&#x27;final_out_channels&#x27;</span>: <span class=\"number\">29.479373928427712</span>&#125; </span><br><span class=\"line\">INFO - Updating parameters num_layers           = <span class=\"number\">4</span> </span><br><span class=\"line\">INFO - Updating parameters project_channels     = <span class=\"number\">47</span> </span><br><span class=\"line\">INFO - Updating parameters dropout              = <span class=\"number\">0.3002211281022341</span> </span><br><span class=\"line\">INFO - Updating parameters features_len         = <span class=\"number\">8</span> </span><br><span class=\"line\">INFO - Updating parameters window_size          = <span class=\"number\">54</span> </span><br><span class=\"line\">INFO - Updating parameters time_step            = <span class=\"number\">5</span> </span><br><span class=\"line\">INFO - Updating parameters num_epoch            = <span class=\"number\">8</span> </span><br><span class=\"line\">INFO - Updating parameters center_eps           = <span class=\"number\">0.20709294499972672</span> </span><br><span class=\"line\">INFO - Updating parameters lr                   = <span class=\"number\">0.08785427712258059</span> </span><br><span class=\"line\">INFO - Updating parameters batch_size           = <span class=\"number\">2</span> </span><br><span class=\"line\">INFO - Updating parameters hidden_size          = <span class=\"number\">190</span> </span><br><span class=\"line\">INFO - Updating parameters final_out_channels   = <span class=\"number\">29</span> </span><br><span class=\"line\">INFO - The number of parameters updated:         <span class=\"number\">12</span>  </span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">all_data.shape=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">1</span>, <span class=\"number\">54</span>]) </span><br><span class=\"line\">x_in.shape=all_data=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">1</span>, <span class=\"number\">54</span>]) </span><br><span class=\"line\">x.shape=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">29</span>, <span class=\"number\">15</span>])</span><br><span class=\"line\">hidden.shape=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">15</span>, <span class=\"number\">29</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">....</span><br><span class=\"line\"></span><br><span class=\"line\">hidde.shape= torch.Size([<span class=\"number\">6</span>, <span class=\"number\">435</span>])</span><br><span class=\"line\">torch.nn.Linear.<span class=\"keyword\">in</span>=self.final_out_channels * self.features_len=<span class=\"number\">232</span></span><br><span class=\"line\"><span class=\"number\">54</span></span><br></pre></td></tr></table></figure>\n<p>关系: <code> self.final_out_channels * self.features_len=232</code> = <code>hidden.shape[1]</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.input_channels</span><br><span class=\"line\">self.final_out_channels </span><br><span class=\"line\"><span class=\"number\">53</span>: mat1 <span class=\"keyword\">and</span> mat2 shapes cannot be multiplied (6x435 <span class=\"keyword\">and</span> 232x116)</span><br><span class=\"line\"><span class=\"number\">16</span>: mat1 <span class=\"keyword\">and</span> mat2 shapes cannot be multiplied (6x174 <span class=\"keyword\">and</span> 232x116)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">window_size=<span class=\"number\">54</span></span><br><span class=\"line\">all_data=torch.Size([<span class=\"number\">6</span>, <span class=\"number\">1</span>, <span class=\"number\">54</span>]) </span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/053eb65a3953e5e9eb2dda772a4dd0c702afd5ca.png\" alt=\"Excalidraw/COCA源码分析 2022-12-23 14.56.42.excalidraw\"></p>\n<h3 id=\"修复代码\">修复代码</h3>\n<p>将 <code>project_input_features= self.final_out_channels * self.features_len</code> 修改为:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">l1_out_conv1d = get_l_out_of_max_pool_1d(self.window_size, kernel_size=self.kernel_size, stride=self.stride,</span><br><span class=\"line\">\t\t\t\t\t\t\t    padding=self.kernel_size // <span class=\"number\">2</span>)</span><br><span class=\"line\">l1_out_maxpool1d = get_l_out_of_max_pool_1d(l1_out_conv1d, kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">l2_out_conv1d = get_l_out_of_max_pool_1d(l1_out_maxpool1d, kernel_size=<span class=\"number\">8</span>, stride=<span class=\"number\">1</span>, padding=<span class=\"number\">4</span>)</span><br><span class=\"line\">l2_out = get_l_out_of_max_pool_1d(l2_out_conv1d, kernel_size=<span class=\"number\">2</span>, stride=<span class=\"number\">2</span>, padding=<span class=\"number\">1</span>)</span><br><span class=\"line\">project_input_features = self.final_out_channels * l2_out </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><code>get_l_out_of_max_pool_1d</code>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get_l_out_of_max_pool_1d</span>(<span class=\"params\">l_in, kernel_size, padding=<span class=\"number\">0</span>, dilation=<span class=\"number\">1</span>, stride=<span class=\"number\">1</span></span>):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    Get the L_out of MAXPOOL1D  https://pytorch.org/docs/stable/generated/torch.nn.MaxPool1d.html</span></span><br><span class=\"line\"><span class=\"string\">    or CONV1D https://pytorch.org/docs/stable/generated/torch.nn.Conv1d.html</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    l_in :</span></span><br><span class=\"line\"><span class=\"string\">    padding :</span></span><br><span class=\"line\"><span class=\"string\">    dilation :</span></span><br><span class=\"line\"><span class=\"string\">    kernel_size :</span></span><br><span class=\"line\"><span class=\"string\">    stride :</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returnsoc</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">int</span>(<span class=\"number\">1</span> + ((l_in + (<span class=\"number\">2</span> * padding) - dilation * (kernel_size - <span class=\"number\">1</span>) - <span class=\"number\">1</span>) / stride))</span><br></pre></td></tr></table></figure>\n<h2 id=\"NAB-测试结果\">NAB 测试结果</h2>\n<p>我封装的代码和 COCA 原始代码运行结果</p>\n<p><img src=\"/images/349241e4425a5abf17e3ceb1e21715854fa139a7.png\" alt=\"static/attachment/Pasted image 20221223204407.png\"></p>\n<p>第二个 EPOCH 不一致的原因是: COCA 在训练的时候使用了 test set.</p>\n<p><img src=\"/images/36c66f727541f20bfd022c1a05f1d3b74cbf2878.png\" alt=\"static/attachment/Pasted image 20221223204503.png\"></p>\n<p>代码重现:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make p_nab</span><br></pre></td></tr></table></figure>\n<p>or</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python /Users/sunwu/SW-Research/COCA-main/coca_debug.py  --dataset NAB  &gt;  /Users/sunwu/Desktop/text/coca_debug.txt <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span></span><br><span class=\"line\">python /Users/sunwu/SW-Research/p1_ch05/main_torch.py --dataset NAB  &gt; /Users/sunwu/Desktop/text/main_torch.txt  <span class=\"number\">2</span>&gt;&amp;<span class=\"number\">1</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-输入-出分析\">COCA 输入/出分析</h2>\n<p>目的: COCA 如何计算模型性能</p>\n<ul>\n<li>数据初试处理结果, 16 是 <strong>窗口大小</strong>:\n<ul>\n<li><code>train_dat_dict['samples'].shape=(236, 1, 16)</code></li>\n</ul>\n</li>\n<li>训练阶段 (<strong>59 是 batch_size, 16 是窗口大小</strong>):\n<ul>\n<li>验证数据: <code>torch.Size([59, 1, 16])</code></li>\n<li><code>feature1.shape=torch.Size([59, 20])</code></li>\n<li><code>feature_dec1.shape=torch.Size([59, 20])</code></li>\n<li><code>score=(59,)</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"结论-2\">结论</h3>\n<p>每个窗口计算一个 score?</p>\n<ul>\n<li>输入: batch window <code>torch.Size([59, 1, 16])</code></li>\n<li>输出: batch score <code>score=(59,)</code></li>\n</ul>\n<p>原文是嘛?</p>\n<h2 id=\"coca-中-time-step-为-2-时-如何计算-score\">coca 中 time_step 为 2 时, 如何计算 score?</h2>\n<p>![[时间序列(源于coca)中的 time step]]</p>\n"},{"title":"D1 - 实战1 理解HTML与CSS","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D1 - 实战1 理解HTML与CSS"],"_content":"\n## 项目内容\n\n使用 html 和 css 编写自己的一个介绍页\n\n## 包含的知识\n\nHTML 与 CSS\n\n内容要求  \n三条以上的个人信息\n\n- 颜色不一样\n- 字体大小不一样\n- 标签不一样\n\n## 目的\n\n清楚我们 **研究对象**。\n\n## 提交方式\n\n班级 + 学号 + 姓名  \n1_2019xxx_ 张三.html\n","source":"_posts/D1---实战1-理解HTML与CSS.md","raw":"---\ntitle: D1 - 实战1 理解HTML与CSS\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D1 - 实战1 理解HTML与CSS\n---\n\n## 项目内容\n\n使用 html 和 css 编写自己的一个介绍页\n\n## 包含的知识\n\nHTML 与 CSS\n\n内容要求  \n三条以上的个人信息\n\n- 颜色不一样\n- 字体大小不一样\n- 标签不一样\n\n## 目的\n\n清楚我们 **研究对象**。\n\n## 提交方式\n\n班级 + 学号 + 姓名  \n1_2019xxx_ 张三.html\n","slug":"D1---实战1-理解HTML与CSS","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709w002h4cv9fvfefnb8","content":"<h2 id=\"项目内容\">项目内容</h2>\n<p>使用 html 和 css 编写自己的一个介绍页</p>\n<h2 id=\"包含的知识\">包含的知识</h2>\n<p>HTML 与 CSS</p>\n<p>内容要求<br>\n三条以上的个人信息</p>\n<ul>\n<li>颜色不一样</li>\n<li>字体大小不一样</li>\n<li>标签不一样</li>\n</ul>\n<h2 id=\"目的\">目的</h2>\n<p>清楚我们 <strong>研究对象</strong>。</p>\n<h2 id=\"提交方式\">提交方式</h2>\n<p>班级 + 学号 + 姓名<br>\n1_2019xxx_ 张三.html</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover2.jpg","excerpt":"","more":"<h2 id=\"项目内容\">项目内容</h2>\n<p>使用 html 和 css 编写自己的一个介绍页</p>\n<h2 id=\"包含的知识\">包含的知识</h2>\n<p>HTML 与 CSS</p>\n<p>内容要求<br>\n三条以上的个人信息</p>\n<ul>\n<li>颜色不一样</li>\n<li>字体大小不一样</li>\n<li>标签不一样</li>\n</ul>\n<h2 id=\"目的\">目的</h2>\n<p>清楚我们 <strong>研究对象</strong>。</p>\n<h2 id=\"提交方式\">提交方式</h2>\n<p>班级 + 学号 + 姓名<br>\n1_2019xxx_ 张三.html</p>\n"},{"title":"D1 - 1.0 HTML 基础","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D1 - 1.0 HTML 基础"],"_content":"\n\n\n## Summary\n\n- <a href='{% post_path 1.1-网站到底是什么？ %}'>1.1-网站到底是什么？</a>\n- <a href='{% post_path 1.2-HTML是什么？ %}'>1.2-HTML是什么？</a>\n- <a href='{% post_path 1.3-HTML标签的语法格式 %}'>1.3-HTML标签的语法格式</a>\n- <a href='{% post_path 1.4-HTML属性的概念和使用 %}'>1.4-HTML属性的概念和使用</a>\n- <a href='{% post_path 1.6-HTML样式CSS %}'>1.6-HTML样式CSS</a>\n","source":"_posts/D1---1.0-HTML-基础.md","raw":"---\ntitle: D1 - 1.0 HTML 基础\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D1 - 1.0 HTML 基础\n---\n\n\n\n## Summary\n\n- <a href='{% post_path 1.1-网站到底是什么？ %}'>1.1-网站到底是什么？</a>\n- <a href='{% post_path 1.2-HTML是什么？ %}'>1.2-HTML是什么？</a>\n- <a href='{% post_path 1.3-HTML标签的语法格式 %}'>1.3-HTML标签的语法格式</a>\n- <a href='{% post_path 1.4-HTML属性的概念和使用 %}'>1.4-HTML属性的概念和使用</a>\n- <a href='{% post_path 1.6-HTML样式CSS %}'>1.6-HTML样式CSS</a>\n","slug":"D1---1.0-HTML-基础","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709x002k4cv925q8c38n","content":"<h2 id=\"Summary\">Summary</h2>\n<ul>\n<li><a href='/research/006ed3ef3761.html'>1.1-网站到底是什么？</a></li>\n<li><a href='/research/3a2f53ce4971.html'>1.2-HTML是什么？</a></li>\n<li><a href='/research/0ed2e26961ed.html'>1.3-HTML标签的语法格式</a></li>\n<li><a href='/research/d702ffdd60ef.html'>1.4-HTML属性的概念和使用</a></li>\n<li><a href='/research/5fde7cf781cc.html'>1.6-HTML样式CSS</a></li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<h2 id=\"Summary\">Summary</h2>\n<ul>\n<li><a href='/research/006ed3ef3761.html'>1.1-网站到底是什么？</a></li>\n<li><a href='/research/3a2f53ce4971.html'>1.2-HTML是什么？</a></li>\n<li><a href='/research/0ed2e26961ed.html'>1.3-HTML标签的语法格式</a></li>\n<li><a href='/research/d702ffdd60ef.html'>1.4-HTML属性的概念和使用</a></li>\n<li><a href='/research/5fde7cf781cc.html'>1.6-HTML样式CSS</a></li>\n</ul>\n"},{"title":"D1 - 实战2-Python 编码实现取网站数据并存储到数据库","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D1 - 实战2-Python 编码实现取网站数据并存储到数据库"],"_content":"\n## 项目内容\n\n爬取百度热搜的数据条目，并存储到数据库\n\n- Python\n- MySQL\n\n## 项目目标\n\n说明真的没必要一定要代码爬数据\n\nhttps://top.baidu.com/board?tab=realtime\n\n## 包含的知识\n\n- Python\n- BeautifulSoup\n- MySQL\n\n## 操作 步骤\n\n- 拉取百度热搜的数据\n\t- urllib\n\t- **requests**\n\t- 八爪鱼\n- 解析（解析需要的内容）（BeautifulSoup)\n\t- HTML——>DOM 文档树\n\t- 过滤器过滤指定的节点\n\t- 选择节点的内容\n- 保存数据库 (mysql-connector)\n\t- 连数据库\n\t- 建表\n\t- 构建 insert 语句\n\t- 执行语句\n\t- 关闭连接\n","source":"_posts/D1---实战2-Python-编码实现取网站数据并存储到数据库.md","raw":"---\ntitle: D1 - 实战2-Python 编码实现取网站数据并存储到数据库\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D1 - 实战2-Python 编码实现取网站数据并存储到数据库\n---\n\n## 项目内容\n\n爬取百度热搜的数据条目，并存储到数据库\n\n- Python\n- MySQL\n\n## 项目目标\n\n说明真的没必要一定要代码爬数据\n\nhttps://top.baidu.com/board?tab=realtime\n\n## 包含的知识\n\n- Python\n- BeautifulSoup\n- MySQL\n\n## 操作 步骤\n\n- 拉取百度热搜的数据\n\t- urllib\n\t- **requests**\n\t- 八爪鱼\n- 解析（解析需要的内容）（BeautifulSoup)\n\t- HTML——>DOM 文档树\n\t- 过滤器过滤指定的节点\n\t- 选择节点的内容\n- 保存数据库 (mysql-connector)\n\t- 连数据库\n\t- 建表\n\t- 构建 insert 语句\n\t- 执行语句\n\t- 关闭连接\n","slug":"D1---实战2-Python-编码实现取网站数据并存储到数据库","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709x002o4cv9an2ae8s6","content":"<h2 id=\"项目内容\">项目内容</h2>\n<p>爬取百度热搜的数据条目，并存储到数据库</p>\n<ul>\n<li>Python</li>\n<li>MySQL</li>\n</ul>\n<h2 id=\"项目目标\">项目目标</h2>\n<p>说明真的没必要一定要代码爬数据</p>\n<p><a href=\"https://top.baidu.com/board?tab=realtime\">https://top.baidu.com/board?tab=realtime</a></p>\n<h2 id=\"包含的知识\">包含的知识</h2>\n<ul>\n<li>Python</li>\n<li>BeautifulSoup</li>\n<li>MySQL</li>\n</ul>\n<h2 id=\"操作-步骤\">操作 步骤</h2>\n<ul>\n<li>拉取百度热搜的数据\n<ul>\n<li>urllib</li>\n<li><strong>requests</strong></li>\n<li>八爪鱼</li>\n</ul>\n</li>\n<li>解析（解析需要的内容）（BeautifulSoup)\n<ul>\n<li>HTML——&gt;DOM 文档树</li>\n<li>过滤器过滤指定的节点</li>\n<li>选择节点的内容</li>\n</ul>\n</li>\n<li>保存数据库 (mysql-connector)\n<ul>\n<li>连数据库</li>\n<li>建表</li>\n<li>构建 insert 语句</li>\n<li>执行语句</li>\n<li>关闭连接</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<h2 id=\"项目内容\">项目内容</h2>\n<p>爬取百度热搜的数据条目，并存储到数据库</p>\n<ul>\n<li>Python</li>\n<li>MySQL</li>\n</ul>\n<h2 id=\"项目目标\">项目目标</h2>\n<p>说明真的没必要一定要代码爬数据</p>\n<p><a href=\"https://top.baidu.com/board?tab=realtime\">https://top.baidu.com/board?tab=realtime</a></p>\n<h2 id=\"包含的知识\">包含的知识</h2>\n<ul>\n<li>Python</li>\n<li>BeautifulSoup</li>\n<li>MySQL</li>\n</ul>\n<h2 id=\"操作-步骤\">操作 步骤</h2>\n<ul>\n<li>拉取百度热搜的数据\n<ul>\n<li>urllib</li>\n<li><strong>requests</strong></li>\n<li>八爪鱼</li>\n</ul>\n</li>\n<li>解析（解析需要的内容）（BeautifulSoup)\n<ul>\n<li>HTML——&gt;DOM 文档树</li>\n<li>过滤器过滤指定的节点</li>\n<li>选择节点的内容</li>\n</ul>\n</li>\n<li>保存数据库 (mysql-connector)\n<ul>\n<li>连数据库</li>\n<li>建表</li>\n<li>构建 insert 语句</li>\n<li>执行语句</li>\n<li>关闭连接</li>\n</ul>\n</li>\n</ul>\n"},{"title":"2022-12-30 实验结果","share":true,"date":"2022-12-30T02:50:51.000Z","updated":"2022-12-30T06:19:44.000Z","_content":"## 摘要\n\n近两个月, 我总共进行了 3 组实验; 这些实验里面, 有的能够支撑预期结论 (简称 \" 成功 \" 的实验) , 有的则不能. 3 组实验的实验目的均相同, 实验目录请参考 <a href='{% post_path 2022-12-17-实验设计 %}#实验场景/方法/目标'>2022-12-17-实验设计#实验场景/方法/目标</a>, 这三组实验是:\n\n- <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>\n- <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>\n- <a href='{% post_path 2022-12-17-实验设计 %}'>2022-12-17-实验设计</a>\n\n🎯 为了分析那些 \" 能使实验达到预期 \" 的数据集, 我搜索了所有用过的数据集, 并用红底标出了 \" 成功 \" 的实验, 期望能够找到一些规律.\n\n## 数据集\n\n本章列出了我做过实验的数据集及其特征, 其中红色标出的数据集表示 \" 成功 \" 的实验.\n\n### ODDS 数据集\n\n在 ODDS 数据集中, 总共有 11 个数据集参与实验, 能够使实验达到预期结论的实验主要是 3 个数据集: Satellite/Thyroid/Mammography. 这三个数据集已在 [下表]( https://uniplore.feishu.cn/wiki/wikcnklrNgjCOqXhkMb1b8CtHur?sheet=UkzTIu) 中用红色背景标出:\n\n![static/attachment/Pasted image 20221230113039.png](/images/3b96f630db47c6ec3754a044bc68389345e79256.png)\n\n### AIOps 数据集\n\n对于 AIOps 数据集来说, 我的实验只在 [29 个数据集](https://uniplore.feishu.cn/wiki/wikcnklrNgjCOqXhkMb1b8CtHur?sheet=AD5yp0) 中选了四个来进行实验. 已选择的四个数据集及能够支撑我预期结论的数据集 (红色背景标出) 如下表所示:\n\n![static/attachment/Pasted image 20221230113756.png](/images/139e06d151e1f27f0fb900aba555fb73850c81ba.png)\n\n## 分析与结论\n\n在 ODDS 数据集上, 当维度偏低时 (dim=6) 时, 出现了两个 \" 成功 \" 的数据集 Thyroid/Mammography.\n\n其他还得不出什么结论.\n","source":"_posts/2022-12-30-实验结果.md","raw":"---\ntitle: 2022-12-30 实验结果\nshare: true\ntags:\n  - uncategory\ndate: 2022-12-30 10:50:51 \nupdated: 2022-12-30 14:19:44 \ncategories: research\n---\n## 摘要\n\n近两个月, 我总共进行了 3 组实验; 这些实验里面, 有的能够支撑预期结论 (简称 \" 成功 \" 的实验) , 有的则不能. 3 组实验的实验目的均相同, 实验目录请参考 <a href='{% post_path 2022-12-17-实验设计 %}#实验场景/方法/目标'>2022-12-17-实验设计#实验场景/方法/目标</a>, 这三组实验是:\n\n- <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>\n- <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>\n- <a href='{% post_path 2022-12-17-实验设计 %}'>2022-12-17-实验设计</a>\n\n🎯 为了分析那些 \" 能使实验达到预期 \" 的数据集, 我搜索了所有用过的数据集, 并用红底标出了 \" 成功 \" 的实验, 期望能够找到一些规律.\n\n## 数据集\n\n本章列出了我做过实验的数据集及其特征, 其中红色标出的数据集表示 \" 成功 \" 的实验.\n\n### ODDS 数据集\n\n在 ODDS 数据集中, 总共有 11 个数据集参与实验, 能够使实验达到预期结论的实验主要是 3 个数据集: Satellite/Thyroid/Mammography. 这三个数据集已在 [下表]( https://uniplore.feishu.cn/wiki/wikcnklrNgjCOqXhkMb1b8CtHur?sheet=UkzTIu) 中用红色背景标出:\n\n![static/attachment/Pasted image 20221230113039.png](/images/3b96f630db47c6ec3754a044bc68389345e79256.png)\n\n### AIOps 数据集\n\n对于 AIOps 数据集来说, 我的实验只在 [29 个数据集](https://uniplore.feishu.cn/wiki/wikcnklrNgjCOqXhkMb1b8CtHur?sheet=AD5yp0) 中选了四个来进行实验. 已选择的四个数据集及能够支撑我预期结论的数据集 (红色背景标出) 如下表所示:\n\n![static/attachment/Pasted image 20221230113756.png](/images/139e06d151e1f27f0fb900aba555fb73850c81ba.png)\n\n## 分析与结论\n\n在 ODDS 数据集上, 当维度偏低时 (dim=6) 时, 出现了两个 \" 成功 \" 的数据集 Thyroid/Mammography.\n\n其他还得不出什么结论.\n","slug":"2022-12-30-实验结果","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709y002r4cv9ccxo7lbb","content":"<h2 id=\"摘要\">摘要</h2>\n<p>近两个月, 我总共进行了 3 组实验; 这些实验里面, 有的能够支撑预期结论 (简称 &quot; 成功 &quot; 的实验) , 有的则不能. 3 组实验的实验目的均相同, 实验目录请参考 <a href='/research/b1ff1c2fb075.html#实验场景/方法/目标'>2022-12-17-实验设计#实验场景/方法/目标</a>, 这三组实验是:</p>\n<ul>\n<li><a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a></li>\n<li><a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a></li>\n<li><a href='/research/b1ff1c2fb075.html'>2022-12-17-实验设计</a></li>\n</ul>\n<p>🎯 为了分析那些 &quot; 能使实验达到预期 &quot; 的数据集, 我搜索了所有用过的数据集, 并用红底标出了 &quot; 成功 &quot; 的实验, 期望能够找到一些规律.</p>\n<h2 id=\"数据集\">数据集</h2>\n<p>本章列出了我做过实验的数据集及其特征, 其中红色标出的数据集表示 &quot; 成功 &quot; 的实验.</p>\n<h3 id=\"ODDS-数据集\">ODDS 数据集</h3>\n<p>在 ODDS 数据集中, 总共有 11 个数据集参与实验, 能够使实验达到预期结论的实验主要是 3 个数据集: Satellite/Thyroid/Mammography. 这三个数据集已在 <a href=\"https://uniplore.feishu.cn/wiki/wikcnklrNgjCOqXhkMb1b8CtHur?sheet=UkzTIu\">下表</a> 中用红色背景标出:</p>\n<p><img src=\"/images/3b96f630db47c6ec3754a044bc68389345e79256.png\" alt=\"static/attachment/Pasted image 20221230113039.png\"></p>\n<h3 id=\"AIOps-数据集\">AIOps 数据集</h3>\n<p>对于 AIOps 数据集来说, 我的实验只在 <a href=\"https://uniplore.feishu.cn/wiki/wikcnklrNgjCOqXhkMb1b8CtHur?sheet=AD5yp0\">29 个数据集</a> 中选了四个来进行实验. 已选择的四个数据集及能够支撑我预期结论的数据集 (红色背景标出) 如下表所示:</p>\n<p><img src=\"/images/139e06d151e1f27f0fb900aba555fb73850c81ba.png\" alt=\"static/attachment/Pasted image 20221230113756.png\"></p>\n<h2 id=\"分析与结论\">分析与结论</h2>\n<p>在 ODDS 数据集上, 当维度偏低时 (dim=6) 时, 出现了两个 &quot; 成功 &quot; 的数据集 Thyroid/Mammography.</p>\n<p>其他还得不出什么结论.</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover5.JPG","excerpt":"","more":"<h2 id=\"摘要\">摘要</h2>\n<p>近两个月, 我总共进行了 3 组实验; 这些实验里面, 有的能够支撑预期结论 (简称 &quot; 成功 &quot; 的实验) , 有的则不能. 3 组实验的实验目的均相同, 实验目录请参考 <a href='/research/b1ff1c2fb075.html#实验场景/方法/目标'>2022-12-17-实验设计#实验场景/方法/目标</a>, 这三组实验是:</p>\n<ul>\n<li><a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a></li>\n<li><a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a></li>\n<li><a href='/research/b1ff1c2fb075.html'>2022-12-17-实验设计</a></li>\n</ul>\n<p>🎯 为了分析那些 &quot; 能使实验达到预期 &quot; 的数据集, 我搜索了所有用过的数据集, 并用红底标出了 &quot; 成功 &quot; 的实验, 期望能够找到一些规律.</p>\n<h2 id=\"数据集\">数据集</h2>\n<p>本章列出了我做过实验的数据集及其特征, 其中红色标出的数据集表示 &quot; 成功 &quot; 的实验.</p>\n<h3 id=\"ODDS-数据集\">ODDS 数据集</h3>\n<p>在 ODDS 数据集中, 总共有 11 个数据集参与实验, 能够使实验达到预期结论的实验主要是 3 个数据集: Satellite/Thyroid/Mammography. 这三个数据集已在 <a href=\"https://uniplore.feishu.cn/wiki/wikcnklrNgjCOqXhkMb1b8CtHur?sheet=UkzTIu\">下表</a> 中用红色背景标出:</p>\n<p><img src=\"/images/3b96f630db47c6ec3754a044bc68389345e79256.png\" alt=\"static/attachment/Pasted image 20221230113039.png\"></p>\n<h3 id=\"AIOps-数据集\">AIOps 数据集</h3>\n<p>对于 AIOps 数据集来说, 我的实验只在 <a href=\"https://uniplore.feishu.cn/wiki/wikcnklrNgjCOqXhkMb1b8CtHur?sheet=AD5yp0\">29 个数据集</a> 中选了四个来进行实验. 已选择的四个数据集及能够支撑我预期结论的数据集 (红色背景标出) 如下表所示:</p>\n<p><img src=\"/images/139e06d151e1f27f0fb900aba555fb73850c81ba.png\" alt=\"static/attachment/Pasted image 20221230113756.png\"></p>\n<h2 id=\"分析与结论\">分析与结论</h2>\n<p>在 ODDS 数据集上, 当维度偏低时 (dim=6) 时, 出现了两个 &quot; 成功 &quot; 的数据集 Thyroid/Mammography.</p>\n<p>其他还得不出什么结论.</p>\n"},{"title":"D2- 2.1 ETL入门-相关概念","share":true,"date":"2022-06-27T15:58:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D2- 2.1 ETL入门-相关概念"],"_content":"\n## 事务系统和商业智能\n\n人们通常问的第一个问题是：\n\n**事务系统** 和 **商业智能** 有什么区别？\n\n- 事务系统，也被称为在线事务处理系统 (OnLine Transaction Processing，简称 OLTP)\n- 商业智能 (Business Intelligence，简称 BI)\n \n---\n\n### OLTP 和 BI 的差别和对比 -1\n\n数据的量不一样  \n![static/attachment/Pasted image 20220621182347.png](static/attachment/Pasted%20image%2020220621182347.png)  \n数据模型：用来描述数据、组织数据和对数据进行操作，是对现实世界数据特征的描述。\n\n---\n\n### OLTP 和 BI 的差别和对比 -2\n\n![static/attachment/Pasted image 20220621182516.png](static/attachment/Pasted%20image%2020220621182516.png)  \n![static/attachment/Pasted image 20220621182429.png](static/attachment/Pasted%20image%2020220621182429.png)\n\n---\n\n### 商业智能的基本需求\n\n![static/attachment/Pasted image 20220621192027.png](static/attachment/Pasted%20image%2020220621192027.png)\n\n切块：京东在 2020 年和 2021 年，家用电器和收集的销售量\n\n切片：京东在 2020 年，家用电器和收集的销售量\n\n---\n\n## ETL 是什么\n\n定义：\n\n将数据从 OLTP 系统（狭义）中转移到 数据仓库中的一系列操作的集合，即抽取、转换、加载。\n\n---\n\n### 数据源\n\n- OLTP 系统\n- 源于网站\n- 平面文件\n- 电子 邮件系统\n- 电子表单\n- Access\n- mysql\n---\n\n### 抽取\n\n一般抽取过程需要连接到不同的数据源，以便为随后 的步骤提供数据。这一部分看上去简单而琐碎，实际上它是 ETL 解决方案成功实施的一个主要障碍。\n\n数据源与抽取的关系？\n\n---\n\n### 转换\n\n在抽取和加载之间的，任何对数据的处理过程都是转换。这些处理过程通常包括 (但不限于) 下面一些操作。\n\n- 移动数据\n- 根据规则验证数据\n- 数据内容和数据结构的修改\n- 集成多个数据源的数据\n- 根据处理后的数据计算派生值和聚集值\n\n---\n\n### 加载\n\n将数据加载到目标系统的所有操作。\n\n---\n\n## ETL 与数据整合\n\nETL 是数据整合的实时手段\n\n---\n\n### 数据整合面临的挑战\n\n- 明确解决业务问题和发布企业 信息都需要哪些数据\n- 一个好的开发和交付实施 的方法\n\n引出了 敏捷开发\n\n---\n\n## 敏捷开发 - 4 条价值观\n\n敏捷宣言 中定义了敏捷方法的 4 条价值观：\n\n- 个体与交互胜过过程和工具\n- 可用的软件胜过完备的文档\n- 客户协作胜过合同谈判\n- 响应变化胜过遵循计划\n\n---\n\n### 敏捷开发 - 指导原则\n\n- 更早更快交付可用软件。\n- 欢迎需求的变更。\n- 业务人员和 IT 人员紧密地在一起工作。\n- 依赖于自驱动的开发者和自组织的团队。\n- 要经常面对面地讨论问题和过程。\n- 简捷，即尽最大可能减少不必要的工作。\n\n---\n\n### 敏捷开发与 ETL 的关系\n\n- UDI 提供的基本敏捷能力\n\t- 几分钟的时间就可以完成从创建数据源、创建转换、抽取数据，到加载数据到目的表的过程\n- 自动为你处理很多事情，这样可以加快 数据处理过程\n- 解决方案交付的速度最大化\n- 可视化的转换模型可以将你设计的转换直接展示给用户并以一种交互的方式进行数据处理\n- 开发人员和业务人员能使用同一个工具并紧密地在一起工作\n- 这样如果开发过程中设计的转换偏离了用户的期望，也可以被快速地更正过来。\n---\n\n## 数据仓库\n\n数据仓库是面向主题的、集成的、非易失的和时变的数据集合，用以支持管理决策。\n\n---\n\n### 数据仓库 - 面向主题\n\n主题是一个抽象的概念，是较高层次上企业信息系统中的数据综合、归类并进行分析利用的抽象。在逻辑意义上，它是对应企业中某一宏观分析领域所涉及的分析对象。\n\n---\n\n### 数据仓库 - 集成的\n\n- 统一源数据中所有矛盾之处（男/man)\n- 进行数据综合和计算\n\n---\n\n### 数据仓库 - 非易失的\n\n数据仓库的数据反映的是一段相当长的时间内历史数据的内容，是不同时点的数据库快照的集合，以及基于这些快照进行统计、综合和重组的导出数据。\n\n数据经加工和集成进入数据仓库后是极少更新的，通常只需要定期的加载和更新。\n\n---\n\n### 数据仓库 - 时变的\n\n当业务变化后，挖掘出的模式会失去时效性。因此数据仓库的数据需要更新，以适应决策的需要。\n\n---\n\n### 数据仓库的目的\n\n通过分析企业过去一段时间业务的经营状况，挖掘其中隐藏的模式。\n\n---\n\n### 数据仓库的架构示例\n\n![static/attachment/Pasted image 20220621195206.png](static/attachment/Pasted%20image%2020220621195206.png)\n\n---\n\n## 星型模型与雪花模型\n\n雪花型模型：当有一个或多个维表没有直接连接到事实表上，而是通过其他维表连接到事实表上时，其图解就像多个雪花连接在一起，故称雪花模型。\n\n星型模型：是一种多维的数据关系，它由一个事实表（Fact Table）和一组维表（Dimension Table）组成。\n\n![static/attachment/Pasted image 20220622073151.png](static/attachment/Pasted%20image%2020220622073151.png)\n\n---\n\n### 星型模型 与 雪花型模型\n\n- 查询性能（多个表联接，性能会低于）\n- 模型复杂度角度 (星型简单易处理）\n- 层次结构角度（雪花型架构贴近 OLTP 系统的结构，符合业务逻辑，层次清晰）\n- 存储角度（雪花型架构具有关系数据模型的所有优点，不会产生冗余数据）\n\n---\n\n### 事实表\n\n![static/attachment/Pasted image 20220622073703.png](static/attachment/Pasted%20image%2020220622073703.png)\n\n---\n\n## Tutorial\n\n使用 UDI 加载 OLTP 数据到星型模型，并输出到数据仓库\n","source":"_posts/D2--2.1-ETL入门-相关概念.md","raw":"---\ntitle: D2- 2.1 ETL入门-相关概念\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 23:58:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D2- 2.1 ETL入门-相关概念\n---\n\n## 事务系统和商业智能\n\n人们通常问的第一个问题是：\n\n**事务系统** 和 **商业智能** 有什么区别？\n\n- 事务系统，也被称为在线事务处理系统 (OnLine Transaction Processing，简称 OLTP)\n- 商业智能 (Business Intelligence，简称 BI)\n \n---\n\n### OLTP 和 BI 的差别和对比 -1\n\n数据的量不一样  \n![static/attachment/Pasted image 20220621182347.png](static/attachment/Pasted%20image%2020220621182347.png)  \n数据模型：用来描述数据、组织数据和对数据进行操作，是对现实世界数据特征的描述。\n\n---\n\n### OLTP 和 BI 的差别和对比 -2\n\n![static/attachment/Pasted image 20220621182516.png](static/attachment/Pasted%20image%2020220621182516.png)  \n![static/attachment/Pasted image 20220621182429.png](static/attachment/Pasted%20image%2020220621182429.png)\n\n---\n\n### 商业智能的基本需求\n\n![static/attachment/Pasted image 20220621192027.png](static/attachment/Pasted%20image%2020220621192027.png)\n\n切块：京东在 2020 年和 2021 年，家用电器和收集的销售量\n\n切片：京东在 2020 年，家用电器和收集的销售量\n\n---\n\n## ETL 是什么\n\n定义：\n\n将数据从 OLTP 系统（狭义）中转移到 数据仓库中的一系列操作的集合，即抽取、转换、加载。\n\n---\n\n### 数据源\n\n- OLTP 系统\n- 源于网站\n- 平面文件\n- 电子 邮件系统\n- 电子表单\n- Access\n- mysql\n---\n\n### 抽取\n\n一般抽取过程需要连接到不同的数据源，以便为随后 的步骤提供数据。这一部分看上去简单而琐碎，实际上它是 ETL 解决方案成功实施的一个主要障碍。\n\n数据源与抽取的关系？\n\n---\n\n### 转换\n\n在抽取和加载之间的，任何对数据的处理过程都是转换。这些处理过程通常包括 (但不限于) 下面一些操作。\n\n- 移动数据\n- 根据规则验证数据\n- 数据内容和数据结构的修改\n- 集成多个数据源的数据\n- 根据处理后的数据计算派生值和聚集值\n\n---\n\n### 加载\n\n将数据加载到目标系统的所有操作。\n\n---\n\n## ETL 与数据整合\n\nETL 是数据整合的实时手段\n\n---\n\n### 数据整合面临的挑战\n\n- 明确解决业务问题和发布企业 信息都需要哪些数据\n- 一个好的开发和交付实施 的方法\n\n引出了 敏捷开发\n\n---\n\n## 敏捷开发 - 4 条价值观\n\n敏捷宣言 中定义了敏捷方法的 4 条价值观：\n\n- 个体与交互胜过过程和工具\n- 可用的软件胜过完备的文档\n- 客户协作胜过合同谈判\n- 响应变化胜过遵循计划\n\n---\n\n### 敏捷开发 - 指导原则\n\n- 更早更快交付可用软件。\n- 欢迎需求的变更。\n- 业务人员和 IT 人员紧密地在一起工作。\n- 依赖于自驱动的开发者和自组织的团队。\n- 要经常面对面地讨论问题和过程。\n- 简捷，即尽最大可能减少不必要的工作。\n\n---\n\n### 敏捷开发与 ETL 的关系\n\n- UDI 提供的基本敏捷能力\n\t- 几分钟的时间就可以完成从创建数据源、创建转换、抽取数据，到加载数据到目的表的过程\n- 自动为你处理很多事情，这样可以加快 数据处理过程\n- 解决方案交付的速度最大化\n- 可视化的转换模型可以将你设计的转换直接展示给用户并以一种交互的方式进行数据处理\n- 开发人员和业务人员能使用同一个工具并紧密地在一起工作\n- 这样如果开发过程中设计的转换偏离了用户的期望，也可以被快速地更正过来。\n---\n\n## 数据仓库\n\n数据仓库是面向主题的、集成的、非易失的和时变的数据集合，用以支持管理决策。\n\n---\n\n### 数据仓库 - 面向主题\n\n主题是一个抽象的概念，是较高层次上企业信息系统中的数据综合、归类并进行分析利用的抽象。在逻辑意义上，它是对应企业中某一宏观分析领域所涉及的分析对象。\n\n---\n\n### 数据仓库 - 集成的\n\n- 统一源数据中所有矛盾之处（男/man)\n- 进行数据综合和计算\n\n---\n\n### 数据仓库 - 非易失的\n\n数据仓库的数据反映的是一段相当长的时间内历史数据的内容，是不同时点的数据库快照的集合，以及基于这些快照进行统计、综合和重组的导出数据。\n\n数据经加工和集成进入数据仓库后是极少更新的，通常只需要定期的加载和更新。\n\n---\n\n### 数据仓库 - 时变的\n\n当业务变化后，挖掘出的模式会失去时效性。因此数据仓库的数据需要更新，以适应决策的需要。\n\n---\n\n### 数据仓库的目的\n\n通过分析企业过去一段时间业务的经营状况，挖掘其中隐藏的模式。\n\n---\n\n### 数据仓库的架构示例\n\n![static/attachment/Pasted image 20220621195206.png](static/attachment/Pasted%20image%2020220621195206.png)\n\n---\n\n## 星型模型与雪花模型\n\n雪花型模型：当有一个或多个维表没有直接连接到事实表上，而是通过其他维表连接到事实表上时，其图解就像多个雪花连接在一起，故称雪花模型。\n\n星型模型：是一种多维的数据关系，它由一个事实表（Fact Table）和一组维表（Dimension Table）组成。\n\n![static/attachment/Pasted image 20220622073151.png](static/attachment/Pasted%20image%2020220622073151.png)\n\n---\n\n### 星型模型 与 雪花型模型\n\n- 查询性能（多个表联接，性能会低于）\n- 模型复杂度角度 (星型简单易处理）\n- 层次结构角度（雪花型架构贴近 OLTP 系统的结构，符合业务逻辑，层次清晰）\n- 存储角度（雪花型架构具有关系数据模型的所有优点，不会产生冗余数据）\n\n---\n\n### 事实表\n\n![static/attachment/Pasted image 20220622073703.png](static/attachment/Pasted%20image%2020220622073703.png)\n\n---\n\n## Tutorial\n\n使用 UDI 加载 OLTP 数据到星型模型，并输出到数据仓库\n","slug":"D2--2.1-ETL入门-相关概念","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709y002v4cv982fu9gih","content":"<h2 id=\"事务系统和商业智能\">事务系统和商业智能</h2>\n<p>人们通常问的第一个问题是：</p>\n<p><strong>事务系统</strong> 和 <strong>商业智能</strong> 有什么区别？</p>\n<ul>\n<li>事务系统，也被称为在线事务处理系统 (OnLine Transaction Processing，简称 OLTP)</li>\n<li>商业智能 (Business Intelligence，简称 BI)</li>\n</ul>\n<hr>\n<h3 id=\"OLTP-和-BI-的差别和对比-1\">OLTP 和 BI 的差别和对比 -1</h3>\n<p>数据的量不一样<br>\n<img src=\"static/attachment/Pasted%20image%2020220621182347.png\" alt=\"static/attachment/Pasted image 20220621182347.png\"><br>\n数据模型：用来描述数据、组织数据和对数据进行操作，是对现实世界数据特征的描述。</p>\n<hr>\n<h3 id=\"OLTP-和-BI-的差别和对比-2\">OLTP 和 BI 的差别和对比 -2</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220621182516.png\" alt=\"static/attachment/Pasted image 20220621182516.png\"><br>\n<img src=\"static/attachment/Pasted%20image%2020220621182429.png\" alt=\"static/attachment/Pasted image 20220621182429.png\"></p>\n<hr>\n<h3 id=\"商业智能的基本需求\">商业智能的基本需求</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220621192027.png\" alt=\"static/attachment/Pasted image 20220621192027.png\"></p>\n<p>切块：京东在 2020 年和 2021 年，家用电器和收集的销售量</p>\n<p>切片：京东在 2020 年，家用电器和收集的销售量</p>\n<hr>\n<h2 id=\"ETL-是什么\">ETL 是什么</h2>\n<p>定义：</p>\n<p>将数据从 OLTP 系统（狭义）中转移到 数据仓库中的一系列操作的集合，即抽取、转换、加载。</p>\n<hr>\n<h3 id=\"数据源\">数据源</h3>\n<ul>\n<li>OLTP 系统</li>\n<li>源于网站</li>\n<li>平面文件</li>\n<li>电子 邮件系统</li>\n<li>电子表单</li>\n<li>Access</li>\n<li>mysql</li>\n</ul>\n<hr>\n<h3 id=\"抽取\">抽取</h3>\n<p>一般抽取过程需要连接到不同的数据源，以便为随后 的步骤提供数据。这一部分看上去简单而琐碎，实际上它是 ETL 解决方案成功实施的一个主要障碍。</p>\n<p>数据源与抽取的关系？</p>\n<hr>\n<h3 id=\"转换\">转换</h3>\n<p>在抽取和加载之间的，任何对数据的处理过程都是转换。这些处理过程通常包括 (但不限于) 下面一些操作。</p>\n<ul>\n<li>移动数据</li>\n<li>根据规则验证数据</li>\n<li>数据内容和数据结构的修改</li>\n<li>集成多个数据源的数据</li>\n<li>根据处理后的数据计算派生值和聚集值</li>\n</ul>\n<hr>\n<h3 id=\"加载\">加载</h3>\n<p>将数据加载到目标系统的所有操作。</p>\n<hr>\n<h2 id=\"ETL-与数据整合\">ETL 与数据整合</h2>\n<p>ETL 是数据整合的实时手段</p>\n<hr>\n<h3 id=\"数据整合面临的挑战\">数据整合面临的挑战</h3>\n<ul>\n<li>明确解决业务问题和发布企业 信息都需要哪些数据</li>\n<li>一个好的开发和交付实施 的方法</li>\n</ul>\n<p>引出了 敏捷开发</p>\n<hr>\n<h2 id=\"敏捷开发-4-条价值观\">敏捷开发 - 4 条价值观</h2>\n<p>敏捷宣言 中定义了敏捷方法的 4 条价值观：</p>\n<ul>\n<li>个体与交互胜过过程和工具</li>\n<li>可用的软件胜过完备的文档</li>\n<li>客户协作胜过合同谈判</li>\n<li>响应变化胜过遵循计划</li>\n</ul>\n<hr>\n<h3 id=\"敏捷开发-指导原则\">敏捷开发 - 指导原则</h3>\n<ul>\n<li>更早更快交付可用软件。</li>\n<li>欢迎需求的变更。</li>\n<li>业务人员和 IT 人员紧密地在一起工作。</li>\n<li>依赖于自驱动的开发者和自组织的团队。</li>\n<li>要经常面对面地讨论问题和过程。</li>\n<li>简捷，即尽最大可能减少不必要的工作。</li>\n</ul>\n<hr>\n<h3 id=\"敏捷开发与-ETL-的关系\">敏捷开发与 ETL 的关系</h3>\n<ul>\n<li>UDI 提供的基本敏捷能力\n<ul>\n<li>几分钟的时间就可以完成从创建数据源、创建转换、抽取数据，到加载数据到目的表的过程</li>\n</ul>\n</li>\n<li>自动为你处理很多事情，这样可以加快 数据处理过程</li>\n<li>解决方案交付的速度最大化</li>\n<li>可视化的转换模型可以将你设计的转换直接展示给用户并以一种交互的方式进行数据处理</li>\n<li>开发人员和业务人员能使用同一个工具并紧密地在一起工作</li>\n<li>这样如果开发过程中设计的转换偏离了用户的期望，也可以被快速地更正过来。</li>\n</ul>\n<hr>\n<h2 id=\"数据仓库\">数据仓库</h2>\n<p>数据仓库是面向主题的、集成的、非易失的和时变的数据集合，用以支持管理决策。</p>\n<hr>\n<h3 id=\"数据仓库-面向主题\">数据仓库 - 面向主题</h3>\n<p>主题是一个抽象的概念，是较高层次上企业信息系统中的数据综合、归类并进行分析利用的抽象。在逻辑意义上，它是对应企业中某一宏观分析领域所涉及的分析对象。</p>\n<hr>\n<h3 id=\"数据仓库-集成的\">数据仓库 - 集成的</h3>\n<ul>\n<li>统一源数据中所有矛盾之处（男/man)</li>\n<li>进行数据综合和计算</li>\n</ul>\n<hr>\n<h3 id=\"数据仓库-非易失的\">数据仓库 - 非易失的</h3>\n<p>数据仓库的数据反映的是一段相当长的时间内历史数据的内容，是不同时点的数据库快照的集合，以及基于这些快照进行统计、综合和重组的导出数据。</p>\n<p>数据经加工和集成进入数据仓库后是极少更新的，通常只需要定期的加载和更新。</p>\n<hr>\n<h3 id=\"数据仓库-时变的\">数据仓库 - 时变的</h3>\n<p>当业务变化后，挖掘出的模式会失去时效性。因此数据仓库的数据需要更新，以适应决策的需要。</p>\n<hr>\n<h3 id=\"数据仓库的目的\">数据仓库的目的</h3>\n<p>通过分析企业过去一段时间业务的经营状况，挖掘其中隐藏的模式。</p>\n<hr>\n<h3 id=\"数据仓库的架构示例\">数据仓库的架构示例</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220621195206.png\" alt=\"static/attachment/Pasted image 20220621195206.png\"></p>\n<hr>\n<h2 id=\"星型模型与雪花模型\">星型模型与雪花模型</h2>\n<p>雪花型模型：当有一个或多个维表没有直接连接到事实表上，而是通过其他维表连接到事实表上时，其图解就像多个雪花连接在一起，故称雪花模型。</p>\n<p>星型模型：是一种多维的数据关系，它由一个事实表（Fact Table）和一组维表（Dimension Table）组成。</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220622073151.png\" alt=\"static/attachment/Pasted image 20220622073151.png\"></p>\n<hr>\n<h3 id=\"星型模型-与-雪花型模型\">星型模型 与 雪花型模型</h3>\n<ul>\n<li>查询性能（多个表联接，性能会低于）</li>\n<li>模型复杂度角度 (星型简单易处理）</li>\n<li>层次结构角度（雪花型架构贴近 OLTP 系统的结构，符合业务逻辑，层次清晰）</li>\n<li>存储角度（雪花型架构具有关系数据模型的所有优点，不会产生冗余数据）</li>\n</ul>\n<hr>\n<h3 id=\"事实表\">事实表</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220622073703.png\" alt=\"static/attachment/Pasted image 20220622073703.png\"></p>\n<hr>\n<h2 id=\"Tutorial\">Tutorial</h2>\n<p>使用 UDI 加载 OLTP 数据到星型模型，并输出到数据仓库</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<h2 id=\"事务系统和商业智能\">事务系统和商业智能</h2>\n<p>人们通常问的第一个问题是：</p>\n<p><strong>事务系统</strong> 和 <strong>商业智能</strong> 有什么区别？</p>\n<ul>\n<li>事务系统，也被称为在线事务处理系统 (OnLine Transaction Processing，简称 OLTP)</li>\n<li>商业智能 (Business Intelligence，简称 BI)</li>\n</ul>\n<hr>\n<h3 id=\"OLTP-和-BI-的差别和对比-1\">OLTP 和 BI 的差别和对比 -1</h3>\n<p>数据的量不一样<br>\n<img src=\"static/attachment/Pasted%20image%2020220621182347.png\" alt=\"static/attachment/Pasted image 20220621182347.png\"><br>\n数据模型：用来描述数据、组织数据和对数据进行操作，是对现实世界数据特征的描述。</p>\n<hr>\n<h3 id=\"OLTP-和-BI-的差别和对比-2\">OLTP 和 BI 的差别和对比 -2</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220621182516.png\" alt=\"static/attachment/Pasted image 20220621182516.png\"><br>\n<img src=\"static/attachment/Pasted%20image%2020220621182429.png\" alt=\"static/attachment/Pasted image 20220621182429.png\"></p>\n<hr>\n<h3 id=\"商业智能的基本需求\">商业智能的基本需求</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220621192027.png\" alt=\"static/attachment/Pasted image 20220621192027.png\"></p>\n<p>切块：京东在 2020 年和 2021 年，家用电器和收集的销售量</p>\n<p>切片：京东在 2020 年，家用电器和收集的销售量</p>\n<hr>\n<h2 id=\"ETL-是什么\">ETL 是什么</h2>\n<p>定义：</p>\n<p>将数据从 OLTP 系统（狭义）中转移到 数据仓库中的一系列操作的集合，即抽取、转换、加载。</p>\n<hr>\n<h3 id=\"数据源\">数据源</h3>\n<ul>\n<li>OLTP 系统</li>\n<li>源于网站</li>\n<li>平面文件</li>\n<li>电子 邮件系统</li>\n<li>电子表单</li>\n<li>Access</li>\n<li>mysql</li>\n</ul>\n<hr>\n<h3 id=\"抽取\">抽取</h3>\n<p>一般抽取过程需要连接到不同的数据源，以便为随后 的步骤提供数据。这一部分看上去简单而琐碎，实际上它是 ETL 解决方案成功实施的一个主要障碍。</p>\n<p>数据源与抽取的关系？</p>\n<hr>\n<h3 id=\"转换\">转换</h3>\n<p>在抽取和加载之间的，任何对数据的处理过程都是转换。这些处理过程通常包括 (但不限于) 下面一些操作。</p>\n<ul>\n<li>移动数据</li>\n<li>根据规则验证数据</li>\n<li>数据内容和数据结构的修改</li>\n<li>集成多个数据源的数据</li>\n<li>根据处理后的数据计算派生值和聚集值</li>\n</ul>\n<hr>\n<h3 id=\"加载\">加载</h3>\n<p>将数据加载到目标系统的所有操作。</p>\n<hr>\n<h2 id=\"ETL-与数据整合\">ETL 与数据整合</h2>\n<p>ETL 是数据整合的实时手段</p>\n<hr>\n<h3 id=\"数据整合面临的挑战\">数据整合面临的挑战</h3>\n<ul>\n<li>明确解决业务问题和发布企业 信息都需要哪些数据</li>\n<li>一个好的开发和交付实施 的方法</li>\n</ul>\n<p>引出了 敏捷开发</p>\n<hr>\n<h2 id=\"敏捷开发-4-条价值观\">敏捷开发 - 4 条价值观</h2>\n<p>敏捷宣言 中定义了敏捷方法的 4 条价值观：</p>\n<ul>\n<li>个体与交互胜过过程和工具</li>\n<li>可用的软件胜过完备的文档</li>\n<li>客户协作胜过合同谈判</li>\n<li>响应变化胜过遵循计划</li>\n</ul>\n<hr>\n<h3 id=\"敏捷开发-指导原则\">敏捷开发 - 指导原则</h3>\n<ul>\n<li>更早更快交付可用软件。</li>\n<li>欢迎需求的变更。</li>\n<li>业务人员和 IT 人员紧密地在一起工作。</li>\n<li>依赖于自驱动的开发者和自组织的团队。</li>\n<li>要经常面对面地讨论问题和过程。</li>\n<li>简捷，即尽最大可能减少不必要的工作。</li>\n</ul>\n<hr>\n<h3 id=\"敏捷开发与-ETL-的关系\">敏捷开发与 ETL 的关系</h3>\n<ul>\n<li>UDI 提供的基本敏捷能力\n<ul>\n<li>几分钟的时间就可以完成从创建数据源、创建转换、抽取数据，到加载数据到目的表的过程</li>\n</ul>\n</li>\n<li>自动为你处理很多事情，这样可以加快 数据处理过程</li>\n<li>解决方案交付的速度最大化</li>\n<li>可视化的转换模型可以将你设计的转换直接展示给用户并以一种交互的方式进行数据处理</li>\n<li>开发人员和业务人员能使用同一个工具并紧密地在一起工作</li>\n<li>这样如果开发过程中设计的转换偏离了用户的期望，也可以被快速地更正过来。</li>\n</ul>\n<hr>\n<h2 id=\"数据仓库\">数据仓库</h2>\n<p>数据仓库是面向主题的、集成的、非易失的和时变的数据集合，用以支持管理决策。</p>\n<hr>\n<h3 id=\"数据仓库-面向主题\">数据仓库 - 面向主题</h3>\n<p>主题是一个抽象的概念，是较高层次上企业信息系统中的数据综合、归类并进行分析利用的抽象。在逻辑意义上，它是对应企业中某一宏观分析领域所涉及的分析对象。</p>\n<hr>\n<h3 id=\"数据仓库-集成的\">数据仓库 - 集成的</h3>\n<ul>\n<li>统一源数据中所有矛盾之处（男/man)</li>\n<li>进行数据综合和计算</li>\n</ul>\n<hr>\n<h3 id=\"数据仓库-非易失的\">数据仓库 - 非易失的</h3>\n<p>数据仓库的数据反映的是一段相当长的时间内历史数据的内容，是不同时点的数据库快照的集合，以及基于这些快照进行统计、综合和重组的导出数据。</p>\n<p>数据经加工和集成进入数据仓库后是极少更新的，通常只需要定期的加载和更新。</p>\n<hr>\n<h3 id=\"数据仓库-时变的\">数据仓库 - 时变的</h3>\n<p>当业务变化后，挖掘出的模式会失去时效性。因此数据仓库的数据需要更新，以适应决策的需要。</p>\n<hr>\n<h3 id=\"数据仓库的目的\">数据仓库的目的</h3>\n<p>通过分析企业过去一段时间业务的经营状况，挖掘其中隐藏的模式。</p>\n<hr>\n<h3 id=\"数据仓库的架构示例\">数据仓库的架构示例</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220621195206.png\" alt=\"static/attachment/Pasted image 20220621195206.png\"></p>\n<hr>\n<h2 id=\"星型模型与雪花模型\">星型模型与雪花模型</h2>\n<p>雪花型模型：当有一个或多个维表没有直接连接到事实表上，而是通过其他维表连接到事实表上时，其图解就像多个雪花连接在一起，故称雪花模型。</p>\n<p>星型模型：是一种多维的数据关系，它由一个事实表（Fact Table）和一组维表（Dimension Table）组成。</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220622073151.png\" alt=\"static/attachment/Pasted image 20220622073151.png\"></p>\n<hr>\n<h3 id=\"星型模型-与-雪花型模型\">星型模型 与 雪花型模型</h3>\n<ul>\n<li>查询性能（多个表联接，性能会低于）</li>\n<li>模型复杂度角度 (星型简单易处理）</li>\n<li>层次结构角度（雪花型架构贴近 OLTP 系统的结构，符合业务逻辑，层次清晰）</li>\n<li>存储角度（雪花型架构具有关系数据模型的所有优点，不会产生冗余数据）</li>\n</ul>\n<hr>\n<h3 id=\"事实表\">事实表</h3>\n<p><img src=\"static/attachment/Pasted%20image%2020220622073703.png\" alt=\"static/attachment/Pasted image 20220622073703.png\"></p>\n<hr>\n<h2 id=\"Tutorial\">Tutorial</h2>\n<p>使用 UDI 加载 OLTP 数据到星型模型，并输出到数据仓库</p>\n"},{"title":"D1 - 实战3-八爪鱼爬取数据","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D1 - 实战3-八爪鱼爬取数据"],"_content":"\n## 项目内容\n\n八爪鱼代替脚本抓取百度热搜数据\n\n## 项目 2- 软件抓取\n\n项目 2：可视化百度热搜\n\n主要内容：\n\n  - 八爪鱼获取网页数据内容\n  - UDI 处理数据\n  - VA 分析数据\n","source":"_posts/D1---实战3-八爪鱼爬取数据.md","raw":"---\ntitle: D1 - 实战3-八爪鱼爬取数据\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D1 - 实战3-八爪鱼爬取数据\n---\n\n## 项目内容\n\n八爪鱼代替脚本抓取百度热搜数据\n\n## 项目 2- 软件抓取\n\n项目 2：可视化百度热搜\n\n主要内容：\n\n  - 八爪鱼获取网页数据内容\n  - UDI 处理数据\n  - VA 分析数据\n","slug":"D1---实战3-八爪鱼爬取数据","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim709z002y4cv9e3ee6gth","content":"<h2 id=\"项目内容\">项目内容</h2>\n<p>八爪鱼代替脚本抓取百度热搜数据</p>\n<h2 id=\"项目-2-软件抓取\">项目 2- 软件抓取</h2>\n<p>项目 2：可视化百度热搜</p>\n<p>主要内容：</p>\n<ul>\n<li>八爪鱼获取网页数据内容</li>\n<li>UDI 处理数据</li>\n<li>VA 分析数据</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<h2 id=\"项目内容\">项目内容</h2>\n<p>八爪鱼代替脚本抓取百度热搜数据</p>\n<h2 id=\"项目-2-软件抓取\">项目 2- 软件抓取</h2>\n<p>项目 2：可视化百度热搜</p>\n<p>主要内容：</p>\n<ul>\n<li>八爪鱼获取网页数据内容</li>\n<li>UDI 处理数据</li>\n<li>VA 分析数据</li>\n</ul>\n"},{"title":"D3- 3.1 可视化入门-相关概念","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D3- 3.1 可视化入门-相关概念"],"_content":"\nhttps://uniplore.feishu.cn/file/boxcnbBk5O2PThBtMwYUYg4QyWd\n","source":"_posts/D3--3.1-可视化入门-相关概念.md","raw":"---\ntitle: D3- 3.1 可视化入门-相关概念\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D3- 3.1 可视化入门-相关概念\n---\n\nhttps://uniplore.feishu.cn/file/boxcnbBk5O2PThBtMwYUYg4QyWd\n","slug":"D3--3.1-可视化入门-相关概念","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a000324cv9fayt33fs","content":"<p><a href=\"https://uniplore.feishu.cn/file/boxcnbBk5O2PThBtMwYUYg4QyWd\">https://uniplore.feishu.cn/file/boxcnbBk5O2PThBtMwYUYg4QyWd</a></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover7.JPG","excerpt":"","more":"<p><a href=\"https://uniplore.feishu.cn/file/boxcnbBk5O2PThBtMwYUYg4QyWd\">https://uniplore.feishu.cn/file/boxcnbBk5O2PThBtMwYUYg4QyWd</a></p>\n"},{"title":"D2- 实战4 - UDI HelloWorld 之 UDI 抽取、转换和加载 OLTP 数据","share":true,"date":"2022-06-27T15:50:57.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D2- 实战4 - UDI HelloWorld 之 UDI 抽取、转换和加载 OLTP 数据"],"_content":"\n## 实验目标\n\n通过加载两个 OLTP 数据表到数据仓库，直观：\n\n- 感受 ETL 流程。\n- OLAT 与 OLTP 的区别\n\n## 实验需求\n\n将用户表与订单表，通过抽取、转换、加载的步骤，将数据加载到用户 - 订单表。\n\n## OLTP 数据\n\nOLTP 数据包含两个表，分别为用户表和订单表。\n\n### 用户表\n\n```python\n用户ID, 用户姓名\nid,name\n001, 张三\n002，李四\n003，王五\n```\n\n### 订单表\n\n```python\n用户id，购买日期，购买商品，商品类别，价格\nid,date,product_name,type,price\n001,2022/01/01,MAC M1 16g,电子产品\n001,2021/02/09,手电筒,家用电器\n002,2021/04/09,手电筒,家用电器\n002,2021/04/09,笔记本,家用电器\n```\n\n## 实验步骤\n\n- 准备\n\t- 创建数据库\n\t- 导入用户表\n\t- 导入订单表\n- 实验目标分析\n\t- 按日期主题，统计每月的收入\n- 建立数据仓库\n\t- 月份主题\n\t- 月份、收入\n- 数据抽取\n\t- 连接数据\n\t- 读取用户数据和订单数据\n- 数据转换\n\t- 连接用户信息与订单信息\n- 数据加载\n\t- 加载数据到数据仓库\n- 数据可视化\n\t- 按日期主题，统计每月的收入\n\n## 数据库分配\n\n两个组一个数据库。\n\n![static/attachment/Pasted image 20220622071838.png](static/attachment/Pasted%20image%2020220622071838.png)\n","source":"_posts/D2--实战4---UDI-HelloWorld-之-UDI-抽取、转换和加载-OLTP-数据.md","raw":"---\ntitle: D2- 实战4 - UDI HelloWorld 之 UDI 抽取、转换和加载 OLTP 数据\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 23:50:57 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D2- 实战4 - UDI HelloWorld 之 UDI 抽取、转换和加载 OLTP 数据\n---\n\n## 实验目标\n\n通过加载两个 OLTP 数据表到数据仓库，直观：\n\n- 感受 ETL 流程。\n- OLAT 与 OLTP 的区别\n\n## 实验需求\n\n将用户表与订单表，通过抽取、转换、加载的步骤，将数据加载到用户 - 订单表。\n\n## OLTP 数据\n\nOLTP 数据包含两个表，分别为用户表和订单表。\n\n### 用户表\n\n```python\n用户ID, 用户姓名\nid,name\n001, 张三\n002，李四\n003，王五\n```\n\n### 订单表\n\n```python\n用户id，购买日期，购买商品，商品类别，价格\nid,date,product_name,type,price\n001,2022/01/01,MAC M1 16g,电子产品\n001,2021/02/09,手电筒,家用电器\n002,2021/04/09,手电筒,家用电器\n002,2021/04/09,笔记本,家用电器\n```\n\n## 实验步骤\n\n- 准备\n\t- 创建数据库\n\t- 导入用户表\n\t- 导入订单表\n- 实验目标分析\n\t- 按日期主题，统计每月的收入\n- 建立数据仓库\n\t- 月份主题\n\t- 月份、收入\n- 数据抽取\n\t- 连接数据\n\t- 读取用户数据和订单数据\n- 数据转换\n\t- 连接用户信息与订单信息\n- 数据加载\n\t- 加载数据到数据仓库\n- 数据可视化\n\t- 按日期主题，统计每月的收入\n\n## 数据库分配\n\n两个组一个数据库。\n\n![static/attachment/Pasted image 20220622071838.png](static/attachment/Pasted%20image%2020220622071838.png)\n","slug":"D2--实战4---UDI-HelloWorld-之-UDI-抽取、转换和加载-OLTP-数据","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a000354cv9c21d11rj","content":"<h2 id=\"实验目标\">实验目标</h2>\n<p>通过加载两个 OLTP 数据表到数据仓库，直观：</p>\n<ul>\n<li>感受 ETL 流程。</li>\n<li>OLAT 与 OLTP 的区别</li>\n</ul>\n<h2 id=\"实验需求\">实验需求</h2>\n<p>将用户表与订单表，通过抽取、转换、加载的步骤，将数据加载到用户 - 订单表。</p>\n<h2 id=\"OLTP-数据\">OLTP 数据</h2>\n<p>OLTP 数据包含两个表，分别为用户表和订单表。</p>\n<h3 id=\"用户表\">用户表</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用户ID, 用户姓名</span><br><span class=\"line\"><span class=\"built_in\">id</span>,name</span><br><span class=\"line\">001, 张三</span><br><span class=\"line\">002，李四</span><br><span class=\"line\">003，王五</span><br></pre></td></tr></table></figure>\n<h3 id=\"订单表\">订单表</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用户<span class=\"built_in\">id</span>，购买日期，购买商品，商品类别，价格</span><br><span class=\"line\"><span class=\"built_in\">id</span>,date,product_name,<span class=\"built_in\">type</span>,price</span><br><span class=\"line\">001,<span class=\"number\">2022</span>/01/01,MAC M1 16g,电子产品</span><br><span class=\"line\">001,<span class=\"number\">2021</span>/02/09,手电筒,家用电器</span><br><span class=\"line\">002,<span class=\"number\">2021</span>/04/09,手电筒,家用电器</span><br><span class=\"line\">002,<span class=\"number\">2021</span>/04/09,笔记本,家用电器</span><br></pre></td></tr></table></figure>\n<h2 id=\"实验步骤\">实验步骤</h2>\n<ul>\n<li>准备\n<ul>\n<li>创建数据库</li>\n<li>导入用户表</li>\n<li>导入订单表</li>\n</ul>\n</li>\n<li>实验目标分析\n<ul>\n<li>按日期主题，统计每月的收入</li>\n</ul>\n</li>\n<li>建立数据仓库\n<ul>\n<li>月份主题</li>\n<li>月份、收入</li>\n</ul>\n</li>\n<li>数据抽取\n<ul>\n<li>连接数据</li>\n<li>读取用户数据和订单数据</li>\n</ul>\n</li>\n<li>数据转换\n<ul>\n<li>连接用户信息与订单信息</li>\n</ul>\n</li>\n<li>数据加载\n<ul>\n<li>加载数据到数据仓库</li>\n</ul>\n</li>\n<li>数据可视化\n<ul>\n<li>按日期主题，统计每月的收入</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"数据库分配\">数据库分配</h2>\n<p>两个组一个数据库。</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220622071838.png\" alt=\"static/attachment/Pasted image 20220622071838.png\"></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover8.JPG","excerpt":"","more":"<h2 id=\"实验目标\">实验目标</h2>\n<p>通过加载两个 OLTP 数据表到数据仓库，直观：</p>\n<ul>\n<li>感受 ETL 流程。</li>\n<li>OLAT 与 OLTP 的区别</li>\n</ul>\n<h2 id=\"实验需求\">实验需求</h2>\n<p>将用户表与订单表，通过抽取、转换、加载的步骤，将数据加载到用户 - 订单表。</p>\n<h2 id=\"OLTP-数据\">OLTP 数据</h2>\n<p>OLTP 数据包含两个表，分别为用户表和订单表。</p>\n<h3 id=\"用户表\">用户表</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用户ID, 用户姓名</span><br><span class=\"line\"><span class=\"built_in\">id</span>,name</span><br><span class=\"line\">001, 张三</span><br><span class=\"line\">002，李四</span><br><span class=\"line\">003，王五</span><br></pre></td></tr></table></figure>\n<h3 id=\"订单表\">订单表</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">用户<span class=\"built_in\">id</span>，购买日期，购买商品，商品类别，价格</span><br><span class=\"line\"><span class=\"built_in\">id</span>,date,product_name,<span class=\"built_in\">type</span>,price</span><br><span class=\"line\">001,<span class=\"number\">2022</span>/01/01,MAC M1 16g,电子产品</span><br><span class=\"line\">001,<span class=\"number\">2021</span>/02/09,手电筒,家用电器</span><br><span class=\"line\">002,<span class=\"number\">2021</span>/04/09,手电筒,家用电器</span><br><span class=\"line\">002,<span class=\"number\">2021</span>/04/09,笔记本,家用电器</span><br></pre></td></tr></table></figure>\n<h2 id=\"实验步骤\">实验步骤</h2>\n<ul>\n<li>准备\n<ul>\n<li>创建数据库</li>\n<li>导入用户表</li>\n<li>导入订单表</li>\n</ul>\n</li>\n<li>实验目标分析\n<ul>\n<li>按日期主题，统计每月的收入</li>\n</ul>\n</li>\n<li>建立数据仓库\n<ul>\n<li>月份主题</li>\n<li>月份、收入</li>\n</ul>\n</li>\n<li>数据抽取\n<ul>\n<li>连接数据</li>\n<li>读取用户数据和订单数据</li>\n</ul>\n</li>\n<li>数据转换\n<ul>\n<li>连接用户信息与订单信息</li>\n</ul>\n</li>\n<li>数据加载\n<ul>\n<li>加载数据到数据仓库</li>\n</ul>\n</li>\n<li>数据可视化\n<ul>\n<li>按日期主题，统计每月的收入</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"数据库分配\">数据库分配</h2>\n<p>两个组一个数据库。</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220622071838.png\" alt=\"static/attachment/Pasted image 20220622071838.png\"></p>\n"},{"title":"D3- 3.2 综合实战- 7000 条租房数据处理与分析大屏","share":true,"date":"2022-07-03T13:48:59.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D3- 3.2 综合实战- 7000 条租房数据处理与分析大屏"],"_content":"\n\n\n## Summary\n\n## 实验目标\n\n- 通过 UDI 处理租房数据，熟悉 UDI 的高级操作。\n- 通过 VA 分析租房数据。\n- 比较 UDI/VA/Python 在数据分析方面的效率\n\n## 数据集说明\n\n7000 条租房数据分析：`RentFromDanke.zip`，文件详情：\n\n![static/attachment/Pasted image 20220622200425.png](static/attachment/Pasted%20image%2020220622200425.png)\n\n## 数据详情\n\n![static/attachment/Pasted image 20220622200401.png](static/attachment/Pasted%20image%2020220622200401.png)\n\n## 实验过程\n\n### 数据处理\n\n- 将原始数据合并✔\n- 数据的导入✔\n- 数据转换 ✔\n- 加载数据 ✔，并处理为如下数据格式 ![static/attachment/Pasted image 20220621203646.png](static/attachment/Pasted%20image%2020220621203646.png)\n\n### 数据分析\n\n- （UDI）统计房源数量（总）\n- （UDI）每平米的租金\n- （UDI）出租的平均面积\n- （UDI）各地区房源数量\n- （UDI）各小区平均出租面积\n- （UDI）各室（如一室）的房源数量\n- （UDI）地铁距离与租金的关系\n\n### 数据可视化\n\n### 实验步骤\n\n- connect to mysql\n- prepare datasorce\n- create a figure\n- （VA）统计房源数量（总）✔\n- （VA）每平米的租金 ✔\n- （VA）出租的平均面积 ✔\n- （VA）各地区 (X) 房源数量 (Y) ✔\n- （VA）各小区平均出租面积✍\n- （VA）各室（如一室）的房源数量✍\n- （VA）地铁距离与租金的关系✍\n\n## 实验结果分析\n\n- 数据分析与可视化的区别（比时间）\n\n## 样例\n\n![static/attachment/Pasted image 20220622205808.png](static/attachment/Pasted%20image%2020220622205808.png)\n\n## 实验步骤\n\n- 抽取：导入数据库（UDI）\n- 转换：处理数据\n- 加载：存储到数据库\n","source":"_posts/D3--3.2-综合实战--7000-条租房数据处理与分析大屏.md","raw":"---\ntitle: D3- 3.2 综合实战- 7000 条租房数据处理与分析大屏\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-07-03 21:48:59 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D3- 3.2 综合实战- 7000 条租房数据处理与分析大屏\n---\n\n\n\n## Summary\n\n## 实验目标\n\n- 通过 UDI 处理租房数据，熟悉 UDI 的高级操作。\n- 通过 VA 分析租房数据。\n- 比较 UDI/VA/Python 在数据分析方面的效率\n\n## 数据集说明\n\n7000 条租房数据分析：`RentFromDanke.zip`，文件详情：\n\n![static/attachment/Pasted image 20220622200425.png](static/attachment/Pasted%20image%2020220622200425.png)\n\n## 数据详情\n\n![static/attachment/Pasted image 20220622200401.png](static/attachment/Pasted%20image%2020220622200401.png)\n\n## 实验过程\n\n### 数据处理\n\n- 将原始数据合并✔\n- 数据的导入✔\n- 数据转换 ✔\n- 加载数据 ✔，并处理为如下数据格式 ![static/attachment/Pasted image 20220621203646.png](static/attachment/Pasted%20image%2020220621203646.png)\n\n### 数据分析\n\n- （UDI）统计房源数量（总）\n- （UDI）每平米的租金\n- （UDI）出租的平均面积\n- （UDI）各地区房源数量\n- （UDI）各小区平均出租面积\n- （UDI）各室（如一室）的房源数量\n- （UDI）地铁距离与租金的关系\n\n### 数据可视化\n\n### 实验步骤\n\n- connect to mysql\n- prepare datasorce\n- create a figure\n- （VA）统计房源数量（总）✔\n- （VA）每平米的租金 ✔\n- （VA）出租的平均面积 ✔\n- （VA）各地区 (X) 房源数量 (Y) ✔\n- （VA）各小区平均出租面积✍\n- （VA）各室（如一室）的房源数量✍\n- （VA）地铁距离与租金的关系✍\n\n## 实验结果分析\n\n- 数据分析与可视化的区别（比时间）\n\n## 样例\n\n![static/attachment/Pasted image 20220622205808.png](static/attachment/Pasted%20image%2020220622205808.png)\n\n## 实验步骤\n\n- 抽取：导入数据库（UDI）\n- 转换：处理数据\n- 加载：存储到数据库\n","slug":"D3--3.2-综合实战--7000-条租房数据处理与分析大屏","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a100394cv9gfbt3khz","content":"<h2 id=\"Summary\">Summary</h2>\n<h2 id=\"实验目标\">实验目标</h2>\n<ul>\n<li>通过 UDI 处理租房数据，熟悉 UDI 的高级操作。</li>\n<li>通过 VA 分析租房数据。</li>\n<li>比较 UDI/VA/Python 在数据分析方面的效率</li>\n</ul>\n<h2 id=\"数据集说明\">数据集说明</h2>\n<p>7000 条租房数据分析：<code>RentFromDanke.zip</code>，文件详情：</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220622200425.png\" alt=\"static/attachment/Pasted image 20220622200425.png\"></p>\n<h2 id=\"数据详情\">数据详情</h2>\n<p><img src=\"static/attachment/Pasted%20image%2020220622200401.png\" alt=\"static/attachment/Pasted image 20220622200401.png\"></p>\n<h2 id=\"实验过程\">实验过程</h2>\n<h3 id=\"数据处理\">数据处理</h3>\n<ul>\n<li>将原始数据合并✔</li>\n<li>数据的导入✔</li>\n<li>数据转换 ✔</li>\n<li>加载数据 ✔，并处理为如下数据格式 <img src=\"static/attachment/Pasted%20image%2020220621203646.png\" alt=\"static/attachment/Pasted image 20220621203646.png\"></li>\n</ul>\n<h3 id=\"数据分析\">数据分析</h3>\n<ul>\n<li>（UDI）统计房源数量（总）</li>\n<li>（UDI）每平米的租金</li>\n<li>（UDI）出租的平均面积</li>\n<li>（UDI）各地区房源数量</li>\n<li>（UDI）各小区平均出租面积</li>\n<li>（UDI）各室（如一室）的房源数量</li>\n<li>（UDI）地铁距离与租金的关系</li>\n</ul>\n<h3 id=\"数据可视化\">数据可视化</h3>\n<h3 id=\"实验步骤\">实验步骤</h3>\n<ul>\n<li>connect to mysql</li>\n<li>prepare datasorce</li>\n<li>create a figure</li>\n<li>（VA）统计房源数量（总）✔</li>\n<li>（VA）每平米的租金 ✔</li>\n<li>（VA）出租的平均面积 ✔</li>\n<li>（VA）各地区 (X) 房源数量 (Y) ✔</li>\n<li>（VA）各小区平均出租面积✍</li>\n<li>（VA）各室（如一室）的房源数量✍</li>\n<li>（VA）地铁距离与租金的关系✍</li>\n</ul>\n<h2 id=\"实验结果分析\">实验结果分析</h2>\n<ul>\n<li>数据分析与可视化的区别（比时间）</li>\n</ul>\n<h2 id=\"样例\">样例</h2>\n<p><img src=\"static/attachment/Pasted%20image%2020220622205808.png\" alt=\"static/attachment/Pasted image 20220622205808.png\"></p>\n<h2 id=\"实验步骤-2\">实验步骤</h2>\n<ul>\n<li>抽取：导入数据库（UDI）</li>\n<li>转换：处理数据</li>\n<li>加载：存储到数据库</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover2.jpg","excerpt":"","more":"<h2 id=\"Summary\">Summary</h2>\n<h2 id=\"实验目标\">实验目标</h2>\n<ul>\n<li>通过 UDI 处理租房数据，熟悉 UDI 的高级操作。</li>\n<li>通过 VA 分析租房数据。</li>\n<li>比较 UDI/VA/Python 在数据分析方面的效率</li>\n</ul>\n<h2 id=\"数据集说明\">数据集说明</h2>\n<p>7000 条租房数据分析：<code>RentFromDanke.zip</code>，文件详情：</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220622200425.png\" alt=\"static/attachment/Pasted image 20220622200425.png\"></p>\n<h2 id=\"数据详情\">数据详情</h2>\n<p><img src=\"static/attachment/Pasted%20image%2020220622200401.png\" alt=\"static/attachment/Pasted image 20220622200401.png\"></p>\n<h2 id=\"实验过程\">实验过程</h2>\n<h3 id=\"数据处理\">数据处理</h3>\n<ul>\n<li>将原始数据合并✔</li>\n<li>数据的导入✔</li>\n<li>数据转换 ✔</li>\n<li>加载数据 ✔，并处理为如下数据格式 <img src=\"static/attachment/Pasted%20image%2020220621203646.png\" alt=\"static/attachment/Pasted image 20220621203646.png\"></li>\n</ul>\n<h3 id=\"数据分析\">数据分析</h3>\n<ul>\n<li>（UDI）统计房源数量（总）</li>\n<li>（UDI）每平米的租金</li>\n<li>（UDI）出租的平均面积</li>\n<li>（UDI）各地区房源数量</li>\n<li>（UDI）各小区平均出租面积</li>\n<li>（UDI）各室（如一室）的房源数量</li>\n<li>（UDI）地铁距离与租金的关系</li>\n</ul>\n<h3 id=\"数据可视化\">数据可视化</h3>\n<h3 id=\"实验步骤\">实验步骤</h3>\n<ul>\n<li>connect to mysql</li>\n<li>prepare datasorce</li>\n<li>create a figure</li>\n<li>（VA）统计房源数量（总）✔</li>\n<li>（VA）每平米的租金 ✔</li>\n<li>（VA）出租的平均面积 ✔</li>\n<li>（VA）各地区 (X) 房源数量 (Y) ✔</li>\n<li>（VA）各小区平均出租面积✍</li>\n<li>（VA）各室（如一室）的房源数量✍</li>\n<li>（VA）地铁距离与租金的关系✍</li>\n</ul>\n<h2 id=\"实验结果分析\">实验结果分析</h2>\n<ul>\n<li>数据分析与可视化的区别（比时间）</li>\n</ul>\n<h2 id=\"样例\">样例</h2>\n<p><img src=\"static/attachment/Pasted%20image%2020220622205808.png\" alt=\"static/attachment/Pasted image 20220622205808.png\"></p>\n<h2 id=\"实验步骤-2\">实验步骤</h2>\n<ul>\n<li>抽取：导入数据库（UDI）</li>\n<li>转换：处理数据</li>\n<li>加载：存储到数据库</li>\n</ul>\n"},{"title":"D2- 2.2 UDI 深入 - UDI的基本功能及组件说明","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D2- 2.2 UDI 深入 - UDI的基本功能及组件说明"],"_content":"\n## ETL 与 UDI 的关系\n\nETL 是指导原则（协议），UDI 是 ETL 的具体实现。\n\n---\n\n## 转换、作业、组件、HOP 的关系？\n\n---\n\n## UDI 详细介绍\n\n- 数据集成基本概念 https://www.yuque.com/uniplore/guide/ha9lqr\n- 数据集成模块主页面 https://www.yuque.com/uniplore/guide/fci8sr\n- 集成工作流管理 https://www.yuque.com/uniplore/guide/grc8ol\n- 数据集成控件管理 https://www.yuque.com/uniplore/guide/sgnwl8\n- 转换类控件说明（18 类）https://www.yuque.com/uniplore/guide/wi1336\n","source":"_posts/D2--2.2-UDI-深入---UDI的基本功能及组件说明.md","raw":"---\ntitle: D2- 2.2 UDI 深入 - UDI的基本功能及组件说明\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D2- 2.2 UDI 深入 - UDI的基本功能及组件说明\n---\n\n## ETL 与 UDI 的关系\n\nETL 是指导原则（协议），UDI 是 ETL 的具体实现。\n\n---\n\n## 转换、作业、组件、HOP 的关系？\n\n---\n\n## UDI 详细介绍\n\n- 数据集成基本概念 https://www.yuque.com/uniplore/guide/ha9lqr\n- 数据集成模块主页面 https://www.yuque.com/uniplore/guide/fci8sr\n- 集成工作流管理 https://www.yuque.com/uniplore/guide/grc8ol\n- 数据集成控件管理 https://www.yuque.com/uniplore/guide/sgnwl8\n- 转换类控件说明（18 类）https://www.yuque.com/uniplore/guide/wi1336\n","slug":"D2--2.2-UDI-深入---UDI的基本功能及组件说明","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a1003c4cv94l12co17","content":"<h2 id=\"ETL-与-UDI-的关系\">ETL 与 UDI 的关系</h2>\n<p>ETL 是指导原则（协议），UDI 是 ETL 的具体实现。</p>\n<hr>\n<h2 id=\"转换、作业、组件、HOP-的关系？\">转换、作业、组件、HOP 的关系？</h2>\n<hr>\n<h2 id=\"UDI-详细介绍\">UDI 详细介绍</h2>\n<ul>\n<li>数据集成基本概念 <a href=\"https://www.yuque.com/uniplore/guide/ha9lqr\">https://www.yuque.com/uniplore/guide/ha9lqr</a></li>\n<li>数据集成模块主页面 <a href=\"https://www.yuque.com/uniplore/guide/fci8sr\">https://www.yuque.com/uniplore/guide/fci8sr</a></li>\n<li>集成工作流管理 <a href=\"https://www.yuque.com/uniplore/guide/grc8ol\">https://www.yuque.com/uniplore/guide/grc8ol</a></li>\n<li>数据集成控件管理 <a href=\"https://www.yuque.com/uniplore/guide/sgnwl8\">https://www.yuque.com/uniplore/guide/sgnwl8</a></li>\n<li>转换类控件说明（18 类）<a href=\"https://www.yuque.com/uniplore/guide/wi1336\">https://www.yuque.com/uniplore/guide/wi1336</a></li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover3.jpg","excerpt":"","more":"<h2 id=\"ETL-与-UDI-的关系\">ETL 与 UDI 的关系</h2>\n<p>ETL 是指导原则（协议），UDI 是 ETL 的具体实现。</p>\n<hr>\n<h2 id=\"转换、作业、组件、HOP-的关系？\">转换、作业、组件、HOP 的关系？</h2>\n<hr>\n<h2 id=\"UDI-详细介绍\">UDI 详细介绍</h2>\n<ul>\n<li>数据集成基本概念 <a href=\"https://www.yuque.com/uniplore/guide/ha9lqr\">https://www.yuque.com/uniplore/guide/ha9lqr</a></li>\n<li>数据集成模块主页面 <a href=\"https://www.yuque.com/uniplore/guide/fci8sr\">https://www.yuque.com/uniplore/guide/fci8sr</a></li>\n<li>集成工作流管理 <a href=\"https://www.yuque.com/uniplore/guide/grc8ol\">https://www.yuque.com/uniplore/guide/grc8ol</a></li>\n<li>数据集成控件管理 <a href=\"https://www.yuque.com/uniplore/guide/sgnwl8\">https://www.yuque.com/uniplore/guide/sgnwl8</a></li>\n<li>转换类控件说明（18 类）<a href=\"https://www.yuque.com/uniplore/guide/wi1336\">https://www.yuque.com/uniplore/guide/wi1336</a></li>\n</ul>\n"},{"title":"D3- 3.3 VA深入-20+数据图标介绍及使用","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","_content":"","source":"_posts/D3--3.3-VA深入-20+数据图标介绍及使用.md","raw":"---\ntitle: D3- 3.3 VA深入-20+数据图标介绍及使用\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\n---\n","slug":"D3--3.3-VA深入-20+数据图标介绍及使用","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a2003g4cv9bqmz7nnq","content":"","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":""},{"title":"D4- 综合项目 - 6000 条倒闭企业处理与分析大屏","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D4- 综合项目 - 6000 条倒闭企业处理与分析大屏"],"_content":"\n\n\n## Summary\n\n## 实验目标\n\n熟悉数据 E/T/L 流程，并熟练制作大屏及仪表板\n\n## 数据集\n\n6000 条倒闭企业数据集，总计 6,272 条记录，大小为 2.3 M，包含 21 个字段。：com.rar\n\n## 分析内容\n\n- 各地区死亡行业分布 (计数）（地图）✔\n\t- 按地区统计死亡行业个数\n- 各行业死亡 TOP3（条形图）✔\n- 细分领域死亡行业 TOP3（条形图）✍\n- 各年（年）新生企业统计（条形图）✔\n- 各年死亡企业统计（条形图）✍\n- 企业存活时长占比 ✔\n- 投资人词云 ✔\n\t- 一条数据含有多个投资人，因此需要拆分投资人\n\t- 一条记录变为两条记录\n\t- 实验步骤\n\t\t- 建立 jupyter 脚本\n\t\t- 数据链接 (mysql-connector)\n\t\t- 加载数据\n\t\t- 分析数据\n- 倒闭原因词云（最后实验）\n- ceo 描述（ceo_des）词云 ✍\n- 企业介绍 **关键词** 词云 ✔\n\t- 分词 https://github.com/fxsjy/jieba\n\t- 安装 jieba\n\t- 开始分词\n\t- 数据加载\n\t- 数据分析\n\n## 实验步骤\n\n- 数据导入\n\t- 创建数据库\n\t- 导入数据库\n- 数据的抽取\n\t- 链接数据\n\t- 准备数据\n- 数据的转换\n\t- 拆分死亡原因\n\t- 拆分投资企业\n\t- 抽取企业描述的关键词（TOP10)\n\n## 计算字段=函数（def)7\n\n- 计算字段类比于 Python 中的 函数\n\n## 原始 Pdf\n\n<embed src='/images/f12174928d8727aa5c8a99d5dd184b921ec7593a.pdf' width='100%' height='750' type='application/pdf'>\n","source":"_posts/D4--综合项目---6000-条倒闭企业处理与分析大屏.md","raw":"---\ntitle: D4- 综合项目 - 6000 条倒闭企业处理与分析大屏\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D4- 综合项目 - 6000 条倒闭企业处理与分析大屏\n---\n\n\n\n## Summary\n\n## 实验目标\n\n熟悉数据 E/T/L 流程，并熟练制作大屏及仪表板\n\n## 数据集\n\n6000 条倒闭企业数据集，总计 6,272 条记录，大小为 2.3 M，包含 21 个字段。：com.rar\n\n## 分析内容\n\n- 各地区死亡行业分布 (计数）（地图）✔\n\t- 按地区统计死亡行业个数\n- 各行业死亡 TOP3（条形图）✔\n- 细分领域死亡行业 TOP3（条形图）✍\n- 各年（年）新生企业统计（条形图）✔\n- 各年死亡企业统计（条形图）✍\n- 企业存活时长占比 ✔\n- 投资人词云 ✔\n\t- 一条数据含有多个投资人，因此需要拆分投资人\n\t- 一条记录变为两条记录\n\t- 实验步骤\n\t\t- 建立 jupyter 脚本\n\t\t- 数据链接 (mysql-connector)\n\t\t- 加载数据\n\t\t- 分析数据\n- 倒闭原因词云（最后实验）\n- ceo 描述（ceo_des）词云 ✍\n- 企业介绍 **关键词** 词云 ✔\n\t- 分词 https://github.com/fxsjy/jieba\n\t- 安装 jieba\n\t- 开始分词\n\t- 数据加载\n\t- 数据分析\n\n## 实验步骤\n\n- 数据导入\n\t- 创建数据库\n\t- 导入数据库\n- 数据的抽取\n\t- 链接数据\n\t- 准备数据\n- 数据的转换\n\t- 拆分死亡原因\n\t- 拆分投资企业\n\t- 抽取企业描述的关键词（TOP10)\n\n## 计算字段=函数（def)7\n\n- 计算字段类比于 Python 中的 函数\n\n## 原始 Pdf\n\n<embed src='/images/f12174928d8727aa5c8a99d5dd184b921ec7593a.pdf' width='100%' height='750' type='application/pdf'>\n","slug":"D4--综合项目---6000-条倒闭企业处理与分析大屏","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a2003j4cv91g6c4lgk","content":"<h2 id=\"Summary\">Summary</h2>\n<h2 id=\"实验目标\">实验目标</h2>\n<p>熟悉数据 E/T/L 流程，并熟练制作大屏及仪表板</p>\n<h2 id=\"数据集\">数据集</h2>\n<p>6000 条倒闭企业数据集，总计 6,272 条记录，大小为 2.3 M，包含 21 个字段。：com.rar</p>\n<h2 id=\"分析内容\">分析内容</h2>\n<ul>\n<li>各地区死亡行业分布 (计数）（地图）✔\n<ul>\n<li>按地区统计死亡行业个数</li>\n</ul>\n</li>\n<li>各行业死亡 TOP3（条形图）✔</li>\n<li>细分领域死亡行业 TOP3（条形图）✍</li>\n<li>各年（年）新生企业统计（条形图）✔</li>\n<li>各年死亡企业统计（条形图）✍</li>\n<li>企业存活时长占比 ✔</li>\n<li>投资人词云 ✔\n<ul>\n<li>一条数据含有多个投资人，因此需要拆分投资人</li>\n<li>一条记录变为两条记录</li>\n<li>实验步骤\n<ul>\n<li>建立 jupyter 脚本</li>\n<li>数据链接 (mysql-connector)</li>\n<li>加载数据</li>\n<li>分析数据</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>倒闭原因词云（最后实验）</li>\n<li>ceo 描述（ceo_des）词云 ✍</li>\n<li>企业介绍 <strong>关键词</strong> 词云 ✔\n<ul>\n<li>分词 <a href=\"https://github.com/fxsjy/jieba\">https://github.com/fxsjy/jieba</a></li>\n<li>安装 jieba</li>\n<li>开始分词</li>\n<li>数据加载</li>\n<li>数据分析</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"实验步骤\">实验步骤</h2>\n<ul>\n<li>数据导入\n<ul>\n<li>创建数据库</li>\n<li>导入数据库</li>\n</ul>\n</li>\n<li>数据的抽取\n<ul>\n<li>链接数据</li>\n<li>准备数据</li>\n</ul>\n</li>\n<li>数据的转换\n<ul>\n<li>拆分死亡原因</li>\n<li>拆分投资企业</li>\n<li>抽取企业描述的关键词（TOP10)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"计算字段-函数（def-7\">计算字段=函数（def)7</h2>\n<ul>\n<li>计算字段类比于 Python 中的 函数</li>\n</ul>\n<h2 id=\"原始-Pdf\">原始 Pdf</h2>\n<embed src='/images/f12174928d8727aa5c8a99d5dd184b921ec7593a.pdf' width='100%' height='750' type='application/pdf'>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover3.jpg","excerpt":"","more":"<h2 id=\"Summary\">Summary</h2>\n<h2 id=\"实验目标\">实验目标</h2>\n<p>熟悉数据 E/T/L 流程，并熟练制作大屏及仪表板</p>\n<h2 id=\"数据集\">数据集</h2>\n<p>6000 条倒闭企业数据集，总计 6,272 条记录，大小为 2.3 M，包含 21 个字段。：com.rar</p>\n<h2 id=\"分析内容\">分析内容</h2>\n<ul>\n<li>各地区死亡行业分布 (计数）（地图）✔\n<ul>\n<li>按地区统计死亡行业个数</li>\n</ul>\n</li>\n<li>各行业死亡 TOP3（条形图）✔</li>\n<li>细分领域死亡行业 TOP3（条形图）✍</li>\n<li>各年（年）新生企业统计（条形图）✔</li>\n<li>各年死亡企业统计（条形图）✍</li>\n<li>企业存活时长占比 ✔</li>\n<li>投资人词云 ✔\n<ul>\n<li>一条数据含有多个投资人，因此需要拆分投资人</li>\n<li>一条记录变为两条记录</li>\n<li>实验步骤\n<ul>\n<li>建立 jupyter 脚本</li>\n<li>数据链接 (mysql-connector)</li>\n<li>加载数据</li>\n<li>分析数据</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>倒闭原因词云（最后实验）</li>\n<li>ceo 描述（ceo_des）词云 ✍</li>\n<li>企业介绍 <strong>关键词</strong> 词云 ✔\n<ul>\n<li>分词 <a href=\"https://github.com/fxsjy/jieba\">https://github.com/fxsjy/jieba</a></li>\n<li>安装 jieba</li>\n<li>开始分词</li>\n<li>数据加载</li>\n<li>数据分析</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"实验步骤\">实验步骤</h2>\n<ul>\n<li>数据导入\n<ul>\n<li>创建数据库</li>\n<li>导入数据库</li>\n</ul>\n</li>\n<li>数据的抽取\n<ul>\n<li>链接数据</li>\n<li>准备数据</li>\n</ul>\n</li>\n<li>数据的转换\n<ul>\n<li>拆分死亡原因</li>\n<li>拆分投资企业</li>\n<li>抽取企业描述的关键词（TOP10)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"计算字段-函数（def-7\">计算字段=函数（def)7</h2>\n<ul>\n<li>计算字段类比于 Python 中的 函数</li>\n</ul>\n<h2 id=\"原始-Pdf\">原始 Pdf</h2>\n<embed src='/images/f12174928d8727aa5c8a99d5dd184b921ec7593a.pdf' width='100%' height='750' type='application/pdf'>\n"},{"title":"D5- 大数据分析相关资料分享","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:46.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D5- 大数据分析相关资料分享"],"_content":"\n\n\n## Summary\n\n含 python、爬虫、数据库、大数据、可视化、机器学习、tableau、统计学、地理信息等\n\n## 一、Python 基础\n\n- [Python简明教程（Python3）](https://bop.mol.uno/)\n- [Python3.7.4官方中文文档](https://docs.python.org/zh-cn/3/tutorial/index.html)\n- [Python标准库中文版](https://docs.python.org/zh-cn/3/library/index.html#library-index)\n- [廖雪峰 Python 3 中文教程](http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000)\n- [Python 3.3 官方教程中文版](http://www.pythondoc.com/pythontutorial3/index.html)\n- [Python3 Cookbook 中文版](https://python3-cookbook.readthedocs.io/zh_CN/latest/)\n- [IPython CookBook 英文版](https://ipython-books.github.io/)\n- [笨办法学 Python](http://old.sebug.net/paper/books/LearnPythonTheHardWay/) ([PDF](http://liam0205.me/attachment/Python/PyHardWay/Learn_Python_The_Hard_Way_zh-cn.pdf) [EPUB](https://www.gitbook.com/download/epub/book/wizardforcel/lpthw))\n- [Think Python 2e  最新版中文](http://codingpy.com/books/thinkpython2/)\n- [Python 核心编程 第二版 中文](https://wizardforcel.gitbooks.io/core-python-2e/content/)\n- [菜鸟教程 Python3基础](https://www.runoob.com/python3/python3-tutorial.html)\n- [W3cschool Python3基础](https://www.w3cschool.cn/python3/)\n- [Python最佳实践指南](http://pythonguidecn.readthedocs.io/zh/latest/)\n- [Python 精要教程](https://www.gitbook.com/book/wizardforcel/python-essential-tutorial/details)\n- [Python进阶 中文版](https://docs.pythontab.com/interpy/)\n- [中文 Python 笔记](https://github.com/lijin-THU/notes-python)\n- [莫烦python教程](https://morvanzhou.github.io/)\n- [The Hitchhiker's Guide to Python](https://docs.python-guide.org/)\n- [草根学 Python](https://github.com/TwoWater/Python)\n- [Python从入门到精通教程 视频（600集）](https://www.bilibili.com/video/av14184325/)\n- [Kaggle Python基础学习（英文）](https://www.kaggle.com/learn/python)\n- [李笑来-自学是门手艺-python教程](https://github.com/selfteaching/the-craft-of-selfteaching)\n\n## 二、Python 资源\n\n- [Python中文开发者社区](https://www.pythontab.com/)\n- [Python 资源大全中文版](https://zhuanlan.zhihu.com/p/52957088)\n- [Python-100天从新手到大师（github）](https://github.com/jackfrued/Python-100-Days)\n- [GitHub上入门开发项目汇总（含Python）](https://github.com/521xueweihan/HelloGitHub)\n- [Python面试题-1](https://github.com/taizilongxu/interview_python)\n- [Python面试题-2](https://github.com/kenwoodjw/python_interview_question)\n- [Python面试题-3](https://github.com/JushuangQiao/Python-Offer)\n- [Awesome Python Applications 酷炫Python小应用](https://github.com/mahmoud/awesome-python-applications)\n- [Python艺术二维码生成器](https://github.com/sylnsfar/qrcode)\n- [Python有趣脚本集合](https://github.com/injetlee/Python)\n- [Python数据结构和算法（英文）](https://github.com/keon/algorithms)\n- [Awesome Python Applications](https://github.com/mahmoud/awesome-python-applications)\n- [Python常见算法刷题](https://github.com/apachecn/Interview/tree/master/docs/Algorithm/Leetcode/Python)\n- [Python 第三方库whl文件下载](https://www.lfd.uci.edu/~gohlke/pythonlibs/#)\n\n## 三、Python 爬虫\n\n- [awesome-spider 爬虫集合](https://github.com/facert/awesome-spider)\n- [python模拟登陆&爬虫](https://github.com/CriseLYJ/awesome-python-login-model)\n- [Python爬虫代理IP池(proxy pool)](https://github.com/jhao104/proxy_pool)\n- [Python入门网络爬虫之精华版](https://github.com/lining0806/PythonSpiderNotes)\n- [Python3网络爬虫实战](https://github.com/Jack-Cherish/python-spider)\n- [有趣的Python爬虫和Python数据分析小项目](https://github.com/Alfred1984/interesting-python)\n- [Python入门爬虫](https://github.com/lining0806/PythonSpiderNotes)\n- [Requests 英文文档](https://2.python-requests.org/en/master/)\n- [Requests 中文文档](https://2.python-requests.org//zh_CN/latest/)\n- [Scrapy 英文文档](https://docs.scrapy.org/en/latest/)\n- [Scrapy 中文文档](https://scrapy-chs.readthedocs.io/zh_CN/0.24/)\n- [Pyspider 英文文档](http://docs.pyspider.org/en/latest/)\n- [BeautifulSoup中文文档](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/)\n- [BeautifulSoup英文文档](https://www.crummy.com/software/BeautifulSoup/bs4/doc/)\n- [Xpath教程](https://www.runoob.com/xpath/xpath-tutorial.html)\n- [selenium中文文档](https://selenium-python-zh.readthedocs.io/en/latest/)\n\n## 四、Python 可视化\n\n- [seaborn 英文文档](http://seaborn.pydata.org/)\n- [seaborn 中文文档](https://seaborn.apachecn.org/#/)\n- [matplotlib 英文文档](https://matplotlib.org/)\n- [matplotlib 中文文档（官方）](https://www.matplotlib.org.cn/)\n- [matplotlib 中文文档](https://wizardforcel.gitbooks.io/matplotlib-user-guide/content/)（非官方）\n- [pyecharts 中文文档（官方）](https://pyecharts.org/#/zh-cn/intro)\n- [plotly绘图官方教程 英文文档](https://plot.ly/python/)\n- [bokeh动态可视化教程 英文文档](https://bokeh.pydata.org/en/latest/)\n\n## 五、python 数据分析\n\n- [pandas 英文文档](http://pandas.pydata.org/)\n- [pandas 中文文档（官方）](https://www.pypandas.cn/)\n- [pandas 中文文档（非官方）](http://pandas.apachecn.org/)\n- [利用python进行数据分析 第二版（中文）](https://github.com/apachecn/pyda-2e-zh)\n- [numpy 英文文档](http://www.numpy.org/)\n- [numpy中文文档（官方）](https://www.numpy.org.cn/)\n- [numpy 中文文档（非官方）](http://numpy.apachecn.org/)\n- [numpy 100 练习题](https://github.com/rougier/numpy-100)\n- [python科学计算笔记（英文）](https://github.com/jrjohansson/scientific-python-lectures)\n- [数据科学速查表（英文）](https://github.com/FavioVazquez/ds-cheatsheets)\n- [python data science handbook（python数据科学手册）](https://jakevdp.github.io/PythonDataScienceHandbook/)\n- [data science python notebook（数据科学python笔记）](https://github.com/donnemartin/data-science-ipython-notebooks)\n\n## 六、python 机器学习\n\n- [AI Learning 机器学习实战 中文（GitHub 15000星）](https://github.com/apachecn/AiLearning)\n- [data-science-ipython-notebooks](https://github.com/donnemartin/data-science-ipython-notebooks)\n- [Kaggle 机器学习基础学习](https://www.kaggle.com/learn/overview)\n- [动手学深度学习](http://zh.d2l.ai/index.html)\n- [scikit-learn 英文文档](https://scikit-learn.org/stable/)\n- [scikit-learn 中文文档](http://sklearn.apachecn.org/#/)\n- [xgboost 中文文档](https://xgboost.apachecn.org/#/)\n- [pytorch中文网](https://www.pytorchtutorial.com/)\n- [machine learning mastery 博客（英文）](https://machinelearningmastery.com/)\n- [机器学习笔记 英文](https://github.com/ageron/handson-ml)\n- [面向机器学习的特征工程](http://fe4ml.apachecn.org/#/)\n- [keras英文文档](https://keras.io/)\n- [keras中文文档](https://keras.io/zh/)\n- [TensorFlow Examples](https://github.com/aymericdamien/TensorFlow-Examples)\n- [面试-机器学习算法试题及讲解（中文）](https://github.com/imhuay/Algorithm_Interview_Notes-Chinese)\n- [机器学习100天练习（英文）](https://github.com/Avik-Jain/100-Days-Of-ML-Code)\n- [机器学习100天练习（中文）](https://github.com/MLEveryday/100-Days-Of-ML-Code)\n- [吴恩达-机器学习 视频（b站）](https://www.bilibili.com/video/av9912938?from=search&seid=11914534456869662293)\n- [机器学习算法基础 视频（b站）](https://www.bilibili.com/video/av37947862?from=search&seid=11914534456869662293)\n- [吴恩达-神经网络和深度学习 视频（b站）](https://www.bilibili.com/video/av34661735?from=search&seid=9109291334133521229)\n- [李飞飞-深度学习与计算机视觉 视频（b站）](https://www.bilibili.com/video/av17741845?from=search&seid=9109291334133521229)\n- [kaggle等数据比赛TOP解决方案集合](https://github.com/Smilexuhc/Data-Competition-TopSolution)\n- [机器学习·深度学习·NLP 面试基础知识](https://github.com/NLP-LOVE/ML-NLP)\n\n## **七、数据库**\n\n- [21分钟MySQL入门教程](http://www.cnblogs.com/mr-wid/archive/2013/05/09/3068229.html)\n- [W3cschool SQL基础教程](http://www.w3school.com.cn/sql/index.asp)\n- [菜鸟教程 SQL基础](https://www.runoob.com/sql/sql-intro.html)\n- [易百教程 SQL基础](https://www.yiibai.com/sql/)\n- [廖雪峰SQL教程](https://www.liaoxuefeng.com/wiki/1177760294764384)\n- [SQL在线手册](http://www.esk365.com/zxsc/datebase/sql/)\n- [SQL 在线速查手册](https://www.w3xue.com/manual/sql/)\n- [PL/SQL教程](https://www.oraclejsq.com/plsql/010200446.html)\n- [PL/SQL中文教程](https://plsql-tutorial.com/zh-CN/)\n- [Oracle SQL Developer 入门](https://www.oracle.com/ocom/groups/public/@otn/documents/webcontent/229078_zhs.htm)\n- [MySQL 5.1参考中文手册](http://download.nust.na/pub6/mysql/doc/refman/5.1/zh/index.html)\n- [SQL 手册（github）](https://github.com/apache/incubator-doris/wiki/Sql-Reference)\n- [Oracle SQL 语言文档](https://www.oracle.com/technetwork/cn/database/database-technologies/sql/documentation/index.html)\n- [SQL reference英文](http://doris.apache.org/guides/sql_reference.html)\n- [MySQL索引背后的数据结构及算法原理](http://blog.codinglabs.org/articles/theory-of-mysql-index.html)\n- [PostgreSQL 9.5.3 中文文档](http://www.postgres.cn/docs/9.5/index.html)\n- [NoSQL数据库笔谈](http://old.sebug.net/paper/databases/nosql/Nosql.html)\n- [The Little MongoDB Book](https://github.com/justinyhuang/the-little-mongodb-book-cn/blob/master/mongodb.md)\n- [The Little Redis Book](https://github.com/JasonLai256/the-little-redis-book/blob/master/cn/redis.md)\n- [Apache Spark 设计与实现](https://github.com/JerryLead/SparkInternals/tree/master/markdown)\n- [Kaggle SQL学习（英文）](https://www.kaggle.com/learn/intro-to-sql)\n\n## 八、Tableau\n\n- [Tableau官方学习平台（含视频、文档）](https://www.tableau.com/zh-cn/learn)\n- [Tableau社区](https://public.tableau.com/s/?_ga=2.71823507.1676038997.1560873286-1514687749.1560873286)\n- [Tableau作品精选Viz](https://public.tableau.com/s/gallery)\n- [Tableau教程_w3cschool](https://www.w3cschool.cn/tableau/)\n- [Tableau教程- W3xue](https://www.w3xue.com/soft/tableau/)\n- [Tableau中文手册](http://www.kubiji.cn/book/tableau/)\n- [Tableau官网视频培训教材 英文版（b站）](https://www.bilibili.com/video/av17433768?from=search&seid=18433794970164707199)\n- [Tableau官网视频培训教材 中文版（b站）](https://www.bilibili.com/video/av57762618?from=search&seid=18433794970164707199)\n- [Tableau 14天入门训练营（b站）](https://www.bilibili.com/video/av57932052?from=search&seid=18433794970164707199)\n- [Tableau商业智能与可视化应用实战（b站）](https://www.bilibili.com/video/av45663036?from=search&seid=18433794970164707199)\n- [如何学习tableau？](https://www.zhihu.com/question/29478254)\n- [MakeOver Monday(Tablea作品集)](http://www.doc88.com/p-9969131399830.html)\n- [Tableau制作小案例](https://mp.weixin.qq.com/s/UlB_D6UMgshQ4jquG_UTuA)（优阅达）\n- [iconfont（图标库，可用于dash board制作）](https://www.iconfont.cn/?spm=a313x.7781069.1998910419.d4d0a486a)\n\n## 九、大数据\n\n- [spark 中文文档](http://spark.apachecn.org/#/)\n- [kafka 中文文档](http://kafka.apachecn.org/)\n- [hbase 中文文档](http://hbase.apachecn.org/#/)\n- [flink官网](https://flink.apache.org/zh/)\n- [flink 中文文档](https://flink.apachecn.org/docs/1.7-SNAPSHOT/#/)\n- [Hive 英文文档](https://hive.apache.org/)\n- [Hive 中文教程](https://www.docs4dev.com/docs/zh/apache-hive/3.1.1/reference/Home.html)\n- [Spark 编程指南简体中文版](https://aiyanbo.gitbooks.io/spark-programming-guide-zh-cn/content/)\n- [Scala 英文文档](https://docs.scala-lang.org/)\n- [Scala 中文文档](https://docs.scala-lang.org/zh-cn/overviews/)\n- [Scala Tutorial 中文版](https://www.scala-lang.org/docu/files/ScalaTutorial-zh_CN.pdf)\n- [Scala 菜鸟教程](https://www.runoob.com/scala/scala-tutorial.html)\n- [Scala w3cschool教程](https://www.w3cschool.cn/scala/)\n\n## 十、数理统计知识\n\n- [麻省理工公开课-线性代数](http://open.163.com/special/opencourse/daishu.html)  \n- [可汗学院公开课：线性代数](http://open.163.com/special/Khan/linearalgebra.html)  \n- [同济大学公开课：线性代数](http://open.163.com/movie/2019/4/9/M/MEC1UPOHH_MEC1USS9M.html)  \n- [山东大学MOOC-线性代数](https://www.icourse163.org/course/sdu-55001)  \n- [线性代数讲义 - 华东师范大学数学系](http://math.ecnu.edu.cn/~hryuan/preprint/la.pdf)  \n- [线性代数-北京大学出版社](http://www.pup.cn/ztpage/gzgz/PDF/book/高职数学/13.线性代数.pdf)  \n- [线性代数-维基百科](https://link.juejin.im/?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FLinear_algebra)\n- [MIT-18.06-线性代数-完整笔记](https://github.com/apachecn/18.06-linalg-notes)\n- [两小时讲完线性代数](https://www.bilibili.com/video/av7564112?from=search&seid=10663434405036315716)\n- [矩阵编码：线性代数在计算机科学中的应用](http://codingthematrix.com/)  \n- [线性代数应用-戴维森学院](https://www.edx.org/course/applications-linear-algebra-part-1-davidsonx-d003x-1)\n- [可汗学院公开课：统计学](http://open.163.com/special/Khan/khstatistics.html)  \n- [加利福尼亚大学伯克利分校公开课：统计学](http://open.163.com/movie/2017/5/0/8/MCJQECVBF_MCJSVSQ08.html)  \n- [浙江大学公开课：概率论与数理统计](http://open.163.com/movie/2019/4/R/6/MEC1U20OT_MEC1U8MR6.html)  \n- [可汗学院公开课：概率](http://open.163.com/special/Khan/probability.html)  \n- [概率论与数理统计-重庆大学公开课](http://www.xuetangx.com/courses/course-v1:CQU+MATH20041X+2018_T2/about)  \n- [概率论与数理统计-北京大学公开课](https://www.bilibili.com/video/av34021718/)  \n- [概率论与数理统计-中科大公开课](https://www.bilibili.com/video/av3781284/)  \n- [商务与经济统计-北师大公开课](http://www.icourse163.org/course/BNU-1003604001)  \n- [哈佛大学统计学110讲稿](http://projects.iq.harvard.edu/stat110/youtube)\n- [概率论和统计学](https://www.khanacademy.org/math/probability)-Khan Academy  \n- [麻省理工学院公开课：微积分重点](http://open.163.com/special/opencourse/weijifen.html)  \n- [清华大学微积分主讲-刘坤林](https://www.bilibili.com/video/av29845488/)  \n- [微积分-浙江大学](https://www.bilibili.com/video/av39156411?from=search&seid=11125098883390790554)  \n- [麻省理工学院公开课：多变量微积分](http://open.163.com/special/opencourse/multivariable.html)  \n- [可汗学院公开课：微积分预备](http://open.163.com/special/Khan/precalculus.html)  \n- [麻省理工学院公开课：单变量微积分](http://open.163.com/special/sp/singlevariablecalculus.html)  \n- [HACC公开课：微积分1](http://open.163.com/movie/2018/12/0/H/ME19860FO_ME1AUHF0H.html)  \n- [HACC公开课：微积分II](http://open.163.com/movie/2018/12/1/S/ME2SKV6B0_ME2UJ1G1S.html)  \n- [数学分析讲义 - 南京大学数学系](http://math.nju.edu.cn/~meijq/calculus/notes.pdf)  \n- [7天搞定微积分](http://www.rsqdz.net:907/upload/userfile/naturalism/shuxue/7天搞定微积分.李巧丽.扫描版.pdf)  \n- [托马斯微积分](https://github.com/gnuhub/books-1/blob/master/数学●基础数学●数学分析/托马斯微积分.pdf)\n\n## 十一、量化\n\n- [Python量化投资](https://www.lizenghai.com/)\n\n## 十一、数据集/接口\n\n- [sklearn自带数据集](https://scikit-learn.org/stable/modules/classes.html?highlight=dataset#module-sklearn.datasets)\n- [kaggle数据集](https://www.kaggle.com/datasets)\n- [UCI数据集](https://archive.ics.uci.edu/ml/datasets.php)\n- [科赛网数据集](https://www.kesci.com/home/dataset)  \n- [tushare财经股票基金数据接口](http://tushare.org/)\n- [akshare财经股票基金数据接口](https://akshare.readthedocs.io/zh_CN/latest/)\n- [baostock财经股票基金数据接口](http://baostock.com/baostock/index.php/%E9%A6%96%E9%A1%B5)\n\n## 十二、地理信息分析\n\n- [geoplot地理空间可视化官方文档](https://residentmario.github.io/geoplot/index.html)\n- [folium地图可视化官方文档](https://python-visualization.github.io/folium/)\n- [geopandas地理空间数据处理官方文档](https://geopandas.org/)\n- [cartopy地理空间可视化官方文档](https://scitools.org.uk/cartopy/docs/latest/)\n\n## References\n\nhttps://github.com/hi-weijun/PythonDataScience-Collections\n","source":"_posts/D5--大数据分析相关资料分享.md","raw":"---\ntitle: D5- 大数据分析相关资料分享\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:46 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D5- 大数据分析相关资料分享\n---\n\n\n\n## Summary\n\n含 python、爬虫、数据库、大数据、可视化、机器学习、tableau、统计学、地理信息等\n\n## 一、Python 基础\n\n- [Python简明教程（Python3）](https://bop.mol.uno/)\n- [Python3.7.4官方中文文档](https://docs.python.org/zh-cn/3/tutorial/index.html)\n- [Python标准库中文版](https://docs.python.org/zh-cn/3/library/index.html#library-index)\n- [廖雪峰 Python 3 中文教程](http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000)\n- [Python 3.3 官方教程中文版](http://www.pythondoc.com/pythontutorial3/index.html)\n- [Python3 Cookbook 中文版](https://python3-cookbook.readthedocs.io/zh_CN/latest/)\n- [IPython CookBook 英文版](https://ipython-books.github.io/)\n- [笨办法学 Python](http://old.sebug.net/paper/books/LearnPythonTheHardWay/) ([PDF](http://liam0205.me/attachment/Python/PyHardWay/Learn_Python_The_Hard_Way_zh-cn.pdf) [EPUB](https://www.gitbook.com/download/epub/book/wizardforcel/lpthw))\n- [Think Python 2e  最新版中文](http://codingpy.com/books/thinkpython2/)\n- [Python 核心编程 第二版 中文](https://wizardforcel.gitbooks.io/core-python-2e/content/)\n- [菜鸟教程 Python3基础](https://www.runoob.com/python3/python3-tutorial.html)\n- [W3cschool Python3基础](https://www.w3cschool.cn/python3/)\n- [Python最佳实践指南](http://pythonguidecn.readthedocs.io/zh/latest/)\n- [Python 精要教程](https://www.gitbook.com/book/wizardforcel/python-essential-tutorial/details)\n- [Python进阶 中文版](https://docs.pythontab.com/interpy/)\n- [中文 Python 笔记](https://github.com/lijin-THU/notes-python)\n- [莫烦python教程](https://morvanzhou.github.io/)\n- [The Hitchhiker's Guide to Python](https://docs.python-guide.org/)\n- [草根学 Python](https://github.com/TwoWater/Python)\n- [Python从入门到精通教程 视频（600集）](https://www.bilibili.com/video/av14184325/)\n- [Kaggle Python基础学习（英文）](https://www.kaggle.com/learn/python)\n- [李笑来-自学是门手艺-python教程](https://github.com/selfteaching/the-craft-of-selfteaching)\n\n## 二、Python 资源\n\n- [Python中文开发者社区](https://www.pythontab.com/)\n- [Python 资源大全中文版](https://zhuanlan.zhihu.com/p/52957088)\n- [Python-100天从新手到大师（github）](https://github.com/jackfrued/Python-100-Days)\n- [GitHub上入门开发项目汇总（含Python）](https://github.com/521xueweihan/HelloGitHub)\n- [Python面试题-1](https://github.com/taizilongxu/interview_python)\n- [Python面试题-2](https://github.com/kenwoodjw/python_interview_question)\n- [Python面试题-3](https://github.com/JushuangQiao/Python-Offer)\n- [Awesome Python Applications 酷炫Python小应用](https://github.com/mahmoud/awesome-python-applications)\n- [Python艺术二维码生成器](https://github.com/sylnsfar/qrcode)\n- [Python有趣脚本集合](https://github.com/injetlee/Python)\n- [Python数据结构和算法（英文）](https://github.com/keon/algorithms)\n- [Awesome Python Applications](https://github.com/mahmoud/awesome-python-applications)\n- [Python常见算法刷题](https://github.com/apachecn/Interview/tree/master/docs/Algorithm/Leetcode/Python)\n- [Python 第三方库whl文件下载](https://www.lfd.uci.edu/~gohlke/pythonlibs/#)\n\n## 三、Python 爬虫\n\n- [awesome-spider 爬虫集合](https://github.com/facert/awesome-spider)\n- [python模拟登陆&爬虫](https://github.com/CriseLYJ/awesome-python-login-model)\n- [Python爬虫代理IP池(proxy pool)](https://github.com/jhao104/proxy_pool)\n- [Python入门网络爬虫之精华版](https://github.com/lining0806/PythonSpiderNotes)\n- [Python3网络爬虫实战](https://github.com/Jack-Cherish/python-spider)\n- [有趣的Python爬虫和Python数据分析小项目](https://github.com/Alfred1984/interesting-python)\n- [Python入门爬虫](https://github.com/lining0806/PythonSpiderNotes)\n- [Requests 英文文档](https://2.python-requests.org/en/master/)\n- [Requests 中文文档](https://2.python-requests.org//zh_CN/latest/)\n- [Scrapy 英文文档](https://docs.scrapy.org/en/latest/)\n- [Scrapy 中文文档](https://scrapy-chs.readthedocs.io/zh_CN/0.24/)\n- [Pyspider 英文文档](http://docs.pyspider.org/en/latest/)\n- [BeautifulSoup中文文档](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/)\n- [BeautifulSoup英文文档](https://www.crummy.com/software/BeautifulSoup/bs4/doc/)\n- [Xpath教程](https://www.runoob.com/xpath/xpath-tutorial.html)\n- [selenium中文文档](https://selenium-python-zh.readthedocs.io/en/latest/)\n\n## 四、Python 可视化\n\n- [seaborn 英文文档](http://seaborn.pydata.org/)\n- [seaborn 中文文档](https://seaborn.apachecn.org/#/)\n- [matplotlib 英文文档](https://matplotlib.org/)\n- [matplotlib 中文文档（官方）](https://www.matplotlib.org.cn/)\n- [matplotlib 中文文档](https://wizardforcel.gitbooks.io/matplotlib-user-guide/content/)（非官方）\n- [pyecharts 中文文档（官方）](https://pyecharts.org/#/zh-cn/intro)\n- [plotly绘图官方教程 英文文档](https://plot.ly/python/)\n- [bokeh动态可视化教程 英文文档](https://bokeh.pydata.org/en/latest/)\n\n## 五、python 数据分析\n\n- [pandas 英文文档](http://pandas.pydata.org/)\n- [pandas 中文文档（官方）](https://www.pypandas.cn/)\n- [pandas 中文文档（非官方）](http://pandas.apachecn.org/)\n- [利用python进行数据分析 第二版（中文）](https://github.com/apachecn/pyda-2e-zh)\n- [numpy 英文文档](http://www.numpy.org/)\n- [numpy中文文档（官方）](https://www.numpy.org.cn/)\n- [numpy 中文文档（非官方）](http://numpy.apachecn.org/)\n- [numpy 100 练习题](https://github.com/rougier/numpy-100)\n- [python科学计算笔记（英文）](https://github.com/jrjohansson/scientific-python-lectures)\n- [数据科学速查表（英文）](https://github.com/FavioVazquez/ds-cheatsheets)\n- [python data science handbook（python数据科学手册）](https://jakevdp.github.io/PythonDataScienceHandbook/)\n- [data science python notebook（数据科学python笔记）](https://github.com/donnemartin/data-science-ipython-notebooks)\n\n## 六、python 机器学习\n\n- [AI Learning 机器学习实战 中文（GitHub 15000星）](https://github.com/apachecn/AiLearning)\n- [data-science-ipython-notebooks](https://github.com/donnemartin/data-science-ipython-notebooks)\n- [Kaggle 机器学习基础学习](https://www.kaggle.com/learn/overview)\n- [动手学深度学习](http://zh.d2l.ai/index.html)\n- [scikit-learn 英文文档](https://scikit-learn.org/stable/)\n- [scikit-learn 中文文档](http://sklearn.apachecn.org/#/)\n- [xgboost 中文文档](https://xgboost.apachecn.org/#/)\n- [pytorch中文网](https://www.pytorchtutorial.com/)\n- [machine learning mastery 博客（英文）](https://machinelearningmastery.com/)\n- [机器学习笔记 英文](https://github.com/ageron/handson-ml)\n- [面向机器学习的特征工程](http://fe4ml.apachecn.org/#/)\n- [keras英文文档](https://keras.io/)\n- [keras中文文档](https://keras.io/zh/)\n- [TensorFlow Examples](https://github.com/aymericdamien/TensorFlow-Examples)\n- [面试-机器学习算法试题及讲解（中文）](https://github.com/imhuay/Algorithm_Interview_Notes-Chinese)\n- [机器学习100天练习（英文）](https://github.com/Avik-Jain/100-Days-Of-ML-Code)\n- [机器学习100天练习（中文）](https://github.com/MLEveryday/100-Days-Of-ML-Code)\n- [吴恩达-机器学习 视频（b站）](https://www.bilibili.com/video/av9912938?from=search&seid=11914534456869662293)\n- [机器学习算法基础 视频（b站）](https://www.bilibili.com/video/av37947862?from=search&seid=11914534456869662293)\n- [吴恩达-神经网络和深度学习 视频（b站）](https://www.bilibili.com/video/av34661735?from=search&seid=9109291334133521229)\n- [李飞飞-深度学习与计算机视觉 视频（b站）](https://www.bilibili.com/video/av17741845?from=search&seid=9109291334133521229)\n- [kaggle等数据比赛TOP解决方案集合](https://github.com/Smilexuhc/Data-Competition-TopSolution)\n- [机器学习·深度学习·NLP 面试基础知识](https://github.com/NLP-LOVE/ML-NLP)\n\n## **七、数据库**\n\n- [21分钟MySQL入门教程](http://www.cnblogs.com/mr-wid/archive/2013/05/09/3068229.html)\n- [W3cschool SQL基础教程](http://www.w3school.com.cn/sql/index.asp)\n- [菜鸟教程 SQL基础](https://www.runoob.com/sql/sql-intro.html)\n- [易百教程 SQL基础](https://www.yiibai.com/sql/)\n- [廖雪峰SQL教程](https://www.liaoxuefeng.com/wiki/1177760294764384)\n- [SQL在线手册](http://www.esk365.com/zxsc/datebase/sql/)\n- [SQL 在线速查手册](https://www.w3xue.com/manual/sql/)\n- [PL/SQL教程](https://www.oraclejsq.com/plsql/010200446.html)\n- [PL/SQL中文教程](https://plsql-tutorial.com/zh-CN/)\n- [Oracle SQL Developer 入门](https://www.oracle.com/ocom/groups/public/@otn/documents/webcontent/229078_zhs.htm)\n- [MySQL 5.1参考中文手册](http://download.nust.na/pub6/mysql/doc/refman/5.1/zh/index.html)\n- [SQL 手册（github）](https://github.com/apache/incubator-doris/wiki/Sql-Reference)\n- [Oracle SQL 语言文档](https://www.oracle.com/technetwork/cn/database/database-technologies/sql/documentation/index.html)\n- [SQL reference英文](http://doris.apache.org/guides/sql_reference.html)\n- [MySQL索引背后的数据结构及算法原理](http://blog.codinglabs.org/articles/theory-of-mysql-index.html)\n- [PostgreSQL 9.5.3 中文文档](http://www.postgres.cn/docs/9.5/index.html)\n- [NoSQL数据库笔谈](http://old.sebug.net/paper/databases/nosql/Nosql.html)\n- [The Little MongoDB Book](https://github.com/justinyhuang/the-little-mongodb-book-cn/blob/master/mongodb.md)\n- [The Little Redis Book](https://github.com/JasonLai256/the-little-redis-book/blob/master/cn/redis.md)\n- [Apache Spark 设计与实现](https://github.com/JerryLead/SparkInternals/tree/master/markdown)\n- [Kaggle SQL学习（英文）](https://www.kaggle.com/learn/intro-to-sql)\n\n## 八、Tableau\n\n- [Tableau官方学习平台（含视频、文档）](https://www.tableau.com/zh-cn/learn)\n- [Tableau社区](https://public.tableau.com/s/?_ga=2.71823507.1676038997.1560873286-1514687749.1560873286)\n- [Tableau作品精选Viz](https://public.tableau.com/s/gallery)\n- [Tableau教程_w3cschool](https://www.w3cschool.cn/tableau/)\n- [Tableau教程- W3xue](https://www.w3xue.com/soft/tableau/)\n- [Tableau中文手册](http://www.kubiji.cn/book/tableau/)\n- [Tableau官网视频培训教材 英文版（b站）](https://www.bilibili.com/video/av17433768?from=search&seid=18433794970164707199)\n- [Tableau官网视频培训教材 中文版（b站）](https://www.bilibili.com/video/av57762618?from=search&seid=18433794970164707199)\n- [Tableau 14天入门训练营（b站）](https://www.bilibili.com/video/av57932052?from=search&seid=18433794970164707199)\n- [Tableau商业智能与可视化应用实战（b站）](https://www.bilibili.com/video/av45663036?from=search&seid=18433794970164707199)\n- [如何学习tableau？](https://www.zhihu.com/question/29478254)\n- [MakeOver Monday(Tablea作品集)](http://www.doc88.com/p-9969131399830.html)\n- [Tableau制作小案例](https://mp.weixin.qq.com/s/UlB_D6UMgshQ4jquG_UTuA)（优阅达）\n- [iconfont（图标库，可用于dash board制作）](https://www.iconfont.cn/?spm=a313x.7781069.1998910419.d4d0a486a)\n\n## 九、大数据\n\n- [spark 中文文档](http://spark.apachecn.org/#/)\n- [kafka 中文文档](http://kafka.apachecn.org/)\n- [hbase 中文文档](http://hbase.apachecn.org/#/)\n- [flink官网](https://flink.apache.org/zh/)\n- [flink 中文文档](https://flink.apachecn.org/docs/1.7-SNAPSHOT/#/)\n- [Hive 英文文档](https://hive.apache.org/)\n- [Hive 中文教程](https://www.docs4dev.com/docs/zh/apache-hive/3.1.1/reference/Home.html)\n- [Spark 编程指南简体中文版](https://aiyanbo.gitbooks.io/spark-programming-guide-zh-cn/content/)\n- [Scala 英文文档](https://docs.scala-lang.org/)\n- [Scala 中文文档](https://docs.scala-lang.org/zh-cn/overviews/)\n- [Scala Tutorial 中文版](https://www.scala-lang.org/docu/files/ScalaTutorial-zh_CN.pdf)\n- [Scala 菜鸟教程](https://www.runoob.com/scala/scala-tutorial.html)\n- [Scala w3cschool教程](https://www.w3cschool.cn/scala/)\n\n## 十、数理统计知识\n\n- [麻省理工公开课-线性代数](http://open.163.com/special/opencourse/daishu.html)  \n- [可汗学院公开课：线性代数](http://open.163.com/special/Khan/linearalgebra.html)  \n- [同济大学公开课：线性代数](http://open.163.com/movie/2019/4/9/M/MEC1UPOHH_MEC1USS9M.html)  \n- [山东大学MOOC-线性代数](https://www.icourse163.org/course/sdu-55001)  \n- [线性代数讲义 - 华东师范大学数学系](http://math.ecnu.edu.cn/~hryuan/preprint/la.pdf)  \n- [线性代数-北京大学出版社](http://www.pup.cn/ztpage/gzgz/PDF/book/高职数学/13.线性代数.pdf)  \n- [线性代数-维基百科](https://link.juejin.im/?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FLinear_algebra)\n- [MIT-18.06-线性代数-完整笔记](https://github.com/apachecn/18.06-linalg-notes)\n- [两小时讲完线性代数](https://www.bilibili.com/video/av7564112?from=search&seid=10663434405036315716)\n- [矩阵编码：线性代数在计算机科学中的应用](http://codingthematrix.com/)  \n- [线性代数应用-戴维森学院](https://www.edx.org/course/applications-linear-algebra-part-1-davidsonx-d003x-1)\n- [可汗学院公开课：统计学](http://open.163.com/special/Khan/khstatistics.html)  \n- [加利福尼亚大学伯克利分校公开课：统计学](http://open.163.com/movie/2017/5/0/8/MCJQECVBF_MCJSVSQ08.html)  \n- [浙江大学公开课：概率论与数理统计](http://open.163.com/movie/2019/4/R/6/MEC1U20OT_MEC1U8MR6.html)  \n- [可汗学院公开课：概率](http://open.163.com/special/Khan/probability.html)  \n- [概率论与数理统计-重庆大学公开课](http://www.xuetangx.com/courses/course-v1:CQU+MATH20041X+2018_T2/about)  \n- [概率论与数理统计-北京大学公开课](https://www.bilibili.com/video/av34021718/)  \n- [概率论与数理统计-中科大公开课](https://www.bilibili.com/video/av3781284/)  \n- [商务与经济统计-北师大公开课](http://www.icourse163.org/course/BNU-1003604001)  \n- [哈佛大学统计学110讲稿](http://projects.iq.harvard.edu/stat110/youtube)\n- [概率论和统计学](https://www.khanacademy.org/math/probability)-Khan Academy  \n- [麻省理工学院公开课：微积分重点](http://open.163.com/special/opencourse/weijifen.html)  \n- [清华大学微积分主讲-刘坤林](https://www.bilibili.com/video/av29845488/)  \n- [微积分-浙江大学](https://www.bilibili.com/video/av39156411?from=search&seid=11125098883390790554)  \n- [麻省理工学院公开课：多变量微积分](http://open.163.com/special/opencourse/multivariable.html)  \n- [可汗学院公开课：微积分预备](http://open.163.com/special/Khan/precalculus.html)  \n- [麻省理工学院公开课：单变量微积分](http://open.163.com/special/sp/singlevariablecalculus.html)  \n- [HACC公开课：微积分1](http://open.163.com/movie/2018/12/0/H/ME19860FO_ME1AUHF0H.html)  \n- [HACC公开课：微积分II](http://open.163.com/movie/2018/12/1/S/ME2SKV6B0_ME2UJ1G1S.html)  \n- [数学分析讲义 - 南京大学数学系](http://math.nju.edu.cn/~meijq/calculus/notes.pdf)  \n- [7天搞定微积分](http://www.rsqdz.net:907/upload/userfile/naturalism/shuxue/7天搞定微积分.李巧丽.扫描版.pdf)  \n- [托马斯微积分](https://github.com/gnuhub/books-1/blob/master/数学●基础数学●数学分析/托马斯微积分.pdf)\n\n## 十一、量化\n\n- [Python量化投资](https://www.lizenghai.com/)\n\n## 十一、数据集/接口\n\n- [sklearn自带数据集](https://scikit-learn.org/stable/modules/classes.html?highlight=dataset#module-sklearn.datasets)\n- [kaggle数据集](https://www.kaggle.com/datasets)\n- [UCI数据集](https://archive.ics.uci.edu/ml/datasets.php)\n- [科赛网数据集](https://www.kesci.com/home/dataset)  \n- [tushare财经股票基金数据接口](http://tushare.org/)\n- [akshare财经股票基金数据接口](https://akshare.readthedocs.io/zh_CN/latest/)\n- [baostock财经股票基金数据接口](http://baostock.com/baostock/index.php/%E9%A6%96%E9%A1%B5)\n\n## 十二、地理信息分析\n\n- [geoplot地理空间可视化官方文档](https://residentmario.github.io/geoplot/index.html)\n- [folium地图可视化官方文档](https://python-visualization.github.io/folium/)\n- [geopandas地理空间数据处理官方文档](https://geopandas.org/)\n- [cartopy地理空间可视化官方文档](https://scitools.org.uk/cartopy/docs/latest/)\n\n## References\n\nhttps://github.com/hi-weijun/PythonDataScience-Collections\n","slug":"D5--大数据分析相关资料分享","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a3003n4cv99jkgb0y7","content":"<h2 id=\"Summary\">Summary</h2>\n<p>含 python、爬虫、数据库、大数据、可视化、机器学习、tableau、统计学、地理信息等</p>\n<h2 id=\"一、Python-基础\">一、Python 基础</h2>\n<ul>\n<li><a href=\"https://bop.mol.uno/\">Python简明教程（Python3）</a></li>\n<li><a href=\"https://docs.python.org/zh-cn/3/tutorial/index.html\">Python3.7.4官方中文文档</a></li>\n<li><a href=\"https://docs.python.org/zh-cn/3/library/index.html#library-index\">Python标准库中文版</a></li>\n<li><a href=\"http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000\">廖雪峰 Python 3 中文教程</a></li>\n<li><a href=\"http://www.pythondoc.com/pythontutorial3/index.html\">Python 3.3 官方教程中文版</a></li>\n<li><a href=\"https://python3-cookbook.readthedocs.io/zh_CN/latest/\">Python3 Cookbook 中文版</a></li>\n<li><a href=\"https://ipython-books.github.io/\">IPython CookBook 英文版</a></li>\n<li><a href=\"http://old.sebug.net/paper/books/LearnPythonTheHardWay/\">笨办法学 Python</a> (<a href=\"http://liam0205.me/attachment/Python/PyHardWay/Learn_Python_The_Hard_Way_zh-cn.pdf\">PDF</a> <a href=\"https://www.gitbook.com/download/epub/book/wizardforcel/lpthw\">EPUB</a>)</li>\n<li><a href=\"http://codingpy.com/books/thinkpython2/\">Think Python 2e  最新版中文</a></li>\n<li><a href=\"https://wizardforcel.gitbooks.io/core-python-2e/content/\">Python 核心编程 第二版 中文</a></li>\n<li><a href=\"https://www.runoob.com/python3/python3-tutorial.html\">菜鸟教程 Python3基础</a></li>\n<li><a href=\"https://www.w3cschool.cn/python3/\">W3cschool Python3基础</a></li>\n<li><a href=\"http://pythonguidecn.readthedocs.io/zh/latest/\">Python最佳实践指南</a></li>\n<li><a href=\"https://www.gitbook.com/book/wizardforcel/python-essential-tutorial/details\">Python 精要教程</a></li>\n<li><a href=\"https://docs.pythontab.com/interpy/\">Python进阶 中文版</a></li>\n<li><a href=\"https://github.com/lijin-THU/notes-python\">中文 Python 笔记</a></li>\n<li><a href=\"https://morvanzhou.github.io/\">莫烦python教程</a></li>\n<li><a href=\"https://docs.python-guide.org/\">The Hitchhiker’s Guide to Python</a></li>\n<li><a href=\"https://github.com/TwoWater/Python\">草根学 Python</a></li>\n<li><a href=\"https://www.bilibili.com/video/av14184325/\">Python从入门到精通教程 视频（600集）</a></li>\n<li><a href=\"https://www.kaggle.com/learn/python\">Kaggle Python基础学习（英文）</a></li>\n<li><a href=\"https://github.com/selfteaching/the-craft-of-selfteaching\">李笑来-自学是门手艺-python教程</a></li>\n</ul>\n<h2 id=\"二、Python-资源\">二、Python 资源</h2>\n<ul>\n<li><a href=\"https://www.pythontab.com/\">Python中文开发者社区</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/52957088\">Python 资源大全中文版</a></li>\n<li><a href=\"https://github.com/jackfrued/Python-100-Days\">Python-100天从新手到大师（github）</a></li>\n<li><a href=\"https://github.com/521xueweihan/HelloGitHub\">GitHub上入门开发项目汇总（含Python）</a></li>\n<li><a href=\"https://github.com/taizilongxu/interview_python\">Python面试题-1</a></li>\n<li><a href=\"https://github.com/kenwoodjw/python_interview_question\">Python面试题-2</a></li>\n<li><a href=\"https://github.com/JushuangQiao/Python-Offer\">Python面试题-3</a></li>\n<li><a href=\"https://github.com/mahmoud/awesome-python-applications\">Awesome Python Applications 酷炫Python小应用</a></li>\n<li><a href=\"https://github.com/sylnsfar/qrcode\">Python艺术二维码生成器</a></li>\n<li><a href=\"https://github.com/injetlee/Python\">Python有趣脚本集合</a></li>\n<li><a href=\"https://github.com/keon/algorithms\">Python数据结构和算法（英文）</a></li>\n<li><a href=\"https://github.com/mahmoud/awesome-python-applications\">Awesome Python Applications</a></li>\n<li><a href=\"https://github.com/apachecn/Interview/tree/master/docs/Algorithm/Leetcode/Python\">Python常见算法刷题</a></li>\n<li><a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#\">Python 第三方库whl文件下载</a></li>\n</ul>\n<h2 id=\"三、Python-爬虫\">三、Python 爬虫</h2>\n<ul>\n<li><a href=\"https://github.com/facert/awesome-spider\">awesome-spider 爬虫集合</a></li>\n<li><a href=\"https://github.com/CriseLYJ/awesome-python-login-model\">python模拟登陆&amp;爬虫</a></li>\n<li><a href=\"https://github.com/jhao104/proxy_pool\">Python爬虫代理IP池(proxy pool)</a></li>\n<li><a href=\"https://github.com/lining0806/PythonSpiderNotes\">Python入门网络爬虫之精华版</a></li>\n<li><a href=\"https://github.com/Jack-Cherish/python-spider\">Python3网络爬虫实战</a></li>\n<li><a href=\"https://github.com/Alfred1984/interesting-python\">有趣的Python爬虫和Python数据分析小项目</a></li>\n<li><a href=\"https://github.com/lining0806/PythonSpiderNotes\">Python入门爬虫</a></li>\n<li><a href=\"https://2.python-requests.org/en/master/\">Requests 英文文档</a></li>\n<li><a href=\"https://2.python-requests.org//zh_CN/latest/\">Requests 中文文档</a></li>\n<li><a href=\"https://docs.scrapy.org/en/latest/\">Scrapy 英文文档</a></li>\n<li><a href=\"https://scrapy-chs.readthedocs.io/zh_CN/0.24/\">Scrapy 中文文档</a></li>\n<li><a href=\"http://docs.pyspider.org/en/latest/\">Pyspider 英文文档</a></li>\n<li><a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/\">BeautifulSoup中文文档</a></li>\n<li><a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\">BeautifulSoup英文文档</a></li>\n<li><a href=\"https://www.runoob.com/xpath/xpath-tutorial.html\">Xpath教程</a></li>\n<li><a href=\"https://selenium-python-zh.readthedocs.io/en/latest/\">selenium中文文档</a></li>\n</ul>\n<h2 id=\"四、Python-可视化\">四、Python 可视化</h2>\n<ul>\n<li><a href=\"http://seaborn.pydata.org/\">seaborn 英文文档</a></li>\n<li><a href=\"https://seaborn.apachecn.org/#/\">seaborn 中文文档</a></li>\n<li><a href=\"https://matplotlib.org/\">matplotlib 英文文档</a></li>\n<li><a href=\"https://www.matplotlib.org.cn/\">matplotlib 中文文档（官方）</a></li>\n<li><a href=\"https://wizardforcel.gitbooks.io/matplotlib-user-guide/content/\">matplotlib 中文文档</a>（非官方）</li>\n<li><a href=\"https://pyecharts.org/#/zh-cn/intro\">pyecharts 中文文档（官方）</a></li>\n<li><a href=\"https://plot.ly/python/\">plotly绘图官方教程 英文文档</a></li>\n<li><a href=\"https://bokeh.pydata.org/en/latest/\">bokeh动态可视化教程 英文文档</a></li>\n</ul>\n<h2 id=\"五、python-数据分析\">五、python 数据分析</h2>\n<ul>\n<li><a href=\"http://pandas.pydata.org/\">pandas 英文文档</a></li>\n<li><a href=\"https://www.pypandas.cn/\">pandas 中文文档（官方）</a></li>\n<li><a href=\"http://pandas.apachecn.org/\">pandas 中文文档（非官方）</a></li>\n<li><a href=\"https://github.com/apachecn/pyda-2e-zh\">利用python进行数据分析 第二版（中文）</a></li>\n<li><a href=\"http://www.numpy.org/\">numpy 英文文档</a></li>\n<li><a href=\"https://www.numpy.org.cn/\">numpy中文文档（官方）</a></li>\n<li><a href=\"http://numpy.apachecn.org/\">numpy 中文文档（非官方）</a></li>\n<li><a href=\"https://github.com/rougier/numpy-100\">numpy 100 练习题</a></li>\n<li><a href=\"https://github.com/jrjohansson/scientific-python-lectures\">python科学计算笔记（英文）</a></li>\n<li><a href=\"https://github.com/FavioVazquez/ds-cheatsheets\">数据科学速查表（英文）</a></li>\n<li><a href=\"https://jakevdp.github.io/PythonDataScienceHandbook/\">python data science handbook（python数据科学手册）</a></li>\n<li><a href=\"https://github.com/donnemartin/data-science-ipython-notebooks\">data science python notebook（数据科学python笔记）</a></li>\n</ul>\n<h2 id=\"六、python-机器学习\">六、python 机器学习</h2>\n<ul>\n<li><a href=\"https://github.com/apachecn/AiLearning\">AI Learning 机器学习实战 中文（GitHub 15000星）</a></li>\n<li><a href=\"https://github.com/donnemartin/data-science-ipython-notebooks\">data-science-ipython-notebooks</a></li>\n<li><a href=\"https://www.kaggle.com/learn/overview\">Kaggle 机器学习基础学习</a></li>\n<li><a href=\"http://zh.d2l.ai/index.html\">动手学深度学习</a></li>\n<li><a href=\"https://scikit-learn.org/stable/\">scikit-learn 英文文档</a></li>\n<li><a href=\"http://sklearn.apachecn.org/#/\">scikit-learn 中文文档</a></li>\n<li><a href=\"https://xgboost.apachecn.org/#/\">xgboost 中文文档</a></li>\n<li><a href=\"https://www.pytorchtutorial.com/\">pytorch中文网</a></li>\n<li><a href=\"https://machinelearningmastery.com/\">machine learning mastery 博客（英文）</a></li>\n<li><a href=\"https://github.com/ageron/handson-ml\">机器学习笔记 英文</a></li>\n<li><a href=\"http://fe4ml.apachecn.org/#/\">面向机器学习的特征工程</a></li>\n<li><a href=\"https://keras.io/\">keras英文文档</a></li>\n<li><a href=\"https://keras.io/zh/\">keras中文文档</a></li>\n<li><a href=\"https://github.com/aymericdamien/TensorFlow-Examples\">TensorFlow Examples</a></li>\n<li><a href=\"https://github.com/imhuay/Algorithm_Interview_Notes-Chinese\">面试-机器学习算法试题及讲解（中文）</a></li>\n<li><a href=\"https://github.com/Avik-Jain/100-Days-Of-ML-Code\">机器学习100天练习（英文）</a></li>\n<li><a href=\"https://github.com/MLEveryday/100-Days-Of-ML-Code\">机器学习100天练习（中文）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av9912938?from=search&amp;seid=11914534456869662293\">吴恩达-机器学习 视频（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av37947862?from=search&amp;seid=11914534456869662293\">机器学习算法基础 视频（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av34661735?from=search&amp;seid=9109291334133521229\">吴恩达-神经网络和深度学习 视频（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av17741845?from=search&amp;seid=9109291334133521229\">李飞飞-深度学习与计算机视觉 视频（b站）</a></li>\n<li><a href=\"https://github.com/Smilexuhc/Data-Competition-TopSolution\">kaggle等数据比赛TOP解决方案集合</a></li>\n<li><a href=\"https://github.com/NLP-LOVE/ML-NLP\">机器学习·深度学习·NLP 面试基础知识</a></li>\n</ul>\n<h2 id=\"七、数据库\"><strong>七、数据库</strong></h2>\n<ul>\n<li><a href=\"http://www.cnblogs.com/mr-wid/archive/2013/05/09/3068229.html\">21分钟MySQL入门教程</a></li>\n<li><a href=\"http://www.w3school.com.cn/sql/index.asp\">W3cschool SQL基础教程</a></li>\n<li><a href=\"https://www.runoob.com/sql/sql-intro.html\">菜鸟教程 SQL基础</a></li>\n<li><a href=\"https://www.yiibai.com/sql/\">易百教程 SQL基础</a></li>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/1177760294764384\">廖雪峰SQL教程</a></li>\n<li><a href=\"http://www.esk365.com/zxsc/datebase/sql/\">SQL在线手册</a></li>\n<li><a href=\"https://www.w3xue.com/manual/sql/\">SQL 在线速查手册</a></li>\n<li><a href=\"https://www.oraclejsq.com/plsql/010200446.html\">PL/SQL教程</a></li>\n<li><a href=\"https://plsql-tutorial.com/zh-CN/\">PL/SQL中文教程</a></li>\n<li><a href=\"https://www.oracle.com/ocom/groups/public/@otn/documents/webcontent/229078_zhs.htm\">Oracle SQL Developer 入门</a></li>\n<li><a href=\"http://download.nust.na/pub6/mysql/doc/refman/5.1/zh/index.html\">MySQL 5.1参考中文手册</a></li>\n<li><a href=\"https://github.com/apache/incubator-doris/wiki/Sql-Reference\">SQL 手册（github）</a></li>\n<li><a href=\"https://www.oracle.com/technetwork/cn/database/database-technologies/sql/documentation/index.html\">Oracle SQL 语言文档</a></li>\n<li><a href=\"http://doris.apache.org/guides/sql_reference.html\">SQL reference英文</a></li>\n<li><a href=\"http://blog.codinglabs.org/articles/theory-of-mysql-index.html\">MySQL索引背后的数据结构及算法原理</a></li>\n<li><a href=\"http://www.postgres.cn/docs/9.5/index.html\">PostgreSQL 9.5.3 中文文档</a></li>\n<li><a href=\"http://old.sebug.net/paper/databases/nosql/Nosql.html\">NoSQL数据库笔谈</a></li>\n<li><a href=\"https://github.com/justinyhuang/the-little-mongodb-book-cn/blob/master/mongodb.md\">The Little MongoDB Book</a></li>\n<li><a href=\"https://github.com/JasonLai256/the-little-redis-book/blob/master/cn/redis.md\">The Little Redis Book</a></li>\n<li><a href=\"https://github.com/JerryLead/SparkInternals/tree/master/markdown\">Apache Spark 设计与实现</a></li>\n<li><a href=\"https://www.kaggle.com/learn/intro-to-sql\">Kaggle SQL学习（英文）</a></li>\n</ul>\n<h2 id=\"八、Tableau\">八、Tableau</h2>\n<ul>\n<li><a href=\"https://www.tableau.com/zh-cn/learn\">Tableau官方学习平台（含视频、文档）</a></li>\n<li><a href=\"https://public.tableau.com/s/?_ga=2.71823507.1676038997.1560873286-1514687749.1560873286\">Tableau社区</a></li>\n<li><a href=\"https://public.tableau.com/s/gallery\">Tableau作品精选Viz</a></li>\n<li><a href=\"https://www.w3cschool.cn/tableau/\">Tableau教程_w3cschool</a></li>\n<li><a href=\"https://www.w3xue.com/soft/tableau/\">Tableau教程- W3xue</a></li>\n<li><a href=\"http://www.kubiji.cn/book/tableau/\">Tableau中文手册</a></li>\n<li><a href=\"https://www.bilibili.com/video/av17433768?from=search&amp;seid=18433794970164707199\">Tableau官网视频培训教材 英文版（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av57762618?from=search&amp;seid=18433794970164707199\">Tableau官网视频培训教材 中文版（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av57932052?from=search&amp;seid=18433794970164707199\">Tableau 14天入门训练营（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av45663036?from=search&amp;seid=18433794970164707199\">Tableau商业智能与可视化应用实战（b站）</a></li>\n<li><a href=\"https://www.zhihu.com/question/29478254\">如何学习tableau？</a></li>\n<li><a href=\"http://www.doc88.com/p-9969131399830.html\">MakeOver Monday(Tablea作品集)</a></li>\n<li><a href=\"https://mp.weixin.qq.com/s/UlB_D6UMgshQ4jquG_UTuA\">Tableau制作小案例</a>（优阅达）</li>\n<li><a href=\"https://www.iconfont.cn/?spm=a313x.7781069.1998910419.d4d0a486a\">iconfont（图标库，可用于dash board制作）</a></li>\n</ul>\n<h2 id=\"九、大数据\">九、大数据</h2>\n<ul>\n<li><a href=\"http://spark.apachecn.org/#/\">spark 中文文档</a></li>\n<li><a href=\"http://kafka.apachecn.org/\">kafka 中文文档</a></li>\n<li><a href=\"http://hbase.apachecn.org/#/\">hbase 中文文档</a></li>\n<li><a href=\"https://flink.apache.org/zh/\">flink官网</a></li>\n<li><a href=\"https://flink.apachecn.org/docs/1.7-SNAPSHOT/#/\">flink 中文文档</a></li>\n<li><a href=\"https://hive.apache.org/\">Hive 英文文档</a></li>\n<li><a href=\"https://www.docs4dev.com/docs/zh/apache-hive/3.1.1/reference/Home.html\">Hive 中文教程</a></li>\n<li><a href=\"https://aiyanbo.gitbooks.io/spark-programming-guide-zh-cn/content/\">Spark 编程指南简体中文版</a></li>\n<li><a href=\"https://docs.scala-lang.org/\">Scala 英文文档</a></li>\n<li><a href=\"https://docs.scala-lang.org/zh-cn/overviews/\">Scala 中文文档</a></li>\n<li><a href=\"https://www.scala-lang.org/docu/files/ScalaTutorial-zh_CN.pdf\">Scala Tutorial 中文版</a></li>\n<li><a href=\"https://www.runoob.com/scala/scala-tutorial.html\">Scala 菜鸟教程</a></li>\n<li><a href=\"https://www.w3cschool.cn/scala/\">Scala w3cschool教程</a></li>\n</ul>\n<h2 id=\"十、数理统计知识\">十、数理统计知识</h2>\n<ul>\n<li><a href=\"http://open.163.com/special/opencourse/daishu.html\">麻省理工公开课-线性代数</a></li>\n<li><a href=\"http://open.163.com/special/Khan/linearalgebra.html\">可汗学院公开课：线性代数</a></li>\n<li><a href=\"http://open.163.com/movie/2019/4/9/M/MEC1UPOHH_MEC1USS9M.html\">同济大学公开课：线性代数</a></li>\n<li><a href=\"https://www.icourse163.org/course/sdu-55001\">山东大学MOOC-线性代数</a></li>\n<li><a href=\"http://math.ecnu.edu.cn/~hryuan/preprint/la.pdf\">线性代数讲义 - 华东师范大学数学系</a></li>\n<li><a href=\"http://www.pup.cn/ztpage/gzgz/PDF/book/%E9%AB%98%E8%81%8C%E6%95%B0%E5%AD%A6/13.%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0.pdf\">线性代数-北京大学出版社</a></li>\n<li><a href=\"https://link.juejin.im/?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FLinear_algebra\">线性代数-维基百科</a></li>\n<li><a href=\"https://github.com/apachecn/18.06-linalg-notes\">MIT-18.06-线性代数-完整笔记</a></li>\n<li><a href=\"https://www.bilibili.com/video/av7564112?from=search&amp;seid=10663434405036315716\">两小时讲完线性代数</a></li>\n<li><a href=\"http://codingthematrix.com/\">矩阵编码：线性代数在计算机科学中的应用</a></li>\n<li><a href=\"https://www.edx.org/course/applications-linear-algebra-part-1-davidsonx-d003x-1\">线性代数应用-戴维森学院</a></li>\n<li><a href=\"http://open.163.com/special/Khan/khstatistics.html\">可汗学院公开课：统计学</a></li>\n<li><a href=\"http://open.163.com/movie/2017/5/0/8/MCJQECVBF_MCJSVSQ08.html\">加利福尼亚大学伯克利分校公开课：统计学</a></li>\n<li><a href=\"http://open.163.com/movie/2019/4/R/6/MEC1U20OT_MEC1U8MR6.html\">浙江大学公开课：概率论与数理统计</a></li>\n<li><a href=\"http://open.163.com/special/Khan/probability.html\">可汗学院公开课：概率</a></li>\n<li><a href=\"http://www.xuetangx.com/courses/course-v1:CQU+MATH20041X+2018_T2/about\">概率论与数理统计-重庆大学公开课</a></li>\n<li><a href=\"https://www.bilibili.com/video/av34021718/\">概率论与数理统计-北京大学公开课</a></li>\n<li><a href=\"https://www.bilibili.com/video/av3781284/\">概率论与数理统计-中科大公开课</a></li>\n<li><a href=\"http://www.icourse163.org/course/BNU-1003604001\">商务与经济统计-北师大公开课</a></li>\n<li><a href=\"http://projects.iq.harvard.edu/stat110/youtube\">哈佛大学统计学110讲稿</a></li>\n<li><a href=\"https://www.khanacademy.org/math/probability\">概率论和统计学</a>-Khan Academy</li>\n<li><a href=\"http://open.163.com/special/opencourse/weijifen.html\">麻省理工学院公开课：微积分重点</a></li>\n<li><a href=\"https://www.bilibili.com/video/av29845488/\">清华大学微积分主讲-刘坤林</a></li>\n<li><a href=\"https://www.bilibili.com/video/av39156411?from=search&amp;seid=11125098883390790554\">微积分-浙江大学</a></li>\n<li><a href=\"http://open.163.com/special/opencourse/multivariable.html\">麻省理工学院公开课：多变量微积分</a></li>\n<li><a href=\"http://open.163.com/special/Khan/precalculus.html\">可汗学院公开课：微积分预备</a></li>\n<li><a href=\"http://open.163.com/special/sp/singlevariablecalculus.html\">麻省理工学院公开课：单变量微积分</a></li>\n<li><a href=\"http://open.163.com/movie/2018/12/0/H/ME19860FO_ME1AUHF0H.html\">HACC公开课：微积分1</a></li>\n<li><a href=\"http://open.163.com/movie/2018/12/1/S/ME2SKV6B0_ME2UJ1G1S.html\">HACC公开课：微积分II</a></li>\n<li><a href=\"http://math.nju.edu.cn/~meijq/calculus/notes.pdf\">数学分析讲义 - 南京大学数学系</a></li>\n<li><a href=\"http://www.rsqdz.net:907/upload/userfile/naturalism/shuxue/7%E5%A4%A9%E6%90%9E%E5%AE%9A%E5%BE%AE%E7%A7%AF%E5%88%86.%E6%9D%8E%E5%B7%A7%E4%B8%BD.%E6%89%AB%E6%8F%8F%E7%89%88.pdf\">7天搞定微积分</a></li>\n<li><a href=\"https://github.com/gnuhub/books-1/blob/master/%E6%95%B0%E5%AD%A6%E2%97%8F%E5%9F%BA%E7%A1%80%E6%95%B0%E5%AD%A6%E2%97%8F%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90/%E6%89%98%E9%A9%AC%E6%96%AF%E5%BE%AE%E7%A7%AF%E5%88%86.pdf\">托马斯微积分</a></li>\n</ul>\n<h2 id=\"十一、量化\">十一、量化</h2>\n<ul>\n<li><a href=\"https://www.lizenghai.com/\">Python量化投资</a></li>\n</ul>\n<h2 id=\"十一、数据集-接口\">十一、数据集/接口</h2>\n<ul>\n<li><a href=\"https://scikit-learn.org/stable/modules/classes.html?highlight=dataset#module-sklearn.datasets\">sklearn自带数据集</a></li>\n<li><a href=\"https://www.kaggle.com/datasets\">kaggle数据集</a></li>\n<li><a href=\"https://archive.ics.uci.edu/ml/datasets.php\">UCI数据集</a></li>\n<li><a href=\"https://www.kesci.com/home/dataset\">科赛网数据集</a></li>\n<li><a href=\"http://tushare.org/\">tushare财经股票基金数据接口</a></li>\n<li><a href=\"https://akshare.readthedocs.io/zh_CN/latest/\">akshare财经股票基金数据接口</a></li>\n<li><a href=\"http://baostock.com/baostock/index.php/%E9%A6%96%E9%A1%B5\">baostock财经股票基金数据接口</a></li>\n</ul>\n<h2 id=\"十二、地理信息分析\">十二、地理信息分析</h2>\n<ul>\n<li><a href=\"https://residentmario.github.io/geoplot/index.html\">geoplot地理空间可视化官方文档</a></li>\n<li><a href=\"https://python-visualization.github.io/folium/\">folium地图可视化官方文档</a></li>\n<li><a href=\"https://geopandas.org/\">geopandas地理空间数据处理官方文档</a></li>\n<li><a href=\"https://scitools.org.uk/cartopy/docs/latest/\">cartopy地理空间可视化官方文档</a></li>\n</ul>\n<h2 id=\"References\">References</h2>\n<p><a href=\"https://github.com/hi-weijun/PythonDataScience-Collections\">https://github.com/hi-weijun/PythonDataScience-Collections</a></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<h2 id=\"Summary\">Summary</h2>\n<p>含 python、爬虫、数据库、大数据、可视化、机器学习、tableau、统计学、地理信息等</p>\n<h2 id=\"一、Python-基础\">一、Python 基础</h2>\n<ul>\n<li><a href=\"https://bop.mol.uno/\">Python简明教程（Python3）</a></li>\n<li><a href=\"https://docs.python.org/zh-cn/3/tutorial/index.html\">Python3.7.4官方中文文档</a></li>\n<li><a href=\"https://docs.python.org/zh-cn/3/library/index.html#library-index\">Python标准库中文版</a></li>\n<li><a href=\"http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000\">廖雪峰 Python 3 中文教程</a></li>\n<li><a href=\"http://www.pythondoc.com/pythontutorial3/index.html\">Python 3.3 官方教程中文版</a></li>\n<li><a href=\"https://python3-cookbook.readthedocs.io/zh_CN/latest/\">Python3 Cookbook 中文版</a></li>\n<li><a href=\"https://ipython-books.github.io/\">IPython CookBook 英文版</a></li>\n<li><a href=\"http://old.sebug.net/paper/books/LearnPythonTheHardWay/\">笨办法学 Python</a> (<a href=\"http://liam0205.me/attachment/Python/PyHardWay/Learn_Python_The_Hard_Way_zh-cn.pdf\">PDF</a> <a href=\"https://www.gitbook.com/download/epub/book/wizardforcel/lpthw\">EPUB</a>)</li>\n<li><a href=\"http://codingpy.com/books/thinkpython2/\">Think Python 2e  最新版中文</a></li>\n<li><a href=\"https://wizardforcel.gitbooks.io/core-python-2e/content/\">Python 核心编程 第二版 中文</a></li>\n<li><a href=\"https://www.runoob.com/python3/python3-tutorial.html\">菜鸟教程 Python3基础</a></li>\n<li><a href=\"https://www.w3cschool.cn/python3/\">W3cschool Python3基础</a></li>\n<li><a href=\"http://pythonguidecn.readthedocs.io/zh/latest/\">Python最佳实践指南</a></li>\n<li><a href=\"https://www.gitbook.com/book/wizardforcel/python-essential-tutorial/details\">Python 精要教程</a></li>\n<li><a href=\"https://docs.pythontab.com/interpy/\">Python进阶 中文版</a></li>\n<li><a href=\"https://github.com/lijin-THU/notes-python\">中文 Python 笔记</a></li>\n<li><a href=\"https://morvanzhou.github.io/\">莫烦python教程</a></li>\n<li><a href=\"https://docs.python-guide.org/\">The Hitchhiker’s Guide to Python</a></li>\n<li><a href=\"https://github.com/TwoWater/Python\">草根学 Python</a></li>\n<li><a href=\"https://www.bilibili.com/video/av14184325/\">Python从入门到精通教程 视频（600集）</a></li>\n<li><a href=\"https://www.kaggle.com/learn/python\">Kaggle Python基础学习（英文）</a></li>\n<li><a href=\"https://github.com/selfteaching/the-craft-of-selfteaching\">李笑来-自学是门手艺-python教程</a></li>\n</ul>\n<h2 id=\"二、Python-资源\">二、Python 资源</h2>\n<ul>\n<li><a href=\"https://www.pythontab.com/\">Python中文开发者社区</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/52957088\">Python 资源大全中文版</a></li>\n<li><a href=\"https://github.com/jackfrued/Python-100-Days\">Python-100天从新手到大师（github）</a></li>\n<li><a href=\"https://github.com/521xueweihan/HelloGitHub\">GitHub上入门开发项目汇总（含Python）</a></li>\n<li><a href=\"https://github.com/taizilongxu/interview_python\">Python面试题-1</a></li>\n<li><a href=\"https://github.com/kenwoodjw/python_interview_question\">Python面试题-2</a></li>\n<li><a href=\"https://github.com/JushuangQiao/Python-Offer\">Python面试题-3</a></li>\n<li><a href=\"https://github.com/mahmoud/awesome-python-applications\">Awesome Python Applications 酷炫Python小应用</a></li>\n<li><a href=\"https://github.com/sylnsfar/qrcode\">Python艺术二维码生成器</a></li>\n<li><a href=\"https://github.com/injetlee/Python\">Python有趣脚本集合</a></li>\n<li><a href=\"https://github.com/keon/algorithms\">Python数据结构和算法（英文）</a></li>\n<li><a href=\"https://github.com/mahmoud/awesome-python-applications\">Awesome Python Applications</a></li>\n<li><a href=\"https://github.com/apachecn/Interview/tree/master/docs/Algorithm/Leetcode/Python\">Python常见算法刷题</a></li>\n<li><a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#\">Python 第三方库whl文件下载</a></li>\n</ul>\n<h2 id=\"三、Python-爬虫\">三、Python 爬虫</h2>\n<ul>\n<li><a href=\"https://github.com/facert/awesome-spider\">awesome-spider 爬虫集合</a></li>\n<li><a href=\"https://github.com/CriseLYJ/awesome-python-login-model\">python模拟登陆&amp;爬虫</a></li>\n<li><a href=\"https://github.com/jhao104/proxy_pool\">Python爬虫代理IP池(proxy pool)</a></li>\n<li><a href=\"https://github.com/lining0806/PythonSpiderNotes\">Python入门网络爬虫之精华版</a></li>\n<li><a href=\"https://github.com/Jack-Cherish/python-spider\">Python3网络爬虫实战</a></li>\n<li><a href=\"https://github.com/Alfred1984/interesting-python\">有趣的Python爬虫和Python数据分析小项目</a></li>\n<li><a href=\"https://github.com/lining0806/PythonSpiderNotes\">Python入门爬虫</a></li>\n<li><a href=\"https://2.python-requests.org/en/master/\">Requests 英文文档</a></li>\n<li><a href=\"https://2.python-requests.org//zh_CN/latest/\">Requests 中文文档</a></li>\n<li><a href=\"https://docs.scrapy.org/en/latest/\">Scrapy 英文文档</a></li>\n<li><a href=\"https://scrapy-chs.readthedocs.io/zh_CN/0.24/\">Scrapy 中文文档</a></li>\n<li><a href=\"http://docs.pyspider.org/en/latest/\">Pyspider 英文文档</a></li>\n<li><a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/\">BeautifulSoup中文文档</a></li>\n<li><a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\">BeautifulSoup英文文档</a></li>\n<li><a href=\"https://www.runoob.com/xpath/xpath-tutorial.html\">Xpath教程</a></li>\n<li><a href=\"https://selenium-python-zh.readthedocs.io/en/latest/\">selenium中文文档</a></li>\n</ul>\n<h2 id=\"四、Python-可视化\">四、Python 可视化</h2>\n<ul>\n<li><a href=\"http://seaborn.pydata.org/\">seaborn 英文文档</a></li>\n<li><a href=\"https://seaborn.apachecn.org/#/\">seaborn 中文文档</a></li>\n<li><a href=\"https://matplotlib.org/\">matplotlib 英文文档</a></li>\n<li><a href=\"https://www.matplotlib.org.cn/\">matplotlib 中文文档（官方）</a></li>\n<li><a href=\"https://wizardforcel.gitbooks.io/matplotlib-user-guide/content/\">matplotlib 中文文档</a>（非官方）</li>\n<li><a href=\"https://pyecharts.org/#/zh-cn/intro\">pyecharts 中文文档（官方）</a></li>\n<li><a href=\"https://plot.ly/python/\">plotly绘图官方教程 英文文档</a></li>\n<li><a href=\"https://bokeh.pydata.org/en/latest/\">bokeh动态可视化教程 英文文档</a></li>\n</ul>\n<h2 id=\"五、python-数据分析\">五、python 数据分析</h2>\n<ul>\n<li><a href=\"http://pandas.pydata.org/\">pandas 英文文档</a></li>\n<li><a href=\"https://www.pypandas.cn/\">pandas 中文文档（官方）</a></li>\n<li><a href=\"http://pandas.apachecn.org/\">pandas 中文文档（非官方）</a></li>\n<li><a href=\"https://github.com/apachecn/pyda-2e-zh\">利用python进行数据分析 第二版（中文）</a></li>\n<li><a href=\"http://www.numpy.org/\">numpy 英文文档</a></li>\n<li><a href=\"https://www.numpy.org.cn/\">numpy中文文档（官方）</a></li>\n<li><a href=\"http://numpy.apachecn.org/\">numpy 中文文档（非官方）</a></li>\n<li><a href=\"https://github.com/rougier/numpy-100\">numpy 100 练习题</a></li>\n<li><a href=\"https://github.com/jrjohansson/scientific-python-lectures\">python科学计算笔记（英文）</a></li>\n<li><a href=\"https://github.com/FavioVazquez/ds-cheatsheets\">数据科学速查表（英文）</a></li>\n<li><a href=\"https://jakevdp.github.io/PythonDataScienceHandbook/\">python data science handbook（python数据科学手册）</a></li>\n<li><a href=\"https://github.com/donnemartin/data-science-ipython-notebooks\">data science python notebook（数据科学python笔记）</a></li>\n</ul>\n<h2 id=\"六、python-机器学习\">六、python 机器学习</h2>\n<ul>\n<li><a href=\"https://github.com/apachecn/AiLearning\">AI Learning 机器学习实战 中文（GitHub 15000星）</a></li>\n<li><a href=\"https://github.com/donnemartin/data-science-ipython-notebooks\">data-science-ipython-notebooks</a></li>\n<li><a href=\"https://www.kaggle.com/learn/overview\">Kaggle 机器学习基础学习</a></li>\n<li><a href=\"http://zh.d2l.ai/index.html\">动手学深度学习</a></li>\n<li><a href=\"https://scikit-learn.org/stable/\">scikit-learn 英文文档</a></li>\n<li><a href=\"http://sklearn.apachecn.org/#/\">scikit-learn 中文文档</a></li>\n<li><a href=\"https://xgboost.apachecn.org/#/\">xgboost 中文文档</a></li>\n<li><a href=\"https://www.pytorchtutorial.com/\">pytorch中文网</a></li>\n<li><a href=\"https://machinelearningmastery.com/\">machine learning mastery 博客（英文）</a></li>\n<li><a href=\"https://github.com/ageron/handson-ml\">机器学习笔记 英文</a></li>\n<li><a href=\"http://fe4ml.apachecn.org/#/\">面向机器学习的特征工程</a></li>\n<li><a href=\"https://keras.io/\">keras英文文档</a></li>\n<li><a href=\"https://keras.io/zh/\">keras中文文档</a></li>\n<li><a href=\"https://github.com/aymericdamien/TensorFlow-Examples\">TensorFlow Examples</a></li>\n<li><a href=\"https://github.com/imhuay/Algorithm_Interview_Notes-Chinese\">面试-机器学习算法试题及讲解（中文）</a></li>\n<li><a href=\"https://github.com/Avik-Jain/100-Days-Of-ML-Code\">机器学习100天练习（英文）</a></li>\n<li><a href=\"https://github.com/MLEveryday/100-Days-Of-ML-Code\">机器学习100天练习（中文）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av9912938?from=search&amp;seid=11914534456869662293\">吴恩达-机器学习 视频（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av37947862?from=search&amp;seid=11914534456869662293\">机器学习算法基础 视频（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av34661735?from=search&amp;seid=9109291334133521229\">吴恩达-神经网络和深度学习 视频（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av17741845?from=search&amp;seid=9109291334133521229\">李飞飞-深度学习与计算机视觉 视频（b站）</a></li>\n<li><a href=\"https://github.com/Smilexuhc/Data-Competition-TopSolution\">kaggle等数据比赛TOP解决方案集合</a></li>\n<li><a href=\"https://github.com/NLP-LOVE/ML-NLP\">机器学习·深度学习·NLP 面试基础知识</a></li>\n</ul>\n<h2 id=\"七、数据库\"><strong>七、数据库</strong></h2>\n<ul>\n<li><a href=\"http://www.cnblogs.com/mr-wid/archive/2013/05/09/3068229.html\">21分钟MySQL入门教程</a></li>\n<li><a href=\"http://www.w3school.com.cn/sql/index.asp\">W3cschool SQL基础教程</a></li>\n<li><a href=\"https://www.runoob.com/sql/sql-intro.html\">菜鸟教程 SQL基础</a></li>\n<li><a href=\"https://www.yiibai.com/sql/\">易百教程 SQL基础</a></li>\n<li><a href=\"https://www.liaoxuefeng.com/wiki/1177760294764384\">廖雪峰SQL教程</a></li>\n<li><a href=\"http://www.esk365.com/zxsc/datebase/sql/\">SQL在线手册</a></li>\n<li><a href=\"https://www.w3xue.com/manual/sql/\">SQL 在线速查手册</a></li>\n<li><a href=\"https://www.oraclejsq.com/plsql/010200446.html\">PL/SQL教程</a></li>\n<li><a href=\"https://plsql-tutorial.com/zh-CN/\">PL/SQL中文教程</a></li>\n<li><a href=\"https://www.oracle.com/ocom/groups/public/@otn/documents/webcontent/229078_zhs.htm\">Oracle SQL Developer 入门</a></li>\n<li><a href=\"http://download.nust.na/pub6/mysql/doc/refman/5.1/zh/index.html\">MySQL 5.1参考中文手册</a></li>\n<li><a href=\"https://github.com/apache/incubator-doris/wiki/Sql-Reference\">SQL 手册（github）</a></li>\n<li><a href=\"https://www.oracle.com/technetwork/cn/database/database-technologies/sql/documentation/index.html\">Oracle SQL 语言文档</a></li>\n<li><a href=\"http://doris.apache.org/guides/sql_reference.html\">SQL reference英文</a></li>\n<li><a href=\"http://blog.codinglabs.org/articles/theory-of-mysql-index.html\">MySQL索引背后的数据结构及算法原理</a></li>\n<li><a href=\"http://www.postgres.cn/docs/9.5/index.html\">PostgreSQL 9.5.3 中文文档</a></li>\n<li><a href=\"http://old.sebug.net/paper/databases/nosql/Nosql.html\">NoSQL数据库笔谈</a></li>\n<li><a href=\"https://github.com/justinyhuang/the-little-mongodb-book-cn/blob/master/mongodb.md\">The Little MongoDB Book</a></li>\n<li><a href=\"https://github.com/JasonLai256/the-little-redis-book/blob/master/cn/redis.md\">The Little Redis Book</a></li>\n<li><a href=\"https://github.com/JerryLead/SparkInternals/tree/master/markdown\">Apache Spark 设计与实现</a></li>\n<li><a href=\"https://www.kaggle.com/learn/intro-to-sql\">Kaggle SQL学习（英文）</a></li>\n</ul>\n<h2 id=\"八、Tableau\">八、Tableau</h2>\n<ul>\n<li><a href=\"https://www.tableau.com/zh-cn/learn\">Tableau官方学习平台（含视频、文档）</a></li>\n<li><a href=\"https://public.tableau.com/s/?_ga=2.71823507.1676038997.1560873286-1514687749.1560873286\">Tableau社区</a></li>\n<li><a href=\"https://public.tableau.com/s/gallery\">Tableau作品精选Viz</a></li>\n<li><a href=\"https://www.w3cschool.cn/tableau/\">Tableau教程_w3cschool</a></li>\n<li><a href=\"https://www.w3xue.com/soft/tableau/\">Tableau教程- W3xue</a></li>\n<li><a href=\"http://www.kubiji.cn/book/tableau/\">Tableau中文手册</a></li>\n<li><a href=\"https://www.bilibili.com/video/av17433768?from=search&amp;seid=18433794970164707199\">Tableau官网视频培训教材 英文版（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av57762618?from=search&amp;seid=18433794970164707199\">Tableau官网视频培训教材 中文版（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av57932052?from=search&amp;seid=18433794970164707199\">Tableau 14天入门训练营（b站）</a></li>\n<li><a href=\"https://www.bilibili.com/video/av45663036?from=search&amp;seid=18433794970164707199\">Tableau商业智能与可视化应用实战（b站）</a></li>\n<li><a href=\"https://www.zhihu.com/question/29478254\">如何学习tableau？</a></li>\n<li><a href=\"http://www.doc88.com/p-9969131399830.html\">MakeOver Monday(Tablea作品集)</a></li>\n<li><a href=\"https://mp.weixin.qq.com/s/UlB_D6UMgshQ4jquG_UTuA\">Tableau制作小案例</a>（优阅达）</li>\n<li><a href=\"https://www.iconfont.cn/?spm=a313x.7781069.1998910419.d4d0a486a\">iconfont（图标库，可用于dash board制作）</a></li>\n</ul>\n<h2 id=\"九、大数据\">九、大数据</h2>\n<ul>\n<li><a href=\"http://spark.apachecn.org/#/\">spark 中文文档</a></li>\n<li><a href=\"http://kafka.apachecn.org/\">kafka 中文文档</a></li>\n<li><a href=\"http://hbase.apachecn.org/#/\">hbase 中文文档</a></li>\n<li><a href=\"https://flink.apache.org/zh/\">flink官网</a></li>\n<li><a href=\"https://flink.apachecn.org/docs/1.7-SNAPSHOT/#/\">flink 中文文档</a></li>\n<li><a href=\"https://hive.apache.org/\">Hive 英文文档</a></li>\n<li><a href=\"https://www.docs4dev.com/docs/zh/apache-hive/3.1.1/reference/Home.html\">Hive 中文教程</a></li>\n<li><a href=\"https://aiyanbo.gitbooks.io/spark-programming-guide-zh-cn/content/\">Spark 编程指南简体中文版</a></li>\n<li><a href=\"https://docs.scala-lang.org/\">Scala 英文文档</a></li>\n<li><a href=\"https://docs.scala-lang.org/zh-cn/overviews/\">Scala 中文文档</a></li>\n<li><a href=\"https://www.scala-lang.org/docu/files/ScalaTutorial-zh_CN.pdf\">Scala Tutorial 中文版</a></li>\n<li><a href=\"https://www.runoob.com/scala/scala-tutorial.html\">Scala 菜鸟教程</a></li>\n<li><a href=\"https://www.w3cschool.cn/scala/\">Scala w3cschool教程</a></li>\n</ul>\n<h2 id=\"十、数理统计知识\">十、数理统计知识</h2>\n<ul>\n<li><a href=\"http://open.163.com/special/opencourse/daishu.html\">麻省理工公开课-线性代数</a></li>\n<li><a href=\"http://open.163.com/special/Khan/linearalgebra.html\">可汗学院公开课：线性代数</a></li>\n<li><a href=\"http://open.163.com/movie/2019/4/9/M/MEC1UPOHH_MEC1USS9M.html\">同济大学公开课：线性代数</a></li>\n<li><a href=\"https://www.icourse163.org/course/sdu-55001\">山东大学MOOC-线性代数</a></li>\n<li><a href=\"http://math.ecnu.edu.cn/~hryuan/preprint/la.pdf\">线性代数讲义 - 华东师范大学数学系</a></li>\n<li><a href=\"http://www.pup.cn/ztpage/gzgz/PDF/book/%E9%AB%98%E8%81%8C%E6%95%B0%E5%AD%A6/13.%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0.pdf\">线性代数-北京大学出版社</a></li>\n<li><a href=\"https://link.juejin.im/?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FLinear_algebra\">线性代数-维基百科</a></li>\n<li><a href=\"https://github.com/apachecn/18.06-linalg-notes\">MIT-18.06-线性代数-完整笔记</a></li>\n<li><a href=\"https://www.bilibili.com/video/av7564112?from=search&amp;seid=10663434405036315716\">两小时讲完线性代数</a></li>\n<li><a href=\"http://codingthematrix.com/\">矩阵编码：线性代数在计算机科学中的应用</a></li>\n<li><a href=\"https://www.edx.org/course/applications-linear-algebra-part-1-davidsonx-d003x-1\">线性代数应用-戴维森学院</a></li>\n<li><a href=\"http://open.163.com/special/Khan/khstatistics.html\">可汗学院公开课：统计学</a></li>\n<li><a href=\"http://open.163.com/movie/2017/5/0/8/MCJQECVBF_MCJSVSQ08.html\">加利福尼亚大学伯克利分校公开课：统计学</a></li>\n<li><a href=\"http://open.163.com/movie/2019/4/R/6/MEC1U20OT_MEC1U8MR6.html\">浙江大学公开课：概率论与数理统计</a></li>\n<li><a href=\"http://open.163.com/special/Khan/probability.html\">可汗学院公开课：概率</a></li>\n<li><a href=\"http://www.xuetangx.com/courses/course-v1:CQU+MATH20041X+2018_T2/about\">概率论与数理统计-重庆大学公开课</a></li>\n<li><a href=\"https://www.bilibili.com/video/av34021718/\">概率论与数理统计-北京大学公开课</a></li>\n<li><a href=\"https://www.bilibili.com/video/av3781284/\">概率论与数理统计-中科大公开课</a></li>\n<li><a href=\"http://www.icourse163.org/course/BNU-1003604001\">商务与经济统计-北师大公开课</a></li>\n<li><a href=\"http://projects.iq.harvard.edu/stat110/youtube\">哈佛大学统计学110讲稿</a></li>\n<li><a href=\"https://www.khanacademy.org/math/probability\">概率论和统计学</a>-Khan Academy</li>\n<li><a href=\"http://open.163.com/special/opencourse/weijifen.html\">麻省理工学院公开课：微积分重点</a></li>\n<li><a href=\"https://www.bilibili.com/video/av29845488/\">清华大学微积分主讲-刘坤林</a></li>\n<li><a href=\"https://www.bilibili.com/video/av39156411?from=search&amp;seid=11125098883390790554\">微积分-浙江大学</a></li>\n<li><a href=\"http://open.163.com/special/opencourse/multivariable.html\">麻省理工学院公开课：多变量微积分</a></li>\n<li><a href=\"http://open.163.com/special/Khan/precalculus.html\">可汗学院公开课：微积分预备</a></li>\n<li><a href=\"http://open.163.com/special/sp/singlevariablecalculus.html\">麻省理工学院公开课：单变量微积分</a></li>\n<li><a href=\"http://open.163.com/movie/2018/12/0/H/ME19860FO_ME1AUHF0H.html\">HACC公开课：微积分1</a></li>\n<li><a href=\"http://open.163.com/movie/2018/12/1/S/ME2SKV6B0_ME2UJ1G1S.html\">HACC公开课：微积分II</a></li>\n<li><a href=\"http://math.nju.edu.cn/~meijq/calculus/notes.pdf\">数学分析讲义 - 南京大学数学系</a></li>\n<li><a href=\"http://www.rsqdz.net:907/upload/userfile/naturalism/shuxue/7%E5%A4%A9%E6%90%9E%E5%AE%9A%E5%BE%AE%E7%A7%AF%E5%88%86.%E6%9D%8E%E5%B7%A7%E4%B8%BD.%E6%89%AB%E6%8F%8F%E7%89%88.pdf\">7天搞定微积分</a></li>\n<li><a href=\"https://github.com/gnuhub/books-1/blob/master/%E6%95%B0%E5%AD%A6%E2%97%8F%E5%9F%BA%E7%A1%80%E6%95%B0%E5%AD%A6%E2%97%8F%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90/%E6%89%98%E9%A9%AC%E6%96%AF%E5%BE%AE%E7%A7%AF%E5%88%86.pdf\">托马斯微积分</a></li>\n</ul>\n<h2 id=\"十一、量化\">十一、量化</h2>\n<ul>\n<li><a href=\"https://www.lizenghai.com/\">Python量化投资</a></li>\n</ul>\n<h2 id=\"十一、数据集-接口\">十一、数据集/接口</h2>\n<ul>\n<li><a href=\"https://scikit-learn.org/stable/modules/classes.html?highlight=dataset#module-sklearn.datasets\">sklearn自带数据集</a></li>\n<li><a href=\"https://www.kaggle.com/datasets\">kaggle数据集</a></li>\n<li><a href=\"https://archive.ics.uci.edu/ml/datasets.php\">UCI数据集</a></li>\n<li><a href=\"https://www.kesci.com/home/dataset\">科赛网数据集</a></li>\n<li><a href=\"http://tushare.org/\">tushare财经股票基金数据接口</a></li>\n<li><a href=\"https://akshare.readthedocs.io/zh_CN/latest/\">akshare财经股票基金数据接口</a></li>\n<li><a href=\"http://baostock.com/baostock/index.php/%E9%A6%96%E9%A1%B5\">baostock财经股票基金数据接口</a></li>\n</ul>\n<h2 id=\"十二、地理信息分析\">十二、地理信息分析</h2>\n<ul>\n<li><a href=\"https://residentmario.github.io/geoplot/index.html\">geoplot地理空间可视化官方文档</a></li>\n<li><a href=\"https://python-visualization.github.io/folium/\">folium地图可视化官方文档</a></li>\n<li><a href=\"https://geopandas.org/\">geopandas地理空间数据处理官方文档</a></li>\n<li><a href=\"https://scitools.org.uk/cartopy/docs/latest/\">cartopy地理空间可视化官方文档</a></li>\n</ul>\n<h2 id=\"References\">References</h2>\n<p><a href=\"https://github.com/hi-weijun/PythonDataScience-Collections\">https://github.com/hi-weijun/PythonDataScience-Collections</a></p>\n"},{"title":"D6-服务器流数据离线与实时处理分析","share":true,"date":"2022-06-29T02:15:36.000Z","updated":"2022-12-18T00:07:45.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D6-服务器流数据离线与实时处理分析"],"_content":"\n\n\n## 实验目标\n\n- 熟悉日志的处理及应用方法\n\n## 日志处理平台及架构\n\n- 离线 **批处理** hive + datax + mysql（一次处理多个任务（批），$126*4=504$, tricks, 一次处理 504=》成绩）\n- 实时 **流处理** flume + kafka + python + mysql（流数据：实时产生）\n\n![Excalidraw/D6-服务器流数据离线与实时处理分析 2022-06-29 09.25.24.excalidraw](/images/6bdcba92bf77f4d8aec33203c93510152b0395c6.png)\n\n## 技术介绍\n\n- Nginx（服务器）\n- flume (分布式日志采集系统）\n\t- Flume 是 Cloudera 提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume 支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume 提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力\n- hdfs（存储：分布式文件系统)\n\t- Hadoop 分布式文件系统\n- hive（数据处理）\n\t- hive 是基于 Hadoop 的一个数据仓库工具，用来进行数据提取、转化、加载。\n- datax（数据加载）\n\t- DataX 是阿里巴巴集团内被广泛使用的离线数据 **同步工具/平台**，实现包括 MySQL、SQL Server、Oracle、PostgreSQL、HDFS、Hive、HBase、OTS、ODPS 等各种异构数据源之间高效的数据同步功能\n- kafka（开源流处理平台）\n\t- 流数据：流数据是一组顺序、大量、快速、连续到达的数据序列,一般情况下，流数据可被视为一个随时间延续而无限增长的动态数据集合。\n\n## 流数据实例\n\n- 交通工具、工业设备和农业机械上的传感器将数据发送到流处理应用程序。该应用程序再监控性能，提前检测任何潜在缺陷，自动订购备用部件，从而防止设备停机。\n- 一家金融机构实时跟踪股市波动，计算风险价值，然后根据股票价格变动自动重新平衡投资组合。\n- 一家房地产网站跟踪客户移动设备中的一部分数据，然后根据其地理位置实时建议应走访的房产。\n- 一家太阳能发电公司必须维持可满足客户需求的发电量，否则就要支付罚金。该公司实施了一个流数据应用程序，用以监控电力系统中的所有电池板，并实时调度服务，从而最大限度缩短了每个电池板的低产能期，也因此减少了相关的罚款支出。\n- 一家媒体出版商对数十亿的在线内容点击流记录进行流处理，利用有关用户的人口统计信息汇总和丰富数据，并优化网站上的内容投放，从而实现关联性并为受众提供更佳的体验。\n- 一家网络游戏公司收集关于玩家与游戏间互动的流数据，并将这些数据提供给游戏平台，然后再对这些数据进行实时分析，并提供各种激励措施和动态体验来吸引玩家。\n","source":"_posts/D6-服务器流数据离线与实时处理分析.md","raw":"---\ntitle: D6-服务器流数据离线与实时处理分析\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-29 10:15:36 \nupdated: 2022-12-18 08:07:45 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D6-服务器流数据离线与实时处理分析\n---\n\n\n\n## 实验目标\n\n- 熟悉日志的处理及应用方法\n\n## 日志处理平台及架构\n\n- 离线 **批处理** hive + datax + mysql（一次处理多个任务（批），$126*4=504$, tricks, 一次处理 504=》成绩）\n- 实时 **流处理** flume + kafka + python + mysql（流数据：实时产生）\n\n![Excalidraw/D6-服务器流数据离线与实时处理分析 2022-06-29 09.25.24.excalidraw](/images/6bdcba92bf77f4d8aec33203c93510152b0395c6.png)\n\n## 技术介绍\n\n- Nginx（服务器）\n- flume (分布式日志采集系统）\n\t- Flume 是 Cloudera 提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume 支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume 提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力\n- hdfs（存储：分布式文件系统)\n\t- Hadoop 分布式文件系统\n- hive（数据处理）\n\t- hive 是基于 Hadoop 的一个数据仓库工具，用来进行数据提取、转化、加载。\n- datax（数据加载）\n\t- DataX 是阿里巴巴集团内被广泛使用的离线数据 **同步工具/平台**，实现包括 MySQL、SQL Server、Oracle、PostgreSQL、HDFS、Hive、HBase、OTS、ODPS 等各种异构数据源之间高效的数据同步功能\n- kafka（开源流处理平台）\n\t- 流数据：流数据是一组顺序、大量、快速、连续到达的数据序列,一般情况下，流数据可被视为一个随时间延续而无限增长的动态数据集合。\n\n## 流数据实例\n\n- 交通工具、工业设备和农业机械上的传感器将数据发送到流处理应用程序。该应用程序再监控性能，提前检测任何潜在缺陷，自动订购备用部件，从而防止设备停机。\n- 一家金融机构实时跟踪股市波动，计算风险价值，然后根据股票价格变动自动重新平衡投资组合。\n- 一家房地产网站跟踪客户移动设备中的一部分数据，然后根据其地理位置实时建议应走访的房产。\n- 一家太阳能发电公司必须维持可满足客户需求的发电量，否则就要支付罚金。该公司实施了一个流数据应用程序，用以监控电力系统中的所有电池板，并实时调度服务，从而最大限度缩短了每个电池板的低产能期，也因此减少了相关的罚款支出。\n- 一家媒体出版商对数十亿的在线内容点击流记录进行流处理，利用有关用户的人口统计信息汇总和丰富数据，并优化网站上的内容投放，从而实现关联性并为受众提供更佳的体验。\n- 一家网络游戏公司收集关于玩家与游戏间互动的流数据，并将这些数据提供给游戏平台，然后再对这些数据进行实时分析，并提供各种激励措施和动态体验来吸引玩家。\n","slug":"D6-服务器流数据离线与实时处理分析","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a3003q4cv960m72k4g","content":"<h2 id=\"实验目标\">实验目标</h2>\n<ul>\n<li>熟悉日志的处理及应用方法</li>\n</ul>\n<h2 id=\"日志处理平台及架构\">日志处理平台及架构</h2>\n<ul>\n<li>离线 <strong>批处理</strong> hive + datax + mysql（一次处理多个任务（批），<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>126</mn><mo>∗</mo><mn>4</mn><mo>=</mo><mn>504</mn></mrow><annotation encoding=\"application/x-tex\">126*4=504</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">126</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">504</span></span></span></span>, tricks, 一次处理 504=》成绩）</li>\n<li>实时 <strong>流处理</strong> flume + kafka + python + mysql（流数据：实时产生）</li>\n</ul>\n<p><img src=\"/images/6bdcba92bf77f4d8aec33203c93510152b0395c6.png\" alt=\"Excalidraw/D6-服务器流数据离线与实时处理分析 2022-06-29 09.25.24.excalidraw\"></p>\n<h2 id=\"技术介绍\">技术介绍</h2>\n<ul>\n<li>Nginx（服务器）</li>\n<li>flume (分布式日志采集系统）\n<ul>\n<li>Flume 是 Cloudera 提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume 支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume 提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力</li>\n</ul>\n</li>\n<li>hdfs（存储：分布式文件系统)\n<ul>\n<li>Hadoop 分布式文件系统</li>\n</ul>\n</li>\n<li>hive（数据处理）\n<ul>\n<li>hive 是基于 Hadoop 的一个数据仓库工具，用来进行数据提取、转化、加载。</li>\n</ul>\n</li>\n<li>datax（数据加载）\n<ul>\n<li>DataX 是阿里巴巴集团内被广泛使用的离线数据 <strong>同步工具/平台</strong>，实现包括 MySQL、SQL Server、Oracle、PostgreSQL、HDFS、Hive、HBase、OTS、ODPS 等各种异构数据源之间高效的数据同步功能</li>\n</ul>\n</li>\n<li>kafka（开源流处理平台）\n<ul>\n<li>流数据：流数据是一组顺序、大量、快速、连续到达的数据序列,一般情况下，流数据可被视为一个随时间延续而无限增长的动态数据集合。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"流数据实例\">流数据实例</h2>\n<ul>\n<li>交通工具、工业设备和农业机械上的传感器将数据发送到流处理应用程序。该应用程序再监控性能，提前检测任何潜在缺陷，自动订购备用部件，从而防止设备停机。</li>\n<li>一家金融机构实时跟踪股市波动，计算风险价值，然后根据股票价格变动自动重新平衡投资组合。</li>\n<li>一家房地产网站跟踪客户移动设备中的一部分数据，然后根据其地理位置实时建议应走访的房产。</li>\n<li>一家太阳能发电公司必须维持可满足客户需求的发电量，否则就要支付罚金。该公司实施了一个流数据应用程序，用以监控电力系统中的所有电池板，并实时调度服务，从而最大限度缩短了每个电池板的低产能期，也因此减少了相关的罚款支出。</li>\n<li>一家媒体出版商对数十亿的在线内容点击流记录进行流处理，利用有关用户的人口统计信息汇总和丰富数据，并优化网站上的内容投放，从而实现关联性并为受众提供更佳的体验。</li>\n<li>一家网络游戏公司收集关于玩家与游戏间互动的流数据，并将这些数据提供给游戏平台，然后再对这些数据进行实时分析，并提供各种激励措施和动态体验来吸引玩家。</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<h2 id=\"实验目标\">实验目标</h2>\n<ul>\n<li>熟悉日志的处理及应用方法</li>\n</ul>\n<h2 id=\"日志处理平台及架构\">日志处理平台及架构</h2>\n<ul>\n<li>离线 <strong>批处理</strong> hive + datax + mysql（一次处理多个任务（批），<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>126</mn><mo>∗</mo><mn>4</mn><mo>=</mo><mn>504</mn></mrow><annotation encoding=\"application/x-tex\">126*4=504</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">126</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">4</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">504</span></span></span></span>, tricks, 一次处理 504=》成绩）</li>\n<li>实时 <strong>流处理</strong> flume + kafka + python + mysql（流数据：实时产生）</li>\n</ul>\n<p><img src=\"/images/6bdcba92bf77f4d8aec33203c93510152b0395c6.png\" alt=\"Excalidraw/D6-服务器流数据离线与实时处理分析 2022-06-29 09.25.24.excalidraw\"></p>\n<h2 id=\"技术介绍\">技术介绍</h2>\n<ul>\n<li>Nginx（服务器）</li>\n<li>flume (分布式日志采集系统）\n<ul>\n<li>Flume 是 Cloudera 提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume 支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume 提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力</li>\n</ul>\n</li>\n<li>hdfs（存储：分布式文件系统)\n<ul>\n<li>Hadoop 分布式文件系统</li>\n</ul>\n</li>\n<li>hive（数据处理）\n<ul>\n<li>hive 是基于 Hadoop 的一个数据仓库工具，用来进行数据提取、转化、加载。</li>\n</ul>\n</li>\n<li>datax（数据加载）\n<ul>\n<li>DataX 是阿里巴巴集团内被广泛使用的离线数据 <strong>同步工具/平台</strong>，实现包括 MySQL、SQL Server、Oracle、PostgreSQL、HDFS、Hive、HBase、OTS、ODPS 等各种异构数据源之间高效的数据同步功能</li>\n</ul>\n</li>\n<li>kafka（开源流处理平台）\n<ul>\n<li>流数据：流数据是一组顺序、大量、快速、连续到达的数据序列,一般情况下，流数据可被视为一个随时间延续而无限增长的动态数据集合。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"流数据实例\">流数据实例</h2>\n<ul>\n<li>交通工具、工业设备和农业机械上的传感器将数据发送到流处理应用程序。该应用程序再监控性能，提前检测任何潜在缺陷，自动订购备用部件，从而防止设备停机。</li>\n<li>一家金融机构实时跟踪股市波动，计算风险价值，然后根据股票价格变动自动重新平衡投资组合。</li>\n<li>一家房地产网站跟踪客户移动设备中的一部分数据，然后根据其地理位置实时建议应走访的房产。</li>\n<li>一家太阳能发电公司必须维持可满足客户需求的发电量，否则就要支付罚金。该公司实施了一个流数据应用程序，用以监控电力系统中的所有电池板，并实时调度服务，从而最大限度缩短了每个电池板的低产能期，也因此减少了相关的罚款支出。</li>\n<li>一家媒体出版商对数十亿的在线内容点击流记录进行流处理，利用有关用户的人口统计信息汇总和丰富数据，并优化网站上的内容投放，从而实现关联性并为受众提供更佳的体验。</li>\n<li>一家网络游戏公司收集关于玩家与游戏间互动的流数据，并将这些数据提供给游戏平台，然后再对这些数据进行实时分析，并提供各种激励措施和动态体验来吸引玩家。</li>\n</ul>\n"},{"title":"D7 图书馆大数据分析与三层数据仓库","share":true,"date":"2022-06-30T09:42:17.000Z","updated":"2022-12-18T00:07:45.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D7 图书馆大数据分析与三层数据仓库"],"_content":"\n\n\n## 实验目标\n\n- 熟悉大数据仓库的概念及使用\n- 熟悉 UDI、VA 的使用\n- 属性仪表盘的使用\n\n## 图书馆大数据分析简介\n\n图书馆大数据分析初始阶段是针对华中科技大学出版社的教材《Python 语言程序设计基础》和《R 语言程序设计基础》设计的应用案例，项目的目标是收集更多的图书馆大数据分析开源的数据集、需求和实现样本，为开展大数据技术的学习、研究提供实例，也鼓励将本项目的资源应用到实际的图书馆大数据分析。\n\n随着数字化图书馆的运行，图书馆积累了大量的读者借阅书籍、检索文献的数据。随着大数据技术的发展，人们开始关注如何利用这些数据为读者提供更加高级、周到的服务。\n\n在大数据环境下，图书馆及其服务也必将产生新的巨大变化，深层次的服务功能可以通过大数据技术的运用加以实现。主要体现在两个方面：\n\n- **提供以人为本的个性化服务**。在大数据的支持下，髙细腻的个性化服务能够得到更加有效的开展。图书馆可以基于不同个体的个性特点、性格偏好提供定制式的个体服务，如个性化图书推荐。也可根据热门书籍的分析，为图书馆够提供参考信息。通过对读者整体关注的分析，为学校在在课程、教学方面提供参考信息。\n- **图书馆服务的内容将发生变化**。传统的图书馆服务提供的是以文献或书籍为图书资源单元的服务，不对资源内容进行进一步处理。大数据环境下，开始向知识服务方向发展。知识服务的内容通过文本挖掘、大数据技术等，从图书资源中分析出更加细致的知识单元，并通过知识单元挖掘图书资源间的内在关系，提供高附加值的信息分析、决策咨询领域、知识问答等高级服务。\n\n仅针对个性化服务方面，列出部分基本的图书馆大数据分析需求：\n\n### 最热门的图书有哪些？\n\n这是一个学生、老师、图书馆都关心的问题。学生关心“我应用学习什么”，学校关心“学生们的兴趣是什么”，图书馆关系“哪些书最受欢迎”，都可以从这个问题中得到答案。\n\n更深入地，这个问题还可从不同角度进行分析，包括：\n\n- 全校最热门书\n- 某专业最热门书\n- 各年级最热门的书\n- 最流行的小说\n- 考研最好的数学书\n\n更广泛地，这个问题还可与其它数据结合起来进行分析。如与课表相结合，可以分析：\n\n- 学生借阅与上课相关的图书有哪些？\n- 借阅与上课无关的图书有哪些？\n- 哪些老师上课会引起同学们读书兴趣？\n- 最流行的小说\n- 考研最好的数学书\n\n与科研管理信息结合，可以分析：更广泛地，这个问题还可与其它数据结合起来进行分析。如与课表相结合，可以分析：\n\n- 哪些图书对科学研究有帮助？\n- 哪些书对研究生研究方向有关？\n- 哪些老师上课会引起同学们读书兴趣？\n- 最流行的小说\n- 考研最好的数学书\n\n结合多年的数据，还可以分析\\*\\* 近年来热门图书变化趋势是怎样的？\\*\\*\n\n### 哪些图书需要增加馆藏量？\n\n受成本限制和使用效率的考虑，图书馆每本书采购量是有限的。如何精准把握图书馆藏量是一个很难的问题。书买多了，借得人少，会造成资源浪费；书买少了，不够借，满足不了读者需要。根据图书借阅趋势分析，可辅助图书馆科学合理地进行图书采购。\n\n### 如何推荐读者可能感兴趣的书籍？\n\n这是一个非常有趣的问题，在广告营销、网站搜索等经常会遇到类似的现象。根据图书借阅历史数据，可以分析出不同专业、不同课程的热门书箱，结合读者的专业，可以作出推荐。当读者给出检索词后，可以向读者推荐有经验的老师会借哪些书。当读者择定要借的书后，可以进一步推荐借过此书的人还借过哪些书。\n\n作为课程案例，仅针对第 1 个需求中的“全校最热门书”这一问题进行分析。有兴趣的读者可以进一步对其它问题进行分析。\n\n## 实验步骤\n\n### 数仓的建立\n\nODS（Operational Data Stored）：数据源中的数据，经过 **抽取、转换、加载**，也就说传说中的 ETL 之后，装入本层。本层的数据，总体上大多是按照源头业务系统的分类方式而分类的。\n\nDW（Data Warehouse））：从 ODS 层中获得的数据 **按主题** 建立各种数据模型，**复用性强**。\n\nAPP（Application）：要求比 **较快的响应速度**，**复用性不强**\n\n- 建立数据仓库\n\t- 数据源层（ODS，Operational Data Stored）：存储原始数据\n\t\t- 借还信息\n\t\t- 读者信息\n\t- 数据仓库（DW, Data Warehouse）：存储主题数据\n\t\t- 读者主题\n\t\t- 书籍主题\n\t- 应用 APP（Application）\n\t\t- 读者画像\n\t\t- 数目\n\n![Excalidraw/D6-7 图书馆大数据分析与三层数据仓库 2022-06-30 09.08.26.excalidraw](/images/92d8cd4756cd10fba64bd27d9749623e91f43ab0.png)\n\n### 数据分析\n\n- 读者画像（主题）(DW 表，字段：`读者类型,读者性别，读者单位，读者关键词，借还次数，推荐书籍`\n\t- 读者类型（教师、本科、研究生）\n\t- 性别\n\t- 单位\n\t- 读者关键词（经常阅读的书籍关键词、书籍类别）\n\t- 借还次数\n\t- 书籍推荐（同类推荐，机器学习）\n- 书籍目录分析\n\t- 书名关键词\n\t- 图书分类数量\n- 图书馆大数据分析 _ 排名变化\n\t- ![static/attachment/Pasted image 20220627095738.png](static/attachment/Pasted%20image%2020220627095738.png)\n- 热门书分析\n\t- ![static/attachment/Pasted image 20220627100925.png](static/attachment/Pasted%20image%2020220627100925.png)\n\n### 仪表盘的制作\n\n## References\n\nhttps://github.com/wenbl/LibraryBigData\n","source":"_posts/D7-图书馆大数据分析与三层数据仓库.md","raw":"---\ntitle: D7 图书馆大数据分析与三层数据仓库\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-30 17:42:17 \nupdated: 2022-12-18 08:07:45 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D7 图书馆大数据分析与三层数据仓库\n---\n\n\n\n## 实验目标\n\n- 熟悉大数据仓库的概念及使用\n- 熟悉 UDI、VA 的使用\n- 属性仪表盘的使用\n\n## 图书馆大数据分析简介\n\n图书馆大数据分析初始阶段是针对华中科技大学出版社的教材《Python 语言程序设计基础》和《R 语言程序设计基础》设计的应用案例，项目的目标是收集更多的图书馆大数据分析开源的数据集、需求和实现样本，为开展大数据技术的学习、研究提供实例，也鼓励将本项目的资源应用到实际的图书馆大数据分析。\n\n随着数字化图书馆的运行，图书馆积累了大量的读者借阅书籍、检索文献的数据。随着大数据技术的发展，人们开始关注如何利用这些数据为读者提供更加高级、周到的服务。\n\n在大数据环境下，图书馆及其服务也必将产生新的巨大变化，深层次的服务功能可以通过大数据技术的运用加以实现。主要体现在两个方面：\n\n- **提供以人为本的个性化服务**。在大数据的支持下，髙细腻的个性化服务能够得到更加有效的开展。图书馆可以基于不同个体的个性特点、性格偏好提供定制式的个体服务，如个性化图书推荐。也可根据热门书籍的分析，为图书馆够提供参考信息。通过对读者整体关注的分析，为学校在在课程、教学方面提供参考信息。\n- **图书馆服务的内容将发生变化**。传统的图书馆服务提供的是以文献或书籍为图书资源单元的服务，不对资源内容进行进一步处理。大数据环境下，开始向知识服务方向发展。知识服务的内容通过文本挖掘、大数据技术等，从图书资源中分析出更加细致的知识单元，并通过知识单元挖掘图书资源间的内在关系，提供高附加值的信息分析、决策咨询领域、知识问答等高级服务。\n\n仅针对个性化服务方面，列出部分基本的图书馆大数据分析需求：\n\n### 最热门的图书有哪些？\n\n这是一个学生、老师、图书馆都关心的问题。学生关心“我应用学习什么”，学校关心“学生们的兴趣是什么”，图书馆关系“哪些书最受欢迎”，都可以从这个问题中得到答案。\n\n更深入地，这个问题还可从不同角度进行分析，包括：\n\n- 全校最热门书\n- 某专业最热门书\n- 各年级最热门的书\n- 最流行的小说\n- 考研最好的数学书\n\n更广泛地，这个问题还可与其它数据结合起来进行分析。如与课表相结合，可以分析：\n\n- 学生借阅与上课相关的图书有哪些？\n- 借阅与上课无关的图书有哪些？\n- 哪些老师上课会引起同学们读书兴趣？\n- 最流行的小说\n- 考研最好的数学书\n\n与科研管理信息结合，可以分析：更广泛地，这个问题还可与其它数据结合起来进行分析。如与课表相结合，可以分析：\n\n- 哪些图书对科学研究有帮助？\n- 哪些书对研究生研究方向有关？\n- 哪些老师上课会引起同学们读书兴趣？\n- 最流行的小说\n- 考研最好的数学书\n\n结合多年的数据，还可以分析\\*\\* 近年来热门图书变化趋势是怎样的？\\*\\*\n\n### 哪些图书需要增加馆藏量？\n\n受成本限制和使用效率的考虑，图书馆每本书采购量是有限的。如何精准把握图书馆藏量是一个很难的问题。书买多了，借得人少，会造成资源浪费；书买少了，不够借，满足不了读者需要。根据图书借阅趋势分析，可辅助图书馆科学合理地进行图书采购。\n\n### 如何推荐读者可能感兴趣的书籍？\n\n这是一个非常有趣的问题，在广告营销、网站搜索等经常会遇到类似的现象。根据图书借阅历史数据，可以分析出不同专业、不同课程的热门书箱，结合读者的专业，可以作出推荐。当读者给出检索词后，可以向读者推荐有经验的老师会借哪些书。当读者择定要借的书后，可以进一步推荐借过此书的人还借过哪些书。\n\n作为课程案例，仅针对第 1 个需求中的“全校最热门书”这一问题进行分析。有兴趣的读者可以进一步对其它问题进行分析。\n\n## 实验步骤\n\n### 数仓的建立\n\nODS（Operational Data Stored）：数据源中的数据，经过 **抽取、转换、加载**，也就说传说中的 ETL 之后，装入本层。本层的数据，总体上大多是按照源头业务系统的分类方式而分类的。\n\nDW（Data Warehouse））：从 ODS 层中获得的数据 **按主题** 建立各种数据模型，**复用性强**。\n\nAPP（Application）：要求比 **较快的响应速度**，**复用性不强**\n\n- 建立数据仓库\n\t- 数据源层（ODS，Operational Data Stored）：存储原始数据\n\t\t- 借还信息\n\t\t- 读者信息\n\t- 数据仓库（DW, Data Warehouse）：存储主题数据\n\t\t- 读者主题\n\t\t- 书籍主题\n\t- 应用 APP（Application）\n\t\t- 读者画像\n\t\t- 数目\n\n![Excalidraw/D6-7 图书馆大数据分析与三层数据仓库 2022-06-30 09.08.26.excalidraw](/images/92d8cd4756cd10fba64bd27d9749623e91f43ab0.png)\n\n### 数据分析\n\n- 读者画像（主题）(DW 表，字段：`读者类型,读者性别，读者单位，读者关键词，借还次数，推荐书籍`\n\t- 读者类型（教师、本科、研究生）\n\t- 性别\n\t- 单位\n\t- 读者关键词（经常阅读的书籍关键词、书籍类别）\n\t- 借还次数\n\t- 书籍推荐（同类推荐，机器学习）\n- 书籍目录分析\n\t- 书名关键词\n\t- 图书分类数量\n- 图书馆大数据分析 _ 排名变化\n\t- ![static/attachment/Pasted image 20220627095738.png](static/attachment/Pasted%20image%2020220627095738.png)\n- 热门书分析\n\t- ![static/attachment/Pasted image 20220627100925.png](static/attachment/Pasted%20image%2020220627100925.png)\n\n### 仪表盘的制作\n\n## References\n\nhttps://github.com/wenbl/LibraryBigData\n","slug":"D7-图书馆大数据分析与三层数据仓库","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a3003t4cv92spx36xf","content":"<h2 id=\"实验目标\">实验目标</h2>\n<ul>\n<li>熟悉大数据仓库的概念及使用</li>\n<li>熟悉 UDI、VA 的使用</li>\n<li>属性仪表盘的使用</li>\n</ul>\n<h2 id=\"图书馆大数据分析简介\">图书馆大数据分析简介</h2>\n<p>图书馆大数据分析初始阶段是针对华中科技大学出版社的教材《Python 语言程序设计基础》和《R 语言程序设计基础》设计的应用案例，项目的目标是收集更多的图书馆大数据分析开源的数据集、需求和实现样本，为开展大数据技术的学习、研究提供实例，也鼓励将本项目的资源应用到实际的图书馆大数据分析。</p>\n<p>随着数字化图书馆的运行，图书馆积累了大量的读者借阅书籍、检索文献的数据。随着大数据技术的发展，人们开始关注如何利用这些数据为读者提供更加高级、周到的服务。</p>\n<p>在大数据环境下，图书馆及其服务也必将产生新的巨大变化，深层次的服务功能可以通过大数据技术的运用加以实现。主要体现在两个方面：</p>\n<ul>\n<li><strong>提供以人为本的个性化服务</strong>。在大数据的支持下，髙细腻的个性化服务能够得到更加有效的开展。图书馆可以基于不同个体的个性特点、性格偏好提供定制式的个体服务，如个性化图书推荐。也可根据热门书籍的分析，为图书馆够提供参考信息。通过对读者整体关注的分析，为学校在在课程、教学方面提供参考信息。</li>\n<li><strong>图书馆服务的内容将发生变化</strong>。传统的图书馆服务提供的是以文献或书籍为图书资源单元的服务，不对资源内容进行进一步处理。大数据环境下，开始向知识服务方向发展。知识服务的内容通过文本挖掘、大数据技术等，从图书资源中分析出更加细致的知识单元，并通过知识单元挖掘图书资源间的内在关系，提供高附加值的信息分析、决策咨询领域、知识问答等高级服务。</li>\n</ul>\n<p>仅针对个性化服务方面，列出部分基本的图书馆大数据分析需求：</p>\n<h3 id=\"最热门的图书有哪些？\">最热门的图书有哪些？</h3>\n<p>这是一个学生、老师、图书馆都关心的问题。学生关心“我应用学习什么”，学校关心“学生们的兴趣是什么”，图书馆关系“哪些书最受欢迎”，都可以从这个问题中得到答案。</p>\n<p>更深入地，这个问题还可从不同角度进行分析，包括：</p>\n<ul>\n<li>全校最热门书</li>\n<li>某专业最热门书</li>\n<li>各年级最热门的书</li>\n<li>最流行的小说</li>\n<li>考研最好的数学书</li>\n</ul>\n<p>更广泛地，这个问题还可与其它数据结合起来进行分析。如与课表相结合，可以分析：</p>\n<ul>\n<li>学生借阅与上课相关的图书有哪些？</li>\n<li>借阅与上课无关的图书有哪些？</li>\n<li>哪些老师上课会引起同学们读书兴趣？</li>\n<li>最流行的小说</li>\n<li>考研最好的数学书</li>\n</ul>\n<p>与科研管理信息结合，可以分析：更广泛地，这个问题还可与其它数据结合起来进行分析。如与课表相结合，可以分析：</p>\n<ul>\n<li>哪些图书对科学研究有帮助？</li>\n<li>哪些书对研究生研究方向有关？</li>\n<li>哪些老师上课会引起同学们读书兴趣？</li>\n<li>最流行的小说</li>\n<li>考研最好的数学书</li>\n</ul>\n<p>结合多年的数据，还可以分析** 近年来热门图书变化趋势是怎样的？**</p>\n<h3 id=\"哪些图书需要增加馆藏量？\">哪些图书需要增加馆藏量？</h3>\n<p>受成本限制和使用效率的考虑，图书馆每本书采购量是有限的。如何精准把握图书馆藏量是一个很难的问题。书买多了，借得人少，会造成资源浪费；书买少了，不够借，满足不了读者需要。根据图书借阅趋势分析，可辅助图书馆科学合理地进行图书采购。</p>\n<h3 id=\"如何推荐读者可能感兴趣的书籍？\">如何推荐读者可能感兴趣的书籍？</h3>\n<p>这是一个非常有趣的问题，在广告营销、网站搜索等经常会遇到类似的现象。根据图书借阅历史数据，可以分析出不同专业、不同课程的热门书箱，结合读者的专业，可以作出推荐。当读者给出检索词后，可以向读者推荐有经验的老师会借哪些书。当读者择定要借的书后，可以进一步推荐借过此书的人还借过哪些书。</p>\n<p>作为课程案例，仅针对第 1 个需求中的“全校最热门书”这一问题进行分析。有兴趣的读者可以进一步对其它问题进行分析。</p>\n<h2 id=\"实验步骤\">实验步骤</h2>\n<h3 id=\"数仓的建立\">数仓的建立</h3>\n<p>ODS（Operational Data Stored）：数据源中的数据，经过 <strong>抽取、转换、加载</strong>，也就说传说中的 ETL 之后，装入本层。本层的数据，总体上大多是按照源头业务系统的分类方式而分类的。</p>\n<p>DW（Data Warehouse））：从 ODS 层中获得的数据 <strong>按主题</strong> 建立各种数据模型，<strong>复用性强</strong>。</p>\n<p>APP（Application）：要求比 <strong>较快的响应速度</strong>，<strong>复用性不强</strong></p>\n<ul>\n<li>建立数据仓库\n<ul>\n<li>数据源层（ODS，Operational Data Stored）：存储原始数据\n<ul>\n<li>借还信息</li>\n<li>读者信息</li>\n</ul>\n</li>\n<li>数据仓库（DW, Data Warehouse）：存储主题数据\n<ul>\n<li>读者主题</li>\n<li>书籍主题</li>\n</ul>\n</li>\n<li>应用 APP（Application）\n<ul>\n<li>读者画像</li>\n<li>数目</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/images/92d8cd4756cd10fba64bd27d9749623e91f43ab0.png\" alt=\"Excalidraw/D6-7 图书馆大数据分析与三层数据仓库 2022-06-30 09.08.26.excalidraw\"></p>\n<h3 id=\"数据分析\">数据分析</h3>\n<ul>\n<li>读者画像（主题）(DW 表，字段：<code>读者类型,读者性别，读者单位，读者关键词，借还次数，推荐书籍</code>\n<ul>\n<li>读者类型（教师、本科、研究生）</li>\n<li>性别</li>\n<li>单位</li>\n<li>读者关键词（经常阅读的书籍关键词、书籍类别）</li>\n<li>借还次数</li>\n<li>书籍推荐（同类推荐，机器学习）</li>\n</ul>\n</li>\n<li>书籍目录分析\n<ul>\n<li>书名关键词</li>\n<li>图书分类数量</li>\n</ul>\n</li>\n<li>图书馆大数据分析 _ 排名变化\n<ul>\n<li><img src=\"static/attachment/Pasted%20image%2020220627095738.png\" alt=\"static/attachment/Pasted image 20220627095738.png\"></li>\n</ul>\n</li>\n<li>热门书分析\n<ul>\n<li><img src=\"static/attachment/Pasted%20image%2020220627100925.png\" alt=\"static/attachment/Pasted image 20220627100925.png\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"仪表盘的制作\">仪表盘的制作</h3>\n<h2 id=\"References\">References</h2>\n<p><a href=\"https://github.com/wenbl/LibraryBigData\">https://github.com/wenbl/LibraryBigData</a></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover3.jpg","excerpt":"","more":"<h2 id=\"实验目标\">实验目标</h2>\n<ul>\n<li>熟悉大数据仓库的概念及使用</li>\n<li>熟悉 UDI、VA 的使用</li>\n<li>属性仪表盘的使用</li>\n</ul>\n<h2 id=\"图书馆大数据分析简介\">图书馆大数据分析简介</h2>\n<p>图书馆大数据分析初始阶段是针对华中科技大学出版社的教材《Python 语言程序设计基础》和《R 语言程序设计基础》设计的应用案例，项目的目标是收集更多的图书馆大数据分析开源的数据集、需求和实现样本，为开展大数据技术的学习、研究提供实例，也鼓励将本项目的资源应用到实际的图书馆大数据分析。</p>\n<p>随着数字化图书馆的运行，图书馆积累了大量的读者借阅书籍、检索文献的数据。随着大数据技术的发展，人们开始关注如何利用这些数据为读者提供更加高级、周到的服务。</p>\n<p>在大数据环境下，图书馆及其服务也必将产生新的巨大变化，深层次的服务功能可以通过大数据技术的运用加以实现。主要体现在两个方面：</p>\n<ul>\n<li><strong>提供以人为本的个性化服务</strong>。在大数据的支持下，髙细腻的个性化服务能够得到更加有效的开展。图书馆可以基于不同个体的个性特点、性格偏好提供定制式的个体服务，如个性化图书推荐。也可根据热门书籍的分析，为图书馆够提供参考信息。通过对读者整体关注的分析，为学校在在课程、教学方面提供参考信息。</li>\n<li><strong>图书馆服务的内容将发生变化</strong>。传统的图书馆服务提供的是以文献或书籍为图书资源单元的服务，不对资源内容进行进一步处理。大数据环境下，开始向知识服务方向发展。知识服务的内容通过文本挖掘、大数据技术等，从图书资源中分析出更加细致的知识单元，并通过知识单元挖掘图书资源间的内在关系，提供高附加值的信息分析、决策咨询领域、知识问答等高级服务。</li>\n</ul>\n<p>仅针对个性化服务方面，列出部分基本的图书馆大数据分析需求：</p>\n<h3 id=\"最热门的图书有哪些？\">最热门的图书有哪些？</h3>\n<p>这是一个学生、老师、图书馆都关心的问题。学生关心“我应用学习什么”，学校关心“学生们的兴趣是什么”，图书馆关系“哪些书最受欢迎”，都可以从这个问题中得到答案。</p>\n<p>更深入地，这个问题还可从不同角度进行分析，包括：</p>\n<ul>\n<li>全校最热门书</li>\n<li>某专业最热门书</li>\n<li>各年级最热门的书</li>\n<li>最流行的小说</li>\n<li>考研最好的数学书</li>\n</ul>\n<p>更广泛地，这个问题还可与其它数据结合起来进行分析。如与课表相结合，可以分析：</p>\n<ul>\n<li>学生借阅与上课相关的图书有哪些？</li>\n<li>借阅与上课无关的图书有哪些？</li>\n<li>哪些老师上课会引起同学们读书兴趣？</li>\n<li>最流行的小说</li>\n<li>考研最好的数学书</li>\n</ul>\n<p>与科研管理信息结合，可以分析：更广泛地，这个问题还可与其它数据结合起来进行分析。如与课表相结合，可以分析：</p>\n<ul>\n<li>哪些图书对科学研究有帮助？</li>\n<li>哪些书对研究生研究方向有关？</li>\n<li>哪些老师上课会引起同学们读书兴趣？</li>\n<li>最流行的小说</li>\n<li>考研最好的数学书</li>\n</ul>\n<p>结合多年的数据，还可以分析** 近年来热门图书变化趋势是怎样的？**</p>\n<h3 id=\"哪些图书需要增加馆藏量？\">哪些图书需要增加馆藏量？</h3>\n<p>受成本限制和使用效率的考虑，图书馆每本书采购量是有限的。如何精准把握图书馆藏量是一个很难的问题。书买多了，借得人少，会造成资源浪费；书买少了，不够借，满足不了读者需要。根据图书借阅趋势分析，可辅助图书馆科学合理地进行图书采购。</p>\n<h3 id=\"如何推荐读者可能感兴趣的书籍？\">如何推荐读者可能感兴趣的书籍？</h3>\n<p>这是一个非常有趣的问题，在广告营销、网站搜索等经常会遇到类似的现象。根据图书借阅历史数据，可以分析出不同专业、不同课程的热门书箱，结合读者的专业，可以作出推荐。当读者给出检索词后，可以向读者推荐有经验的老师会借哪些书。当读者择定要借的书后，可以进一步推荐借过此书的人还借过哪些书。</p>\n<p>作为课程案例，仅针对第 1 个需求中的“全校最热门书”这一问题进行分析。有兴趣的读者可以进一步对其它问题进行分析。</p>\n<h2 id=\"实验步骤\">实验步骤</h2>\n<h3 id=\"数仓的建立\">数仓的建立</h3>\n<p>ODS（Operational Data Stored）：数据源中的数据，经过 <strong>抽取、转换、加载</strong>，也就说传说中的 ETL 之后，装入本层。本层的数据，总体上大多是按照源头业务系统的分类方式而分类的。</p>\n<p>DW（Data Warehouse））：从 ODS 层中获得的数据 <strong>按主题</strong> 建立各种数据模型，<strong>复用性强</strong>。</p>\n<p>APP（Application）：要求比 <strong>较快的响应速度</strong>，<strong>复用性不强</strong></p>\n<ul>\n<li>建立数据仓库\n<ul>\n<li>数据源层（ODS，Operational Data Stored）：存储原始数据\n<ul>\n<li>借还信息</li>\n<li>读者信息</li>\n</ul>\n</li>\n<li>数据仓库（DW, Data Warehouse）：存储主题数据\n<ul>\n<li>读者主题</li>\n<li>书籍主题</li>\n</ul>\n</li>\n<li>应用 APP（Application）\n<ul>\n<li>读者画像</li>\n<li>数目</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/images/92d8cd4756cd10fba64bd27d9749623e91f43ab0.png\" alt=\"Excalidraw/D6-7 图书馆大数据分析与三层数据仓库 2022-06-30 09.08.26.excalidraw\"></p>\n<h3 id=\"数据分析\">数据分析</h3>\n<ul>\n<li>读者画像（主题）(DW 表，字段：<code>读者类型,读者性别，读者单位，读者关键词，借还次数，推荐书籍</code>\n<ul>\n<li>读者类型（教师、本科、研究生）</li>\n<li>性别</li>\n<li>单位</li>\n<li>读者关键词（经常阅读的书籍关键词、书籍类别）</li>\n<li>借还次数</li>\n<li>书籍推荐（同类推荐，机器学习）</li>\n</ul>\n</li>\n<li>书籍目录分析\n<ul>\n<li>书名关键词</li>\n<li>图书分类数量</li>\n</ul>\n</li>\n<li>图书馆大数据分析 _ 排名变化\n<ul>\n<li><img src=\"static/attachment/Pasted%20image%2020220627095738.png\" alt=\"static/attachment/Pasted image 20220627095738.png\"></li>\n</ul>\n</li>\n<li>热门书分析\n<ul>\n<li><img src=\"static/attachment/Pasted%20image%2020220627100925.png\" alt=\"static/attachment/Pasted image 20220627100925.png\"></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"仪表盘的制作\">仪表盘的制作</h3>\n<h2 id=\"References\">References</h2>\n<p><a href=\"https://github.com/wenbl/LibraryBigData\">https://github.com/wenbl/LibraryBigData</a></p>\n"},{"title":"D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库","share":true,"date":"2022-06-29T00:29:43.000Z","updated":"2022-12-18T00:07:45.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库"],"_content":"\n\n\n## Summary\n\n从五个主题、分析\n\n## 数据概况\n\n三个数据集，每个数据分别存储全球确诊、死亡、治愈数据。\n\n![static/attachment/Pasted image 20220627084334.png](static/attachment/Pasted%20image%2020220627084334.png)\n\n数据字段  \n![static/attachment/Pasted image 20220627084512.png](static/attachment/Pasted%20image%2020220627084512.png)\n\n### 数仓的建立\n\nODS（Operational Data Stored）：数据源中的数据，经过 **抽取、转换、加载**，也就说传说中的 ETL 之后，装入本层。本层的数据，总体上大多是按照源头业务系统的分类方式而分类的。\n\nDW（Data Warehouse））：从 ODS 层中获得的数据 **按主题** 建立各种数据模型，**复用性强**。\n\nAPP（Application）：要求比 **较快的响应速度**，**复用性不强**\n\n- 建立数据仓库\n\t- 数据源层（ODS，Operational Data Stored）：存储原始数据\n\t\t- 借还信息\n\t\t- 读者信息\n\t- 数据仓库（DW, Data Warehouse）：存储主题数据\n\t\t- 读者主题\n\t\t- 书籍主题\n\t- 应用 APP（Application）\n\t\t- 读者画像\n\t\t- 数目\n\t- DIM\n\t\t- 省市转换\n\n![Excalidraw/D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库 2022-06-28 08.20.24.excalidraw](/images/86dec513da88334739dd7b5bfc200e4728f80ae7.png)\n\n## 思路框架\n\n![Excalidraw/D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库 2022-06-29 08.26.01.excalidraw](/images/1a78cafe53c725fdc93ea404a23d18bed8b0314f.png)\n\n## 实验步骤\n\n- 数据加载 ✔\n\t- 将数据导入到 ODS 层（死亡、治愈、确诊）✔\n\t\t- 数据处理（将原始数据转换为 `国家，省份，经度，纬度，日期，治愈人数`）\n\t\t\t- 将横纵坐标交换（data.T, 转置）（将日期放到纵轴）\n\t\t\t\t- 每一列：表示每一个国家每个日期的治愈人数\n\t\t\t- 拼装的目标格式：\n\t- 加载了 DIM 数据（映射数据）✔\n\t\t- 对应关系数据\n\t\t\t- 1 对应为 男\n\t\t\t- 2 对应为 女\n- ODS->DW（**复用性强**)\n\t- 按 **主题** 抽取和整理转换\n\t\t- 抽取：获取数据并对数据进行一定处理\n\t\t- 转换：英文的国家、省转换（映射）为中文\n\t\t- 加载：将转换好的数据存储到 DW\n\t- 主题 1\n\t\t- **每个国家总计确诊、死亡、治愈人数**（主题）（主题=多个分析点的集合）\n\t\t- 实战步骤\n\t\t\t- 从 ODS 层抽取数据 ✔\n\t\t\t- 从 DIM 层抽取国家数据（映射数据）✔\n\t\t\t- 将英文的国家映射为中文的国家 ✔\n\t\t\t- 统计每个国家 **每年每月** 的确诊、死亡、治愈人数 ✔\n\t\t\t- 存储到 DW ✔\n\t\t\t\t- 建立主题表\n\t\t\t\t\t- 字段：`国家、时间（年）、时间（月）、确诊、死亡、治愈人数`\n- APP（**较快的响应速度**，**复用性不强**）\n\t- 在 DW 层的基础上，按三个维度进行汇总\n\t\t- 按年统计确诊、死亡、治愈人数\n\n## 实战\n\n- 每个国家的死亡人数汇总（柱状图）\n- 2020 年/2021 年总死亡人数（指标卡）\n- 总死亡人数\n\n## 数据分析\n\n**数据仓库即** Data Warehouse ，是为企业所有级别的决策制定过程，提供所有类型数据支持的战略集合。它是单个数据存储，出于分析性报告和决策支持目的而创建。 为需要业务智能的企业，提供指导业务流程改进、监视时间、成本、质量以及控制。\n\n简单来说，DW 的本质也是一个数据库，但是，他是针对数据分析的业务场景而设定的。传统的数据库，是为了支撑实际业务如商城而建立的，针对查询量小（单条数据如查询用户信息）的业务场景。数据仓库是为了做数据分析的，针对的是查询量大（每次查询几万甚至几百万条数据）的业务场景。\n\n- 全球疫情情况（按月建立数据仓库）（主题 1）\n\t- 总确诊人数\n\t- 总死亡人数\n\t- 总治愈人数\n\t- 治愈率\n\t- 死亡率\n- 全球疫情形式（按月建立数据仓库）（主题 2）\n\t- x：日期\n\t- y：日新增人数、日确诊人数、日死亡人数\n- 排行（按月建立数据仓库）（主题 3）\n\t- 各国确诊人数 TOP20\n\t- 各国死亡人数 TOP20\n\t- 各国治愈人数 TOP20\n- 中国疫情现状 TOP20（按月建立数据仓库）（主题 4）\n\t- 确诊\n\t- 死亡\n\t- 治愈\n- 中国疫情趋势（按月建立数据仓库）（主题 5）\n\t- ![static/attachment/Pasted image 20220627085626.png](static/attachment/Pasted%20image%2020220627085626.png)\n\n## 地图数据\n\n```python\ncountry_map = {\n    'Singapore Rep.': '新加坡', 'Dominican Rep.': '多米尼加', 'Palestine': '巴勒斯坦', 'Bahamas': '巴哈马', 'Timor-Leste': '东帝汶',\n    'Afghanistan': '阿富汗', 'Guinea-Bissau': '几内亚比绍', \"Côte d'Ivoire\": '科特迪瓦', 'Siachen Glacier': '锡亚琴冰川',\n    \"Br. Indian Ocean Ter.\": '英属印度洋领土', 'Angola': '安哥拉', 'Albania': '阿尔巴尼亚', 'United Arab Emirates': '阿联酋',\n    'Argentina': '阿根廷', 'Armenia': '亚美尼亚', 'French Southern and Antarctic Lands': '法属南半球和南极领地', 'Australia': '澳大利亚',\n    'Austria': '奥地利', 'Azerbaijan': '阿塞拜疆', 'Burundi': '布隆迪', 'Belgium': '比利时', 'Benin': '贝宁', 'Burkina Faso': '布基纳法索',\n    'Bangladesh': '孟加拉国', 'Bulgaria': '保加利亚', 'The Bahamas': '巴哈马', 'Bosnia and Herz.': '波斯尼亚和黑塞哥维那', 'Belarus': '白俄罗斯',\n    'Belize': '伯利兹', 'Bermuda': '百慕大', 'Bolivia': '玻利维亚', 'Brazil': '巴西', 'Brunei': '文莱', 'Bhutan': '不丹',\n    'Botswana': '博茨瓦纳', 'Central African Rep.': '中非', 'Canada': '加拿大', 'Switzerland': '瑞士', 'Chile': '智利',\n    'China': '中国', 'Ivory Coast': '象牙海岸', 'Cameroon': '喀麦隆', 'Dem. Rep. Congo': '刚果民主共和国', 'Congo': '刚果',\n    'Colombia': '哥伦比亚', 'Costa Rica': '哥斯达黎加', 'Cuba': '古巴', 'N. Cyprus': '北塞浦路斯', 'Cyprus': '塞浦路斯', 'Czech Rep.': '捷克',\n    'Germany': '德国', 'Djibouti': '吉布提', 'Denmark': '丹麦', 'Algeria': '阿尔及利亚', 'Ecuador': '厄瓜多尔', 'Egypt': '埃及',\n    'Eritrea': '厄立特里亚', 'Spain': '西班牙', 'Estonia': '爱沙尼亚', 'Ethiopia': '埃塞俄比亚', 'Finland': '芬兰', 'Fiji': '斐',\n    'Falkland Islands': '福克兰群岛', 'France': '法国', 'Gabon': '加蓬', 'United Kingdom': '英国', 'Georgia': '格鲁吉亚',\n    'Ghana': '加纳', 'Guinea': '几内亚', 'Gambia': '冈比亚', 'Guinea Bissau': '几内亚比绍', 'Eq. Guinea': '赤道几内亚', 'Greece': '希腊',\n    'Greenland': '格陵兰', 'Guatemala': '危地马拉', 'French Guiana': '法属圭亚那', 'Guyana': '圭亚那', 'Honduras': '洪都拉斯',\n    'Croatia': '克罗地亚', 'Haiti': '海地', 'Hungary': '匈牙利', 'Indonesia': '印度尼西亚', 'India': '印度', 'Ireland': '爱尔兰',\n    'Iran': '伊朗', 'Iraq': '伊拉克', 'Iceland': '冰岛', 'Israel': '以色列', 'Italy': '意大利', 'Jamaica': '牙买加', 'Jordan': '约旦',\n    'Japan': '日本', 'Kazakhstan': '哈萨克斯坦', 'Kenya': '肯尼亚', 'Kyrgyzstan': '吉尔吉斯斯坦', 'Cambodia': '柬埔寨', 'Korea': '韩国',\n    'Kosovo': '科索沃', 'Kuwait': '科威特', 'Lao PDR': '老挝', 'Lebanon': '黎巴嫩', 'Liberia': '利比里亚', 'Libya': '利比亚',\n    'Sri Lanka': '斯里兰卡', 'Lesotho': '莱索托', 'Lithuania': '立陶宛', 'Luxembourg': '卢森堡', 'Latvia': '拉脱维亚', 'Morocco': '摩洛哥',\n    'Moldova': '摩尔多瓦', 'Madagascar': '马达加斯加', 'Mexico': '墨西哥', 'Macedonia': '马其顿', 'Mali': '马里', 'Myanmar': '缅甸',\n    'Montenegro': '黑山', 'Mongolia': '蒙古', 'Mozambique': '莫桑比克', 'Mauritania': '毛里塔尼亚', 'Malawi': '马拉维',\n    'Malaysia': '马来西亚', 'Namibia': '纳米比亚', 'New Caledonia': '新喀里多尼亚', 'Niger': '尼日尔', 'Nigeria': '尼日利亚',\n    'Nicaragua': '尼加拉瓜', 'Netherlands': '荷兰', 'Norway': '挪威', 'Nepal': '尼泊尔', 'New Zealand': '新西兰', 'Oman': '阿曼',\n    'Pakistan': '巴基斯坦', 'Panama': '巴拿马', 'Peru': '秘鲁', 'Philippines': '菲律宾', 'Papua New Guinea': '巴布亚新几内亚',\n    'Poland': '波兰', 'Puerto Rico': '波多黎各', 'Dem. Rep. Korea': '朝鲜', 'Portugal': '葡萄牙', 'Paraguay': '巴拉圭',\n    'Qatar': '卡塔尔', 'Romania': '罗马尼亚', 'Russia': '俄罗斯', 'Rwanda': '卢旺达', 'W. Sahara': '西撒哈拉', 'Saudi Arabia': '沙特阿拉伯',\n    'Sudan': '苏丹', 'S. Sudan': '南苏丹', 'Senegal': '塞内加尔', 'Solomon Is.': '所罗门群岛', 'Sierra Leone': '塞拉利昂',\n    'El Salvador': '萨尔瓦多', 'Somaliland': '索马里兰', 'Somalia': '索马里', 'Serbia': '塞尔维亚', 'Suriname': '苏里南',\n    'Slovakia': '斯洛伐克', 'Slovenia': '斯洛文尼亚', 'Sweden': '瑞典', 'Swaziland': '斯威士兰', 'Syria': '叙利亚', 'Chad': '乍得',\n    'Togo': '多哥', 'Thailand': '泰国', 'Tajikistan': '塔吉克斯坦', 'Turkmenistan': '土库曼斯坦', 'East Timor': '东帝汶',\n    'Trinidad and Tobago': '特里尼达和多巴哥', 'Tunisia': '突尼斯', 'Turkey': '土耳其', 'Tanzania': '坦桑尼亚', 'Uganda': '乌干达',\n    'Ukraine': '乌克兰', 'Uruguay': '乌拉圭', 'United States': '美国', 'Uzbekistan': '乌兹别克斯坦', 'Venezuela': '委内瑞拉',\n    'Vietnam': '越南', 'Vanuatu': '瓦努阿图', 'West Bank': '西岸', 'Yemen': '也门', 'South Africa': '南非', 'Zambia': '赞比亚',\n    'Zimbabwe': '津巴布韦', 'Comoros': '科摩罗'\n}\n\nprovince_map = {\n    'Anhui': '安徽', 'Beijing': '北京', 'Chongqing': '重庆', 'Fujian': '新疆', 'Gansu': '甘肃', 'Guangdong': '广东',\n    'Guangxi': '广西', 'Guizhou': '贵州', 'Hainan': '海南', 'Hebei': '河北', 'Heilongjiang': '黑龙江', 'Henan': '河南',\n    'Hong Kong': '香港', 'Hubei': '湖北', 'Hunan': '湖南', 'Inner Mongolia': '内蒙古', 'Jiangsu': '江苏',\n    'Jiangxi': '江西', 'Jilin': '吉林', 'Liaoning': '辽宁', 'Macau': '澳门', 'Ningxia': '宁夏', 'Qinghai': '青海',\n    'Shaanxi': '陕西', 'Shandong': '山东', 'Shanghai': '上海', 'Shanxi': '山西', 'Sichuan': '四川', 'Tianjin': '天津',\n    'Tibet': '西藏', 'Xinjiang': '新疆', 'Yunnan': '云南', 'Zhejiang': '浙江', 'Fujian':'福建', 'Taiwan': '台湾'\n} \n```\n","source":"_posts/D5--综合项目---COVID-19-疫情数据处理与分析-数据仓库.md","raw":"---\ntitle: D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-29 08:29:43 \nupdated: 2022-12-18 08:07:45 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库\n---\n\n\n\n## Summary\n\n从五个主题、分析\n\n## 数据概况\n\n三个数据集，每个数据分别存储全球确诊、死亡、治愈数据。\n\n![static/attachment/Pasted image 20220627084334.png](static/attachment/Pasted%20image%2020220627084334.png)\n\n数据字段  \n![static/attachment/Pasted image 20220627084512.png](static/attachment/Pasted%20image%2020220627084512.png)\n\n### 数仓的建立\n\nODS（Operational Data Stored）：数据源中的数据，经过 **抽取、转换、加载**，也就说传说中的 ETL 之后，装入本层。本层的数据，总体上大多是按照源头业务系统的分类方式而分类的。\n\nDW（Data Warehouse））：从 ODS 层中获得的数据 **按主题** 建立各种数据模型，**复用性强**。\n\nAPP（Application）：要求比 **较快的响应速度**，**复用性不强**\n\n- 建立数据仓库\n\t- 数据源层（ODS，Operational Data Stored）：存储原始数据\n\t\t- 借还信息\n\t\t- 读者信息\n\t- 数据仓库（DW, Data Warehouse）：存储主题数据\n\t\t- 读者主题\n\t\t- 书籍主题\n\t- 应用 APP（Application）\n\t\t- 读者画像\n\t\t- 数目\n\t- DIM\n\t\t- 省市转换\n\n![Excalidraw/D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库 2022-06-28 08.20.24.excalidraw](/images/86dec513da88334739dd7b5bfc200e4728f80ae7.png)\n\n## 思路框架\n\n![Excalidraw/D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库 2022-06-29 08.26.01.excalidraw](/images/1a78cafe53c725fdc93ea404a23d18bed8b0314f.png)\n\n## 实验步骤\n\n- 数据加载 ✔\n\t- 将数据导入到 ODS 层（死亡、治愈、确诊）✔\n\t\t- 数据处理（将原始数据转换为 `国家，省份，经度，纬度，日期，治愈人数`）\n\t\t\t- 将横纵坐标交换（data.T, 转置）（将日期放到纵轴）\n\t\t\t\t- 每一列：表示每一个国家每个日期的治愈人数\n\t\t\t- 拼装的目标格式：\n\t- 加载了 DIM 数据（映射数据）✔\n\t\t- 对应关系数据\n\t\t\t- 1 对应为 男\n\t\t\t- 2 对应为 女\n- ODS->DW（**复用性强**)\n\t- 按 **主题** 抽取和整理转换\n\t\t- 抽取：获取数据并对数据进行一定处理\n\t\t- 转换：英文的国家、省转换（映射）为中文\n\t\t- 加载：将转换好的数据存储到 DW\n\t- 主题 1\n\t\t- **每个国家总计确诊、死亡、治愈人数**（主题）（主题=多个分析点的集合）\n\t\t- 实战步骤\n\t\t\t- 从 ODS 层抽取数据 ✔\n\t\t\t- 从 DIM 层抽取国家数据（映射数据）✔\n\t\t\t- 将英文的国家映射为中文的国家 ✔\n\t\t\t- 统计每个国家 **每年每月** 的确诊、死亡、治愈人数 ✔\n\t\t\t- 存储到 DW ✔\n\t\t\t\t- 建立主题表\n\t\t\t\t\t- 字段：`国家、时间（年）、时间（月）、确诊、死亡、治愈人数`\n- APP（**较快的响应速度**，**复用性不强**）\n\t- 在 DW 层的基础上，按三个维度进行汇总\n\t\t- 按年统计确诊、死亡、治愈人数\n\n## 实战\n\n- 每个国家的死亡人数汇总（柱状图）\n- 2020 年/2021 年总死亡人数（指标卡）\n- 总死亡人数\n\n## 数据分析\n\n**数据仓库即** Data Warehouse ，是为企业所有级别的决策制定过程，提供所有类型数据支持的战略集合。它是单个数据存储，出于分析性报告和决策支持目的而创建。 为需要业务智能的企业，提供指导业务流程改进、监视时间、成本、质量以及控制。\n\n简单来说，DW 的本质也是一个数据库，但是，他是针对数据分析的业务场景而设定的。传统的数据库，是为了支撑实际业务如商城而建立的，针对查询量小（单条数据如查询用户信息）的业务场景。数据仓库是为了做数据分析的，针对的是查询量大（每次查询几万甚至几百万条数据）的业务场景。\n\n- 全球疫情情况（按月建立数据仓库）（主题 1）\n\t- 总确诊人数\n\t- 总死亡人数\n\t- 总治愈人数\n\t- 治愈率\n\t- 死亡率\n- 全球疫情形式（按月建立数据仓库）（主题 2）\n\t- x：日期\n\t- y：日新增人数、日确诊人数、日死亡人数\n- 排行（按月建立数据仓库）（主题 3）\n\t- 各国确诊人数 TOP20\n\t- 各国死亡人数 TOP20\n\t- 各国治愈人数 TOP20\n- 中国疫情现状 TOP20（按月建立数据仓库）（主题 4）\n\t- 确诊\n\t- 死亡\n\t- 治愈\n- 中国疫情趋势（按月建立数据仓库）（主题 5）\n\t- ![static/attachment/Pasted image 20220627085626.png](static/attachment/Pasted%20image%2020220627085626.png)\n\n## 地图数据\n\n```python\ncountry_map = {\n    'Singapore Rep.': '新加坡', 'Dominican Rep.': '多米尼加', 'Palestine': '巴勒斯坦', 'Bahamas': '巴哈马', 'Timor-Leste': '东帝汶',\n    'Afghanistan': '阿富汗', 'Guinea-Bissau': '几内亚比绍', \"Côte d'Ivoire\": '科特迪瓦', 'Siachen Glacier': '锡亚琴冰川',\n    \"Br. Indian Ocean Ter.\": '英属印度洋领土', 'Angola': '安哥拉', 'Albania': '阿尔巴尼亚', 'United Arab Emirates': '阿联酋',\n    'Argentina': '阿根廷', 'Armenia': '亚美尼亚', 'French Southern and Antarctic Lands': '法属南半球和南极领地', 'Australia': '澳大利亚',\n    'Austria': '奥地利', 'Azerbaijan': '阿塞拜疆', 'Burundi': '布隆迪', 'Belgium': '比利时', 'Benin': '贝宁', 'Burkina Faso': '布基纳法索',\n    'Bangladesh': '孟加拉国', 'Bulgaria': '保加利亚', 'The Bahamas': '巴哈马', 'Bosnia and Herz.': '波斯尼亚和黑塞哥维那', 'Belarus': '白俄罗斯',\n    'Belize': '伯利兹', 'Bermuda': '百慕大', 'Bolivia': '玻利维亚', 'Brazil': '巴西', 'Brunei': '文莱', 'Bhutan': '不丹',\n    'Botswana': '博茨瓦纳', 'Central African Rep.': '中非', 'Canada': '加拿大', 'Switzerland': '瑞士', 'Chile': '智利',\n    'China': '中国', 'Ivory Coast': '象牙海岸', 'Cameroon': '喀麦隆', 'Dem. Rep. Congo': '刚果民主共和国', 'Congo': '刚果',\n    'Colombia': '哥伦比亚', 'Costa Rica': '哥斯达黎加', 'Cuba': '古巴', 'N. Cyprus': '北塞浦路斯', 'Cyprus': '塞浦路斯', 'Czech Rep.': '捷克',\n    'Germany': '德国', 'Djibouti': '吉布提', 'Denmark': '丹麦', 'Algeria': '阿尔及利亚', 'Ecuador': '厄瓜多尔', 'Egypt': '埃及',\n    'Eritrea': '厄立特里亚', 'Spain': '西班牙', 'Estonia': '爱沙尼亚', 'Ethiopia': '埃塞俄比亚', 'Finland': '芬兰', 'Fiji': '斐',\n    'Falkland Islands': '福克兰群岛', 'France': '法国', 'Gabon': '加蓬', 'United Kingdom': '英国', 'Georgia': '格鲁吉亚',\n    'Ghana': '加纳', 'Guinea': '几内亚', 'Gambia': '冈比亚', 'Guinea Bissau': '几内亚比绍', 'Eq. Guinea': '赤道几内亚', 'Greece': '希腊',\n    'Greenland': '格陵兰', 'Guatemala': '危地马拉', 'French Guiana': '法属圭亚那', 'Guyana': '圭亚那', 'Honduras': '洪都拉斯',\n    'Croatia': '克罗地亚', 'Haiti': '海地', 'Hungary': '匈牙利', 'Indonesia': '印度尼西亚', 'India': '印度', 'Ireland': '爱尔兰',\n    'Iran': '伊朗', 'Iraq': '伊拉克', 'Iceland': '冰岛', 'Israel': '以色列', 'Italy': '意大利', 'Jamaica': '牙买加', 'Jordan': '约旦',\n    'Japan': '日本', 'Kazakhstan': '哈萨克斯坦', 'Kenya': '肯尼亚', 'Kyrgyzstan': '吉尔吉斯斯坦', 'Cambodia': '柬埔寨', 'Korea': '韩国',\n    'Kosovo': '科索沃', 'Kuwait': '科威特', 'Lao PDR': '老挝', 'Lebanon': '黎巴嫩', 'Liberia': '利比里亚', 'Libya': '利比亚',\n    'Sri Lanka': '斯里兰卡', 'Lesotho': '莱索托', 'Lithuania': '立陶宛', 'Luxembourg': '卢森堡', 'Latvia': '拉脱维亚', 'Morocco': '摩洛哥',\n    'Moldova': '摩尔多瓦', 'Madagascar': '马达加斯加', 'Mexico': '墨西哥', 'Macedonia': '马其顿', 'Mali': '马里', 'Myanmar': '缅甸',\n    'Montenegro': '黑山', 'Mongolia': '蒙古', 'Mozambique': '莫桑比克', 'Mauritania': '毛里塔尼亚', 'Malawi': '马拉维',\n    'Malaysia': '马来西亚', 'Namibia': '纳米比亚', 'New Caledonia': '新喀里多尼亚', 'Niger': '尼日尔', 'Nigeria': '尼日利亚',\n    'Nicaragua': '尼加拉瓜', 'Netherlands': '荷兰', 'Norway': '挪威', 'Nepal': '尼泊尔', 'New Zealand': '新西兰', 'Oman': '阿曼',\n    'Pakistan': '巴基斯坦', 'Panama': '巴拿马', 'Peru': '秘鲁', 'Philippines': '菲律宾', 'Papua New Guinea': '巴布亚新几内亚',\n    'Poland': '波兰', 'Puerto Rico': '波多黎各', 'Dem. Rep. Korea': '朝鲜', 'Portugal': '葡萄牙', 'Paraguay': '巴拉圭',\n    'Qatar': '卡塔尔', 'Romania': '罗马尼亚', 'Russia': '俄罗斯', 'Rwanda': '卢旺达', 'W. Sahara': '西撒哈拉', 'Saudi Arabia': '沙特阿拉伯',\n    'Sudan': '苏丹', 'S. Sudan': '南苏丹', 'Senegal': '塞内加尔', 'Solomon Is.': '所罗门群岛', 'Sierra Leone': '塞拉利昂',\n    'El Salvador': '萨尔瓦多', 'Somaliland': '索马里兰', 'Somalia': '索马里', 'Serbia': '塞尔维亚', 'Suriname': '苏里南',\n    'Slovakia': '斯洛伐克', 'Slovenia': '斯洛文尼亚', 'Sweden': '瑞典', 'Swaziland': '斯威士兰', 'Syria': '叙利亚', 'Chad': '乍得',\n    'Togo': '多哥', 'Thailand': '泰国', 'Tajikistan': '塔吉克斯坦', 'Turkmenistan': '土库曼斯坦', 'East Timor': '东帝汶',\n    'Trinidad and Tobago': '特里尼达和多巴哥', 'Tunisia': '突尼斯', 'Turkey': '土耳其', 'Tanzania': '坦桑尼亚', 'Uganda': '乌干达',\n    'Ukraine': '乌克兰', 'Uruguay': '乌拉圭', 'United States': '美国', 'Uzbekistan': '乌兹别克斯坦', 'Venezuela': '委内瑞拉',\n    'Vietnam': '越南', 'Vanuatu': '瓦努阿图', 'West Bank': '西岸', 'Yemen': '也门', 'South Africa': '南非', 'Zambia': '赞比亚',\n    'Zimbabwe': '津巴布韦', 'Comoros': '科摩罗'\n}\n\nprovince_map = {\n    'Anhui': '安徽', 'Beijing': '北京', 'Chongqing': '重庆', 'Fujian': '新疆', 'Gansu': '甘肃', 'Guangdong': '广东',\n    'Guangxi': '广西', 'Guizhou': '贵州', 'Hainan': '海南', 'Hebei': '河北', 'Heilongjiang': '黑龙江', 'Henan': '河南',\n    'Hong Kong': '香港', 'Hubei': '湖北', 'Hunan': '湖南', 'Inner Mongolia': '内蒙古', 'Jiangsu': '江苏',\n    'Jiangxi': '江西', 'Jilin': '吉林', 'Liaoning': '辽宁', 'Macau': '澳门', 'Ningxia': '宁夏', 'Qinghai': '青海',\n    'Shaanxi': '陕西', 'Shandong': '山东', 'Shanghai': '上海', 'Shanxi': '山西', 'Sichuan': '四川', 'Tianjin': '天津',\n    'Tibet': '西藏', 'Xinjiang': '新疆', 'Yunnan': '云南', 'Zhejiang': '浙江', 'Fujian':'福建', 'Taiwan': '台湾'\n} \n```\n","slug":"D5--综合项目---COVID-19-疫情数据处理与分析-数据仓库","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a4003x4cv9gm2d690n","content":"<h2 id=\"Summary\">Summary</h2>\n<p>从五个主题、分析</p>\n<h2 id=\"数据概况\">数据概况</h2>\n<p>三个数据集，每个数据分别存储全球确诊、死亡、治愈数据。</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220627084334.png\" alt=\"static/attachment/Pasted image 20220627084334.png\"></p>\n<p>数据字段<br>\n<img src=\"static/attachment/Pasted%20image%2020220627084512.png\" alt=\"static/attachment/Pasted image 20220627084512.png\"></p>\n<h3 id=\"数仓的建立\">数仓的建立</h3>\n<p>ODS（Operational Data Stored）：数据源中的数据，经过 <strong>抽取、转换、加载</strong>，也就说传说中的 ETL 之后，装入本层。本层的数据，总体上大多是按照源头业务系统的分类方式而分类的。</p>\n<p>DW（Data Warehouse））：从 ODS 层中获得的数据 <strong>按主题</strong> 建立各种数据模型，<strong>复用性强</strong>。</p>\n<p>APP（Application）：要求比 <strong>较快的响应速度</strong>，<strong>复用性不强</strong></p>\n<ul>\n<li>建立数据仓库\n<ul>\n<li>数据源层（ODS，Operational Data Stored）：存储原始数据\n<ul>\n<li>借还信息</li>\n<li>读者信息</li>\n</ul>\n</li>\n<li>数据仓库（DW, Data Warehouse）：存储主题数据\n<ul>\n<li>读者主题</li>\n<li>书籍主题</li>\n</ul>\n</li>\n<li>应用 APP（Application）\n<ul>\n<li>读者画像</li>\n<li>数目</li>\n</ul>\n</li>\n<li>DIM\n<ul>\n<li>省市转换</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/images/86dec513da88334739dd7b5bfc200e4728f80ae7.png\" alt=\"Excalidraw/D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库 2022-06-28 08.20.24.excalidraw\"></p>\n<h2 id=\"思路框架\">思路框架</h2>\n<p><img src=\"/images/1a78cafe53c725fdc93ea404a23d18bed8b0314f.png\" alt=\"Excalidraw/D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库 2022-06-29 08.26.01.excalidraw\"></p>\n<h2 id=\"实验步骤\">实验步骤</h2>\n<ul>\n<li>数据加载 ✔\n<ul>\n<li>将数据导入到 ODS 层（死亡、治愈、确诊）✔\n<ul>\n<li>数据处理（将原始数据转换为 <code>国家，省份，经度，纬度，日期，治愈人数</code>）\n<ul>\n<li>将横纵坐标交换（data.T, 转置）（将日期放到纵轴）\n<ul>\n<li>每一列：表示每一个国家每个日期的治愈人数</li>\n</ul>\n</li>\n<li>拼装的目标格式：</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>加载了 DIM 数据（映射数据）✔\n<ul>\n<li>对应关系数据\n<ul>\n<li>1 对应为 男</li>\n<li>2 对应为 女</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ODS-&gt;DW（<strong>复用性强</strong>)\n<ul>\n<li>按 <strong>主题</strong> 抽取和整理转换\n<ul>\n<li>抽取：获取数据并对数据进行一定处理</li>\n<li>转换：英文的国家、省转换（映射）为中文</li>\n<li>加载：将转换好的数据存储到 DW</li>\n</ul>\n</li>\n<li>主题 1\n<ul>\n<li><strong>每个国家总计确诊、死亡、治愈人数</strong>（主题）（主题=多个分析点的集合）</li>\n<li>实战步骤\n<ul>\n<li>从 ODS 层抽取数据 ✔</li>\n<li>从 DIM 层抽取国家数据（映射数据）✔</li>\n<li>将英文的国家映射为中文的国家 ✔</li>\n<li>统计每个国家 <strong>每年每月</strong> 的确诊、死亡、治愈人数 ✔</li>\n<li>存储到 DW ✔\n<ul>\n<li>建立主题表\n<ul>\n<li>字段：<code>国家、时间（年）、时间（月）、确诊、死亡、治愈人数</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>APP（<strong>较快的响应速度</strong>，<strong>复用性不强</strong>）\n<ul>\n<li>在 DW 层的基础上，按三个维度进行汇总\n<ul>\n<li>按年统计确诊、死亡、治愈人数</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"实战\">实战</h2>\n<ul>\n<li>每个国家的死亡人数汇总（柱状图）</li>\n<li>2020 年/2021 年总死亡人数（指标卡）</li>\n<li>总死亡人数</li>\n</ul>\n<h2 id=\"数据分析\">数据分析</h2>\n<p><strong>数据仓库即</strong> Data Warehouse ，是为企业所有级别的决策制定过程，提供所有类型数据支持的战略集合。它是单个数据存储，出于分析性报告和决策支持目的而创建。 为需要业务智能的企业，提供指导业务流程改进、监视时间、成本、质量以及控制。</p>\n<p>简单来说，DW 的本质也是一个数据库，但是，他是针对数据分析的业务场景而设定的。传统的数据库，是为了支撑实际业务如商城而建立的，针对查询量小（单条数据如查询用户信息）的业务场景。数据仓库是为了做数据分析的，针对的是查询量大（每次查询几万甚至几百万条数据）的业务场景。</p>\n<ul>\n<li>全球疫情情况（按月建立数据仓库）（主题 1）\n<ul>\n<li>总确诊人数</li>\n<li>总死亡人数</li>\n<li>总治愈人数</li>\n<li>治愈率</li>\n<li>死亡率</li>\n</ul>\n</li>\n<li>全球疫情形式（按月建立数据仓库）（主题 2）\n<ul>\n<li>x：日期</li>\n<li>y：日新增人数、日确诊人数、日死亡人数</li>\n</ul>\n</li>\n<li>排行（按月建立数据仓库）（主题 3）\n<ul>\n<li>各国确诊人数 TOP20</li>\n<li>各国死亡人数 TOP20</li>\n<li>各国治愈人数 TOP20</li>\n</ul>\n</li>\n<li>中国疫情现状 TOP20（按月建立数据仓库）（主题 4）\n<ul>\n<li>确诊</li>\n<li>死亡</li>\n<li>治愈</li>\n</ul>\n</li>\n<li>中国疫情趋势（按月建立数据仓库）（主题 5）\n<ul>\n<li><img src=\"static/attachment/Pasted%20image%2020220627085626.png\" alt=\"static/attachment/Pasted image 20220627085626.png\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"地图数据\">地图数据</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">country_map = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;Singapore Rep.&#x27;</span>: <span class=\"string\">&#x27;新加坡&#x27;</span>, <span class=\"string\">&#x27;Dominican Rep.&#x27;</span>: <span class=\"string\">&#x27;多米尼加&#x27;</span>, <span class=\"string\">&#x27;Palestine&#x27;</span>: <span class=\"string\">&#x27;巴勒斯坦&#x27;</span>, <span class=\"string\">&#x27;Bahamas&#x27;</span>: <span class=\"string\">&#x27;巴哈马&#x27;</span>, <span class=\"string\">&#x27;Timor-Leste&#x27;</span>: <span class=\"string\">&#x27;东帝汶&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Afghanistan&#x27;</span>: <span class=\"string\">&#x27;阿富汗&#x27;</span>, <span class=\"string\">&#x27;Guinea-Bissau&#x27;</span>: <span class=\"string\">&#x27;几内亚比绍&#x27;</span>, <span class=\"string\">&quot;Côte d&#x27;Ivoire&quot;</span>: <span class=\"string\">&#x27;科特迪瓦&#x27;</span>, <span class=\"string\">&#x27;Siachen Glacier&#x27;</span>: <span class=\"string\">&#x27;锡亚琴冰川&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;Br. Indian Ocean Ter.&quot;</span>: <span class=\"string\">&#x27;英属印度洋领土&#x27;</span>, <span class=\"string\">&#x27;Angola&#x27;</span>: <span class=\"string\">&#x27;安哥拉&#x27;</span>, <span class=\"string\">&#x27;Albania&#x27;</span>: <span class=\"string\">&#x27;阿尔巴尼亚&#x27;</span>, <span class=\"string\">&#x27;United Arab Emirates&#x27;</span>: <span class=\"string\">&#x27;阿联酋&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Argentina&#x27;</span>: <span class=\"string\">&#x27;阿根廷&#x27;</span>, <span class=\"string\">&#x27;Armenia&#x27;</span>: <span class=\"string\">&#x27;亚美尼亚&#x27;</span>, <span class=\"string\">&#x27;French Southern and Antarctic Lands&#x27;</span>: <span class=\"string\">&#x27;法属南半球和南极领地&#x27;</span>, <span class=\"string\">&#x27;Australia&#x27;</span>: <span class=\"string\">&#x27;澳大利亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Austria&#x27;</span>: <span class=\"string\">&#x27;奥地利&#x27;</span>, <span class=\"string\">&#x27;Azerbaijan&#x27;</span>: <span class=\"string\">&#x27;阿塞拜疆&#x27;</span>, <span class=\"string\">&#x27;Burundi&#x27;</span>: <span class=\"string\">&#x27;布隆迪&#x27;</span>, <span class=\"string\">&#x27;Belgium&#x27;</span>: <span class=\"string\">&#x27;比利时&#x27;</span>, <span class=\"string\">&#x27;Benin&#x27;</span>: <span class=\"string\">&#x27;贝宁&#x27;</span>, <span class=\"string\">&#x27;Burkina Faso&#x27;</span>: <span class=\"string\">&#x27;布基纳法索&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Bangladesh&#x27;</span>: <span class=\"string\">&#x27;孟加拉国&#x27;</span>, <span class=\"string\">&#x27;Bulgaria&#x27;</span>: <span class=\"string\">&#x27;保加利亚&#x27;</span>, <span class=\"string\">&#x27;The Bahamas&#x27;</span>: <span class=\"string\">&#x27;巴哈马&#x27;</span>, <span class=\"string\">&#x27;Bosnia and Herz.&#x27;</span>: <span class=\"string\">&#x27;波斯尼亚和黑塞哥维那&#x27;</span>, <span class=\"string\">&#x27;Belarus&#x27;</span>: <span class=\"string\">&#x27;白俄罗斯&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Belize&#x27;</span>: <span class=\"string\">&#x27;伯利兹&#x27;</span>, <span class=\"string\">&#x27;Bermuda&#x27;</span>: <span class=\"string\">&#x27;百慕大&#x27;</span>, <span class=\"string\">&#x27;Bolivia&#x27;</span>: <span class=\"string\">&#x27;玻利维亚&#x27;</span>, <span class=\"string\">&#x27;Brazil&#x27;</span>: <span class=\"string\">&#x27;巴西&#x27;</span>, <span class=\"string\">&#x27;Brunei&#x27;</span>: <span class=\"string\">&#x27;文莱&#x27;</span>, <span class=\"string\">&#x27;Bhutan&#x27;</span>: <span class=\"string\">&#x27;不丹&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Botswana&#x27;</span>: <span class=\"string\">&#x27;博茨瓦纳&#x27;</span>, <span class=\"string\">&#x27;Central African Rep.&#x27;</span>: <span class=\"string\">&#x27;中非&#x27;</span>, <span class=\"string\">&#x27;Canada&#x27;</span>: <span class=\"string\">&#x27;加拿大&#x27;</span>, <span class=\"string\">&#x27;Switzerland&#x27;</span>: <span class=\"string\">&#x27;瑞士&#x27;</span>, <span class=\"string\">&#x27;Chile&#x27;</span>: <span class=\"string\">&#x27;智利&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;China&#x27;</span>: <span class=\"string\">&#x27;中国&#x27;</span>, <span class=\"string\">&#x27;Ivory Coast&#x27;</span>: <span class=\"string\">&#x27;象牙海岸&#x27;</span>, <span class=\"string\">&#x27;Cameroon&#x27;</span>: <span class=\"string\">&#x27;喀麦隆&#x27;</span>, <span class=\"string\">&#x27;Dem. Rep. Congo&#x27;</span>: <span class=\"string\">&#x27;刚果民主共和国&#x27;</span>, <span class=\"string\">&#x27;Congo&#x27;</span>: <span class=\"string\">&#x27;刚果&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Colombia&#x27;</span>: <span class=\"string\">&#x27;哥伦比亚&#x27;</span>, <span class=\"string\">&#x27;Costa Rica&#x27;</span>: <span class=\"string\">&#x27;哥斯达黎加&#x27;</span>, <span class=\"string\">&#x27;Cuba&#x27;</span>: <span class=\"string\">&#x27;古巴&#x27;</span>, <span class=\"string\">&#x27;N. Cyprus&#x27;</span>: <span class=\"string\">&#x27;北塞浦路斯&#x27;</span>, <span class=\"string\">&#x27;Cyprus&#x27;</span>: <span class=\"string\">&#x27;塞浦路斯&#x27;</span>, <span class=\"string\">&#x27;Czech Rep.&#x27;</span>: <span class=\"string\">&#x27;捷克&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Germany&#x27;</span>: <span class=\"string\">&#x27;德国&#x27;</span>, <span class=\"string\">&#x27;Djibouti&#x27;</span>: <span class=\"string\">&#x27;吉布提&#x27;</span>, <span class=\"string\">&#x27;Denmark&#x27;</span>: <span class=\"string\">&#x27;丹麦&#x27;</span>, <span class=\"string\">&#x27;Algeria&#x27;</span>: <span class=\"string\">&#x27;阿尔及利亚&#x27;</span>, <span class=\"string\">&#x27;Ecuador&#x27;</span>: <span class=\"string\">&#x27;厄瓜多尔&#x27;</span>, <span class=\"string\">&#x27;Egypt&#x27;</span>: <span class=\"string\">&#x27;埃及&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Eritrea&#x27;</span>: <span class=\"string\">&#x27;厄立特里亚&#x27;</span>, <span class=\"string\">&#x27;Spain&#x27;</span>: <span class=\"string\">&#x27;西班牙&#x27;</span>, <span class=\"string\">&#x27;Estonia&#x27;</span>: <span class=\"string\">&#x27;爱沙尼亚&#x27;</span>, <span class=\"string\">&#x27;Ethiopia&#x27;</span>: <span class=\"string\">&#x27;埃塞俄比亚&#x27;</span>, <span class=\"string\">&#x27;Finland&#x27;</span>: <span class=\"string\">&#x27;芬兰&#x27;</span>, <span class=\"string\">&#x27;Fiji&#x27;</span>: <span class=\"string\">&#x27;斐&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Falkland Islands&#x27;</span>: <span class=\"string\">&#x27;福克兰群岛&#x27;</span>, <span class=\"string\">&#x27;France&#x27;</span>: <span class=\"string\">&#x27;法国&#x27;</span>, <span class=\"string\">&#x27;Gabon&#x27;</span>: <span class=\"string\">&#x27;加蓬&#x27;</span>, <span class=\"string\">&#x27;United Kingdom&#x27;</span>: <span class=\"string\">&#x27;英国&#x27;</span>, <span class=\"string\">&#x27;Georgia&#x27;</span>: <span class=\"string\">&#x27;格鲁吉亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Ghana&#x27;</span>: <span class=\"string\">&#x27;加纳&#x27;</span>, <span class=\"string\">&#x27;Guinea&#x27;</span>: <span class=\"string\">&#x27;几内亚&#x27;</span>, <span class=\"string\">&#x27;Gambia&#x27;</span>: <span class=\"string\">&#x27;冈比亚&#x27;</span>, <span class=\"string\">&#x27;Guinea Bissau&#x27;</span>: <span class=\"string\">&#x27;几内亚比绍&#x27;</span>, <span class=\"string\">&#x27;Eq. Guinea&#x27;</span>: <span class=\"string\">&#x27;赤道几内亚&#x27;</span>, <span class=\"string\">&#x27;Greece&#x27;</span>: <span class=\"string\">&#x27;希腊&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Greenland&#x27;</span>: <span class=\"string\">&#x27;格陵兰&#x27;</span>, <span class=\"string\">&#x27;Guatemala&#x27;</span>: <span class=\"string\">&#x27;危地马拉&#x27;</span>, <span class=\"string\">&#x27;French Guiana&#x27;</span>: <span class=\"string\">&#x27;法属圭亚那&#x27;</span>, <span class=\"string\">&#x27;Guyana&#x27;</span>: <span class=\"string\">&#x27;圭亚那&#x27;</span>, <span class=\"string\">&#x27;Honduras&#x27;</span>: <span class=\"string\">&#x27;洪都拉斯&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Croatia&#x27;</span>: <span class=\"string\">&#x27;克罗地亚&#x27;</span>, <span class=\"string\">&#x27;Haiti&#x27;</span>: <span class=\"string\">&#x27;海地&#x27;</span>, <span class=\"string\">&#x27;Hungary&#x27;</span>: <span class=\"string\">&#x27;匈牙利&#x27;</span>, <span class=\"string\">&#x27;Indonesia&#x27;</span>: <span class=\"string\">&#x27;印度尼西亚&#x27;</span>, <span class=\"string\">&#x27;India&#x27;</span>: <span class=\"string\">&#x27;印度&#x27;</span>, <span class=\"string\">&#x27;Ireland&#x27;</span>: <span class=\"string\">&#x27;爱尔兰&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Iran&#x27;</span>: <span class=\"string\">&#x27;伊朗&#x27;</span>, <span class=\"string\">&#x27;Iraq&#x27;</span>: <span class=\"string\">&#x27;伊拉克&#x27;</span>, <span class=\"string\">&#x27;Iceland&#x27;</span>: <span class=\"string\">&#x27;冰岛&#x27;</span>, <span class=\"string\">&#x27;Israel&#x27;</span>: <span class=\"string\">&#x27;以色列&#x27;</span>, <span class=\"string\">&#x27;Italy&#x27;</span>: <span class=\"string\">&#x27;意大利&#x27;</span>, <span class=\"string\">&#x27;Jamaica&#x27;</span>: <span class=\"string\">&#x27;牙买加&#x27;</span>, <span class=\"string\">&#x27;Jordan&#x27;</span>: <span class=\"string\">&#x27;约旦&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Japan&#x27;</span>: <span class=\"string\">&#x27;日本&#x27;</span>, <span class=\"string\">&#x27;Kazakhstan&#x27;</span>: <span class=\"string\">&#x27;哈萨克斯坦&#x27;</span>, <span class=\"string\">&#x27;Kenya&#x27;</span>: <span class=\"string\">&#x27;肯尼亚&#x27;</span>, <span class=\"string\">&#x27;Kyrgyzstan&#x27;</span>: <span class=\"string\">&#x27;吉尔吉斯斯坦&#x27;</span>, <span class=\"string\">&#x27;Cambodia&#x27;</span>: <span class=\"string\">&#x27;柬埔寨&#x27;</span>, <span class=\"string\">&#x27;Korea&#x27;</span>: <span class=\"string\">&#x27;韩国&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Kosovo&#x27;</span>: <span class=\"string\">&#x27;科索沃&#x27;</span>, <span class=\"string\">&#x27;Kuwait&#x27;</span>: <span class=\"string\">&#x27;科威特&#x27;</span>, <span class=\"string\">&#x27;Lao PDR&#x27;</span>: <span class=\"string\">&#x27;老挝&#x27;</span>, <span class=\"string\">&#x27;Lebanon&#x27;</span>: <span class=\"string\">&#x27;黎巴嫩&#x27;</span>, <span class=\"string\">&#x27;Liberia&#x27;</span>: <span class=\"string\">&#x27;利比里亚&#x27;</span>, <span class=\"string\">&#x27;Libya&#x27;</span>: <span class=\"string\">&#x27;利比亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Sri Lanka&#x27;</span>: <span class=\"string\">&#x27;斯里兰卡&#x27;</span>, <span class=\"string\">&#x27;Lesotho&#x27;</span>: <span class=\"string\">&#x27;莱索托&#x27;</span>, <span class=\"string\">&#x27;Lithuania&#x27;</span>: <span class=\"string\">&#x27;立陶宛&#x27;</span>, <span class=\"string\">&#x27;Luxembourg&#x27;</span>: <span class=\"string\">&#x27;卢森堡&#x27;</span>, <span class=\"string\">&#x27;Latvia&#x27;</span>: <span class=\"string\">&#x27;拉脱维亚&#x27;</span>, <span class=\"string\">&#x27;Morocco&#x27;</span>: <span class=\"string\">&#x27;摩洛哥&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Moldova&#x27;</span>: <span class=\"string\">&#x27;摩尔多瓦&#x27;</span>, <span class=\"string\">&#x27;Madagascar&#x27;</span>: <span class=\"string\">&#x27;马达加斯加&#x27;</span>, <span class=\"string\">&#x27;Mexico&#x27;</span>: <span class=\"string\">&#x27;墨西哥&#x27;</span>, <span class=\"string\">&#x27;Macedonia&#x27;</span>: <span class=\"string\">&#x27;马其顿&#x27;</span>, <span class=\"string\">&#x27;Mali&#x27;</span>: <span class=\"string\">&#x27;马里&#x27;</span>, <span class=\"string\">&#x27;Myanmar&#x27;</span>: <span class=\"string\">&#x27;缅甸&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Montenegro&#x27;</span>: <span class=\"string\">&#x27;黑山&#x27;</span>, <span class=\"string\">&#x27;Mongolia&#x27;</span>: <span class=\"string\">&#x27;蒙古&#x27;</span>, <span class=\"string\">&#x27;Mozambique&#x27;</span>: <span class=\"string\">&#x27;莫桑比克&#x27;</span>, <span class=\"string\">&#x27;Mauritania&#x27;</span>: <span class=\"string\">&#x27;毛里塔尼亚&#x27;</span>, <span class=\"string\">&#x27;Malawi&#x27;</span>: <span class=\"string\">&#x27;马拉维&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Malaysia&#x27;</span>: <span class=\"string\">&#x27;马来西亚&#x27;</span>, <span class=\"string\">&#x27;Namibia&#x27;</span>: <span class=\"string\">&#x27;纳米比亚&#x27;</span>, <span class=\"string\">&#x27;New Caledonia&#x27;</span>: <span class=\"string\">&#x27;新喀里多尼亚&#x27;</span>, <span class=\"string\">&#x27;Niger&#x27;</span>: <span class=\"string\">&#x27;尼日尔&#x27;</span>, <span class=\"string\">&#x27;Nigeria&#x27;</span>: <span class=\"string\">&#x27;尼日利亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Nicaragua&#x27;</span>: <span class=\"string\">&#x27;尼加拉瓜&#x27;</span>, <span class=\"string\">&#x27;Netherlands&#x27;</span>: <span class=\"string\">&#x27;荷兰&#x27;</span>, <span class=\"string\">&#x27;Norway&#x27;</span>: <span class=\"string\">&#x27;挪威&#x27;</span>, <span class=\"string\">&#x27;Nepal&#x27;</span>: <span class=\"string\">&#x27;尼泊尔&#x27;</span>, <span class=\"string\">&#x27;New Zealand&#x27;</span>: <span class=\"string\">&#x27;新西兰&#x27;</span>, <span class=\"string\">&#x27;Oman&#x27;</span>: <span class=\"string\">&#x27;阿曼&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Pakistan&#x27;</span>: <span class=\"string\">&#x27;巴基斯坦&#x27;</span>, <span class=\"string\">&#x27;Panama&#x27;</span>: <span class=\"string\">&#x27;巴拿马&#x27;</span>, <span class=\"string\">&#x27;Peru&#x27;</span>: <span class=\"string\">&#x27;秘鲁&#x27;</span>, <span class=\"string\">&#x27;Philippines&#x27;</span>: <span class=\"string\">&#x27;菲律宾&#x27;</span>, <span class=\"string\">&#x27;Papua New Guinea&#x27;</span>: <span class=\"string\">&#x27;巴布亚新几内亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Poland&#x27;</span>: <span class=\"string\">&#x27;波兰&#x27;</span>, <span class=\"string\">&#x27;Puerto Rico&#x27;</span>: <span class=\"string\">&#x27;波多黎各&#x27;</span>, <span class=\"string\">&#x27;Dem. Rep. Korea&#x27;</span>: <span class=\"string\">&#x27;朝鲜&#x27;</span>, <span class=\"string\">&#x27;Portugal&#x27;</span>: <span class=\"string\">&#x27;葡萄牙&#x27;</span>, <span class=\"string\">&#x27;Paraguay&#x27;</span>: <span class=\"string\">&#x27;巴拉圭&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Qatar&#x27;</span>: <span class=\"string\">&#x27;卡塔尔&#x27;</span>, <span class=\"string\">&#x27;Romania&#x27;</span>: <span class=\"string\">&#x27;罗马尼亚&#x27;</span>, <span class=\"string\">&#x27;Russia&#x27;</span>: <span class=\"string\">&#x27;俄罗斯&#x27;</span>, <span class=\"string\">&#x27;Rwanda&#x27;</span>: <span class=\"string\">&#x27;卢旺达&#x27;</span>, <span class=\"string\">&#x27;W. Sahara&#x27;</span>: <span class=\"string\">&#x27;西撒哈拉&#x27;</span>, <span class=\"string\">&#x27;Saudi Arabia&#x27;</span>: <span class=\"string\">&#x27;沙特阿拉伯&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Sudan&#x27;</span>: <span class=\"string\">&#x27;苏丹&#x27;</span>, <span class=\"string\">&#x27;S. Sudan&#x27;</span>: <span class=\"string\">&#x27;南苏丹&#x27;</span>, <span class=\"string\">&#x27;Senegal&#x27;</span>: <span class=\"string\">&#x27;塞内加尔&#x27;</span>, <span class=\"string\">&#x27;Solomon Is.&#x27;</span>: <span class=\"string\">&#x27;所罗门群岛&#x27;</span>, <span class=\"string\">&#x27;Sierra Leone&#x27;</span>: <span class=\"string\">&#x27;塞拉利昂&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;El Salvador&#x27;</span>: <span class=\"string\">&#x27;萨尔瓦多&#x27;</span>, <span class=\"string\">&#x27;Somaliland&#x27;</span>: <span class=\"string\">&#x27;索马里兰&#x27;</span>, <span class=\"string\">&#x27;Somalia&#x27;</span>: <span class=\"string\">&#x27;索马里&#x27;</span>, <span class=\"string\">&#x27;Serbia&#x27;</span>: <span class=\"string\">&#x27;塞尔维亚&#x27;</span>, <span class=\"string\">&#x27;Suriname&#x27;</span>: <span class=\"string\">&#x27;苏里南&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Slovakia&#x27;</span>: <span class=\"string\">&#x27;斯洛伐克&#x27;</span>, <span class=\"string\">&#x27;Slovenia&#x27;</span>: <span class=\"string\">&#x27;斯洛文尼亚&#x27;</span>, <span class=\"string\">&#x27;Sweden&#x27;</span>: <span class=\"string\">&#x27;瑞典&#x27;</span>, <span class=\"string\">&#x27;Swaziland&#x27;</span>: <span class=\"string\">&#x27;斯威士兰&#x27;</span>, <span class=\"string\">&#x27;Syria&#x27;</span>: <span class=\"string\">&#x27;叙利亚&#x27;</span>, <span class=\"string\">&#x27;Chad&#x27;</span>: <span class=\"string\">&#x27;乍得&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Togo&#x27;</span>: <span class=\"string\">&#x27;多哥&#x27;</span>, <span class=\"string\">&#x27;Thailand&#x27;</span>: <span class=\"string\">&#x27;泰国&#x27;</span>, <span class=\"string\">&#x27;Tajikistan&#x27;</span>: <span class=\"string\">&#x27;塔吉克斯坦&#x27;</span>, <span class=\"string\">&#x27;Turkmenistan&#x27;</span>: <span class=\"string\">&#x27;土库曼斯坦&#x27;</span>, <span class=\"string\">&#x27;East Timor&#x27;</span>: <span class=\"string\">&#x27;东帝汶&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Trinidad and Tobago&#x27;</span>: <span class=\"string\">&#x27;特里尼达和多巴哥&#x27;</span>, <span class=\"string\">&#x27;Tunisia&#x27;</span>: <span class=\"string\">&#x27;突尼斯&#x27;</span>, <span class=\"string\">&#x27;Turkey&#x27;</span>: <span class=\"string\">&#x27;土耳其&#x27;</span>, <span class=\"string\">&#x27;Tanzania&#x27;</span>: <span class=\"string\">&#x27;坦桑尼亚&#x27;</span>, <span class=\"string\">&#x27;Uganda&#x27;</span>: <span class=\"string\">&#x27;乌干达&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Ukraine&#x27;</span>: <span class=\"string\">&#x27;乌克兰&#x27;</span>, <span class=\"string\">&#x27;Uruguay&#x27;</span>: <span class=\"string\">&#x27;乌拉圭&#x27;</span>, <span class=\"string\">&#x27;United States&#x27;</span>: <span class=\"string\">&#x27;美国&#x27;</span>, <span class=\"string\">&#x27;Uzbekistan&#x27;</span>: <span class=\"string\">&#x27;乌兹别克斯坦&#x27;</span>, <span class=\"string\">&#x27;Venezuela&#x27;</span>: <span class=\"string\">&#x27;委内瑞拉&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Vietnam&#x27;</span>: <span class=\"string\">&#x27;越南&#x27;</span>, <span class=\"string\">&#x27;Vanuatu&#x27;</span>: <span class=\"string\">&#x27;瓦努阿图&#x27;</span>, <span class=\"string\">&#x27;West Bank&#x27;</span>: <span class=\"string\">&#x27;西岸&#x27;</span>, <span class=\"string\">&#x27;Yemen&#x27;</span>: <span class=\"string\">&#x27;也门&#x27;</span>, <span class=\"string\">&#x27;South Africa&#x27;</span>: <span class=\"string\">&#x27;南非&#x27;</span>, <span class=\"string\">&#x27;Zambia&#x27;</span>: <span class=\"string\">&#x27;赞比亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Zimbabwe&#x27;</span>: <span class=\"string\">&#x27;津巴布韦&#x27;</span>, <span class=\"string\">&#x27;Comoros&#x27;</span>: <span class=\"string\">&#x27;科摩罗&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">province_map = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;Anhui&#x27;</span>: <span class=\"string\">&#x27;安徽&#x27;</span>, <span class=\"string\">&#x27;Beijing&#x27;</span>: <span class=\"string\">&#x27;北京&#x27;</span>, <span class=\"string\">&#x27;Chongqing&#x27;</span>: <span class=\"string\">&#x27;重庆&#x27;</span>, <span class=\"string\">&#x27;Fujian&#x27;</span>: <span class=\"string\">&#x27;新疆&#x27;</span>, <span class=\"string\">&#x27;Gansu&#x27;</span>: <span class=\"string\">&#x27;甘肃&#x27;</span>, <span class=\"string\">&#x27;Guangdong&#x27;</span>: <span class=\"string\">&#x27;广东&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Guangxi&#x27;</span>: <span class=\"string\">&#x27;广西&#x27;</span>, <span class=\"string\">&#x27;Guizhou&#x27;</span>: <span class=\"string\">&#x27;贵州&#x27;</span>, <span class=\"string\">&#x27;Hainan&#x27;</span>: <span class=\"string\">&#x27;海南&#x27;</span>, <span class=\"string\">&#x27;Hebei&#x27;</span>: <span class=\"string\">&#x27;河北&#x27;</span>, <span class=\"string\">&#x27;Heilongjiang&#x27;</span>: <span class=\"string\">&#x27;黑龙江&#x27;</span>, <span class=\"string\">&#x27;Henan&#x27;</span>: <span class=\"string\">&#x27;河南&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Hong Kong&#x27;</span>: <span class=\"string\">&#x27;香港&#x27;</span>, <span class=\"string\">&#x27;Hubei&#x27;</span>: <span class=\"string\">&#x27;湖北&#x27;</span>, <span class=\"string\">&#x27;Hunan&#x27;</span>: <span class=\"string\">&#x27;湖南&#x27;</span>, <span class=\"string\">&#x27;Inner Mongolia&#x27;</span>: <span class=\"string\">&#x27;内蒙古&#x27;</span>, <span class=\"string\">&#x27;Jiangsu&#x27;</span>: <span class=\"string\">&#x27;江苏&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Jiangxi&#x27;</span>: <span class=\"string\">&#x27;江西&#x27;</span>, <span class=\"string\">&#x27;Jilin&#x27;</span>: <span class=\"string\">&#x27;吉林&#x27;</span>, <span class=\"string\">&#x27;Liaoning&#x27;</span>: <span class=\"string\">&#x27;辽宁&#x27;</span>, <span class=\"string\">&#x27;Macau&#x27;</span>: <span class=\"string\">&#x27;澳门&#x27;</span>, <span class=\"string\">&#x27;Ningxia&#x27;</span>: <span class=\"string\">&#x27;宁夏&#x27;</span>, <span class=\"string\">&#x27;Qinghai&#x27;</span>: <span class=\"string\">&#x27;青海&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Shaanxi&#x27;</span>: <span class=\"string\">&#x27;陕西&#x27;</span>, <span class=\"string\">&#x27;Shandong&#x27;</span>: <span class=\"string\">&#x27;山东&#x27;</span>, <span class=\"string\">&#x27;Shanghai&#x27;</span>: <span class=\"string\">&#x27;上海&#x27;</span>, <span class=\"string\">&#x27;Shanxi&#x27;</span>: <span class=\"string\">&#x27;山西&#x27;</span>, <span class=\"string\">&#x27;Sichuan&#x27;</span>: <span class=\"string\">&#x27;四川&#x27;</span>, <span class=\"string\">&#x27;Tianjin&#x27;</span>: <span class=\"string\">&#x27;天津&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Tibet&#x27;</span>: <span class=\"string\">&#x27;西藏&#x27;</span>, <span class=\"string\">&#x27;Xinjiang&#x27;</span>: <span class=\"string\">&#x27;新疆&#x27;</span>, <span class=\"string\">&#x27;Yunnan&#x27;</span>: <span class=\"string\">&#x27;云南&#x27;</span>, <span class=\"string\">&#x27;Zhejiang&#x27;</span>: <span class=\"string\">&#x27;浙江&#x27;</span>, <span class=\"string\">&#x27;Fujian&#x27;</span>:<span class=\"string\">&#x27;福建&#x27;</span>, <span class=\"string\">&#x27;Taiwan&#x27;</span>: <span class=\"string\">&#x27;台湾&#x27;</span></span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover8.JPG","excerpt":"","more":"<h2 id=\"Summary\">Summary</h2>\n<p>从五个主题、分析</p>\n<h2 id=\"数据概况\">数据概况</h2>\n<p>三个数据集，每个数据分别存储全球确诊、死亡、治愈数据。</p>\n<p><img src=\"static/attachment/Pasted%20image%2020220627084334.png\" alt=\"static/attachment/Pasted image 20220627084334.png\"></p>\n<p>数据字段<br>\n<img src=\"static/attachment/Pasted%20image%2020220627084512.png\" alt=\"static/attachment/Pasted image 20220627084512.png\"></p>\n<h3 id=\"数仓的建立\">数仓的建立</h3>\n<p>ODS（Operational Data Stored）：数据源中的数据，经过 <strong>抽取、转换、加载</strong>，也就说传说中的 ETL 之后，装入本层。本层的数据，总体上大多是按照源头业务系统的分类方式而分类的。</p>\n<p>DW（Data Warehouse））：从 ODS 层中获得的数据 <strong>按主题</strong> 建立各种数据模型，<strong>复用性强</strong>。</p>\n<p>APP（Application）：要求比 <strong>较快的响应速度</strong>，<strong>复用性不强</strong></p>\n<ul>\n<li>建立数据仓库\n<ul>\n<li>数据源层（ODS，Operational Data Stored）：存储原始数据\n<ul>\n<li>借还信息</li>\n<li>读者信息</li>\n</ul>\n</li>\n<li>数据仓库（DW, Data Warehouse）：存储主题数据\n<ul>\n<li>读者主题</li>\n<li>书籍主题</li>\n</ul>\n</li>\n<li>应用 APP（Application）\n<ul>\n<li>读者画像</li>\n<li>数目</li>\n</ul>\n</li>\n<li>DIM\n<ul>\n<li>省市转换</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/images/86dec513da88334739dd7b5bfc200e4728f80ae7.png\" alt=\"Excalidraw/D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库 2022-06-28 08.20.24.excalidraw\"></p>\n<h2 id=\"思路框架\">思路框架</h2>\n<p><img src=\"/images/1a78cafe53c725fdc93ea404a23d18bed8b0314f.png\" alt=\"Excalidraw/D5- 综合项目 - COVID-19 疫情数据处理与分析-数据仓库 2022-06-29 08.26.01.excalidraw\"></p>\n<h2 id=\"实验步骤\">实验步骤</h2>\n<ul>\n<li>数据加载 ✔\n<ul>\n<li>将数据导入到 ODS 层（死亡、治愈、确诊）✔\n<ul>\n<li>数据处理（将原始数据转换为 <code>国家，省份，经度，纬度，日期，治愈人数</code>）\n<ul>\n<li>将横纵坐标交换（data.T, 转置）（将日期放到纵轴）\n<ul>\n<li>每一列：表示每一个国家每个日期的治愈人数</li>\n</ul>\n</li>\n<li>拼装的目标格式：</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>加载了 DIM 数据（映射数据）✔\n<ul>\n<li>对应关系数据\n<ul>\n<li>1 对应为 男</li>\n<li>2 对应为 女</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ODS-&gt;DW（<strong>复用性强</strong>)\n<ul>\n<li>按 <strong>主题</strong> 抽取和整理转换\n<ul>\n<li>抽取：获取数据并对数据进行一定处理</li>\n<li>转换：英文的国家、省转换（映射）为中文</li>\n<li>加载：将转换好的数据存储到 DW</li>\n</ul>\n</li>\n<li>主题 1\n<ul>\n<li><strong>每个国家总计确诊、死亡、治愈人数</strong>（主题）（主题=多个分析点的集合）</li>\n<li>实战步骤\n<ul>\n<li>从 ODS 层抽取数据 ✔</li>\n<li>从 DIM 层抽取国家数据（映射数据）✔</li>\n<li>将英文的国家映射为中文的国家 ✔</li>\n<li>统计每个国家 <strong>每年每月</strong> 的确诊、死亡、治愈人数 ✔</li>\n<li>存储到 DW ✔\n<ul>\n<li>建立主题表\n<ul>\n<li>字段：<code>国家、时间（年）、时间（月）、确诊、死亡、治愈人数</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>APP（<strong>较快的响应速度</strong>，<strong>复用性不强</strong>）\n<ul>\n<li>在 DW 层的基础上，按三个维度进行汇总\n<ul>\n<li>按年统计确诊、死亡、治愈人数</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"实战\">实战</h2>\n<ul>\n<li>每个国家的死亡人数汇总（柱状图）</li>\n<li>2020 年/2021 年总死亡人数（指标卡）</li>\n<li>总死亡人数</li>\n</ul>\n<h2 id=\"数据分析\">数据分析</h2>\n<p><strong>数据仓库即</strong> Data Warehouse ，是为企业所有级别的决策制定过程，提供所有类型数据支持的战略集合。它是单个数据存储，出于分析性报告和决策支持目的而创建。 为需要业务智能的企业，提供指导业务流程改进、监视时间、成本、质量以及控制。</p>\n<p>简单来说，DW 的本质也是一个数据库，但是，他是针对数据分析的业务场景而设定的。传统的数据库，是为了支撑实际业务如商城而建立的，针对查询量小（单条数据如查询用户信息）的业务场景。数据仓库是为了做数据分析的，针对的是查询量大（每次查询几万甚至几百万条数据）的业务场景。</p>\n<ul>\n<li>全球疫情情况（按月建立数据仓库）（主题 1）\n<ul>\n<li>总确诊人数</li>\n<li>总死亡人数</li>\n<li>总治愈人数</li>\n<li>治愈率</li>\n<li>死亡率</li>\n</ul>\n</li>\n<li>全球疫情形式（按月建立数据仓库）（主题 2）\n<ul>\n<li>x：日期</li>\n<li>y：日新增人数、日确诊人数、日死亡人数</li>\n</ul>\n</li>\n<li>排行（按月建立数据仓库）（主题 3）\n<ul>\n<li>各国确诊人数 TOP20</li>\n<li>各国死亡人数 TOP20</li>\n<li>各国治愈人数 TOP20</li>\n</ul>\n</li>\n<li>中国疫情现状 TOP20（按月建立数据仓库）（主题 4）\n<ul>\n<li>确诊</li>\n<li>死亡</li>\n<li>治愈</li>\n</ul>\n</li>\n<li>中国疫情趋势（按月建立数据仓库）（主题 5）\n<ul>\n<li><img src=\"static/attachment/Pasted%20image%2020220627085626.png\" alt=\"static/attachment/Pasted image 20220627085626.png\"></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"地图数据\">地图数据</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">country_map = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;Singapore Rep.&#x27;</span>: <span class=\"string\">&#x27;新加坡&#x27;</span>, <span class=\"string\">&#x27;Dominican Rep.&#x27;</span>: <span class=\"string\">&#x27;多米尼加&#x27;</span>, <span class=\"string\">&#x27;Palestine&#x27;</span>: <span class=\"string\">&#x27;巴勒斯坦&#x27;</span>, <span class=\"string\">&#x27;Bahamas&#x27;</span>: <span class=\"string\">&#x27;巴哈马&#x27;</span>, <span class=\"string\">&#x27;Timor-Leste&#x27;</span>: <span class=\"string\">&#x27;东帝汶&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Afghanistan&#x27;</span>: <span class=\"string\">&#x27;阿富汗&#x27;</span>, <span class=\"string\">&#x27;Guinea-Bissau&#x27;</span>: <span class=\"string\">&#x27;几内亚比绍&#x27;</span>, <span class=\"string\">&quot;Côte d&#x27;Ivoire&quot;</span>: <span class=\"string\">&#x27;科特迪瓦&#x27;</span>, <span class=\"string\">&#x27;Siachen Glacier&#x27;</span>: <span class=\"string\">&#x27;锡亚琴冰川&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;Br. Indian Ocean Ter.&quot;</span>: <span class=\"string\">&#x27;英属印度洋领土&#x27;</span>, <span class=\"string\">&#x27;Angola&#x27;</span>: <span class=\"string\">&#x27;安哥拉&#x27;</span>, <span class=\"string\">&#x27;Albania&#x27;</span>: <span class=\"string\">&#x27;阿尔巴尼亚&#x27;</span>, <span class=\"string\">&#x27;United Arab Emirates&#x27;</span>: <span class=\"string\">&#x27;阿联酋&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Argentina&#x27;</span>: <span class=\"string\">&#x27;阿根廷&#x27;</span>, <span class=\"string\">&#x27;Armenia&#x27;</span>: <span class=\"string\">&#x27;亚美尼亚&#x27;</span>, <span class=\"string\">&#x27;French Southern and Antarctic Lands&#x27;</span>: <span class=\"string\">&#x27;法属南半球和南极领地&#x27;</span>, <span class=\"string\">&#x27;Australia&#x27;</span>: <span class=\"string\">&#x27;澳大利亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Austria&#x27;</span>: <span class=\"string\">&#x27;奥地利&#x27;</span>, <span class=\"string\">&#x27;Azerbaijan&#x27;</span>: <span class=\"string\">&#x27;阿塞拜疆&#x27;</span>, <span class=\"string\">&#x27;Burundi&#x27;</span>: <span class=\"string\">&#x27;布隆迪&#x27;</span>, <span class=\"string\">&#x27;Belgium&#x27;</span>: <span class=\"string\">&#x27;比利时&#x27;</span>, <span class=\"string\">&#x27;Benin&#x27;</span>: <span class=\"string\">&#x27;贝宁&#x27;</span>, <span class=\"string\">&#x27;Burkina Faso&#x27;</span>: <span class=\"string\">&#x27;布基纳法索&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Bangladesh&#x27;</span>: <span class=\"string\">&#x27;孟加拉国&#x27;</span>, <span class=\"string\">&#x27;Bulgaria&#x27;</span>: <span class=\"string\">&#x27;保加利亚&#x27;</span>, <span class=\"string\">&#x27;The Bahamas&#x27;</span>: <span class=\"string\">&#x27;巴哈马&#x27;</span>, <span class=\"string\">&#x27;Bosnia and Herz.&#x27;</span>: <span class=\"string\">&#x27;波斯尼亚和黑塞哥维那&#x27;</span>, <span class=\"string\">&#x27;Belarus&#x27;</span>: <span class=\"string\">&#x27;白俄罗斯&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Belize&#x27;</span>: <span class=\"string\">&#x27;伯利兹&#x27;</span>, <span class=\"string\">&#x27;Bermuda&#x27;</span>: <span class=\"string\">&#x27;百慕大&#x27;</span>, <span class=\"string\">&#x27;Bolivia&#x27;</span>: <span class=\"string\">&#x27;玻利维亚&#x27;</span>, <span class=\"string\">&#x27;Brazil&#x27;</span>: <span class=\"string\">&#x27;巴西&#x27;</span>, <span class=\"string\">&#x27;Brunei&#x27;</span>: <span class=\"string\">&#x27;文莱&#x27;</span>, <span class=\"string\">&#x27;Bhutan&#x27;</span>: <span class=\"string\">&#x27;不丹&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Botswana&#x27;</span>: <span class=\"string\">&#x27;博茨瓦纳&#x27;</span>, <span class=\"string\">&#x27;Central African Rep.&#x27;</span>: <span class=\"string\">&#x27;中非&#x27;</span>, <span class=\"string\">&#x27;Canada&#x27;</span>: <span class=\"string\">&#x27;加拿大&#x27;</span>, <span class=\"string\">&#x27;Switzerland&#x27;</span>: <span class=\"string\">&#x27;瑞士&#x27;</span>, <span class=\"string\">&#x27;Chile&#x27;</span>: <span class=\"string\">&#x27;智利&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;China&#x27;</span>: <span class=\"string\">&#x27;中国&#x27;</span>, <span class=\"string\">&#x27;Ivory Coast&#x27;</span>: <span class=\"string\">&#x27;象牙海岸&#x27;</span>, <span class=\"string\">&#x27;Cameroon&#x27;</span>: <span class=\"string\">&#x27;喀麦隆&#x27;</span>, <span class=\"string\">&#x27;Dem. Rep. Congo&#x27;</span>: <span class=\"string\">&#x27;刚果民主共和国&#x27;</span>, <span class=\"string\">&#x27;Congo&#x27;</span>: <span class=\"string\">&#x27;刚果&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Colombia&#x27;</span>: <span class=\"string\">&#x27;哥伦比亚&#x27;</span>, <span class=\"string\">&#x27;Costa Rica&#x27;</span>: <span class=\"string\">&#x27;哥斯达黎加&#x27;</span>, <span class=\"string\">&#x27;Cuba&#x27;</span>: <span class=\"string\">&#x27;古巴&#x27;</span>, <span class=\"string\">&#x27;N. Cyprus&#x27;</span>: <span class=\"string\">&#x27;北塞浦路斯&#x27;</span>, <span class=\"string\">&#x27;Cyprus&#x27;</span>: <span class=\"string\">&#x27;塞浦路斯&#x27;</span>, <span class=\"string\">&#x27;Czech Rep.&#x27;</span>: <span class=\"string\">&#x27;捷克&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Germany&#x27;</span>: <span class=\"string\">&#x27;德国&#x27;</span>, <span class=\"string\">&#x27;Djibouti&#x27;</span>: <span class=\"string\">&#x27;吉布提&#x27;</span>, <span class=\"string\">&#x27;Denmark&#x27;</span>: <span class=\"string\">&#x27;丹麦&#x27;</span>, <span class=\"string\">&#x27;Algeria&#x27;</span>: <span class=\"string\">&#x27;阿尔及利亚&#x27;</span>, <span class=\"string\">&#x27;Ecuador&#x27;</span>: <span class=\"string\">&#x27;厄瓜多尔&#x27;</span>, <span class=\"string\">&#x27;Egypt&#x27;</span>: <span class=\"string\">&#x27;埃及&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Eritrea&#x27;</span>: <span class=\"string\">&#x27;厄立特里亚&#x27;</span>, <span class=\"string\">&#x27;Spain&#x27;</span>: <span class=\"string\">&#x27;西班牙&#x27;</span>, <span class=\"string\">&#x27;Estonia&#x27;</span>: <span class=\"string\">&#x27;爱沙尼亚&#x27;</span>, <span class=\"string\">&#x27;Ethiopia&#x27;</span>: <span class=\"string\">&#x27;埃塞俄比亚&#x27;</span>, <span class=\"string\">&#x27;Finland&#x27;</span>: <span class=\"string\">&#x27;芬兰&#x27;</span>, <span class=\"string\">&#x27;Fiji&#x27;</span>: <span class=\"string\">&#x27;斐&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Falkland Islands&#x27;</span>: <span class=\"string\">&#x27;福克兰群岛&#x27;</span>, <span class=\"string\">&#x27;France&#x27;</span>: <span class=\"string\">&#x27;法国&#x27;</span>, <span class=\"string\">&#x27;Gabon&#x27;</span>: <span class=\"string\">&#x27;加蓬&#x27;</span>, <span class=\"string\">&#x27;United Kingdom&#x27;</span>: <span class=\"string\">&#x27;英国&#x27;</span>, <span class=\"string\">&#x27;Georgia&#x27;</span>: <span class=\"string\">&#x27;格鲁吉亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Ghana&#x27;</span>: <span class=\"string\">&#x27;加纳&#x27;</span>, <span class=\"string\">&#x27;Guinea&#x27;</span>: <span class=\"string\">&#x27;几内亚&#x27;</span>, <span class=\"string\">&#x27;Gambia&#x27;</span>: <span class=\"string\">&#x27;冈比亚&#x27;</span>, <span class=\"string\">&#x27;Guinea Bissau&#x27;</span>: <span class=\"string\">&#x27;几内亚比绍&#x27;</span>, <span class=\"string\">&#x27;Eq. Guinea&#x27;</span>: <span class=\"string\">&#x27;赤道几内亚&#x27;</span>, <span class=\"string\">&#x27;Greece&#x27;</span>: <span class=\"string\">&#x27;希腊&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Greenland&#x27;</span>: <span class=\"string\">&#x27;格陵兰&#x27;</span>, <span class=\"string\">&#x27;Guatemala&#x27;</span>: <span class=\"string\">&#x27;危地马拉&#x27;</span>, <span class=\"string\">&#x27;French Guiana&#x27;</span>: <span class=\"string\">&#x27;法属圭亚那&#x27;</span>, <span class=\"string\">&#x27;Guyana&#x27;</span>: <span class=\"string\">&#x27;圭亚那&#x27;</span>, <span class=\"string\">&#x27;Honduras&#x27;</span>: <span class=\"string\">&#x27;洪都拉斯&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Croatia&#x27;</span>: <span class=\"string\">&#x27;克罗地亚&#x27;</span>, <span class=\"string\">&#x27;Haiti&#x27;</span>: <span class=\"string\">&#x27;海地&#x27;</span>, <span class=\"string\">&#x27;Hungary&#x27;</span>: <span class=\"string\">&#x27;匈牙利&#x27;</span>, <span class=\"string\">&#x27;Indonesia&#x27;</span>: <span class=\"string\">&#x27;印度尼西亚&#x27;</span>, <span class=\"string\">&#x27;India&#x27;</span>: <span class=\"string\">&#x27;印度&#x27;</span>, <span class=\"string\">&#x27;Ireland&#x27;</span>: <span class=\"string\">&#x27;爱尔兰&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Iran&#x27;</span>: <span class=\"string\">&#x27;伊朗&#x27;</span>, <span class=\"string\">&#x27;Iraq&#x27;</span>: <span class=\"string\">&#x27;伊拉克&#x27;</span>, <span class=\"string\">&#x27;Iceland&#x27;</span>: <span class=\"string\">&#x27;冰岛&#x27;</span>, <span class=\"string\">&#x27;Israel&#x27;</span>: <span class=\"string\">&#x27;以色列&#x27;</span>, <span class=\"string\">&#x27;Italy&#x27;</span>: <span class=\"string\">&#x27;意大利&#x27;</span>, <span class=\"string\">&#x27;Jamaica&#x27;</span>: <span class=\"string\">&#x27;牙买加&#x27;</span>, <span class=\"string\">&#x27;Jordan&#x27;</span>: <span class=\"string\">&#x27;约旦&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Japan&#x27;</span>: <span class=\"string\">&#x27;日本&#x27;</span>, <span class=\"string\">&#x27;Kazakhstan&#x27;</span>: <span class=\"string\">&#x27;哈萨克斯坦&#x27;</span>, <span class=\"string\">&#x27;Kenya&#x27;</span>: <span class=\"string\">&#x27;肯尼亚&#x27;</span>, <span class=\"string\">&#x27;Kyrgyzstan&#x27;</span>: <span class=\"string\">&#x27;吉尔吉斯斯坦&#x27;</span>, <span class=\"string\">&#x27;Cambodia&#x27;</span>: <span class=\"string\">&#x27;柬埔寨&#x27;</span>, <span class=\"string\">&#x27;Korea&#x27;</span>: <span class=\"string\">&#x27;韩国&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Kosovo&#x27;</span>: <span class=\"string\">&#x27;科索沃&#x27;</span>, <span class=\"string\">&#x27;Kuwait&#x27;</span>: <span class=\"string\">&#x27;科威特&#x27;</span>, <span class=\"string\">&#x27;Lao PDR&#x27;</span>: <span class=\"string\">&#x27;老挝&#x27;</span>, <span class=\"string\">&#x27;Lebanon&#x27;</span>: <span class=\"string\">&#x27;黎巴嫩&#x27;</span>, <span class=\"string\">&#x27;Liberia&#x27;</span>: <span class=\"string\">&#x27;利比里亚&#x27;</span>, <span class=\"string\">&#x27;Libya&#x27;</span>: <span class=\"string\">&#x27;利比亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Sri Lanka&#x27;</span>: <span class=\"string\">&#x27;斯里兰卡&#x27;</span>, <span class=\"string\">&#x27;Lesotho&#x27;</span>: <span class=\"string\">&#x27;莱索托&#x27;</span>, <span class=\"string\">&#x27;Lithuania&#x27;</span>: <span class=\"string\">&#x27;立陶宛&#x27;</span>, <span class=\"string\">&#x27;Luxembourg&#x27;</span>: <span class=\"string\">&#x27;卢森堡&#x27;</span>, <span class=\"string\">&#x27;Latvia&#x27;</span>: <span class=\"string\">&#x27;拉脱维亚&#x27;</span>, <span class=\"string\">&#x27;Morocco&#x27;</span>: <span class=\"string\">&#x27;摩洛哥&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Moldova&#x27;</span>: <span class=\"string\">&#x27;摩尔多瓦&#x27;</span>, <span class=\"string\">&#x27;Madagascar&#x27;</span>: <span class=\"string\">&#x27;马达加斯加&#x27;</span>, <span class=\"string\">&#x27;Mexico&#x27;</span>: <span class=\"string\">&#x27;墨西哥&#x27;</span>, <span class=\"string\">&#x27;Macedonia&#x27;</span>: <span class=\"string\">&#x27;马其顿&#x27;</span>, <span class=\"string\">&#x27;Mali&#x27;</span>: <span class=\"string\">&#x27;马里&#x27;</span>, <span class=\"string\">&#x27;Myanmar&#x27;</span>: <span class=\"string\">&#x27;缅甸&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Montenegro&#x27;</span>: <span class=\"string\">&#x27;黑山&#x27;</span>, <span class=\"string\">&#x27;Mongolia&#x27;</span>: <span class=\"string\">&#x27;蒙古&#x27;</span>, <span class=\"string\">&#x27;Mozambique&#x27;</span>: <span class=\"string\">&#x27;莫桑比克&#x27;</span>, <span class=\"string\">&#x27;Mauritania&#x27;</span>: <span class=\"string\">&#x27;毛里塔尼亚&#x27;</span>, <span class=\"string\">&#x27;Malawi&#x27;</span>: <span class=\"string\">&#x27;马拉维&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Malaysia&#x27;</span>: <span class=\"string\">&#x27;马来西亚&#x27;</span>, <span class=\"string\">&#x27;Namibia&#x27;</span>: <span class=\"string\">&#x27;纳米比亚&#x27;</span>, <span class=\"string\">&#x27;New Caledonia&#x27;</span>: <span class=\"string\">&#x27;新喀里多尼亚&#x27;</span>, <span class=\"string\">&#x27;Niger&#x27;</span>: <span class=\"string\">&#x27;尼日尔&#x27;</span>, <span class=\"string\">&#x27;Nigeria&#x27;</span>: <span class=\"string\">&#x27;尼日利亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Nicaragua&#x27;</span>: <span class=\"string\">&#x27;尼加拉瓜&#x27;</span>, <span class=\"string\">&#x27;Netherlands&#x27;</span>: <span class=\"string\">&#x27;荷兰&#x27;</span>, <span class=\"string\">&#x27;Norway&#x27;</span>: <span class=\"string\">&#x27;挪威&#x27;</span>, <span class=\"string\">&#x27;Nepal&#x27;</span>: <span class=\"string\">&#x27;尼泊尔&#x27;</span>, <span class=\"string\">&#x27;New Zealand&#x27;</span>: <span class=\"string\">&#x27;新西兰&#x27;</span>, <span class=\"string\">&#x27;Oman&#x27;</span>: <span class=\"string\">&#x27;阿曼&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Pakistan&#x27;</span>: <span class=\"string\">&#x27;巴基斯坦&#x27;</span>, <span class=\"string\">&#x27;Panama&#x27;</span>: <span class=\"string\">&#x27;巴拿马&#x27;</span>, <span class=\"string\">&#x27;Peru&#x27;</span>: <span class=\"string\">&#x27;秘鲁&#x27;</span>, <span class=\"string\">&#x27;Philippines&#x27;</span>: <span class=\"string\">&#x27;菲律宾&#x27;</span>, <span class=\"string\">&#x27;Papua New Guinea&#x27;</span>: <span class=\"string\">&#x27;巴布亚新几内亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Poland&#x27;</span>: <span class=\"string\">&#x27;波兰&#x27;</span>, <span class=\"string\">&#x27;Puerto Rico&#x27;</span>: <span class=\"string\">&#x27;波多黎各&#x27;</span>, <span class=\"string\">&#x27;Dem. Rep. Korea&#x27;</span>: <span class=\"string\">&#x27;朝鲜&#x27;</span>, <span class=\"string\">&#x27;Portugal&#x27;</span>: <span class=\"string\">&#x27;葡萄牙&#x27;</span>, <span class=\"string\">&#x27;Paraguay&#x27;</span>: <span class=\"string\">&#x27;巴拉圭&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Qatar&#x27;</span>: <span class=\"string\">&#x27;卡塔尔&#x27;</span>, <span class=\"string\">&#x27;Romania&#x27;</span>: <span class=\"string\">&#x27;罗马尼亚&#x27;</span>, <span class=\"string\">&#x27;Russia&#x27;</span>: <span class=\"string\">&#x27;俄罗斯&#x27;</span>, <span class=\"string\">&#x27;Rwanda&#x27;</span>: <span class=\"string\">&#x27;卢旺达&#x27;</span>, <span class=\"string\">&#x27;W. Sahara&#x27;</span>: <span class=\"string\">&#x27;西撒哈拉&#x27;</span>, <span class=\"string\">&#x27;Saudi Arabia&#x27;</span>: <span class=\"string\">&#x27;沙特阿拉伯&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Sudan&#x27;</span>: <span class=\"string\">&#x27;苏丹&#x27;</span>, <span class=\"string\">&#x27;S. Sudan&#x27;</span>: <span class=\"string\">&#x27;南苏丹&#x27;</span>, <span class=\"string\">&#x27;Senegal&#x27;</span>: <span class=\"string\">&#x27;塞内加尔&#x27;</span>, <span class=\"string\">&#x27;Solomon Is.&#x27;</span>: <span class=\"string\">&#x27;所罗门群岛&#x27;</span>, <span class=\"string\">&#x27;Sierra Leone&#x27;</span>: <span class=\"string\">&#x27;塞拉利昂&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;El Salvador&#x27;</span>: <span class=\"string\">&#x27;萨尔瓦多&#x27;</span>, <span class=\"string\">&#x27;Somaliland&#x27;</span>: <span class=\"string\">&#x27;索马里兰&#x27;</span>, <span class=\"string\">&#x27;Somalia&#x27;</span>: <span class=\"string\">&#x27;索马里&#x27;</span>, <span class=\"string\">&#x27;Serbia&#x27;</span>: <span class=\"string\">&#x27;塞尔维亚&#x27;</span>, <span class=\"string\">&#x27;Suriname&#x27;</span>: <span class=\"string\">&#x27;苏里南&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Slovakia&#x27;</span>: <span class=\"string\">&#x27;斯洛伐克&#x27;</span>, <span class=\"string\">&#x27;Slovenia&#x27;</span>: <span class=\"string\">&#x27;斯洛文尼亚&#x27;</span>, <span class=\"string\">&#x27;Sweden&#x27;</span>: <span class=\"string\">&#x27;瑞典&#x27;</span>, <span class=\"string\">&#x27;Swaziland&#x27;</span>: <span class=\"string\">&#x27;斯威士兰&#x27;</span>, <span class=\"string\">&#x27;Syria&#x27;</span>: <span class=\"string\">&#x27;叙利亚&#x27;</span>, <span class=\"string\">&#x27;Chad&#x27;</span>: <span class=\"string\">&#x27;乍得&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Togo&#x27;</span>: <span class=\"string\">&#x27;多哥&#x27;</span>, <span class=\"string\">&#x27;Thailand&#x27;</span>: <span class=\"string\">&#x27;泰国&#x27;</span>, <span class=\"string\">&#x27;Tajikistan&#x27;</span>: <span class=\"string\">&#x27;塔吉克斯坦&#x27;</span>, <span class=\"string\">&#x27;Turkmenistan&#x27;</span>: <span class=\"string\">&#x27;土库曼斯坦&#x27;</span>, <span class=\"string\">&#x27;East Timor&#x27;</span>: <span class=\"string\">&#x27;东帝汶&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Trinidad and Tobago&#x27;</span>: <span class=\"string\">&#x27;特里尼达和多巴哥&#x27;</span>, <span class=\"string\">&#x27;Tunisia&#x27;</span>: <span class=\"string\">&#x27;突尼斯&#x27;</span>, <span class=\"string\">&#x27;Turkey&#x27;</span>: <span class=\"string\">&#x27;土耳其&#x27;</span>, <span class=\"string\">&#x27;Tanzania&#x27;</span>: <span class=\"string\">&#x27;坦桑尼亚&#x27;</span>, <span class=\"string\">&#x27;Uganda&#x27;</span>: <span class=\"string\">&#x27;乌干达&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Ukraine&#x27;</span>: <span class=\"string\">&#x27;乌克兰&#x27;</span>, <span class=\"string\">&#x27;Uruguay&#x27;</span>: <span class=\"string\">&#x27;乌拉圭&#x27;</span>, <span class=\"string\">&#x27;United States&#x27;</span>: <span class=\"string\">&#x27;美国&#x27;</span>, <span class=\"string\">&#x27;Uzbekistan&#x27;</span>: <span class=\"string\">&#x27;乌兹别克斯坦&#x27;</span>, <span class=\"string\">&#x27;Venezuela&#x27;</span>: <span class=\"string\">&#x27;委内瑞拉&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Vietnam&#x27;</span>: <span class=\"string\">&#x27;越南&#x27;</span>, <span class=\"string\">&#x27;Vanuatu&#x27;</span>: <span class=\"string\">&#x27;瓦努阿图&#x27;</span>, <span class=\"string\">&#x27;West Bank&#x27;</span>: <span class=\"string\">&#x27;西岸&#x27;</span>, <span class=\"string\">&#x27;Yemen&#x27;</span>: <span class=\"string\">&#x27;也门&#x27;</span>, <span class=\"string\">&#x27;South Africa&#x27;</span>: <span class=\"string\">&#x27;南非&#x27;</span>, <span class=\"string\">&#x27;Zambia&#x27;</span>: <span class=\"string\">&#x27;赞比亚&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Zimbabwe&#x27;</span>: <span class=\"string\">&#x27;津巴布韦&#x27;</span>, <span class=\"string\">&#x27;Comoros&#x27;</span>: <span class=\"string\">&#x27;科摩罗&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">province_map = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;Anhui&#x27;</span>: <span class=\"string\">&#x27;安徽&#x27;</span>, <span class=\"string\">&#x27;Beijing&#x27;</span>: <span class=\"string\">&#x27;北京&#x27;</span>, <span class=\"string\">&#x27;Chongqing&#x27;</span>: <span class=\"string\">&#x27;重庆&#x27;</span>, <span class=\"string\">&#x27;Fujian&#x27;</span>: <span class=\"string\">&#x27;新疆&#x27;</span>, <span class=\"string\">&#x27;Gansu&#x27;</span>: <span class=\"string\">&#x27;甘肃&#x27;</span>, <span class=\"string\">&#x27;Guangdong&#x27;</span>: <span class=\"string\">&#x27;广东&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Guangxi&#x27;</span>: <span class=\"string\">&#x27;广西&#x27;</span>, <span class=\"string\">&#x27;Guizhou&#x27;</span>: <span class=\"string\">&#x27;贵州&#x27;</span>, <span class=\"string\">&#x27;Hainan&#x27;</span>: <span class=\"string\">&#x27;海南&#x27;</span>, <span class=\"string\">&#x27;Hebei&#x27;</span>: <span class=\"string\">&#x27;河北&#x27;</span>, <span class=\"string\">&#x27;Heilongjiang&#x27;</span>: <span class=\"string\">&#x27;黑龙江&#x27;</span>, <span class=\"string\">&#x27;Henan&#x27;</span>: <span class=\"string\">&#x27;河南&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Hong Kong&#x27;</span>: <span class=\"string\">&#x27;香港&#x27;</span>, <span class=\"string\">&#x27;Hubei&#x27;</span>: <span class=\"string\">&#x27;湖北&#x27;</span>, <span class=\"string\">&#x27;Hunan&#x27;</span>: <span class=\"string\">&#x27;湖南&#x27;</span>, <span class=\"string\">&#x27;Inner Mongolia&#x27;</span>: <span class=\"string\">&#x27;内蒙古&#x27;</span>, <span class=\"string\">&#x27;Jiangsu&#x27;</span>: <span class=\"string\">&#x27;江苏&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Jiangxi&#x27;</span>: <span class=\"string\">&#x27;江西&#x27;</span>, <span class=\"string\">&#x27;Jilin&#x27;</span>: <span class=\"string\">&#x27;吉林&#x27;</span>, <span class=\"string\">&#x27;Liaoning&#x27;</span>: <span class=\"string\">&#x27;辽宁&#x27;</span>, <span class=\"string\">&#x27;Macau&#x27;</span>: <span class=\"string\">&#x27;澳门&#x27;</span>, <span class=\"string\">&#x27;Ningxia&#x27;</span>: <span class=\"string\">&#x27;宁夏&#x27;</span>, <span class=\"string\">&#x27;Qinghai&#x27;</span>: <span class=\"string\">&#x27;青海&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Shaanxi&#x27;</span>: <span class=\"string\">&#x27;陕西&#x27;</span>, <span class=\"string\">&#x27;Shandong&#x27;</span>: <span class=\"string\">&#x27;山东&#x27;</span>, <span class=\"string\">&#x27;Shanghai&#x27;</span>: <span class=\"string\">&#x27;上海&#x27;</span>, <span class=\"string\">&#x27;Shanxi&#x27;</span>: <span class=\"string\">&#x27;山西&#x27;</span>, <span class=\"string\">&#x27;Sichuan&#x27;</span>: <span class=\"string\">&#x27;四川&#x27;</span>, <span class=\"string\">&#x27;Tianjin&#x27;</span>: <span class=\"string\">&#x27;天津&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;Tibet&#x27;</span>: <span class=\"string\">&#x27;西藏&#x27;</span>, <span class=\"string\">&#x27;Xinjiang&#x27;</span>: <span class=\"string\">&#x27;新疆&#x27;</span>, <span class=\"string\">&#x27;Yunnan&#x27;</span>: <span class=\"string\">&#x27;云南&#x27;</span>, <span class=\"string\">&#x27;Zhejiang&#x27;</span>: <span class=\"string\">&#x27;浙江&#x27;</span>, <span class=\"string\">&#x27;Fujian&#x27;</span>:<span class=\"string\">&#x27;福建&#x27;</span>, <span class=\"string\">&#x27;Taiwan&#x27;</span>: <span class=\"string\">&#x27;台湾&#x27;</span></span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n"},{"title":"ODDS 数据集划分标准及常见问题","share":true,"date":"2022-11-26T02:08:13.000Z","updated":"2022-12-28T15:03:16.000Z","aliases":["ODDS 数据集划分标准及常见问题","ODDS 数据集常见问题"],"_content":"\n## 划分结论\n\n![static/attachment/Pasted image 20221202093223.png](/images/82c4ab39614782bc5135a55d4e7a0902749b4453.png)\n\n## 异常率高和中的标准是什么？\n\n自己分的.\n\n我根据 ODDS 31 个多变量时间序列数据的特征, 将异常率的分类标准分为:\n\n异常率高: (异常数据占比) > 10%  \n异常率中: >5% 且 <=10%  \n异常率低: <=5%\n\nODDS 的 31 个多变量时间序列数据: https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=c34684\n\n## 维度高中低划分的标准是什么?\n\n高维数据: Dimension>64  \n中纬数据: 8<Dimension<=64  \n低纬数据: Dimension<=8\n","source":"_posts/ODDS-数据集划分标准及常见问题.md","raw":"---\ntitle: ODDS 数据集划分标准及常见问题\nshare: true\ntags:\n  - uncategory\n  - research\ndate: 2022-11-26 10:08:13 \nupdated: 2022-12-28 23:03:16 \ncategories: [research]\naliases:\n  - ODDS 数据集划分标准及常见问题\n  - ODDS 数据集常见问题\n---\n\n## 划分结论\n\n![static/attachment/Pasted image 20221202093223.png](/images/82c4ab39614782bc5135a55d4e7a0902749b4453.png)\n\n## 异常率高和中的标准是什么？\n\n自己分的.\n\n我根据 ODDS 31 个多变量时间序列数据的特征, 将异常率的分类标准分为:\n\n异常率高: (异常数据占比) > 10%  \n异常率中: >5% 且 <=10%  \n异常率低: <=5%\n\nODDS 的 31 个多变量时间序列数据: https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=c34684\n\n## 维度高中低划分的标准是什么?\n\n高维数据: Dimension>64  \n中纬数据: 8<Dimension<=64  \n低纬数据: Dimension<=8\n","slug":"ODDS-数据集划分标准及常见问题","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a400404cv9gt2m9wsf","content":"<h2 id=\"划分结论\">划分结论</h2>\n<p><img src=\"/images/82c4ab39614782bc5135a55d4e7a0902749b4453.png\" alt=\"static/attachment/Pasted image 20221202093223.png\"></p>\n<h2 id=\"异常率高和中的标准是什么？\">异常率高和中的标准是什么？</h2>\n<p>自己分的.</p>\n<p>我根据 ODDS 31 个多变量时间序列数据的特征, 将异常率的分类标准分为:</p>\n<p>异常率高: (异常数据占比) &gt; 10%<br>\n异常率中: &gt;5% 且 &lt;=10%<br>\n异常率低: &lt;=5%</p>\n<p>ODDS 的 31 个多变量时间序列数据: <a href=\"https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=c34684\">https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=c34684</a></p>\n<h2 id=\"维度高中低划分的标准是什么\">维度高中低划分的标准是什么?</h2>\n<p>高维数据: Dimension&gt;64<br>\n中纬数据: 8&lt;Dimension&lt;=64<br>\n低纬数据: Dimension&lt;=8</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<h2 id=\"划分结论\">划分结论</h2>\n<p><img src=\"/images/82c4ab39614782bc5135a55d4e7a0902749b4453.png\" alt=\"static/attachment/Pasted image 20221202093223.png\"></p>\n<h2 id=\"异常率高和中的标准是什么？\">异常率高和中的标准是什么？</h2>\n<p>自己分的.</p>\n<p>我根据 ODDS 31 个多变量时间序列数据的特征, 将异常率的分类标准分为:</p>\n<p>异常率高: (异常数据占比) &gt; 10%<br>\n异常率中: &gt;5% 且 &lt;=10%<br>\n异常率低: &lt;=5%</p>\n<p>ODDS 的 31 个多变量时间序列数据: <a href=\"https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=c34684\">https://uniplore.feishu.cn/sheets/shtcnjqyXgRD7EEqzZOmArCFwRc?sheet=c34684</a></p>\n<h2 id=\"维度高中低划分的标准是什么\">维度高中低划分的标准是什么?</h2>\n<p>高维数据: Dimension&gt;64<br>\n中纬数据: 8&lt;Dimension&lt;=64<br>\n低纬数据: Dimension&lt;=8</p>\n"},{"title":"linux zip 压缩","share":true,"date":"2022-12-29T00:21:54.000Z","updated":"2022-12-30T06:13:42.000Z","_content":"\nhttp://c.biancheng.net/view/781.html\n\n## 压缩多个文件\n\n```python\nzip target.zip a.txt b.txt \n```\n\n## 压缩多个文件夹\n\n```python\nzip -r target.zip dir-a dir-b\n```\n","source":"_posts/linux-zip-压缩.md","raw":"---\ntitle: linux zip 压缩\nshare: true\ntags:\n  - uncategory\ndate: 2022-12-29 08:21:54 \nupdated: 2022-12-30 14:13:42 \ncategories: research\n---\n\nhttp://c.biancheng.net/view/781.html\n\n## 压缩多个文件\n\n```python\nzip target.zip a.txt b.txt \n```\n\n## 压缩多个文件夹\n\n```python\nzip -r target.zip dir-a dir-b\n```\n","slug":"linux-zip-压缩","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a500444cv9amkmc0yw","content":"<p><a href=\"http://c.biancheng.net/view/781.html\">http://c.biancheng.net/view/781.html</a></p>\n<h2 id=\"压缩多个文件\">压缩多个文件</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> target.<span class=\"built_in\">zip</span> a.txt b.txt </span><br></pre></td></tr></table></figure>\n<h2 id=\"压缩多个文件夹\">压缩多个文件夹</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r target.<span class=\"built_in\">zip</span> <span class=\"built_in\">dir</span>-a <span class=\"built_in\">dir</span>-b</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<p><a href=\"http://c.biancheng.net/view/781.html\">http://c.biancheng.net/view/781.html</a></p>\n<h2 id=\"压缩多个文件\">压缩多个文件</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> target.<span class=\"built_in\">zip</span> a.txt b.txt </span><br></pre></td></tr></table></figure>\n<h2 id=\"压缩多个文件夹\">压缩多个文件夹</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">zip</span> -r target.<span class=\"built_in\">zip</span> <span class=\"built_in\">dir</span>-a <span class=\"built_in\">dir</span>-b</span><br></pre></td></tr></table></figure>\n"},{"title":"awk 手册","share":true,"date":"2022-04-18T14:28:10.000Z","updated":"2022-12-29T00:16:18.000Z","_content":"## 通用含义\n\nhttps://www.runoob.com/linux/linux-comm-awk.html\n\n## 变量\n\n变量：分为内置变量和自定义变量; 输入分隔符 FS 和输出分隔符 OFS 都属于内置变量。\n\n内置变量就是 awk 预定义好的、内置在 awk 内部的变量，而自定义变量就是用户定义的变量。\n\n - FS(Field Separator)：输入字段分隔符，默认为空白字符\n - OFS(Out of Field Separator)：输出字段分隔符，默认为空白字符\n - RS(Record Separator)：输入记录分隔符 (输入换行符)，指定输入时的换行符\n - ORS(Output Record Separate)：输出记录分隔符（输出换行符），输出时用指定符号代替换行符\n - NF(Number for Field)：当前行的字段的个数 (即当前行被分割成了几列)\n - NR(Number of Record)：行号，当前处理的文本行的行号。\n - FNR：各文件分别计数的行号\n - ARGC：命令行参数的个数\n - ARGV：数组，保存的是命令行所给定的各参数\n\n自定义变量的方法\n\n 方法一：-v varname=value，变量名区分字符大小写。\n\n 方法二：在 program 中直接定义。\n\n## $N 的含义\n\n- ` $0`: 完整的记录\n- ` $N`: 第几个字段\n\n## 获取最后一列\n\n按照 / 分割, 并打印最后一列\n\n```\nawk -F\"/\" '{print $(NF)}'\n```\n\n## 获取倒数第二列\n\n```\nawk -F\"/\" '{print $(NF-1)}'\n```\n\n## 打印第二列\n\n原始数据:\n\n```python\n(sw_torch_1_10) nnictl experiment list --all|grep EXP_01_1672131902\nId: b0y8iknf    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.03125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 50008    Platform: local    StartTime: 2022-12-27 17:05:06    EndTime: 2022-12-27 17:17:01\nId: 6jhyr43c    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.03125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 56287    Platform: local    StartTime: 2022-12-27 17:17:26    EndTime: 2022-12-27 17:31:01\nId: yx3sr4bz    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.03125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 49454    Platform: local    StartTime: 2022-12-27 17:31:17    EndTime: 2022-12-27 17:46:03\nId: t3ux4d02    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.03125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 35234    Platform: local    StartTime: 2022-12-27 17:46:11    EndTime: 2022-12-27 17:51:54\nId: hron3zwt    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.015625_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 40974    Platform: local    StartTime: 2022-12-27 17:52:23    EndTime: 2022-12-27 18:02:33\nId: 0md2ksg4    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.015625_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 46272    Platform: local    StartTime: 2022-12-27 18:02:41    EndTime: 2022-12-27 18:15:56\nId: stpk957f    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.015625_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 43601    Platform: local    StartTime: 2022-12-27 18:16:03    EndTime: 2022-12-27 18:28:07\nId: 6xujrm1y    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.015625_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 36909    Platform: local    StartTime: 2022-12-27 18:28:23    EndTime: 2022-12-27 18:34:01\nId: h9e6o5vc    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-1.0_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 42250    Platform: local    StartTime: 2022-12-27 18:34:04    EndTime: 2022-12-27 18:57:46\nId: 2b4ze69j    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-1.0_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 50726    Platform: local    StartTime: 2022-12-27 18:58:09    EndTime: 2022-12-27 19:27:53\nId: ordie3jq    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-1.0_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 50808    Platform: local    StartTime: 2022-12-27 19:28:24    EndTime: 2022-12-27 19:56:27\nId: 4ijcxywz    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-1.0_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 41431    Platform: local    StartTime: 2022-12-27 19:56:36    EndTime: 2022-12-27 20:03:29\nId: vugs0nk6    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 48601    Platform: local    StartTime: 2022-12-27 20:03:50    EndTime: 2022-12-27 20:14:35\nId: 8wdqb65r    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 51858    Platform: local    StartTime: 2022-12-27 20:14:39    EndTime: 2022-12-27 20:29:59\nId: 4e5j7ow8    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 52986    Platform: local    StartTime: 2022-12-27 20:30:03    EndTime: 2022-12-27 20:41:12\nId: mkv65cxb    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 59704    Platform: local    StartTime: 2022-12-27 20:41:22    EndTime: 2022-12-27 20:47:25\nId: qs7wgelu    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.0078125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 36720    Platform: local    StartTime: 2022-12-27 20:47:36    EndTime: 2022-12-27 20:59:06\nId: ygb5jol9    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.0078125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 51806    Platform: local    StartTime: 2022-12-27 20:59:26    EndTime: 2022-12-27 21:13:36\nId: jbsie371    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.0078125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 42987    Platform: local    StartTime: 2022-12-27 21:13:49    EndTime: 2022-12-27 21:25:13\nId: c7k12bmy    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.0078125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 39975    Platform: local    StartTime: 2022-12-27 21:25:38    EndTime: 2022-12-27 21:31:36\nId: f9qpdn5g    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.25_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 46863    Platform: local    StartTime: 2022-12-27 21:31:51    EndTime: 2022-12-27 21:47:52\nId: d64wg39c    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.25_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 41162    Platform: local    StartTime: 2022-12-27 21:48:22    EndTime: 2022-12-27 22:08:24\nId: zawvsgo5    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.25_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 52773    Platform: local    StartTime: 2022-12-27 22:08:30    EndTime: 2022-12-27 22:37:14\nId: h3adu1vg    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.25_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 41369    Platform: local    StartTime: 2022-12-27 22:37:39    EndTime: 2022-12-27 22:45:32\n```\n\n```python\nnnictl experiment list --all|grep EXP_01_1672131902|awk -F\" \" '{print $2}'\n```\n\n输出:\n\n```output\nb0y8iknf\n6jhyr43c\nyx3sr4bz\nt3ux4d02\nhron3zwt\n0md2ksg4\nstpk957f\n6xujrm1y\nh9e6o5vc\n2b4ze69j\nordie3jq\n4ijcxywz\nvugs0nk6\n8wdqb65r\n4e5j7ow8\nmkv65cxb\nqs7wgelu\nygb5jol9\njbsie371\nc7k12bmy\nf9qpdn5g\nd64wg39c\nzawvsgo5\nh3adu1vg \n```\n","source":"_posts/awk-手册.md","raw":"---\ntitle: awk 手册\nshare: true\ntags:\n  - uncategory\ndate: 2022-04-18 22:28:10 \nupdated: 2022-12-29 08:16:18 \ncategories: uncategory\n---\n## 通用含义\n\nhttps://www.runoob.com/linux/linux-comm-awk.html\n\n## 变量\n\n变量：分为内置变量和自定义变量; 输入分隔符 FS 和输出分隔符 OFS 都属于内置变量。\n\n内置变量就是 awk 预定义好的、内置在 awk 内部的变量，而自定义变量就是用户定义的变量。\n\n - FS(Field Separator)：输入字段分隔符，默认为空白字符\n - OFS(Out of Field Separator)：输出字段分隔符，默认为空白字符\n - RS(Record Separator)：输入记录分隔符 (输入换行符)，指定输入时的换行符\n - ORS(Output Record Separate)：输出记录分隔符（输出换行符），输出时用指定符号代替换行符\n - NF(Number for Field)：当前行的字段的个数 (即当前行被分割成了几列)\n - NR(Number of Record)：行号，当前处理的文本行的行号。\n - FNR：各文件分别计数的行号\n - ARGC：命令行参数的个数\n - ARGV：数组，保存的是命令行所给定的各参数\n\n自定义变量的方法\n\n 方法一：-v varname=value，变量名区分字符大小写。\n\n 方法二：在 program 中直接定义。\n\n## $N 的含义\n\n- ` $0`: 完整的记录\n- ` $N`: 第几个字段\n\n## 获取最后一列\n\n按照 / 分割, 并打印最后一列\n\n```\nawk -F\"/\" '{print $(NF)}'\n```\n\n## 获取倒数第二列\n\n```\nawk -F\"/\" '{print $(NF-1)}'\n```\n\n## 打印第二列\n\n原始数据:\n\n```python\n(sw_torch_1_10) nnictl experiment list --all|grep EXP_01_1672131902\nId: b0y8iknf    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.03125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 50008    Platform: local    StartTime: 2022-12-27 17:05:06    EndTime: 2022-12-27 17:17:01\nId: 6jhyr43c    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.03125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 56287    Platform: local    StartTime: 2022-12-27 17:17:26    EndTime: 2022-12-27 17:31:01\nId: yx3sr4bz    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.03125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 49454    Platform: local    StartTime: 2022-12-27 17:31:17    EndTime: 2022-12-27 17:46:03\nId: t3ux4d02    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.03125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 35234    Platform: local    StartTime: 2022-12-27 17:46:11    EndTime: 2022-12-27 17:51:54\nId: hron3zwt    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.015625_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 40974    Platform: local    StartTime: 2022-12-27 17:52:23    EndTime: 2022-12-27 18:02:33\nId: 0md2ksg4    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.015625_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 46272    Platform: local    StartTime: 2022-12-27 18:02:41    EndTime: 2022-12-27 18:15:56\nId: stpk957f    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.015625_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 43601    Platform: local    StartTime: 2022-12-27 18:16:03    EndTime: 2022-12-27 18:28:07\nId: 6xujrm1y    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.015625_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 36909    Platform: local    StartTime: 2022-12-27 18:28:23    EndTime: 2022-12-27 18:34:01\nId: h9e6o5vc    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-1.0_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 42250    Platform: local    StartTime: 2022-12-27 18:34:04    EndTime: 2022-12-27 18:57:46\nId: 2b4ze69j    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-1.0_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 50726    Platform: local    StartTime: 2022-12-27 18:58:09    EndTime: 2022-12-27 19:27:53\nId: ordie3jq    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-1.0_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 50808    Platform: local    StartTime: 2022-12-27 19:28:24    EndTime: 2022-12-27 19:56:27\nId: 4ijcxywz    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-1.0_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 41431    Platform: local    StartTime: 2022-12-27 19:56:36    EndTime: 2022-12-27 20:03:29\nId: vugs0nk6    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 48601    Platform: local    StartTime: 2022-12-27 20:03:50    EndTime: 2022-12-27 20:14:35\nId: 8wdqb65r    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 51858    Platform: local    StartTime: 2022-12-27 20:14:39    EndTime: 2022-12-27 20:29:59\nId: 4e5j7ow8    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 52986    Platform: local    StartTime: 2022-12-27 20:30:03    EndTime: 2022-12-27 20:41:12\nId: mkv65cxb    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 59704    Platform: local    StartTime: 2022-12-27 20:41:22    EndTime: 2022-12-27 20:47:25\nId: qs7wgelu    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.0078125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 36720    Platform: local    StartTime: 2022-12-27 20:47:36    EndTime: 2022-12-27 20:59:06\nId: ygb5jol9    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.0078125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 51806    Platform: local    StartTime: 2022-12-27 20:59:26    EndTime: 2022-12-27 21:13:36\nId: jbsie371    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.0078125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 42987    Platform: local    StartTime: 2022-12-27 21:13:49    EndTime: 2022-12-27 21:25:13\nId: c7k12bmy    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.0078125_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 39975    Platform: local    StartTime: 2022-12-27 21:25:38    EndTime: 2022-12-27 21:31:36\nId: f9qpdn5g    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.25_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 46863    Platform: local    StartTime: 2022-12-27 21:31:51    EndTime: 2022-12-27 21:47:52\nId: d64wg39c    Name: EXP_01_1672131902_DID-ADB2FDE9-8589-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.25_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 41162    Platform: local    StartTime: 2022-12-27 21:48:22    EndTime: 2022-12-27 22:08:24\nId: zawvsgo5    Name: EXP_01_1672131902_DID-6EFA3A07-4544-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.25_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 52773    Platform: local    StartTime: 2022-12-27 22:08:30    EndTime: 2022-12-27 22:37:14\nId: h3adu1vg    Name: EXP_01_1672131902_DID-C02607E8-7399-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-0.25_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: 41369    Platform: local    StartTime: 2022-12-27 22:37:39    EndTime: 2022-12-27 22:45:32\n```\n\n```python\nnnictl experiment list --all|grep EXP_01_1672131902|awk -F\" \" '{print $2}'\n```\n\n输出:\n\n```output\nb0y8iknf\n6jhyr43c\nyx3sr4bz\nt3ux4d02\nhron3zwt\n0md2ksg4\nstpk957f\n6xujrm1y\nh9e6o5vc\n2b4ze69j\nordie3jq\n4ijcxywz\nvugs0nk6\n8wdqb65r\n4e5j7ow8\nmkv65cxb\nqs7wgelu\nygb5jol9\njbsie371\nc7k12bmy\nf9qpdn5g\nd64wg39c\nzawvsgo5\nh3adu1vg \n```\n","slug":"awk-手册","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a500474cv94i5b0j26","content":"<h2 id=\"通用含义\">通用含义</h2>\n<p><a href=\"https://www.runoob.com/linux/linux-comm-awk.html\">https://www.runoob.com/linux/linux-comm-awk.html</a></p>\n<h2 id=\"变量\">变量</h2>\n<p>变量：分为内置变量和自定义变量; 输入分隔符 FS 和输出分隔符 OFS 都属于内置变量。</p>\n<p>内置变量就是 awk 预定义好的、内置在 awk 内部的变量，而自定义变量就是用户定义的变量。</p>\n<ul>\n<li>FS(Field Separator)：输入字段分隔符，默认为空白字符</li>\n<li>OFS(Out of Field Separator)：输出字段分隔符，默认为空白字符</li>\n<li>RS(Record Separator)：输入记录分隔符 (输入换行符)，指定输入时的换行符</li>\n<li>ORS(Output Record Separate)：输出记录分隔符（输出换行符），输出时用指定符号代替换行符</li>\n<li>NF(Number for Field)：当前行的字段的个数 (即当前行被分割成了几列)</li>\n<li>NR(Number of Record)：行号，当前处理的文本行的行号。</li>\n<li>FNR：各文件分别计数的行号</li>\n<li>ARGC：命令行参数的个数</li>\n<li>ARGV：数组，保存的是命令行所给定的各参数</li>\n</ul>\n<p>自定义变量的方法</p>\n<p>方法一：-v varname=value，变量名区分字符大小写。</p>\n<p>方法二：在 program 中直接定义。</p>\n<h2 id=\"N-的含义\">$N 的含义</h2>\n<ul>\n<li><code> $0</code>: 完整的记录</li>\n<li><code> $N</code>: 第几个字段</li>\n</ul>\n<h2 id=\"获取最后一列\">获取最后一列</h2>\n<p>按照 / 分割, 并打印最后一列</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk -F&quot;/&quot; &#x27;&#123;print $(NF)&#125;&#x27;</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取倒数第二列\">获取倒数第二列</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk -F&quot;/&quot; &#x27;&#123;print $(NF-1)&#125;&#x27;</span><br></pre></td></tr></table></figure>\n<h2 id=\"打印第二列\">打印第二列</h2>\n<p>原始数据:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(sw_torch_1_10) nnictl experiment <span class=\"built_in\">list</span> --<span class=\"built_in\">all</span>|grep EXP_01_1672131902</span><br><span class=\"line\">Id: b0y8iknf    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.03125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">50008</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:05:06    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">17</span>:01</span><br><span class=\"line\">Id: 6jhyr43c    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.03125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">56287</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">17</span>:<span class=\"number\">26</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">31</span>:01</span><br><span class=\"line\">Id: yx3sr4bz    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.03125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">49454</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">31</span>:<span class=\"number\">17</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">46</span>:03</span><br><span class=\"line\">Id: t3ux4d02    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.03125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">35234</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">46</span>:<span class=\"number\">11</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">51</span>:<span class=\"number\">54</span></span><br><span class=\"line\">Id: hron3zwt    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.015625</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">40974</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">52</span>:<span class=\"number\">23</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:02:<span class=\"number\">33</span></span><br><span class=\"line\">Id: 0md2ksg4    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.015625</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">46272</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:02:<span class=\"number\">41</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">15</span>:<span class=\"number\">56</span></span><br><span class=\"line\">Id: stpk957f    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.015625</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">43601</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">16</span>:03    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">28</span>:07</span><br><span class=\"line\">Id: 6xujrm1y    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.015625</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">36909</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">28</span>:<span class=\"number\">23</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">34</span>:01</span><br><span class=\"line\">Id: h9e6o5vc    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">1.0</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">42250</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">34</span>:04    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">57</span>:<span class=\"number\">46</span></span><br><span class=\"line\">Id: 2b4ze69j    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">1.0</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">50726</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">58</span>:09    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">19</span>:<span class=\"number\">27</span>:<span class=\"number\">53</span></span><br><span class=\"line\">Id: ordie3jq    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">1.0</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">50808</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">19</span>:<span class=\"number\">28</span>:<span class=\"number\">24</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">19</span>:<span class=\"number\">56</span>:<span class=\"number\">27</span></span><br><span class=\"line\">Id: 4ijcxywz    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">1.0</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">41431</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">19</span>:<span class=\"number\">56</span>:<span class=\"number\">36</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:03:<span class=\"number\">29</span></span><br><span class=\"line\">Id: vugs0nk6    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">48601</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:03:<span class=\"number\">50</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">14</span>:<span class=\"number\">35</span></span><br><span class=\"line\">Id: 8wdqb65r    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">51858</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">14</span>:<span class=\"number\">39</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">29</span>:<span class=\"number\">59</span></span><br><span class=\"line\">Id: 4e5j7ow8    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">52986</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">30</span>:03    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">41</span>:<span class=\"number\">12</span></span><br><span class=\"line\">Id: mkv65cxb    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">59704</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">41</span>:<span class=\"number\">22</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">47</span>:<span class=\"number\">25</span></span><br><span class=\"line\">Id: qs7wgelu    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.0078125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">36720</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">47</span>:<span class=\"number\">36</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:06</span><br><span class=\"line\">Id: ygb5jol9    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.0078125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">51806</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">26</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">13</span>:<span class=\"number\">36</span></span><br><span class=\"line\">Id: jbsie371    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.0078125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">42987</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">13</span>:<span class=\"number\">49</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">25</span>:<span class=\"number\">13</span></span><br><span class=\"line\">Id: c7k12bmy    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.0078125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">39975</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">25</span>:<span class=\"number\">38</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">31</span>:<span class=\"number\">36</span></span><br><span class=\"line\">Id: f9qpdn5g    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.25</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">46863</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">31</span>:<span class=\"number\">51</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">47</span>:<span class=\"number\">52</span></span><br><span class=\"line\">Id: d64wg39c    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.25</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">41162</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">48</span>:<span class=\"number\">22</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:08:<span class=\"number\">24</span></span><br><span class=\"line\">Id: zawvsgo5    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.25</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">52773</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:08:<span class=\"number\">30</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:<span class=\"number\">37</span>:<span class=\"number\">14</span></span><br><span class=\"line\">Id: h3adu1vg    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.25</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">41369</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:<span class=\"number\">37</span>:<span class=\"number\">39</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:<span class=\"number\">45</span>:<span class=\"number\">32</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nnictl experiment <span class=\"built_in\">list</span> --<span class=\"built_in\">all</span>|grep EXP_01_1672131902|awk -<span class=\"string\">F&quot; &quot;</span> <span class=\"string\">&#x27;&#123;print $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure>\n<p>输出:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">b0y8iknf</span><br><span class=\"line\">6jhyr43c</span><br><span class=\"line\">yx3sr4bz</span><br><span class=\"line\">t3ux4d02</span><br><span class=\"line\">hron3zwt</span><br><span class=\"line\">0md2ksg4</span><br><span class=\"line\">stpk957f</span><br><span class=\"line\">6xujrm1y</span><br><span class=\"line\">h9e6o5vc</span><br><span class=\"line\">2b4ze69j</span><br><span class=\"line\">ordie3jq</span><br><span class=\"line\">4ijcxywz</span><br><span class=\"line\">vugs0nk6</span><br><span class=\"line\">8wdqb65r</span><br><span class=\"line\">4e5j7ow8</span><br><span class=\"line\">mkv65cxb</span><br><span class=\"line\">qs7wgelu</span><br><span class=\"line\">ygb5jol9</span><br><span class=\"line\">jbsie371</span><br><span class=\"line\">c7k12bmy</span><br><span class=\"line\">f9qpdn5g</span><br><span class=\"line\">d64wg39c</span><br><span class=\"line\">zawvsgo5</span><br><span class=\"line\">h3adu1vg </span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover2.jpg","excerpt":"","more":"<h2 id=\"通用含义\">通用含义</h2>\n<p><a href=\"https://www.runoob.com/linux/linux-comm-awk.html\">https://www.runoob.com/linux/linux-comm-awk.html</a></p>\n<h2 id=\"变量\">变量</h2>\n<p>变量：分为内置变量和自定义变量; 输入分隔符 FS 和输出分隔符 OFS 都属于内置变量。</p>\n<p>内置变量就是 awk 预定义好的、内置在 awk 内部的变量，而自定义变量就是用户定义的变量。</p>\n<ul>\n<li>FS(Field Separator)：输入字段分隔符，默认为空白字符</li>\n<li>OFS(Out of Field Separator)：输出字段分隔符，默认为空白字符</li>\n<li>RS(Record Separator)：输入记录分隔符 (输入换行符)，指定输入时的换行符</li>\n<li>ORS(Output Record Separate)：输出记录分隔符（输出换行符），输出时用指定符号代替换行符</li>\n<li>NF(Number for Field)：当前行的字段的个数 (即当前行被分割成了几列)</li>\n<li>NR(Number of Record)：行号，当前处理的文本行的行号。</li>\n<li>FNR：各文件分别计数的行号</li>\n<li>ARGC：命令行参数的个数</li>\n<li>ARGV：数组，保存的是命令行所给定的各参数</li>\n</ul>\n<p>自定义变量的方法</p>\n<p>方法一：-v varname=value，变量名区分字符大小写。</p>\n<p>方法二：在 program 中直接定义。</p>\n<h2 id=\"N-的含义\">$N 的含义</h2>\n<ul>\n<li><code> $0</code>: 完整的记录</li>\n<li><code> $N</code>: 第几个字段</li>\n</ul>\n<h2 id=\"获取最后一列\">获取最后一列</h2>\n<p>按照 / 分割, 并打印最后一列</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk -F&quot;/&quot; &#x27;&#123;print $(NF)&#125;&#x27;</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取倒数第二列\">获取倒数第二列</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">awk -F&quot;/&quot; &#x27;&#123;print $(NF-1)&#125;&#x27;</span><br></pre></td></tr></table></figure>\n<h2 id=\"打印第二列\">打印第二列</h2>\n<p>原始数据:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(sw_torch_1_10) nnictl experiment <span class=\"built_in\">list</span> --<span class=\"built_in\">all</span>|grep EXP_01_1672131902</span><br><span class=\"line\">Id: b0y8iknf    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.03125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">50008</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:05:06    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">17</span>:01</span><br><span class=\"line\">Id: 6jhyr43c    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.03125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">56287</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">17</span>:<span class=\"number\">26</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">31</span>:01</span><br><span class=\"line\">Id: yx3sr4bz    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.03125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">49454</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">31</span>:<span class=\"number\">17</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">46</span>:03</span><br><span class=\"line\">Id: t3ux4d02    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.03125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">35234</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">46</span>:<span class=\"number\">11</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">51</span>:<span class=\"number\">54</span></span><br><span class=\"line\">Id: hron3zwt    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.015625</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">40974</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">17</span>:<span class=\"number\">52</span>:<span class=\"number\">23</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:02:<span class=\"number\">33</span></span><br><span class=\"line\">Id: 0md2ksg4    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.015625</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">46272</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:02:<span class=\"number\">41</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">15</span>:<span class=\"number\">56</span></span><br><span class=\"line\">Id: stpk957f    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.015625</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">43601</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">16</span>:03    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">28</span>:07</span><br><span class=\"line\">Id: 6xujrm1y    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.015625</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">36909</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">28</span>:<span class=\"number\">23</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">34</span>:01</span><br><span class=\"line\">Id: h9e6o5vc    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">1.0</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">42250</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">34</span>:04    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">57</span>:<span class=\"number\">46</span></span><br><span class=\"line\">Id: 2b4ze69j    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">1.0</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">50726</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">18</span>:<span class=\"number\">58</span>:09    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">19</span>:<span class=\"number\">27</span>:<span class=\"number\">53</span></span><br><span class=\"line\">Id: ordie3jq    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">1.0</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">50808</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">19</span>:<span class=\"number\">28</span>:<span class=\"number\">24</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">19</span>:<span class=\"number\">56</span>:<span class=\"number\">27</span></span><br><span class=\"line\">Id: 4ijcxywz    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">1.0</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">41431</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">19</span>:<span class=\"number\">56</span>:<span class=\"number\">36</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:03:<span class=\"number\">29</span></span><br><span class=\"line\">Id: vugs0nk6    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">48601</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:03:<span class=\"number\">50</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">14</span>:<span class=\"number\">35</span></span><br><span class=\"line\">Id: 8wdqb65r    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">51858</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">14</span>:<span class=\"number\">39</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">29</span>:<span class=\"number\">59</span></span><br><span class=\"line\">Id: 4e5j7ow8    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">52986</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">30</span>:03    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">41</span>:<span class=\"number\">12</span></span><br><span class=\"line\">Id: mkv65cxb    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">59704</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">41</span>:<span class=\"number\">22</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">47</span>:<span class=\"number\">25</span></span><br><span class=\"line\">Id: qs7wgelu    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.0078125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">36720</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">47</span>:<span class=\"number\">36</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:06</span><br><span class=\"line\">Id: ygb5jol9    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.0078125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">51806</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">20</span>:<span class=\"number\">59</span>:<span class=\"number\">26</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">13</span>:<span class=\"number\">36</span></span><br><span class=\"line\">Id: jbsie371    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.0078125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">42987</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">13</span>:<span class=\"number\">49</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">25</span>:<span class=\"number\">13</span></span><br><span class=\"line\">Id: c7k12bmy    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.0078125</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">39975</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">25</span>:<span class=\"number\">38</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">31</span>:<span class=\"number\">36</span></span><br><span class=\"line\">Id: f9qpdn5g    Name: EXP_01_1672131902_DID-A07AC296-DE40-3A7C-8DF3-91F642CC14D0_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.25</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">46863</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">31</span>:<span class=\"number\">51</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">47</span>:<span class=\"number\">52</span></span><br><span class=\"line\">Id: d64wg39c    Name: EXP_01_1672131902_DID-ADB2FDE9-<span class=\"number\">8589</span>-3F5B-A410-5FE14386C7AF_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.25</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">41162</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">21</span>:<span class=\"number\">48</span>:<span class=\"number\">22</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:08:<span class=\"number\">24</span></span><br><span class=\"line\">Id: zawvsgo5    Name: EXP_01_1672131902_DID-6EFA3A07-<span class=\"number\">4544</span>-34A0-B921-A155BD1A05E8_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.25</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">52773</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:08:<span class=\"number\">30</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:<span class=\"number\">37</span>:<span class=\"number\">14</span></span><br><span class=\"line\">Id: h3adu1vg    Name: EXP_01_1672131902_DID-C02607E8-<span class=\"number\">7399</span>-3DDE-9D28-8A8DA5E5D251_DAT-IOPSCOMPETITION_NTR-RANDOM_MTN-32_MTC-4_RET-0_SED-0_DSM-RANDOM_DSR-<span class=\"number\">0.25</span>_MON-COCA_MEF-MAIN_TORCH    Status: DONE    Port: <span class=\"number\">41369</span>    Platform: local    StartTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:<span class=\"number\">37</span>:<span class=\"number\">39</span>    EndTime: <span class=\"number\">2022</span>-<span class=\"number\">12</span>-<span class=\"number\">27</span> <span class=\"number\">22</span>:<span class=\"number\">45</span>:<span class=\"number\">32</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nnictl experiment <span class=\"built_in\">list</span> --<span class=\"built_in\">all</span>|grep EXP_01_1672131902|awk -<span class=\"string\">F&quot; &quot;</span> <span class=\"string\">&#x27;&#123;print $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure>\n<p>输出:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">b0y8iknf</span><br><span class=\"line\">6jhyr43c</span><br><span class=\"line\">yx3sr4bz</span><br><span class=\"line\">t3ux4d02</span><br><span class=\"line\">hron3zwt</span><br><span class=\"line\">0md2ksg4</span><br><span class=\"line\">stpk957f</span><br><span class=\"line\">6xujrm1y</span><br><span class=\"line\">h9e6o5vc</span><br><span class=\"line\">2b4ze69j</span><br><span class=\"line\">ordie3jq</span><br><span class=\"line\">4ijcxywz</span><br><span class=\"line\">vugs0nk6</span><br><span class=\"line\">8wdqb65r</span><br><span class=\"line\">4e5j7ow8</span><br><span class=\"line\">mkv65cxb</span><br><span class=\"line\">qs7wgelu</span><br><span class=\"line\">ygb5jol9</span><br><span class=\"line\">jbsie371</span><br><span class=\"line\">c7k12bmy</span><br><span class=\"line\">f9qpdn5g</span><br><span class=\"line\">d64wg39c</span><br><span class=\"line\">zawvsgo5</span><br><span class=\"line\">h3adu1vg </span><br></pre></td></tr></table></figure>\n"},{"title":"IsolationForest 实现","share":true,"date":"2022-12-16T07:22:26.000Z","updated":"2022-12-22T05:45:54.000Z","_content":"## Isolation Forest 简介\n\nIsolation Forest assumes that anomalies are few and far from the normal [^1].\n\nhttps://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html\n\n### 例子 -1D\n\n假设现在有一组一维数据（如下图所示），我们要对这组数据 $D$ 进行随机切分，希望可以把点 A 和点 B 单独切分出来。\n\n![static/attachment/Pasted image 20221219084607.png](/images/3371c6ffcb23f98193287d1b34618622f4c3c3cd.png)\n\n具体的，我们先在最大值和最小值之间随机选择一个值 x，然后按照 $[\\min(D),x)$ 和 $[x,\\max(D)]$ 可以把数据分成左右两组。然后，在这两组数据中分别重复这个步骤，直到数据不可再分。显然，点 B 跟其他数据比较疏离，可能用很少的次数就可以把它切分出来；点 A 跟其他数据点聚在一起，可能需要更多的次数才能把它切分出来。\n\n### 例子 -2D\n\n我们把数据从一维扩展到两维。同样的，我们沿着两个坐标轴进行随机切分，尝试把下图中的点 A' 和点 B' 分别切分出来。我们先随机选择一个特征维度，在这个特征的最大值和最小值之间随机选择一个值，按照跟特征值的大小关系将数据进行左右切分。然后，在左右两组数据中，我们重复上述步骤，再随机的按某个特征维度的取值把数据进行细分，直到无法细分，即：只剩下一个数据点，或者剩下的数据全部相同。跟先前的例子类似，直观上，点 B' 跟其他数据点比较疏离，可能只需要很少的几次操作就可以将它细分出来；点 A' 需要的切分次数可能会更多一些。\n\n![static/attachment/Pasted image 20221219084957.png](/images/3b742078e00bf2073e3c65d3280887bbec1c8c2c.png)\n\n按照先前提到的关于“异常”的两个假设，一般情况下，在上面的例子中，点 B 和点 B' 由于跟其他数据隔的比较远，会被认为是异常数据，而点 A 和点 A' 会被认为是正常数据。直观上，异常数据由于跟其他数据点较为疏离，可能需要较少几次切分就可以将它们单独划分出来，而正常数据恰恰相反。这其实正是 Isolation Forest（IF）的核心概念。IF 采用二叉树去对数据进行切分，数据点在二叉树中所处的深度反应了该条数据的“疏离”程度。整个算法大致可以分为两步：\n\n1. 训练：抽取多个样本，构建多棵二叉树（Isolation Tree，即 iTree）；\n2. 预测：综合多棵二叉树的结果，计算每个数据点的异常分值。\n\n### 训练\n\n构建一棵 iTree 时，先从全量数据中抽取一批样本，然后随机选择一个特征作为起始节点，并在该特征的最大值和最小值之间随机选择一个值，将样本中小于该取值的数据划到左分支，大于等于该取值的划到右分支。然后，在左右两个分支数据中，重复上述步骤，直到满足如下条件：\n\n- 数据不可再分，即：只包含一条数据，或者全部数据相同。\n- 二叉树达到限定的最大深度。\n\n### 预测\n\n计算数据 x 的异常分值时，先要估算它在每棵 iTree 中的路径长度（也可以叫深度）。具体的，先沿着一棵 iTree，从根节点开始按不同特征的取值从上往下，直到到达某叶子节点。假设 iTree 的训练样本中同样落在 x 所在叶子节点的样本数为 T.size，则数据 x 在这棵 iTree 上的路径长度 h(x)，可以用下面这个公式计算\n\n**sklearn.predict(X)**: Predict if a particular sample is an outlier or not. For each observation, tells whether or not (+1 or -1) it should be considered as an inlier according to the fitted model.\n\n## model_name\n\n'IsolationForest'\n\n## train_model\n\n```python\nmodel, post_rule_train_config = get_model(\n            model_name=model_name, dataset=dataset, metric=metric, tune_on_test=tune_on_test, unsupervised=unsupervised\n        )\n# model: <merlion.models.anomaly.isolation_forest.IsolationForest object at 0x17f1e95e0>\n# post_rule_train_config:\n# {'metric': <TSADMetric.F1: functools.partial(<function accumulate_tsad_score at 0x12abcd040>, metric=functools.partial(<function TSADScoreAccumulator.f1 at 0x16a330af0>, score_type=<ScoreType.RevisedPointAdjusted: 2>))>, 'unsup_quantile': None, 'max_early_sec': None, 'max_delay_sec': None}\n\n\ntrain_vals = df_to_merlion(df[md.trainval], md[md.trainval], get_ground_truth=False, transform=resampler)\n# Converts a pandas dataframe time series to the Merlion format.\n# type(train_vals): <class 'merlion.utils.time_series.TimeSeries'>\n\ntest_vals = df_to_merlion(df[~md.trainval], md[~md.trainval], get_ground_truth=False, transform=resampler)\n# type(test_vals)\n# <class 'merlion.utils.time_series.TimeSeries'>\n\ntrain_anom = df_to_merlion(df[md.trainval], md[md.trainval], get_ground_truth=True)\n```\n\n## get_model\n\n![static/attachment/Pasted image 20221216154316.png](/images/5186498fb8857ba5ca38d34ef50de27ef1c051e1.png)\n\n```\nmodel_configs = config_dict[model_name][\"config\"]\n# {'default': {'n_estimators': 100}}\n\nmodel_type = config_dict[model_name].get(\"model_type\", model_name)\n# 'IsolationForest'\n\nmodel_kwargs = model_configs[\"default\"]\n# {'n_estimators': 100}\n\nmodel_configs.get(type(dataset).__name__, {})\n# {}\n\nmodel = ModelFactory.create(name=model_type, **model_kwargs)\n# <merlion.models.anomaly.isolation_forest.IsolationForest object at 0x17f1e95e0>\n\npost_rule_train_configs = config_dict[model_name].get(\"post_rule_train_config\", {})\n# {}\n\nd = post_rule_train_configs.get(\"default\", {})\n# {}\n\nd[\"metric\"] = None if unsupervised else metric\n# TSADScoreAccumulator.f1\n# accumulate_tsad_score\n# {'metric': <TSADMetric.F1: functools.partial(<function accumulate_tsad_score at 0x12abcd040>, metric=functools.partial(<function TSADScoreAccumulator.f1 at 0x16a330af0>, score_type=<ScoreType.RevisedPointAdjusted: 2>))>, 'unsup_quantile': None}\n\nd.update({\"max_early_sec\": dataset.max_lead_sec, \"max_delay_sec\": dataset.max_lag_sec})\n# result = {dict: 4} {'metric': <TSADMetric.F1: functools.partial(<function accumulate_tsad_score at 0x12abcd040>, metric=functools.partial(<function TSADScoreAccumulator.f1 at 0x16a330af0>, score_type=<ScoreType.RevisedPointAdjusted: 2>))>, 'unsup_quantile': None, 'max_early_\n 'metric' = {TSADMetric} TSADMetric.F1\n 'unsup_quantile' = {NoneType} None\n 'max_early_sec' = {NoneType} None\n 'max_delay_sec' = {NoneType} None\n __len__ = {int} 4\n```\n\n## TSADEvaluator\n\n```\nevaluator = TSADEvaluator(\n  model=model,\n  config=TSADEvaluatorConfig(\n\t train_window=train_window,\n\t retrain_freq=retrain_freq,\n\t max_delay_sec=delay,\n\t max_early_sec=getattr(model.threshold, \"suppress_secs\", delay),\n  ),\n)\n```\n\n## What is dataset_to_threshold?\n\nAccording to the anomaly rate of the dataset, return the threshold $r$ used to determine whether a data point is anomaly.\n\nFore example, the anomaly rate of the <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> is $2.26\\%$, so the function return $2.25\\%$\n\n```python\ndef dataset_to_threshold(dataset: TSADBaseDataset, tune_on_test=False):\n    if isinstance(dataset, IOpsCompetition):\n        return 2.25\n    elif isinstance(dataset, NAB):\n        return 3.5\n    elif isinstance(dataset, Synthetic):\n        return 2\n    elif isinstance(dataset, MSL):\n        return 3.0\n    elif isinstance(dataset, SMAP):\n        return 3.5\n    elif isinstance(dataset, SMD):\n        return 3 if not tune_on_test else 2.5\n    elif hasattr(dataset, \"default_threshold\"):\n        return dataset.default_threshold\n    return 3\n\n```\n\n## temedelta_offset\n\n```python\nself.timedelta_offset = pd.to_timedelta(0) \n```\n\n## IsolationForest 如何实现异常检测?是滑动窗口还是?\n\n原始数据 (shape=(1,605)) 经过 `pre-processing steps`:\n\n```python\n                         value\ntime                          \n2014-04-01 00:00:00  21.598011\n2014-04-01 00:05:00  19.321392\n2014-04-01 00:10:00  21.399938\n2014-04-01 00:15:00  18.373916\n2014-04-01 00:20:00  18.167499\n...                        ...\n2014-04-03 02:00:00  21.530211\n2014-04-03 02:05:00  21.958759\n2014-04-03 02:10:00  21.232358\n2014-04-03 02:15:00  19.874722\n2014-04-03 02:20:00  20.894818\n \n```\n\n原始数据被处理成了 (shape=(2, 604):\n\n```python\n                      value_0   value_1\ntime                                   \n2014-04-01 00:05:00 -2.276619 -2.276619\n2014-04-01 00:10:00 -2.276619  2.078546\n2014-04-01 00:15:00  2.078546 -3.026022\n2014-04-01 00:20:00 -3.026022 -0.206417\n2014-04-01 00:25:00 -0.206417  1.848682\n...                       ...       ...\n2014-04-03 02:00:00  0.869541  1.037752\n2014-04-03 02:05:00  1.037752  0.428547\n2014-04-03 02:10:00  0.428547 -0.726401\n2014-04-03 02:15:00 -0.726401 -1.357636\n2014-04-03 02:20:00 -1.357636  1.020096 \n```\n\n上述的数据变换是标准化吗?\n\n```python\ndef train_pre_process(self, train_data: TimeSeries) -> TimeSeries: \n   \"\"\"\n   Applies pre-processing steps common for training most models.\n\n   :param train_data: the original time series of training data\n   :return: the training data, after any necessary pre-processing has been applied\n   \"\"\"\n```\n\n经过了很多的 transform(`self.transforms`)\n\n```python\ndef __call__(self, time_series: TimeSeries) -> TimeSeries:\n   for f in self.transforms:\n\t  time_series = f(time_series)\n   return time_series \n```\n\n实质上经过了 Transform `Shingle(multivar_skip=True, size=2, stride=1)`\n\n## Debug\n\n![static/attachment/Pasted image 20221219090505.png](/images/0403ba2fe2ab37e09f53f895ad6dc8bc4a0e4dfa.png)\n\n[^1]: Liu, F. T., Ting, K. M., & Zhou, Z.-H. 2012. Isolation-Based Anomaly Detection. **_ACM Transactions on Knowledge Discovery from Data_**, 6(1): 1–39.\n","source":"_posts/IsolationForest-实现.md","raw":"---\ntitle: IsolationForest 实现\nshare: true\ntags:\n  - docs\ndate: 2022-12-16 15:22:26 \nupdated: 2022-12-22 13:45:54 \ncategories: [uncategory]\n---\n## Isolation Forest 简介\n\nIsolation Forest assumes that anomalies are few and far from the normal [^1].\n\nhttps://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html\n\n### 例子 -1D\n\n假设现在有一组一维数据（如下图所示），我们要对这组数据 $D$ 进行随机切分，希望可以把点 A 和点 B 单独切分出来。\n\n![static/attachment/Pasted image 20221219084607.png](/images/3371c6ffcb23f98193287d1b34618622f4c3c3cd.png)\n\n具体的，我们先在最大值和最小值之间随机选择一个值 x，然后按照 $[\\min(D),x)$ 和 $[x,\\max(D)]$ 可以把数据分成左右两组。然后，在这两组数据中分别重复这个步骤，直到数据不可再分。显然，点 B 跟其他数据比较疏离，可能用很少的次数就可以把它切分出来；点 A 跟其他数据点聚在一起，可能需要更多的次数才能把它切分出来。\n\n### 例子 -2D\n\n我们把数据从一维扩展到两维。同样的，我们沿着两个坐标轴进行随机切分，尝试把下图中的点 A' 和点 B' 分别切分出来。我们先随机选择一个特征维度，在这个特征的最大值和最小值之间随机选择一个值，按照跟特征值的大小关系将数据进行左右切分。然后，在左右两组数据中，我们重复上述步骤，再随机的按某个特征维度的取值把数据进行细分，直到无法细分，即：只剩下一个数据点，或者剩下的数据全部相同。跟先前的例子类似，直观上，点 B' 跟其他数据点比较疏离，可能只需要很少的几次操作就可以将它细分出来；点 A' 需要的切分次数可能会更多一些。\n\n![static/attachment/Pasted image 20221219084957.png](/images/3b742078e00bf2073e3c65d3280887bbec1c8c2c.png)\n\n按照先前提到的关于“异常”的两个假设，一般情况下，在上面的例子中，点 B 和点 B' 由于跟其他数据隔的比较远，会被认为是异常数据，而点 A 和点 A' 会被认为是正常数据。直观上，异常数据由于跟其他数据点较为疏离，可能需要较少几次切分就可以将它们单独划分出来，而正常数据恰恰相反。这其实正是 Isolation Forest（IF）的核心概念。IF 采用二叉树去对数据进行切分，数据点在二叉树中所处的深度反应了该条数据的“疏离”程度。整个算法大致可以分为两步：\n\n1. 训练：抽取多个样本，构建多棵二叉树（Isolation Tree，即 iTree）；\n2. 预测：综合多棵二叉树的结果，计算每个数据点的异常分值。\n\n### 训练\n\n构建一棵 iTree 时，先从全量数据中抽取一批样本，然后随机选择一个特征作为起始节点，并在该特征的最大值和最小值之间随机选择一个值，将样本中小于该取值的数据划到左分支，大于等于该取值的划到右分支。然后，在左右两个分支数据中，重复上述步骤，直到满足如下条件：\n\n- 数据不可再分，即：只包含一条数据，或者全部数据相同。\n- 二叉树达到限定的最大深度。\n\n### 预测\n\n计算数据 x 的异常分值时，先要估算它在每棵 iTree 中的路径长度（也可以叫深度）。具体的，先沿着一棵 iTree，从根节点开始按不同特征的取值从上往下，直到到达某叶子节点。假设 iTree 的训练样本中同样落在 x 所在叶子节点的样本数为 T.size，则数据 x 在这棵 iTree 上的路径长度 h(x)，可以用下面这个公式计算\n\n**sklearn.predict(X)**: Predict if a particular sample is an outlier or not. For each observation, tells whether or not (+1 or -1) it should be considered as an inlier according to the fitted model.\n\n## model_name\n\n'IsolationForest'\n\n## train_model\n\n```python\nmodel, post_rule_train_config = get_model(\n            model_name=model_name, dataset=dataset, metric=metric, tune_on_test=tune_on_test, unsupervised=unsupervised\n        )\n# model: <merlion.models.anomaly.isolation_forest.IsolationForest object at 0x17f1e95e0>\n# post_rule_train_config:\n# {'metric': <TSADMetric.F1: functools.partial(<function accumulate_tsad_score at 0x12abcd040>, metric=functools.partial(<function TSADScoreAccumulator.f1 at 0x16a330af0>, score_type=<ScoreType.RevisedPointAdjusted: 2>))>, 'unsup_quantile': None, 'max_early_sec': None, 'max_delay_sec': None}\n\n\ntrain_vals = df_to_merlion(df[md.trainval], md[md.trainval], get_ground_truth=False, transform=resampler)\n# Converts a pandas dataframe time series to the Merlion format.\n# type(train_vals): <class 'merlion.utils.time_series.TimeSeries'>\n\ntest_vals = df_to_merlion(df[~md.trainval], md[~md.trainval], get_ground_truth=False, transform=resampler)\n# type(test_vals)\n# <class 'merlion.utils.time_series.TimeSeries'>\n\ntrain_anom = df_to_merlion(df[md.trainval], md[md.trainval], get_ground_truth=True)\n```\n\n## get_model\n\n![static/attachment/Pasted image 20221216154316.png](/images/5186498fb8857ba5ca38d34ef50de27ef1c051e1.png)\n\n```\nmodel_configs = config_dict[model_name][\"config\"]\n# {'default': {'n_estimators': 100}}\n\nmodel_type = config_dict[model_name].get(\"model_type\", model_name)\n# 'IsolationForest'\n\nmodel_kwargs = model_configs[\"default\"]\n# {'n_estimators': 100}\n\nmodel_configs.get(type(dataset).__name__, {})\n# {}\n\nmodel = ModelFactory.create(name=model_type, **model_kwargs)\n# <merlion.models.anomaly.isolation_forest.IsolationForest object at 0x17f1e95e0>\n\npost_rule_train_configs = config_dict[model_name].get(\"post_rule_train_config\", {})\n# {}\n\nd = post_rule_train_configs.get(\"default\", {})\n# {}\n\nd[\"metric\"] = None if unsupervised else metric\n# TSADScoreAccumulator.f1\n# accumulate_tsad_score\n# {'metric': <TSADMetric.F1: functools.partial(<function accumulate_tsad_score at 0x12abcd040>, metric=functools.partial(<function TSADScoreAccumulator.f1 at 0x16a330af0>, score_type=<ScoreType.RevisedPointAdjusted: 2>))>, 'unsup_quantile': None}\n\nd.update({\"max_early_sec\": dataset.max_lead_sec, \"max_delay_sec\": dataset.max_lag_sec})\n# result = {dict: 4} {'metric': <TSADMetric.F1: functools.partial(<function accumulate_tsad_score at 0x12abcd040>, metric=functools.partial(<function TSADScoreAccumulator.f1 at 0x16a330af0>, score_type=<ScoreType.RevisedPointAdjusted: 2>))>, 'unsup_quantile': None, 'max_early_\n 'metric' = {TSADMetric} TSADMetric.F1\n 'unsup_quantile' = {NoneType} None\n 'max_early_sec' = {NoneType} None\n 'max_delay_sec' = {NoneType} None\n __len__ = {int} 4\n```\n\n## TSADEvaluator\n\n```\nevaluator = TSADEvaluator(\n  model=model,\n  config=TSADEvaluatorConfig(\n\t train_window=train_window,\n\t retrain_freq=retrain_freq,\n\t max_delay_sec=delay,\n\t max_early_sec=getattr(model.threshold, \"suppress_secs\", delay),\n  ),\n)\n```\n\n## What is dataset_to_threshold?\n\nAccording to the anomaly rate of the dataset, return the threshold $r$ used to determine whether a data point is anomaly.\n\nFore example, the anomaly rate of the <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> is $2.26\\%$, so the function return $2.25\\%$\n\n```python\ndef dataset_to_threshold(dataset: TSADBaseDataset, tune_on_test=False):\n    if isinstance(dataset, IOpsCompetition):\n        return 2.25\n    elif isinstance(dataset, NAB):\n        return 3.5\n    elif isinstance(dataset, Synthetic):\n        return 2\n    elif isinstance(dataset, MSL):\n        return 3.0\n    elif isinstance(dataset, SMAP):\n        return 3.5\n    elif isinstance(dataset, SMD):\n        return 3 if not tune_on_test else 2.5\n    elif hasattr(dataset, \"default_threshold\"):\n        return dataset.default_threshold\n    return 3\n\n```\n\n## temedelta_offset\n\n```python\nself.timedelta_offset = pd.to_timedelta(0) \n```\n\n## IsolationForest 如何实现异常检测?是滑动窗口还是?\n\n原始数据 (shape=(1,605)) 经过 `pre-processing steps`:\n\n```python\n                         value\ntime                          \n2014-04-01 00:00:00  21.598011\n2014-04-01 00:05:00  19.321392\n2014-04-01 00:10:00  21.399938\n2014-04-01 00:15:00  18.373916\n2014-04-01 00:20:00  18.167499\n...                        ...\n2014-04-03 02:00:00  21.530211\n2014-04-03 02:05:00  21.958759\n2014-04-03 02:10:00  21.232358\n2014-04-03 02:15:00  19.874722\n2014-04-03 02:20:00  20.894818\n \n```\n\n原始数据被处理成了 (shape=(2, 604):\n\n```python\n                      value_0   value_1\ntime                                   \n2014-04-01 00:05:00 -2.276619 -2.276619\n2014-04-01 00:10:00 -2.276619  2.078546\n2014-04-01 00:15:00  2.078546 -3.026022\n2014-04-01 00:20:00 -3.026022 -0.206417\n2014-04-01 00:25:00 -0.206417  1.848682\n...                       ...       ...\n2014-04-03 02:00:00  0.869541  1.037752\n2014-04-03 02:05:00  1.037752  0.428547\n2014-04-03 02:10:00  0.428547 -0.726401\n2014-04-03 02:15:00 -0.726401 -1.357636\n2014-04-03 02:20:00 -1.357636  1.020096 \n```\n\n上述的数据变换是标准化吗?\n\n```python\ndef train_pre_process(self, train_data: TimeSeries) -> TimeSeries: \n   \"\"\"\n   Applies pre-processing steps common for training most models.\n\n   :param train_data: the original time series of training data\n   :return: the training data, after any necessary pre-processing has been applied\n   \"\"\"\n```\n\n经过了很多的 transform(`self.transforms`)\n\n```python\ndef __call__(self, time_series: TimeSeries) -> TimeSeries:\n   for f in self.transforms:\n\t  time_series = f(time_series)\n   return time_series \n```\n\n实质上经过了 Transform `Shingle(multivar_skip=True, size=2, stride=1)`\n\n## Debug\n\n![static/attachment/Pasted image 20221219090505.png](/images/0403ba2fe2ab37e09f53f895ad6dc8bc4a0e4dfa.png)\n\n[^1]: Liu, F. T., Ting, K. M., & Zhou, Z.-H. 2012. Isolation-Based Anomaly Detection. **_ACM Transactions on Knowledge Discovery from Data_**, 6(1): 1–39.\n","slug":"IsolationForest-实现","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a6004b4cv9hty090mq","content":"<h2 id=\"Isolation-Forest-简介\">Isolation Forest 简介</h2>\n<p>Isolation Forest assumes that anomalies are few and far from the normal <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup>.</p>\n<p><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html\">https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html</a></p>\n<h3 id=\"例子-1D\">例子 -1D</h3>\n<p>假设现在有一组一维数据（如下图所示），我们要对这组数据 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span></span> 进行随机切分，希望可以把点 A 和点 B 单独切分出来。</p>\n<p><img src=\"/images/3371c6ffcb23f98193287d1b34618622f4c3c3cd.png\" alt=\"static/attachment/Pasted image 20221219084607.png\"></p>\n<p>具体的，我们先在最大值和最小值之间随机选择一个值 x，然后按照 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>D</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[\\min(D),x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mop\">min</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>D</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x,\\max(D)]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">max</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mclose\">)]</span></span></span></span> 可以把数据分成左右两组。然后，在这两组数据中分别重复这个步骤，直到数据不可再分。显然，点 B 跟其他数据比较疏离，可能用很少的次数就可以把它切分出来；点 A 跟其他数据点聚在一起，可能需要更多的次数才能把它切分出来。</p>\n<h3 id=\"例子-2D\">例子 -2D</h3>\n<p>我们把数据从一维扩展到两维。同样的，我们沿着两个坐标轴进行随机切分，尝试把下图中的点 A’ 和点 B’ 分别切分出来。我们先随机选择一个特征维度，在这个特征的最大值和最小值之间随机选择一个值，按照跟特征值的大小关系将数据进行左右切分。然后，在左右两组数据中，我们重复上述步骤，再随机的按某个特征维度的取值把数据进行细分，直到无法细分，即：只剩下一个数据点，或者剩下的数据全部相同。跟先前的例子类似，直观上，点 B’ 跟其他数据点比较疏离，可能只需要很少的几次操作就可以将它细分出来；点 A’ 需要的切分次数可能会更多一些。</p>\n<p><img src=\"/images/3b742078e00bf2073e3c65d3280887bbec1c8c2c.png\" alt=\"static/attachment/Pasted image 20221219084957.png\"></p>\n<p>按照先前提到的关于“异常”的两个假设，一般情况下，在上面的例子中，点 B 和点 B’ 由于跟其他数据隔的比较远，会被认为是异常数据，而点 A 和点 A’ 会被认为是正常数据。直观上，异常数据由于跟其他数据点较为疏离，可能需要较少几次切分就可以将它们单独划分出来，而正常数据恰恰相反。这其实正是 Isolation Forest（IF）的核心概念。IF 采用二叉树去对数据进行切分，数据点在二叉树中所处的深度反应了该条数据的“疏离”程度。整个算法大致可以分为两步：</p>\n<ol>\n<li>训练：抽取多个样本，构建多棵二叉树（Isolation Tree，即 iTree）；</li>\n<li>预测：综合多棵二叉树的结果，计算每个数据点的异常分值。</li>\n</ol>\n<h3 id=\"训练\">训练</h3>\n<p>构建一棵 iTree 时，先从全量数据中抽取一批样本，然后随机选择一个特征作为起始节点，并在该特征的最大值和最小值之间随机选择一个值，将样本中小于该取值的数据划到左分支，大于等于该取值的划到右分支。然后，在左右两个分支数据中，重复上述步骤，直到满足如下条件：</p>\n<ul>\n<li>数据不可再分，即：只包含一条数据，或者全部数据相同。</li>\n<li>二叉树达到限定的最大深度。</li>\n</ul>\n<h3 id=\"预测\">预测</h3>\n<p>计算数据 x 的异常分值时，先要估算它在每棵 iTree 中的路径长度（也可以叫深度）。具体的，先沿着一棵 iTree，从根节点开始按不同特征的取值从上往下，直到到达某叶子节点。假设 iTree 的训练样本中同样落在 x 所在叶子节点的样本数为 T.size，则数据 x 在这棵 iTree 上的路径长度 h(x)，可以用下面这个公式计算</p>\n<p><strong>sklearn.predict(X)</strong>: Predict if a particular sample is an outlier or not. For each observation, tells whether or not (+1 or -1) it should be considered as an inlier according to the fitted model.</p>\n<h2 id=\"model-name\">model_name</h2>\n<p>‘IsolationForest’</p>\n<h2 id=\"train-model\">train_model</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">model, post_rule_train_config = get_model(</span><br><span class=\"line\">            model_name=model_name, dataset=dataset, metric=metric, tune_on_test=tune_on_test, unsupervised=unsupervised</span><br><span class=\"line\">        )</span><br><span class=\"line\"><span class=\"comment\"># model: &lt;merlion.models.anomaly.isolation_forest.IsolationForest object at 0x17f1e95e0&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># post_rule_train_config:</span></span><br><span class=\"line\"><span class=\"comment\"># &#123;&#x27;metric&#x27;: &lt;TSADMetric.F1: functools.partial(&lt;function accumulate_tsad_score at 0x12abcd040&gt;, metric=functools.partial(&lt;function TSADScoreAccumulator.f1 at 0x16a330af0&gt;, score_type=&lt;ScoreType.RevisedPointAdjusted: 2&gt;))&gt;, &#x27;unsup_quantile&#x27;: None, &#x27;max_early_sec&#x27;: None, &#x27;max_delay_sec&#x27;: None&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">train_vals = df_to_merlion(df[md.trainval], md[md.trainval], get_ground_truth=<span class=\"literal\">False</span>, transform=resampler)</span><br><span class=\"line\"><span class=\"comment\"># Converts a pandas dataframe time series to the Merlion format.</span></span><br><span class=\"line\"><span class=\"comment\"># type(train_vals): &lt;class &#x27;merlion.utils.time_series.TimeSeries&#x27;&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">test_vals = df_to_merlion(df[~md.trainval], md[~md.trainval], get_ground_truth=<span class=\"literal\">False</span>, transform=resampler)</span><br><span class=\"line\"><span class=\"comment\"># type(test_vals)</span></span><br><span class=\"line\"><span class=\"comment\"># &lt;class &#x27;merlion.utils.time_series.TimeSeries&#x27;&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">train_anom = df_to_merlion(df[md.trainval], md[md.trainval], get_ground_truth=<span class=\"literal\">True</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"get-model\">get_model</h2>\n<p><img src=\"/images/5186498fb8857ba5ca38d34ef50de27ef1c051e1.png\" alt=\"static/attachment/Pasted image 20221216154316.png\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">model_configs = config_dict[model_name][&quot;config&quot;]</span><br><span class=\"line\"># &#123;&#x27;default&#x27;: &#123;&#x27;n_estimators&#x27;: 100&#125;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">model_type = config_dict[model_name].get(&quot;model_type&quot;, model_name)</span><br><span class=\"line\"># &#x27;IsolationForest&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">model_kwargs = model_configs[&quot;default&quot;]</span><br><span class=\"line\"># &#123;&#x27;n_estimators&#x27;: 100&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">model_configs.get(type(dataset).__name__, &#123;&#125;)</span><br><span class=\"line\"># &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">model = ModelFactory.create(name=model_type, **model_kwargs)</span><br><span class=\"line\"># &lt;merlion.models.anomaly.isolation_forest.IsolationForest object at 0x17f1e95e0&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">post_rule_train_configs = config_dict[model_name].get(&quot;post_rule_train_config&quot;, &#123;&#125;)</span><br><span class=\"line\"># &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">d = post_rule_train_configs.get(&quot;default&quot;, &#123;&#125;)</span><br><span class=\"line\"># &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">d[&quot;metric&quot;] = None if unsupervised else metric</span><br><span class=\"line\"># TSADScoreAccumulator.f1</span><br><span class=\"line\"># accumulate_tsad_score</span><br><span class=\"line\"># &#123;&#x27;metric&#x27;: &lt;TSADMetric.F1: functools.partial(&lt;function accumulate_tsad_score at 0x12abcd040&gt;, metric=functools.partial(&lt;function TSADScoreAccumulator.f1 at 0x16a330af0&gt;, score_type=&lt;ScoreType.RevisedPointAdjusted: 2&gt;))&gt;, &#x27;unsup_quantile&#x27;: None&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">d.update(&#123;&quot;max_early_sec&quot;: dataset.max_lead_sec, &quot;max_delay_sec&quot;: dataset.max_lag_sec&#125;)</span><br><span class=\"line\"># result = &#123;dict: 4&#125; &#123;&#x27;metric&#x27;: &lt;TSADMetric.F1: functools.partial(&lt;function accumulate_tsad_score at 0x12abcd040&gt;, metric=functools.partial(&lt;function TSADScoreAccumulator.f1 at 0x16a330af0&gt;, score_type=&lt;ScoreType.RevisedPointAdjusted: 2&gt;))&gt;, &#x27;unsup_quantile&#x27;: None, &#x27;max_early_</span><br><span class=\"line\"> &#x27;metric&#x27; = &#123;TSADMetric&#125; TSADMetric.F1</span><br><span class=\"line\"> &#x27;unsup_quantile&#x27; = &#123;NoneType&#125; None</span><br><span class=\"line\"> &#x27;max_early_sec&#x27; = &#123;NoneType&#125; None</span><br><span class=\"line\"> &#x27;max_delay_sec&#x27; = &#123;NoneType&#125; None</span><br><span class=\"line\"> __len__ = &#123;int&#125; 4</span><br></pre></td></tr></table></figure>\n<h2 id=\"TSADEvaluator\">TSADEvaluator</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">evaluator = TSADEvaluator(</span><br><span class=\"line\">  model=model,</span><br><span class=\"line\">  config=TSADEvaluatorConfig(</span><br><span class=\"line\">\t train_window=train_window,</span><br><span class=\"line\">\t retrain_freq=retrain_freq,</span><br><span class=\"line\">\t max_delay_sec=delay,</span><br><span class=\"line\">\t max_early_sec=getattr(model.threshold, &quot;suppress_secs&quot;, delay),</span><br><span class=\"line\">  ),</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<h2 id=\"What-is-dataset-to-threshold\">What is dataset_to_threshold?</h2>\n<p>According to the anomaly rate of the dataset, return the threshold <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> used to determine whether a data point is anomaly.</p>\n<p>Fore example, the anomaly rate of the <a href=''>AIOPS2018-数据集</a> is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2.26</mn><mi mathvariant=\"normal\">%</mi></mrow><annotation encoding=\"application/x-tex\">2.26\\%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8056em;vertical-align:-0.0556em;\"></span><span class=\"mord\">2.26%</span></span></span></span>, so the function return <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2.25</mn><mi mathvariant=\"normal\">%</mi></mrow><annotation encoding=\"application/x-tex\">2.25\\%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8056em;vertical-align:-0.0556em;\"></span><span class=\"mord\">2.25%</span></span></span></span></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">dataset_to_threshold</span>(<span class=\"params\">dataset: TSADBaseDataset, tune_on_test=<span class=\"literal\">False</span></span>):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"built_in\">isinstance</span>(dataset, IOpsCompetition):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2.25</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, NAB):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3.5</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, Synthetic):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, MSL):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3.0</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, SMAP):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3.5</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, SMD):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3</span> <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> tune_on_test <span class=\"keyword\">else</span> <span class=\"number\">2.5</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">hasattr</span>(dataset, <span class=\"string\">&quot;default_threshold&quot;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dataset.default_threshold</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">3</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"temedelta-offset\">temedelta_offset</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.timedelta_offset = pd.to_timedelta(<span class=\"number\">0</span>) </span><br></pre></td></tr></table></figure>\n<h2 id=\"IsolationForest-如何实现异常检测-是滑动窗口还是\">IsolationForest 如何实现异常检测?是滑动窗口还是?</h2>\n<p>原始数据 (shape=(1,605)) 经过 <code>pre-processing steps</code>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                         value</span><br><span class=\"line\">time                          </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">21.598011</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span>  <span class=\"number\">19.321392</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">21.399938</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">18.373916</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">18.167499</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                       ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">21.530211</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">21.958759</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">21.232358</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">19.874722</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">20.894818</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<p>原始数据被处理成了 (shape=(2, 604):</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                      value_0   value_1</span><br><span class=\"line\">time                                   </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span> -<span class=\"number\">2.276619</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span>  <span class=\"number\">2.078546</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">2.078546</span> -<span class=\"number\">3.026022</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">3.026022</span> -<span class=\"number\">0.206417</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">25</span>:<span class=\"number\">00</span> -<span class=\"number\">0.206417</span>  <span class=\"number\">1.848682</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                      ...       ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">0.869541</span>  <span class=\"number\">1.037752</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">1.037752</span>  <span class=\"number\">0.428547</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">0.428547</span> -<span class=\"number\">0.726401</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">0.726401</span> -<span class=\"number\">1.357636</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">1.357636</span>  <span class=\"number\">1.020096</span> </span><br></pre></td></tr></table></figure>\n<p>上述的数据变换是标准化吗?</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">train_pre_process</span>(<span class=\"params\">self, train_data: TimeSeries</span>) -&gt; TimeSeries: </span><br><span class=\"line\">   <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">   Applies pre-processing steps common for training most models.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">   :param train_data: the original time series of training data</span></span><br><span class=\"line\"><span class=\"string\">   :return: the training data, after any necessary pre-processing has been applied</span></span><br><span class=\"line\"><span class=\"string\">   &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>\n<p>经过了很多的 transform(<code>self.transforms</code>)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">__call__</span>(<span class=\"params\">self, time_series: TimeSeries</span>) -&gt; TimeSeries:</span><br><span class=\"line\">   <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> self.transforms:</span><br><span class=\"line\">\t  time_series = f(time_series)</span><br><span class=\"line\">   <span class=\"keyword\">return</span> time_series </span><br></pre></td></tr></table></figure>\n<p>实质上经过了 Transform <code>Shingle(multivar_skip=True, size=2, stride=1)</code></p>\n<h2 id=\"Debug\">Debug</h2>\n<p><img src=\"/images/0403ba2fe2ab37e09f53f895ad6dc8bc4a0e4dfa.png\" alt=\"static/attachment/Pasted image 20221219090505.png\"></p>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>Liu, F. T., Ting, K. M., &amp; Zhou, Z.-H. 2012. Isolation-Based Anomaly Detection. <strong><em>ACM Transactions on Knowledge Discovery from Data</em></strong>, 6(1): 1–39. <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover1.JPG","excerpt":"","more":"<h2 id=\"Isolation-Forest-简介\">Isolation Forest 简介</h2>\n<p>Isolation Forest assumes that anomalies are few and far from the normal <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup>.</p>\n<p><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html\">https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.IsolationForest.html</a></p>\n<h3 id=\"例子-1D\">例子 -1D</h3>\n<p>假设现在有一组一维数据（如下图所示），我们要对这组数据 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi></mrow><annotation encoding=\"application/x-tex\">D</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span></span></span></span> 进行随机切分，希望可以把点 A 和点 B 单独切分出来。</p>\n<p><img src=\"/images/3371c6ffcb23f98193287d1b34618622f4c3c3cd.png\" alt=\"static/attachment/Pasted image 20221219084607.png\"></p>\n<p>具体的，我们先在最大值和最小值之间随机选择一个值 x，然后按照 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>min</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>D</mi><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[\\min(D),x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mop\">min</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> 和 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>D</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[x,\\max(D)]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">max</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mclose\">)]</span></span></span></span> 可以把数据分成左右两组。然后，在这两组数据中分别重复这个步骤，直到数据不可再分。显然，点 B 跟其他数据比较疏离，可能用很少的次数就可以把它切分出来；点 A 跟其他数据点聚在一起，可能需要更多的次数才能把它切分出来。</p>\n<h3 id=\"例子-2D\">例子 -2D</h3>\n<p>我们把数据从一维扩展到两维。同样的，我们沿着两个坐标轴进行随机切分，尝试把下图中的点 A’ 和点 B’ 分别切分出来。我们先随机选择一个特征维度，在这个特征的最大值和最小值之间随机选择一个值，按照跟特征值的大小关系将数据进行左右切分。然后，在左右两组数据中，我们重复上述步骤，再随机的按某个特征维度的取值把数据进行细分，直到无法细分，即：只剩下一个数据点，或者剩下的数据全部相同。跟先前的例子类似，直观上，点 B’ 跟其他数据点比较疏离，可能只需要很少的几次操作就可以将它细分出来；点 A’ 需要的切分次数可能会更多一些。</p>\n<p><img src=\"/images/3b742078e00bf2073e3c65d3280887bbec1c8c2c.png\" alt=\"static/attachment/Pasted image 20221219084957.png\"></p>\n<p>按照先前提到的关于“异常”的两个假设，一般情况下，在上面的例子中，点 B 和点 B’ 由于跟其他数据隔的比较远，会被认为是异常数据，而点 A 和点 A’ 会被认为是正常数据。直观上，异常数据由于跟其他数据点较为疏离，可能需要较少几次切分就可以将它们单独划分出来，而正常数据恰恰相反。这其实正是 Isolation Forest（IF）的核心概念。IF 采用二叉树去对数据进行切分，数据点在二叉树中所处的深度反应了该条数据的“疏离”程度。整个算法大致可以分为两步：</p>\n<ol>\n<li>训练：抽取多个样本，构建多棵二叉树（Isolation Tree，即 iTree）；</li>\n<li>预测：综合多棵二叉树的结果，计算每个数据点的异常分值。</li>\n</ol>\n<h3 id=\"训练\">训练</h3>\n<p>构建一棵 iTree 时，先从全量数据中抽取一批样本，然后随机选择一个特征作为起始节点，并在该特征的最大值和最小值之间随机选择一个值，将样本中小于该取值的数据划到左分支，大于等于该取值的划到右分支。然后，在左右两个分支数据中，重复上述步骤，直到满足如下条件：</p>\n<ul>\n<li>数据不可再分，即：只包含一条数据，或者全部数据相同。</li>\n<li>二叉树达到限定的最大深度。</li>\n</ul>\n<h3 id=\"预测\">预测</h3>\n<p>计算数据 x 的异常分值时，先要估算它在每棵 iTree 中的路径长度（也可以叫深度）。具体的，先沿着一棵 iTree，从根节点开始按不同特征的取值从上往下，直到到达某叶子节点。假设 iTree 的训练样本中同样落在 x 所在叶子节点的样本数为 T.size，则数据 x 在这棵 iTree 上的路径长度 h(x)，可以用下面这个公式计算</p>\n<p><strong>sklearn.predict(X)</strong>: Predict if a particular sample is an outlier or not. For each observation, tells whether or not (+1 or -1) it should be considered as an inlier according to the fitted model.</p>\n<h2 id=\"model-name\">model_name</h2>\n<p>‘IsolationForest’</p>\n<h2 id=\"train-model\">train_model</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">model, post_rule_train_config = get_model(</span><br><span class=\"line\">            model_name=model_name, dataset=dataset, metric=metric, tune_on_test=tune_on_test, unsupervised=unsupervised</span><br><span class=\"line\">        )</span><br><span class=\"line\"><span class=\"comment\"># model: &lt;merlion.models.anomaly.isolation_forest.IsolationForest object at 0x17f1e95e0&gt;</span></span><br><span class=\"line\"><span class=\"comment\"># post_rule_train_config:</span></span><br><span class=\"line\"><span class=\"comment\"># &#123;&#x27;metric&#x27;: &lt;TSADMetric.F1: functools.partial(&lt;function accumulate_tsad_score at 0x12abcd040&gt;, metric=functools.partial(&lt;function TSADScoreAccumulator.f1 at 0x16a330af0&gt;, score_type=&lt;ScoreType.RevisedPointAdjusted: 2&gt;))&gt;, &#x27;unsup_quantile&#x27;: None, &#x27;max_early_sec&#x27;: None, &#x27;max_delay_sec&#x27;: None&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">train_vals = df_to_merlion(df[md.trainval], md[md.trainval], get_ground_truth=<span class=\"literal\">False</span>, transform=resampler)</span><br><span class=\"line\"><span class=\"comment\"># Converts a pandas dataframe time series to the Merlion format.</span></span><br><span class=\"line\"><span class=\"comment\"># type(train_vals): &lt;class &#x27;merlion.utils.time_series.TimeSeries&#x27;&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">test_vals = df_to_merlion(df[~md.trainval], md[~md.trainval], get_ground_truth=<span class=\"literal\">False</span>, transform=resampler)</span><br><span class=\"line\"><span class=\"comment\"># type(test_vals)</span></span><br><span class=\"line\"><span class=\"comment\"># &lt;class &#x27;merlion.utils.time_series.TimeSeries&#x27;&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">train_anom = df_to_merlion(df[md.trainval], md[md.trainval], get_ground_truth=<span class=\"literal\">True</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"get-model\">get_model</h2>\n<p><img src=\"/images/5186498fb8857ba5ca38d34ef50de27ef1c051e1.png\" alt=\"static/attachment/Pasted image 20221216154316.png\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">model_configs = config_dict[model_name][&quot;config&quot;]</span><br><span class=\"line\"># &#123;&#x27;default&#x27;: &#123;&#x27;n_estimators&#x27;: 100&#125;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">model_type = config_dict[model_name].get(&quot;model_type&quot;, model_name)</span><br><span class=\"line\"># &#x27;IsolationForest&#x27;</span><br><span class=\"line\"></span><br><span class=\"line\">model_kwargs = model_configs[&quot;default&quot;]</span><br><span class=\"line\"># &#123;&#x27;n_estimators&#x27;: 100&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">model_configs.get(type(dataset).__name__, &#123;&#125;)</span><br><span class=\"line\"># &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">model = ModelFactory.create(name=model_type, **model_kwargs)</span><br><span class=\"line\"># &lt;merlion.models.anomaly.isolation_forest.IsolationForest object at 0x17f1e95e0&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">post_rule_train_configs = config_dict[model_name].get(&quot;post_rule_train_config&quot;, &#123;&#125;)</span><br><span class=\"line\"># &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">d = post_rule_train_configs.get(&quot;default&quot;, &#123;&#125;)</span><br><span class=\"line\"># &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">d[&quot;metric&quot;] = None if unsupervised else metric</span><br><span class=\"line\"># TSADScoreAccumulator.f1</span><br><span class=\"line\"># accumulate_tsad_score</span><br><span class=\"line\"># &#123;&#x27;metric&#x27;: &lt;TSADMetric.F1: functools.partial(&lt;function accumulate_tsad_score at 0x12abcd040&gt;, metric=functools.partial(&lt;function TSADScoreAccumulator.f1 at 0x16a330af0&gt;, score_type=&lt;ScoreType.RevisedPointAdjusted: 2&gt;))&gt;, &#x27;unsup_quantile&#x27;: None&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">d.update(&#123;&quot;max_early_sec&quot;: dataset.max_lead_sec, &quot;max_delay_sec&quot;: dataset.max_lag_sec&#125;)</span><br><span class=\"line\"># result = &#123;dict: 4&#125; &#123;&#x27;metric&#x27;: &lt;TSADMetric.F1: functools.partial(&lt;function accumulate_tsad_score at 0x12abcd040&gt;, metric=functools.partial(&lt;function TSADScoreAccumulator.f1 at 0x16a330af0&gt;, score_type=&lt;ScoreType.RevisedPointAdjusted: 2&gt;))&gt;, &#x27;unsup_quantile&#x27;: None, &#x27;max_early_</span><br><span class=\"line\"> &#x27;metric&#x27; = &#123;TSADMetric&#125; TSADMetric.F1</span><br><span class=\"line\"> &#x27;unsup_quantile&#x27; = &#123;NoneType&#125; None</span><br><span class=\"line\"> &#x27;max_early_sec&#x27; = &#123;NoneType&#125; None</span><br><span class=\"line\"> &#x27;max_delay_sec&#x27; = &#123;NoneType&#125; None</span><br><span class=\"line\"> __len__ = &#123;int&#125; 4</span><br></pre></td></tr></table></figure>\n<h2 id=\"TSADEvaluator\">TSADEvaluator</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">evaluator = TSADEvaluator(</span><br><span class=\"line\">  model=model,</span><br><span class=\"line\">  config=TSADEvaluatorConfig(</span><br><span class=\"line\">\t train_window=train_window,</span><br><span class=\"line\">\t retrain_freq=retrain_freq,</span><br><span class=\"line\">\t max_delay_sec=delay,</span><br><span class=\"line\">\t max_early_sec=getattr(model.threshold, &quot;suppress_secs&quot;, delay),</span><br><span class=\"line\">  ),</span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<h2 id=\"What-is-dataset-to-threshold\">What is dataset_to_threshold?</h2>\n<p>According to the anomaly rate of the dataset, return the threshold <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> used to determine whether a data point is anomaly.</p>\n<p>Fore example, the anomaly rate of the <a href=''>AIOPS2018-数据集</a> is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2.26</mn><mi mathvariant=\"normal\">%</mi></mrow><annotation encoding=\"application/x-tex\">2.26\\%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8056em;vertical-align:-0.0556em;\"></span><span class=\"mord\">2.26%</span></span></span></span>, so the function return <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2.25</mn><mi mathvariant=\"normal\">%</mi></mrow><annotation encoding=\"application/x-tex\">2.25\\%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8056em;vertical-align:-0.0556em;\"></span><span class=\"mord\">2.25%</span></span></span></span></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">dataset_to_threshold</span>(<span class=\"params\">dataset: TSADBaseDataset, tune_on_test=<span class=\"literal\">False</span></span>):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> <span class=\"built_in\">isinstance</span>(dataset, IOpsCompetition):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2.25</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, NAB):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3.5</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, Synthetic):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">2</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, MSL):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3.0</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, SMAP):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3.5</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">isinstance</span>(dataset, SMD):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">3</span> <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> tune_on_test <span class=\"keyword\">else</span> <span class=\"number\">2.5</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> <span class=\"built_in\">hasattr</span>(dataset, <span class=\"string\">&quot;default_threshold&quot;</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> dataset.default_threshold</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">3</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"temedelta-offset\">temedelta_offset</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.timedelta_offset = pd.to_timedelta(<span class=\"number\">0</span>) </span><br></pre></td></tr></table></figure>\n<h2 id=\"IsolationForest-如何实现异常检测-是滑动窗口还是\">IsolationForest 如何实现异常检测?是滑动窗口还是?</h2>\n<p>原始数据 (shape=(1,605)) 经过 <code>pre-processing steps</code>:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                         value</span><br><span class=\"line\">time                          </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">21.598011</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span>  <span class=\"number\">19.321392</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">21.399938</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">18.373916</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">18.167499</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                       ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">21.530211</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">21.958759</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">21.232358</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">19.874722</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">20.894818</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<p>原始数据被处理成了 (shape=(2, 604):</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                      value_0   value_1</span><br><span class=\"line\">time                                   </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span> -<span class=\"number\">2.276619</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span>  <span class=\"number\">2.078546</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">2.078546</span> -<span class=\"number\">3.026022</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">3.026022</span> -<span class=\"number\">0.206417</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">25</span>:<span class=\"number\">00</span> -<span class=\"number\">0.206417</span>  <span class=\"number\">1.848682</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                      ...       ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">0.869541</span>  <span class=\"number\">1.037752</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">1.037752</span>  <span class=\"number\">0.428547</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">0.428547</span> -<span class=\"number\">0.726401</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">0.726401</span> -<span class=\"number\">1.357636</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">1.357636</span>  <span class=\"number\">1.020096</span> </span><br></pre></td></tr></table></figure>\n<p>上述的数据变换是标准化吗?</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">train_pre_process</span>(<span class=\"params\">self, train_data: TimeSeries</span>) -&gt; TimeSeries: </span><br><span class=\"line\">   <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">   Applies pre-processing steps common for training most models.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">   :param train_data: the original time series of training data</span></span><br><span class=\"line\"><span class=\"string\">   :return: the training data, after any necessary pre-processing has been applied</span></span><br><span class=\"line\"><span class=\"string\">   &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>\n<p>经过了很多的 transform(<code>self.transforms</code>)</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">__call__</span>(<span class=\"params\">self, time_series: TimeSeries</span>) -&gt; TimeSeries:</span><br><span class=\"line\">   <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> self.transforms:</span><br><span class=\"line\">\t  time_series = f(time_series)</span><br><span class=\"line\">   <span class=\"keyword\">return</span> time_series </span><br></pre></td></tr></table></figure>\n<p>实质上经过了 Transform <code>Shingle(multivar_skip=True, size=2, stride=1)</code></p>\n<h2 id=\"Debug\">Debug</h2>\n<p><img src=\"/images/0403ba2fe2ab37e09f53f895ad6dc8bc4a0e4dfa.png\" alt=\"static/attachment/Pasted image 20221219090505.png\"></p>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>Liu, F. T., Ting, K. M., &amp; Zhou, Z.-H. 2012. Isolation-Based Anomaly Detection. <strong><em>ACM Transactions on Knowledge Discovery from Data</em></strong>, 6(1): 1–39. <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n"},{"title":"Merlion 源码分析","share":true,"date":"2022-12-16T00:16:54.000Z","updated":"2023-01-04T00:58:47.000Z","_content":"\nhttps://opensource.salesforce.com/Merlion/v1.3.1/tutorials/TimeSeries.html#UnivariateTimeSeries:-The-Basic-Building-Block\n\n![Excalidraw/Merlion 源码分析 2022-12-16 16.06.05.excalidraw](/images/95d48e89e235281019c6eb4b57a463db03073dbf.png)\n\n## 图解释\n- **pink areas**: ground truth\n- red curves: anomaly score\n- blue curves: original data value\n![static/attachment/Pasted image 20221216182032.png](/images/e47a64994b7f6ef50b68a861f2b9a64078d41f30.png)\n\n## model.get_anomaly_label\n1. 获取 score : `scores = self.get_anomaly_score(time_series, time_series_prev)`\n2. 获取标签: `self.post_rule(scores) if self.post_rule is not None else scores`\n## 如何设置 post_rule\n\n`AnomScoreCalibrator(max_score=max_score)`\n\n## Data Format\n\n`UnivariateTimeSeries` and `TimeSeries`. TimeSeries is comprised of many UnivariateTimeSeries.\n\n### UnivariateTimeSeries\n\nUnivariateTimeSeries is contain two columns: `DatetimeIndex` and `UnivariateTimeSeries`\n\n```python\n\nfrom merlion.utils import UnivariateTimeSeries\n\nkpi = UnivariateTimeSeries(\n    time_stamps=df.timestamp_millis/1000,  # timestamps in units of seconds\n    values=df.kpi,                         # time series values\n    name=\"kpi\"                             # optional: a name for this univariate\n)\n\nkpi_label = UnivariateTimeSeries(\n    time_stamps=df.timestamp_millis/1000,  # timestamps in units of seconds\n    values=df.kpi_label                    # time series values\n) \n```\n\nfunctions:\n\n- convert a UnivariateTimeSeries to a regular` pd.Series`: `kpi.to_pd()`\n- access the timestamps: `kpi.time_stamps[:5]`\n- Get the datetimes: `kpi.index[:5]`\n- Get the values: `kpi.values[:5]`\n- obtain a tuple of $(timestamp, value)$: `kpi[0]`\n- a slice index: `kpi[1:5]`, obtain a new UnivariateTimeSeries\n- Iterating: `for t, x in kpi[:5]`\n\n### TimeSeries\n\nTimeSeries is comprised of many UnivariateTimeSeries.\n\n```python\ntime_series_list = TimeSeries(univariates=[kpi.copy(), kpi_label.copy()]) \n```\n\nfunctions :\n\n- access the names of the individual univariates: `time_series_list.names`\n- access a specific univariate via `time_series.univariates[name]`\n- iterate over univariates: `for univariate in time_series_dict.univariates:`\n- iterate over all univariates & names: `for name, univariate in time_series_dict.items()`\n## Anomaly Detection in Merlion\n\n效果:\n\n```python\nPrecision: 0.0000, Recall: 0.0000, F1: 0.0000\nMean Time To Detect: 0 days 00:00:00 \n```\n\n![static/attachment/Pasted image 20221216085933.png](/images/10b196cf5c18a6e6c44bd8477d1dd4e74d91ab83.png)\n\nmy implement:\n\n```python\nfrom merlion.utils import TimeSeries\nfrom ts_datasets.ts_datasets.anomaly import NAB\n\ntime_series, metadata = NAB(subset=\"artificialWithAnomaly\")[3]\ntrain_data = TimeSeries.from_pd(time_series[metadata.trainval])\ntest_data = TimeSeries.from_pd(time_series[~metadata.trainval])\ntest_labels = TimeSeries.from_pd(metadata.anomaly[~metadata.trainval])\n\nfrom merlion.models.defaults import DefaultDetector, DefaultDetectorConfig\n\nmodel = DefaultDetector(DefaultDetectorConfig())\nmodel.train(train_data=train_data)\ntest_predict = model.get_anomaly_label(time_series=test_data)\nprint(type(test_predict))\nprint(test_predict)\n# <class 'merlion.utils.time_series.TimeSeries'>\n#                      anom_score\n# 2014-04-03 02:25:00         0.0\n# 2014-04-03 02:30:00         0.0\n# 2014-04-03 02:35:00         0.0\n\nfrom merlion.plot import plot_anoms\nimport matplotlib.pyplot as plt\n\nfig, ax = model.plot_anomaly(time_series=test_data)\nplot_anoms(ax=ax, anomaly_labels=test_labels)\nplt.show()\n\nfrom merlion.evaluate.anomaly import TSADMetric\n\np = TSADMetric.Precision.value(ground_truth=test_labels, predict=test_predict)\nr = TSADMetric.Recall.value(ground_truth=test_labels, predict=test_predict)\nf1 = TSADMetric.F1.value(ground_truth=test_labels, predict=test_predict)\nmttd = TSADMetric.MeanTimeToDetect.value(ground_truth=test_labels, predict=test_predict)\nprint(f\"Precision: {p:.4f}, Recall: {r:.4f}, F1: {f1:.4f}\\n\"\n      f\"Mean Time To Detect: {mttd}\")\n# Precision: 0.0000, Recall: 0.0000, F1: 0.0000\n# Mean Time To Detect: 0 days 00:00:00\n \n```\n\n## 支持的评估指标\n\n<u>Merlion 支持 PW, PA, RPA 三种指标.</u>\n\nThe key challenge in designing an appropriate evaluation metric for time series anomaly detection lies in the fact that anomalies are almost always windows of time, rather than discrete points. Thus, while it is easy to compute the pointwise (PW) precision, recall, and F1 score of a predicted anomaly label sequence relative to the ground truth label sequence, these metrics do not reﬂect a quantity that human operators care about.\n\nXu et al. (2018) propose point-adjusted (PA) metrics as a solution to this problem: if any point in a ground truth anomaly window is labeled as anomalous, all points in the segment are treated as true positives. If no anomalies are ﬂagged in the window, all points are labeled as false negatives. Any predicted anomalies outside of anomalous windows are treated as false positives. Precision, recall, and F1 can be computed based on these adjusted true/false positive/negative counts. However, the disadvantage of PA metrics is that they are biased to reward models for detecting long anomalies more than short ones.\n\nHundman et al. (2018) propose revised point-adjusted (RPA) metrics as a closely related alternative: if any point in a ground truth anomaly window is labeled as anomalous, one true positive is registered. If no anomalies are ﬂagged in the window, one false negative is recorded. Any predicted anomalies outside of anomalous windows are treated as false positives. These metrics address the shortcomings of PA metrics, but they do penalize false positives more heavily than alternatives.\n\nMerlion’s TSADMetric enum supports all 3 classes of evaluation metrics (PW, PA, and RPA), as well as the mean time to detect an anomaly. By default, we evaluate RPA metrics, but users may manually specify alternatives if their application calls for it.\n\n## 实现一个自定义模型的步骤\n\ninherits from `DetectorConfig`.\n\ninherits from `DetectorBase`\n\n## EvaluatorConfig\n- **train_window**: the maximum duration of data we would like to train the model on. ``None`` means no limit.\n- **retrain_freq**: the frequency at which we want to re-train the model. ``None`` means we only train the model once on the initial training data.\n\n## model.threshold(test_score) 是什么?\n\n🔑 将所有小于 `alm_threshold ` 的值设置为 0.\n\n本质是: `scores = np.where(np.abs(scores) >= self.alm_threshold, scores, 0.0)`\n\n```\ndef __call__(self, time_series: TimeSeries) -> TimeSeries:\n   assert (\n\t  time_series.dim == 1\n   ), f\"{type(self).__name__} post-rule can only be applied on single-variable time series\"\n   if self.alm_threshold is None:\n\t  raise RuntimeError(f\"alm_threshold is None. Please train the post-rule before attempting to use it.\")\n   k = time_series.names[0]\n   times = time_series.univariates[k].index\n   scores = time_series.univariates[k].np_values\n   scores = np.where(np.isnan(scores), 0.0, scores)\n   if self.abs_score:\n\t  scores = np.where(np.abs(scores) >= self.alm_threshold, scores, 0.0)\n   else:\n\t  scores = np.where(scores >= self.alm_threshold, scores, 0.0)\n   return TimeSeries({k: UnivariateTimeSeries(times, scores)})\n```\n\n## post_process.threshold\n\ngoal: to reduce the number of false positives.\n\n将 $<\\operatorname{alm\\_threshold}$ 的值设置为 0, 其他值保持不变. Zeroes all anomaly scores whose absolute value is less than the threshold\n\n- `scores = np.where(np.abs(scores) >= self.alm_threshold, scores, 0.0)`\n- `alm_threshold` 默认是 3\n\nobtain post-processed anomaly scores: `model.get_anomaly_label(time_series)`\n\n## post_process.calibration\n\n将值转换到 $z_t$ s.t. distribution of the predict score.\n\n![static/attachment/Pasted image 20221217080117.png](/images/b906e21a8f259249f0402645da7d4d16eb91a6af.png)\n\n- $F_{s}: R -> [0,1]$ is the CDF of the absolute raw anomaly scores $| s_t|$ , $s_t$ is the score of the time point $t$.\n- essence: transfers one distribution to the other distribution\n- Calibration is a post-processing step\n\nensures that anomaly scores correspond to standard deviation units and are therefore interpretable and consistent between diﬀerent models,\n\nCalibration bridges this gap by making all anomaly scores interpretable as z-scores, i.e. values drawn from a standard normal distribution.\n\n## evaluation.EvaluatorBase\n\n**scenarious and problems**: When a time series model is deployed live in production, training and inference are usually not performed in batch on a full time series. Rather, the model is retrained at a regular cadence\n\n**solutions**: provide a EvaluatorBase class which implements:\n\n- Train an initial model on recent historical training data.\n- At a regular interval (e.g. once per day), retrain the entire model on the most recent data. This can be either the entire history, or a more limited window (e.g. 4 weeks).\n- Obtain the model’s predictions (forecasts or anomaly scores) for the time series values that occur between re-trainings. Users may customize whether this should be done in batch, streaming, or at some intermediate cadence.\n- Compare the model’s predictions against the ground truth (actual values for forecasting, or labeled anomalies for anomaly detection), and report quantitative evaluation metrics.\n\nForecastMetric and TSADMetric: a wide range of evaluation metrics for both forecasting and anomaly detection,\n\n## model selection\n- split training set into the training set and validation set.\n- Train models using the training set\n- grab the model with the best performance on the validation split\n- return the model after retraining the model on full training data.\n\n## 一次 benchmark 的结果\n\n```\npython benchmark_anomaly_test.py --dataset IOpsCompetition --models IsolationForest \n\nTraining model IsolationForest...\n  0%|          | 0/29 [00:00<?, ?it/s]\n \n2022-12-16 23:15:27,926 (threshold:129) INFO: Threshold 2.9831 achieves F1=0.7273.\n2022-12-16 23:15:27,935 (benchmark_anomaly_test:372) INFO: \nPerformance on time series 2/29\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:373) INFO: Revised Point-Adjusted Metrics\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:374) INFO: F1 Score:  0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:375) INFO: Precision: 0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:376) INFO: Recall:    0.0000\n\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:377) INFO: Mean Time To Detect Anomalies:  0 days 00:00:00\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:378) INFO: Mean Detected Anomaly Duration: 0 days 00:00:00\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:379) INFO: Mean Anomaly Duration:          0 days 00:59:10\n\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:382) INFO: Pointwise metrics\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:383) INFO: F1 Score:  0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:384) INFO: Precision: 0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:385) INFO: Recall:    0.0000\n\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:387) INFO: Point-Adjusted Metrics\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:388) INFO: F1 Score:  0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:389) INFO: Precision: 0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:390) INFO: Recall:    0.0000\n\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:392) INFO: NAB Scores\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:393) INFO: NAB score (balanced): 0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:394) INFO: NAB score (low FP):   0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:395) INFO: NAB score (low FN):   0.0000\n\n100%|██████████| 29/29 [00:20<00:00,  1.41it/s]\n  0%|          | 0/29 [00:00<?, ?it/s]2022-12-16 23:15:28,808 (threshold:129) INFO: Threshold 3.2748 achieves F1=0.3871.\n2022-12-16 23:15:28,942 (threshold:129) INFO: Threshold 2.8378 achieves PointwiseF1=0.4650.\n2022-12-16 23:15:29,069 (threshold:129) INFO: Threshold 3.1780 achieves PointAdjustedF1=0.7929.\n  3%|▎         | 1/29 [00:01<00:29,  1.06s/it]2022-12-16 23:15:29,407 (threshold:129) INFO: Threshold 2.9831 achieves F1=0.7273.\n2022-12-16 23:15:29,494 (threshold:129) INFO: Threshold 3.4093 achieves PointwiseF1=0.5455.\n2022-12-16 23:15:29,532 (threshold:129) INFO: Threshold 3.4093 achieves PointAdjustedF1=0.8966.\n  7%|▋         | 2/29 [00:01<00:18,  1.42it/s]2022-12-16 23:15:30,324 (threshold:129) INFO: Threshold 3.1780 achieves F1=0.4356.\n2022-12-16 23:15:30,455 (threshold:129) INFO: Threshold 2.7240 achieves PointwiseF1=0.4567.\n2022-12-16 23:15:30,592 (threshold:129) INFO: Threshold 3.1780 achieves PointAdjustedF1=0.7210.\n100%|██████████| 29/29 [00:02<00:00, 10.56it/s]\n\nRevised point-adjusted metrics\nF1 score:  0.3838\nPrecision: 0.5205\nRecall:    0.3040\n\nMean Time To Detect Anomalies:  -0 days 00:07:33\nMean Detected Anomaly Duration: 0 days 00:28:30\nMean Anomaly Duration:          0 days 00:15:53\n\nPointwise metrics\nF1 score:  0.3263\nPrecision: 0.2606\nRecall:    0.4363\n\nPoint-adjusted metrics\nF1 score:  0.6375\nPrecision: 0.6150\nRecall:    0.6618\n\nNAB Scores\nNAB Score (balanced):       0.2070\nNAB Score (high precision): 0.1997\nNAB Score (high recall):    0.2393\n\n```\n\n## 一次完整的 benchmark 结果\n\n![[static/attachment/merlion_benchmark_all.txt]]\n\n## TransformSequence\n\n存储 a set of Transforms, then call them sequentially.\n\n![static/attachment/Pasted image 20221219090715.png](/images/89a5f9a57f7aed021e92b954d81513f8deadb968.png)\n\n数据变换前后:\n\n![static/attachment/Pasted image 20221219091047.png](/images/62cb674b47a91d578bc8bbdb3ed19fdd29b38215.png)\n\n## Train 步骤\n\n![static/attachment/Pasted image 20221219091338.png](/images/805829d033d591a573e71569f090a2526b87d8a0.png)\n\n## DifferenceTransform and Shingle(multivar_skip=True, size=2, stride=1)\n\nhttps://opensource.salesforce.com/Merlion/v1.3.1/merlion.transform.html#merlion.transform.moving_average.DifferenceTransform\n\n```python\nself.transform.train(train_data) \ntrain_data = self.transform(train_data) \n```\n\n- `self.transform.train(train_data)`: Sets all trainable parameters of the transform (if any), using the input time series as training data. A possible implement : `merlion.transform.sequence.TransformSequence.train`\n- `train_data = self.transform(train_data) `: 根据 `self.transform.train(train_data)` 找到的特征进行变换\n\n## DifferenceTransform\n\n计算后一个值减去前一个值的差, 与 `np.diff()` 函数类似, `val[i]=val[i]-val[i-1], s.t. i>=1`\n\ninput:\n\n```python\n                         value\ntime                          \n2014-04-01 00:00:00  21.598011\n2014-04-01 00:05:00  19.321392\n2014-04-01 00:10:00  21.399938\n2014-04-01 00:15:00  18.373916\n2014-04-01 00:20:00  18.167499\n...                        ...\n2014-04-03 02:00:00  21.530211\n2014-04-03 02:05:00  21.958759\n2014-04-03 02:10:00  21.232358\n2014-04-03 02:15:00  19.874722\n2014-04-03 02:20:00  20.894818\n\n[605 rows x 1 columns]\n```\n\noutput:\n\n```python\n                        value\ntime                         \n2014-04-01 00:05:00 -2.276619\n2014-04-01 00:10:00  2.078546\n2014-04-01 00:15:00 -3.026022\n2014-04-01 00:20:00 -0.206417\n2014-04-01 00:25:00  1.848682\n...                       ...\n2014-04-03 02:00:00  1.037752\n2014-04-03 02:05:00  0.428547\n2014-04-03 02:10:00 -0.726401\n2014-04-03 02:15:00 -1.357636\n2014-04-03 02:20:00  1.020096\n\n[604 rows x 1 columns]\n```\n\n#### .train\n\ndoes not do anything in method `.train`\n\n```python\ndef train(self, time_series: TimeSeries):\n   pass\n```\n\n#### **call**\n\n核心代码:\n\n```python\nUnivariateTimeSeries.from_pd(var.diff())[1:] \n```\n\n## Shingle\n\n`Shingle` 可以理解为滑动窗口, 当 `Shingle(size=10, stride=1)` 时,数据就是:\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  ...  kpi_6  kpi_7  kpi_8  kpi_9\ntime                                             ...                            \n2022-01-01 00:00:00    1.0    1.0    1.0    1.0  ...    1.0    1.0    1.0    1.0\n2022-01-04 10:40:00    1.0    1.0    1.0    1.0  ...    1.0    1.0    1.0    2.0\n2022-01-07 21:20:00    1.0    1.0    1.0    1.0  ...    1.0    1.0    2.0    3.0\n2022-01-11 08:00:00    1.0    1.0    1.0    1.0  ...    1.0    2.0    3.0    4.0\n2022-01-14 18:40:00    1.0    1.0    1.0    1.0  ...    2.0    3.0    4.0    5.0\n2022-01-18 05:20:00    1.0    1.0    1.0    1.0  ...    3.0    4.0    5.0    6.0\n2022-01-21 16:00:00    1.0    1.0    1.0    1.0  ...    4.0    5.0    6.0    7.0\n2022-01-25 02:40:00    1.0    1.0    1.0    2.0  ...    5.0    6.0    7.0    8.0\n2022-01-28 13:20:00    1.0    1.0    2.0    3.0  ...    6.0    7.0    8.0    9.0\n2022-02-01 00:00:00    1.0    2.0    3.0    4.0  ...    7.0    8.0    9.0   10.0 \n```\n\nlet x(t) = value_t be the value of the time series at time index t. Then, the output vector for time index t will be :code:[x(t - size + 1), …, x(t - 1), x(t)].\n\ninput:\n\n```python\n                        value\ntime                         \n2014-04-01 00:05:00 -2.276619\n2014-04-01 00:10:00  2.078546\n2014-04-01 00:15:00 -3.026022\n2014-04-01 00:20:00 -0.206417\n2014-04-01 00:25:00  1.848682\n...                       ...\n2014-04-03 02:00:00  1.037752\n2014-04-03 02:05:00  0.428547\n2014-04-03 02:10:00 -0.726401\n2014-04-03 02:15:00 -1.357636\n2014-04-03 02:20:00  1.020096 \n```\n\noutput: `(size = {int} 2 stride = {int} 1)`\n\n```python\n                      value_0   value_1\ntime                                   \n2014-04-01 00:05:00 -2.276619 -2.276619\n2014-04-01 00:10:00 -2.276619  2.078546\n2014-04-01 00:15:00  2.078546 -3.026022\n2014-04-01 00:20:00 -3.026022 -0.206417\n2014-04-01 00:25:00 -0.206417  1.848682\n...                       ...       ...\n2014-04-03 02:00:00  0.869541  1.037752\n2014-04-03 02:05:00  1.037752  0.428547\n2014-04-03 02:10:00  0.428547 -0.726401\n2014-04-03 02:15:00 -0.726401 -1.357636\n2014-04-03 02:20:00 -1.357636  1.020096\n\n[604 rows x 2 columns]\n```\n\n#### `.TRAIN`\n\nDose not do anything.\n\n```python\ndef train(self, time_series: TimeSeries):\n   pass\n```\n\n#### `__call__`\n\n```python\nLeft-pad the time series with the first value \n```\n\n`size=3 and stride=2`\n\n```\nt=4,\nt-3+1=2\n[2,3,4]\n\nt=5\n[3,4,5]\n```\n\n#### Shingle()\n\n```python\nfrom merlion.transform.resample import Shingle\nfrom pysearchlib.utils.util_merlion import generate_random_timeseries\n\ndatetime = generate_random_timeseries()\nprint(\"=============== source =============\")\nprint(datetime)\n\nsle = Shingle()\nsle.train(datetime)\n\nprint(\"=============== Target =============\")\nprint(sle(datetime)) \n```\n\noutput:\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0\ntime                      \n2022-01-01 00:00:00    1.0\n2022-01-04 10:40:00    2.0\n2022-01-07 21:20:00    3.0\n2022-01-11 08:00:00    4.0\n2022-01-14 18:40:00    5.0\n2022-01-18 05:20:00    6.0\n2022-01-21 16:00:00    7.0\n2022-01-25 02:40:00    8.0\n2022-01-28 13:20:00    9.0\n2022-02-01 00:00:00   10.0 \n```\n\n#### Shingle(size=2)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1\ntime                             \n2022-01-01 00:00:00    1.0    1.0\n2022-01-04 10:40:00    1.0    2.0\n2022-01-07 21:20:00    2.0    3.0\n2022-01-11 08:00:00    3.0    4.0\n2022-01-14 18:40:00    4.0    5.0\n2022-01-18 05:20:00    5.0    6.0\n2022-01-21 16:00:00    6.0    7.0\n2022-01-25 02:40:00    7.0    8.0\n2022-01-28 13:20:00    8.0    9.0\n2022-02-01 00:00:00    9.0   10.0\n \n```\n\n#### Shingle(size=3)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2\ntime                                    \n2022-01-01 00:00:00    1.0    1.0    1.0\n2022-01-04 10:40:00    1.0    1.0    2.0\n2022-01-07 21:20:00    1.0    2.0    3.0\n2022-01-11 08:00:00    2.0    3.0    4.0\n2022-01-14 18:40:00    3.0    4.0    5.0\n2022-01-18 05:20:00    4.0    5.0    6.0\n2022-01-21 16:00:00    5.0    6.0    7.0\n2022-01-25 02:40:00    6.0    7.0    8.0\n2022-01-28 13:20:00    7.0    8.0    9.0\n2022-02-01 00:00:00    8.0    9.0   10.0 \n```\n\n#### Shingle(size=5)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4\ntime                                                  \n2022-01-01 00:00:00    1.0    1.0    1.0    1.0    1.0\n2022-01-04 10:40:00    1.0    1.0    1.0    1.0    2.0\n2022-01-07 21:20:00    1.0    1.0    1.0    2.0    3.0\n2022-01-11 08:00:00    1.0    1.0    2.0    3.0    4.0\n2022-01-14 18:40:00    1.0    2.0    3.0    4.0    5.0\n2022-01-18 05:20:00    2.0    3.0    4.0    5.0    6.0\n2022-01-21 16:00:00    3.0    4.0    5.0    6.0    7.0\n2022-01-25 02:40:00    4.0    5.0    6.0    7.0    8.0\n2022-01-28 13:20:00    5.0    6.0    7.0    8.0    9.0\n2022-02-01 00:00:00    6.0    7.0    8.0    9.0   10.0\n```\n\n#### Shingle(size=5, stride=1)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4\ntime                                                  \n2022-01-01 00:00:00    1.0    1.0    1.0    1.0    1.0\n2022-01-04 10:40:00    1.0    1.0    1.0    1.0    2.0\n2022-01-07 21:20:00    1.0    1.0    1.0    2.0    3.0\n2022-01-11 08:00:00    1.0    1.0    2.0    3.0    4.0\n2022-01-14 18:40:00    1.0    2.0    3.0    4.0    5.0\n2022-01-18 05:20:00    2.0    3.0    4.0    5.0    6.0\n2022-01-21 16:00:00    3.0    4.0    5.0    6.0    7.0\n2022-01-25 02:40:00    4.0    5.0    6.0    7.0    8.0\n2022-01-28 13:20:00    5.0    6.0    7.0    8.0    9.0\n2022-02-01 00:00:00    6.0    7.0    8.0    9.0   10.0 \n```\n\n#### Shingle(size=5, stride=2)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4\ntime                                                  \n2022-01-04 10:40:00    1.0    1.0    1.0    1.0    2.0\n2022-01-11 08:00:00    1.0    1.0    2.0    3.0    4.0\n2022-01-18 05:20:00    2.0    3.0    4.0    5.0    6.0\n2022-01-25 02:40:00    4.0    5.0    6.0    7.0    8.0\n2022-02-01 00:00:00    6.0    7.0    8.0    9.0   10.0 \n```\n\n#### Shingle(size=5, stride=4)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4\ntime                                                  \n2022-01-04 10:40:00    1.0    1.0    1.0    1.0    2.0\n2022-01-18 05:20:00    2.0    3.0    4.0    5.0    6.0\n2022-02-01 00:00:00    6.0    7.0    8.0    9.0   10.0 \n```\n\n#### Shingle(size=2, stride=2)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1\ntime                             \n2022-01-04 10:40:00    1.0    2.0\n2022-01-11 08:00:00    3.0    4.0\n2022-01-18 05:20:00    5.0    6.0\n2022-01-25 02:40:00    7.0    8.0\n2022-02-01 00:00:00    9.0   10.0 \n```\n\n## 如何添加 pre_process\n\n如下的 `TransformSequence` 序列中, 数据处理步骤变为:\n\n1. 先归一化数据 `MeanVarNormalize()`\n2. 生成窗口数据 `Shingle(size=32)` 生成窗口大小为 32 的窗口数据, 参考 <a href='#Shingle(size=5)'>#Shingle(size=5)</a>\n\n```python\n# Import a data processing transform\ncfg = IsolationForestConfig(n_estimators=300,\n                            transform=TransformSequence([\n                                MeanVarNormalize(),\n                                Shingle(size=32)])\n                            )\nmodel = IsolationForest(cfg)\n```\n\n## MeanVarNormalize 执行过程\n1. 调用 `train` 获取数据 均值和方差\n2. 通过 `f(data)` 完成数据处理.\n![static/attachment/Pasted image 20221220100832.png](/images/ba590021c2ca65431ff473391333a0f61f54c540.png)\n![static/attachment/Pasted image 20221220101004.png](/images/4cd5f804d2c895b49a888d419c0ed3b12d63e9d3.png)\n\n## DetectorConfig\n\n![static/attachment/Pasted image 20221220104515.png](/images/e779b3094a0f30317b99da6f3c52741ec9ebcb9d.png)\n\n## what the predict value in accumulate_tsad_score ?\n\nQ: I want to know whether the predict is a score(float between 0 and 1) or a label(0, or 1)\n\nA: From the source code, it is a label(0, or 1). In other words, the value is one of 0, 1.\n\n- source code: `predict.np_values.astype(bool)`\n\n![static/attachment/Pasted image 20221220165551.png](/images/e27c6193118af9b3adffe8d3dc176ab6935175b3.png)\n\n### example: max_delay_sec=4\n\n```python\nimport pprint\nfrom merlion.evaluate.anomaly import accumulate_tsad_score, ScoreType\nfrom pysearchlib.utils.util_merlion import generate_timeseries_from_list\n\nground_truth = \\\n    [0, 0, 1, 1, 1, 1, 0, 0, 0]\npredict = \\\n    [0, 0, 0, 0, 0, 1, 0, 0, 0]\nats = accumulate_tsad_score(\n    ground_truth=generate_timeseries_from_list(ground_truth),\n    predict=generate_timeseries_from_list(predict),\n    max_delay_sec=4\n)\npprint.pprint({\n    \"Pointwise Precision\": ats.precision(score_type=ScoreType.Pointwise),\n    \"Pointwise Recall\": ats.recall(score_type=ScoreType.Pointwise),\n    \"Pointwise F1\": ats.f1(score_type=ScoreType.Pointwise),\n    \"PointAdjusted Precision\": ats.precision(score_type=ScoreType.PointAdjusted),\n    \"PointAdjusted Recall\": ats.recall(score_type=ScoreType.PointAdjusted),\n    \"PointAdjusted F1\": ats.f1(score_type=ScoreType.PointAdjusted),\n    \"RevisedPointAdjusted Precision\": ats.precision(score_type=ScoreType.RevisedPointAdjusted),\n    \"RevisedPointAdjusted Recall\": ats.recall(score_type=ScoreType.RevisedPointAdjusted),\n    \"RevisedPointAdjusted F1\": ats.f1(score_type=ScoreType.RevisedPointAdjusted),\n\n})\n\n \n```\n\noutput:\n\n```python\n{'PointAdjusted F1': 1.0,\n 'PointAdjusted Precision': 1.0,\n 'PointAdjusted Recall': 1.0,\n 'Pointwise F1': 0.4,\n 'Pointwise Precision': 1.0,\n 'Pointwise Recall': 0.25,\n 'RevisedPointAdjusted F1': 1.0,\n 'RevisedPointAdjusted Precision': 1.0,\n 'RevisedPointAdjusted Recall': 1.0} \n```\n\n### example: max_delay_sec=3 or 2 or 1\n\n```python\n{'PointAdjusted F1': 0.0,\n 'PointAdjusted Precision': 0.0,\n 'PointAdjusted Recall': 0.0,\n 'Pointwise F1': 0.0,\n 'Pointwise Precision': 0.0,\n 'Pointwise Recall': 0.0,\n 'RevisedPointAdjusted F1': 0.0,\n 'RevisedPointAdjusted Precision': 0.0,\n 'RevisedPointAdjusted Recall': 0.0\n }\n\n```\n\n### example: max_delay_sec=None or 0\n\n```python\n{'PointAdjusted F1': 1.0,\n 'PointAdjusted Precision': 1.0,\n 'PointAdjusted Recall': 1.0,\n 'Pointwise F1': 0.4,\n 'Pointwise Precision': 1.0,\n 'Pointwise Recall': 0.25,\n 'RevisedPointAdjusted F1': 1.0,\n 'RevisedPointAdjusted Precision': 1.0,\n 'RevisedPointAdjusted Recall': 1.0\n } \n```\n\n## Best affiliation quantile 是什么?\n\n在 `predict = score > np.percentile(quantile)` 中, quantile 取多少时, predict 获得的结果 (如 F1) 最好?\n\n## 修改后的结果\n\n```python\n/Users/sunwu/miniforge3/envs/sw_torch_1_10/bin/python /Users/sunwu/SW-Research/COCA-main/coca_debug.py \n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 146255\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 149130\nBest affiliation F1 score: {'precision': 0.9991141275746687, 'recall': 0.7897834771523201, 'individual_precision_probabilities': [1.0, 0.9983640081799591, nan, 1.0, 0.9987096774193549, nan, nan, 1.0, 1.0, 0.9959893048128342, 1.0, 1.0, 0.9986893840104849, 0.9976171564733916, 1.0], 'individual_recall_probabilities': [0.8573256456835953, 0.9995910020449897, 0, 0.999237933954276, 0.9995698924731182, 0, 0, 0.9995485327313769, 0.994773519163763, 0.9991492464754497, 0.9996639784946236, 0.9997589780670041, 0.9997219905476786, 0.9984114376489277, 1.0], 'individual_precision_distances': [0.0, 0.16666666666666666, nan, 0.0, 0.25, nan, nan, 0.0, 0.0, 0.0625, 0.0, 0.0, 0.0625, 0.5, 0.0], 'individual_recall_distances': [41.054545454545455, 0.16666666666666666, inf, 0.225, 0.25, inf, inf, 0.25, 2.25, 0.1590909090909091, 0.25, 0.25, 0.1590909090909091, 1.0, 0.0]}\nBest affiliation quantile: 0.2520204081632653\nBest revised point adjusted anomaly quantile: 0.23977551020408164\nBest affiliation F1 score: {'precision': 0.8333357886680556, 'recall': 0.7724293430234433, 'individual_precision_probabilities': [0.6105147261216626, 0.9862155388471178, 0.9976095617529881, 0.9987376393856512, nan, 1.0, nan, nan, 0.9984779299847792, 0.9273927392739273, 0.9982847341337907, 0.9968085106382979, 0.8834399431414357, nan, 0.9884337349397591, nan, 0.9989203195854027, 0.9378486055776891, 0.8833289896620624, 0.5492788461538463, 0.9656746031746032, 0.9627329192546583, nan, 0.1288445552784705, 0.7963810769566165, 0.6262121743194298, 0.9969696969696971, nan, 1.0, 0.5115157562151824, 0.5363573883161511, 0.8246268656716417, 0.961038961038961, 0.5798104956268222, 0.9954128440366973, 0.9805084745762711, 0.5714285714285715, 0.3541666666666667, 1.0, nan, 0.976701410177805, 0.9266450916936354, nan, 0.7343277565007055, 0.9352179034157833, 0.8568421052631578, nan, 0.6729717199814558, 0.6813521406822842, 0.8780609695152424, 0.877455219271155, 0.49257876089246383, 0.9967689822294022, 0.6989337822671156, 0.8369019296854349, 1.0, nan, 0.9147130582369788, 1.0, 0.926131850675139, 0.9953175299970733, 0.5522321428571428], 'individual_recall_probabilities': [0.9892871888639849, 0.9969298245614034, 0.998406374501992, 0.9991584262571008, 0, 0.9818840579710145, 0, 0, 0.9989852866565195, 0.9390470297029704, 0.9996361557253496, 0.9985815602836879, 0.9995938673977053, 0, 0.992552026286966, 0, 0.9997840639170805, 0.9850137909898866, 0.9993602956855497, 0.9997996794871796, 0.988095238095238, 0.9881422924901186, 0, 0.12967581047381538, 0.9960758665794637, 0.9996494917630565, 0.9992424242424242, 0, 0.9828132066938037, 0.9998752806186082, 0.9994845360824742, 0.9371643204432384, 0.9896694214876033, 0.6016763848396501, 0.9986238532110092, 0.9993220338983051, 0.7142857142857143, 0.5902777777777778, 0.9006410256410257, 0, 0.9779276517473943, 0.9902912621359224, 0, 0.7347309010280185, 0.9834501987632508, 0.9484210526315788, 0, 0.9997681965693093, 0.9998912570682905, 0.9370314842578711, 0.9998034701555393, 0.9998563631140476, 0.9973074851911686, 0.707351290684624, 0.9994713190589479, 0.9997750787224471, 0, 0.9997878434284502, 0.9997306941358648, 0.9265289912629071, 0.9997366110623354, 0.9970238095238095], 'individual_precision_distances': [686.0, 0.07142857142857142, 0.5, 0.5, nan, 0.0, nan, nan, 0.25, 2.0, 0.0625, 0.75, 130.66666666666666, nan, 0.1, nan, 0.75, 12.416666666666666, 143.05555555555554, 561.1875, 24.0, 0.07142857142857142, nan, 416.5, 272.5, 529.7083333333334, 0.16666666666666666, nan, 0.0, 927.4166666666666, 798.0, 52.7, 0.07142857142857142, 547.0, 2.0833333333333335, 1.5394736842105263, 0.75, 2.5, 0.0, nan, 2.5, 0.6666666666666666, nan, 328.5, 75.83333333333333, 1.4, nan, 637.2, 535.5714285714286, 20.166666666666668, 191.75, 783.4166666666666, 1.5, 535.0, 307.5, 0.0, nan, 102.31818181818181, 0.0, 55.5, 0.2222222222222222, 475.0], 'individual_recall_distances': [10.0, 0.175, 1.0, 1.0, inf, 0.4166666666666667, inf, inf, 0.6666666666666666, 6.15625, 0.1590909090909091, 0.6666666666666666, 0.3333333333333333, inf, 0.7727272727272727, inf, 0.25, 4.701923076923077, 0.4090909090909091, 0.25, 7.5, 0.2727272727272727, inf, 417.5, 3.0, 0.25, 0.16666666666666666, inf, 0.8636363636363636, 0.125, 0.625, 19.5, 0.22727272727272727, 520.0, 1.125, 0.1, 1.5, 2.5, 0.3333333333333333, inf, 9.0, 0.25, inf, 329.0, 15.0, 1.225, inf, 0.25, 0.125, 10.5, 0.1590909090909091, 0.125, 2.5, 521.5, 1.0, 0.25, inf, 0.13636363636363635, 0.3333333333333333, 66.0, 0.075, 2.5]}\nBest affiliation quantile: 0.301\nBest revised point adjusted anomaly quantile: 0.0683469387755102\nValid affiliation precision: 0.9991\nValid affiliation recall: 0.7898\n\nValid RevisedPointAdjusted F1: 0.7097  \nValid RevisedPointAdjusted precision: 0.6875 \nValid RevisedPointAdjusted recall: 0.7333\n\n################## Evaluate  is Done ! #########################\nTest affiliation precision: 0.8333 \nTest affiliation recall: 0.7724\n\nTest RevisedPointAdjusted F1: 0.4259\nTest RevisedPointAdjusted precision: 0.5000\nTest RevisedPointAdjusted recall: 0.3710\n\n================================================================\n==========Summary Metrics for multiple\n================================================================\n{'accuracy': 0.0}\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\naffiliation metrics:\n Precision: 0.83334\n Recall:    0.77243\nf1:        0.80173\nRevised-point-adjusted metrics:\n F1 score:  0.42593\n Precision: 0.50000\n Recall:    0.37097\nPoint-adjusted metrics:\n F1 score:  0.43243\n Precision: 0.86857\n Recall:    0.28788\nNAB Scores:\n NAB Score (balanced):       0.32826\n NAB Score (high precision): 0.32342\n NAB Score (high recall):    0.34250\nseed: 2\n================================================================\n==========Configuration of the model\n================================================================\ndataset:IOpsCompetition\ninput_channels:1\nkernel_size:4\nstride:1\nfinal_out_channels:32\nhidden_size:64\nnum_layers:3\nproject_channels:20\ndropout:0.45\nfeatures_len:6\nwindow_size:16\ntime_step:2\nnum_epoch:5\nfreeze_length_epoch:2\nchange_center_epoch:1\ncenter_eps:0.1\nomega1:1\nomega2:0.1\nbeta1:0.9\nbeta2:0.99\nlr:0.0001\ndrop_last:False\nbatch_size:512\nnu:0.001\ndetect_nu:0.0015\nthreshold_determine:floating\nobjective:soft-boundary\nloss_type:distance\naugmentation:<conf.coca.IOpsCompetition_Configs.augmentations object at 0x140958190>\n\nProcess finished with exit code 0\n \n```\n\n### 修改好的实验代码\n\n```python\n/Users/sunwu/miniforge3/envs/sw_torch_1_10/bin/python /Users/sunwu/SW-Research/COCA-main/coca_debug.py \n<frozen importlib._bootstrap>:219: RuntimeWarning: scipy._lib.messagestream.MessageStream size changed, may indicate binary incompatibility. Expected 56 from C header, got 64 from PyObject\nplotly not installed, so plotly visualizations will not work. Try installing Merlion with optional dependencies using `pip install salesforce-merlion[plot]` or `pip install `salesforce-merlion[all]`.\n\n================================================================\n========== \t train_data.shape:146255,test_data.shape:149130\n================================================================\nTraining started ....\n\nEpoch : 1\nTrain Loss     : 396.1572\t | \nValid Loss     : 115.7170\t  | \nTest Loss     : 109.9178\t  | \n\nEpoch : 2\nTrain Loss     : 1.4987\t | \nValid Loss     : 0.5217\t  | \nTest Loss     : 0.5218\t  | \n\nEpoch : 3\nTrain Loss     : 0.5671\t | \nValid Loss     : 0.4676\t  | \nTest Loss     : 0.4677\t  | \n\nEpoch : 4\nTrain Loss     : 0.4959\t | \nValid Loss     : 0.3880\t  | \nTest Loss     : 0.3884\t  | \n\nEpoch : 5\nTrain Loss     : 0.4482\t | \nValid Loss     : 0.3708\t  | \nTest Loss     : 0.3710\t  | \n\n################## Training is Done! #########################\n\n################## Start to evaluate! #########################\n\n================================================================\n========== \t Calculating validation metrics\n================================================================\nBest affiliation quantile: 0.2520204081632653\nBest affiliation  metric: {'precision': 0.9991141275746687, 'recall': 0.7897834771523201}\nBest revised point adjusted anomaly quantile: 0.23977551020408164\nBest revised point adjusted: {'f1': 0.7096774193548386, 'precision': 0.6875, 'recall': 0.7333333333333333}\n\n================================================================\n========== \t Calculating testing metrics\n================================================================\nBest affiliation quantile: 0.301\nBest affiliation  metric: {'precision': 0.8333357886680556, 'recall': 0.7724293430234433}\nBest revised point adjusted anomaly quantile: 0.0683469387755102\nBest revised point adjusted: {'f1': 0.42592592592592593, 'precision': 0.5, 'recall': 0.3709677419354839}\n\n================================================================\n========== \t Validation metrics\n================================================================\nValid affiliation precision: 0.9991\nValid affiliation recall: 0.7898\n\nValid RevisedPointAdjusted F1: 0.7097  \nValid RevisedPointAdjusted precision: 0.6875 \nValid RevisedPointAdjusted recall: 0.7333\n\n================================================================\n========== \t Testing metric\n================================================================\nTest affiliation precision: 0.8333 \nTest affiliation recall: 0.7724\n\nTest RevisedPointAdjusted F1: 0.4259\nTest RevisedPointAdjusted precision: 0.5000\nTest RevisedPointAdjusted recall: 0.3710\n\n================================================================\n========== \t Summary Metrics for multiple\n================================================================\n{'accuracy': 0.0}\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\naffiliation metrics:\n f1:        0.80173\nPrecision: 0.83334\n Recall:    0.77243\nRevised-point-adjusted metrics:\n\n F1 score:  0.42593\n Precision: 0.50000\n Recall:    0.37097\nPoint-adjusted metrics:\n\n F1 score:  0.43243\n Precision: 0.86857\n Recall:    0.28788\nNAB Scores:\n\n NAB Score (balanced):       0.32826\n NAB Score (high precision): 0.32342\n NAB Score (high recall):    0.34250\n\n================================================================\n========== \t Configuration of the model\n================================================================\ndataset:IOpsCompetition\ninput_channels:1\nkernel_size:4\nstride:1\nfinal_out_channels:32\nhidden_size:64\nnum_layers:3\nproject_channels:20\ndropout:0.45\nfeatures_len:6\nwindow_size:16\ntime_step:2\nnum_epoch:5\nfreeze_length_epoch:2\nchange_center_epoch:1\ncenter_eps:0.1\nomega1:1\nomega2:0.1\nbeta1:0.9\nbeta2:0.99\nlr:0.0001\ndrop_last:False\nbatch_size:512\nnu:0.001\ndetect_nu:0.0015\nthreshold_determine:floating\nobjective:soft-boundary\nloss_type:distance\naugmentation:<conf.coca.IOpsCompetition_Configs.augmentations object at 0x15f7583d0>\nTraining time: 218.982158\n\nProcess finished with exit code 0\n \n```\n\n`anomaly_predict.py`\n\n```python\nimport pprint\n\nfrom affiliation.generics import convert_vector_to_events\nfrom affiliation.metrics import pr_from_events\nimport numpy as np\nimport pandas as pd\nfrom merlion.evaluate.anomaly import accumulate_tsad_score, ScoreType\nfrom merlion.utils import TimeSeries\nfrom models.reasonable_metric import tsad_reasonable\nfrom affiliation.generics import convert_vector_to_events\nfrom affiliation.metrics import pr_from_events\n\ndef ad_predict(target, scores, mode, nu):\n    if_aff = np.count_nonzero(target)\n    if if_aff != 0:\n        events_gt = convert_vector_to_events(target)\n    target = TimeSeries.from_pd(pd.DataFrame(target))\n    scores = np.array(scores)\n    # standardization\n    mean = np.mean(scores)\n    std = np.std(scores)\n    if std != 0:\n        scores = (scores - mean) / std\n\n    # For UCR dataset, there is only one anomaly period in the test set.\n    if mode == 'one-anomaly':\n        mount = 0\n        threshold = np.max(scores, axis=0)\n        max_number = np.sum(scores == threshold)\n        predict = np.zeros(len(scores))\n        if max_number <= 10:\n            for index, r2 in enumerate(scores):\n                if r2.item() >= threshold:\n                    predict[index] = 1\n                    mount += 1\n\n        if if_aff != 0:\n            events_pred = convert_vector_to_events(predict)\n            Trange = (0, len(predict))\n            affiliation_max = pr_from_events(events_pred, events_gt, Trange)\n        else:\n            affiliation_max = dict()\n            affiliation_max[\"precision\"] = 0\n            affiliation_max[\"recall\"] = 0\n\n        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n    # Fixed threshold\n    elif mode == 'fix':\n        detect_nu = 100 * (1 - nu)\n        threshold = np.percentile(scores, detect_nu)\n        mount = 0\n        predict = np.zeros(len(scores))\n        for index, r2 in enumerate(scores):\n            if r2.item() > threshold:\n                predict[index] = 1\n                mount += 1\n        if if_aff != 0:\n            events_pred = convert_vector_to_events(predict)\n            Trange = (0, len(predict))\n            affiliation_max = pr_from_events(events_pred, events_gt, Trange)\n        else:\n            affiliation_max = dict()\n            affiliation_max[\"precision\"] = 0\n            affiliation_max[\"recall\"] = 0\n        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n    # Floating threshold\n    else:\n        # Set the anomaly  percentile to [0.001, 0.3] (100 - np.max(nu_list)=99.7 )\n\n        # To reduce the quantity to calculate\n        # nu_list = np.arange(1, 301) / 1e3\n        nu_list = np.linspace(1, 301, 50) / 1e3  # nu_list is in [0.001,0.30]\n        f1_revised_point_adjusted_list, accumulate_tsad_score_list, f1_affiliation_list, affiliation_metric_list = [], [], [], []\n        for detect_nu in nu_list:\n            threshold = np.percentile(scores, 100 - detect_nu)\n            predict = np.where(scores > threshold, 1, 0)\n            dic = dict()\n            if if_aff != 0:\n                events_pred = convert_vector_to_events(predict)\n                Trange = (0, len(predict))\n                affiliation_metric = pr_from_events(events_pred, events_gt, Trange)\n                dic[\"precision\"] = affiliation_metric['precision']\n                dic[\"recall\"] = affiliation_metric['recall']\n                affiliation_f1 = 2 * (dic[\"precision\"] * dic[\"recall\"]) / (dic[\"precision\"] + dic[\"recall\"])\n                f1_affiliation_list.append(affiliation_f1)\n            else:\n\n                dic[\"precision\"] = 0\n                dic[\"recall\"] = 0\n                f1_affiliation_list.append(0)\n            affiliation_metric_list.append(dic)\n\n            predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n\n            # 这个对象可以求很多的score, such as PA, PWA, RPA\n            # metric = {\n            #     \"Pointwise Precision\": ats.precision(score_type=ScoreType.Pointwise),\n            #     \"Pointwise Recall\": ats.recall(score_type=ScoreType.Pointwise),\n            #     \"Pointwise F1\": ats.f1(score_type=ScoreType.Pointwise),\n            #     \"PointAdjusted Precision\": ats.precision(score_type=ScoreType.PointAdjusted),\n            #     \"PointAdjusted Recall\": ats.recall(score_type=ScoreType.PointAdjusted),\n            #     \"PointAdjusted F1\": ats.f1(score_type=ScoreType.PointAdjusted),\n            #     \"RevisedPointAdjusted Precision\": ats.precision(score_type=ScoreType.RevisedPointAdjusted),\n            #     \"RevisedPointAdjusted Recall\": ats.recall(score_type=ScoreType.RevisedPointAdjusted),\n            #     \"RevisedPointAdjusted F1\": ats.f1(score_type=ScoreType.RevisedPointAdjusted),\n            #\n            # }\n            ats = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n            f1_revised_point_adjusted = ats.f1(ScoreType.RevisedPointAdjusted)\n            f1_revised_point_adjusted_list.append(f1_revised_point_adjusted)\n            accumulate_tsad_score_list.append(ats)\n\n        # Find the maximum affiliation F1 score\n        index_max_f1_affiliation = np.argmax(f1_affiliation_list, axis=0)\n        affiliation_max = affiliation_metric_list[index_max_f1_affiliation]\n\n        # Find the maximum affiliation percentile(such as  2.26%)\n        nu_max1 = nu_list[index_max_f1_affiliation]\n        print(\"Best affiliation quantile:\", nu_max1)\n        print(f\"Best affiliation  metric: {affiliation_max}\")\n\n        # Find the maximum RevisedPointAdjusted f1\n        index_max_f1_RPA = np.argmax(f1_revised_point_adjusted_list, axis=0)\n        score_max = accumulate_tsad_score_list[index_max_f1_RPA]\n        nu_max2 = nu_list[index_max_f1_RPA]\n        print('Best revised point adjusted anomaly quantile:', nu_max2)\n        revised_point_adjust = {\n            \"f1\": score_max.f1(score_type=ScoreType.RevisedPointAdjusted),\n            \"precision\": score_max.precision(score_type=ScoreType.RevisedPointAdjusted),\n            \"recall\": score_max.recall(score_type=ScoreType.RevisedPointAdjusted)\n        }\n        print(f\"Best revised point adjusted: {revised_point_adjust}\")\n\n        threshold = np.percentile(scores, 100 - nu_max1)\n        predict = np.where(scores > threshold, 1, 0)\n    return affiliation_max, score_max, predict\n    # affiliation_max={'precision': 0, 'recall': 0},\n    # score max: <merlion.evaluate.anomaly.TSADScoreAccumulator>\n    # predict.shape=59, the best prediction where the affiliation f1 is maximal. Predict is\n    #   not a score, it is a label which value is one of 0 or 1.\n    #   predict = np.where(scores > threshold, 1, 0)\n\ndef ad_predict_back(target, scores, mode, nu):\n    if_aff = np.count_nonzero(target)\n    if if_aff != 0:\n        events_gt = convert_vector_to_events(target)\n    target = TimeSeries.from_pd(pd.DataFrame(target))\n    scores = np.array(scores)\n    # standardization\n    mean = np.mean(scores)\n    std = np.std(scores)\n    if std != 0:\n        scores = (scores - mean) / std\n\n    # For UCR dataset, there is only one anomaly period in the test set.\n    if mode == 'one-anomaly':\n        mount = 0\n        threshold = np.max(scores, axis=0)\n        max_number = np.sum(scores == threshold)\n        predict = np.zeros(len(scores))\n        if max_number <= 10:\n            for index, r2 in enumerate(scores):\n                if r2.item() >= threshold:\n                    predict[index] = 1\n                    mount += 1\n\n        if if_aff != 0:\n            events_pred = convert_vector_to_events(predict)\n            Trange = (0, len(predict))\n            affiliation_max = pr_from_events(events_pred, events_gt, Trange)\n        else:\n            affiliation_max = dict()\n            affiliation_max[\"precision\"] = 0\n            affiliation_max[\"recall\"] = 0\n\n        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n    # Fixed threshold\n    elif mode == 'fix':\n        detect_nu = 100 * (1 - nu)\n        threshold = np.percentile(scores, detect_nu)\n        mount = 0\n        predict = np.zeros(len(scores))\n        for index, r2 in enumerate(scores):\n            if r2.item() > threshold:\n                predict[index] = 1\n                mount += 1\n        if if_aff != 0:\n            events_pred = convert_vector_to_events(predict)\n            Trange = (0, len(predict))\n            affiliation_max = pr_from_events(events_pred, events_gt, Trange)\n        else:\n            affiliation_max = dict()\n            affiliation_max[\"precision\"] = 0\n            affiliation_max[\"recall\"] = 0\n        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n    # Floating threshold\n    else:\n        nu_list = np.arange(1, 301) / 1e3\n        f1_list, score_list, f1_list2, affiliation_list = [], [], [], []\n        for detect_nu in nu_list:\n            threshold = np.percentile(scores, 100 - detect_nu)\n            mount = 0\n            predict = np.zeros(len(scores))\n            for index, r2 in enumerate(scores):\n                if r2.item() > threshold:\n                    predict[index] = 1\n                    mount += 1\n            if if_aff != 0:\n                events_pred = convert_vector_to_events(predict)\n                Trange = (0, len(predict))\n                dic = pr_from_events(events_pred, events_gt, Trange)\n                affiliation_f1 = 2 * (dic[\"precision\"] * dic[\"recall\"]) / (dic[\"precision\"] + dic[\"recall\"])\n                f1_list2.append(affiliation_f1)\n            else:\n                dic = dict()\n                dic[\"precision\"] = 0\n                dic[\"recall\"] = 0\n                f1_list2.append(0)\n            affiliation_list.append(dic)\n            predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n            score = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n            f1 = score.f1(ScoreType.RevisedPointAdjusted)\n            f1_list.append(f1)\n            score_list.append(score)\n        index_max1 = np.argmax(f1_list2, axis=0)\n        affiliation_max = affiliation_list[index_max1]\n        nu_max1 = nu_list[index_max1]\n        print(\"Best affiliation quantile:\", nu_max1)\n\n        index_max2 = np.argmax(f1_list, axis=0)\n        score_max = score_list[index_max2]\n        nu_max2 = nu_list[index_max2]\n        print('Best anomaly quantile:', nu_max2)\n\n        threshold = np.percentile(scores, 100 - nu_max1)\n        mount = 0\n        predict = np.zeros(len(scores))\n        for index, r2 in enumerate(scores):\n            if r2.item() > threshold:\n                predict[index] = 1\n                mount += 1\n    return affiliation_max, score_max, predict\n \n```\n\n`coca_debug.py`\n\n```python\nimport argparse\nimport os\nfrom datetime import datetime\n\nimport numpy as np\nimport torch\nfrom merlion.evaluate.anomaly import TSADScoreAccumulator as ScoreAcc, ScoreType\nfrom merlion.utils import TimeSeries\n\nfrom conf.coca.IOpsCompetition_Configs import Config\nfrom dataloader import data_generator4\nfrom models.COCA.coca_network.model import base_Model\nfrom models.COCA.coca_trainer.trainer import Trainer\nfrom models.reasonable_metric import reasonable_accumulator\nfrom pysearchlib.utils.util_print import print_separator\nfrom pysearchlib.utils.util_pytorch import enable_pytorch_reproduciable\nfrom ts_datasets.ts_datasets.anomaly import NAB, IOpsCompetition\nfrom utils import print_object\n\nstart_time = datetime.now()\nparser = argparse.ArgumentParser()\nhome_dir = os.getcwd()\nparser.add_argument('--experiment_description', default='Exp1', type=str,\n                    help='Experiment Description')\nparser.add_argument('--run_description', default='run1', type=str,\n                    help='Experiment Description')\nparser.add_argument('--visualization', default=True, type=bool,\n                    help='Visualize')\nparser.add_argument('--seed', default=2, type=int,\n                    help='seed value')\nparser.add_argument('--weight_decay', default=5e-4, type=float,\n                    help='Weight decay (L2 penalty) hyperparameter for COCA objective')\nparser.add_argument('--selected_dataset', default='IOpsCompetition', type=str,\n                    help='Dataset of choice: NAB, IOpsCompetition, SMAP, UCR')\nparser.add_argument('--logs_save_dir', default='experiments_logs', type=str,\n                    help='saving directory')\nparser.add_argument('--device', default='cpu', type=str,\n                    help='cpu or cuda')\nparser.add_argument('--home_path', default=home_dir, type=str,\n                    help='Project home directory')\nargs = parser.parse_args()\n\n# device = \"cuda\" if torch.cuda.is_available() else \"cpu\"\ndevice = torch.device(args.device)\nexperiment_description = args.experiment_description\ndata_type = args.selected_dataset\nmethod = 'COCA'\nrun_description = args.run_description\nselected_dataset = args.selected_dataset\nweight_decay = args.weight_decay\nvisualization = args.visualization\n\nlogs_save_dir = args.logs_save_dir\nos.makedirs(logs_save_dir, exist_ok=True)\n\nexec(f'from conf.coca.{data_type}_Configs import Config as Configs')\nconfigs = Config()\n\n# ##### fix random seeds for reproducibility ########\nSEED = args.seed\n\nexperiment_log_dir = os.path.join(logs_save_dir, experiment_description, run_description, f\"_seed_{SEED}\")\nos.makedirs(experiment_log_dir, exist_ok=True)\n\nlog_dir = experiment_log_dir\n# Load datasets\n\n# Get the lead & lag time for the dataset\n# Aggregate statistics from full dataset\nall_anomaly_num, all_test_score, all_test_scores_reasonable = [], [], []\nall_test_aff_score, all_test_aff_precision, all_test_aff_recall = [], [], []\n\nenable_pytorch_reproduciable()\ndt = IOpsCompetition()\n# dt = NAB()\ntime_series, meta_data = dt[0]\n\ntrain_data = TimeSeries.from_pd(time_series[meta_data.trainval])\ntest_data = TimeSeries.from_pd(time_series[~meta_data.trainval])\ntrain_labels = TimeSeries.from_pd(meta_data.anomaly[meta_data.trainval])\ntest_labels = TimeSeries.from_pd(meta_data.anomaly[~meta_data.trainval])\n\nprint_separator(f\"train_data.shape:{len(train_data)},test_data.shape:{len(test_data)}\")\n\n# Load Model\nmodel = base_Model(configs, device).to(device)\ntrain_dl, val_dl, test_dl, test_anomaly_window_num = data_generator4(train_data, test_data, train_labels,\n                                                                     test_labels, configs)\n\nmodel_optimizer = torch.optim.Adam(model.parameters(), lr=configs.lr, betas=(configs.beta1, configs.beta2),\n                                   weight_decay=weight_decay)\n\n# Trainer\nidx = 0\ntest_score_origin, test_aff, test_score, score_reasonable, predict = Trainer(model, model_optimizer, train_dl,\n                                                                             val_dl, test_dl, device,\n                                                                             configs, idx)\nprint_separator(\"Summary Metrics for multiple\")\nall_anomaly_num.append(test_anomaly_window_num)\nall_test_scores_reasonable.append(score_reasonable)\nall_test_aff_precision.append(test_aff[\"precision\"])\nall_test_aff_recall.append(test_aff[\"recall\"])\nall_test_aff_score.append(test_aff)\nall_test_score.append(test_score)\n\nall_anomaly_num = np.array(all_anomaly_num)\nsum_anomaly_num = np.sum(all_anomaly_num)\nall_test_aff_precision = np.array(all_test_aff_precision)\nall_test_aff_precision = all_test_aff_precision * all_anomaly_num / sum_anomaly_num\ntest_aff_precision = np.nansum(all_test_aff_precision)\nall_test_aff_recall = np.array(all_test_aff_recall)\nall_test_aff_recall = all_test_aff_recall * all_anomaly_num / sum_anomaly_num\ntest_aff_recall = np.nansum(all_test_aff_recall)\ntest_aff_f1 = 2 * (test_aff_precision * test_aff_recall) / (test_aff_precision + test_aff_recall)\n\ntotal_test_score = sum(all_test_score, ScoreAcc())\ntotal_test_scores_reasonable = sum(all_test_scores_reasonable, reasonable_accumulator())\nprint(total_test_scores_reasonable.get_all_metrics())\nprint('>' * 32)\nif configs.dataset == 'UCR':\n    print(\"UCR metrics:\\n\",\n          f\"accuracy: {total_test_scores_reasonable.get_all_metrics()}\\n\")\n\nprint(\"affiliation metrics:\\n\",\n      f\"f1:        {test_aff_f1:.5f}\\n\"\n      f\"Precision: {test_aff_precision:.5f}\\n\",\n      f\"Recall:    {test_aff_recall:.5f}\\n\"\n      \"Revised-point-adjusted metrics:\\n\\n\",\n      f\"F1 score:  {total_test_score.f1(ScoreType.RevisedPointAdjusted):.5f}\\n\",\n      f\"Precision: {total_test_score.precision(ScoreType.RevisedPointAdjusted):.5f}\\n\",\n      f\"Recall:    {total_test_score.recall(ScoreType.RevisedPointAdjusted):.5f}\\n\"\n      \"Point-adjusted metrics:\\n\\n\",\n      f\"F1 score:  {total_test_score.f1(ScoreType.PointAdjusted):.5f}\\n\",\n      f\"Precision: {total_test_score.precision(ScoreType.PointAdjusted):.5f}\\n\",\n      f\"Recall:    {total_test_score.recall(ScoreType.PointAdjusted):.5f}\\n\"\n      \"NAB Scores:\\n\\n\",\n      f\"NAB Score (balanced):       {total_test_score.nab_score():.5f}\\n\",\n      f\"NAB Score (high precision): {total_test_score.nab_score(fp_weight=0.22):.5f}\\n\",\n      f\"NAB Score (high recall):    {total_test_score.nab_score(fn_weight=2.0):.5f}\\n\"\n      )\n\nprint_separator(\"Configuration of the model\")\nprint_object(configs)\n\nend_time = datetime.now()\nprint(f\"Training time: {(end_time-start_time).total_seconds()}\")\n \n```\n","source":"_posts/Merlion-源码分析.md","raw":"---\ntitle: Merlion 源码分析\nshare: true\ntags:\n  - research\ndate: 2022-12-16 08:16:54 \nupdated: 2023-01-04 08:58:47 \ncategories: research\n---\n\nhttps://opensource.salesforce.com/Merlion/v1.3.1/tutorials/TimeSeries.html#UnivariateTimeSeries:-The-Basic-Building-Block\n\n![Excalidraw/Merlion 源码分析 2022-12-16 16.06.05.excalidraw](/images/95d48e89e235281019c6eb4b57a463db03073dbf.png)\n\n## 图解释\n- **pink areas**: ground truth\n- red curves: anomaly score\n- blue curves: original data value\n![static/attachment/Pasted image 20221216182032.png](/images/e47a64994b7f6ef50b68a861f2b9a64078d41f30.png)\n\n## model.get_anomaly_label\n1. 获取 score : `scores = self.get_anomaly_score(time_series, time_series_prev)`\n2. 获取标签: `self.post_rule(scores) if self.post_rule is not None else scores`\n## 如何设置 post_rule\n\n`AnomScoreCalibrator(max_score=max_score)`\n\n## Data Format\n\n`UnivariateTimeSeries` and `TimeSeries`. TimeSeries is comprised of many UnivariateTimeSeries.\n\n### UnivariateTimeSeries\n\nUnivariateTimeSeries is contain two columns: `DatetimeIndex` and `UnivariateTimeSeries`\n\n```python\n\nfrom merlion.utils import UnivariateTimeSeries\n\nkpi = UnivariateTimeSeries(\n    time_stamps=df.timestamp_millis/1000,  # timestamps in units of seconds\n    values=df.kpi,                         # time series values\n    name=\"kpi\"                             # optional: a name for this univariate\n)\n\nkpi_label = UnivariateTimeSeries(\n    time_stamps=df.timestamp_millis/1000,  # timestamps in units of seconds\n    values=df.kpi_label                    # time series values\n) \n```\n\nfunctions:\n\n- convert a UnivariateTimeSeries to a regular` pd.Series`: `kpi.to_pd()`\n- access the timestamps: `kpi.time_stamps[:5]`\n- Get the datetimes: `kpi.index[:5]`\n- Get the values: `kpi.values[:5]`\n- obtain a tuple of $(timestamp, value)$: `kpi[0]`\n- a slice index: `kpi[1:5]`, obtain a new UnivariateTimeSeries\n- Iterating: `for t, x in kpi[:5]`\n\n### TimeSeries\n\nTimeSeries is comprised of many UnivariateTimeSeries.\n\n```python\ntime_series_list = TimeSeries(univariates=[kpi.copy(), kpi_label.copy()]) \n```\n\nfunctions :\n\n- access the names of the individual univariates: `time_series_list.names`\n- access a specific univariate via `time_series.univariates[name]`\n- iterate over univariates: `for univariate in time_series_dict.univariates:`\n- iterate over all univariates & names: `for name, univariate in time_series_dict.items()`\n## Anomaly Detection in Merlion\n\n效果:\n\n```python\nPrecision: 0.0000, Recall: 0.0000, F1: 0.0000\nMean Time To Detect: 0 days 00:00:00 \n```\n\n![static/attachment/Pasted image 20221216085933.png](/images/10b196cf5c18a6e6c44bd8477d1dd4e74d91ab83.png)\n\nmy implement:\n\n```python\nfrom merlion.utils import TimeSeries\nfrom ts_datasets.ts_datasets.anomaly import NAB\n\ntime_series, metadata = NAB(subset=\"artificialWithAnomaly\")[3]\ntrain_data = TimeSeries.from_pd(time_series[metadata.trainval])\ntest_data = TimeSeries.from_pd(time_series[~metadata.trainval])\ntest_labels = TimeSeries.from_pd(metadata.anomaly[~metadata.trainval])\n\nfrom merlion.models.defaults import DefaultDetector, DefaultDetectorConfig\n\nmodel = DefaultDetector(DefaultDetectorConfig())\nmodel.train(train_data=train_data)\ntest_predict = model.get_anomaly_label(time_series=test_data)\nprint(type(test_predict))\nprint(test_predict)\n# <class 'merlion.utils.time_series.TimeSeries'>\n#                      anom_score\n# 2014-04-03 02:25:00         0.0\n# 2014-04-03 02:30:00         0.0\n# 2014-04-03 02:35:00         0.0\n\nfrom merlion.plot import plot_anoms\nimport matplotlib.pyplot as plt\n\nfig, ax = model.plot_anomaly(time_series=test_data)\nplot_anoms(ax=ax, anomaly_labels=test_labels)\nplt.show()\n\nfrom merlion.evaluate.anomaly import TSADMetric\n\np = TSADMetric.Precision.value(ground_truth=test_labels, predict=test_predict)\nr = TSADMetric.Recall.value(ground_truth=test_labels, predict=test_predict)\nf1 = TSADMetric.F1.value(ground_truth=test_labels, predict=test_predict)\nmttd = TSADMetric.MeanTimeToDetect.value(ground_truth=test_labels, predict=test_predict)\nprint(f\"Precision: {p:.4f}, Recall: {r:.4f}, F1: {f1:.4f}\\n\"\n      f\"Mean Time To Detect: {mttd}\")\n# Precision: 0.0000, Recall: 0.0000, F1: 0.0000\n# Mean Time To Detect: 0 days 00:00:00\n \n```\n\n## 支持的评估指标\n\n<u>Merlion 支持 PW, PA, RPA 三种指标.</u>\n\nThe key challenge in designing an appropriate evaluation metric for time series anomaly detection lies in the fact that anomalies are almost always windows of time, rather than discrete points. Thus, while it is easy to compute the pointwise (PW) precision, recall, and F1 score of a predicted anomaly label sequence relative to the ground truth label sequence, these metrics do not reﬂect a quantity that human operators care about.\n\nXu et al. (2018) propose point-adjusted (PA) metrics as a solution to this problem: if any point in a ground truth anomaly window is labeled as anomalous, all points in the segment are treated as true positives. If no anomalies are ﬂagged in the window, all points are labeled as false negatives. Any predicted anomalies outside of anomalous windows are treated as false positives. Precision, recall, and F1 can be computed based on these adjusted true/false positive/negative counts. However, the disadvantage of PA metrics is that they are biased to reward models for detecting long anomalies more than short ones.\n\nHundman et al. (2018) propose revised point-adjusted (RPA) metrics as a closely related alternative: if any point in a ground truth anomaly window is labeled as anomalous, one true positive is registered. If no anomalies are ﬂagged in the window, one false negative is recorded. Any predicted anomalies outside of anomalous windows are treated as false positives. These metrics address the shortcomings of PA metrics, but they do penalize false positives more heavily than alternatives.\n\nMerlion’s TSADMetric enum supports all 3 classes of evaluation metrics (PW, PA, and RPA), as well as the mean time to detect an anomaly. By default, we evaluate RPA metrics, but users may manually specify alternatives if their application calls for it.\n\n## 实现一个自定义模型的步骤\n\ninherits from `DetectorConfig`.\n\ninherits from `DetectorBase`\n\n## EvaluatorConfig\n- **train_window**: the maximum duration of data we would like to train the model on. ``None`` means no limit.\n- **retrain_freq**: the frequency at which we want to re-train the model. ``None`` means we only train the model once on the initial training data.\n\n## model.threshold(test_score) 是什么?\n\n🔑 将所有小于 `alm_threshold ` 的值设置为 0.\n\n本质是: `scores = np.where(np.abs(scores) >= self.alm_threshold, scores, 0.0)`\n\n```\ndef __call__(self, time_series: TimeSeries) -> TimeSeries:\n   assert (\n\t  time_series.dim == 1\n   ), f\"{type(self).__name__} post-rule can only be applied on single-variable time series\"\n   if self.alm_threshold is None:\n\t  raise RuntimeError(f\"alm_threshold is None. Please train the post-rule before attempting to use it.\")\n   k = time_series.names[0]\n   times = time_series.univariates[k].index\n   scores = time_series.univariates[k].np_values\n   scores = np.where(np.isnan(scores), 0.0, scores)\n   if self.abs_score:\n\t  scores = np.where(np.abs(scores) >= self.alm_threshold, scores, 0.0)\n   else:\n\t  scores = np.where(scores >= self.alm_threshold, scores, 0.0)\n   return TimeSeries({k: UnivariateTimeSeries(times, scores)})\n```\n\n## post_process.threshold\n\ngoal: to reduce the number of false positives.\n\n将 $<\\operatorname{alm\\_threshold}$ 的值设置为 0, 其他值保持不变. Zeroes all anomaly scores whose absolute value is less than the threshold\n\n- `scores = np.where(np.abs(scores) >= self.alm_threshold, scores, 0.0)`\n- `alm_threshold` 默认是 3\n\nobtain post-processed anomaly scores: `model.get_anomaly_label(time_series)`\n\n## post_process.calibration\n\n将值转换到 $z_t$ s.t. distribution of the predict score.\n\n![static/attachment/Pasted image 20221217080117.png](/images/b906e21a8f259249f0402645da7d4d16eb91a6af.png)\n\n- $F_{s}: R -> [0,1]$ is the CDF of the absolute raw anomaly scores $| s_t|$ , $s_t$ is the score of the time point $t$.\n- essence: transfers one distribution to the other distribution\n- Calibration is a post-processing step\n\nensures that anomaly scores correspond to standard deviation units and are therefore interpretable and consistent between diﬀerent models,\n\nCalibration bridges this gap by making all anomaly scores interpretable as z-scores, i.e. values drawn from a standard normal distribution.\n\n## evaluation.EvaluatorBase\n\n**scenarious and problems**: When a time series model is deployed live in production, training and inference are usually not performed in batch on a full time series. Rather, the model is retrained at a regular cadence\n\n**solutions**: provide a EvaluatorBase class which implements:\n\n- Train an initial model on recent historical training data.\n- At a regular interval (e.g. once per day), retrain the entire model on the most recent data. This can be either the entire history, or a more limited window (e.g. 4 weeks).\n- Obtain the model’s predictions (forecasts or anomaly scores) for the time series values that occur between re-trainings. Users may customize whether this should be done in batch, streaming, or at some intermediate cadence.\n- Compare the model’s predictions against the ground truth (actual values for forecasting, or labeled anomalies for anomaly detection), and report quantitative evaluation metrics.\n\nForecastMetric and TSADMetric: a wide range of evaluation metrics for both forecasting and anomaly detection,\n\n## model selection\n- split training set into the training set and validation set.\n- Train models using the training set\n- grab the model with the best performance on the validation split\n- return the model after retraining the model on full training data.\n\n## 一次 benchmark 的结果\n\n```\npython benchmark_anomaly_test.py --dataset IOpsCompetition --models IsolationForest \n\nTraining model IsolationForest...\n  0%|          | 0/29 [00:00<?, ?it/s]\n \n2022-12-16 23:15:27,926 (threshold:129) INFO: Threshold 2.9831 achieves F1=0.7273.\n2022-12-16 23:15:27,935 (benchmark_anomaly_test:372) INFO: \nPerformance on time series 2/29\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:373) INFO: Revised Point-Adjusted Metrics\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:374) INFO: F1 Score:  0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:375) INFO: Precision: 0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:376) INFO: Recall:    0.0000\n\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:377) INFO: Mean Time To Detect Anomalies:  0 days 00:00:00\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:378) INFO: Mean Detected Anomaly Duration: 0 days 00:00:00\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:379) INFO: Mean Anomaly Duration:          0 days 00:59:10\n\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:382) INFO: Pointwise metrics\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:383) INFO: F1 Score:  0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:384) INFO: Precision: 0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:385) INFO: Recall:    0.0000\n\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:387) INFO: Point-Adjusted Metrics\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:388) INFO: F1 Score:  0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:389) INFO: Precision: 0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:390) INFO: Recall:    0.0000\n\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:392) INFO: NAB Scores\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:393) INFO: NAB score (balanced): 0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:394) INFO: NAB score (low FP):   0.0000\n2022-12-16 23:15:27,936 (benchmark_anomaly_test:395) INFO: NAB score (low FN):   0.0000\n\n100%|██████████| 29/29 [00:20<00:00,  1.41it/s]\n  0%|          | 0/29 [00:00<?, ?it/s]2022-12-16 23:15:28,808 (threshold:129) INFO: Threshold 3.2748 achieves F1=0.3871.\n2022-12-16 23:15:28,942 (threshold:129) INFO: Threshold 2.8378 achieves PointwiseF1=0.4650.\n2022-12-16 23:15:29,069 (threshold:129) INFO: Threshold 3.1780 achieves PointAdjustedF1=0.7929.\n  3%|▎         | 1/29 [00:01<00:29,  1.06s/it]2022-12-16 23:15:29,407 (threshold:129) INFO: Threshold 2.9831 achieves F1=0.7273.\n2022-12-16 23:15:29,494 (threshold:129) INFO: Threshold 3.4093 achieves PointwiseF1=0.5455.\n2022-12-16 23:15:29,532 (threshold:129) INFO: Threshold 3.4093 achieves PointAdjustedF1=0.8966.\n  7%|▋         | 2/29 [00:01<00:18,  1.42it/s]2022-12-16 23:15:30,324 (threshold:129) INFO: Threshold 3.1780 achieves F1=0.4356.\n2022-12-16 23:15:30,455 (threshold:129) INFO: Threshold 2.7240 achieves PointwiseF1=0.4567.\n2022-12-16 23:15:30,592 (threshold:129) INFO: Threshold 3.1780 achieves PointAdjustedF1=0.7210.\n100%|██████████| 29/29 [00:02<00:00, 10.56it/s]\n\nRevised point-adjusted metrics\nF1 score:  0.3838\nPrecision: 0.5205\nRecall:    0.3040\n\nMean Time To Detect Anomalies:  -0 days 00:07:33\nMean Detected Anomaly Duration: 0 days 00:28:30\nMean Anomaly Duration:          0 days 00:15:53\n\nPointwise metrics\nF1 score:  0.3263\nPrecision: 0.2606\nRecall:    0.4363\n\nPoint-adjusted metrics\nF1 score:  0.6375\nPrecision: 0.6150\nRecall:    0.6618\n\nNAB Scores\nNAB Score (balanced):       0.2070\nNAB Score (high precision): 0.1997\nNAB Score (high recall):    0.2393\n\n```\n\n## 一次完整的 benchmark 结果\n\n![[static/attachment/merlion_benchmark_all.txt]]\n\n## TransformSequence\n\n存储 a set of Transforms, then call them sequentially.\n\n![static/attachment/Pasted image 20221219090715.png](/images/89a5f9a57f7aed021e92b954d81513f8deadb968.png)\n\n数据变换前后:\n\n![static/attachment/Pasted image 20221219091047.png](/images/62cb674b47a91d578bc8bbdb3ed19fdd29b38215.png)\n\n## Train 步骤\n\n![static/attachment/Pasted image 20221219091338.png](/images/805829d033d591a573e71569f090a2526b87d8a0.png)\n\n## DifferenceTransform and Shingle(multivar_skip=True, size=2, stride=1)\n\nhttps://opensource.salesforce.com/Merlion/v1.3.1/merlion.transform.html#merlion.transform.moving_average.DifferenceTransform\n\n```python\nself.transform.train(train_data) \ntrain_data = self.transform(train_data) \n```\n\n- `self.transform.train(train_data)`: Sets all trainable parameters of the transform (if any), using the input time series as training data. A possible implement : `merlion.transform.sequence.TransformSequence.train`\n- `train_data = self.transform(train_data) `: 根据 `self.transform.train(train_data)` 找到的特征进行变换\n\n## DifferenceTransform\n\n计算后一个值减去前一个值的差, 与 `np.diff()` 函数类似, `val[i]=val[i]-val[i-1], s.t. i>=1`\n\ninput:\n\n```python\n                         value\ntime                          \n2014-04-01 00:00:00  21.598011\n2014-04-01 00:05:00  19.321392\n2014-04-01 00:10:00  21.399938\n2014-04-01 00:15:00  18.373916\n2014-04-01 00:20:00  18.167499\n...                        ...\n2014-04-03 02:00:00  21.530211\n2014-04-03 02:05:00  21.958759\n2014-04-03 02:10:00  21.232358\n2014-04-03 02:15:00  19.874722\n2014-04-03 02:20:00  20.894818\n\n[605 rows x 1 columns]\n```\n\noutput:\n\n```python\n                        value\ntime                         \n2014-04-01 00:05:00 -2.276619\n2014-04-01 00:10:00  2.078546\n2014-04-01 00:15:00 -3.026022\n2014-04-01 00:20:00 -0.206417\n2014-04-01 00:25:00  1.848682\n...                       ...\n2014-04-03 02:00:00  1.037752\n2014-04-03 02:05:00  0.428547\n2014-04-03 02:10:00 -0.726401\n2014-04-03 02:15:00 -1.357636\n2014-04-03 02:20:00  1.020096\n\n[604 rows x 1 columns]\n```\n\n#### .train\n\ndoes not do anything in method `.train`\n\n```python\ndef train(self, time_series: TimeSeries):\n   pass\n```\n\n#### **call**\n\n核心代码:\n\n```python\nUnivariateTimeSeries.from_pd(var.diff())[1:] \n```\n\n## Shingle\n\n`Shingle` 可以理解为滑动窗口, 当 `Shingle(size=10, stride=1)` 时,数据就是:\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  ...  kpi_6  kpi_7  kpi_8  kpi_9\ntime                                             ...                            \n2022-01-01 00:00:00    1.0    1.0    1.0    1.0  ...    1.0    1.0    1.0    1.0\n2022-01-04 10:40:00    1.0    1.0    1.0    1.0  ...    1.0    1.0    1.0    2.0\n2022-01-07 21:20:00    1.0    1.0    1.0    1.0  ...    1.0    1.0    2.0    3.0\n2022-01-11 08:00:00    1.0    1.0    1.0    1.0  ...    1.0    2.0    3.0    4.0\n2022-01-14 18:40:00    1.0    1.0    1.0    1.0  ...    2.0    3.0    4.0    5.0\n2022-01-18 05:20:00    1.0    1.0    1.0    1.0  ...    3.0    4.0    5.0    6.0\n2022-01-21 16:00:00    1.0    1.0    1.0    1.0  ...    4.0    5.0    6.0    7.0\n2022-01-25 02:40:00    1.0    1.0    1.0    2.0  ...    5.0    6.0    7.0    8.0\n2022-01-28 13:20:00    1.0    1.0    2.0    3.0  ...    6.0    7.0    8.0    9.0\n2022-02-01 00:00:00    1.0    2.0    3.0    4.0  ...    7.0    8.0    9.0   10.0 \n```\n\nlet x(t) = value_t be the value of the time series at time index t. Then, the output vector for time index t will be :code:[x(t - size + 1), …, x(t - 1), x(t)].\n\ninput:\n\n```python\n                        value\ntime                         \n2014-04-01 00:05:00 -2.276619\n2014-04-01 00:10:00  2.078546\n2014-04-01 00:15:00 -3.026022\n2014-04-01 00:20:00 -0.206417\n2014-04-01 00:25:00  1.848682\n...                       ...\n2014-04-03 02:00:00  1.037752\n2014-04-03 02:05:00  0.428547\n2014-04-03 02:10:00 -0.726401\n2014-04-03 02:15:00 -1.357636\n2014-04-03 02:20:00  1.020096 \n```\n\noutput: `(size = {int} 2 stride = {int} 1)`\n\n```python\n                      value_0   value_1\ntime                                   \n2014-04-01 00:05:00 -2.276619 -2.276619\n2014-04-01 00:10:00 -2.276619  2.078546\n2014-04-01 00:15:00  2.078546 -3.026022\n2014-04-01 00:20:00 -3.026022 -0.206417\n2014-04-01 00:25:00 -0.206417  1.848682\n...                       ...       ...\n2014-04-03 02:00:00  0.869541  1.037752\n2014-04-03 02:05:00  1.037752  0.428547\n2014-04-03 02:10:00  0.428547 -0.726401\n2014-04-03 02:15:00 -0.726401 -1.357636\n2014-04-03 02:20:00 -1.357636  1.020096\n\n[604 rows x 2 columns]\n```\n\n#### `.TRAIN`\n\nDose not do anything.\n\n```python\ndef train(self, time_series: TimeSeries):\n   pass\n```\n\n#### `__call__`\n\n```python\nLeft-pad the time series with the first value \n```\n\n`size=3 and stride=2`\n\n```\nt=4,\nt-3+1=2\n[2,3,4]\n\nt=5\n[3,4,5]\n```\n\n#### Shingle()\n\n```python\nfrom merlion.transform.resample import Shingle\nfrom pysearchlib.utils.util_merlion import generate_random_timeseries\n\ndatetime = generate_random_timeseries()\nprint(\"=============== source =============\")\nprint(datetime)\n\nsle = Shingle()\nsle.train(datetime)\n\nprint(\"=============== Target =============\")\nprint(sle(datetime)) \n```\n\noutput:\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0\ntime                      \n2022-01-01 00:00:00    1.0\n2022-01-04 10:40:00    2.0\n2022-01-07 21:20:00    3.0\n2022-01-11 08:00:00    4.0\n2022-01-14 18:40:00    5.0\n2022-01-18 05:20:00    6.0\n2022-01-21 16:00:00    7.0\n2022-01-25 02:40:00    8.0\n2022-01-28 13:20:00    9.0\n2022-02-01 00:00:00   10.0 \n```\n\n#### Shingle(size=2)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1\ntime                             \n2022-01-01 00:00:00    1.0    1.0\n2022-01-04 10:40:00    1.0    2.0\n2022-01-07 21:20:00    2.0    3.0\n2022-01-11 08:00:00    3.0    4.0\n2022-01-14 18:40:00    4.0    5.0\n2022-01-18 05:20:00    5.0    6.0\n2022-01-21 16:00:00    6.0    7.0\n2022-01-25 02:40:00    7.0    8.0\n2022-01-28 13:20:00    8.0    9.0\n2022-02-01 00:00:00    9.0   10.0\n \n```\n\n#### Shingle(size=3)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2\ntime                                    \n2022-01-01 00:00:00    1.0    1.0    1.0\n2022-01-04 10:40:00    1.0    1.0    2.0\n2022-01-07 21:20:00    1.0    2.0    3.0\n2022-01-11 08:00:00    2.0    3.0    4.0\n2022-01-14 18:40:00    3.0    4.0    5.0\n2022-01-18 05:20:00    4.0    5.0    6.0\n2022-01-21 16:00:00    5.0    6.0    7.0\n2022-01-25 02:40:00    6.0    7.0    8.0\n2022-01-28 13:20:00    7.0    8.0    9.0\n2022-02-01 00:00:00    8.0    9.0   10.0 \n```\n\n#### Shingle(size=5)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4\ntime                                                  \n2022-01-01 00:00:00    1.0    1.0    1.0    1.0    1.0\n2022-01-04 10:40:00    1.0    1.0    1.0    1.0    2.0\n2022-01-07 21:20:00    1.0    1.0    1.0    2.0    3.0\n2022-01-11 08:00:00    1.0    1.0    2.0    3.0    4.0\n2022-01-14 18:40:00    1.0    2.0    3.0    4.0    5.0\n2022-01-18 05:20:00    2.0    3.0    4.0    5.0    6.0\n2022-01-21 16:00:00    3.0    4.0    5.0    6.0    7.0\n2022-01-25 02:40:00    4.0    5.0    6.0    7.0    8.0\n2022-01-28 13:20:00    5.0    6.0    7.0    8.0    9.0\n2022-02-01 00:00:00    6.0    7.0    8.0    9.0   10.0\n```\n\n#### Shingle(size=5, stride=1)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4\ntime                                                  \n2022-01-01 00:00:00    1.0    1.0    1.0    1.0    1.0\n2022-01-04 10:40:00    1.0    1.0    1.0    1.0    2.0\n2022-01-07 21:20:00    1.0    1.0    1.0    2.0    3.0\n2022-01-11 08:00:00    1.0    1.0    2.0    3.0    4.0\n2022-01-14 18:40:00    1.0    2.0    3.0    4.0    5.0\n2022-01-18 05:20:00    2.0    3.0    4.0    5.0    6.0\n2022-01-21 16:00:00    3.0    4.0    5.0    6.0    7.0\n2022-01-25 02:40:00    4.0    5.0    6.0    7.0    8.0\n2022-01-28 13:20:00    5.0    6.0    7.0    8.0    9.0\n2022-02-01 00:00:00    6.0    7.0    8.0    9.0   10.0 \n```\n\n#### Shingle(size=5, stride=2)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4\ntime                                                  \n2022-01-04 10:40:00    1.0    1.0    1.0    1.0    2.0\n2022-01-11 08:00:00    1.0    1.0    2.0    3.0    4.0\n2022-01-18 05:20:00    2.0    3.0    4.0    5.0    6.0\n2022-01-25 02:40:00    4.0    5.0    6.0    7.0    8.0\n2022-02-01 00:00:00    6.0    7.0    8.0    9.0   10.0 \n```\n\n#### Shingle(size=5, stride=4)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4\ntime                                                  \n2022-01-04 10:40:00    1.0    1.0    1.0    1.0    2.0\n2022-01-18 05:20:00    2.0    3.0    4.0    5.0    6.0\n2022-02-01 00:00:00    6.0    7.0    8.0    9.0   10.0 \n```\n\n#### Shingle(size=2, stride=2)\n\n```python\n=============== source =============\n                      kpi\ntime                     \n2022-01-01 00:00:00   1.0\n2022-01-04 10:40:00   2.0\n2022-01-07 21:20:00   3.0\n2022-01-11 08:00:00   4.0\n2022-01-14 18:40:00   5.0\n2022-01-18 05:20:00   6.0\n2022-01-21 16:00:00   7.0\n2022-01-25 02:40:00   8.0\n2022-01-28 13:20:00   9.0\n2022-02-01 00:00:00  10.0\n=============== Target =============\n                     kpi_0  kpi_1\ntime                             \n2022-01-04 10:40:00    1.0    2.0\n2022-01-11 08:00:00    3.0    4.0\n2022-01-18 05:20:00    5.0    6.0\n2022-01-25 02:40:00    7.0    8.0\n2022-02-01 00:00:00    9.0   10.0 \n```\n\n## 如何添加 pre_process\n\n如下的 `TransformSequence` 序列中, 数据处理步骤变为:\n\n1. 先归一化数据 `MeanVarNormalize()`\n2. 生成窗口数据 `Shingle(size=32)` 生成窗口大小为 32 的窗口数据, 参考 <a href='#Shingle(size=5)'>#Shingle(size=5)</a>\n\n```python\n# Import a data processing transform\ncfg = IsolationForestConfig(n_estimators=300,\n                            transform=TransformSequence([\n                                MeanVarNormalize(),\n                                Shingle(size=32)])\n                            )\nmodel = IsolationForest(cfg)\n```\n\n## MeanVarNormalize 执行过程\n1. 调用 `train` 获取数据 均值和方差\n2. 通过 `f(data)` 完成数据处理.\n![static/attachment/Pasted image 20221220100832.png](/images/ba590021c2ca65431ff473391333a0f61f54c540.png)\n![static/attachment/Pasted image 20221220101004.png](/images/4cd5f804d2c895b49a888d419c0ed3b12d63e9d3.png)\n\n## DetectorConfig\n\n![static/attachment/Pasted image 20221220104515.png](/images/e779b3094a0f30317b99da6f3c52741ec9ebcb9d.png)\n\n## what the predict value in accumulate_tsad_score ?\n\nQ: I want to know whether the predict is a score(float between 0 and 1) or a label(0, or 1)\n\nA: From the source code, it is a label(0, or 1). In other words, the value is one of 0, 1.\n\n- source code: `predict.np_values.astype(bool)`\n\n![static/attachment/Pasted image 20221220165551.png](/images/e27c6193118af9b3adffe8d3dc176ab6935175b3.png)\n\n### example: max_delay_sec=4\n\n```python\nimport pprint\nfrom merlion.evaluate.anomaly import accumulate_tsad_score, ScoreType\nfrom pysearchlib.utils.util_merlion import generate_timeseries_from_list\n\nground_truth = \\\n    [0, 0, 1, 1, 1, 1, 0, 0, 0]\npredict = \\\n    [0, 0, 0, 0, 0, 1, 0, 0, 0]\nats = accumulate_tsad_score(\n    ground_truth=generate_timeseries_from_list(ground_truth),\n    predict=generate_timeseries_from_list(predict),\n    max_delay_sec=4\n)\npprint.pprint({\n    \"Pointwise Precision\": ats.precision(score_type=ScoreType.Pointwise),\n    \"Pointwise Recall\": ats.recall(score_type=ScoreType.Pointwise),\n    \"Pointwise F1\": ats.f1(score_type=ScoreType.Pointwise),\n    \"PointAdjusted Precision\": ats.precision(score_type=ScoreType.PointAdjusted),\n    \"PointAdjusted Recall\": ats.recall(score_type=ScoreType.PointAdjusted),\n    \"PointAdjusted F1\": ats.f1(score_type=ScoreType.PointAdjusted),\n    \"RevisedPointAdjusted Precision\": ats.precision(score_type=ScoreType.RevisedPointAdjusted),\n    \"RevisedPointAdjusted Recall\": ats.recall(score_type=ScoreType.RevisedPointAdjusted),\n    \"RevisedPointAdjusted F1\": ats.f1(score_type=ScoreType.RevisedPointAdjusted),\n\n})\n\n \n```\n\noutput:\n\n```python\n{'PointAdjusted F1': 1.0,\n 'PointAdjusted Precision': 1.0,\n 'PointAdjusted Recall': 1.0,\n 'Pointwise F1': 0.4,\n 'Pointwise Precision': 1.0,\n 'Pointwise Recall': 0.25,\n 'RevisedPointAdjusted F1': 1.0,\n 'RevisedPointAdjusted Precision': 1.0,\n 'RevisedPointAdjusted Recall': 1.0} \n```\n\n### example: max_delay_sec=3 or 2 or 1\n\n```python\n{'PointAdjusted F1': 0.0,\n 'PointAdjusted Precision': 0.0,\n 'PointAdjusted Recall': 0.0,\n 'Pointwise F1': 0.0,\n 'Pointwise Precision': 0.0,\n 'Pointwise Recall': 0.0,\n 'RevisedPointAdjusted F1': 0.0,\n 'RevisedPointAdjusted Precision': 0.0,\n 'RevisedPointAdjusted Recall': 0.0\n }\n\n```\n\n### example: max_delay_sec=None or 0\n\n```python\n{'PointAdjusted F1': 1.0,\n 'PointAdjusted Precision': 1.0,\n 'PointAdjusted Recall': 1.0,\n 'Pointwise F1': 0.4,\n 'Pointwise Precision': 1.0,\n 'Pointwise Recall': 0.25,\n 'RevisedPointAdjusted F1': 1.0,\n 'RevisedPointAdjusted Precision': 1.0,\n 'RevisedPointAdjusted Recall': 1.0\n } \n```\n\n## Best affiliation quantile 是什么?\n\n在 `predict = score > np.percentile(quantile)` 中, quantile 取多少时, predict 获得的结果 (如 F1) 最好?\n\n## 修改后的结果\n\n```python\n/Users/sunwu/miniforge3/envs/sw_torch_1_10/bin/python /Users/sunwu/SW-Research/COCA-main/coca_debug.py \n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 146255\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> 149130\nBest affiliation F1 score: {'precision': 0.9991141275746687, 'recall': 0.7897834771523201, 'individual_precision_probabilities': [1.0, 0.9983640081799591, nan, 1.0, 0.9987096774193549, nan, nan, 1.0, 1.0, 0.9959893048128342, 1.0, 1.0, 0.9986893840104849, 0.9976171564733916, 1.0], 'individual_recall_probabilities': [0.8573256456835953, 0.9995910020449897, 0, 0.999237933954276, 0.9995698924731182, 0, 0, 0.9995485327313769, 0.994773519163763, 0.9991492464754497, 0.9996639784946236, 0.9997589780670041, 0.9997219905476786, 0.9984114376489277, 1.0], 'individual_precision_distances': [0.0, 0.16666666666666666, nan, 0.0, 0.25, nan, nan, 0.0, 0.0, 0.0625, 0.0, 0.0, 0.0625, 0.5, 0.0], 'individual_recall_distances': [41.054545454545455, 0.16666666666666666, inf, 0.225, 0.25, inf, inf, 0.25, 2.25, 0.1590909090909091, 0.25, 0.25, 0.1590909090909091, 1.0, 0.0]}\nBest affiliation quantile: 0.2520204081632653\nBest revised point adjusted anomaly quantile: 0.23977551020408164\nBest affiliation F1 score: {'precision': 0.8333357886680556, 'recall': 0.7724293430234433, 'individual_precision_probabilities': [0.6105147261216626, 0.9862155388471178, 0.9976095617529881, 0.9987376393856512, nan, 1.0, nan, nan, 0.9984779299847792, 0.9273927392739273, 0.9982847341337907, 0.9968085106382979, 0.8834399431414357, nan, 0.9884337349397591, nan, 0.9989203195854027, 0.9378486055776891, 0.8833289896620624, 0.5492788461538463, 0.9656746031746032, 0.9627329192546583, nan, 0.1288445552784705, 0.7963810769566165, 0.6262121743194298, 0.9969696969696971, nan, 1.0, 0.5115157562151824, 0.5363573883161511, 0.8246268656716417, 0.961038961038961, 0.5798104956268222, 0.9954128440366973, 0.9805084745762711, 0.5714285714285715, 0.3541666666666667, 1.0, nan, 0.976701410177805, 0.9266450916936354, nan, 0.7343277565007055, 0.9352179034157833, 0.8568421052631578, nan, 0.6729717199814558, 0.6813521406822842, 0.8780609695152424, 0.877455219271155, 0.49257876089246383, 0.9967689822294022, 0.6989337822671156, 0.8369019296854349, 1.0, nan, 0.9147130582369788, 1.0, 0.926131850675139, 0.9953175299970733, 0.5522321428571428], 'individual_recall_probabilities': [0.9892871888639849, 0.9969298245614034, 0.998406374501992, 0.9991584262571008, 0, 0.9818840579710145, 0, 0, 0.9989852866565195, 0.9390470297029704, 0.9996361557253496, 0.9985815602836879, 0.9995938673977053, 0, 0.992552026286966, 0, 0.9997840639170805, 0.9850137909898866, 0.9993602956855497, 0.9997996794871796, 0.988095238095238, 0.9881422924901186, 0, 0.12967581047381538, 0.9960758665794637, 0.9996494917630565, 0.9992424242424242, 0, 0.9828132066938037, 0.9998752806186082, 0.9994845360824742, 0.9371643204432384, 0.9896694214876033, 0.6016763848396501, 0.9986238532110092, 0.9993220338983051, 0.7142857142857143, 0.5902777777777778, 0.9006410256410257, 0, 0.9779276517473943, 0.9902912621359224, 0, 0.7347309010280185, 0.9834501987632508, 0.9484210526315788, 0, 0.9997681965693093, 0.9998912570682905, 0.9370314842578711, 0.9998034701555393, 0.9998563631140476, 0.9973074851911686, 0.707351290684624, 0.9994713190589479, 0.9997750787224471, 0, 0.9997878434284502, 0.9997306941358648, 0.9265289912629071, 0.9997366110623354, 0.9970238095238095], 'individual_precision_distances': [686.0, 0.07142857142857142, 0.5, 0.5, nan, 0.0, nan, nan, 0.25, 2.0, 0.0625, 0.75, 130.66666666666666, nan, 0.1, nan, 0.75, 12.416666666666666, 143.05555555555554, 561.1875, 24.0, 0.07142857142857142, nan, 416.5, 272.5, 529.7083333333334, 0.16666666666666666, nan, 0.0, 927.4166666666666, 798.0, 52.7, 0.07142857142857142, 547.0, 2.0833333333333335, 1.5394736842105263, 0.75, 2.5, 0.0, nan, 2.5, 0.6666666666666666, nan, 328.5, 75.83333333333333, 1.4, nan, 637.2, 535.5714285714286, 20.166666666666668, 191.75, 783.4166666666666, 1.5, 535.0, 307.5, 0.0, nan, 102.31818181818181, 0.0, 55.5, 0.2222222222222222, 475.0], 'individual_recall_distances': [10.0, 0.175, 1.0, 1.0, inf, 0.4166666666666667, inf, inf, 0.6666666666666666, 6.15625, 0.1590909090909091, 0.6666666666666666, 0.3333333333333333, inf, 0.7727272727272727, inf, 0.25, 4.701923076923077, 0.4090909090909091, 0.25, 7.5, 0.2727272727272727, inf, 417.5, 3.0, 0.25, 0.16666666666666666, inf, 0.8636363636363636, 0.125, 0.625, 19.5, 0.22727272727272727, 520.0, 1.125, 0.1, 1.5, 2.5, 0.3333333333333333, inf, 9.0, 0.25, inf, 329.0, 15.0, 1.225, inf, 0.25, 0.125, 10.5, 0.1590909090909091, 0.125, 2.5, 521.5, 1.0, 0.25, inf, 0.13636363636363635, 0.3333333333333333, 66.0, 0.075, 2.5]}\nBest affiliation quantile: 0.301\nBest revised point adjusted anomaly quantile: 0.0683469387755102\nValid affiliation precision: 0.9991\nValid affiliation recall: 0.7898\n\nValid RevisedPointAdjusted F1: 0.7097  \nValid RevisedPointAdjusted precision: 0.6875 \nValid RevisedPointAdjusted recall: 0.7333\n\n################## Evaluate  is Done ! #########################\nTest affiliation precision: 0.8333 \nTest affiliation recall: 0.7724\n\nTest RevisedPointAdjusted F1: 0.4259\nTest RevisedPointAdjusted precision: 0.5000\nTest RevisedPointAdjusted recall: 0.3710\n\n================================================================\n==========Summary Metrics for multiple\n================================================================\n{'accuracy': 0.0}\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\naffiliation metrics:\n Precision: 0.83334\n Recall:    0.77243\nf1:        0.80173\nRevised-point-adjusted metrics:\n F1 score:  0.42593\n Precision: 0.50000\n Recall:    0.37097\nPoint-adjusted metrics:\n F1 score:  0.43243\n Precision: 0.86857\n Recall:    0.28788\nNAB Scores:\n NAB Score (balanced):       0.32826\n NAB Score (high precision): 0.32342\n NAB Score (high recall):    0.34250\nseed: 2\n================================================================\n==========Configuration of the model\n================================================================\ndataset:IOpsCompetition\ninput_channels:1\nkernel_size:4\nstride:1\nfinal_out_channels:32\nhidden_size:64\nnum_layers:3\nproject_channels:20\ndropout:0.45\nfeatures_len:6\nwindow_size:16\ntime_step:2\nnum_epoch:5\nfreeze_length_epoch:2\nchange_center_epoch:1\ncenter_eps:0.1\nomega1:1\nomega2:0.1\nbeta1:0.9\nbeta2:0.99\nlr:0.0001\ndrop_last:False\nbatch_size:512\nnu:0.001\ndetect_nu:0.0015\nthreshold_determine:floating\nobjective:soft-boundary\nloss_type:distance\naugmentation:<conf.coca.IOpsCompetition_Configs.augmentations object at 0x140958190>\n\nProcess finished with exit code 0\n \n```\n\n### 修改好的实验代码\n\n```python\n/Users/sunwu/miniforge3/envs/sw_torch_1_10/bin/python /Users/sunwu/SW-Research/COCA-main/coca_debug.py \n<frozen importlib._bootstrap>:219: RuntimeWarning: scipy._lib.messagestream.MessageStream size changed, may indicate binary incompatibility. Expected 56 from C header, got 64 from PyObject\nplotly not installed, so plotly visualizations will not work. Try installing Merlion with optional dependencies using `pip install salesforce-merlion[plot]` or `pip install `salesforce-merlion[all]`.\n\n================================================================\n========== \t train_data.shape:146255,test_data.shape:149130\n================================================================\nTraining started ....\n\nEpoch : 1\nTrain Loss     : 396.1572\t | \nValid Loss     : 115.7170\t  | \nTest Loss     : 109.9178\t  | \n\nEpoch : 2\nTrain Loss     : 1.4987\t | \nValid Loss     : 0.5217\t  | \nTest Loss     : 0.5218\t  | \n\nEpoch : 3\nTrain Loss     : 0.5671\t | \nValid Loss     : 0.4676\t  | \nTest Loss     : 0.4677\t  | \n\nEpoch : 4\nTrain Loss     : 0.4959\t | \nValid Loss     : 0.3880\t  | \nTest Loss     : 0.3884\t  | \n\nEpoch : 5\nTrain Loss     : 0.4482\t | \nValid Loss     : 0.3708\t  | \nTest Loss     : 0.3710\t  | \n\n################## Training is Done! #########################\n\n################## Start to evaluate! #########################\n\n================================================================\n========== \t Calculating validation metrics\n================================================================\nBest affiliation quantile: 0.2520204081632653\nBest affiliation  metric: {'precision': 0.9991141275746687, 'recall': 0.7897834771523201}\nBest revised point adjusted anomaly quantile: 0.23977551020408164\nBest revised point adjusted: {'f1': 0.7096774193548386, 'precision': 0.6875, 'recall': 0.7333333333333333}\n\n================================================================\n========== \t Calculating testing metrics\n================================================================\nBest affiliation quantile: 0.301\nBest affiliation  metric: {'precision': 0.8333357886680556, 'recall': 0.7724293430234433}\nBest revised point adjusted anomaly quantile: 0.0683469387755102\nBest revised point adjusted: {'f1': 0.42592592592592593, 'precision': 0.5, 'recall': 0.3709677419354839}\n\n================================================================\n========== \t Validation metrics\n================================================================\nValid affiliation precision: 0.9991\nValid affiliation recall: 0.7898\n\nValid RevisedPointAdjusted F1: 0.7097  \nValid RevisedPointAdjusted precision: 0.6875 \nValid RevisedPointAdjusted recall: 0.7333\n\n================================================================\n========== \t Testing metric\n================================================================\nTest affiliation precision: 0.8333 \nTest affiliation recall: 0.7724\n\nTest RevisedPointAdjusted F1: 0.4259\nTest RevisedPointAdjusted precision: 0.5000\nTest RevisedPointAdjusted recall: 0.3710\n\n================================================================\n========== \t Summary Metrics for multiple\n================================================================\n{'accuracy': 0.0}\n>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\naffiliation metrics:\n f1:        0.80173\nPrecision: 0.83334\n Recall:    0.77243\nRevised-point-adjusted metrics:\n\n F1 score:  0.42593\n Precision: 0.50000\n Recall:    0.37097\nPoint-adjusted metrics:\n\n F1 score:  0.43243\n Precision: 0.86857\n Recall:    0.28788\nNAB Scores:\n\n NAB Score (balanced):       0.32826\n NAB Score (high precision): 0.32342\n NAB Score (high recall):    0.34250\n\n================================================================\n========== \t Configuration of the model\n================================================================\ndataset:IOpsCompetition\ninput_channels:1\nkernel_size:4\nstride:1\nfinal_out_channels:32\nhidden_size:64\nnum_layers:3\nproject_channels:20\ndropout:0.45\nfeatures_len:6\nwindow_size:16\ntime_step:2\nnum_epoch:5\nfreeze_length_epoch:2\nchange_center_epoch:1\ncenter_eps:0.1\nomega1:1\nomega2:0.1\nbeta1:0.9\nbeta2:0.99\nlr:0.0001\ndrop_last:False\nbatch_size:512\nnu:0.001\ndetect_nu:0.0015\nthreshold_determine:floating\nobjective:soft-boundary\nloss_type:distance\naugmentation:<conf.coca.IOpsCompetition_Configs.augmentations object at 0x15f7583d0>\nTraining time: 218.982158\n\nProcess finished with exit code 0\n \n```\n\n`anomaly_predict.py`\n\n```python\nimport pprint\n\nfrom affiliation.generics import convert_vector_to_events\nfrom affiliation.metrics import pr_from_events\nimport numpy as np\nimport pandas as pd\nfrom merlion.evaluate.anomaly import accumulate_tsad_score, ScoreType\nfrom merlion.utils import TimeSeries\nfrom models.reasonable_metric import tsad_reasonable\nfrom affiliation.generics import convert_vector_to_events\nfrom affiliation.metrics import pr_from_events\n\ndef ad_predict(target, scores, mode, nu):\n    if_aff = np.count_nonzero(target)\n    if if_aff != 0:\n        events_gt = convert_vector_to_events(target)\n    target = TimeSeries.from_pd(pd.DataFrame(target))\n    scores = np.array(scores)\n    # standardization\n    mean = np.mean(scores)\n    std = np.std(scores)\n    if std != 0:\n        scores = (scores - mean) / std\n\n    # For UCR dataset, there is only one anomaly period in the test set.\n    if mode == 'one-anomaly':\n        mount = 0\n        threshold = np.max(scores, axis=0)\n        max_number = np.sum(scores == threshold)\n        predict = np.zeros(len(scores))\n        if max_number <= 10:\n            for index, r2 in enumerate(scores):\n                if r2.item() >= threshold:\n                    predict[index] = 1\n                    mount += 1\n\n        if if_aff != 0:\n            events_pred = convert_vector_to_events(predict)\n            Trange = (0, len(predict))\n            affiliation_max = pr_from_events(events_pred, events_gt, Trange)\n        else:\n            affiliation_max = dict()\n            affiliation_max[\"precision\"] = 0\n            affiliation_max[\"recall\"] = 0\n\n        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n    # Fixed threshold\n    elif mode == 'fix':\n        detect_nu = 100 * (1 - nu)\n        threshold = np.percentile(scores, detect_nu)\n        mount = 0\n        predict = np.zeros(len(scores))\n        for index, r2 in enumerate(scores):\n            if r2.item() > threshold:\n                predict[index] = 1\n                mount += 1\n        if if_aff != 0:\n            events_pred = convert_vector_to_events(predict)\n            Trange = (0, len(predict))\n            affiliation_max = pr_from_events(events_pred, events_gt, Trange)\n        else:\n            affiliation_max = dict()\n            affiliation_max[\"precision\"] = 0\n            affiliation_max[\"recall\"] = 0\n        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n    # Floating threshold\n    else:\n        # Set the anomaly  percentile to [0.001, 0.3] (100 - np.max(nu_list)=99.7 )\n\n        # To reduce the quantity to calculate\n        # nu_list = np.arange(1, 301) / 1e3\n        nu_list = np.linspace(1, 301, 50) / 1e3  # nu_list is in [0.001,0.30]\n        f1_revised_point_adjusted_list, accumulate_tsad_score_list, f1_affiliation_list, affiliation_metric_list = [], [], [], []\n        for detect_nu in nu_list:\n            threshold = np.percentile(scores, 100 - detect_nu)\n            predict = np.where(scores > threshold, 1, 0)\n            dic = dict()\n            if if_aff != 0:\n                events_pred = convert_vector_to_events(predict)\n                Trange = (0, len(predict))\n                affiliation_metric = pr_from_events(events_pred, events_gt, Trange)\n                dic[\"precision\"] = affiliation_metric['precision']\n                dic[\"recall\"] = affiliation_metric['recall']\n                affiliation_f1 = 2 * (dic[\"precision\"] * dic[\"recall\"]) / (dic[\"precision\"] + dic[\"recall\"])\n                f1_affiliation_list.append(affiliation_f1)\n            else:\n\n                dic[\"precision\"] = 0\n                dic[\"recall\"] = 0\n                f1_affiliation_list.append(0)\n            affiliation_metric_list.append(dic)\n\n            predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n\n            # 这个对象可以求很多的score, such as PA, PWA, RPA\n            # metric = {\n            #     \"Pointwise Precision\": ats.precision(score_type=ScoreType.Pointwise),\n            #     \"Pointwise Recall\": ats.recall(score_type=ScoreType.Pointwise),\n            #     \"Pointwise F1\": ats.f1(score_type=ScoreType.Pointwise),\n            #     \"PointAdjusted Precision\": ats.precision(score_type=ScoreType.PointAdjusted),\n            #     \"PointAdjusted Recall\": ats.recall(score_type=ScoreType.PointAdjusted),\n            #     \"PointAdjusted F1\": ats.f1(score_type=ScoreType.PointAdjusted),\n            #     \"RevisedPointAdjusted Precision\": ats.precision(score_type=ScoreType.RevisedPointAdjusted),\n            #     \"RevisedPointAdjusted Recall\": ats.recall(score_type=ScoreType.RevisedPointAdjusted),\n            #     \"RevisedPointAdjusted F1\": ats.f1(score_type=ScoreType.RevisedPointAdjusted),\n            #\n            # }\n            ats = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n            f1_revised_point_adjusted = ats.f1(ScoreType.RevisedPointAdjusted)\n            f1_revised_point_adjusted_list.append(f1_revised_point_adjusted)\n            accumulate_tsad_score_list.append(ats)\n\n        # Find the maximum affiliation F1 score\n        index_max_f1_affiliation = np.argmax(f1_affiliation_list, axis=0)\n        affiliation_max = affiliation_metric_list[index_max_f1_affiliation]\n\n        # Find the maximum affiliation percentile(such as  2.26%)\n        nu_max1 = nu_list[index_max_f1_affiliation]\n        print(\"Best affiliation quantile:\", nu_max1)\n        print(f\"Best affiliation  metric: {affiliation_max}\")\n\n        # Find the maximum RevisedPointAdjusted f1\n        index_max_f1_RPA = np.argmax(f1_revised_point_adjusted_list, axis=0)\n        score_max = accumulate_tsad_score_list[index_max_f1_RPA]\n        nu_max2 = nu_list[index_max_f1_RPA]\n        print('Best revised point adjusted anomaly quantile:', nu_max2)\n        revised_point_adjust = {\n            \"f1\": score_max.f1(score_type=ScoreType.RevisedPointAdjusted),\n            \"precision\": score_max.precision(score_type=ScoreType.RevisedPointAdjusted),\n            \"recall\": score_max.recall(score_type=ScoreType.RevisedPointAdjusted)\n        }\n        print(f\"Best revised point adjusted: {revised_point_adjust}\")\n\n        threshold = np.percentile(scores, 100 - nu_max1)\n        predict = np.where(scores > threshold, 1, 0)\n    return affiliation_max, score_max, predict\n    # affiliation_max={'precision': 0, 'recall': 0},\n    # score max: <merlion.evaluate.anomaly.TSADScoreAccumulator>\n    # predict.shape=59, the best prediction where the affiliation f1 is maximal. Predict is\n    #   not a score, it is a label which value is one of 0 or 1.\n    #   predict = np.where(scores > threshold, 1, 0)\n\ndef ad_predict_back(target, scores, mode, nu):\n    if_aff = np.count_nonzero(target)\n    if if_aff != 0:\n        events_gt = convert_vector_to_events(target)\n    target = TimeSeries.from_pd(pd.DataFrame(target))\n    scores = np.array(scores)\n    # standardization\n    mean = np.mean(scores)\n    std = np.std(scores)\n    if std != 0:\n        scores = (scores - mean) / std\n\n    # For UCR dataset, there is only one anomaly period in the test set.\n    if mode == 'one-anomaly':\n        mount = 0\n        threshold = np.max(scores, axis=0)\n        max_number = np.sum(scores == threshold)\n        predict = np.zeros(len(scores))\n        if max_number <= 10:\n            for index, r2 in enumerate(scores):\n                if r2.item() >= threshold:\n                    predict[index] = 1\n                    mount += 1\n\n        if if_aff != 0:\n            events_pred = convert_vector_to_events(predict)\n            Trange = (0, len(predict))\n            affiliation_max = pr_from_events(events_pred, events_gt, Trange)\n        else:\n            affiliation_max = dict()\n            affiliation_max[\"precision\"] = 0\n            affiliation_max[\"recall\"] = 0\n\n        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n    # Fixed threshold\n    elif mode == 'fix':\n        detect_nu = 100 * (1 - nu)\n        threshold = np.percentile(scores, detect_nu)\n        mount = 0\n        predict = np.zeros(len(scores))\n        for index, r2 in enumerate(scores):\n            if r2.item() > threshold:\n                predict[index] = 1\n                mount += 1\n        if if_aff != 0:\n            events_pred = convert_vector_to_events(predict)\n            Trange = (0, len(predict))\n            affiliation_max = pr_from_events(events_pred, events_gt, Trange)\n        else:\n            affiliation_max = dict()\n            affiliation_max[\"precision\"] = 0\n            affiliation_max[\"recall\"] = 0\n        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n\n    # Floating threshold\n    else:\n        nu_list = np.arange(1, 301) / 1e3\n        f1_list, score_list, f1_list2, affiliation_list = [], [], [], []\n        for detect_nu in nu_list:\n            threshold = np.percentile(scores, 100 - detect_nu)\n            mount = 0\n            predict = np.zeros(len(scores))\n            for index, r2 in enumerate(scores):\n                if r2.item() > threshold:\n                    predict[index] = 1\n                    mount += 1\n            if if_aff != 0:\n                events_pred = convert_vector_to_events(predict)\n                Trange = (0, len(predict))\n                dic = pr_from_events(events_pred, events_gt, Trange)\n                affiliation_f1 = 2 * (dic[\"precision\"] * dic[\"recall\"]) / (dic[\"precision\"] + dic[\"recall\"])\n                f1_list2.append(affiliation_f1)\n            else:\n                dic = dict()\n                dic[\"precision\"] = 0\n                dic[\"recall\"] = 0\n                f1_list2.append(0)\n            affiliation_list.append(dic)\n            predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))\n            score = accumulate_tsad_score(ground_truth=target, predict=predict_ts)\n            f1 = score.f1(ScoreType.RevisedPointAdjusted)\n            f1_list.append(f1)\n            score_list.append(score)\n        index_max1 = np.argmax(f1_list2, axis=0)\n        affiliation_max = affiliation_list[index_max1]\n        nu_max1 = nu_list[index_max1]\n        print(\"Best affiliation quantile:\", nu_max1)\n\n        index_max2 = np.argmax(f1_list, axis=0)\n        score_max = score_list[index_max2]\n        nu_max2 = nu_list[index_max2]\n        print('Best anomaly quantile:', nu_max2)\n\n        threshold = np.percentile(scores, 100 - nu_max1)\n        mount = 0\n        predict = np.zeros(len(scores))\n        for index, r2 in enumerate(scores):\n            if r2.item() > threshold:\n                predict[index] = 1\n                mount += 1\n    return affiliation_max, score_max, predict\n \n```\n\n`coca_debug.py`\n\n```python\nimport argparse\nimport os\nfrom datetime import datetime\n\nimport numpy as np\nimport torch\nfrom merlion.evaluate.anomaly import TSADScoreAccumulator as ScoreAcc, ScoreType\nfrom merlion.utils import TimeSeries\n\nfrom conf.coca.IOpsCompetition_Configs import Config\nfrom dataloader import data_generator4\nfrom models.COCA.coca_network.model import base_Model\nfrom models.COCA.coca_trainer.trainer import Trainer\nfrom models.reasonable_metric import reasonable_accumulator\nfrom pysearchlib.utils.util_print import print_separator\nfrom pysearchlib.utils.util_pytorch import enable_pytorch_reproduciable\nfrom ts_datasets.ts_datasets.anomaly import NAB, IOpsCompetition\nfrom utils import print_object\n\nstart_time = datetime.now()\nparser = argparse.ArgumentParser()\nhome_dir = os.getcwd()\nparser.add_argument('--experiment_description', default='Exp1', type=str,\n                    help='Experiment Description')\nparser.add_argument('--run_description', default='run1', type=str,\n                    help='Experiment Description')\nparser.add_argument('--visualization', default=True, type=bool,\n                    help='Visualize')\nparser.add_argument('--seed', default=2, type=int,\n                    help='seed value')\nparser.add_argument('--weight_decay', default=5e-4, type=float,\n                    help='Weight decay (L2 penalty) hyperparameter for COCA objective')\nparser.add_argument('--selected_dataset', default='IOpsCompetition', type=str,\n                    help='Dataset of choice: NAB, IOpsCompetition, SMAP, UCR')\nparser.add_argument('--logs_save_dir', default='experiments_logs', type=str,\n                    help='saving directory')\nparser.add_argument('--device', default='cpu', type=str,\n                    help='cpu or cuda')\nparser.add_argument('--home_path', default=home_dir, type=str,\n                    help='Project home directory')\nargs = parser.parse_args()\n\n# device = \"cuda\" if torch.cuda.is_available() else \"cpu\"\ndevice = torch.device(args.device)\nexperiment_description = args.experiment_description\ndata_type = args.selected_dataset\nmethod = 'COCA'\nrun_description = args.run_description\nselected_dataset = args.selected_dataset\nweight_decay = args.weight_decay\nvisualization = args.visualization\n\nlogs_save_dir = args.logs_save_dir\nos.makedirs(logs_save_dir, exist_ok=True)\n\nexec(f'from conf.coca.{data_type}_Configs import Config as Configs')\nconfigs = Config()\n\n# ##### fix random seeds for reproducibility ########\nSEED = args.seed\n\nexperiment_log_dir = os.path.join(logs_save_dir, experiment_description, run_description, f\"_seed_{SEED}\")\nos.makedirs(experiment_log_dir, exist_ok=True)\n\nlog_dir = experiment_log_dir\n# Load datasets\n\n# Get the lead & lag time for the dataset\n# Aggregate statistics from full dataset\nall_anomaly_num, all_test_score, all_test_scores_reasonable = [], [], []\nall_test_aff_score, all_test_aff_precision, all_test_aff_recall = [], [], []\n\nenable_pytorch_reproduciable()\ndt = IOpsCompetition()\n# dt = NAB()\ntime_series, meta_data = dt[0]\n\ntrain_data = TimeSeries.from_pd(time_series[meta_data.trainval])\ntest_data = TimeSeries.from_pd(time_series[~meta_data.trainval])\ntrain_labels = TimeSeries.from_pd(meta_data.anomaly[meta_data.trainval])\ntest_labels = TimeSeries.from_pd(meta_data.anomaly[~meta_data.trainval])\n\nprint_separator(f\"train_data.shape:{len(train_data)},test_data.shape:{len(test_data)}\")\n\n# Load Model\nmodel = base_Model(configs, device).to(device)\ntrain_dl, val_dl, test_dl, test_anomaly_window_num = data_generator4(train_data, test_data, train_labels,\n                                                                     test_labels, configs)\n\nmodel_optimizer = torch.optim.Adam(model.parameters(), lr=configs.lr, betas=(configs.beta1, configs.beta2),\n                                   weight_decay=weight_decay)\n\n# Trainer\nidx = 0\ntest_score_origin, test_aff, test_score, score_reasonable, predict = Trainer(model, model_optimizer, train_dl,\n                                                                             val_dl, test_dl, device,\n                                                                             configs, idx)\nprint_separator(\"Summary Metrics for multiple\")\nall_anomaly_num.append(test_anomaly_window_num)\nall_test_scores_reasonable.append(score_reasonable)\nall_test_aff_precision.append(test_aff[\"precision\"])\nall_test_aff_recall.append(test_aff[\"recall\"])\nall_test_aff_score.append(test_aff)\nall_test_score.append(test_score)\n\nall_anomaly_num = np.array(all_anomaly_num)\nsum_anomaly_num = np.sum(all_anomaly_num)\nall_test_aff_precision = np.array(all_test_aff_precision)\nall_test_aff_precision = all_test_aff_precision * all_anomaly_num / sum_anomaly_num\ntest_aff_precision = np.nansum(all_test_aff_precision)\nall_test_aff_recall = np.array(all_test_aff_recall)\nall_test_aff_recall = all_test_aff_recall * all_anomaly_num / sum_anomaly_num\ntest_aff_recall = np.nansum(all_test_aff_recall)\ntest_aff_f1 = 2 * (test_aff_precision * test_aff_recall) / (test_aff_precision + test_aff_recall)\n\ntotal_test_score = sum(all_test_score, ScoreAcc())\ntotal_test_scores_reasonable = sum(all_test_scores_reasonable, reasonable_accumulator())\nprint(total_test_scores_reasonable.get_all_metrics())\nprint('>' * 32)\nif configs.dataset == 'UCR':\n    print(\"UCR metrics:\\n\",\n          f\"accuracy: {total_test_scores_reasonable.get_all_metrics()}\\n\")\n\nprint(\"affiliation metrics:\\n\",\n      f\"f1:        {test_aff_f1:.5f}\\n\"\n      f\"Precision: {test_aff_precision:.5f}\\n\",\n      f\"Recall:    {test_aff_recall:.5f}\\n\"\n      \"Revised-point-adjusted metrics:\\n\\n\",\n      f\"F1 score:  {total_test_score.f1(ScoreType.RevisedPointAdjusted):.5f}\\n\",\n      f\"Precision: {total_test_score.precision(ScoreType.RevisedPointAdjusted):.5f}\\n\",\n      f\"Recall:    {total_test_score.recall(ScoreType.RevisedPointAdjusted):.5f}\\n\"\n      \"Point-adjusted metrics:\\n\\n\",\n      f\"F1 score:  {total_test_score.f1(ScoreType.PointAdjusted):.5f}\\n\",\n      f\"Precision: {total_test_score.precision(ScoreType.PointAdjusted):.5f}\\n\",\n      f\"Recall:    {total_test_score.recall(ScoreType.PointAdjusted):.5f}\\n\"\n      \"NAB Scores:\\n\\n\",\n      f\"NAB Score (balanced):       {total_test_score.nab_score():.5f}\\n\",\n      f\"NAB Score (high precision): {total_test_score.nab_score(fp_weight=0.22):.5f}\\n\",\n      f\"NAB Score (high recall):    {total_test_score.nab_score(fn_weight=2.0):.5f}\\n\"\n      )\n\nprint_separator(\"Configuration of the model\")\nprint_object(configs)\n\nend_time = datetime.now()\nprint(f\"Training time: {(end_time-start_time).total_seconds()}\")\n \n```\n","slug":"Merlion-源码分析","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a6004e4cv95k8i1wz2","content":"<p><a href=\"https://opensource.salesforce.com/Merlion/v1.3.1/tutorials/TimeSeries.html#UnivariateTimeSeries:-The-Basic-Building-Block\">https://opensource.salesforce.com/Merlion/v1.3.1/tutorials/TimeSeries.html#UnivariateTimeSeries:-The-Basic-Building-Block</a></p>\n<p><img src=\"/images/95d48e89e235281019c6eb4b57a463db03073dbf.png\" alt=\"Excalidraw/Merlion 源码分析 2022-12-16 16.06.05.excalidraw\"></p>\n<h2 id=\"图解释\">图解释</h2>\n<ul>\n<li><strong>pink areas</strong>: ground truth</li>\n<li>red curves: anomaly score</li>\n<li>blue curves: original data value<br>\n<img src=\"/images/e47a64994b7f6ef50b68a861f2b9a64078d41f30.png\" alt=\"static/attachment/Pasted image 20221216182032.png\"></li>\n</ul>\n<h2 id=\"model-get-anomaly-label\">model.get_anomaly_label</h2>\n<ol>\n<li>获取 score : <code>scores = self.get_anomaly_score(time_series, time_series_prev)</code></li>\n<li>获取标签: <code>self.post_rule(scores) if self.post_rule is not None else scores</code></li>\n</ol>\n<h2 id=\"如何设置-post-rule\">如何设置 post_rule</h2>\n<p><code>AnomScoreCalibrator(max_score=max_score)</code></p>\n<h2 id=\"Data-Format\">Data Format</h2>\n<p><code>UnivariateTimeSeries</code> and <code>TimeSeries</code>. TimeSeries is comprised of many UnivariateTimeSeries.</p>\n<h3 id=\"UnivariateTimeSeries\">UnivariateTimeSeries</h3>\n<p>UnivariateTimeSeries is contain two columns: <code>DatetimeIndex</code> and <code>UnivariateTimeSeries</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.utils <span class=\"keyword\">import</span> UnivariateTimeSeries</span><br><span class=\"line\"></span><br><span class=\"line\">kpi = UnivariateTimeSeries(</span><br><span class=\"line\">    time_stamps=df.timestamp_millis/<span class=\"number\">1000</span>,  <span class=\"comment\"># timestamps in units of seconds</span></span><br><span class=\"line\">    values=df.kpi,                         <span class=\"comment\"># time series values</span></span><br><span class=\"line\">    name=<span class=\"string\">&quot;kpi&quot;</span>                             <span class=\"comment\"># optional: a name for this univariate</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">kpi_label = UnivariateTimeSeries(</span><br><span class=\"line\">    time_stamps=df.timestamp_millis/<span class=\"number\">1000</span>,  <span class=\"comment\"># timestamps in units of seconds</span></span><br><span class=\"line\">    values=df.kpi_label                    <span class=\"comment\"># time series values</span></span><br><span class=\"line\">) </span><br></pre></td></tr></table></figure>\n<p>functions:</p>\n<ul>\n<li>convert a UnivariateTimeSeries to a regular<code> pd.Series</code>: <code>kpi.to_pd()</code></li>\n<li>access the timestamps: <code>kpi.time_stamps[:5]</code></li>\n<li>Get the datetimes: <code>kpi.index[:5]</code></li>\n<li>Get the values: <code>kpi.values[:5]</code></li>\n<li>obtain a tuple of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo separator=\"true\">,</mo><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(timestamp, value)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">im</span><span class=\"mord mathnormal\">es</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">am</span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">e</span><span class=\"mclose\">)</span></span></span></span>: <code>kpi[0]</code></li>\n<li>a slice index: <code>kpi[1:5]</code>, obtain a new UnivariateTimeSeries</li>\n<li>Iterating: <code>for t, x in kpi[:5]</code></li>\n</ul>\n<h3 id=\"TimeSeries\">TimeSeries</h3>\n<p>TimeSeries is comprised of many UnivariateTimeSeries.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">time_series_list = TimeSeries(univariates=[kpi.copy(), kpi_label.copy()]) </span><br></pre></td></tr></table></figure>\n<p>functions :</p>\n<ul>\n<li>access the names of the individual univariates: <code>time_series_list.names</code></li>\n<li>access a specific univariate via <code>time_series.univariates[name]</code></li>\n<li>iterate over univariates: <code>for univariate in time_series_dict.univariates:</code></li>\n<li>iterate over all univariates &amp; names: <code>for name, univariate in time_series_dict.items()</code></li>\n</ul>\n<h2 id=\"Anomaly-Detection-in-Merlion\">Anomaly Detection in Merlion</h2>\n<p>效果:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Precision: <span class=\"number\">0.0000</span>, Recall: <span class=\"number\">0.0000</span>, F1: <span class=\"number\">0.0000</span></span><br><span class=\"line\">Mean Time To Detect: <span class=\"number\">0</span> days <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> </span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/10b196cf5c18a6e6c44bd8477d1dd4e74d91ab83.png\" alt=\"static/attachment/Pasted image 20221216085933.png\"></p>\n<p>my implement:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> merlion.utils <span class=\"keyword\">import</span> TimeSeries</span><br><span class=\"line\"><span class=\"keyword\">from</span> ts_datasets.ts_datasets.anomaly <span class=\"keyword\">import</span> NAB</span><br><span class=\"line\"></span><br><span class=\"line\">time_series, metadata = NAB(subset=<span class=\"string\">&quot;artificialWithAnomaly&quot;</span>)[<span class=\"number\">3</span>]</span><br><span class=\"line\">train_data = TimeSeries.from_pd(time_series[metadata.trainval])</span><br><span class=\"line\">test_data = TimeSeries.from_pd(time_series[~metadata.trainval])</span><br><span class=\"line\">test_labels = TimeSeries.from_pd(metadata.anomaly[~metadata.trainval])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.models.defaults <span class=\"keyword\">import</span> DefaultDetector, DefaultDetectorConfig</span><br><span class=\"line\"></span><br><span class=\"line\">model = DefaultDetector(DefaultDetectorConfig())</span><br><span class=\"line\">model.train(train_data=train_data)</span><br><span class=\"line\">test_predict = model.get_anomaly_label(time_series=test_data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(test_predict))</span><br><span class=\"line\"><span class=\"built_in\">print</span>(test_predict)</span><br><span class=\"line\"><span class=\"comment\"># &lt;class &#x27;merlion.utils.time_series.TimeSeries&#x27;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#                      anom_score</span></span><br><span class=\"line\"><span class=\"comment\"># 2014-04-03 02:25:00         0.0</span></span><br><span class=\"line\"><span class=\"comment\"># 2014-04-03 02:30:00         0.0</span></span><br><span class=\"line\"><span class=\"comment\"># 2014-04-03 02:35:00         0.0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.plot <span class=\"keyword\">import</span> plot_anoms</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\">fig, ax = model.plot_anomaly(time_series=test_data)</span><br><span class=\"line\">plot_anoms(ax=ax, anomaly_labels=test_labels)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.evaluate.anomaly <span class=\"keyword\">import</span> TSADMetric</span><br><span class=\"line\"></span><br><span class=\"line\">p = TSADMetric.Precision.value(ground_truth=test_labels, predict=test_predict)</span><br><span class=\"line\">r = TSADMetric.Recall.value(ground_truth=test_labels, predict=test_predict)</span><br><span class=\"line\">f1 = TSADMetric.F1.value(ground_truth=test_labels, predict=test_predict)</span><br><span class=\"line\">mttd = TSADMetric.MeanTimeToDetect.value(ground_truth=test_labels, predict=test_predict)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Precision: <span class=\"subst\">&#123;p:<span class=\"number\">.4</span>f&#125;</span>, Recall: <span class=\"subst\">&#123;r:<span class=\"number\">.4</span>f&#125;</span>, F1: <span class=\"subst\">&#123;f1:<span class=\"number\">.4</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">f&quot;Mean Time To Detect: <span class=\"subst\">&#123;mttd&#125;</span>&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># Precision: 0.0000, Recall: 0.0000, F1: 0.0000</span></span><br><span class=\"line\"><span class=\"comment\"># Mean Time To Detect: 0 days 00:00:00</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<h2 id=\"支持的评估指标\">支持的评估指标</h2>\n<p><u>Merlion 支持 PW, PA, RPA 三种指标.</u></p>\n<p>The key challenge in designing an appropriate evaluation metric for time series anomaly detection lies in the fact that anomalies are almost always windows of time, rather than discrete points. Thus, while it is easy to compute the pointwise (PW) precision, recall, and F1 score of a predicted anomaly label sequence relative to the ground truth label sequence, these metrics do not reﬂect a quantity that human operators care about.</p>\n<p>Xu et al. (2018) propose point-adjusted (PA) metrics as a solution to this problem: if any point in a ground truth anomaly window is labeled as anomalous, all points in the segment are treated as true positives. If no anomalies are ﬂagged in the window, all points are labeled as false negatives. Any predicted anomalies outside of anomalous windows are treated as false positives. Precision, recall, and F1 can be computed based on these adjusted true/false positive/negative counts. However, the disadvantage of PA metrics is that they are biased to reward models for detecting long anomalies more than short ones.</p>\n<p>Hundman et al. (2018) propose revised point-adjusted (RPA) metrics as a closely related alternative: if any point in a ground truth anomaly window is labeled as anomalous, one true positive is registered. If no anomalies are ﬂagged in the window, one false negative is recorded. Any predicted anomalies outside of anomalous windows are treated as false positives. These metrics address the shortcomings of PA metrics, but they do penalize false positives more heavily than alternatives.</p>\n<p>Merlion’s TSADMetric enum supports all 3 classes of evaluation metrics (PW, PA, and RPA), as well as the mean time to detect an anomaly. By default, we evaluate RPA metrics, but users may manually specify alternatives if their application calls for it.</p>\n<h2 id=\"实现一个自定义模型的步骤\">实现一个自定义模型的步骤</h2>\n<p>inherits from <code>DetectorConfig</code>.</p>\n<p>inherits from <code>DetectorBase</code></p>\n<h2 id=\"EvaluatorConfig\">EvaluatorConfig</h2>\n<ul>\n<li><strong>train_window</strong>: the maximum duration of data we would like to train the model on. <code>None</code> means no limit.</li>\n<li><strong>retrain_freq</strong>: the frequency at which we want to re-train the model. <code>None</code> means we only train the model once on the initial training data.</li>\n</ul>\n<h2 id=\"model-threshold-test-score-是什么\">model.threshold(test_score) 是什么?</h2>\n<p>🔑 将所有小于 <code>alm_threshold </code> 的值设置为 0.</p>\n<p>本质是: <code>scores = np.where(np.abs(scores) &gt;= self.alm_threshold, scores, 0.0)</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def __call__(self, time_series: TimeSeries) -&gt; TimeSeries:</span><br><span class=\"line\">   assert (</span><br><span class=\"line\">\t  time_series.dim == 1</span><br><span class=\"line\">   ), f&quot;&#123;type(self).__name__&#125; post-rule can only be applied on single-variable time series&quot;</span><br><span class=\"line\">   if self.alm_threshold is None:</span><br><span class=\"line\">\t  raise RuntimeError(f&quot;alm_threshold is None. Please train the post-rule before attempting to use it.&quot;)</span><br><span class=\"line\">   k = time_series.names[0]</span><br><span class=\"line\">   times = time_series.univariates[k].index</span><br><span class=\"line\">   scores = time_series.univariates[k].np_values</span><br><span class=\"line\">   scores = np.where(np.isnan(scores), 0.0, scores)</span><br><span class=\"line\">   if self.abs_score:</span><br><span class=\"line\">\t  scores = np.where(np.abs(scores) &gt;= self.alm_threshold, scores, 0.0)</span><br><span class=\"line\">   else:</span><br><span class=\"line\">\t  scores = np.where(scores &gt;= self.alm_threshold, scores, 0.0)</span><br><span class=\"line\">   return TimeSeries(&#123;k: UnivariateTimeSeries(times, scores)&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"post-process-threshold\">post_process.threshold</h2>\n<p>goal: to reduce the number of false positives.</p>\n<p>将 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&lt;</mo><mi mathvariant=\"normal\">alm_threshold</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">&lt;\\operatorname{alm\\_threshold}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0044em;vertical-align:-0.31em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">alm_threshold</span></span></span></span></span> 的值设置为 0, 其他值保持不变. Zeroes all anomaly scores whose absolute value is less than the threshold</p>\n<ul>\n<li><code>scores = np.where(np.abs(scores) &gt;= self.alm_threshold, scores, 0.0)</code></li>\n<li><code>alm_threshold</code> 默认是 3</li>\n</ul>\n<p>obtain post-processed anomaly scores: <code>model.get_anomaly_label(time_series)</code></p>\n<h2 id=\"post-process-calibration\">post_process.calibration</h2>\n<p>将值转换到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> s.t. distribution of the predict score.</p>\n<p><img src=\"/images/b906e21a8f259249f0402645da7d4d16eb91a6af.png\" alt=\"static/attachment/Pasted image 20221217080117.png\"></p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>F</mi><mi>s</mi></msub><mo>:</mo><mi>R</mi><mo>−</mo><mo>&gt;</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">F_{s}: R -&gt; [0,1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> is the CDF of the absolute raw anomaly scores <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><msub><mi>s</mi><mi>t</mi></msub><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">| s_t|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">s_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is the score of the time point <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span>.</li>\n<li>essence: transfers one distribution to the other distribution</li>\n<li>Calibration is a post-processing step</li>\n</ul>\n<p>ensures that anomaly scores correspond to standard deviation units and are therefore interpretable and consistent between diﬀerent models,</p>\n<p>Calibration bridges this gap by making all anomaly scores interpretable as z-scores, i.e. values drawn from a standard normal distribution.</p>\n<h2 id=\"evaluation-EvaluatorBase\">evaluation.EvaluatorBase</h2>\n<p><strong>scenarious and problems</strong>: When a time series model is deployed live in production, training and inference are usually not performed in batch on a full time series. Rather, the model is retrained at a regular cadence</p>\n<p><strong>solutions</strong>: provide a EvaluatorBase class which implements:</p>\n<ul>\n<li>Train an initial model on recent historical training data.</li>\n<li>At a regular interval (e.g. once per day), retrain the entire model on the most recent data. This can be either the entire history, or a more limited window (e.g. 4 weeks).</li>\n<li>Obtain the model’s predictions (forecasts or anomaly scores) for the time series values that occur between re-trainings. Users may customize whether this should be done in batch, streaming, or at some intermediate cadence.</li>\n<li>Compare the model’s predictions against the ground truth (actual values for forecasting, or labeled anomalies for anomaly detection), and report quantitative evaluation metrics.</li>\n</ul>\n<p>ForecastMetric and TSADMetric: a wide range of evaluation metrics for both forecasting and anomaly detection,</p>\n<h2 id=\"model-selection\">model selection</h2>\n<ul>\n<li>split training set into the training set and validation set.</li>\n<li>Train models using the training set</li>\n<li>grab the model with the best performance on the validation split</li>\n<li>return the model after retraining the model on full training data.</li>\n</ul>\n<h2 id=\"一次-benchmark-的结果\">一次 benchmark 的结果</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python benchmark_anomaly_test.py --dataset IOpsCompetition --models IsolationForest </span><br><span class=\"line\"></span><br><span class=\"line\">Training model IsolationForest...</span><br><span class=\"line\">  0%|          | 0/29 [00:00&lt;?, ?it/s]</span><br><span class=\"line\"> </span><br><span class=\"line\">2022-12-16 23:15:27,926 (threshold:129) INFO: Threshold 2.9831 achieves F1=0.7273.</span><br><span class=\"line\">2022-12-16 23:15:27,935 (benchmark_anomaly_test:372) INFO: </span><br><span class=\"line\">Performance on time series 2/29</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:373) INFO: Revised Point-Adjusted Metrics</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:374) INFO: F1 Score:  0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:375) INFO: Precision: 0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:376) INFO: Recall:    0.0000</span><br><span class=\"line\"></span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:377) INFO: Mean Time To Detect Anomalies:  0 days 00:00:00</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:378) INFO: Mean Detected Anomaly Duration: 0 days 00:00:00</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:379) INFO: Mean Anomaly Duration:          0 days 00:59:10</span><br><span class=\"line\"></span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:382) INFO: Pointwise metrics</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:383) INFO: F1 Score:  0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:384) INFO: Precision: 0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:385) INFO: Recall:    0.0000</span><br><span class=\"line\"></span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:387) INFO: Point-Adjusted Metrics</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:388) INFO: F1 Score:  0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:389) INFO: Precision: 0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:390) INFO: Recall:    0.0000</span><br><span class=\"line\"></span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:392) INFO: NAB Scores</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:393) INFO: NAB score (balanced): 0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:394) INFO: NAB score (low FP):   0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:395) INFO: NAB score (low FN):   0.0000</span><br><span class=\"line\"></span><br><span class=\"line\">100%|██████████| 29/29 [00:20&lt;00:00,  1.41it/s]</span><br><span class=\"line\">  0%|          | 0/29 [00:00&lt;?, ?it/s]2022-12-16 23:15:28,808 (threshold:129) INFO: Threshold 3.2748 achieves F1=0.3871.</span><br><span class=\"line\">2022-12-16 23:15:28,942 (threshold:129) INFO: Threshold 2.8378 achieves PointwiseF1=0.4650.</span><br><span class=\"line\">2022-12-16 23:15:29,069 (threshold:129) INFO: Threshold 3.1780 achieves PointAdjustedF1=0.7929.</span><br><span class=\"line\">  3%|▎         | 1/29 [00:01&lt;00:29,  1.06s/it]2022-12-16 23:15:29,407 (threshold:129) INFO: Threshold 2.9831 achieves F1=0.7273.</span><br><span class=\"line\">2022-12-16 23:15:29,494 (threshold:129) INFO: Threshold 3.4093 achieves PointwiseF1=0.5455.</span><br><span class=\"line\">2022-12-16 23:15:29,532 (threshold:129) INFO: Threshold 3.4093 achieves PointAdjustedF1=0.8966.</span><br><span class=\"line\">  7%|▋         | 2/29 [00:01&lt;00:18,  1.42it/s]2022-12-16 23:15:30,324 (threshold:129) INFO: Threshold 3.1780 achieves F1=0.4356.</span><br><span class=\"line\">2022-12-16 23:15:30,455 (threshold:129) INFO: Threshold 2.7240 achieves PointwiseF1=0.4567.</span><br><span class=\"line\">2022-12-16 23:15:30,592 (threshold:129) INFO: Threshold 3.1780 achieves PointAdjustedF1=0.7210.</span><br><span class=\"line\">100%|██████████| 29/29 [00:02&lt;00:00, 10.56it/s]</span><br><span class=\"line\"></span><br><span class=\"line\">Revised point-adjusted metrics</span><br><span class=\"line\">F1 score:  0.3838</span><br><span class=\"line\">Precision: 0.5205</span><br><span class=\"line\">Recall:    0.3040</span><br><span class=\"line\"></span><br><span class=\"line\">Mean Time To Detect Anomalies:  -0 days 00:07:33</span><br><span class=\"line\">Mean Detected Anomaly Duration: 0 days 00:28:30</span><br><span class=\"line\">Mean Anomaly Duration:          0 days 00:15:53</span><br><span class=\"line\"></span><br><span class=\"line\">Pointwise metrics</span><br><span class=\"line\">F1 score:  0.3263</span><br><span class=\"line\">Precision: 0.2606</span><br><span class=\"line\">Recall:    0.4363</span><br><span class=\"line\"></span><br><span class=\"line\">Point-adjusted metrics</span><br><span class=\"line\">F1 score:  0.6375</span><br><span class=\"line\">Precision: 0.6150</span><br><span class=\"line\">Recall:    0.6618</span><br><span class=\"line\"></span><br><span class=\"line\">NAB Scores</span><br><span class=\"line\">NAB Score (balanced):       0.2070</span><br><span class=\"line\">NAB Score (high precision): 0.1997</span><br><span class=\"line\">NAB Score (high recall):    0.2393</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"一次完整的-benchmark-结果\">一次完整的 benchmark 结果</h2>\n<p>![[static/attachment/merlion_benchmark_all.txt]]</p>\n<h2 id=\"TransformSequence\">TransformSequence</h2>\n<p>存储 a set of Transforms, then call them sequentially.</p>\n<p><img src=\"/images/89a5f9a57f7aed021e92b954d81513f8deadb968.png\" alt=\"static/attachment/Pasted image 20221219090715.png\"></p>\n<p>数据变换前后:</p>\n<p><img src=\"/images/62cb674b47a91d578bc8bbdb3ed19fdd29b38215.png\" alt=\"static/attachment/Pasted image 20221219091047.png\"></p>\n<h2 id=\"Train-步骤\">Train 步骤</h2>\n<p><img src=\"/images/805829d033d591a573e71569f090a2526b87d8a0.png\" alt=\"static/attachment/Pasted image 20221219091338.png\"></p>\n<h2 id=\"DifferenceTransform-and-Shingle-multivar-skip-True-size-2-stride-1\">DifferenceTransform and Shingle(multivar_skip=True, size=2, stride=1)</h2>\n<p><a href=\"https://opensource.salesforce.com/Merlion/v1.3.1/merlion.transform.html#merlion.transform.moving_average.DifferenceTransform\">https://opensource.salesforce.com/Merlion/v1.3.1/merlion.transform.html#merlion.transform.moving_average.DifferenceTransform</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.transform.train(train_data) </span><br><span class=\"line\">train_data = self.transform(train_data) </span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>self.transform.train(train_data)</code>: Sets all trainable parameters of the transform (if any), using the input time series as training data. A possible implement : <code>merlion.transform.sequence.TransformSequence.train</code></li>\n<li><code>train_data = self.transform(train_data) </code>: 根据 <code>self.transform.train(train_data)</code> 找到的特征进行变换</li>\n</ul>\n<h2 id=\"DifferenceTransform\">DifferenceTransform</h2>\n<p>计算后一个值减去前一个值的差, 与 <code>np.diff()</code> 函数类似, <code>val[i]=val[i]-val[i-1], s.t. i&gt;=1</code></p>\n<p>input:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                         value</span><br><span class=\"line\">time                          </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">21.598011</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span>  <span class=\"number\">19.321392</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">21.399938</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">18.373916</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">18.167499</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                       ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">21.530211</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">21.958759</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">21.232358</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">19.874722</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">20.894818</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"number\">605</span> rows x <span class=\"number\">1</span> columns]</span><br></pre></td></tr></table></figure>\n<p>output:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                        value</span><br><span class=\"line\">time                         </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">2.078546</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">3.026022</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">0.206417</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">25</span>:<span class=\"number\">00</span>  <span class=\"number\">1.848682</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                      ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">1.037752</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">0.428547</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span> -<span class=\"number\">0.726401</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">1.357636</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">1.020096</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"number\">604</span> rows x <span class=\"number\">1</span> columns]</span><br></pre></td></tr></table></figure>\n<h4 id=\"train\">.train</h4>\n<p>does not do anything in method <code>.train</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">train</span>(<span class=\"params\">self, time_series: TimeSeries</span>):</span><br><span class=\"line\">   <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"call\"><strong>call</strong></h4>\n<p>核心代码:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UnivariateTimeSeries.from_pd(var.diff())[<span class=\"number\">1</span>:] </span><br></pre></td></tr></table></figure>\n<h2 id=\"Shingle\">Shingle</h2>\n<p><code>Shingle</code> 可以理解为滑动窗口, 当 <code>Shingle(size=10, stride=1)</code> 时,数据就是:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  ...  kpi_6  kpi_7  kpi_8  kpi_9</span><br><span class=\"line\">time                                             ...                            </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>  ...    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>  ...    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>  ...    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<p>let x(t) = value_t be the value of the time series at time index t. Then, the output vector for time index t will be :code:[x(t - size + 1), …, x(t - 1), x(t)].</p>\n<p>input:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                        value</span><br><span class=\"line\">time                         </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">2.078546</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">3.026022</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">0.206417</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">25</span>:<span class=\"number\">00</span>  <span class=\"number\">1.848682</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                      ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">1.037752</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">0.428547</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span> -<span class=\"number\">0.726401</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">1.357636</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">1.020096</span> </span><br></pre></td></tr></table></figure>\n<p>output: <code>(size = &#123;int&#125; 2 stride = &#123;int&#125; 1)</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                      value_0   value_1</span><br><span class=\"line\">time                                   </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span> -<span class=\"number\">2.276619</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span>  <span class=\"number\">2.078546</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">2.078546</span> -<span class=\"number\">3.026022</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">3.026022</span> -<span class=\"number\">0.206417</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">25</span>:<span class=\"number\">00</span> -<span class=\"number\">0.206417</span>  <span class=\"number\">1.848682</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                      ...       ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">0.869541</span>  <span class=\"number\">1.037752</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">1.037752</span>  <span class=\"number\">0.428547</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">0.428547</span> -<span class=\"number\">0.726401</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">0.726401</span> -<span class=\"number\">1.357636</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">1.357636</span>  <span class=\"number\">1.020096</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"number\">604</span> rows x <span class=\"number\">2</span> columns]</span><br></pre></td></tr></table></figure>\n<h4 id=\"TRAIN\"><code>.TRAIN</code></h4>\n<p>Dose not do anything.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">train</span>(<span class=\"params\">self, time_series: TimeSeries</span>):</span><br><span class=\"line\">   <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"call-2\"><code>__call__</code></h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Left-pad the time series <span class=\"keyword\">with</span> the first value </span><br></pre></td></tr></table></figure>\n<p><code>size=3 and stride=2</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">t=4,</span><br><span class=\"line\">t-3+1=2</span><br><span class=\"line\">[2,3,4]</span><br><span class=\"line\"></span><br><span class=\"line\">t=5</span><br><span class=\"line\">[3,4,5]</span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-2\">Shingle()</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> merlion.transform.resample <span class=\"keyword\">import</span> Shingle</span><br><span class=\"line\"><span class=\"keyword\">from</span> pysearchlib.utils.util_merlion <span class=\"keyword\">import</span> generate_random_timeseries</span><br><span class=\"line\"></span><br><span class=\"line\">datetime = generate_random_timeseries()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;=============== source =============&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(datetime)</span><br><span class=\"line\"></span><br><span class=\"line\">sle = Shingle()</span><br><span class=\"line\">sle.train(datetime)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;=============== Target =============&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(sle(datetime)) </span><br></pre></td></tr></table></figure>\n<p>output:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0</span><br><span class=\"line\">time                      </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-2\">Shingle(size=2)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1</span><br><span class=\"line\">time                             </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-3\">Shingle(size=3)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2</span><br><span class=\"line\">time                                    </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-5\">Shingle(size=5)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4</span><br><span class=\"line\">time                                                  </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-5-stride-1\">Shingle(size=5, stride=1)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4</span><br><span class=\"line\">time                                                  </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-5-stride-2\">Shingle(size=5, stride=2)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4</span><br><span class=\"line\">time                                                  </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-5-stride-4\">Shingle(size=5, stride=4)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4</span><br><span class=\"line\">time                                                  </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-2-stride-2\">Shingle(size=2, stride=2)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1</span><br><span class=\"line\">time                             </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"如何添加-pre-process\">如何添加 pre_process</h2>\n<p>如下的 <code>TransformSequence</code> 序列中, 数据处理步骤变为:</p>\n<ol>\n<li>先归一化数据 <code>MeanVarNormalize()</code></li>\n<li>生成窗口数据 <code>Shingle(size=32)</code> 生成窗口大小为 32 的窗口数据, 参考 <a href='#Shingle(size=5)'>#Shingle(size=5)</a></li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Import a data processing transform</span></span><br><span class=\"line\">cfg = IsolationForestConfig(n_estimators=<span class=\"number\">300</span>,</span><br><span class=\"line\">                            transform=TransformSequence([</span><br><span class=\"line\">                                MeanVarNormalize(),</span><br><span class=\"line\">                                Shingle(size=<span class=\"number\">32</span>)])</span><br><span class=\"line\">                            )</span><br><span class=\"line\">model = IsolationForest(cfg)</span><br></pre></td></tr></table></figure>\n<h2 id=\"MeanVarNormalize-执行过程\">MeanVarNormalize 执行过程</h2>\n<ol>\n<li>调用 <code>train</code> 获取数据 均值和方差</li>\n<li>通过 <code>f(data)</code> 完成数据处理.<br>\n<img src=\"/images/ba590021c2ca65431ff473391333a0f61f54c540.png\" alt=\"static/attachment/Pasted image 20221220100832.png\"><br>\n<img src=\"/images/4cd5f804d2c895b49a888d419c0ed3b12d63e9d3.png\" alt=\"static/attachment/Pasted image 20221220101004.png\"></li>\n</ol>\n<h2 id=\"DetectorConfig\">DetectorConfig</h2>\n<p><img src=\"/images/e779b3094a0f30317b99da6f3c52741ec9ebcb9d.png\" alt=\"static/attachment/Pasted image 20221220104515.png\"></p>\n<h2 id=\"what-the-predict-value-in-accumulate-tsad-score\">what the predict value in accumulate_tsad_score ?</h2>\n<p>Q: I want to know whether the predict is a score(float between 0 and 1) or a label(0, or 1)</p>\n<p>A: From the source code, it is a label(0, or 1). In other words, the value is one of 0, 1.</p>\n<ul>\n<li>source code: <code>predict.np_values.astype(bool)</code></li>\n</ul>\n<p><img src=\"/images/e27c6193118af9b3adffe8d3dc176ab6935175b3.png\" alt=\"static/attachment/Pasted image 20221220165551.png\"></p>\n<h3 id=\"example-max-delay-sec-4\">example: max_delay_sec=4</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pprint</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.evaluate.anomaly <span class=\"keyword\">import</span> accumulate_tsad_score, ScoreType</span><br><span class=\"line\"><span class=\"keyword\">from</span> pysearchlib.utils.util_merlion <span class=\"keyword\">import</span> generate_timeseries_from_list</span><br><span class=\"line\"></span><br><span class=\"line\">ground_truth = \\</span><br><span class=\"line\">    [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">predict = \\</span><br><span class=\"line\">    [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">ats = accumulate_tsad_score(</span><br><span class=\"line\">    ground_truth=generate_timeseries_from_list(ground_truth),</span><br><span class=\"line\">    predict=generate_timeseries_from_list(predict),</span><br><span class=\"line\">    max_delay_sec=<span class=\"number\">4</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pprint.pprint(&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;Pointwise Precision&quot;</span>: ats.precision(score_type=ScoreType.Pointwise),</span><br><span class=\"line\">    <span class=\"string\">&quot;Pointwise Recall&quot;</span>: ats.recall(score_type=ScoreType.Pointwise),</span><br><span class=\"line\">    <span class=\"string\">&quot;Pointwise F1&quot;</span>: ats.f1(score_type=ScoreType.Pointwise),</span><br><span class=\"line\">    <span class=\"string\">&quot;PointAdjusted Precision&quot;</span>: ats.precision(score_type=ScoreType.PointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;PointAdjusted Recall&quot;</span>: ats.recall(score_type=ScoreType.PointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;PointAdjusted F1&quot;</span>: ats.f1(score_type=ScoreType.PointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;RevisedPointAdjusted Precision&quot;</span>: ats.precision(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;RevisedPointAdjusted Recall&quot;</span>: ats.recall(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;RevisedPointAdjusted F1&quot;</span>: ats.f1(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<p>output:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&#x27;PointAdjusted F1&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Recall&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise F1&#x27;</span>: <span class=\"number\">0.4</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Recall&#x27;</span>: <span class=\"number\">0.25</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted F1&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Recall&#x27;</span>: <span class=\"number\">1.0</span>&#125; </span><br></pre></td></tr></table></figure>\n<h3 id=\"example-max-delay-sec-3-or-2-or-1\">example: max_delay_sec=3 or 2 or 1</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&#x27;PointAdjusted F1&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Precision&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Recall&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise F1&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Precision&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Recall&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted F1&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Precision&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Recall&#x27;</span>: <span class=\"number\">0.0</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"example-max-delay-sec-None-or-0\">example: max_delay_sec=None or 0</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&#x27;PointAdjusted F1&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Recall&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise F1&#x27;</span>: <span class=\"number\">0.4</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Recall&#x27;</span>: <span class=\"number\">0.25</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted F1&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Recall&#x27;</span>: <span class=\"number\">1.0</span></span><br><span class=\"line\"> &#125; </span><br></pre></td></tr></table></figure>\n<h2 id=\"Best-affiliation-quantile-是什么\">Best affiliation quantile 是什么?</h2>\n<p>在 <code>predict = score &gt; np.percentile(quantile)</code> 中, quantile 取多少时, predict 获得的结果 (如 F1) 最好?</p>\n<h2 id=\"修改后的结果\">修改后的结果</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/Users/sunwu/miniforge3/envs/sw_torch_1_10/<span class=\"built_in\">bin</span>/python /Users/sunwu/SW-Research/COCA-main/coca_debug.py </span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">146255</span></span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">149130</span></span><br><span class=\"line\">Best affiliation F1 score: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.9991141275746687</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7897834771523201</span>, <span class=\"string\">&#x27;individual_precision_probabilities&#x27;</span>: [<span class=\"number\">1.0</span>, <span class=\"number\">0.9983640081799591</span>, nan, <span class=\"number\">1.0</span>, <span class=\"number\">0.9987096774193549</span>, nan, nan, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.9959893048128342</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.9986893840104849</span>, <span class=\"number\">0.9976171564733916</span>, <span class=\"number\">1.0</span>], <span class=\"string\">&#x27;individual_recall_probabilities&#x27;</span>: [<span class=\"number\">0.8573256456835953</span>, <span class=\"number\">0.9995910020449897</span>, <span class=\"number\">0</span>, <span class=\"number\">0.999237933954276</span>, <span class=\"number\">0.9995698924731182</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9995485327313769</span>, <span class=\"number\">0.994773519163763</span>, <span class=\"number\">0.9991492464754497</span>, <span class=\"number\">0.9996639784946236</span>, <span class=\"number\">0.9997589780670041</span>, <span class=\"number\">0.9997219905476786</span>, <span class=\"number\">0.9984114376489277</span>, <span class=\"number\">1.0</span>], <span class=\"string\">&#x27;individual_precision_distances&#x27;</span>: [<span class=\"number\">0.0</span>, <span class=\"number\">0.16666666666666666</span>, nan, <span class=\"number\">0.0</span>, <span class=\"number\">0.25</span>, nan, nan, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0625</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0625</span>, <span class=\"number\">0.5</span>, <span class=\"number\">0.0</span>], <span class=\"string\">&#x27;individual_recall_distances&#x27;</span>: [<span class=\"number\">41.054545454545455</span>, <span class=\"number\">0.16666666666666666</span>, inf, <span class=\"number\">0.225</span>, <span class=\"number\">0.25</span>, inf, inf, <span class=\"number\">0.25</span>, <span class=\"number\">2.25</span>, <span class=\"number\">0.1590909090909091</span>, <span class=\"number\">0.25</span>, <span class=\"number\">0.25</span>, <span class=\"number\">0.1590909090909091</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>]&#125;</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.2520204081632653</span></span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.23977551020408164</span></span><br><span class=\"line\">Best affiliation F1 score: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.8333357886680556</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7724293430234433</span>, <span class=\"string\">&#x27;individual_precision_probabilities&#x27;</span>: [<span class=\"number\">0.6105147261216626</span>, <span class=\"number\">0.9862155388471178</span>, <span class=\"number\">0.9976095617529881</span>, <span class=\"number\">0.9987376393856512</span>, nan, <span class=\"number\">1.0</span>, nan, nan, <span class=\"number\">0.9984779299847792</span>, <span class=\"number\">0.9273927392739273</span>, <span class=\"number\">0.9982847341337907</span>, <span class=\"number\">0.9968085106382979</span>, <span class=\"number\">0.8834399431414357</span>, nan, <span class=\"number\">0.9884337349397591</span>, nan, <span class=\"number\">0.9989203195854027</span>, <span class=\"number\">0.9378486055776891</span>, <span class=\"number\">0.8833289896620624</span>, <span class=\"number\">0.5492788461538463</span>, <span class=\"number\">0.9656746031746032</span>, <span class=\"number\">0.9627329192546583</span>, nan, <span class=\"number\">0.1288445552784705</span>, <span class=\"number\">0.7963810769566165</span>, <span class=\"number\">0.6262121743194298</span>, <span class=\"number\">0.9969696969696971</span>, nan, <span class=\"number\">1.0</span>, <span class=\"number\">0.5115157562151824</span>, <span class=\"number\">0.5363573883161511</span>, <span class=\"number\">0.8246268656716417</span>, <span class=\"number\">0.961038961038961</span>, <span class=\"number\">0.5798104956268222</span>, <span class=\"number\">0.9954128440366973</span>, <span class=\"number\">0.9805084745762711</span>, <span class=\"number\">0.5714285714285715</span>, <span class=\"number\">0.3541666666666667</span>, <span class=\"number\">1.0</span>, nan, <span class=\"number\">0.976701410177805</span>, <span class=\"number\">0.9266450916936354</span>, nan, <span class=\"number\">0.7343277565007055</span>, <span class=\"number\">0.9352179034157833</span>, <span class=\"number\">0.8568421052631578</span>, nan, <span class=\"number\">0.6729717199814558</span>, <span class=\"number\">0.6813521406822842</span>, <span class=\"number\">0.8780609695152424</span>, <span class=\"number\">0.877455219271155</span>, <span class=\"number\">0.49257876089246383</span>, <span class=\"number\">0.9967689822294022</span>, <span class=\"number\">0.6989337822671156</span>, <span class=\"number\">0.8369019296854349</span>, <span class=\"number\">1.0</span>, nan, <span class=\"number\">0.9147130582369788</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.926131850675139</span>, <span class=\"number\">0.9953175299970733</span>, <span class=\"number\">0.5522321428571428</span>], <span class=\"string\">&#x27;individual_recall_probabilities&#x27;</span>: [<span class=\"number\">0.9892871888639849</span>, <span class=\"number\">0.9969298245614034</span>, <span class=\"number\">0.998406374501992</span>, <span class=\"number\">0.9991584262571008</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9818840579710145</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9989852866565195</span>, <span class=\"number\">0.9390470297029704</span>, <span class=\"number\">0.9996361557253496</span>, <span class=\"number\">0.9985815602836879</span>, <span class=\"number\">0.9995938673977053</span>, <span class=\"number\">0</span>, <span class=\"number\">0.992552026286966</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9997840639170805</span>, <span class=\"number\">0.9850137909898866</span>, <span class=\"number\">0.9993602956855497</span>, <span class=\"number\">0.9997996794871796</span>, <span class=\"number\">0.988095238095238</span>, <span class=\"number\">0.9881422924901186</span>, <span class=\"number\">0</span>, <span class=\"number\">0.12967581047381538</span>, <span class=\"number\">0.9960758665794637</span>, <span class=\"number\">0.9996494917630565</span>, <span class=\"number\">0.9992424242424242</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9828132066938037</span>, <span class=\"number\">0.9998752806186082</span>, <span class=\"number\">0.9994845360824742</span>, <span class=\"number\">0.9371643204432384</span>, <span class=\"number\">0.9896694214876033</span>, <span class=\"number\">0.6016763848396501</span>, <span class=\"number\">0.9986238532110092</span>, <span class=\"number\">0.9993220338983051</span>, <span class=\"number\">0.7142857142857143</span>, <span class=\"number\">0.5902777777777778</span>, <span class=\"number\">0.9006410256410257</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9779276517473943</span>, <span class=\"number\">0.9902912621359224</span>, <span class=\"number\">0</span>, <span class=\"number\">0.7347309010280185</span>, <span class=\"number\">0.9834501987632508</span>, <span class=\"number\">0.9484210526315788</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9997681965693093</span>, <span class=\"number\">0.9998912570682905</span>, <span class=\"number\">0.9370314842578711</span>, <span class=\"number\">0.9998034701555393</span>, <span class=\"number\">0.9998563631140476</span>, <span class=\"number\">0.9973074851911686</span>, <span class=\"number\">0.707351290684624</span>, <span class=\"number\">0.9994713190589479</span>, <span class=\"number\">0.9997750787224471</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9997878434284502</span>, <span class=\"number\">0.9997306941358648</span>, <span class=\"number\">0.9265289912629071</span>, <span class=\"number\">0.9997366110623354</span>, <span class=\"number\">0.9970238095238095</span>], <span class=\"string\">&#x27;individual_precision_distances&#x27;</span>: [<span class=\"number\">686.0</span>, <span class=\"number\">0.07142857142857142</span>, <span class=\"number\">0.5</span>, <span class=\"number\">0.5</span>, nan, <span class=\"number\">0.0</span>, nan, nan, <span class=\"number\">0.25</span>, <span class=\"number\">2.0</span>, <span class=\"number\">0.0625</span>, <span class=\"number\">0.75</span>, <span class=\"number\">130.66666666666666</span>, nan, <span class=\"number\">0.1</span>, nan, <span class=\"number\">0.75</span>, <span class=\"number\">12.416666666666666</span>, <span class=\"number\">143.05555555555554</span>, <span class=\"number\">561.1875</span>, <span class=\"number\">24.0</span>, <span class=\"number\">0.07142857142857142</span>, nan, <span class=\"number\">416.5</span>, <span class=\"number\">272.5</span>, <span class=\"number\">529.7083333333334</span>, <span class=\"number\">0.16666666666666666</span>, nan, <span class=\"number\">0.0</span>, <span class=\"number\">927.4166666666666</span>, <span class=\"number\">798.0</span>, <span class=\"number\">52.7</span>, <span class=\"number\">0.07142857142857142</span>, <span class=\"number\">547.0</span>, <span class=\"number\">2.0833333333333335</span>, <span class=\"number\">1.5394736842105263</span>, <span class=\"number\">0.75</span>, <span class=\"number\">2.5</span>, <span class=\"number\">0.0</span>, nan, <span class=\"number\">2.5</span>, <span class=\"number\">0.6666666666666666</span>, nan, <span class=\"number\">328.5</span>, <span class=\"number\">75.83333333333333</span>, <span class=\"number\">1.4</span>, nan, <span class=\"number\">637.2</span>, <span class=\"number\">535.5714285714286</span>, <span class=\"number\">20.166666666666668</span>, <span class=\"number\">191.75</span>, <span class=\"number\">783.4166666666666</span>, <span class=\"number\">1.5</span>, <span class=\"number\">535.0</span>, <span class=\"number\">307.5</span>, <span class=\"number\">0.0</span>, nan, <span class=\"number\">102.31818181818181</span>, <span class=\"number\">0.0</span>, <span class=\"number\">55.5</span>, <span class=\"number\">0.2222222222222222</span>, <span class=\"number\">475.0</span>], <span class=\"string\">&#x27;individual_recall_distances&#x27;</span>: [<span class=\"number\">10.0</span>, <span class=\"number\">0.175</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, inf, <span class=\"number\">0.4166666666666667</span>, inf, inf, <span class=\"number\">0.6666666666666666</span>, <span class=\"number\">6.15625</span>, <span class=\"number\">0.1590909090909091</span>, <span class=\"number\">0.6666666666666666</span>, <span class=\"number\">0.3333333333333333</span>, inf, <span class=\"number\">0.7727272727272727</span>, inf, <span class=\"number\">0.25</span>, <span class=\"number\">4.701923076923077</span>, <span class=\"number\">0.4090909090909091</span>, <span class=\"number\">0.25</span>, <span class=\"number\">7.5</span>, <span class=\"number\">0.2727272727272727</span>, inf, <span class=\"number\">417.5</span>, <span class=\"number\">3.0</span>, <span class=\"number\">0.25</span>, <span class=\"number\">0.16666666666666666</span>, inf, <span class=\"number\">0.8636363636363636</span>, <span class=\"number\">0.125</span>, <span class=\"number\">0.625</span>, <span class=\"number\">19.5</span>, <span class=\"number\">0.22727272727272727</span>, <span class=\"number\">520.0</span>, <span class=\"number\">1.125</span>, <span class=\"number\">0.1</span>, <span class=\"number\">1.5</span>, <span class=\"number\">2.5</span>, <span class=\"number\">0.3333333333333333</span>, inf, <span class=\"number\">9.0</span>, <span class=\"number\">0.25</span>, inf, <span class=\"number\">329.0</span>, <span class=\"number\">15.0</span>, <span class=\"number\">1.225</span>, inf, <span class=\"number\">0.25</span>, <span class=\"number\">0.125</span>, <span class=\"number\">10.5</span>, <span class=\"number\">0.1590909090909091</span>, <span class=\"number\">0.125</span>, <span class=\"number\">2.5</span>, <span class=\"number\">521.5</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.25</span>, inf, <span class=\"number\">0.13636363636363635</span>, <span class=\"number\">0.3333333333333333</span>, <span class=\"number\">66.0</span>, <span class=\"number\">0.075</span>, <span class=\"number\">2.5</span>]&#125;</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.301</span></span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.0683469387755102</span></span><br><span class=\"line\">Valid affiliation precision: <span class=\"number\">0.9991</span></span><br><span class=\"line\">Valid affiliation recall: <span class=\"number\">0.7898</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RevisedPointAdjusted F1: <span class=\"number\">0.7097</span>  </span><br><span class=\"line\">Valid RevisedPointAdjusted precision: <span class=\"number\">0.6875</span> </span><br><span class=\"line\">Valid RevisedPointAdjusted recall: <span class=\"number\">0.7333</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Evaluate  is Done ! #########################</span></span><br><span class=\"line\">Test affiliation precision: <span class=\"number\">0.8333</span> </span><br><span class=\"line\">Test affiliation recall: <span class=\"number\">0.7724</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RevisedPointAdjusted F1: <span class=\"number\">0.4259</span></span><br><span class=\"line\">Test RevisedPointAdjusted precision: <span class=\"number\">0.5000</span></span><br><span class=\"line\">Test RevisedPointAdjusted recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========Summary Metrics <span class=\"keyword\">for</span> multiple</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;accuracy&#x27;</span>: <span class=\"number\">0.0</span>&#125;</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.83334</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.77243</span></span><br><span class=\"line\">f1:        <span class=\"number\">0.80173</span></span><br><span class=\"line\">Revised-point-adjusted metrics:</span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.42593</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.50000</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.37097</span></span><br><span class=\"line\">Point-adjusted metrics:</span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.43243</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.86857</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.28788</span></span><br><span class=\"line\">NAB Scores:</span><br><span class=\"line\"> NAB Score (balanced):       <span class=\"number\">0.32826</span></span><br><span class=\"line\"> NAB Score (high precision): <span class=\"number\">0.32342</span></span><br><span class=\"line\"> NAB Score (high recall):    <span class=\"number\">0.34250</span></span><br><span class=\"line\">seed: <span class=\"number\">2</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========Configuration of the model</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">dataset:IOpsCompetition</span><br><span class=\"line\">input_channels:<span class=\"number\">1</span></span><br><span class=\"line\">kernel_size:<span class=\"number\">4</span></span><br><span class=\"line\">stride:<span class=\"number\">1</span></span><br><span class=\"line\">final_out_channels:<span class=\"number\">32</span></span><br><span class=\"line\">hidden_size:<span class=\"number\">64</span></span><br><span class=\"line\">num_layers:<span class=\"number\">3</span></span><br><span class=\"line\">project_channels:<span class=\"number\">20</span></span><br><span class=\"line\">dropout:<span class=\"number\">0.45</span></span><br><span class=\"line\">features_len:<span class=\"number\">6</span></span><br><span class=\"line\">window_size:<span class=\"number\">16</span></span><br><span class=\"line\">time_step:<span class=\"number\">2</span></span><br><span class=\"line\">num_epoch:<span class=\"number\">5</span></span><br><span class=\"line\">freeze_length_epoch:<span class=\"number\">2</span></span><br><span class=\"line\">change_center_epoch:<span class=\"number\">1</span></span><br><span class=\"line\">center_eps:<span class=\"number\">0.1</span></span><br><span class=\"line\">omega1:<span class=\"number\">1</span></span><br><span class=\"line\">omega2:<span class=\"number\">0.1</span></span><br><span class=\"line\">beta1:<span class=\"number\">0.9</span></span><br><span class=\"line\">beta2:<span class=\"number\">0.99</span></span><br><span class=\"line\">lr:<span class=\"number\">0.0001</span></span><br><span class=\"line\">drop_last:<span class=\"literal\">False</span></span><br><span class=\"line\">batch_size:<span class=\"number\">512</span></span><br><span class=\"line\">nu:<span class=\"number\">0.001</span></span><br><span class=\"line\">detect_nu:<span class=\"number\">0.0015</span></span><br><span class=\"line\">threshold_determine:floating</span><br><span class=\"line\">objective:soft-boundary</span><br><span class=\"line\">loss_type:distance</span><br><span class=\"line\">augmentation:&lt;conf.coca.IOpsCompetition_Configs.augmentations <span class=\"built_in\">object</span> at <span class=\"number\">0x140958190</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Process finished <span class=\"keyword\">with</span> exit code <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<h3 id=\"修改好的实验代码\">修改好的实验代码</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/Users/sunwu/miniforge3/envs/sw_torch_1_10/<span class=\"built_in\">bin</span>/python /Users/sunwu/SW-Research/COCA-main/coca_debug.py </span><br><span class=\"line\">&lt;frozen importlib._bootstrap&gt;:<span class=\"number\">219</span>: RuntimeWarning: scipy._lib.messagestream.MessageStream size changed, may indicate binary incompatibility. Expected <span class=\"number\">56</span> <span class=\"keyword\">from</span> C header, got <span class=\"number\">64</span> <span class=\"keyword\">from</span> PyObject</span><br><span class=\"line\">plotly <span class=\"keyword\">not</span> installed, so plotly visualizations will <span class=\"keyword\">not</span> work. Try installing Merlion <span class=\"keyword\">with</span> optional dependencies using `pip install salesforce-merlion[plot]` <span class=\"keyword\">or</span> `pip install `salesforce-merlion[<span class=\"built_in\">all</span>]`.</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t train_data.shape:<span class=\"number\">146255</span>,test_data.shape:<span class=\"number\">149130</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Training started ....</span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">1</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">396.1572</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">115.7170</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">109.9178</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">2</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">1.4987</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.5217</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.5218</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">3</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.5671</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.4676</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.4677</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">4</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.4959</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.3880</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.3884</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">5</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.4482</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.3708</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.3710</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Start to evaluate! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Calculating validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.2520204081632653</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.9991141275746687</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7897834771523201</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.23977551020408164</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.7096774193548386</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.6875</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7333333333333333</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Calculating testing metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.301</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.8333357886680556</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7724293430234433</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.0683469387755102</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.42592592592592593</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.5</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.3709677419354839</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Valid affiliation precision: <span class=\"number\">0.9991</span></span><br><span class=\"line\">Valid affiliation recall: <span class=\"number\">0.7898</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RevisedPointAdjusted F1: <span class=\"number\">0.7097</span>  </span><br><span class=\"line\">Valid RevisedPointAdjusted precision: <span class=\"number\">0.6875</span> </span><br><span class=\"line\">Valid RevisedPointAdjusted recall: <span class=\"number\">0.7333</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Testing metric</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Test affiliation precision: <span class=\"number\">0.8333</span> </span><br><span class=\"line\">Test affiliation recall: <span class=\"number\">0.7724</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RevisedPointAdjusted F1: <span class=\"number\">0.4259</span></span><br><span class=\"line\">Test RevisedPointAdjusted precision: <span class=\"number\">0.5000</span></span><br><span class=\"line\">Test RevisedPointAdjusted recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Summary Metrics <span class=\"keyword\">for</span> multiple</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;accuracy&#x27;</span>: <span class=\"number\">0.0</span>&#125;</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> f1:        <span class=\"number\">0.80173</span></span><br><span class=\"line\">Precision: <span class=\"number\">0.83334</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.77243</span></span><br><span class=\"line\">Revised-point-adjusted metrics:</span><br><span class=\"line\"></span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.42593</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.50000</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.37097</span></span><br><span class=\"line\">Point-adjusted metrics:</span><br><span class=\"line\"></span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.43243</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.86857</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.28788</span></span><br><span class=\"line\">NAB Scores:</span><br><span class=\"line\"></span><br><span class=\"line\"> NAB Score (balanced):       <span class=\"number\">0.32826</span></span><br><span class=\"line\"> NAB Score (high precision): <span class=\"number\">0.32342</span></span><br><span class=\"line\"> NAB Score (high recall):    <span class=\"number\">0.34250</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Configuration of the model</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">dataset:IOpsCompetition</span><br><span class=\"line\">input_channels:<span class=\"number\">1</span></span><br><span class=\"line\">kernel_size:<span class=\"number\">4</span></span><br><span class=\"line\">stride:<span class=\"number\">1</span></span><br><span class=\"line\">final_out_channels:<span class=\"number\">32</span></span><br><span class=\"line\">hidden_size:<span class=\"number\">64</span></span><br><span class=\"line\">num_layers:<span class=\"number\">3</span></span><br><span class=\"line\">project_channels:<span class=\"number\">20</span></span><br><span class=\"line\">dropout:<span class=\"number\">0.45</span></span><br><span class=\"line\">features_len:<span class=\"number\">6</span></span><br><span class=\"line\">window_size:<span class=\"number\">16</span></span><br><span class=\"line\">time_step:<span class=\"number\">2</span></span><br><span class=\"line\">num_epoch:<span class=\"number\">5</span></span><br><span class=\"line\">freeze_length_epoch:<span class=\"number\">2</span></span><br><span class=\"line\">change_center_epoch:<span class=\"number\">1</span></span><br><span class=\"line\">center_eps:<span class=\"number\">0.1</span></span><br><span class=\"line\">omega1:<span class=\"number\">1</span></span><br><span class=\"line\">omega2:<span class=\"number\">0.1</span></span><br><span class=\"line\">beta1:<span class=\"number\">0.9</span></span><br><span class=\"line\">beta2:<span class=\"number\">0.99</span></span><br><span class=\"line\">lr:<span class=\"number\">0.0001</span></span><br><span class=\"line\">drop_last:<span class=\"literal\">False</span></span><br><span class=\"line\">batch_size:<span class=\"number\">512</span></span><br><span class=\"line\">nu:<span class=\"number\">0.001</span></span><br><span class=\"line\">detect_nu:<span class=\"number\">0.0015</span></span><br><span class=\"line\">threshold_determine:floating</span><br><span class=\"line\">objective:soft-boundary</span><br><span class=\"line\">loss_type:distance</span><br><span class=\"line\">augmentation:&lt;conf.coca.IOpsCompetition_Configs.augmentations <span class=\"built_in\">object</span> at <span class=\"number\">0x15f7583d0</span>&gt;</span><br><span class=\"line\">Training time: <span class=\"number\">218.982158</span></span><br><span class=\"line\"></span><br><span class=\"line\">Process finished <span class=\"keyword\">with</span> exit code <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<p><code>anomaly_predict.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pprint</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> affiliation.generics <span class=\"keyword\">import</span> convert_vector_to_events</span><br><span class=\"line\"><span class=\"keyword\">from</span> affiliation.metrics <span class=\"keyword\">import</span> pr_from_events</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.evaluate.anomaly <span class=\"keyword\">import</span> accumulate_tsad_score, ScoreType</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.utils <span class=\"keyword\">import</span> TimeSeries</span><br><span class=\"line\"><span class=\"keyword\">from</span> models.reasonable_metric <span class=\"keyword\">import</span> tsad_reasonable</span><br><span class=\"line\"><span class=\"keyword\">from</span> affiliation.generics <span class=\"keyword\">import</span> convert_vector_to_events</span><br><span class=\"line\"><span class=\"keyword\">from</span> affiliation.metrics <span class=\"keyword\">import</span> pr_from_events</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">ad_predict</span>(<span class=\"params\">target, scores, mode, nu</span>):</span><br><span class=\"line\">    if_aff = np.count_nonzero(target)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">        events_gt = convert_vector_to_events(target)</span><br><span class=\"line\">    target = TimeSeries.from_pd(pd.DataFrame(target))</span><br><span class=\"line\">    scores = np.array(scores)</span><br><span class=\"line\">    <span class=\"comment\"># standardization</span></span><br><span class=\"line\">    mean = np.mean(scores)</span><br><span class=\"line\">    std = np.std(scores)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> std != <span class=\"number\">0</span>:</span><br><span class=\"line\">        scores = (scores - mean) / std</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># For UCR dataset, there is only one anomaly period in the test set.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> mode == <span class=\"string\">&#x27;one-anomaly&#x27;</span>:</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        threshold = np.<span class=\"built_in\">max</span>(scores, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        max_number = np.<span class=\"built_in\">sum</span>(scores == threshold)</span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> max_number &lt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">            <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> r2.item() &gt;= threshold:</span><br><span class=\"line\">                    predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                    mount += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">            events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">            Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">            affiliation_max = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            affiliation_max = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Fixed threshold</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> mode == <span class=\"string\">&#x27;fix&#x27;</span>:</span><br><span class=\"line\">        detect_nu = <span class=\"number\">100</span> * (<span class=\"number\">1</span> - nu)</span><br><span class=\"line\">        threshold = np.percentile(scores, detect_nu)</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r2.item() &gt; threshold:</span><br><span class=\"line\">                predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                mount += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">            events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">            Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">            affiliation_max = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            affiliation_max = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Floating threshold</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"comment\"># Set the anomaly  percentile to [0.001, 0.3] (100 - np.max(nu_list)=99.7 )</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># To reduce the quantity to calculate</span></span><br><span class=\"line\">        <span class=\"comment\"># nu_list = np.arange(1, 301) / 1e3</span></span><br><span class=\"line\">        nu_list = np.linspace(<span class=\"number\">1</span>, <span class=\"number\">301</span>, <span class=\"number\">50</span>) / <span class=\"number\">1e3</span>  <span class=\"comment\"># nu_list is in [0.001,0.30]</span></span><br><span class=\"line\">        f1_revised_point_adjusted_list, accumulate_tsad_score_list, f1_affiliation_list, affiliation_metric_list = [], [], [], []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> detect_nu <span class=\"keyword\">in</span> nu_list:</span><br><span class=\"line\">            threshold = np.percentile(scores, <span class=\"number\">100</span> - detect_nu)</span><br><span class=\"line\">            predict = np.where(scores &gt; threshold, <span class=\"number\">1</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">            dic = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">                events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">                Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">                affiliation_metric = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">                dic[<span class=\"string\">&quot;precision&quot;</span>] = affiliation_metric[<span class=\"string\">&#x27;precision&#x27;</span>]</span><br><span class=\"line\">                dic[<span class=\"string\">&quot;recall&quot;</span>] = affiliation_metric[<span class=\"string\">&#x27;recall&#x27;</span>]</span><br><span class=\"line\">                affiliation_f1 = <span class=\"number\">2</span> * (dic[<span class=\"string\">&quot;precision&quot;</span>] * dic[<span class=\"string\">&quot;recall&quot;</span>]) / (dic[<span class=\"string\">&quot;precision&quot;</span>] + dic[<span class=\"string\">&quot;recall&quot;</span>])</span><br><span class=\"line\">                f1_affiliation_list.append(affiliation_f1)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">                dic[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">                dic[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">                f1_affiliation_list.append(<span class=\"number\">0</span>)</span><br><span class=\"line\">            affiliation_metric_list.append(dic)</span><br><span class=\"line\"></span><br><span class=\"line\">            predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\"># 这个对象可以求很多的score, such as PA, PWA, RPA</span></span><br><span class=\"line\">            <span class=\"comment\"># metric = &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;Pointwise Precision&quot;: ats.precision(score_type=ScoreType.Pointwise),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;Pointwise Recall&quot;: ats.recall(score_type=ScoreType.Pointwise),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;Pointwise F1&quot;: ats.f1(score_type=ScoreType.Pointwise),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;PointAdjusted Precision&quot;: ats.precision(score_type=ScoreType.PointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;PointAdjusted Recall&quot;: ats.recall(score_type=ScoreType.PointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;PointAdjusted F1&quot;: ats.f1(score_type=ScoreType.PointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;RevisedPointAdjusted Precision&quot;: ats.precision(score_type=ScoreType.RevisedPointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;RevisedPointAdjusted Recall&quot;: ats.recall(score_type=ScoreType.RevisedPointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;RevisedPointAdjusted F1&quot;: ats.f1(score_type=ScoreType.RevisedPointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#</span></span><br><span class=\"line\">            <span class=\"comment\"># &#125;</span></span><br><span class=\"line\">            ats = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">            f1_revised_point_adjusted = ats.f1(ScoreType.RevisedPointAdjusted)</span><br><span class=\"line\">            f1_revised_point_adjusted_list.append(f1_revised_point_adjusted)</span><br><span class=\"line\">            accumulate_tsad_score_list.append(ats)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Find the maximum affiliation F1 score</span></span><br><span class=\"line\">        index_max_f1_affiliation = np.argmax(f1_affiliation_list, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        affiliation_max = affiliation_metric_list[index_max_f1_affiliation]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Find the maximum affiliation percentile(such as  2.26%)</span></span><br><span class=\"line\">        nu_max1 = nu_list[index_max_f1_affiliation]</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Best affiliation quantile:&quot;</span>, nu_max1)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Best affiliation  metric: <span class=\"subst\">&#123;affiliation_max&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Find the maximum RevisedPointAdjusted f1</span></span><br><span class=\"line\">        index_max_f1_RPA = np.argmax(f1_revised_point_adjusted_list, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        score_max = accumulate_tsad_score_list[index_max_f1_RPA]</span><br><span class=\"line\">        nu_max2 = nu_list[index_max_f1_RPA]</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;Best revised point adjusted anomaly quantile:&#x27;</span>, nu_max2)</span><br><span class=\"line\">        revised_point_adjust = &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;f1&quot;</span>: score_max.f1(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\">            <span class=\"string\">&quot;precision&quot;</span>: score_max.precision(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\">            <span class=\"string\">&quot;recall&quot;</span>: score_max.recall(score_type=ScoreType.RevisedPointAdjusted)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Best revised point adjusted: <span class=\"subst\">&#123;revised_point_adjust&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        threshold = np.percentile(scores, <span class=\"number\">100</span> - nu_max1)</span><br><span class=\"line\">        predict = np.where(scores &gt; threshold, <span class=\"number\">1</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> affiliation_max, score_max, predict</span><br><span class=\"line\">    <span class=\"comment\"># affiliation_max=&#123;&#x27;precision&#x27;: 0, &#x27;recall&#x27;: 0&#125;,</span></span><br><span class=\"line\">    <span class=\"comment\"># score max: &lt;merlion.evaluate.anomaly.TSADScoreAccumulator&gt;</span></span><br><span class=\"line\">    <span class=\"comment\"># predict.shape=59, the best prediction where the affiliation f1 is maximal. Predict is</span></span><br><span class=\"line\">    <span class=\"comment\">#   not a score, it is a label which value is one of 0 or 1.</span></span><br><span class=\"line\">    <span class=\"comment\">#   predict = np.where(scores &gt; threshold, 1, 0)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">ad_predict_back</span>(<span class=\"params\">target, scores, mode, nu</span>):</span><br><span class=\"line\">    if_aff = np.count_nonzero(target)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">        events_gt = convert_vector_to_events(target)</span><br><span class=\"line\">    target = TimeSeries.from_pd(pd.DataFrame(target))</span><br><span class=\"line\">    scores = np.array(scores)</span><br><span class=\"line\">    <span class=\"comment\"># standardization</span></span><br><span class=\"line\">    mean = np.mean(scores)</span><br><span class=\"line\">    std = np.std(scores)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> std != <span class=\"number\">0</span>:</span><br><span class=\"line\">        scores = (scores - mean) / std</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># For UCR dataset, there is only one anomaly period in the test set.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> mode == <span class=\"string\">&#x27;one-anomaly&#x27;</span>:</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        threshold = np.<span class=\"built_in\">max</span>(scores, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        max_number = np.<span class=\"built_in\">sum</span>(scores == threshold)</span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> max_number &lt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">            <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> r2.item() &gt;= threshold:</span><br><span class=\"line\">                    predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                    mount += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">            events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">            Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">            affiliation_max = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            affiliation_max = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Fixed threshold</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> mode == <span class=\"string\">&#x27;fix&#x27;</span>:</span><br><span class=\"line\">        detect_nu = <span class=\"number\">100</span> * (<span class=\"number\">1</span> - nu)</span><br><span class=\"line\">        threshold = np.percentile(scores, detect_nu)</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r2.item() &gt; threshold:</span><br><span class=\"line\">                predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                mount += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">            events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">            Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">            affiliation_max = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            affiliation_max = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Floating threshold</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        nu_list = np.arange(<span class=\"number\">1</span>, <span class=\"number\">301</span>) / <span class=\"number\">1e3</span></span><br><span class=\"line\">        f1_list, score_list, f1_list2, affiliation_list = [], [], [], []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> detect_nu <span class=\"keyword\">in</span> nu_list:</span><br><span class=\"line\">            threshold = np.percentile(scores, <span class=\"number\">100</span> - detect_nu)</span><br><span class=\"line\">            mount = <span class=\"number\">0</span></span><br><span class=\"line\">            predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">            <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> r2.item() &gt; threshold:</span><br><span class=\"line\">                    predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                    mount += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">                events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">                Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">                dic = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">                affiliation_f1 = <span class=\"number\">2</span> * (dic[<span class=\"string\">&quot;precision&quot;</span>] * dic[<span class=\"string\">&quot;recall&quot;</span>]) / (dic[<span class=\"string\">&quot;precision&quot;</span>] + dic[<span class=\"string\">&quot;recall&quot;</span>])</span><br><span class=\"line\">                f1_list2.append(affiliation_f1)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                dic = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">                dic[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">                dic[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">                f1_list2.append(<span class=\"number\">0</span>)</span><br><span class=\"line\">            affiliation_list.append(dic)</span><br><span class=\"line\">            predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">            score = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\">            f1 = score.f1(ScoreType.RevisedPointAdjusted)</span><br><span class=\"line\">            f1_list.append(f1)</span><br><span class=\"line\">            score_list.append(score)</span><br><span class=\"line\">        index_max1 = np.argmax(f1_list2, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        affiliation_max = affiliation_list[index_max1]</span><br><span class=\"line\">        nu_max1 = nu_list[index_max1]</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Best affiliation quantile:&quot;</span>, nu_max1)</span><br><span class=\"line\"></span><br><span class=\"line\">        index_max2 = np.argmax(f1_list, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        score_max = score_list[index_max2]</span><br><span class=\"line\">        nu_max2 = nu_list[index_max2]</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;Best anomaly quantile:&#x27;</span>, nu_max2)</span><br><span class=\"line\"></span><br><span class=\"line\">        threshold = np.percentile(scores, <span class=\"number\">100</span> - nu_max1)</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r2.item() &gt; threshold:</span><br><span class=\"line\">                predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                mount += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> affiliation_max, score_max, predict</span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<p><code>coca_debug.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> argparse</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.evaluate.anomaly <span class=\"keyword\">import</span> TSADScoreAccumulator <span class=\"keyword\">as</span> ScoreAcc, ScoreType</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.utils <span class=\"keyword\">import</span> TimeSeries</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> conf.coca.IOpsCompetition_Configs <span class=\"keyword\">import</span> Config</span><br><span class=\"line\"><span class=\"keyword\">from</span> dataloader <span class=\"keyword\">import</span> data_generator4</span><br><span class=\"line\"><span class=\"keyword\">from</span> models.COCA.coca_network.model <span class=\"keyword\">import</span> base_Model</span><br><span class=\"line\"><span class=\"keyword\">from</span> models.COCA.coca_trainer.trainer <span class=\"keyword\">import</span> Trainer</span><br><span class=\"line\"><span class=\"keyword\">from</span> models.reasonable_metric <span class=\"keyword\">import</span> reasonable_accumulator</span><br><span class=\"line\"><span class=\"keyword\">from</span> pysearchlib.utils.util_print <span class=\"keyword\">import</span> print_separator</span><br><span class=\"line\"><span class=\"keyword\">from</span> pysearchlib.utils.util_pytorch <span class=\"keyword\">import</span> enable_pytorch_reproduciable</span><br><span class=\"line\"><span class=\"keyword\">from</span> ts_datasets.ts_datasets.anomaly <span class=\"keyword\">import</span> NAB, IOpsCompetition</span><br><span class=\"line\"><span class=\"keyword\">from</span> utils <span class=\"keyword\">import</span> print_object</span><br><span class=\"line\"></span><br><span class=\"line\">start_time = datetime.now()</span><br><span class=\"line\">parser = argparse.ArgumentParser()</span><br><span class=\"line\">home_dir = os.getcwd()</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--experiment_description&#x27;</span>, default=<span class=\"string\">&#x27;Exp1&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Experiment Description&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--run_description&#x27;</span>, default=<span class=\"string\">&#x27;run1&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Experiment Description&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--visualization&#x27;</span>, default=<span class=\"literal\">True</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">bool</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Visualize&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--seed&#x27;</span>, default=<span class=\"number\">2</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">int</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;seed value&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--weight_decay&#x27;</span>, default=<span class=\"number\">5e-4</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">float</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Weight decay (L2 penalty) hyperparameter for COCA objective&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--selected_dataset&#x27;</span>, default=<span class=\"string\">&#x27;IOpsCompetition&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Dataset of choice: NAB, IOpsCompetition, SMAP, UCR&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--logs_save_dir&#x27;</span>, default=<span class=\"string\">&#x27;experiments_logs&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;saving directory&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--device&#x27;</span>, default=<span class=\"string\">&#x27;cpu&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;cpu or cuda&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--home_path&#x27;</span>, default=home_dir, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Project home directory&#x27;</span>)</span><br><span class=\"line\">args = parser.parse_args()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># device = &quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;</span></span><br><span class=\"line\">device = torch.device(args.device)</span><br><span class=\"line\">experiment_description = args.experiment_description</span><br><span class=\"line\">data_type = args.selected_dataset</span><br><span class=\"line\">method = <span class=\"string\">&#x27;COCA&#x27;</span></span><br><span class=\"line\">run_description = args.run_description</span><br><span class=\"line\">selected_dataset = args.selected_dataset</span><br><span class=\"line\">weight_decay = args.weight_decay</span><br><span class=\"line\">visualization = args.visualization</span><br><span class=\"line\"></span><br><span class=\"line\">logs_save_dir = args.logs_save_dir</span><br><span class=\"line\">os.makedirs(logs_save_dir, exist_ok=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exec</span>(<span class=\"string\">f&#x27;from conf.coca.<span class=\"subst\">&#123;data_type&#125;</span>_Configs import Config as Configs&#x27;</span>)</span><br><span class=\"line\">configs = Config()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ##### fix random seeds for reproducibility ########</span></span><br><span class=\"line\">SEED = args.seed</span><br><span class=\"line\"></span><br><span class=\"line\">experiment_log_dir = os.path.join(logs_save_dir, experiment_description, run_description, <span class=\"string\">f&quot;_seed_<span class=\"subst\">&#123;SEED&#125;</span>&quot;</span>)</span><br><span class=\"line\">os.makedirs(experiment_log_dir, exist_ok=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">log_dir = experiment_log_dir</span><br><span class=\"line\"><span class=\"comment\"># Load datasets</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Get the lead &amp; lag time for the dataset</span></span><br><span class=\"line\"><span class=\"comment\"># Aggregate statistics from full dataset</span></span><br><span class=\"line\">all_anomaly_num, all_test_score, all_test_scores_reasonable = [], [], []</span><br><span class=\"line\">all_test_aff_score, all_test_aff_precision, all_test_aff_recall = [], [], []</span><br><span class=\"line\"></span><br><span class=\"line\">enable_pytorch_reproduciable()</span><br><span class=\"line\">dt = IOpsCompetition()</span><br><span class=\"line\"><span class=\"comment\"># dt = NAB()</span></span><br><span class=\"line\">time_series, meta_data = dt[<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">train_data = TimeSeries.from_pd(time_series[meta_data.trainval])</span><br><span class=\"line\">test_data = TimeSeries.from_pd(time_series[~meta_data.trainval])</span><br><span class=\"line\">train_labels = TimeSeries.from_pd(meta_data.anomaly[meta_data.trainval])</span><br><span class=\"line\">test_labels = TimeSeries.from_pd(meta_data.anomaly[~meta_data.trainval])</span><br><span class=\"line\"></span><br><span class=\"line\">print_separator(<span class=\"string\">f&quot;train_data.shape:<span class=\"subst\">&#123;<span class=\"built_in\">len</span>(train_data)&#125;</span>,test_data.shape:<span class=\"subst\">&#123;<span class=\"built_in\">len</span>(test_data)&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Load Model</span></span><br><span class=\"line\">model = base_Model(configs, device).to(device)</span><br><span class=\"line\">train_dl, val_dl, test_dl, test_anomaly_window_num = data_generator4(train_data, test_data, train_labels,</span><br><span class=\"line\">                                                                     test_labels, configs)</span><br><span class=\"line\"></span><br><span class=\"line\">model_optimizer = torch.optim.Adam(model.parameters(), lr=configs.lr, betas=(configs.beta1, configs.beta2),</span><br><span class=\"line\">                                   weight_decay=weight_decay)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Trainer</span></span><br><span class=\"line\">idx = <span class=\"number\">0</span></span><br><span class=\"line\">test_score_origin, test_aff, test_score, score_reasonable, predict = Trainer(model, model_optimizer, train_dl,</span><br><span class=\"line\">                                                                             val_dl, test_dl, device,</span><br><span class=\"line\">                                                                             configs, idx)</span><br><span class=\"line\">print_separator(<span class=\"string\">&quot;Summary Metrics for multiple&quot;</span>)</span><br><span class=\"line\">all_anomaly_num.append(test_anomaly_window_num)</span><br><span class=\"line\">all_test_scores_reasonable.append(score_reasonable)</span><br><span class=\"line\">all_test_aff_precision.append(test_aff[<span class=\"string\">&quot;precision&quot;</span>])</span><br><span class=\"line\">all_test_aff_recall.append(test_aff[<span class=\"string\">&quot;recall&quot;</span>])</span><br><span class=\"line\">all_test_aff_score.append(test_aff)</span><br><span class=\"line\">all_test_score.append(test_score)</span><br><span class=\"line\"></span><br><span class=\"line\">all_anomaly_num = np.array(all_anomaly_num)</span><br><span class=\"line\">sum_anomaly_num = np.<span class=\"built_in\">sum</span>(all_anomaly_num)</span><br><span class=\"line\">all_test_aff_precision = np.array(all_test_aff_precision)</span><br><span class=\"line\">all_test_aff_precision = all_test_aff_precision * all_anomaly_num / sum_anomaly_num</span><br><span class=\"line\">test_aff_precision = np.nansum(all_test_aff_precision)</span><br><span class=\"line\">all_test_aff_recall = np.array(all_test_aff_recall)</span><br><span class=\"line\">all_test_aff_recall = all_test_aff_recall * all_anomaly_num / sum_anomaly_num</span><br><span class=\"line\">test_aff_recall = np.nansum(all_test_aff_recall)</span><br><span class=\"line\">test_aff_f1 = <span class=\"number\">2</span> * (test_aff_precision * test_aff_recall) / (test_aff_precision + test_aff_recall)</span><br><span class=\"line\"></span><br><span class=\"line\">total_test_score = <span class=\"built_in\">sum</span>(all_test_score, ScoreAcc())</span><br><span class=\"line\">total_test_scores_reasonable = <span class=\"built_in\">sum</span>(all_test_scores_reasonable, reasonable_accumulator())</span><br><span class=\"line\"><span class=\"built_in\">print</span>(total_test_scores_reasonable.get_all_metrics())</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;&gt;&#x27;</span> * <span class=\"number\">32</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> configs.dataset == <span class=\"string\">&#x27;UCR&#x27;</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;UCR metrics:\\n&quot;</span>,</span><br><span class=\"line\">          <span class=\"string\">f&quot;accuracy: <span class=\"subst\">&#123;total_test_scores_reasonable.get_all_metrics()&#125;</span>\\n&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;affiliation metrics:\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;f1:        <span class=\"subst\">&#123;test_aff_f1:<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">f&quot;Precision: <span class=\"subst\">&#123;test_aff_precision:<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Recall:    <span class=\"subst\">&#123;test_aff_recall:<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">&quot;Revised-point-adjusted metrics:\\n\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;F1 score:  <span class=\"subst\">&#123;total_test_score.f1(ScoreType.RevisedPointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Precision: <span class=\"subst\">&#123;total_test_score.precision(ScoreType.RevisedPointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Recall:    <span class=\"subst\">&#123;total_test_score.recall(ScoreType.RevisedPointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">&quot;Point-adjusted metrics:\\n\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;F1 score:  <span class=\"subst\">&#123;total_test_score.f1(ScoreType.PointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Precision: <span class=\"subst\">&#123;total_test_score.precision(ScoreType.PointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Recall:    <span class=\"subst\">&#123;total_test_score.recall(ScoreType.PointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">&quot;NAB Scores:\\n\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;NAB Score (balanced):       <span class=\"subst\">&#123;total_test_score.nab_score():<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;NAB Score (high precision): <span class=\"subst\">&#123;total_test_score.nab_score(fp_weight=<span class=\"number\">0.22</span>):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;NAB Score (high recall):    <span class=\"subst\">&#123;total_test_score.nab_score(fn_weight=<span class=\"number\">2.0</span>):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      )</span><br><span class=\"line\"></span><br><span class=\"line\">print_separator(<span class=\"string\">&quot;Configuration of the model&quot;</span>)</span><br><span class=\"line\">print_object(configs)</span><br><span class=\"line\"></span><br><span class=\"line\">end_time = datetime.now()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Training time: <span class=\"subst\">&#123;(end_time-start_time).total_seconds()&#125;</span>&quot;</span>)</span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<p><a href=\"https://opensource.salesforce.com/Merlion/v1.3.1/tutorials/TimeSeries.html#UnivariateTimeSeries:-The-Basic-Building-Block\">https://opensource.salesforce.com/Merlion/v1.3.1/tutorials/TimeSeries.html#UnivariateTimeSeries:-The-Basic-Building-Block</a></p>\n<p><img src=\"/images/95d48e89e235281019c6eb4b57a463db03073dbf.png\" alt=\"Excalidraw/Merlion 源码分析 2022-12-16 16.06.05.excalidraw\"></p>\n<h2 id=\"图解释\">图解释</h2>\n<ul>\n<li><strong>pink areas</strong>: ground truth</li>\n<li>red curves: anomaly score</li>\n<li>blue curves: original data value<br>\n<img src=\"/images/e47a64994b7f6ef50b68a861f2b9a64078d41f30.png\" alt=\"static/attachment/Pasted image 20221216182032.png\"></li>\n</ul>\n<h2 id=\"model-get-anomaly-label\">model.get_anomaly_label</h2>\n<ol>\n<li>获取 score : <code>scores = self.get_anomaly_score(time_series, time_series_prev)</code></li>\n<li>获取标签: <code>self.post_rule(scores) if self.post_rule is not None else scores</code></li>\n</ol>\n<h2 id=\"如何设置-post-rule\">如何设置 post_rule</h2>\n<p><code>AnomScoreCalibrator(max_score=max_score)</code></p>\n<h2 id=\"Data-Format\">Data Format</h2>\n<p><code>UnivariateTimeSeries</code> and <code>TimeSeries</code>. TimeSeries is comprised of many UnivariateTimeSeries.</p>\n<h3 id=\"UnivariateTimeSeries\">UnivariateTimeSeries</h3>\n<p>UnivariateTimeSeries is contain two columns: <code>DatetimeIndex</code> and <code>UnivariateTimeSeries</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.utils <span class=\"keyword\">import</span> UnivariateTimeSeries</span><br><span class=\"line\"></span><br><span class=\"line\">kpi = UnivariateTimeSeries(</span><br><span class=\"line\">    time_stamps=df.timestamp_millis/<span class=\"number\">1000</span>,  <span class=\"comment\"># timestamps in units of seconds</span></span><br><span class=\"line\">    values=df.kpi,                         <span class=\"comment\"># time series values</span></span><br><span class=\"line\">    name=<span class=\"string\">&quot;kpi&quot;</span>                             <span class=\"comment\"># optional: a name for this univariate</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\">kpi_label = UnivariateTimeSeries(</span><br><span class=\"line\">    time_stamps=df.timestamp_millis/<span class=\"number\">1000</span>,  <span class=\"comment\"># timestamps in units of seconds</span></span><br><span class=\"line\">    values=df.kpi_label                    <span class=\"comment\"># time series values</span></span><br><span class=\"line\">) </span><br></pre></td></tr></table></figure>\n<p>functions:</p>\n<ul>\n<li>convert a UnivariateTimeSeries to a regular<code> pd.Series</code>: <code>kpi.to_pd()</code></li>\n<li>access the timestamps: <code>kpi.time_stamps[:5]</code></li>\n<li>Get the datetimes: <code>kpi.index[:5]</code></li>\n<li>Get the values: <code>kpi.values[:5]</code></li>\n<li>obtain a tuple of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo separator=\"true\">,</mo><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(timestamp, value)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">im</span><span class=\"mord mathnormal\">es</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">am</span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">e</span><span class=\"mclose\">)</span></span></span></span>: <code>kpi[0]</code></li>\n<li>a slice index: <code>kpi[1:5]</code>, obtain a new UnivariateTimeSeries</li>\n<li>Iterating: <code>for t, x in kpi[:5]</code></li>\n</ul>\n<h3 id=\"TimeSeries\">TimeSeries</h3>\n<p>TimeSeries is comprised of many UnivariateTimeSeries.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">time_series_list = TimeSeries(univariates=[kpi.copy(), kpi_label.copy()]) </span><br></pre></td></tr></table></figure>\n<p>functions :</p>\n<ul>\n<li>access the names of the individual univariates: <code>time_series_list.names</code></li>\n<li>access a specific univariate via <code>time_series.univariates[name]</code></li>\n<li>iterate over univariates: <code>for univariate in time_series_dict.univariates:</code></li>\n<li>iterate over all univariates &amp; names: <code>for name, univariate in time_series_dict.items()</code></li>\n</ul>\n<h2 id=\"Anomaly-Detection-in-Merlion\">Anomaly Detection in Merlion</h2>\n<p>效果:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Precision: <span class=\"number\">0.0000</span>, Recall: <span class=\"number\">0.0000</span>, F1: <span class=\"number\">0.0000</span></span><br><span class=\"line\">Mean Time To Detect: <span class=\"number\">0</span> days <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span> </span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/10b196cf5c18a6e6c44bd8477d1dd4e74d91ab83.png\" alt=\"static/attachment/Pasted image 20221216085933.png\"></p>\n<p>my implement:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> merlion.utils <span class=\"keyword\">import</span> TimeSeries</span><br><span class=\"line\"><span class=\"keyword\">from</span> ts_datasets.ts_datasets.anomaly <span class=\"keyword\">import</span> NAB</span><br><span class=\"line\"></span><br><span class=\"line\">time_series, metadata = NAB(subset=<span class=\"string\">&quot;artificialWithAnomaly&quot;</span>)[<span class=\"number\">3</span>]</span><br><span class=\"line\">train_data = TimeSeries.from_pd(time_series[metadata.trainval])</span><br><span class=\"line\">test_data = TimeSeries.from_pd(time_series[~metadata.trainval])</span><br><span class=\"line\">test_labels = TimeSeries.from_pd(metadata.anomaly[~metadata.trainval])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.models.defaults <span class=\"keyword\">import</span> DefaultDetector, DefaultDetectorConfig</span><br><span class=\"line\"></span><br><span class=\"line\">model = DefaultDetector(DefaultDetectorConfig())</span><br><span class=\"line\">model.train(train_data=train_data)</span><br><span class=\"line\">test_predict = model.get_anomaly_label(time_series=test_data)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">type</span>(test_predict))</span><br><span class=\"line\"><span class=\"built_in\">print</span>(test_predict)</span><br><span class=\"line\"><span class=\"comment\"># &lt;class &#x27;merlion.utils.time_series.TimeSeries&#x27;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#                      anom_score</span></span><br><span class=\"line\"><span class=\"comment\"># 2014-04-03 02:25:00         0.0</span></span><br><span class=\"line\"><span class=\"comment\"># 2014-04-03 02:30:00         0.0</span></span><br><span class=\"line\"><span class=\"comment\"># 2014-04-03 02:35:00         0.0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.plot <span class=\"keyword\">import</span> plot_anoms</span><br><span class=\"line\"><span class=\"keyword\">import</span> matplotlib.pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"></span><br><span class=\"line\">fig, ax = model.plot_anomaly(time_series=test_data)</span><br><span class=\"line\">plot_anoms(ax=ax, anomaly_labels=test_labels)</span><br><span class=\"line\">plt.show()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.evaluate.anomaly <span class=\"keyword\">import</span> TSADMetric</span><br><span class=\"line\"></span><br><span class=\"line\">p = TSADMetric.Precision.value(ground_truth=test_labels, predict=test_predict)</span><br><span class=\"line\">r = TSADMetric.Recall.value(ground_truth=test_labels, predict=test_predict)</span><br><span class=\"line\">f1 = TSADMetric.F1.value(ground_truth=test_labels, predict=test_predict)</span><br><span class=\"line\">mttd = TSADMetric.MeanTimeToDetect.value(ground_truth=test_labels, predict=test_predict)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Precision: <span class=\"subst\">&#123;p:<span class=\"number\">.4</span>f&#125;</span>, Recall: <span class=\"subst\">&#123;r:<span class=\"number\">.4</span>f&#125;</span>, F1: <span class=\"subst\">&#123;f1:<span class=\"number\">.4</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">f&quot;Mean Time To Detect: <span class=\"subst\">&#123;mttd&#125;</span>&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\"># Precision: 0.0000, Recall: 0.0000, F1: 0.0000</span></span><br><span class=\"line\"><span class=\"comment\"># Mean Time To Detect: 0 days 00:00:00</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<h2 id=\"支持的评估指标\">支持的评估指标</h2>\n<p><u>Merlion 支持 PW, PA, RPA 三种指标.</u></p>\n<p>The key challenge in designing an appropriate evaluation metric for time series anomaly detection lies in the fact that anomalies are almost always windows of time, rather than discrete points. Thus, while it is easy to compute the pointwise (PW) precision, recall, and F1 score of a predicted anomaly label sequence relative to the ground truth label sequence, these metrics do not reﬂect a quantity that human operators care about.</p>\n<p>Xu et al. (2018) propose point-adjusted (PA) metrics as a solution to this problem: if any point in a ground truth anomaly window is labeled as anomalous, all points in the segment are treated as true positives. If no anomalies are ﬂagged in the window, all points are labeled as false negatives. Any predicted anomalies outside of anomalous windows are treated as false positives. Precision, recall, and F1 can be computed based on these adjusted true/false positive/negative counts. However, the disadvantage of PA metrics is that they are biased to reward models for detecting long anomalies more than short ones.</p>\n<p>Hundman et al. (2018) propose revised point-adjusted (RPA) metrics as a closely related alternative: if any point in a ground truth anomaly window is labeled as anomalous, one true positive is registered. If no anomalies are ﬂagged in the window, one false negative is recorded. Any predicted anomalies outside of anomalous windows are treated as false positives. These metrics address the shortcomings of PA metrics, but they do penalize false positives more heavily than alternatives.</p>\n<p>Merlion’s TSADMetric enum supports all 3 classes of evaluation metrics (PW, PA, and RPA), as well as the mean time to detect an anomaly. By default, we evaluate RPA metrics, but users may manually specify alternatives if their application calls for it.</p>\n<h2 id=\"实现一个自定义模型的步骤\">实现一个自定义模型的步骤</h2>\n<p>inherits from <code>DetectorConfig</code>.</p>\n<p>inherits from <code>DetectorBase</code></p>\n<h2 id=\"EvaluatorConfig\">EvaluatorConfig</h2>\n<ul>\n<li><strong>train_window</strong>: the maximum duration of data we would like to train the model on. <code>None</code> means no limit.</li>\n<li><strong>retrain_freq</strong>: the frequency at which we want to re-train the model. <code>None</code> means we only train the model once on the initial training data.</li>\n</ul>\n<h2 id=\"model-threshold-test-score-是什么\">model.threshold(test_score) 是什么?</h2>\n<p>🔑 将所有小于 <code>alm_threshold </code> 的值设置为 0.</p>\n<p>本质是: <code>scores = np.where(np.abs(scores) &gt;= self.alm_threshold, scores, 0.0)</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def __call__(self, time_series: TimeSeries) -&gt; TimeSeries:</span><br><span class=\"line\">   assert (</span><br><span class=\"line\">\t  time_series.dim == 1</span><br><span class=\"line\">   ), f&quot;&#123;type(self).__name__&#125; post-rule can only be applied on single-variable time series&quot;</span><br><span class=\"line\">   if self.alm_threshold is None:</span><br><span class=\"line\">\t  raise RuntimeError(f&quot;alm_threshold is None. Please train the post-rule before attempting to use it.&quot;)</span><br><span class=\"line\">   k = time_series.names[0]</span><br><span class=\"line\">   times = time_series.univariates[k].index</span><br><span class=\"line\">   scores = time_series.univariates[k].np_values</span><br><span class=\"line\">   scores = np.where(np.isnan(scores), 0.0, scores)</span><br><span class=\"line\">   if self.abs_score:</span><br><span class=\"line\">\t  scores = np.where(np.abs(scores) &gt;= self.alm_threshold, scores, 0.0)</span><br><span class=\"line\">   else:</span><br><span class=\"line\">\t  scores = np.where(scores &gt;= self.alm_threshold, scores, 0.0)</span><br><span class=\"line\">   return TimeSeries(&#123;k: UnivariateTimeSeries(times, scores)&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"post-process-threshold\">post_process.threshold</h2>\n<p>goal: to reduce the number of false positives.</p>\n<p>将 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&lt;</mo><mi mathvariant=\"normal\">alm_threshold</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">&lt;\\operatorname{alm\\_threshold}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0044em;vertical-align:-0.31em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">alm_threshold</span></span></span></span></span> 的值设置为 0, 其他值保持不变. Zeroes all anomaly scores whose absolute value is less than the threshold</p>\n<ul>\n<li><code>scores = np.where(np.abs(scores) &gt;= self.alm_threshold, scores, 0.0)</code></li>\n<li><code>alm_threshold</code> 默认是 3</li>\n</ul>\n<p>obtain post-processed anomaly scores: <code>model.get_anomaly_label(time_series)</code></p>\n<h2 id=\"post-process-calibration\">post_process.calibration</h2>\n<p>将值转换到 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> s.t. distribution of the predict score.</p>\n<p><img src=\"/images/b906e21a8f259249f0402645da7d4d16eb91a6af.png\" alt=\"static/attachment/Pasted image 20221217080117.png\"></p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>F</mi><mi>s</mi></msub><mo>:</mo><mi>R</mi><mo>−</mo><mo>&gt;</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">F_{s}: R -&gt; [0,1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\">−</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">]</span></span></span></span> is the CDF of the absolute raw anomaly scores <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><msub><mi>s</mi><mi>t</mi></msub><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">| s_t|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">s_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is the score of the time point <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span>.</li>\n<li>essence: transfers one distribution to the other distribution</li>\n<li>Calibration is a post-processing step</li>\n</ul>\n<p>ensures that anomaly scores correspond to standard deviation units and are therefore interpretable and consistent between diﬀerent models,</p>\n<p>Calibration bridges this gap by making all anomaly scores interpretable as z-scores, i.e. values drawn from a standard normal distribution.</p>\n<h2 id=\"evaluation-EvaluatorBase\">evaluation.EvaluatorBase</h2>\n<p><strong>scenarious and problems</strong>: When a time series model is deployed live in production, training and inference are usually not performed in batch on a full time series. Rather, the model is retrained at a regular cadence</p>\n<p><strong>solutions</strong>: provide a EvaluatorBase class which implements:</p>\n<ul>\n<li>Train an initial model on recent historical training data.</li>\n<li>At a regular interval (e.g. once per day), retrain the entire model on the most recent data. This can be either the entire history, or a more limited window (e.g. 4 weeks).</li>\n<li>Obtain the model’s predictions (forecasts or anomaly scores) for the time series values that occur between re-trainings. Users may customize whether this should be done in batch, streaming, or at some intermediate cadence.</li>\n<li>Compare the model’s predictions against the ground truth (actual values for forecasting, or labeled anomalies for anomaly detection), and report quantitative evaluation metrics.</li>\n</ul>\n<p>ForecastMetric and TSADMetric: a wide range of evaluation metrics for both forecasting and anomaly detection,</p>\n<h2 id=\"model-selection\">model selection</h2>\n<ul>\n<li>split training set into the training set and validation set.</li>\n<li>Train models using the training set</li>\n<li>grab the model with the best performance on the validation split</li>\n<li>return the model after retraining the model on full training data.</li>\n</ul>\n<h2 id=\"一次-benchmark-的结果\">一次 benchmark 的结果</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python benchmark_anomaly_test.py --dataset IOpsCompetition --models IsolationForest </span><br><span class=\"line\"></span><br><span class=\"line\">Training model IsolationForest...</span><br><span class=\"line\">  0%|          | 0/29 [00:00&lt;?, ?it/s]</span><br><span class=\"line\"> </span><br><span class=\"line\">2022-12-16 23:15:27,926 (threshold:129) INFO: Threshold 2.9831 achieves F1=0.7273.</span><br><span class=\"line\">2022-12-16 23:15:27,935 (benchmark_anomaly_test:372) INFO: </span><br><span class=\"line\">Performance on time series 2/29</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:373) INFO: Revised Point-Adjusted Metrics</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:374) INFO: F1 Score:  0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:375) INFO: Precision: 0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:376) INFO: Recall:    0.0000</span><br><span class=\"line\"></span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:377) INFO: Mean Time To Detect Anomalies:  0 days 00:00:00</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:378) INFO: Mean Detected Anomaly Duration: 0 days 00:00:00</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:379) INFO: Mean Anomaly Duration:          0 days 00:59:10</span><br><span class=\"line\"></span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:382) INFO: Pointwise metrics</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:383) INFO: F1 Score:  0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:384) INFO: Precision: 0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:385) INFO: Recall:    0.0000</span><br><span class=\"line\"></span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:387) INFO: Point-Adjusted Metrics</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:388) INFO: F1 Score:  0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:389) INFO: Precision: 0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:390) INFO: Recall:    0.0000</span><br><span class=\"line\"></span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:392) INFO: NAB Scores</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:393) INFO: NAB score (balanced): 0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:394) INFO: NAB score (low FP):   0.0000</span><br><span class=\"line\">2022-12-16 23:15:27,936 (benchmark_anomaly_test:395) INFO: NAB score (low FN):   0.0000</span><br><span class=\"line\"></span><br><span class=\"line\">100%|██████████| 29/29 [00:20&lt;00:00,  1.41it/s]</span><br><span class=\"line\">  0%|          | 0/29 [00:00&lt;?, ?it/s]2022-12-16 23:15:28,808 (threshold:129) INFO: Threshold 3.2748 achieves F1=0.3871.</span><br><span class=\"line\">2022-12-16 23:15:28,942 (threshold:129) INFO: Threshold 2.8378 achieves PointwiseF1=0.4650.</span><br><span class=\"line\">2022-12-16 23:15:29,069 (threshold:129) INFO: Threshold 3.1780 achieves PointAdjustedF1=0.7929.</span><br><span class=\"line\">  3%|▎         | 1/29 [00:01&lt;00:29,  1.06s/it]2022-12-16 23:15:29,407 (threshold:129) INFO: Threshold 2.9831 achieves F1=0.7273.</span><br><span class=\"line\">2022-12-16 23:15:29,494 (threshold:129) INFO: Threshold 3.4093 achieves PointwiseF1=0.5455.</span><br><span class=\"line\">2022-12-16 23:15:29,532 (threshold:129) INFO: Threshold 3.4093 achieves PointAdjustedF1=0.8966.</span><br><span class=\"line\">  7%|▋         | 2/29 [00:01&lt;00:18,  1.42it/s]2022-12-16 23:15:30,324 (threshold:129) INFO: Threshold 3.1780 achieves F1=0.4356.</span><br><span class=\"line\">2022-12-16 23:15:30,455 (threshold:129) INFO: Threshold 2.7240 achieves PointwiseF1=0.4567.</span><br><span class=\"line\">2022-12-16 23:15:30,592 (threshold:129) INFO: Threshold 3.1780 achieves PointAdjustedF1=0.7210.</span><br><span class=\"line\">100%|██████████| 29/29 [00:02&lt;00:00, 10.56it/s]</span><br><span class=\"line\"></span><br><span class=\"line\">Revised point-adjusted metrics</span><br><span class=\"line\">F1 score:  0.3838</span><br><span class=\"line\">Precision: 0.5205</span><br><span class=\"line\">Recall:    0.3040</span><br><span class=\"line\"></span><br><span class=\"line\">Mean Time To Detect Anomalies:  -0 days 00:07:33</span><br><span class=\"line\">Mean Detected Anomaly Duration: 0 days 00:28:30</span><br><span class=\"line\">Mean Anomaly Duration:          0 days 00:15:53</span><br><span class=\"line\"></span><br><span class=\"line\">Pointwise metrics</span><br><span class=\"line\">F1 score:  0.3263</span><br><span class=\"line\">Precision: 0.2606</span><br><span class=\"line\">Recall:    0.4363</span><br><span class=\"line\"></span><br><span class=\"line\">Point-adjusted metrics</span><br><span class=\"line\">F1 score:  0.6375</span><br><span class=\"line\">Precision: 0.6150</span><br><span class=\"line\">Recall:    0.6618</span><br><span class=\"line\"></span><br><span class=\"line\">NAB Scores</span><br><span class=\"line\">NAB Score (balanced):       0.2070</span><br><span class=\"line\">NAB Score (high precision): 0.1997</span><br><span class=\"line\">NAB Score (high recall):    0.2393</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"一次完整的-benchmark-结果\">一次完整的 benchmark 结果</h2>\n<p>![[static/attachment/merlion_benchmark_all.txt]]</p>\n<h2 id=\"TransformSequence\">TransformSequence</h2>\n<p>存储 a set of Transforms, then call them sequentially.</p>\n<p><img src=\"/images/89a5f9a57f7aed021e92b954d81513f8deadb968.png\" alt=\"static/attachment/Pasted image 20221219090715.png\"></p>\n<p>数据变换前后:</p>\n<p><img src=\"/images/62cb674b47a91d578bc8bbdb3ed19fdd29b38215.png\" alt=\"static/attachment/Pasted image 20221219091047.png\"></p>\n<h2 id=\"Train-步骤\">Train 步骤</h2>\n<p><img src=\"/images/805829d033d591a573e71569f090a2526b87d8a0.png\" alt=\"static/attachment/Pasted image 20221219091338.png\"></p>\n<h2 id=\"DifferenceTransform-and-Shingle-multivar-skip-True-size-2-stride-1\">DifferenceTransform and Shingle(multivar_skip=True, size=2, stride=1)</h2>\n<p><a href=\"https://opensource.salesforce.com/Merlion/v1.3.1/merlion.transform.html#merlion.transform.moving_average.DifferenceTransform\">https://opensource.salesforce.com/Merlion/v1.3.1/merlion.transform.html#merlion.transform.moving_average.DifferenceTransform</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">self.transform.train(train_data) </span><br><span class=\"line\">train_data = self.transform(train_data) </span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>self.transform.train(train_data)</code>: Sets all trainable parameters of the transform (if any), using the input time series as training data. A possible implement : <code>merlion.transform.sequence.TransformSequence.train</code></li>\n<li><code>train_data = self.transform(train_data) </code>: 根据 <code>self.transform.train(train_data)</code> 找到的特征进行变换</li>\n</ul>\n<h2 id=\"DifferenceTransform\">DifferenceTransform</h2>\n<p>计算后一个值减去前一个值的差, 与 <code>np.diff()</code> 函数类似, <code>val[i]=val[i]-val[i-1], s.t. i&gt;=1</code></p>\n<p>input:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                         value</span><br><span class=\"line\">time                          </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">21.598011</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span>  <span class=\"number\">19.321392</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">21.399938</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">18.373916</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">18.167499</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                       ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">21.530211</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">21.958759</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">21.232358</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">19.874722</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">20.894818</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"number\">605</span> rows x <span class=\"number\">1</span> columns]</span><br></pre></td></tr></table></figure>\n<p>output:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                        value</span><br><span class=\"line\">time                         </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">2.078546</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">3.026022</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">0.206417</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">25</span>:<span class=\"number\">00</span>  <span class=\"number\">1.848682</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                      ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">1.037752</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">0.428547</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span> -<span class=\"number\">0.726401</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">1.357636</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">1.020096</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"number\">604</span> rows x <span class=\"number\">1</span> columns]</span><br></pre></td></tr></table></figure>\n<h4 id=\"train\">.train</h4>\n<p>does not do anything in method <code>.train</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">train</span>(<span class=\"params\">self, time_series: TimeSeries</span>):</span><br><span class=\"line\">   <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"call\"><strong>call</strong></h4>\n<p>核心代码:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UnivariateTimeSeries.from_pd(var.diff())[<span class=\"number\">1</span>:] </span><br></pre></td></tr></table></figure>\n<h2 id=\"Shingle\">Shingle</h2>\n<p><code>Shingle</code> 可以理解为滑动窗口, 当 <code>Shingle(size=10, stride=1)</code> 时,数据就是:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  ...  kpi_6  kpi_7  kpi_8  kpi_9</span><br><span class=\"line\">time                                             ...                            </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>  ...    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>  ...    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>  ...    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>  ...    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<p>let x(t) = value_t be the value of the time series at time index t. Then, the output vector for time index t will be :code:[x(t - size + 1), …, x(t - 1), x(t)].</p>\n<p>input:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                        value</span><br><span class=\"line\">time                         </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">2.078546</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">3.026022</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">0.206417</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">25</span>:<span class=\"number\">00</span>  <span class=\"number\">1.848682</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                      ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">1.037752</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">0.428547</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span> -<span class=\"number\">0.726401</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">1.357636</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span>  <span class=\"number\">1.020096</span> </span><br></pre></td></tr></table></figure>\n<p>output: <code>(size = &#123;int&#125; 2 stride = &#123;int&#125; 1)</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">                      value_0   value_1</span><br><span class=\"line\">time                                   </span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:05:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span> -<span class=\"number\">2.276619</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">10</span>:<span class=\"number\">00</span> -<span class=\"number\">2.276619</span>  <span class=\"number\">2.078546</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">15</span>:<span class=\"number\">00</span>  <span class=\"number\">2.078546</span> -<span class=\"number\">3.026022</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">3.026022</span> -<span class=\"number\">0.206417</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-01 <span class=\"number\">00</span>:<span class=\"number\">25</span>:<span class=\"number\">00</span> -<span class=\"number\">0.206417</span>  <span class=\"number\">1.848682</span></span><br><span class=\"line\"><span class=\"meta\">... </span>                      ...       ...</span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">0.869541</span>  <span class=\"number\">1.037752</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:05:<span class=\"number\">00</span>  <span class=\"number\">1.037752</span>  <span class=\"number\">0.428547</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">10</span>:<span class=\"number\">00</span>  <span class=\"number\">0.428547</span> -<span class=\"number\">0.726401</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">15</span>:<span class=\"number\">00</span> -<span class=\"number\">0.726401</span> -<span class=\"number\">1.357636</span></span><br><span class=\"line\"><span class=\"number\">2014</span>-04-03 02:<span class=\"number\">20</span>:<span class=\"number\">00</span> -<span class=\"number\">1.357636</span>  <span class=\"number\">1.020096</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"number\">604</span> rows x <span class=\"number\">2</span> columns]</span><br></pre></td></tr></table></figure>\n<h4 id=\"TRAIN\"><code>.TRAIN</code></h4>\n<p>Dose not do anything.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">train</span>(<span class=\"params\">self, time_series: TimeSeries</span>):</span><br><span class=\"line\">   <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"call-2\"><code>__call__</code></h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Left-pad the time series <span class=\"keyword\">with</span> the first value </span><br></pre></td></tr></table></figure>\n<p><code>size=3 and stride=2</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">t=4,</span><br><span class=\"line\">t-3+1=2</span><br><span class=\"line\">[2,3,4]</span><br><span class=\"line\"></span><br><span class=\"line\">t=5</span><br><span class=\"line\">[3,4,5]</span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-2\">Shingle()</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> merlion.transform.resample <span class=\"keyword\">import</span> Shingle</span><br><span class=\"line\"><span class=\"keyword\">from</span> pysearchlib.utils.util_merlion <span class=\"keyword\">import</span> generate_random_timeseries</span><br><span class=\"line\"></span><br><span class=\"line\">datetime = generate_random_timeseries()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;=============== source =============&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(datetime)</span><br><span class=\"line\"></span><br><span class=\"line\">sle = Shingle()</span><br><span class=\"line\">sle.train(datetime)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;=============== Target =============&quot;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(sle(datetime)) </span><br></pre></td></tr></table></figure>\n<p>output:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0</span><br><span class=\"line\">time                      </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-2\">Shingle(size=2)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1</span><br><span class=\"line\">time                             </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-3\">Shingle(size=3)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2</span><br><span class=\"line\">time                                    </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-5\">Shingle(size=5)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4</span><br><span class=\"line\">time                                                  </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-5-stride-1\">Shingle(size=5, stride=1)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4</span><br><span class=\"line\">time                                                  </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-5-stride-2\">Shingle(size=5, stride=2)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4</span><br><span class=\"line\">time                                                  </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-5-stride-4\">Shingle(size=5, stride=4)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1  kpi_2  kpi_3  kpi_4</span><br><span class=\"line\">time                                                  </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">2.0</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">6.0</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h4 id=\"Shingle-size-2-stride-2\">Shingle(size=2, stride=2)</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=============== source =============</span><br><span class=\"line\">                      kpi</span><br><span class=\"line\">time                     </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">1.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-07 <span class=\"number\">21</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">3.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">14</span> <span class=\"number\">18</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">5.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">21</span> <span class=\"number\">16</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>   <span class=\"number\">7.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>   <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">28</span> <span class=\"number\">13</span>:<span class=\"number\">20</span>:<span class=\"number\">00</span>   <span class=\"number\">9.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>  <span class=\"number\">10.0</span></span><br><span class=\"line\">=============== Target =============</span><br><span class=\"line\">                     kpi_0  kpi_1</span><br><span class=\"line\">time                             </span><br><span class=\"line\"><span class=\"number\">2022</span>-01-04 <span class=\"number\">10</span>:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">1.0</span>    <span class=\"number\">2.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">11</span> 08:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">3.0</span>    <span class=\"number\">4.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">18</span> 05:<span class=\"number\">20</span>:<span class=\"number\">00</span>    <span class=\"number\">5.0</span>    <span class=\"number\">6.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-01-<span class=\"number\">25</span> 02:<span class=\"number\">40</span>:<span class=\"number\">00</span>    <span class=\"number\">7.0</span>    <span class=\"number\">8.0</span></span><br><span class=\"line\"><span class=\"number\">2022</span>-02-01 <span class=\"number\">00</span>:<span class=\"number\">00</span>:<span class=\"number\">00</span>    <span class=\"number\">9.0</span>   <span class=\"number\">10.0</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"如何添加-pre-process\">如何添加 pre_process</h2>\n<p>如下的 <code>TransformSequence</code> 序列中, 数据处理步骤变为:</p>\n<ol>\n<li>先归一化数据 <code>MeanVarNormalize()</code></li>\n<li>生成窗口数据 <code>Shingle(size=32)</code> 生成窗口大小为 32 的窗口数据, 参考 <a href='#Shingle(size=5)'>#Shingle(size=5)</a></li>\n</ol>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Import a data processing transform</span></span><br><span class=\"line\">cfg = IsolationForestConfig(n_estimators=<span class=\"number\">300</span>,</span><br><span class=\"line\">                            transform=TransformSequence([</span><br><span class=\"line\">                                MeanVarNormalize(),</span><br><span class=\"line\">                                Shingle(size=<span class=\"number\">32</span>)])</span><br><span class=\"line\">                            )</span><br><span class=\"line\">model = IsolationForest(cfg)</span><br></pre></td></tr></table></figure>\n<h2 id=\"MeanVarNormalize-执行过程\">MeanVarNormalize 执行过程</h2>\n<ol>\n<li>调用 <code>train</code> 获取数据 均值和方差</li>\n<li>通过 <code>f(data)</code> 完成数据处理.<br>\n<img src=\"/images/ba590021c2ca65431ff473391333a0f61f54c540.png\" alt=\"static/attachment/Pasted image 20221220100832.png\"><br>\n<img src=\"/images/4cd5f804d2c895b49a888d419c0ed3b12d63e9d3.png\" alt=\"static/attachment/Pasted image 20221220101004.png\"></li>\n</ol>\n<h2 id=\"DetectorConfig\">DetectorConfig</h2>\n<p><img src=\"/images/e779b3094a0f30317b99da6f3c52741ec9ebcb9d.png\" alt=\"static/attachment/Pasted image 20221220104515.png\"></p>\n<h2 id=\"what-the-predict-value-in-accumulate-tsad-score\">what the predict value in accumulate_tsad_score ?</h2>\n<p>Q: I want to know whether the predict is a score(float between 0 and 1) or a label(0, or 1)</p>\n<p>A: From the source code, it is a label(0, or 1). In other words, the value is one of 0, 1.</p>\n<ul>\n<li>source code: <code>predict.np_values.astype(bool)</code></li>\n</ul>\n<p><img src=\"/images/e27c6193118af9b3adffe8d3dc176ab6935175b3.png\" alt=\"static/attachment/Pasted image 20221220165551.png\"></p>\n<h3 id=\"example-max-delay-sec-4\">example: max_delay_sec=4</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pprint</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.evaluate.anomaly <span class=\"keyword\">import</span> accumulate_tsad_score, ScoreType</span><br><span class=\"line\"><span class=\"keyword\">from</span> pysearchlib.utils.util_merlion <span class=\"keyword\">import</span> generate_timeseries_from_list</span><br><span class=\"line\"></span><br><span class=\"line\">ground_truth = \\</span><br><span class=\"line\">    [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">predict = \\</span><br><span class=\"line\">    [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>]</span><br><span class=\"line\">ats = accumulate_tsad_score(</span><br><span class=\"line\">    ground_truth=generate_timeseries_from_list(ground_truth),</span><br><span class=\"line\">    predict=generate_timeseries_from_list(predict),</span><br><span class=\"line\">    max_delay_sec=<span class=\"number\">4</span></span><br><span class=\"line\">)</span><br><span class=\"line\">pprint.pprint(&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;Pointwise Precision&quot;</span>: ats.precision(score_type=ScoreType.Pointwise),</span><br><span class=\"line\">    <span class=\"string\">&quot;Pointwise Recall&quot;</span>: ats.recall(score_type=ScoreType.Pointwise),</span><br><span class=\"line\">    <span class=\"string\">&quot;Pointwise F1&quot;</span>: ats.f1(score_type=ScoreType.Pointwise),</span><br><span class=\"line\">    <span class=\"string\">&quot;PointAdjusted Precision&quot;</span>: ats.precision(score_type=ScoreType.PointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;PointAdjusted Recall&quot;</span>: ats.recall(score_type=ScoreType.PointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;PointAdjusted F1&quot;</span>: ats.f1(score_type=ScoreType.PointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;RevisedPointAdjusted Precision&quot;</span>: ats.precision(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;RevisedPointAdjusted Recall&quot;</span>: ats.recall(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\">    <span class=\"string\">&quot;RevisedPointAdjusted F1&quot;</span>: ats.f1(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<p>output:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&#x27;PointAdjusted F1&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Recall&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise F1&#x27;</span>: <span class=\"number\">0.4</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Recall&#x27;</span>: <span class=\"number\">0.25</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted F1&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Recall&#x27;</span>: <span class=\"number\">1.0</span>&#125; </span><br></pre></td></tr></table></figure>\n<h3 id=\"example-max-delay-sec-3-or-2-or-1\">example: max_delay_sec=3 or 2 or 1</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&#x27;PointAdjusted F1&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Precision&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Recall&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise F1&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Precision&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Recall&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted F1&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Precision&#x27;</span>: <span class=\"number\">0.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Recall&#x27;</span>: <span class=\"number\">0.0</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"example-max-delay-sec-None-or-0\">example: max_delay_sec=None or 0</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"string\">&#x27;PointAdjusted F1&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;PointAdjusted Recall&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise F1&#x27;</span>: <span class=\"number\">0.4</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;Pointwise Recall&#x27;</span>: <span class=\"number\">0.25</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted F1&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Precision&#x27;</span>: <span class=\"number\">1.0</span>,</span><br><span class=\"line\"> <span class=\"string\">&#x27;RevisedPointAdjusted Recall&#x27;</span>: <span class=\"number\">1.0</span></span><br><span class=\"line\"> &#125; </span><br></pre></td></tr></table></figure>\n<h2 id=\"Best-affiliation-quantile-是什么\">Best affiliation quantile 是什么?</h2>\n<p>在 <code>predict = score &gt; np.percentile(quantile)</code> 中, quantile 取多少时, predict 获得的结果 (如 F1) 最好?</p>\n<h2 id=\"修改后的结果\">修改后的结果</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/Users/sunwu/miniforge3/envs/sw_torch_1_10/<span class=\"built_in\">bin</span>/python /Users/sunwu/SW-Research/COCA-main/coca_debug.py </span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">146255</span></span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <span class=\"number\">149130</span></span><br><span class=\"line\">Best affiliation F1 score: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.9991141275746687</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7897834771523201</span>, <span class=\"string\">&#x27;individual_precision_probabilities&#x27;</span>: [<span class=\"number\">1.0</span>, <span class=\"number\">0.9983640081799591</span>, nan, <span class=\"number\">1.0</span>, <span class=\"number\">0.9987096774193549</span>, nan, nan, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.9959893048128342</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.9986893840104849</span>, <span class=\"number\">0.9976171564733916</span>, <span class=\"number\">1.0</span>], <span class=\"string\">&#x27;individual_recall_probabilities&#x27;</span>: [<span class=\"number\">0.8573256456835953</span>, <span class=\"number\">0.9995910020449897</span>, <span class=\"number\">0</span>, <span class=\"number\">0.999237933954276</span>, <span class=\"number\">0.9995698924731182</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9995485327313769</span>, <span class=\"number\">0.994773519163763</span>, <span class=\"number\">0.9991492464754497</span>, <span class=\"number\">0.9996639784946236</span>, <span class=\"number\">0.9997589780670041</span>, <span class=\"number\">0.9997219905476786</span>, <span class=\"number\">0.9984114376489277</span>, <span class=\"number\">1.0</span>], <span class=\"string\">&#x27;individual_precision_distances&#x27;</span>: [<span class=\"number\">0.0</span>, <span class=\"number\">0.16666666666666666</span>, nan, <span class=\"number\">0.0</span>, <span class=\"number\">0.25</span>, nan, nan, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0625</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0</span>, <span class=\"number\">0.0625</span>, <span class=\"number\">0.5</span>, <span class=\"number\">0.0</span>], <span class=\"string\">&#x27;individual_recall_distances&#x27;</span>: [<span class=\"number\">41.054545454545455</span>, <span class=\"number\">0.16666666666666666</span>, inf, <span class=\"number\">0.225</span>, <span class=\"number\">0.25</span>, inf, inf, <span class=\"number\">0.25</span>, <span class=\"number\">2.25</span>, <span class=\"number\">0.1590909090909091</span>, <span class=\"number\">0.25</span>, <span class=\"number\">0.25</span>, <span class=\"number\">0.1590909090909091</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.0</span>]&#125;</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.2520204081632653</span></span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.23977551020408164</span></span><br><span class=\"line\">Best affiliation F1 score: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.8333357886680556</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7724293430234433</span>, <span class=\"string\">&#x27;individual_precision_probabilities&#x27;</span>: [<span class=\"number\">0.6105147261216626</span>, <span class=\"number\">0.9862155388471178</span>, <span class=\"number\">0.9976095617529881</span>, <span class=\"number\">0.9987376393856512</span>, nan, <span class=\"number\">1.0</span>, nan, nan, <span class=\"number\">0.9984779299847792</span>, <span class=\"number\">0.9273927392739273</span>, <span class=\"number\">0.9982847341337907</span>, <span class=\"number\">0.9968085106382979</span>, <span class=\"number\">0.8834399431414357</span>, nan, <span class=\"number\">0.9884337349397591</span>, nan, <span class=\"number\">0.9989203195854027</span>, <span class=\"number\">0.9378486055776891</span>, <span class=\"number\">0.8833289896620624</span>, <span class=\"number\">0.5492788461538463</span>, <span class=\"number\">0.9656746031746032</span>, <span class=\"number\">0.9627329192546583</span>, nan, <span class=\"number\">0.1288445552784705</span>, <span class=\"number\">0.7963810769566165</span>, <span class=\"number\">0.6262121743194298</span>, <span class=\"number\">0.9969696969696971</span>, nan, <span class=\"number\">1.0</span>, <span class=\"number\">0.5115157562151824</span>, <span class=\"number\">0.5363573883161511</span>, <span class=\"number\">0.8246268656716417</span>, <span class=\"number\">0.961038961038961</span>, <span class=\"number\">0.5798104956268222</span>, <span class=\"number\">0.9954128440366973</span>, <span class=\"number\">0.9805084745762711</span>, <span class=\"number\">0.5714285714285715</span>, <span class=\"number\">0.3541666666666667</span>, <span class=\"number\">1.0</span>, nan, <span class=\"number\">0.976701410177805</span>, <span class=\"number\">0.9266450916936354</span>, nan, <span class=\"number\">0.7343277565007055</span>, <span class=\"number\">0.9352179034157833</span>, <span class=\"number\">0.8568421052631578</span>, nan, <span class=\"number\">0.6729717199814558</span>, <span class=\"number\">0.6813521406822842</span>, <span class=\"number\">0.8780609695152424</span>, <span class=\"number\">0.877455219271155</span>, <span class=\"number\">0.49257876089246383</span>, <span class=\"number\">0.9967689822294022</span>, <span class=\"number\">0.6989337822671156</span>, <span class=\"number\">0.8369019296854349</span>, <span class=\"number\">1.0</span>, nan, <span class=\"number\">0.9147130582369788</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.926131850675139</span>, <span class=\"number\">0.9953175299970733</span>, <span class=\"number\">0.5522321428571428</span>], <span class=\"string\">&#x27;individual_recall_probabilities&#x27;</span>: [<span class=\"number\">0.9892871888639849</span>, <span class=\"number\">0.9969298245614034</span>, <span class=\"number\">0.998406374501992</span>, <span class=\"number\">0.9991584262571008</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9818840579710145</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9989852866565195</span>, <span class=\"number\">0.9390470297029704</span>, <span class=\"number\">0.9996361557253496</span>, <span class=\"number\">0.9985815602836879</span>, <span class=\"number\">0.9995938673977053</span>, <span class=\"number\">0</span>, <span class=\"number\">0.992552026286966</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9997840639170805</span>, <span class=\"number\">0.9850137909898866</span>, <span class=\"number\">0.9993602956855497</span>, <span class=\"number\">0.9997996794871796</span>, <span class=\"number\">0.988095238095238</span>, <span class=\"number\">0.9881422924901186</span>, <span class=\"number\">0</span>, <span class=\"number\">0.12967581047381538</span>, <span class=\"number\">0.9960758665794637</span>, <span class=\"number\">0.9996494917630565</span>, <span class=\"number\">0.9992424242424242</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9828132066938037</span>, <span class=\"number\">0.9998752806186082</span>, <span class=\"number\">0.9994845360824742</span>, <span class=\"number\">0.9371643204432384</span>, <span class=\"number\">0.9896694214876033</span>, <span class=\"number\">0.6016763848396501</span>, <span class=\"number\">0.9986238532110092</span>, <span class=\"number\">0.9993220338983051</span>, <span class=\"number\">0.7142857142857143</span>, <span class=\"number\">0.5902777777777778</span>, <span class=\"number\">0.9006410256410257</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9779276517473943</span>, <span class=\"number\">0.9902912621359224</span>, <span class=\"number\">0</span>, <span class=\"number\">0.7347309010280185</span>, <span class=\"number\">0.9834501987632508</span>, <span class=\"number\">0.9484210526315788</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9997681965693093</span>, <span class=\"number\">0.9998912570682905</span>, <span class=\"number\">0.9370314842578711</span>, <span class=\"number\">0.9998034701555393</span>, <span class=\"number\">0.9998563631140476</span>, <span class=\"number\">0.9973074851911686</span>, <span class=\"number\">0.707351290684624</span>, <span class=\"number\">0.9994713190589479</span>, <span class=\"number\">0.9997750787224471</span>, <span class=\"number\">0</span>, <span class=\"number\">0.9997878434284502</span>, <span class=\"number\">0.9997306941358648</span>, <span class=\"number\">0.9265289912629071</span>, <span class=\"number\">0.9997366110623354</span>, <span class=\"number\">0.9970238095238095</span>], <span class=\"string\">&#x27;individual_precision_distances&#x27;</span>: [<span class=\"number\">686.0</span>, <span class=\"number\">0.07142857142857142</span>, <span class=\"number\">0.5</span>, <span class=\"number\">0.5</span>, nan, <span class=\"number\">0.0</span>, nan, nan, <span class=\"number\">0.25</span>, <span class=\"number\">2.0</span>, <span class=\"number\">0.0625</span>, <span class=\"number\">0.75</span>, <span class=\"number\">130.66666666666666</span>, nan, <span class=\"number\">0.1</span>, nan, <span class=\"number\">0.75</span>, <span class=\"number\">12.416666666666666</span>, <span class=\"number\">143.05555555555554</span>, <span class=\"number\">561.1875</span>, <span class=\"number\">24.0</span>, <span class=\"number\">0.07142857142857142</span>, nan, <span class=\"number\">416.5</span>, <span class=\"number\">272.5</span>, <span class=\"number\">529.7083333333334</span>, <span class=\"number\">0.16666666666666666</span>, nan, <span class=\"number\">0.0</span>, <span class=\"number\">927.4166666666666</span>, <span class=\"number\">798.0</span>, <span class=\"number\">52.7</span>, <span class=\"number\">0.07142857142857142</span>, <span class=\"number\">547.0</span>, <span class=\"number\">2.0833333333333335</span>, <span class=\"number\">1.5394736842105263</span>, <span class=\"number\">0.75</span>, <span class=\"number\">2.5</span>, <span class=\"number\">0.0</span>, nan, <span class=\"number\">2.5</span>, <span class=\"number\">0.6666666666666666</span>, nan, <span class=\"number\">328.5</span>, <span class=\"number\">75.83333333333333</span>, <span class=\"number\">1.4</span>, nan, <span class=\"number\">637.2</span>, <span class=\"number\">535.5714285714286</span>, <span class=\"number\">20.166666666666668</span>, <span class=\"number\">191.75</span>, <span class=\"number\">783.4166666666666</span>, <span class=\"number\">1.5</span>, <span class=\"number\">535.0</span>, <span class=\"number\">307.5</span>, <span class=\"number\">0.0</span>, nan, <span class=\"number\">102.31818181818181</span>, <span class=\"number\">0.0</span>, <span class=\"number\">55.5</span>, <span class=\"number\">0.2222222222222222</span>, <span class=\"number\">475.0</span>], <span class=\"string\">&#x27;individual_recall_distances&#x27;</span>: [<span class=\"number\">10.0</span>, <span class=\"number\">0.175</span>, <span class=\"number\">1.0</span>, <span class=\"number\">1.0</span>, inf, <span class=\"number\">0.4166666666666667</span>, inf, inf, <span class=\"number\">0.6666666666666666</span>, <span class=\"number\">6.15625</span>, <span class=\"number\">0.1590909090909091</span>, <span class=\"number\">0.6666666666666666</span>, <span class=\"number\">0.3333333333333333</span>, inf, <span class=\"number\">0.7727272727272727</span>, inf, <span class=\"number\">0.25</span>, <span class=\"number\">4.701923076923077</span>, <span class=\"number\">0.4090909090909091</span>, <span class=\"number\">0.25</span>, <span class=\"number\">7.5</span>, <span class=\"number\">0.2727272727272727</span>, inf, <span class=\"number\">417.5</span>, <span class=\"number\">3.0</span>, <span class=\"number\">0.25</span>, <span class=\"number\">0.16666666666666666</span>, inf, <span class=\"number\">0.8636363636363636</span>, <span class=\"number\">0.125</span>, <span class=\"number\">0.625</span>, <span class=\"number\">19.5</span>, <span class=\"number\">0.22727272727272727</span>, <span class=\"number\">520.0</span>, <span class=\"number\">1.125</span>, <span class=\"number\">0.1</span>, <span class=\"number\">1.5</span>, <span class=\"number\">2.5</span>, <span class=\"number\">0.3333333333333333</span>, inf, <span class=\"number\">9.0</span>, <span class=\"number\">0.25</span>, inf, <span class=\"number\">329.0</span>, <span class=\"number\">15.0</span>, <span class=\"number\">1.225</span>, inf, <span class=\"number\">0.25</span>, <span class=\"number\">0.125</span>, <span class=\"number\">10.5</span>, <span class=\"number\">0.1590909090909091</span>, <span class=\"number\">0.125</span>, <span class=\"number\">2.5</span>, <span class=\"number\">521.5</span>, <span class=\"number\">1.0</span>, <span class=\"number\">0.25</span>, inf, <span class=\"number\">0.13636363636363635</span>, <span class=\"number\">0.3333333333333333</span>, <span class=\"number\">66.0</span>, <span class=\"number\">0.075</span>, <span class=\"number\">2.5</span>]&#125;</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.301</span></span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.0683469387755102</span></span><br><span class=\"line\">Valid affiliation precision: <span class=\"number\">0.9991</span></span><br><span class=\"line\">Valid affiliation recall: <span class=\"number\">0.7898</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RevisedPointAdjusted F1: <span class=\"number\">0.7097</span>  </span><br><span class=\"line\">Valid RevisedPointAdjusted precision: <span class=\"number\">0.6875</span> </span><br><span class=\"line\">Valid RevisedPointAdjusted recall: <span class=\"number\">0.7333</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Evaluate  is Done ! #########################</span></span><br><span class=\"line\">Test affiliation precision: <span class=\"number\">0.8333</span> </span><br><span class=\"line\">Test affiliation recall: <span class=\"number\">0.7724</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RevisedPointAdjusted F1: <span class=\"number\">0.4259</span></span><br><span class=\"line\">Test RevisedPointAdjusted precision: <span class=\"number\">0.5000</span></span><br><span class=\"line\">Test RevisedPointAdjusted recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========Summary Metrics <span class=\"keyword\">for</span> multiple</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;accuracy&#x27;</span>: <span class=\"number\">0.0</span>&#125;</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> Precision: <span class=\"number\">0.83334</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.77243</span></span><br><span class=\"line\">f1:        <span class=\"number\">0.80173</span></span><br><span class=\"line\">Revised-point-adjusted metrics:</span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.42593</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.50000</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.37097</span></span><br><span class=\"line\">Point-adjusted metrics:</span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.43243</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.86857</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.28788</span></span><br><span class=\"line\">NAB Scores:</span><br><span class=\"line\"> NAB Score (balanced):       <span class=\"number\">0.32826</span></span><br><span class=\"line\"> NAB Score (high precision): <span class=\"number\">0.32342</span></span><br><span class=\"line\"> NAB Score (high recall):    <span class=\"number\">0.34250</span></span><br><span class=\"line\">seed: <span class=\"number\">2</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">==========Configuration of the model</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">dataset:IOpsCompetition</span><br><span class=\"line\">input_channels:<span class=\"number\">1</span></span><br><span class=\"line\">kernel_size:<span class=\"number\">4</span></span><br><span class=\"line\">stride:<span class=\"number\">1</span></span><br><span class=\"line\">final_out_channels:<span class=\"number\">32</span></span><br><span class=\"line\">hidden_size:<span class=\"number\">64</span></span><br><span class=\"line\">num_layers:<span class=\"number\">3</span></span><br><span class=\"line\">project_channels:<span class=\"number\">20</span></span><br><span class=\"line\">dropout:<span class=\"number\">0.45</span></span><br><span class=\"line\">features_len:<span class=\"number\">6</span></span><br><span class=\"line\">window_size:<span class=\"number\">16</span></span><br><span class=\"line\">time_step:<span class=\"number\">2</span></span><br><span class=\"line\">num_epoch:<span class=\"number\">5</span></span><br><span class=\"line\">freeze_length_epoch:<span class=\"number\">2</span></span><br><span class=\"line\">change_center_epoch:<span class=\"number\">1</span></span><br><span class=\"line\">center_eps:<span class=\"number\">0.1</span></span><br><span class=\"line\">omega1:<span class=\"number\">1</span></span><br><span class=\"line\">omega2:<span class=\"number\">0.1</span></span><br><span class=\"line\">beta1:<span class=\"number\">0.9</span></span><br><span class=\"line\">beta2:<span class=\"number\">0.99</span></span><br><span class=\"line\">lr:<span class=\"number\">0.0001</span></span><br><span class=\"line\">drop_last:<span class=\"literal\">False</span></span><br><span class=\"line\">batch_size:<span class=\"number\">512</span></span><br><span class=\"line\">nu:<span class=\"number\">0.001</span></span><br><span class=\"line\">detect_nu:<span class=\"number\">0.0015</span></span><br><span class=\"line\">threshold_determine:floating</span><br><span class=\"line\">objective:soft-boundary</span><br><span class=\"line\">loss_type:distance</span><br><span class=\"line\">augmentation:&lt;conf.coca.IOpsCompetition_Configs.augmentations <span class=\"built_in\">object</span> at <span class=\"number\">0x140958190</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">Process finished <span class=\"keyword\">with</span> exit code <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<h3 id=\"修改好的实验代码\">修改好的实验代码</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/Users/sunwu/miniforge3/envs/sw_torch_1_10/<span class=\"built_in\">bin</span>/python /Users/sunwu/SW-Research/COCA-main/coca_debug.py </span><br><span class=\"line\">&lt;frozen importlib._bootstrap&gt;:<span class=\"number\">219</span>: RuntimeWarning: scipy._lib.messagestream.MessageStream size changed, may indicate binary incompatibility. Expected <span class=\"number\">56</span> <span class=\"keyword\">from</span> C header, got <span class=\"number\">64</span> <span class=\"keyword\">from</span> PyObject</span><br><span class=\"line\">plotly <span class=\"keyword\">not</span> installed, so plotly visualizations will <span class=\"keyword\">not</span> work. Try installing Merlion <span class=\"keyword\">with</span> optional dependencies using `pip install salesforce-merlion[plot]` <span class=\"keyword\">or</span> `pip install `salesforce-merlion[<span class=\"built_in\">all</span>]`.</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t train_data.shape:<span class=\"number\">146255</span>,test_data.shape:<span class=\"number\">149130</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Training started ....</span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">1</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">396.1572</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">115.7170</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">109.9178</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">2</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">1.4987</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.5217</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.5218</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">3</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.5671</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.4676</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.4677</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">4</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.4959</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.3880</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.3884</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\">Epoch : <span class=\"number\">5</span></span><br><span class=\"line\">Train Loss     : <span class=\"number\">0.4482</span>\t | </span><br><span class=\"line\">Valid Loss     : <span class=\"number\">0.3708</span>\t  | </span><br><span class=\"line\">Test Loss     : <span class=\"number\">0.3710</span>\t  | </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Training is Done! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################## Start to evaluate! #########################</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Calculating validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.2520204081632653</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.9991141275746687</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7897834771523201</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.23977551020408164</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.7096774193548386</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.6875</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7333333333333333</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Calculating testing metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Best affiliation quantile: <span class=\"number\">0.301</span></span><br><span class=\"line\">Best affiliation  metric: &#123;<span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.8333357886680556</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.7724293430234433</span>&#125;</span><br><span class=\"line\">Best revised point adjusted anomaly quantile: <span class=\"number\">0.0683469387755102</span></span><br><span class=\"line\">Best revised point adjusted: &#123;<span class=\"string\">&#x27;f1&#x27;</span>: <span class=\"number\">0.42592592592592593</span>, <span class=\"string\">&#x27;precision&#x27;</span>: <span class=\"number\">0.5</span>, <span class=\"string\">&#x27;recall&#x27;</span>: <span class=\"number\">0.3709677419354839</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Validation metrics</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Valid affiliation precision: <span class=\"number\">0.9991</span></span><br><span class=\"line\">Valid affiliation recall: <span class=\"number\">0.7898</span></span><br><span class=\"line\"></span><br><span class=\"line\">Valid RevisedPointAdjusted F1: <span class=\"number\">0.7097</span>  </span><br><span class=\"line\">Valid RevisedPointAdjusted precision: <span class=\"number\">0.6875</span> </span><br><span class=\"line\">Valid RevisedPointAdjusted recall: <span class=\"number\">0.7333</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Testing metric</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">Test affiliation precision: <span class=\"number\">0.8333</span> </span><br><span class=\"line\">Test affiliation recall: <span class=\"number\">0.7724</span></span><br><span class=\"line\"></span><br><span class=\"line\">Test RevisedPointAdjusted F1: <span class=\"number\">0.4259</span></span><br><span class=\"line\">Test RevisedPointAdjusted precision: <span class=\"number\">0.5000</span></span><br><span class=\"line\">Test RevisedPointAdjusted recall: <span class=\"number\">0.3710</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Summary Metrics <span class=\"keyword\">for</span> multiple</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&#123;<span class=\"string\">&#x27;accuracy&#x27;</span>: <span class=\"number\">0.0</span>&#125;</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class=\"line\">affiliation metrics:</span><br><span class=\"line\"> f1:        <span class=\"number\">0.80173</span></span><br><span class=\"line\">Precision: <span class=\"number\">0.83334</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.77243</span></span><br><span class=\"line\">Revised-point-adjusted metrics:</span><br><span class=\"line\"></span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.42593</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.50000</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.37097</span></span><br><span class=\"line\">Point-adjusted metrics:</span><br><span class=\"line\"></span><br><span class=\"line\"> F1 score:  <span class=\"number\">0.43243</span></span><br><span class=\"line\"> Precision: <span class=\"number\">0.86857</span></span><br><span class=\"line\"> Recall:    <span class=\"number\">0.28788</span></span><br><span class=\"line\">NAB Scores:</span><br><span class=\"line\"></span><br><span class=\"line\"> NAB Score (balanced):       <span class=\"number\">0.32826</span></span><br><span class=\"line\"> NAB Score (high precision): <span class=\"number\">0.32342</span></span><br><span class=\"line\"> NAB Score (high recall):    <span class=\"number\">0.34250</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t Configuration of the model</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">dataset:IOpsCompetition</span><br><span class=\"line\">input_channels:<span class=\"number\">1</span></span><br><span class=\"line\">kernel_size:<span class=\"number\">4</span></span><br><span class=\"line\">stride:<span class=\"number\">1</span></span><br><span class=\"line\">final_out_channels:<span class=\"number\">32</span></span><br><span class=\"line\">hidden_size:<span class=\"number\">64</span></span><br><span class=\"line\">num_layers:<span class=\"number\">3</span></span><br><span class=\"line\">project_channels:<span class=\"number\">20</span></span><br><span class=\"line\">dropout:<span class=\"number\">0.45</span></span><br><span class=\"line\">features_len:<span class=\"number\">6</span></span><br><span class=\"line\">window_size:<span class=\"number\">16</span></span><br><span class=\"line\">time_step:<span class=\"number\">2</span></span><br><span class=\"line\">num_epoch:<span class=\"number\">5</span></span><br><span class=\"line\">freeze_length_epoch:<span class=\"number\">2</span></span><br><span class=\"line\">change_center_epoch:<span class=\"number\">1</span></span><br><span class=\"line\">center_eps:<span class=\"number\">0.1</span></span><br><span class=\"line\">omega1:<span class=\"number\">1</span></span><br><span class=\"line\">omega2:<span class=\"number\">0.1</span></span><br><span class=\"line\">beta1:<span class=\"number\">0.9</span></span><br><span class=\"line\">beta2:<span class=\"number\">0.99</span></span><br><span class=\"line\">lr:<span class=\"number\">0.0001</span></span><br><span class=\"line\">drop_last:<span class=\"literal\">False</span></span><br><span class=\"line\">batch_size:<span class=\"number\">512</span></span><br><span class=\"line\">nu:<span class=\"number\">0.001</span></span><br><span class=\"line\">detect_nu:<span class=\"number\">0.0015</span></span><br><span class=\"line\">threshold_determine:floating</span><br><span class=\"line\">objective:soft-boundary</span><br><span class=\"line\">loss_type:distance</span><br><span class=\"line\">augmentation:&lt;conf.coca.IOpsCompetition_Configs.augmentations <span class=\"built_in\">object</span> at <span class=\"number\">0x15f7583d0</span>&gt;</span><br><span class=\"line\">Training time: <span class=\"number\">218.982158</span></span><br><span class=\"line\"></span><br><span class=\"line\">Process finished <span class=\"keyword\">with</span> exit code <span class=\"number\">0</span></span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<p><code>anomaly_predict.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pprint</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> affiliation.generics <span class=\"keyword\">import</span> convert_vector_to_events</span><br><span class=\"line\"><span class=\"keyword\">from</span> affiliation.metrics <span class=\"keyword\">import</span> pr_from_events</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.evaluate.anomaly <span class=\"keyword\">import</span> accumulate_tsad_score, ScoreType</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.utils <span class=\"keyword\">import</span> TimeSeries</span><br><span class=\"line\"><span class=\"keyword\">from</span> models.reasonable_metric <span class=\"keyword\">import</span> tsad_reasonable</span><br><span class=\"line\"><span class=\"keyword\">from</span> affiliation.generics <span class=\"keyword\">import</span> convert_vector_to_events</span><br><span class=\"line\"><span class=\"keyword\">from</span> affiliation.metrics <span class=\"keyword\">import</span> pr_from_events</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">ad_predict</span>(<span class=\"params\">target, scores, mode, nu</span>):</span><br><span class=\"line\">    if_aff = np.count_nonzero(target)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">        events_gt = convert_vector_to_events(target)</span><br><span class=\"line\">    target = TimeSeries.from_pd(pd.DataFrame(target))</span><br><span class=\"line\">    scores = np.array(scores)</span><br><span class=\"line\">    <span class=\"comment\"># standardization</span></span><br><span class=\"line\">    mean = np.mean(scores)</span><br><span class=\"line\">    std = np.std(scores)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> std != <span class=\"number\">0</span>:</span><br><span class=\"line\">        scores = (scores - mean) / std</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># For UCR dataset, there is only one anomaly period in the test set.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> mode == <span class=\"string\">&#x27;one-anomaly&#x27;</span>:</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        threshold = np.<span class=\"built_in\">max</span>(scores, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        max_number = np.<span class=\"built_in\">sum</span>(scores == threshold)</span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> max_number &lt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">            <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> r2.item() &gt;= threshold:</span><br><span class=\"line\">                    predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                    mount += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">            events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">            Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">            affiliation_max = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            affiliation_max = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Fixed threshold</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> mode == <span class=\"string\">&#x27;fix&#x27;</span>:</span><br><span class=\"line\">        detect_nu = <span class=\"number\">100</span> * (<span class=\"number\">1</span> - nu)</span><br><span class=\"line\">        threshold = np.percentile(scores, detect_nu)</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r2.item() &gt; threshold:</span><br><span class=\"line\">                predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                mount += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">            events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">            Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">            affiliation_max = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            affiliation_max = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Floating threshold</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"comment\"># Set the anomaly  percentile to [0.001, 0.3] (100 - np.max(nu_list)=99.7 )</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># To reduce the quantity to calculate</span></span><br><span class=\"line\">        <span class=\"comment\"># nu_list = np.arange(1, 301) / 1e3</span></span><br><span class=\"line\">        nu_list = np.linspace(<span class=\"number\">1</span>, <span class=\"number\">301</span>, <span class=\"number\">50</span>) / <span class=\"number\">1e3</span>  <span class=\"comment\"># nu_list is in [0.001,0.30]</span></span><br><span class=\"line\">        f1_revised_point_adjusted_list, accumulate_tsad_score_list, f1_affiliation_list, affiliation_metric_list = [], [], [], []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> detect_nu <span class=\"keyword\">in</span> nu_list:</span><br><span class=\"line\">            threshold = np.percentile(scores, <span class=\"number\">100</span> - detect_nu)</span><br><span class=\"line\">            predict = np.where(scores &gt; threshold, <span class=\"number\">1</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">            dic = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">                events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">                Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">                affiliation_metric = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">                dic[<span class=\"string\">&quot;precision&quot;</span>] = affiliation_metric[<span class=\"string\">&#x27;precision&#x27;</span>]</span><br><span class=\"line\">                dic[<span class=\"string\">&quot;recall&quot;</span>] = affiliation_metric[<span class=\"string\">&#x27;recall&#x27;</span>]</span><br><span class=\"line\">                affiliation_f1 = <span class=\"number\">2</span> * (dic[<span class=\"string\">&quot;precision&quot;</span>] * dic[<span class=\"string\">&quot;recall&quot;</span>]) / (dic[<span class=\"string\">&quot;precision&quot;</span>] + dic[<span class=\"string\">&quot;recall&quot;</span>])</span><br><span class=\"line\">                f1_affiliation_list.append(affiliation_f1)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">                dic[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">                dic[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">                f1_affiliation_list.append(<span class=\"number\">0</span>)</span><br><span class=\"line\">            affiliation_metric_list.append(dic)</span><br><span class=\"line\"></span><br><span class=\"line\">            predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\"># 这个对象可以求很多的score, such as PA, PWA, RPA</span></span><br><span class=\"line\">            <span class=\"comment\"># metric = &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;Pointwise Precision&quot;: ats.precision(score_type=ScoreType.Pointwise),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;Pointwise Recall&quot;: ats.recall(score_type=ScoreType.Pointwise),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;Pointwise F1&quot;: ats.f1(score_type=ScoreType.Pointwise),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;PointAdjusted Precision&quot;: ats.precision(score_type=ScoreType.PointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;PointAdjusted Recall&quot;: ats.recall(score_type=ScoreType.PointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;PointAdjusted F1&quot;: ats.f1(score_type=ScoreType.PointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;RevisedPointAdjusted Precision&quot;: ats.precision(score_type=ScoreType.RevisedPointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;RevisedPointAdjusted Recall&quot;: ats.recall(score_type=ScoreType.RevisedPointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#     &quot;RevisedPointAdjusted F1&quot;: ats.f1(score_type=ScoreType.RevisedPointAdjusted),</span></span><br><span class=\"line\">            <span class=\"comment\">#</span></span><br><span class=\"line\">            <span class=\"comment\"># &#125;</span></span><br><span class=\"line\">            ats = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">            f1_revised_point_adjusted = ats.f1(ScoreType.RevisedPointAdjusted)</span><br><span class=\"line\">            f1_revised_point_adjusted_list.append(f1_revised_point_adjusted)</span><br><span class=\"line\">            accumulate_tsad_score_list.append(ats)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Find the maximum affiliation F1 score</span></span><br><span class=\"line\">        index_max_f1_affiliation = np.argmax(f1_affiliation_list, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        affiliation_max = affiliation_metric_list[index_max_f1_affiliation]</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Find the maximum affiliation percentile(such as  2.26%)</span></span><br><span class=\"line\">        nu_max1 = nu_list[index_max_f1_affiliation]</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Best affiliation quantile:&quot;</span>, nu_max1)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Best affiliation  metric: <span class=\"subst\">&#123;affiliation_max&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Find the maximum RevisedPointAdjusted f1</span></span><br><span class=\"line\">        index_max_f1_RPA = np.argmax(f1_revised_point_adjusted_list, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        score_max = accumulate_tsad_score_list[index_max_f1_RPA]</span><br><span class=\"line\">        nu_max2 = nu_list[index_max_f1_RPA]</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;Best revised point adjusted anomaly quantile:&#x27;</span>, nu_max2)</span><br><span class=\"line\">        revised_point_adjust = &#123;</span><br><span class=\"line\">            <span class=\"string\">&quot;f1&quot;</span>: score_max.f1(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\">            <span class=\"string\">&quot;precision&quot;</span>: score_max.precision(score_type=ScoreType.RevisedPointAdjusted),</span><br><span class=\"line\">            <span class=\"string\">&quot;recall&quot;</span>: score_max.recall(score_type=ScoreType.RevisedPointAdjusted)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Best revised point adjusted: <span class=\"subst\">&#123;revised_point_adjust&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        threshold = np.percentile(scores, <span class=\"number\">100</span> - nu_max1)</span><br><span class=\"line\">        predict = np.where(scores &gt; threshold, <span class=\"number\">1</span>, <span class=\"number\">0</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> affiliation_max, score_max, predict</span><br><span class=\"line\">    <span class=\"comment\"># affiliation_max=&#123;&#x27;precision&#x27;: 0, &#x27;recall&#x27;: 0&#125;,</span></span><br><span class=\"line\">    <span class=\"comment\"># score max: &lt;merlion.evaluate.anomaly.TSADScoreAccumulator&gt;</span></span><br><span class=\"line\">    <span class=\"comment\"># predict.shape=59, the best prediction where the affiliation f1 is maximal. Predict is</span></span><br><span class=\"line\">    <span class=\"comment\">#   not a score, it is a label which value is one of 0 or 1.</span></span><br><span class=\"line\">    <span class=\"comment\">#   predict = np.where(scores &gt; threshold, 1, 0)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">ad_predict_back</span>(<span class=\"params\">target, scores, mode, nu</span>):</span><br><span class=\"line\">    if_aff = np.count_nonzero(target)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">        events_gt = convert_vector_to_events(target)</span><br><span class=\"line\">    target = TimeSeries.from_pd(pd.DataFrame(target))</span><br><span class=\"line\">    scores = np.array(scores)</span><br><span class=\"line\">    <span class=\"comment\"># standardization</span></span><br><span class=\"line\">    mean = np.mean(scores)</span><br><span class=\"line\">    std = np.std(scores)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> std != <span class=\"number\">0</span>:</span><br><span class=\"line\">        scores = (scores - mean) / std</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># For UCR dataset, there is only one anomaly period in the test set.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> mode == <span class=\"string\">&#x27;one-anomaly&#x27;</span>:</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        threshold = np.<span class=\"built_in\">max</span>(scores, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        max_number = np.<span class=\"built_in\">sum</span>(scores == threshold)</span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">if</span> max_number &lt;= <span class=\"number\">10</span>:</span><br><span class=\"line\">            <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> r2.item() &gt;= threshold:</span><br><span class=\"line\">                    predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                    mount += <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">            events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">            Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">            affiliation_max = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            affiliation_max = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Fixed threshold</span></span><br><span class=\"line\">    <span class=\"keyword\">elif</span> mode == <span class=\"string\">&#x27;fix&#x27;</span>:</span><br><span class=\"line\">        detect_nu = <span class=\"number\">100</span> * (<span class=\"number\">1</span> - nu)</span><br><span class=\"line\">        threshold = np.percentile(scores, detect_nu)</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r2.item() &gt; threshold:</span><br><span class=\"line\">                predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                mount += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">            events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">            Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">            affiliation_max = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            affiliation_max = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">            affiliation_max[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">        predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">        score_max = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Floating threshold</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        nu_list = np.arange(<span class=\"number\">1</span>, <span class=\"number\">301</span>) / <span class=\"number\">1e3</span></span><br><span class=\"line\">        f1_list, score_list, f1_list2, affiliation_list = [], [], [], []</span><br><span class=\"line\">        <span class=\"keyword\">for</span> detect_nu <span class=\"keyword\">in</span> nu_list:</span><br><span class=\"line\">            threshold = np.percentile(scores, <span class=\"number\">100</span> - detect_nu)</span><br><span class=\"line\">            mount = <span class=\"number\">0</span></span><br><span class=\"line\">            predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">            <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">                <span class=\"keyword\">if</span> r2.item() &gt; threshold:</span><br><span class=\"line\">                    predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                    mount += <span class=\"number\">1</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> if_aff != <span class=\"number\">0</span>:</span><br><span class=\"line\">                events_pred = convert_vector_to_events(predict)</span><br><span class=\"line\">                Trange = (<span class=\"number\">0</span>, <span class=\"built_in\">len</span>(predict))</span><br><span class=\"line\">                dic = pr_from_events(events_pred, events_gt, Trange)</span><br><span class=\"line\">                affiliation_f1 = <span class=\"number\">2</span> * (dic[<span class=\"string\">&quot;precision&quot;</span>] * dic[<span class=\"string\">&quot;recall&quot;</span>]) / (dic[<span class=\"string\">&quot;precision&quot;</span>] + dic[<span class=\"string\">&quot;recall&quot;</span>])</span><br><span class=\"line\">                f1_list2.append(affiliation_f1)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                dic = <span class=\"built_in\">dict</span>()</span><br><span class=\"line\">                dic[<span class=\"string\">&quot;precision&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">                dic[<span class=\"string\">&quot;recall&quot;</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">                f1_list2.append(<span class=\"number\">0</span>)</span><br><span class=\"line\">            affiliation_list.append(dic)</span><br><span class=\"line\">            predict_ts = TimeSeries.from_pd(pd.DataFrame(predict))</span><br><span class=\"line\">            score = accumulate_tsad_score(ground_truth=target, predict=predict_ts)</span><br><span class=\"line\">            f1 = score.f1(ScoreType.RevisedPointAdjusted)</span><br><span class=\"line\">            f1_list.append(f1)</span><br><span class=\"line\">            score_list.append(score)</span><br><span class=\"line\">        index_max1 = np.argmax(f1_list2, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        affiliation_max = affiliation_list[index_max1]</span><br><span class=\"line\">        nu_max1 = nu_list[index_max1]</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Best affiliation quantile:&quot;</span>, nu_max1)</span><br><span class=\"line\"></span><br><span class=\"line\">        index_max2 = np.argmax(f1_list, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">        score_max = score_list[index_max2]</span><br><span class=\"line\">        nu_max2 = nu_list[index_max2]</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;Best anomaly quantile:&#x27;</span>, nu_max2)</span><br><span class=\"line\"></span><br><span class=\"line\">        threshold = np.percentile(scores, <span class=\"number\">100</span> - nu_max1)</span><br><span class=\"line\">        mount = <span class=\"number\">0</span></span><br><span class=\"line\">        predict = np.zeros(<span class=\"built_in\">len</span>(scores))</span><br><span class=\"line\">        <span class=\"keyword\">for</span> index, r2 <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(scores):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r2.item() &gt; threshold:</span><br><span class=\"line\">                predict[index] = <span class=\"number\">1</span></span><br><span class=\"line\">                mount += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> affiliation_max, score_max, predict</span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n<p><code>coca_debug.py</code></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> argparse</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.evaluate.anomaly <span class=\"keyword\">import</span> TSADScoreAccumulator <span class=\"keyword\">as</span> ScoreAcc, ScoreType</span><br><span class=\"line\"><span class=\"keyword\">from</span> merlion.utils <span class=\"keyword\">import</span> TimeSeries</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> conf.coca.IOpsCompetition_Configs <span class=\"keyword\">import</span> Config</span><br><span class=\"line\"><span class=\"keyword\">from</span> dataloader <span class=\"keyword\">import</span> data_generator4</span><br><span class=\"line\"><span class=\"keyword\">from</span> models.COCA.coca_network.model <span class=\"keyword\">import</span> base_Model</span><br><span class=\"line\"><span class=\"keyword\">from</span> models.COCA.coca_trainer.trainer <span class=\"keyword\">import</span> Trainer</span><br><span class=\"line\"><span class=\"keyword\">from</span> models.reasonable_metric <span class=\"keyword\">import</span> reasonable_accumulator</span><br><span class=\"line\"><span class=\"keyword\">from</span> pysearchlib.utils.util_print <span class=\"keyword\">import</span> print_separator</span><br><span class=\"line\"><span class=\"keyword\">from</span> pysearchlib.utils.util_pytorch <span class=\"keyword\">import</span> enable_pytorch_reproduciable</span><br><span class=\"line\"><span class=\"keyword\">from</span> ts_datasets.ts_datasets.anomaly <span class=\"keyword\">import</span> NAB, IOpsCompetition</span><br><span class=\"line\"><span class=\"keyword\">from</span> utils <span class=\"keyword\">import</span> print_object</span><br><span class=\"line\"></span><br><span class=\"line\">start_time = datetime.now()</span><br><span class=\"line\">parser = argparse.ArgumentParser()</span><br><span class=\"line\">home_dir = os.getcwd()</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--experiment_description&#x27;</span>, default=<span class=\"string\">&#x27;Exp1&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Experiment Description&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--run_description&#x27;</span>, default=<span class=\"string\">&#x27;run1&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Experiment Description&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--visualization&#x27;</span>, default=<span class=\"literal\">True</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">bool</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Visualize&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--seed&#x27;</span>, default=<span class=\"number\">2</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">int</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;seed value&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--weight_decay&#x27;</span>, default=<span class=\"number\">5e-4</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">float</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Weight decay (L2 penalty) hyperparameter for COCA objective&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--selected_dataset&#x27;</span>, default=<span class=\"string\">&#x27;IOpsCompetition&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Dataset of choice: NAB, IOpsCompetition, SMAP, UCR&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--logs_save_dir&#x27;</span>, default=<span class=\"string\">&#x27;experiments_logs&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;saving directory&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--device&#x27;</span>, default=<span class=\"string\">&#x27;cpu&#x27;</span>, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;cpu or cuda&#x27;</span>)</span><br><span class=\"line\">parser.add_argument(<span class=\"string\">&#x27;--home_path&#x27;</span>, default=home_dir, <span class=\"built_in\">type</span>=<span class=\"built_in\">str</span>,</span><br><span class=\"line\">                    <span class=\"built_in\">help</span>=<span class=\"string\">&#x27;Project home directory&#x27;</span>)</span><br><span class=\"line\">args = parser.parse_args()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># device = &quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;</span></span><br><span class=\"line\">device = torch.device(args.device)</span><br><span class=\"line\">experiment_description = args.experiment_description</span><br><span class=\"line\">data_type = args.selected_dataset</span><br><span class=\"line\">method = <span class=\"string\">&#x27;COCA&#x27;</span></span><br><span class=\"line\">run_description = args.run_description</span><br><span class=\"line\">selected_dataset = args.selected_dataset</span><br><span class=\"line\">weight_decay = args.weight_decay</span><br><span class=\"line\">visualization = args.visualization</span><br><span class=\"line\"></span><br><span class=\"line\">logs_save_dir = args.logs_save_dir</span><br><span class=\"line\">os.makedirs(logs_save_dir, exist_ok=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">exec</span>(<span class=\"string\">f&#x27;from conf.coca.<span class=\"subst\">&#123;data_type&#125;</span>_Configs import Config as Configs&#x27;</span>)</span><br><span class=\"line\">configs = Config()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ##### fix random seeds for reproducibility ########</span></span><br><span class=\"line\">SEED = args.seed</span><br><span class=\"line\"></span><br><span class=\"line\">experiment_log_dir = os.path.join(logs_save_dir, experiment_description, run_description, <span class=\"string\">f&quot;_seed_<span class=\"subst\">&#123;SEED&#125;</span>&quot;</span>)</span><br><span class=\"line\">os.makedirs(experiment_log_dir, exist_ok=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">log_dir = experiment_log_dir</span><br><span class=\"line\"><span class=\"comment\"># Load datasets</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Get the lead &amp; lag time for the dataset</span></span><br><span class=\"line\"><span class=\"comment\"># Aggregate statistics from full dataset</span></span><br><span class=\"line\">all_anomaly_num, all_test_score, all_test_scores_reasonable = [], [], []</span><br><span class=\"line\">all_test_aff_score, all_test_aff_precision, all_test_aff_recall = [], [], []</span><br><span class=\"line\"></span><br><span class=\"line\">enable_pytorch_reproduciable()</span><br><span class=\"line\">dt = IOpsCompetition()</span><br><span class=\"line\"><span class=\"comment\"># dt = NAB()</span></span><br><span class=\"line\">time_series, meta_data = dt[<span class=\"number\">0</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">train_data = TimeSeries.from_pd(time_series[meta_data.trainval])</span><br><span class=\"line\">test_data = TimeSeries.from_pd(time_series[~meta_data.trainval])</span><br><span class=\"line\">train_labels = TimeSeries.from_pd(meta_data.anomaly[meta_data.trainval])</span><br><span class=\"line\">test_labels = TimeSeries.from_pd(meta_data.anomaly[~meta_data.trainval])</span><br><span class=\"line\"></span><br><span class=\"line\">print_separator(<span class=\"string\">f&quot;train_data.shape:<span class=\"subst\">&#123;<span class=\"built_in\">len</span>(train_data)&#125;</span>,test_data.shape:<span class=\"subst\">&#123;<span class=\"built_in\">len</span>(test_data)&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Load Model</span></span><br><span class=\"line\">model = base_Model(configs, device).to(device)</span><br><span class=\"line\">train_dl, val_dl, test_dl, test_anomaly_window_num = data_generator4(train_data, test_data, train_labels,</span><br><span class=\"line\">                                                                     test_labels, configs)</span><br><span class=\"line\"></span><br><span class=\"line\">model_optimizer = torch.optim.Adam(model.parameters(), lr=configs.lr, betas=(configs.beta1, configs.beta2),</span><br><span class=\"line\">                                   weight_decay=weight_decay)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Trainer</span></span><br><span class=\"line\">idx = <span class=\"number\">0</span></span><br><span class=\"line\">test_score_origin, test_aff, test_score, score_reasonable, predict = Trainer(model, model_optimizer, train_dl,</span><br><span class=\"line\">                                                                             val_dl, test_dl, device,</span><br><span class=\"line\">                                                                             configs, idx)</span><br><span class=\"line\">print_separator(<span class=\"string\">&quot;Summary Metrics for multiple&quot;</span>)</span><br><span class=\"line\">all_anomaly_num.append(test_anomaly_window_num)</span><br><span class=\"line\">all_test_scores_reasonable.append(score_reasonable)</span><br><span class=\"line\">all_test_aff_precision.append(test_aff[<span class=\"string\">&quot;precision&quot;</span>])</span><br><span class=\"line\">all_test_aff_recall.append(test_aff[<span class=\"string\">&quot;recall&quot;</span>])</span><br><span class=\"line\">all_test_aff_score.append(test_aff)</span><br><span class=\"line\">all_test_score.append(test_score)</span><br><span class=\"line\"></span><br><span class=\"line\">all_anomaly_num = np.array(all_anomaly_num)</span><br><span class=\"line\">sum_anomaly_num = np.<span class=\"built_in\">sum</span>(all_anomaly_num)</span><br><span class=\"line\">all_test_aff_precision = np.array(all_test_aff_precision)</span><br><span class=\"line\">all_test_aff_precision = all_test_aff_precision * all_anomaly_num / sum_anomaly_num</span><br><span class=\"line\">test_aff_precision = np.nansum(all_test_aff_precision)</span><br><span class=\"line\">all_test_aff_recall = np.array(all_test_aff_recall)</span><br><span class=\"line\">all_test_aff_recall = all_test_aff_recall * all_anomaly_num / sum_anomaly_num</span><br><span class=\"line\">test_aff_recall = np.nansum(all_test_aff_recall)</span><br><span class=\"line\">test_aff_f1 = <span class=\"number\">2</span> * (test_aff_precision * test_aff_recall) / (test_aff_precision + test_aff_recall)</span><br><span class=\"line\"></span><br><span class=\"line\">total_test_score = <span class=\"built_in\">sum</span>(all_test_score, ScoreAcc())</span><br><span class=\"line\">total_test_scores_reasonable = <span class=\"built_in\">sum</span>(all_test_scores_reasonable, reasonable_accumulator())</span><br><span class=\"line\"><span class=\"built_in\">print</span>(total_test_scores_reasonable.get_all_metrics())</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&#x27;&gt;&#x27;</span> * <span class=\"number\">32</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> configs.dataset == <span class=\"string\">&#x27;UCR&#x27;</span>:</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">&quot;UCR metrics:\\n&quot;</span>,</span><br><span class=\"line\">          <span class=\"string\">f&quot;accuracy: <span class=\"subst\">&#123;total_test_scores_reasonable.get_all_metrics()&#125;</span>\\n&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">&quot;affiliation metrics:\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;f1:        <span class=\"subst\">&#123;test_aff_f1:<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">f&quot;Precision: <span class=\"subst\">&#123;test_aff_precision:<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Recall:    <span class=\"subst\">&#123;test_aff_recall:<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">&quot;Revised-point-adjusted metrics:\\n\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;F1 score:  <span class=\"subst\">&#123;total_test_score.f1(ScoreType.RevisedPointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Precision: <span class=\"subst\">&#123;total_test_score.precision(ScoreType.RevisedPointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Recall:    <span class=\"subst\">&#123;total_test_score.recall(ScoreType.RevisedPointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">&quot;Point-adjusted metrics:\\n\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;F1 score:  <span class=\"subst\">&#123;total_test_score.f1(ScoreType.PointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Precision: <span class=\"subst\">&#123;total_test_score.precision(ScoreType.PointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;Recall:    <span class=\"subst\">&#123;total_test_score.recall(ScoreType.PointAdjusted):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      <span class=\"string\">&quot;NAB Scores:\\n\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;NAB Score (balanced):       <span class=\"subst\">&#123;total_test_score.nab_score():<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;NAB Score (high precision): <span class=\"subst\">&#123;total_test_score.nab_score(fp_weight=<span class=\"number\">0.22</span>):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">f&quot;NAB Score (high recall):    <span class=\"subst\">&#123;total_test_score.nab_score(fn_weight=<span class=\"number\">2.0</span>):<span class=\"number\">.5</span>f&#125;</span>\\n&quot;</span></span><br><span class=\"line\">      )</span><br><span class=\"line\"></span><br><span class=\"line\">print_separator(<span class=\"string\">&quot;Configuration of the model&quot;</span>)</span><br><span class=\"line\">print_object(configs)</span><br><span class=\"line\"></span><br><span class=\"line\">end_time = datetime.now()</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Training time: <span class=\"subst\">&#123;(end_time-start_time).total_seconds()&#125;</span>&quot;</span>)</span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n"},{"title":"python tqdm","share":true,"date":"2022-12-31T01:13:19.000Z","updated":"2022-12-31T01:13:32.000Z","_content":"\nhttps://pypi.org/project/tqdm/#usage\n\n```python\npbar = tqdm(total=100)\nfor i in range(10):\n    sleep(0.1)\n    pbar.update(10)\npbar.close()\n```\n","source":"_posts/python-tqdm.md","raw":"---\ntitle: python tqdm\nshare: true\ntags:\n  - uncategory\ndate: 2022-12-31 09:13:19 \nupdated: 2022-12-31 09:13:32 \ncategories: research\n---\n\nhttps://pypi.org/project/tqdm/#usage\n\n```python\npbar = tqdm(total=100)\nfor i in range(10):\n    sleep(0.1)\n    pbar.update(10)\npbar.close()\n```\n","slug":"python-tqdm","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a6004i4cv95cpufbb6","content":"<p><a href=\"https://pypi.org/project/tqdm/#usage\">https://pypi.org/project/tqdm/#usage</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pbar = tqdm(total=<span class=\"number\">100</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>):</span><br><span class=\"line\">    sleep(<span class=\"number\">0.1</span>)</span><br><span class=\"line\">    pbar.update(<span class=\"number\">10</span>)</span><br><span class=\"line\">pbar.close()</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover8.JPG","excerpt":"","more":"<p><a href=\"https://pypi.org/project/tqdm/#usage\">https://pypi.org/project/tqdm/#usage</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pbar = tqdm(total=<span class=\"number\">100</span>)</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">10</span>):</span><br><span class=\"line\">    sleep(<span class=\"number\">0.1</span>)</span><br><span class=\"line\">    pbar.update(<span class=\"number\">10</span>)</span><br><span class=\"line\">pbar.close()</span><br></pre></td></tr></table></figure>\n"},{"title":"DM 功能建议","share":true,"date":"2022-11-14T06:17:31.000Z","updated":"2022-12-18T00:07:47.000Z","aliases":["DM 功能建议"],"_content":"- AI 建议支持数据可视化\n   - 在 <a href='{% post_path 03-线性回归原理分析及实现 %}'>03-线性回归原理分析及实现</a> 中, 数据的可视化需要将预测数据下载下来进行可视化\n   - 目标: 可视化线性回归的数据\n\t  - ![static/attachment/Pasted image 20221107235748.png](/images/5b1c609a541b798d24b884ee0feeed63fb43f394.png)\n   - 期望结果\n\t  - ![static/attachment/Pasted image 20221107235830.png](/images/ae8f5996d6e1fe577c7e470beabadaa8a55d337f.png)\n- AI 建议支持图片处理的相关功能, 参考 <a href='{% post_path 04-手机品牌识别之神经网络 %}'>04-手机品牌识别之神经网络</a>\n","source":"_posts/DM-功能建议.md","raw":"---\ntitle: DM 功能建议\nshare: true\ntags:\n  - public\n  - 培训材料/贵州大学商业数据分析\ndate: 2022-11-14 14:17:31 \nupdated: 2022-12-18 08:07:47 \ncategories:\n  - uncategory\naliases:\n  - DM 功能建议\n---\n- AI 建议支持数据可视化\n   - 在 <a href='{% post_path 03-线性回归原理分析及实现 %}'>03-线性回归原理分析及实现</a> 中, 数据的可视化需要将预测数据下载下来进行可视化\n   - 目标: 可视化线性回归的数据\n\t  - ![static/attachment/Pasted image 20221107235748.png](/images/5b1c609a541b798d24b884ee0feeed63fb43f394.png)\n   - 期望结果\n\t  - ![static/attachment/Pasted image 20221107235830.png](/images/ae8f5996d6e1fe577c7e470beabadaa8a55d337f.png)\n- AI 建议支持图片处理的相关功能, 参考 <a href='{% post_path 04-手机品牌识别之神经网络 %}'>04-手机品牌识别之神经网络</a>\n","slug":"DM-功能建议","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a7004l4cv95fnv13uy","content":"<ul>\n<li>AI 建议支持数据可视化\n<ul>\n<li>在 <a href='/uncategory/63f8e4648fec.html'>03-线性回归原理分析及实现</a> 中, 数据的可视化需要将预测数据下载下来进行可视化</li>\n<li>目标: 可视化线性回归的数据\n<ul>\n<li><img src=\"/images/5b1c609a541b798d24b884ee0feeed63fb43f394.png\" alt=\"static/attachment/Pasted image 20221107235748.png\"></li>\n</ul>\n</li>\n<li>期望结果\n<ul>\n<li><img src=\"/images/ae8f5996d6e1fe577c7e470beabadaa8a55d337f.png\" alt=\"static/attachment/Pasted image 20221107235830.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>AI 建议支持图片处理的相关功能, 参考 <a href='/uncategory/316ec7ed5cda.html'>04-手机品牌识别之神经网络</a></li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover3.jpg","excerpt":"","more":"<ul>\n<li>AI 建议支持数据可视化\n<ul>\n<li>在 <a href='/uncategory/63f8e4648fec.html'>03-线性回归原理分析及实现</a> 中, 数据的可视化需要将预测数据下载下来进行可视化</li>\n<li>目标: 可视化线性回归的数据\n<ul>\n<li><img src=\"/images/5b1c609a541b798d24b884ee0feeed63fb43f394.png\" alt=\"static/attachment/Pasted image 20221107235748.png\"></li>\n</ul>\n</li>\n<li>期望结果\n<ul>\n<li><img src=\"/images/ae8f5996d6e1fe577c7e470beabadaa8a55d337f.png\" alt=\"static/attachment/Pasted image 20221107235830.png\"></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>AI 建议支持图片处理的相关功能, 参考 <a href='/uncategory/316ec7ed5cda.html'>04-手机品牌识别之神经网络</a></li>\n</ul>\n"},{"title":"python设计模式","share":true,"date":"2022-12-23T01:49:30.000Z","updated":"2022-12-23T02:48:13.000Z","_content":"## Abstract\n\npython3 设计模式 [^1] 中的模式有：简单工厂模式、工厂方法模式、抽象工厂模式、建造者模式和单例模式；结构型模式：适配器模式、桥模式、组合模式、外观模式和代理模式；行为型模式：责任链模式、观察者模式、策略模式和模板方法模式。设计模式是对软件设计中普遍存在或反复出向的各种问题所提出的解决方案。每一个设计模式系统地被命名、解释和评价了面向对象系统中一个重要和重复出现的设计。\n\n## 各模式应用场景及优缺点\n\n| 模型         | 应用场景                 | 优点                                            | 缺点                                             |\n| ------------ | ------------------------ | ----------------------------------------------- | ------------------------------------------------ |\n| 简单工厂模式 | 隐藏对象创建细节         | 不暴露对象创建的细节,通过工厂类创建实例         | **当有新的产品时，需要修改工厂类代码 (源代码)**  |\n| 工厂方法模式 | 隐藏对象创建细节         | 不需要修改工厂类代码，能够隐藏对象创建的细节    | 每增加一个具体产品类，必须增加一个相应的具体方法 |\n| 抽象工厂模式 | 隐藏对象创建细节         | 具体工厂都生产一套产品,着重于多个系列的产品对象 | 难以支持新种类抽象产品                           |\n| 建造者模式   | 隐藏对象创建细节         | 一步步构造一个复杂对象, 着重控制顺序            |                                                  |\n| 单例模式     | 只需要一个实例           | 只创建一个实例,防止了命名空间被污染             |                                                  |\n| 适配器模式   | 不同系统接口转换         | 接口不兼容的类可以一起工作                      |                                                  |\n| 桥模式       | 自定义统一事物的多个维度 | 抽象和实现相分离，扩展能力强                    |                                                  |\n| 组合模式     |                          |                                                 |                                                  |\n| 外观模式     | 提供一致的界面           |                                                 |                                                  |\n| 代理模式     | 控制对象的访问权限       |                                                 |                                                  |\n| 责任链模式   | 多部门协同审批(不同权限) |                                                 |                                                  |\n| 观察者模式   | 依赖的所有类中广播消息   |                                                 |                                                  |\n| 策略模式     | 版本分离(企业版/免费版)  |                                                 |                                                  |\n| 模板方法模式 |                          |                                                 |                                                  |\n\n## 简单工厂模式\n\n## 工厂方法模式\n\n## 抽象工厂模式\n\n抽象工厂模式的角色有：抽象工厂角色、具体工厂角色、抽象产品角色、具体产品角色和客户端。抽象工厂模式的优点是：将客户端和类的具体实现相分离；**每个工厂创建了一个完整的产品系列**，使得易于交换产品系列；有利于产品的一致性，即产品之间的约束关系。缺点是：**难以支持新种类抽象产品**。\n\n![Excalidraw/python设计模式 2022-12-23 09.54.00.excalidraw](/images/e1d44b6b049414f1bbf361e9e7305106b10ec44a.png)\n\n## 建造者模式\n\n 建造者模式是将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。角色有抽象创建者、具体创建者、指挥者和产品。建造者模式与抽象工厂模式相似，也用来创建复杂的对象。主要区别是 **建造者模式着重一步步构造一个复杂对象 (控制顺序)。而抽象工厂模式着重于多个系列的产品对象**，写个例子来加强理解：\n\n![Excalidraw/python设计模式 2022-12-23 10.02.36.excalidraw](/images/c2b8606da24eb985ade582c3a0f605aa078d0a39.png)\n\n## 单例模式\n\n单例模式保证一个类只有一个实例，并提供一个访问它的全局访问点。优点是对唯一实例的受控访问（只有一个实例），单例相当于全局变量，但防止了命名空间被污染（变量命名不会有冲突）。写个例子来加深理解：\n\n```python\nclass Singleton:\n    def __new__(cls, *args, **kwargs):\n        if not hasattr(cls, \"_instance\"):\n            cls._instance = super(Singleton, cls).__new__(cls)\n        return cls._instance\n\nclass MyClass(Singleton):\n    def __init__(self, a):\n        self.a = a\n\nms1 = MyClass(1)\nms2 = MyClass(2)\nprint(ms1.a, ms2.a)\nprint(id(ms1), id(ms2))\n\"\"\"\n2 2\n139843914173312 139843914173312\n\"\"\" \n```\n\n## 适配器模式\n\n**将一个类的接口转换成客户希望的另外一个接口，适配器使得原本由于接口不兼容而不能一起工作的那些类可以一起工作**。实现适配器的两种方式，类适配器使用多继承，对象适配器使用组合。组合就是一个类中放入另一类的对象。先来看下组合：\n\n类适配器模式使用示例：\n\n```python\n# 类适配器模式使用示例：\nfrom abc import ABCMeta, abstractmethod\n\n# 目标接口\nclass Payment(object, metaclass=ABCMeta):\n    @abstractmethod\n    def pay(self, money):\n        pass\n\nclass Alipay(Payment):\n    def pay(self, money):\n        print('支付了%d' % money)\n\n# 待适配的类\nclass BankPay():\n    def cost(self, money):\n        print('银联支付了%d' % money)\n\n# 类适配器\nclass PaymentAdapter(Payment, BankPay):\n    \"\"\"\n    把不兼容cost转换成pay\n    \"\"\"\n\n    def pay(self, money):\n        self.cost(money)\n\np = PaymentAdapter()\np.pay(100)\n\"\"\"\n银联支付了100\n\"\"\" \n```\n\n对象适配器模式使用示例：\n\n```python\n# 类适配器模式使用示例：\nfrom abc import ABCMeta, abstractmethod\n\n# 目标接口\nclass Payment(object, metaclass=ABCMeta):\n    @abstractmethod\n    def pay(self, money):\n        pass\n\nclass Alipay(Payment):\n    def pay(self, money):\n        print('支付了%d' % money)\n\n# 待适配的类\nclass BankPay():\n    def cost(self, money):\n        print('银联支付了%d' % money)\n\n# 待适配的类\nclass ApplePay():\n    def cost(self, money):\n        print('苹果支付了%d' % money)\n\n# 对象适配器\nclass PaymentAdapter(Payment):\n    def __init__(self, payment):\n        self.payment = payment\n\n    def pay(self, money):\n        self.payment.cost(money)\n\np = PaymentAdapter(ApplePay())\np.pay(100)\np = PaymentAdapter(BankPay())\np.pay(100)\n\"\"\"\n苹果支付了100\n银联支付了100\n\"\"\" \n```\n\n## 桥模式\n\n桥模式是将一个事物的两个维度分离，使其都可以独立地变化。**当事物有两个维度的表现，两个维度都可能扩展时使用**。优点是：抽象和实现相分离，扩展能力强。如果不使用桥模式，在任何维度进行扩展，需要改好多代码，因为使用到了继承：\n\n```python\nfrom abc import ABCMeta, abstractmethod\n\n# 抽象\nclass Shape(metaclass=ABCMeta):\n    def __init__(self, color):\n        self.color = color\n\n    @abstractmethod\n    def draw(self):\n        pass\n\n# 实现\nclass Color(metaclass=ABCMeta):\n    @abstractmethod\n    def paint(self, shape):\n        pass\n\n# 细化抽象\nclass Rectangle(Shape):\n    name = '长方形'\n\n    def draw(self):\n        self.color.paint(self)\n\n# 如果要扩展形状，只需要添加形状类\nclass Circle(Shape):\n    name = '圆形'\n\n    def draw(self):\n        self.color.paint(self)\n\n# 细化实现\nclass Red(Color):\n    def paint(self, shape):\n        print('画红色的%s' % shape.name)\n\n# 如果要扩展颜色，只需要添加颜色类\nclass Green(Color):\n    def paint(self, shape):\n        print('画绿色的%s' % shape.name)\n\nrectangle = Rectangle(Red())\nrectangle.draw()\ncircle = Circle(Green())\ncircle.draw()\n\"\"\"\n画红色的长方形\n画绿色的圆形\n\"\"\" \n```\n\n## 组合模式\n\n将对象组合成树形结构以表示“部分 - 整体”的层次结构 (特别是结构是递归的)，组合模式使得用户对单个对象和组合对象的使用具有一致性。优点是定义了包含基本对象和组合对象的层次结构；简化客户端代码，客户端可以一致地使用组合对象和单个对象；更加容易增加新类型的组件。\n\n## 代理模式\n\n## 责任链模式\n\n责任链模式的内容：使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这些对象连成一条链并沿着这条链传递该请求，直到有一个对象处理它为止。责任链的角色有抽象处理者、具体处理者和客户端。\n\n```python\nfrom abc import ABCMeta, abstractmethod\n\n# 抽象的处理者\nclass Handler(metaclass=ABCMeta):\n    @abstractmethod\n    def handle_leave(self, day):\n        pass\n\n# 具体的处理者\nclass GeneralManager(Handler):\n    def handle_leave(self, day):\n        if day <= 30:\n            print('总经理准假%d' % day)\n        else:\n            print('可以辞职了！')\n\n# 具体的处理者\nclass DepartmentManager(Handler):\n    def __init__(self):\n        self.next = GeneralManager()\n\n    def handle_leave(self, day):\n        if day <= 7:\n            print('项目主管准假%d' % day)\n        else:\n            print('部门经理职权不足')\n            self.next.handle_leave(day)\n\n# 具体的处理者\nclass ProjectDirector(Handler):\n    def __init__(self):\n        self.next = DepartmentManager()\n\n    def handle_leave(self, day):\n        if day <= 3:\n            print('项目主管准假%d' % day)\n        else:\n            print('项目主管职权不足')\n            self.next.handle_leave(day)\n\nday = 20\np = ProjectDirector()\np.handle_leave(day)\n\"\"\"\n项目主管职权不足\n部门经理职权不足\n总经理准假20\n\"\"\" \n```\n\n使用场景：有多个对象可以处理一个请求，哪个对象处理由运行时决定；在不明确接收者的情况下，向多个对象中的一个提交一个请求。优点是降低耦合度，一个对象无需知道是其它哪一个对象处理其请求。\n\n## 观察者模式\n\n```python\nfrom abc import ABCMeta, abstractmethod\n\n# 抽象的订阅者\nclass Observer(metaclass=ABCMeta):\n    @abstractmethod\n    def update(self, notice):\n        \"\"\"\n        :param notice: Notice类的对象\n        :return:\n        \"\"\"\n        pass\n\n# 抽象的发布者：可以是接口，子类不需要实现，所以不需要定义抽象方法！\nclass Notice:\n    def __init__(self):\n        self.observers = []\n\n    def attach(self, obs):\n        self.observers.append(obs)\n\n    def detach(self, obs):\n        self.observers.remove(obs)\n\n    def notify(self):\n        \"\"\"\n        推送\n        :return:\n        \"\"\"\n        for obs in self.observers:\n            obs.update(self)\n\n# 具体的发布者\nclass StaffNotice(Notice):\n    def __init__(self, company_info):\n        super().__init__()  # 调用父类对象声明observers属性\n        self.__company_info = company_info\n\n    @property\n    def company_info(self):\n        return self.__company_info\n\n    @company_info.setter\n    def company_info(self, info):\n        self.__company_info = info\n        self.notify()\n\n# 具体的订阅者\nclass Staff(Observer):\n    def __init__(self):\n        self.company_info = None\n\n    def update(self, notice):\n        self.company_info = notice.company_info\n\nstaff_notice = StaffNotice('初始化公司信息')\nstaff1 = Staff()\nstaff2 = Staff()\nstaff_notice.attach(staff1)\nstaff_notice.attach(staff2)\n# print(staff1.company_info) None\n# print(staff2.company_info) None\nstaff_notice.company_info = '假期放假通知！'\nprint(staff1.company_info)\nprint(staff2.company_info)\nstaff_notice.detach(staff2)\nstaff_notice.company_info = '明天开会！'\nprint(staff1.company_info)\nprint(staff2.company_info)\n\"\"\"\n假期放假通知！\n假期放假通知！\n明天开会！\n假期放假通知！\n\"\"\" \n```\n\n使用场景：当一个抽象模型有两个方面，其中一个方面依赖另一个方面。将这两者封装在独立对象中以使它们可以各自独立地改变和复用；当对一个对象的改变需要同时改变其它对象，而不知道具体有多少对象待改变；当一个对象必须通知其它对象，而它又不能假定其它对象是谁。换言之，你不希望这些对象是紧耦合的。优点：目标和观察者之间的抽象耦合最小；支持广播通信。\n\n## 策略模式\n\n定义一个个算法，把它们封装起来，并且使它们可以相互替换。本模式使得算法可独立于使用它的客户而变化。角色有：抽象策略、具体策略和上下文。\n\n```python\nfrom abc import abstractmethod, ABCMeta\nfrom datetime import datetime\n\n# 抽象策略\nclass Strategy(metaclass=ABCMeta):\n    @abstractmethod\n    def execute(self, data):\n        pass\n\n# 具体策略\nclass FastStrategy(Strategy):\n    def execute(self, data):\n        print(\"使用较快的策略处理%s\" % data)\n\n# 具体策略\nclass SlowStrategy(Strategy):\n    def execute(self, data):\n        print(\"使用较慢的策略处理%s\" % data)\n\n# 上下文\nclass Context:\n    def __init__(self, strategy, data):\n        self.data = data\n        self.strategy = strategy\n        # 可以定义用户不知道的东西\n        self.date = datetime.now()\n\n    def set_strategy(self, strategy):\n        self.strategy = strategy\n\n    def do_strategy(self):\n        self.strategy.execute(self.data)\n\ndata = \"Hello!\"\n# 使用较快的策略处理\nfast_strategy = FastStrategy()\ncontext = Context(fast_strategy, data)\ncontext.do_strategy()\n# 使用较慢的策略处理\nslow_strategy = SlowStrategy()\ncontext = Context(slow_strategy, data)\ncontext.do_strategy()\n\"\"\"\n使用较快的策略处理Hello!\n使用较慢的策略处理Hello!\n\"\"\" \n```\n\n优点：定义了一些列可重用的算法和行为；消除了一些条件语句；可以提供相同行为的不同实现；缺点：客户必须了解不同的策略。\n\n## 模板方法模式\n\n内容：定义一个操作中的算法骨架，将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。使用模板方法，需要用到两种角色，分别是抽象类和具体类。抽象类的作用是是定义抽象类（钩子操作），实现一个模板方法作为算法的骨架。具体类的作用实现原子操作。\n\n[^1]: https://github.com/ThanlonSmith/design-pattern/blob/master/3.创建型模式.md\n","source":"_posts/python设计模式.md","raw":"---\ntitle: python设计模式\nshare: true\ntags:\n  - uncategory\ndate: 2022-12-23 09:49:30 \nupdated: 2022-12-23 10:48:13 \ncategories: public\n---\n## Abstract\n\npython3 设计模式 [^1] 中的模式有：简单工厂模式、工厂方法模式、抽象工厂模式、建造者模式和单例模式；结构型模式：适配器模式、桥模式、组合模式、外观模式和代理模式；行为型模式：责任链模式、观察者模式、策略模式和模板方法模式。设计模式是对软件设计中普遍存在或反复出向的各种问题所提出的解决方案。每一个设计模式系统地被命名、解释和评价了面向对象系统中一个重要和重复出现的设计。\n\n## 各模式应用场景及优缺点\n\n| 模型         | 应用场景                 | 优点                                            | 缺点                                             |\n| ------------ | ------------------------ | ----------------------------------------------- | ------------------------------------------------ |\n| 简单工厂模式 | 隐藏对象创建细节         | 不暴露对象创建的细节,通过工厂类创建实例         | **当有新的产品时，需要修改工厂类代码 (源代码)**  |\n| 工厂方法模式 | 隐藏对象创建细节         | 不需要修改工厂类代码，能够隐藏对象创建的细节    | 每增加一个具体产品类，必须增加一个相应的具体方法 |\n| 抽象工厂模式 | 隐藏对象创建细节         | 具体工厂都生产一套产品,着重于多个系列的产品对象 | 难以支持新种类抽象产品                           |\n| 建造者模式   | 隐藏对象创建细节         | 一步步构造一个复杂对象, 着重控制顺序            |                                                  |\n| 单例模式     | 只需要一个实例           | 只创建一个实例,防止了命名空间被污染             |                                                  |\n| 适配器模式   | 不同系统接口转换         | 接口不兼容的类可以一起工作                      |                                                  |\n| 桥模式       | 自定义统一事物的多个维度 | 抽象和实现相分离，扩展能力强                    |                                                  |\n| 组合模式     |                          |                                                 |                                                  |\n| 外观模式     | 提供一致的界面           |                                                 |                                                  |\n| 代理模式     | 控制对象的访问权限       |                                                 |                                                  |\n| 责任链模式   | 多部门协同审批(不同权限) |                                                 |                                                  |\n| 观察者模式   | 依赖的所有类中广播消息   |                                                 |                                                  |\n| 策略模式     | 版本分离(企业版/免费版)  |                                                 |                                                  |\n| 模板方法模式 |                          |                                                 |                                                  |\n\n## 简单工厂模式\n\n## 工厂方法模式\n\n## 抽象工厂模式\n\n抽象工厂模式的角色有：抽象工厂角色、具体工厂角色、抽象产品角色、具体产品角色和客户端。抽象工厂模式的优点是：将客户端和类的具体实现相分离；**每个工厂创建了一个完整的产品系列**，使得易于交换产品系列；有利于产品的一致性，即产品之间的约束关系。缺点是：**难以支持新种类抽象产品**。\n\n![Excalidraw/python设计模式 2022-12-23 09.54.00.excalidraw](/images/e1d44b6b049414f1bbf361e9e7305106b10ec44a.png)\n\n## 建造者模式\n\n 建造者模式是将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。角色有抽象创建者、具体创建者、指挥者和产品。建造者模式与抽象工厂模式相似，也用来创建复杂的对象。主要区别是 **建造者模式着重一步步构造一个复杂对象 (控制顺序)。而抽象工厂模式着重于多个系列的产品对象**，写个例子来加强理解：\n\n![Excalidraw/python设计模式 2022-12-23 10.02.36.excalidraw](/images/c2b8606da24eb985ade582c3a0f605aa078d0a39.png)\n\n## 单例模式\n\n单例模式保证一个类只有一个实例，并提供一个访问它的全局访问点。优点是对唯一实例的受控访问（只有一个实例），单例相当于全局变量，但防止了命名空间被污染（变量命名不会有冲突）。写个例子来加深理解：\n\n```python\nclass Singleton:\n    def __new__(cls, *args, **kwargs):\n        if not hasattr(cls, \"_instance\"):\n            cls._instance = super(Singleton, cls).__new__(cls)\n        return cls._instance\n\nclass MyClass(Singleton):\n    def __init__(self, a):\n        self.a = a\n\nms1 = MyClass(1)\nms2 = MyClass(2)\nprint(ms1.a, ms2.a)\nprint(id(ms1), id(ms2))\n\"\"\"\n2 2\n139843914173312 139843914173312\n\"\"\" \n```\n\n## 适配器模式\n\n**将一个类的接口转换成客户希望的另外一个接口，适配器使得原本由于接口不兼容而不能一起工作的那些类可以一起工作**。实现适配器的两种方式，类适配器使用多继承，对象适配器使用组合。组合就是一个类中放入另一类的对象。先来看下组合：\n\n类适配器模式使用示例：\n\n```python\n# 类适配器模式使用示例：\nfrom abc import ABCMeta, abstractmethod\n\n# 目标接口\nclass Payment(object, metaclass=ABCMeta):\n    @abstractmethod\n    def pay(self, money):\n        pass\n\nclass Alipay(Payment):\n    def pay(self, money):\n        print('支付了%d' % money)\n\n# 待适配的类\nclass BankPay():\n    def cost(self, money):\n        print('银联支付了%d' % money)\n\n# 类适配器\nclass PaymentAdapter(Payment, BankPay):\n    \"\"\"\n    把不兼容cost转换成pay\n    \"\"\"\n\n    def pay(self, money):\n        self.cost(money)\n\np = PaymentAdapter()\np.pay(100)\n\"\"\"\n银联支付了100\n\"\"\" \n```\n\n对象适配器模式使用示例：\n\n```python\n# 类适配器模式使用示例：\nfrom abc import ABCMeta, abstractmethod\n\n# 目标接口\nclass Payment(object, metaclass=ABCMeta):\n    @abstractmethod\n    def pay(self, money):\n        pass\n\nclass Alipay(Payment):\n    def pay(self, money):\n        print('支付了%d' % money)\n\n# 待适配的类\nclass BankPay():\n    def cost(self, money):\n        print('银联支付了%d' % money)\n\n# 待适配的类\nclass ApplePay():\n    def cost(self, money):\n        print('苹果支付了%d' % money)\n\n# 对象适配器\nclass PaymentAdapter(Payment):\n    def __init__(self, payment):\n        self.payment = payment\n\n    def pay(self, money):\n        self.payment.cost(money)\n\np = PaymentAdapter(ApplePay())\np.pay(100)\np = PaymentAdapter(BankPay())\np.pay(100)\n\"\"\"\n苹果支付了100\n银联支付了100\n\"\"\" \n```\n\n## 桥模式\n\n桥模式是将一个事物的两个维度分离，使其都可以独立地变化。**当事物有两个维度的表现，两个维度都可能扩展时使用**。优点是：抽象和实现相分离，扩展能力强。如果不使用桥模式，在任何维度进行扩展，需要改好多代码，因为使用到了继承：\n\n```python\nfrom abc import ABCMeta, abstractmethod\n\n# 抽象\nclass Shape(metaclass=ABCMeta):\n    def __init__(self, color):\n        self.color = color\n\n    @abstractmethod\n    def draw(self):\n        pass\n\n# 实现\nclass Color(metaclass=ABCMeta):\n    @abstractmethod\n    def paint(self, shape):\n        pass\n\n# 细化抽象\nclass Rectangle(Shape):\n    name = '长方形'\n\n    def draw(self):\n        self.color.paint(self)\n\n# 如果要扩展形状，只需要添加形状类\nclass Circle(Shape):\n    name = '圆形'\n\n    def draw(self):\n        self.color.paint(self)\n\n# 细化实现\nclass Red(Color):\n    def paint(self, shape):\n        print('画红色的%s' % shape.name)\n\n# 如果要扩展颜色，只需要添加颜色类\nclass Green(Color):\n    def paint(self, shape):\n        print('画绿色的%s' % shape.name)\n\nrectangle = Rectangle(Red())\nrectangle.draw()\ncircle = Circle(Green())\ncircle.draw()\n\"\"\"\n画红色的长方形\n画绿色的圆形\n\"\"\" \n```\n\n## 组合模式\n\n将对象组合成树形结构以表示“部分 - 整体”的层次结构 (特别是结构是递归的)，组合模式使得用户对单个对象和组合对象的使用具有一致性。优点是定义了包含基本对象和组合对象的层次结构；简化客户端代码，客户端可以一致地使用组合对象和单个对象；更加容易增加新类型的组件。\n\n## 代理模式\n\n## 责任链模式\n\n责任链模式的内容：使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这些对象连成一条链并沿着这条链传递该请求，直到有一个对象处理它为止。责任链的角色有抽象处理者、具体处理者和客户端。\n\n```python\nfrom abc import ABCMeta, abstractmethod\n\n# 抽象的处理者\nclass Handler(metaclass=ABCMeta):\n    @abstractmethod\n    def handle_leave(self, day):\n        pass\n\n# 具体的处理者\nclass GeneralManager(Handler):\n    def handle_leave(self, day):\n        if day <= 30:\n            print('总经理准假%d' % day)\n        else:\n            print('可以辞职了！')\n\n# 具体的处理者\nclass DepartmentManager(Handler):\n    def __init__(self):\n        self.next = GeneralManager()\n\n    def handle_leave(self, day):\n        if day <= 7:\n            print('项目主管准假%d' % day)\n        else:\n            print('部门经理职权不足')\n            self.next.handle_leave(day)\n\n# 具体的处理者\nclass ProjectDirector(Handler):\n    def __init__(self):\n        self.next = DepartmentManager()\n\n    def handle_leave(self, day):\n        if day <= 3:\n            print('项目主管准假%d' % day)\n        else:\n            print('项目主管职权不足')\n            self.next.handle_leave(day)\n\nday = 20\np = ProjectDirector()\np.handle_leave(day)\n\"\"\"\n项目主管职权不足\n部门经理职权不足\n总经理准假20\n\"\"\" \n```\n\n使用场景：有多个对象可以处理一个请求，哪个对象处理由运行时决定；在不明确接收者的情况下，向多个对象中的一个提交一个请求。优点是降低耦合度，一个对象无需知道是其它哪一个对象处理其请求。\n\n## 观察者模式\n\n```python\nfrom abc import ABCMeta, abstractmethod\n\n# 抽象的订阅者\nclass Observer(metaclass=ABCMeta):\n    @abstractmethod\n    def update(self, notice):\n        \"\"\"\n        :param notice: Notice类的对象\n        :return:\n        \"\"\"\n        pass\n\n# 抽象的发布者：可以是接口，子类不需要实现，所以不需要定义抽象方法！\nclass Notice:\n    def __init__(self):\n        self.observers = []\n\n    def attach(self, obs):\n        self.observers.append(obs)\n\n    def detach(self, obs):\n        self.observers.remove(obs)\n\n    def notify(self):\n        \"\"\"\n        推送\n        :return:\n        \"\"\"\n        for obs in self.observers:\n            obs.update(self)\n\n# 具体的发布者\nclass StaffNotice(Notice):\n    def __init__(self, company_info):\n        super().__init__()  # 调用父类对象声明observers属性\n        self.__company_info = company_info\n\n    @property\n    def company_info(self):\n        return self.__company_info\n\n    @company_info.setter\n    def company_info(self, info):\n        self.__company_info = info\n        self.notify()\n\n# 具体的订阅者\nclass Staff(Observer):\n    def __init__(self):\n        self.company_info = None\n\n    def update(self, notice):\n        self.company_info = notice.company_info\n\nstaff_notice = StaffNotice('初始化公司信息')\nstaff1 = Staff()\nstaff2 = Staff()\nstaff_notice.attach(staff1)\nstaff_notice.attach(staff2)\n# print(staff1.company_info) None\n# print(staff2.company_info) None\nstaff_notice.company_info = '假期放假通知！'\nprint(staff1.company_info)\nprint(staff2.company_info)\nstaff_notice.detach(staff2)\nstaff_notice.company_info = '明天开会！'\nprint(staff1.company_info)\nprint(staff2.company_info)\n\"\"\"\n假期放假通知！\n假期放假通知！\n明天开会！\n假期放假通知！\n\"\"\" \n```\n\n使用场景：当一个抽象模型有两个方面，其中一个方面依赖另一个方面。将这两者封装在独立对象中以使它们可以各自独立地改变和复用；当对一个对象的改变需要同时改变其它对象，而不知道具体有多少对象待改变；当一个对象必须通知其它对象，而它又不能假定其它对象是谁。换言之，你不希望这些对象是紧耦合的。优点：目标和观察者之间的抽象耦合最小；支持广播通信。\n\n## 策略模式\n\n定义一个个算法，把它们封装起来，并且使它们可以相互替换。本模式使得算法可独立于使用它的客户而变化。角色有：抽象策略、具体策略和上下文。\n\n```python\nfrom abc import abstractmethod, ABCMeta\nfrom datetime import datetime\n\n# 抽象策略\nclass Strategy(metaclass=ABCMeta):\n    @abstractmethod\n    def execute(self, data):\n        pass\n\n# 具体策略\nclass FastStrategy(Strategy):\n    def execute(self, data):\n        print(\"使用较快的策略处理%s\" % data)\n\n# 具体策略\nclass SlowStrategy(Strategy):\n    def execute(self, data):\n        print(\"使用较慢的策略处理%s\" % data)\n\n# 上下文\nclass Context:\n    def __init__(self, strategy, data):\n        self.data = data\n        self.strategy = strategy\n        # 可以定义用户不知道的东西\n        self.date = datetime.now()\n\n    def set_strategy(self, strategy):\n        self.strategy = strategy\n\n    def do_strategy(self):\n        self.strategy.execute(self.data)\n\ndata = \"Hello!\"\n# 使用较快的策略处理\nfast_strategy = FastStrategy()\ncontext = Context(fast_strategy, data)\ncontext.do_strategy()\n# 使用较慢的策略处理\nslow_strategy = SlowStrategy()\ncontext = Context(slow_strategy, data)\ncontext.do_strategy()\n\"\"\"\n使用较快的策略处理Hello!\n使用较慢的策略处理Hello!\n\"\"\" \n```\n\n优点：定义了一些列可重用的算法和行为；消除了一些条件语句；可以提供相同行为的不同实现；缺点：客户必须了解不同的策略。\n\n## 模板方法模式\n\n内容：定义一个操作中的算法骨架，将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。使用模板方法，需要用到两种角色，分别是抽象类和具体类。抽象类的作用是是定义抽象类（钩子操作），实现一个模板方法作为算法的骨架。具体类的作用实现原子操作。\n\n[^1]: https://github.com/ThanlonSmith/design-pattern/blob/master/3.创建型模式.md\n","slug":"python设计模式","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a7004o4cv9a7si7uv7","content":"<h2 id=\"Abstract\">Abstract</h2>\n<p>python3 设计模式 <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup> 中的模式有：简单工厂模式、工厂方法模式、抽象工厂模式、建造者模式和单例模式；结构型模式：适配器模式、桥模式、组合模式、外观模式和代理模式；行为型模式：责任链模式、观察者模式、策略模式和模板方法模式。设计模式是对软件设计中普遍存在或反复出向的各种问题所提出的解决方案。每一个设计模式系统地被命名、解释和评价了面向对象系统中一个重要和重复出现的设计。</p>\n<h2 id=\"各模式应用场景及优缺点\">各模式应用场景及优缺点</h2>\n<table>\n<thead>\n<tr>\n<th>模型</th>\n<th>应用场景</th>\n<th>优点</th>\n<th>缺点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>简单工厂模式</td>\n<td>隐藏对象创建细节</td>\n<td>不暴露对象创建的细节,通过工厂类创建实例</td>\n<td><strong>当有新的产品时，需要修改工厂类代码 (源代码)</strong></td>\n</tr>\n<tr>\n<td>工厂方法模式</td>\n<td>隐藏对象创建细节</td>\n<td>不需要修改工厂类代码，能够隐藏对象创建的细节</td>\n<td>每增加一个具体产品类，必须增加一个相应的具体方法</td>\n</tr>\n<tr>\n<td>抽象工厂模式</td>\n<td>隐藏对象创建细节</td>\n<td>具体工厂都生产一套产品,着重于多个系列的产品对象</td>\n<td>难以支持新种类抽象产品</td>\n</tr>\n<tr>\n<td>建造者模式</td>\n<td>隐藏对象创建细节</td>\n<td>一步步构造一个复杂对象, 着重控制顺序</td>\n<td></td>\n</tr>\n<tr>\n<td>单例模式</td>\n<td>只需要一个实例</td>\n<td>只创建一个实例,防止了命名空间被污染</td>\n<td></td>\n</tr>\n<tr>\n<td>适配器模式</td>\n<td>不同系统接口转换</td>\n<td>接口不兼容的类可以一起工作</td>\n<td></td>\n</tr>\n<tr>\n<td>桥模式</td>\n<td>自定义统一事物的多个维度</td>\n<td>抽象和实现相分离，扩展能力强</td>\n<td></td>\n</tr>\n<tr>\n<td>组合模式</td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>外观模式</td>\n<td>提供一致的界面</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>代理模式</td>\n<td>控制对象的访问权限</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>责任链模式</td>\n<td>多部门协同审批(不同权限)</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>观察者模式</td>\n<td>依赖的所有类中广播消息</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>策略模式</td>\n<td>版本分离(企业版/免费版)</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>模板方法模式</td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"简单工厂模式\">简单工厂模式</h2>\n<h2 id=\"工厂方法模式\">工厂方法模式</h2>\n<h2 id=\"抽象工厂模式\">抽象工厂模式</h2>\n<p>抽象工厂模式的角色有：抽象工厂角色、具体工厂角色、抽象产品角色、具体产品角色和客户端。抽象工厂模式的优点是：将客户端和类的具体实现相分离；<strong>每个工厂创建了一个完整的产品系列</strong>，使得易于交换产品系列；有利于产品的一致性，即产品之间的约束关系。缺点是：<strong>难以支持新种类抽象产品</strong>。</p>\n<p><img src=\"/images/e1d44b6b049414f1bbf361e9e7305106b10ec44a.png\" alt=\"Excalidraw/python设计模式 2022-12-23 09.54.00.excalidraw\"></p>\n<h2 id=\"建造者模式\">建造者模式</h2>\n<p>建造者模式是将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。角色有抽象创建者、具体创建者、指挥者和产品。建造者模式与抽象工厂模式相似，也用来创建复杂的对象。主要区别是 <strong>建造者模式着重一步步构造一个复杂对象 (控制顺序)。而抽象工厂模式着重于多个系列的产品对象</strong>，写个例子来加强理解：</p>\n<p><img src=\"/images/c2b8606da24eb985ade582c3a0f605aa078d0a39.png\" alt=\"Excalidraw/python设计模式 2022-12-23 10.02.36.excalidraw\"></p>\n<h2 id=\"单例模式\">单例模式</h2>\n<p>单例模式保证一个类只有一个实例，并提供一个访问它的全局访问点。优点是对唯一实例的受控访问（只有一个实例），单例相当于全局变量，但防止了命名空间被污染（变量命名不会有冲突）。写个例子来加深理解：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Singleton</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__new__</span>(<span class=\"params\">cls, *args, **kwargs</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"built_in\">hasattr</span>(cls, <span class=\"string\">&quot;_instance&quot;</span>):</span><br><span class=\"line\">            cls._instance = <span class=\"built_in\">super</span>(Singleton, cls).__new__(cls)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls._instance</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyClass</span>(<span class=\"title class_ inherited__\">Singleton</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, a</span>):</span><br><span class=\"line\">        self.a = a</span><br><span class=\"line\"></span><br><span class=\"line\">ms1 = MyClass(<span class=\"number\">1</span>)</span><br><span class=\"line\">ms2 = MyClass(<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(ms1.a, ms2.a)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">id</span>(ms1), <span class=\"built_in\">id</span>(ms2))</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">2 2</span></span><br><span class=\"line\"><span class=\"string\">139843914173312 139843914173312</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"适配器模式\">适配器模式</h2>\n<p><strong>将一个类的接口转换成客户希望的另外一个接口，适配器使得原本由于接口不兼容而不能一起工作的那些类可以一起工作</strong>。实现适配器的两种方式，类适配器使用多继承，对象适配器使用组合。组合就是一个类中放入另一类的对象。先来看下组合：</p>\n<p>类适配器模式使用示例：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 类适配器模式使用示例：</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 目标接口</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Payment</span>(<span class=\"built_in\">object</span>, metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Alipay</span>(<span class=\"title class_ inherited__\">Payment</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 待适配的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">BankPay</span>():</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">cost</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;银联支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 类适配器</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">PaymentAdapter</span>(Payment, BankPay):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    把不兼容cost转换成pay</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        self.cost(money)</span><br><span class=\"line\"></span><br><span class=\"line\">p = PaymentAdapter()</span><br><span class=\"line\">p.pay(<span class=\"number\">100</span>)</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">银联支付了100</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<p>对象适配器模式使用示例：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 类适配器模式使用示例：</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 目标接口</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Payment</span>(<span class=\"built_in\">object</span>, metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Alipay</span>(<span class=\"title class_ inherited__\">Payment</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 待适配的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">BankPay</span>():</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">cost</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;银联支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 待适配的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ApplePay</span>():</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">cost</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;苹果支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 对象适配器</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">PaymentAdapter</span>(<span class=\"title class_ inherited__\">Payment</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, payment</span>):</span><br><span class=\"line\">        self.payment = payment</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        self.payment.cost(money)</span><br><span class=\"line\"></span><br><span class=\"line\">p = PaymentAdapter(ApplePay())</span><br><span class=\"line\">p.pay(<span class=\"number\">100</span>)</span><br><span class=\"line\">p = PaymentAdapter(BankPay())</span><br><span class=\"line\">p.pay(<span class=\"number\">100</span>)</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">苹果支付了100</span></span><br><span class=\"line\"><span class=\"string\">银联支付了100</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"桥模式\">桥模式</h2>\n<p>桥模式是将一个事物的两个维度分离，使其都可以独立地变化。<strong>当事物有两个维度的表现，两个维度都可能扩展时使用</strong>。优点是：抽象和实现相分离，扩展能力强。如果不使用桥模式，在任何维度进行扩展，需要改好多代码，因为使用到了继承：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Shape</span>(metaclass=ABCMeta):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, color</span>):</span><br><span class=\"line\">        self.color = color</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">draw</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 实现</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Color</span>(metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">paint</span>(<span class=\"params\">self, shape</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 细化抽象</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Rectangle</span>(<span class=\"title class_ inherited__\">Shape</span>):</span><br><span class=\"line\">    name = <span class=\"string\">&#x27;长方形&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">draw</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.color.paint(self)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果要扩展形状，只需要添加形状类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Circle</span>(<span class=\"title class_ inherited__\">Shape</span>):</span><br><span class=\"line\">    name = <span class=\"string\">&#x27;圆形&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">draw</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.color.paint(self)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 细化实现</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Red</span>(<span class=\"title class_ inherited__\">Color</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">paint</span>(<span class=\"params\">self, shape</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;画红色的%s&#x27;</span> % shape.name)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果要扩展颜色，只需要添加颜色类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Green</span>(<span class=\"title class_ inherited__\">Color</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">paint</span>(<span class=\"params\">self, shape</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;画绿色的%s&#x27;</span> % shape.name)</span><br><span class=\"line\"></span><br><span class=\"line\">rectangle = Rectangle(Red())</span><br><span class=\"line\">rectangle.draw()</span><br><span class=\"line\">circle = Circle(Green())</span><br><span class=\"line\">circle.draw()</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">画红色的长方形</span></span><br><span class=\"line\"><span class=\"string\">画绿色的圆形</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"组合模式\">组合模式</h2>\n<p>将对象组合成树形结构以表示“部分 - 整体”的层次结构 (特别是结构是递归的)，组合模式使得用户对单个对象和组合对象的使用具有一致性。优点是定义了包含基本对象和组合对象的层次结构；简化客户端代码，客户端可以一致地使用组合对象和单个对象；更加容易增加新类型的组件。</p>\n<h2 id=\"代理模式\">代理模式</h2>\n<h2 id=\"责任链模式\">责任链模式</h2>\n<p>责任链模式的内容：使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这些对象连成一条链并沿着这条链传递该请求，直到有一个对象处理它为止。责任链的角色有抽象处理者、具体处理者和客户端。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象的处理者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Handler</span>(metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle_leave</span>(<span class=\"params\">self, day</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的处理者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">GeneralManager</span>(<span class=\"title class_ inherited__\">Handler</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle_leave</span>(<span class=\"params\">self, day</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> day &lt;= <span class=\"number\">30</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;总经理准假%d&#x27;</span> % day)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;可以辞职了！&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的处理者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DepartmentManager</span>(<span class=\"title class_ inherited__\">Handler</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.<span class=\"built_in\">next</span> = GeneralManager()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle_leave</span>(<span class=\"params\">self, day</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> day &lt;= <span class=\"number\">7</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;项目主管准假%d&#x27;</span> % day)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;部门经理职权不足&#x27;</span>)</span><br><span class=\"line\">            self.<span class=\"built_in\">next</span>.handle_leave(day)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的处理者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ProjectDirector</span>(<span class=\"title class_ inherited__\">Handler</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.<span class=\"built_in\">next</span> = DepartmentManager()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle_leave</span>(<span class=\"params\">self, day</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> day &lt;= <span class=\"number\">3</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;项目主管准假%d&#x27;</span> % day)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;项目主管职权不足&#x27;</span>)</span><br><span class=\"line\">            self.<span class=\"built_in\">next</span>.handle_leave(day)</span><br><span class=\"line\"></span><br><span class=\"line\">day = <span class=\"number\">20</span></span><br><span class=\"line\">p = ProjectDirector()</span><br><span class=\"line\">p.handle_leave(day)</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">项目主管职权不足</span></span><br><span class=\"line\"><span class=\"string\">部门经理职权不足</span></span><br><span class=\"line\"><span class=\"string\">总经理准假20</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<p>使用场景：有多个对象可以处理一个请求，哪个对象处理由运行时决定；在不明确接收者的情况下，向多个对象中的一个提交一个请求。优点是降低耦合度，一个对象无需知道是其它哪一个对象处理其请求。</p>\n<h2 id=\"观察者模式\">观察者模式</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象的订阅者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Observer</span>(metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">update</span>(<span class=\"params\">self, notice</span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">        :param notice: Notice类的对象</span></span><br><span class=\"line\"><span class=\"string\">        :return:</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象的发布者：可以是接口，子类不需要实现，所以不需要定义抽象方法！</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Notice</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.observers = []</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">attach</span>(<span class=\"params\">self, obs</span>):</span><br><span class=\"line\">        self.observers.append(obs)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">detach</span>(<span class=\"params\">self, obs</span>):</span><br><span class=\"line\">        self.observers.remove(obs)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">notify</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">        推送</span></span><br><span class=\"line\"><span class=\"string\">        :return:</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> obs <span class=\"keyword\">in</span> self.observers:</span><br><span class=\"line\">            obs.update(self)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的发布者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">StaffNotice</span>(<span class=\"title class_ inherited__\">Notice</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, company_info</span>):</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()  <span class=\"comment\"># 调用父类对象声明observers属性</span></span><br><span class=\"line\">        self.__company_info = company_info</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">    @property</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">company_info</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.__company_info</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">    @company_info.setter</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">company_info</span>(<span class=\"params\">self, info</span>):</span><br><span class=\"line\">        self.__company_info = info</span><br><span class=\"line\">        self.notify()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的订阅者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Staff</span>(<span class=\"title class_ inherited__\">Observer</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.company_info = <span class=\"literal\">None</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">update</span>(<span class=\"params\">self, notice</span>):</span><br><span class=\"line\">        self.company_info = notice.company_info</span><br><span class=\"line\"></span><br><span class=\"line\">staff_notice = StaffNotice(<span class=\"string\">&#x27;初始化公司信息&#x27;</span>)</span><br><span class=\"line\">staff1 = Staff()</span><br><span class=\"line\">staff2 = Staff()</span><br><span class=\"line\">staff_notice.attach(staff1)</span><br><span class=\"line\">staff_notice.attach(staff2)</span><br><span class=\"line\"><span class=\"comment\"># print(staff1.company_info) None</span></span><br><span class=\"line\"><span class=\"comment\"># print(staff2.company_info) None</span></span><br><span class=\"line\">staff_notice.company_info = <span class=\"string\">&#x27;假期放假通知！&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(staff1.company_info)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(staff2.company_info)</span><br><span class=\"line\">staff_notice.detach(staff2)</span><br><span class=\"line\">staff_notice.company_info = <span class=\"string\">&#x27;明天开会！&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(staff1.company_info)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(staff2.company_info)</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">假期放假通知！</span></span><br><span class=\"line\"><span class=\"string\">假期放假通知！</span></span><br><span class=\"line\"><span class=\"string\">明天开会！</span></span><br><span class=\"line\"><span class=\"string\">假期放假通知！</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<p>使用场景：当一个抽象模型有两个方面，其中一个方面依赖另一个方面。将这两者封装在独立对象中以使它们可以各自独立地改变和复用；当对一个对象的改变需要同时改变其它对象，而不知道具体有多少对象待改变；当一个对象必须通知其它对象，而它又不能假定其它对象是谁。换言之，你不希望这些对象是紧耦合的。优点：目标和观察者之间的抽象耦合最小；支持广播通信。</p>\n<h2 id=\"策略模式\">策略模式</h2>\n<p>定义一个个算法，把它们封装起来，并且使它们可以相互替换。本模式使得算法可独立于使用它的客户而变化。角色有：抽象策略、具体策略和上下文。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> abstractmethod, ABCMeta</span><br><span class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象策略</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Strategy</span>(metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">execute</span>(<span class=\"params\">self, data</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体策略</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">FastStrategy</span>(<span class=\"title class_ inherited__\">Strategy</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">execute</span>(<span class=\"params\">self, data</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;使用较快的策略处理%s&quot;</span> % data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体策略</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">SlowStrategy</span>(<span class=\"title class_ inherited__\">Strategy</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">execute</span>(<span class=\"params\">self, data</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;使用较慢的策略处理%s&quot;</span> % data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 上下文</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Context</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, strategy, data</span>):</span><br><span class=\"line\">        self.data = data</span><br><span class=\"line\">        self.strategy = strategy</span><br><span class=\"line\">        <span class=\"comment\"># 可以定义用户不知道的东西</span></span><br><span class=\"line\">        self.date = datetime.now()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">set_strategy</span>(<span class=\"params\">self, strategy</span>):</span><br><span class=\"line\">        self.strategy = strategy</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">do_strategy</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.strategy.execute(self.data)</span><br><span class=\"line\"></span><br><span class=\"line\">data = <span class=\"string\">&quot;Hello!&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 使用较快的策略处理</span></span><br><span class=\"line\">fast_strategy = FastStrategy()</span><br><span class=\"line\">context = Context(fast_strategy, data)</span><br><span class=\"line\">context.do_strategy()</span><br><span class=\"line\"><span class=\"comment\"># 使用较慢的策略处理</span></span><br><span class=\"line\">slow_strategy = SlowStrategy()</span><br><span class=\"line\">context = Context(slow_strategy, data)</span><br><span class=\"line\">context.do_strategy()</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">使用较快的策略处理Hello!</span></span><br><span class=\"line\"><span class=\"string\">使用较慢的策略处理Hello!</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<p>优点：定义了一些列可重用的算法和行为；消除了一些条件语句；可以提供相同行为的不同实现；缺点：客户必须了解不同的策略。</p>\n<h2 id=\"模板方法模式\">模板方法模式</h2>\n<p>内容：定义一个操作中的算法骨架，将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。使用模板方法，需要用到两种角色，分别是抽象类和具体类。抽象类的作用是是定义抽象类（钩子操作），实现一个模板方法作为算法的骨架。具体类的作用实现原子操作。</p>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p><a href=\"https://github.com/ThanlonSmith/design-pattern/blob/master/3.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.md\">https://github.com/ThanlonSmith/design-pattern/blob/master/3.创建型模式.md</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover2.jpg","excerpt":"","more":"<h2 id=\"Abstract\">Abstract</h2>\n<p>python3 设计模式 <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup> 中的模式有：简单工厂模式、工厂方法模式、抽象工厂模式、建造者模式和单例模式；结构型模式：适配器模式、桥模式、组合模式、外观模式和代理模式；行为型模式：责任链模式、观察者模式、策略模式和模板方法模式。设计模式是对软件设计中普遍存在或反复出向的各种问题所提出的解决方案。每一个设计模式系统地被命名、解释和评价了面向对象系统中一个重要和重复出现的设计。</p>\n<h2 id=\"各模式应用场景及优缺点\">各模式应用场景及优缺点</h2>\n<table>\n<thead>\n<tr>\n<th>模型</th>\n<th>应用场景</th>\n<th>优点</th>\n<th>缺点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>简单工厂模式</td>\n<td>隐藏对象创建细节</td>\n<td>不暴露对象创建的细节,通过工厂类创建实例</td>\n<td><strong>当有新的产品时，需要修改工厂类代码 (源代码)</strong></td>\n</tr>\n<tr>\n<td>工厂方法模式</td>\n<td>隐藏对象创建细节</td>\n<td>不需要修改工厂类代码，能够隐藏对象创建的细节</td>\n<td>每增加一个具体产品类，必须增加一个相应的具体方法</td>\n</tr>\n<tr>\n<td>抽象工厂模式</td>\n<td>隐藏对象创建细节</td>\n<td>具体工厂都生产一套产品,着重于多个系列的产品对象</td>\n<td>难以支持新种类抽象产品</td>\n</tr>\n<tr>\n<td>建造者模式</td>\n<td>隐藏对象创建细节</td>\n<td>一步步构造一个复杂对象, 着重控制顺序</td>\n<td></td>\n</tr>\n<tr>\n<td>单例模式</td>\n<td>只需要一个实例</td>\n<td>只创建一个实例,防止了命名空间被污染</td>\n<td></td>\n</tr>\n<tr>\n<td>适配器模式</td>\n<td>不同系统接口转换</td>\n<td>接口不兼容的类可以一起工作</td>\n<td></td>\n</tr>\n<tr>\n<td>桥模式</td>\n<td>自定义统一事物的多个维度</td>\n<td>抽象和实现相分离，扩展能力强</td>\n<td></td>\n</tr>\n<tr>\n<td>组合模式</td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>外观模式</td>\n<td>提供一致的界面</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>代理模式</td>\n<td>控制对象的访问权限</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>责任链模式</td>\n<td>多部门协同审批(不同权限)</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>观察者模式</td>\n<td>依赖的所有类中广播消息</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>策略模式</td>\n<td>版本分离(企业版/免费版)</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>模板方法模式</td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"简单工厂模式\">简单工厂模式</h2>\n<h2 id=\"工厂方法模式\">工厂方法模式</h2>\n<h2 id=\"抽象工厂模式\">抽象工厂模式</h2>\n<p>抽象工厂模式的角色有：抽象工厂角色、具体工厂角色、抽象产品角色、具体产品角色和客户端。抽象工厂模式的优点是：将客户端和类的具体实现相分离；<strong>每个工厂创建了一个完整的产品系列</strong>，使得易于交换产品系列；有利于产品的一致性，即产品之间的约束关系。缺点是：<strong>难以支持新种类抽象产品</strong>。</p>\n<p><img src=\"/images/e1d44b6b049414f1bbf361e9e7305106b10ec44a.png\" alt=\"Excalidraw/python设计模式 2022-12-23 09.54.00.excalidraw\"></p>\n<h2 id=\"建造者模式\">建造者模式</h2>\n<p>建造者模式是将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。角色有抽象创建者、具体创建者、指挥者和产品。建造者模式与抽象工厂模式相似，也用来创建复杂的对象。主要区别是 <strong>建造者模式着重一步步构造一个复杂对象 (控制顺序)。而抽象工厂模式着重于多个系列的产品对象</strong>，写个例子来加强理解：</p>\n<p><img src=\"/images/c2b8606da24eb985ade582c3a0f605aa078d0a39.png\" alt=\"Excalidraw/python设计模式 2022-12-23 10.02.36.excalidraw\"></p>\n<h2 id=\"单例模式\">单例模式</h2>\n<p>单例模式保证一个类只有一个实例，并提供一个访问它的全局访问点。优点是对唯一实例的受控访问（只有一个实例），单例相当于全局变量，但防止了命名空间被污染（变量命名不会有冲突）。写个例子来加深理解：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Singleton</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__new__</span>(<span class=\"params\">cls, *args, **kwargs</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"built_in\">hasattr</span>(cls, <span class=\"string\">&quot;_instance&quot;</span>):</span><br><span class=\"line\">            cls._instance = <span class=\"built_in\">super</span>(Singleton, cls).__new__(cls)</span><br><span class=\"line\">        <span class=\"keyword\">return</span> cls._instance</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyClass</span>(<span class=\"title class_ inherited__\">Singleton</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, a</span>):</span><br><span class=\"line\">        self.a = a</span><br><span class=\"line\"></span><br><span class=\"line\">ms1 = MyClass(<span class=\"number\">1</span>)</span><br><span class=\"line\">ms2 = MyClass(<span class=\"number\">2</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(ms1.a, ms2.a)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(<span class=\"built_in\">id</span>(ms1), <span class=\"built_in\">id</span>(ms2))</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">2 2</span></span><br><span class=\"line\"><span class=\"string\">139843914173312 139843914173312</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"适配器模式\">适配器模式</h2>\n<p><strong>将一个类的接口转换成客户希望的另外一个接口，适配器使得原本由于接口不兼容而不能一起工作的那些类可以一起工作</strong>。实现适配器的两种方式，类适配器使用多继承，对象适配器使用组合。组合就是一个类中放入另一类的对象。先来看下组合：</p>\n<p>类适配器模式使用示例：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 类适配器模式使用示例：</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 目标接口</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Payment</span>(<span class=\"built_in\">object</span>, metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Alipay</span>(<span class=\"title class_ inherited__\">Payment</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 待适配的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">BankPay</span>():</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">cost</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;银联支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 类适配器</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">PaymentAdapter</span>(Payment, BankPay):</span><br><span class=\"line\">    <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">    把不兼容cost转换成pay</span></span><br><span class=\"line\"><span class=\"string\">    &quot;&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        self.cost(money)</span><br><span class=\"line\"></span><br><span class=\"line\">p = PaymentAdapter()</span><br><span class=\"line\">p.pay(<span class=\"number\">100</span>)</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">银联支付了100</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<p>对象适配器模式使用示例：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 类适配器模式使用示例：</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 目标接口</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Payment</span>(<span class=\"built_in\">object</span>, metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Alipay</span>(<span class=\"title class_ inherited__\">Payment</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 待适配的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">BankPay</span>():</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">cost</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;银联支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 待适配的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ApplePay</span>():</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">cost</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;苹果支付了%d&#x27;</span> % money)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 对象适配器</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">PaymentAdapter</span>(<span class=\"title class_ inherited__\">Payment</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, payment</span>):</span><br><span class=\"line\">        self.payment = payment</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">pay</span>(<span class=\"params\">self, money</span>):</span><br><span class=\"line\">        self.payment.cost(money)</span><br><span class=\"line\"></span><br><span class=\"line\">p = PaymentAdapter(ApplePay())</span><br><span class=\"line\">p.pay(<span class=\"number\">100</span>)</span><br><span class=\"line\">p = PaymentAdapter(BankPay())</span><br><span class=\"line\">p.pay(<span class=\"number\">100</span>)</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">苹果支付了100</span></span><br><span class=\"line\"><span class=\"string\">银联支付了100</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"桥模式\">桥模式</h2>\n<p>桥模式是将一个事物的两个维度分离，使其都可以独立地变化。<strong>当事物有两个维度的表现，两个维度都可能扩展时使用</strong>。优点是：抽象和实现相分离，扩展能力强。如果不使用桥模式，在任何维度进行扩展，需要改好多代码，因为使用到了继承：</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Shape</span>(metaclass=ABCMeta):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, color</span>):</span><br><span class=\"line\">        self.color = color</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">draw</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 实现</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Color</span>(metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">paint</span>(<span class=\"params\">self, shape</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 细化抽象</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Rectangle</span>(<span class=\"title class_ inherited__\">Shape</span>):</span><br><span class=\"line\">    name = <span class=\"string\">&#x27;长方形&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">draw</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.color.paint(self)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果要扩展形状，只需要添加形状类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Circle</span>(<span class=\"title class_ inherited__\">Shape</span>):</span><br><span class=\"line\">    name = <span class=\"string\">&#x27;圆形&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">draw</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.color.paint(self)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 细化实现</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Red</span>(<span class=\"title class_ inherited__\">Color</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">paint</span>(<span class=\"params\">self, shape</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;画红色的%s&#x27;</span> % shape.name)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 如果要扩展颜色，只需要添加颜色类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Green</span>(<span class=\"title class_ inherited__\">Color</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">paint</span>(<span class=\"params\">self, shape</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;画绿色的%s&#x27;</span> % shape.name)</span><br><span class=\"line\"></span><br><span class=\"line\">rectangle = Rectangle(Red())</span><br><span class=\"line\">rectangle.draw()</span><br><span class=\"line\">circle = Circle(Green())</span><br><span class=\"line\">circle.draw()</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">画红色的长方形</span></span><br><span class=\"line\"><span class=\"string\">画绿色的圆形</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<h2 id=\"组合模式\">组合模式</h2>\n<p>将对象组合成树形结构以表示“部分 - 整体”的层次结构 (特别是结构是递归的)，组合模式使得用户对单个对象和组合对象的使用具有一致性。优点是定义了包含基本对象和组合对象的层次结构；简化客户端代码，客户端可以一致地使用组合对象和单个对象；更加容易增加新类型的组件。</p>\n<h2 id=\"代理模式\">代理模式</h2>\n<h2 id=\"责任链模式\">责任链模式</h2>\n<p>责任链模式的内容：使多个对象都有机会处理请求，从而避免请求的发送者和接收者之间的耦合关系。将这些对象连成一条链并沿着这条链传递该请求，直到有一个对象处理它为止。责任链的角色有抽象处理者、具体处理者和客户端。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象的处理者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Handler</span>(metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle_leave</span>(<span class=\"params\">self, day</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的处理者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">GeneralManager</span>(<span class=\"title class_ inherited__\">Handler</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle_leave</span>(<span class=\"params\">self, day</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> day &lt;= <span class=\"number\">30</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;总经理准假%d&#x27;</span> % day)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;可以辞职了！&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的处理者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">DepartmentManager</span>(<span class=\"title class_ inherited__\">Handler</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.<span class=\"built_in\">next</span> = GeneralManager()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle_leave</span>(<span class=\"params\">self, day</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> day &lt;= <span class=\"number\">7</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;项目主管准假%d&#x27;</span> % day)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;部门经理职权不足&#x27;</span>)</span><br><span class=\"line\">            self.<span class=\"built_in\">next</span>.handle_leave(day)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的处理者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ProjectDirector</span>(<span class=\"title class_ inherited__\">Handler</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.<span class=\"built_in\">next</span> = DepartmentManager()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">handle_leave</span>(<span class=\"params\">self, day</span>):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> day &lt;= <span class=\"number\">3</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;项目主管准假%d&#x27;</span> % day)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"string\">&#x27;项目主管职权不足&#x27;</span>)</span><br><span class=\"line\">            self.<span class=\"built_in\">next</span>.handle_leave(day)</span><br><span class=\"line\"></span><br><span class=\"line\">day = <span class=\"number\">20</span></span><br><span class=\"line\">p = ProjectDirector()</span><br><span class=\"line\">p.handle_leave(day)</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">项目主管职权不足</span></span><br><span class=\"line\"><span class=\"string\">部门经理职权不足</span></span><br><span class=\"line\"><span class=\"string\">总经理准假20</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<p>使用场景：有多个对象可以处理一个请求，哪个对象处理由运行时决定；在不明确接收者的情况下，向多个对象中的一个提交一个请求。优点是降低耦合度，一个对象无需知道是其它哪一个对象处理其请求。</p>\n<h2 id=\"观察者模式\">观察者模式</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> ABCMeta, abstractmethod</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象的订阅者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Observer</span>(metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">update</span>(<span class=\"params\">self, notice</span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">        :param notice: Notice类的对象</span></span><br><span class=\"line\"><span class=\"string\">        :return:</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象的发布者：可以是接口，子类不需要实现，所以不需要定义抽象方法！</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Notice</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.observers = []</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">attach</span>(<span class=\"params\">self, obs</span>):</span><br><span class=\"line\">        self.observers.append(obs)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">detach</span>(<span class=\"params\">self, obs</span>):</span><br><span class=\"line\">        self.observers.remove(obs)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">notify</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">        推送</span></span><br><span class=\"line\"><span class=\"string\">        :return:</span></span><br><span class=\"line\"><span class=\"string\">        &quot;&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> obs <span class=\"keyword\">in</span> self.observers:</span><br><span class=\"line\">            obs.update(self)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的发布者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">StaffNotice</span>(<span class=\"title class_ inherited__\">Notice</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, company_info</span>):</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__()  <span class=\"comment\"># 调用父类对象声明observers属性</span></span><br><span class=\"line\">        self.__company_info = company_info</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">    @property</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">company_info</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.__company_info</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">    @company_info.setter</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">company_info</span>(<span class=\"params\">self, info</span>):</span><br><span class=\"line\">        self.__company_info = info</span><br><span class=\"line\">        self.notify()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体的订阅者</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Staff</span>(<span class=\"title class_ inherited__\">Observer</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.company_info = <span class=\"literal\">None</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">update</span>(<span class=\"params\">self, notice</span>):</span><br><span class=\"line\">        self.company_info = notice.company_info</span><br><span class=\"line\"></span><br><span class=\"line\">staff_notice = StaffNotice(<span class=\"string\">&#x27;初始化公司信息&#x27;</span>)</span><br><span class=\"line\">staff1 = Staff()</span><br><span class=\"line\">staff2 = Staff()</span><br><span class=\"line\">staff_notice.attach(staff1)</span><br><span class=\"line\">staff_notice.attach(staff2)</span><br><span class=\"line\"><span class=\"comment\"># print(staff1.company_info) None</span></span><br><span class=\"line\"><span class=\"comment\"># print(staff2.company_info) None</span></span><br><span class=\"line\">staff_notice.company_info = <span class=\"string\">&#x27;假期放假通知！&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(staff1.company_info)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(staff2.company_info)</span><br><span class=\"line\">staff_notice.detach(staff2)</span><br><span class=\"line\">staff_notice.company_info = <span class=\"string\">&#x27;明天开会！&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">print</span>(staff1.company_info)</span><br><span class=\"line\"><span class=\"built_in\">print</span>(staff2.company_info)</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">假期放假通知！</span></span><br><span class=\"line\"><span class=\"string\">假期放假通知！</span></span><br><span class=\"line\"><span class=\"string\">明天开会！</span></span><br><span class=\"line\"><span class=\"string\">假期放假通知！</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<p>使用场景：当一个抽象模型有两个方面，其中一个方面依赖另一个方面。将这两者封装在独立对象中以使它们可以各自独立地改变和复用；当对一个对象的改变需要同时改变其它对象，而不知道具体有多少对象待改变；当一个对象必须通知其它对象，而它又不能假定其它对象是谁。换言之，你不希望这些对象是紧耦合的。优点：目标和观察者之间的抽象耦合最小；支持广播通信。</p>\n<h2 id=\"策略模式\">策略模式</h2>\n<p>定义一个个算法，把它们封装起来，并且使它们可以相互替换。本模式使得算法可独立于使用它的客户而变化。角色有：抽象策略、具体策略和上下文。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> abc <span class=\"keyword\">import</span> abstractmethod, ABCMeta</span><br><span class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> datetime</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 抽象策略</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Strategy</span>(metaclass=ABCMeta):</span><br><span class=\"line\"><span class=\"meta\">    @abstractmethod</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">execute</span>(<span class=\"params\">self, data</span>):</span><br><span class=\"line\">        <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体策略</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">FastStrategy</span>(<span class=\"title class_ inherited__\">Strategy</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">execute</span>(<span class=\"params\">self, data</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;使用较快的策略处理%s&quot;</span> % data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 具体策略</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">SlowStrategy</span>(<span class=\"title class_ inherited__\">Strategy</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">execute</span>(<span class=\"params\">self, data</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;使用较慢的策略处理%s&quot;</span> % data)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 上下文</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Context</span>:</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, strategy, data</span>):</span><br><span class=\"line\">        self.data = data</span><br><span class=\"line\">        self.strategy = strategy</span><br><span class=\"line\">        <span class=\"comment\"># 可以定义用户不知道的东西</span></span><br><span class=\"line\">        self.date = datetime.now()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">set_strategy</span>(<span class=\"params\">self, strategy</span>):</span><br><span class=\"line\">        self.strategy = strategy</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">do_strategy</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        self.strategy.execute(self.data)</span><br><span class=\"line\"></span><br><span class=\"line\">data = <span class=\"string\">&quot;Hello!&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># 使用较快的策略处理</span></span><br><span class=\"line\">fast_strategy = FastStrategy()</span><br><span class=\"line\">context = Context(fast_strategy, data)</span><br><span class=\"line\">context.do_strategy()</span><br><span class=\"line\"><span class=\"comment\"># 使用较慢的策略处理</span></span><br><span class=\"line\">slow_strategy = SlowStrategy()</span><br><span class=\"line\">context = Context(slow_strategy, data)</span><br><span class=\"line\">context.do_strategy()</span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">使用较快的策略处理Hello!</span></span><br><span class=\"line\"><span class=\"string\">使用较慢的策略处理Hello!</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span> </span><br></pre></td></tr></table></figure>\n<p>优点：定义了一些列可重用的算法和行为；消除了一些条件语句；可以提供相同行为的不同实现；缺点：客户必须了解不同的策略。</p>\n<h2 id=\"模板方法模式\">模板方法模式</h2>\n<p>内容：定义一个操作中的算法骨架，将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。使用模板方法，需要用到两种角色，分别是抽象类和具体类。抽象类的作用是是定义抽象类（钩子操作），实现一个模板方法作为算法的骨架。具体类的作用实现原子操作。</p>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p><a href=\"https://github.com/ThanlonSmith/design-pattern/blob/master/3.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.md\">https://github.com/ThanlonSmith/design-pattern/blob/master/3.创建型模式.md</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n"},{"title":"vscode手册","share":true,"date":"2023-01-05T04:52:01.000Z","updated":"2023-01-05T04:54:48.000Z","_content":"\n## Summary\n\n## 快捷键\n- 转换为大小写\n\t- ctrl+shift+x: 大写\n\t- ctrl+shift+y: 小写\n\n## ## Latex\n\n<a href='{% post_path Science-Research-Writing-Skills %}'>Science-Research-Writing-Skills</a>\n\n## vscode + Sumatra PDF + LaTeX Workshop 实现正反向搜索\n\n- Sumatra PDF 中双击文本, 完成反向同步.\n- Vscode 中: SyncTeX from cursor\n\nhttps://github.com/James-Yu/LaTeX-Workshop/wiki/View#latex-workshopviewpdfexternalviewercommand\n\n### vscode: Open Setting(JSON)\n\n![Pasted image 20220516191947.png](/images/22adcfc946f5b16841dfbe41ab73cff51e9e2dc4.png)\n\n添加如下代码\n\n```json\n    \"latex-workshop.view.pdf.viewer\": \"external\",\n    \"latex-workshop.view.pdf.external.viewer.command\": \"C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe\",\n    \"latex-workshop.view.pdf.external.viewer.args\": [\n        \"%PDF%\"\n    ], \n    // 正向搜索\n    \"latex-workshop.view.pdf.external.synctex.command\": \"C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe\",\n    \"latex-workshop.view.pdf.external.synctex.args\": [  \n        \"-forward-search\", \n        \"%TEX%\", \n        \"%LINE%\",  \n        \"-reuse-instance\",\n        \"-inverse-search\",\n        \"\\\"C:/Program Files/Microsoft VS Code/Code.exe\\\"  -g \\\"%f\\\":\\\"%l\",  \n        \"%PDF%\", \n    ],  \n\n```\n\n### Sumatra PDF\n\n```python\n\"C:/Program Files/Microsoft VS Code/Code.exe\"  -g \"%f\":\"%l\n```\n\n![Pasted image 20220518075032.png](/images/5f91d846bcb5df9db14f61016e7c5f41cdf8ed12.png)\n\n## 打开设置\n\n![Pasted image 20220516172132.png](/images/ed87923609bd7e047593aafba583d2a568d2604b.png)\n\n## setting.js\n\n```python\n{\n    \"latex-workshop.view.pdf.viewer\": \"external\",\n    \"latex-workshop.view.pdf.external.viewer.command\": \"C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe\",\n    \"latex-workshop.view.pdf.external.viewer.args\": [\n        \"%PDF%\"\n    ], \n    // 正向搜索\n    \"latex-workshop.view.pdf.external.synctex.command\": \"C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe\",\n    \"latex-workshop.view.pdf.external.synctex.args\": [  \n        \"-forward-search\", \n        \"%TEX%\", \n        \"%LINE%\",  \n        \"-reuse-instance\",\n        \"-inverse-search\",\n        \"\\\"C:/Program Files/Microsoft VS Code/Code.exe\\\"  -g \\\"%f\\\":\\\"%l\",  \n        \"%PDF%\", \n    ],  \n\n    // 反向搜索配置\n    \n    \"editor.minimap.enabled\": false,\n    \"remote.SSH.remotePlatform\": {\n        \"192.168.100.9\": \"linux\",\n        \"10.10.10.214\": \"linux\"\n    },\n    \"terminal.integrated.inheritEnv\": false,\n    \"git.confirmSync\": false,\n    \"security.workspace.trust.untrustedFiles\": \"open\",\n    \"editor.fontSize\": 25,\n    \"diffEditor.wordWrap\": \"off\",\n    \"workbench.editor.enablePreview\": false,\n    \"editor.suggest.snippetsPreventQuickSuggestions\": false,\n    \"todohighlight.defaultStyle\": {},\n    \"todohighlight.exclude\": [\n        \"**/node_modules/**\",\n        \"**/bower_components/**\",\n        \"**/dist/**\",\n        \"**/build/**\",\n        \"**/.vscode/**\",\n        \"**/.github/**\",\n        \"**/_output/**\",\n        \"**/*.min.*\",\n        \"**/*.map\",\n        \"**/.next/**\"\n    ],\n    \"todohighlight.include\": [\n        \"**/*.tex\",\n        \"**/*.js\",\n        \"**/*.jsx\",\n        \"**/*.ts\",\n        \"**/*.tsx\",\n        \"**/*.html\",\n        \"**/*.php\",\n        \"**/*.css\",\n        \"**/*.scss\"\n    ],\n    \"todohighlight.keywords\": [],\n    \"editor.tabSize\": 2,\n    \"workbench.statusBar.visible\": false,\n    \"editor.lineNumbers\": \"off\",\n    \"editor.wordWrap\": \"on\",\n    \"files.autoSave\": \"afterDelay\",\n    \"update.enableWindowsBackgroundUpdates\": false,\n    \"update.mode\": \"none\",\n    \"workbench.settings.enableNaturalLanguageSearch\": false,\n    // \"files.exclude\": {\n    //     \"**/**.bib\": true       \n    // },  \n}\n```\n\n## 关闭自动更新\n\n![Pasted image 20220516174021.png](/images/c6ee6cacbc4914a907085f7c3809b9c8bf224df4.png)\n\n## python\n### 选中执行环境\n\nctrl+shift+p -> select Interpreter\n\n![Pasted image 20220423100700.png](/images/594633a5fcdee2f60343114487d0b86a29463be1.png)\n\n### vscode 配置远程服务器 python 解释器教程\n\n```python\nremote-ssh \n```\n\n## 关闭预览框\n\n![Pasted image 20220422131823.png](/images/c4182596b73a1667337b1758881496fabd85e672.png)\n\n关闭\n\n![Pasted image 20220422132032.png](/images/beebcc775b1fb3ed0fcf81a561981d192588b656.png)\n\n## 链接 ssh\n\n![image.png](static/img/fe2a7b6e1d5dbb6b37e4794cb2f3463d.png)\n\ncontrol+shift+p\n\n![image.png](static/img/b6df594217c83745fa6499ea0608e4b9.png)\n\n## 配置 jupyter\n\nctrl+shift+p\n\n![image.png](static/img/1fb058a1d0a0e4b16367a4e307f148bf.png)\n\n选择 \" 现有的 \"\n\n![image.png](static/img/33ab69d8d6aeb6f4338ce4538c44209c.png)\n\n输入网址\n\n![image.png](static/img/08e7207c07e746c21a7ce8602ab82366.png)\n\n<a href='{% post_path Python手册 %}'>Python手册</a>\n\n```\n删除文件夹\n/Users/sunwu/Library/Application Support/Code/User/globalStorage/ms-vscode-remote.remote-ssh\n中的文件即可\n```\n\n[https://github.com/microsoft/vscode-remote-release/issues/5526](https://github.com/microsoft/vscode-remote-release/issues/5526)\n\n## Vscode 配置 ssh\n\n```python\n# Read more about SSH config files: https://linux.die.net/man/5/ssh_config\nHost 192.168.100.111\n    HostName 192.168.100.111\n    User root\n    IdentityFile \"C:\\Users\\acmis\\.ssh\\id_rsa\"\nHost 210.40.16.12\n    HostName 210.40.16.12\n    User root\n    IdentityFile \"C:\\Users\\acmis\\.ssh\\id_rsa\"\n    Port 20949\n```\n\n## ssh 免密登陆\n\n```python\nssh-keygen\ncat ~/.ssh/id_rsa.pub \n```\n\n## 配置运行参数\n\n![Pasted image 20220423102729.png](/images/39dadb0fd0ab716a4e0e3598b8c4f1e59df95b56.png)\n\n![Pasted image 20220423102312.png](/images/8bec12c6d52cc8ecf6af4886c1b3066044ea344a.png)\\\n\n## 查看问题\n\n![Pasted image 20220515201331.png](/images/078f6cb7656f81f0563a397c6857aa0a62f50ceb.png)\n","source":"_posts/vscode手册.md","raw":"---\ntitle: vscode手册\nshare: true\ndate: 2023-01-05 12:52:01 \nupdated: 2023-01-05 12:54:48 \ncategories: research\n---\n\n## Summary\n\n## 快捷键\n- 转换为大小写\n\t- ctrl+shift+x: 大写\n\t- ctrl+shift+y: 小写\n\n## ## Latex\n\n<a href='{% post_path Science-Research-Writing-Skills %}'>Science-Research-Writing-Skills</a>\n\n## vscode + Sumatra PDF + LaTeX Workshop 实现正反向搜索\n\n- Sumatra PDF 中双击文本, 完成反向同步.\n- Vscode 中: SyncTeX from cursor\n\nhttps://github.com/James-Yu/LaTeX-Workshop/wiki/View#latex-workshopviewpdfexternalviewercommand\n\n### vscode: Open Setting(JSON)\n\n![Pasted image 20220516191947.png](/images/22adcfc946f5b16841dfbe41ab73cff51e9e2dc4.png)\n\n添加如下代码\n\n```json\n    \"latex-workshop.view.pdf.viewer\": \"external\",\n    \"latex-workshop.view.pdf.external.viewer.command\": \"C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe\",\n    \"latex-workshop.view.pdf.external.viewer.args\": [\n        \"%PDF%\"\n    ], \n    // 正向搜索\n    \"latex-workshop.view.pdf.external.synctex.command\": \"C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe\",\n    \"latex-workshop.view.pdf.external.synctex.args\": [  \n        \"-forward-search\", \n        \"%TEX%\", \n        \"%LINE%\",  \n        \"-reuse-instance\",\n        \"-inverse-search\",\n        \"\\\"C:/Program Files/Microsoft VS Code/Code.exe\\\"  -g \\\"%f\\\":\\\"%l\",  \n        \"%PDF%\", \n    ],  \n\n```\n\n### Sumatra PDF\n\n```python\n\"C:/Program Files/Microsoft VS Code/Code.exe\"  -g \"%f\":\"%l\n```\n\n![Pasted image 20220518075032.png](/images/5f91d846bcb5df9db14f61016e7c5f41cdf8ed12.png)\n\n## 打开设置\n\n![Pasted image 20220516172132.png](/images/ed87923609bd7e047593aafba583d2a568d2604b.png)\n\n## setting.js\n\n```python\n{\n    \"latex-workshop.view.pdf.viewer\": \"external\",\n    \"latex-workshop.view.pdf.external.viewer.command\": \"C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe\",\n    \"latex-workshop.view.pdf.external.viewer.args\": [\n        \"%PDF%\"\n    ], \n    // 正向搜索\n    \"latex-workshop.view.pdf.external.synctex.command\": \"C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe\",\n    \"latex-workshop.view.pdf.external.synctex.args\": [  \n        \"-forward-search\", \n        \"%TEX%\", \n        \"%LINE%\",  \n        \"-reuse-instance\",\n        \"-inverse-search\",\n        \"\\\"C:/Program Files/Microsoft VS Code/Code.exe\\\"  -g \\\"%f\\\":\\\"%l\",  \n        \"%PDF%\", \n    ],  \n\n    // 反向搜索配置\n    \n    \"editor.minimap.enabled\": false,\n    \"remote.SSH.remotePlatform\": {\n        \"192.168.100.9\": \"linux\",\n        \"10.10.10.214\": \"linux\"\n    },\n    \"terminal.integrated.inheritEnv\": false,\n    \"git.confirmSync\": false,\n    \"security.workspace.trust.untrustedFiles\": \"open\",\n    \"editor.fontSize\": 25,\n    \"diffEditor.wordWrap\": \"off\",\n    \"workbench.editor.enablePreview\": false,\n    \"editor.suggest.snippetsPreventQuickSuggestions\": false,\n    \"todohighlight.defaultStyle\": {},\n    \"todohighlight.exclude\": [\n        \"**/node_modules/**\",\n        \"**/bower_components/**\",\n        \"**/dist/**\",\n        \"**/build/**\",\n        \"**/.vscode/**\",\n        \"**/.github/**\",\n        \"**/_output/**\",\n        \"**/*.min.*\",\n        \"**/*.map\",\n        \"**/.next/**\"\n    ],\n    \"todohighlight.include\": [\n        \"**/*.tex\",\n        \"**/*.js\",\n        \"**/*.jsx\",\n        \"**/*.ts\",\n        \"**/*.tsx\",\n        \"**/*.html\",\n        \"**/*.php\",\n        \"**/*.css\",\n        \"**/*.scss\"\n    ],\n    \"todohighlight.keywords\": [],\n    \"editor.tabSize\": 2,\n    \"workbench.statusBar.visible\": false,\n    \"editor.lineNumbers\": \"off\",\n    \"editor.wordWrap\": \"on\",\n    \"files.autoSave\": \"afterDelay\",\n    \"update.enableWindowsBackgroundUpdates\": false,\n    \"update.mode\": \"none\",\n    \"workbench.settings.enableNaturalLanguageSearch\": false,\n    // \"files.exclude\": {\n    //     \"**/**.bib\": true       \n    // },  \n}\n```\n\n## 关闭自动更新\n\n![Pasted image 20220516174021.png](/images/c6ee6cacbc4914a907085f7c3809b9c8bf224df4.png)\n\n## python\n### 选中执行环境\n\nctrl+shift+p -> select Interpreter\n\n![Pasted image 20220423100700.png](/images/594633a5fcdee2f60343114487d0b86a29463be1.png)\n\n### vscode 配置远程服务器 python 解释器教程\n\n```python\nremote-ssh \n```\n\n## 关闭预览框\n\n![Pasted image 20220422131823.png](/images/c4182596b73a1667337b1758881496fabd85e672.png)\n\n关闭\n\n![Pasted image 20220422132032.png](/images/beebcc775b1fb3ed0fcf81a561981d192588b656.png)\n\n## 链接 ssh\n\n![image.png](static/img/fe2a7b6e1d5dbb6b37e4794cb2f3463d.png)\n\ncontrol+shift+p\n\n![image.png](static/img/b6df594217c83745fa6499ea0608e4b9.png)\n\n## 配置 jupyter\n\nctrl+shift+p\n\n![image.png](static/img/1fb058a1d0a0e4b16367a4e307f148bf.png)\n\n选择 \" 现有的 \"\n\n![image.png](static/img/33ab69d8d6aeb6f4338ce4538c44209c.png)\n\n输入网址\n\n![image.png](static/img/08e7207c07e746c21a7ce8602ab82366.png)\n\n<a href='{% post_path Python手册 %}'>Python手册</a>\n\n```\n删除文件夹\n/Users/sunwu/Library/Application Support/Code/User/globalStorage/ms-vscode-remote.remote-ssh\n中的文件即可\n```\n\n[https://github.com/microsoft/vscode-remote-release/issues/5526](https://github.com/microsoft/vscode-remote-release/issues/5526)\n\n## Vscode 配置 ssh\n\n```python\n# Read more about SSH config files: https://linux.die.net/man/5/ssh_config\nHost 192.168.100.111\n    HostName 192.168.100.111\n    User root\n    IdentityFile \"C:\\Users\\acmis\\.ssh\\id_rsa\"\nHost 210.40.16.12\n    HostName 210.40.16.12\n    User root\n    IdentityFile \"C:\\Users\\acmis\\.ssh\\id_rsa\"\n    Port 20949\n```\n\n## ssh 免密登陆\n\n```python\nssh-keygen\ncat ~/.ssh/id_rsa.pub \n```\n\n## 配置运行参数\n\n![Pasted image 20220423102729.png](/images/39dadb0fd0ab716a4e0e3598b8c4f1e59df95b56.png)\n\n![Pasted image 20220423102312.png](/images/8bec12c6d52cc8ecf6af4886c1b3066044ea344a.png)\\\n\n## 查看问题\n\n![Pasted image 20220515201331.png](/images/078f6cb7656f81f0563a397c6857aa0a62f50ceb.png)\n","slug":"vscode手册","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a8004r4cv9ayfe8o3h","content":"<h2 id=\"Summary\">Summary</h2>\n<h2 id=\"快捷键\">快捷键</h2>\n<ul>\n<li>转换为大小写\n<ul>\n<li>ctrl+shift+x: 大写</li>\n<li>ctrl+shift+y: 小写</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Latex\">## Latex</h2>\n<p><a href=''>Science-Research-Writing-Skills</a></p>\n<h2 id=\"vscode-Sumatra-PDF-LaTeX-Workshop-实现正反向搜索\">vscode + Sumatra PDF + LaTeX Workshop 实现正反向搜索</h2>\n<ul>\n<li>Sumatra PDF 中双击文本, 完成反向同步.</li>\n<li>Vscode 中: SyncTeX from cursor</li>\n</ul>\n<p><a href=\"https://github.com/James-Yu/LaTeX-Workshop/wiki/View#latex-workshopviewpdfexternalviewercommand\">https://github.com/James-Yu/LaTeX-Workshop/wiki/View#latex-workshopviewpdfexternalviewercommand</a></p>\n<h3 id=\"vscode-Open-Setting-JSON\">vscode: Open Setting(JSON)</h3>\n<p><img src=\"/images/22adcfc946f5b16841dfbe41ab73cff51e9e2dc4.png\" alt=\"Pasted image 20220516191947.png\"></p>\n<p>添加如下代码</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.viewer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;external&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.external.viewer.command&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.external.viewer.args&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;%PDF%&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\"><span class=\"comment\">// 正向搜索</span></span><br><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.external.synctex.command&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.external.synctex.args&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span>  </span><br><span class=\"line\">    <span class=\"string\">&quot;-forward-search&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">    <span class=\"string\">&quot;%TEX%&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">    <span class=\"string\">&quot;%LINE%&quot;</span><span class=\"punctuation\">,</span>  </span><br><span class=\"line\">    <span class=\"string\">&quot;-reuse-instance&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;-inverse-search&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;\\&quot;C:/Program Files/Microsoft VS Code/Code.exe\\&quot;  -g \\&quot;%f\\&quot;:\\&quot;%l&quot;</span><span class=\"punctuation\">,</span>  </span><br><span class=\"line\">    <span class=\"string\">&quot;%PDF%&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\"><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span>  </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"Sumatra-PDF\">Sumatra PDF</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;C:/Program Files/Microsoft VS Code/Code.exe&quot;</span>  -g <span class=\"string\">&quot;%f&quot;</span>:<span class=\"string\">&quot;%l</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/5f91d846bcb5df9db14f61016e7c5f41cdf8ed12.png\" alt=\"Pasted image 20220518075032.png\"></p>\n<h2 id=\"打开设置\">打开设置</h2>\n<p><img src=\"/images/ed87923609bd7e047593aafba583d2a568d2604b.png\" alt=\"Pasted image 20220516172132.png\"></p>\n<h2 id=\"setting-js\">setting.js</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.viewer&quot;</span>: <span class=\"string\">&quot;external&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.external.viewer.command&quot;</span>: <span class=\"string\">&quot;C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.external.viewer.args&quot;</span>: [</span><br><span class=\"line\">        <span class=\"string\">&quot;%PDF%&quot;</span></span><br><span class=\"line\">    ], </span><br><span class=\"line\">    // 正向搜索</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.external.synctex.command&quot;</span>: <span class=\"string\">&quot;C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.external.synctex.args&quot;</span>: [  </span><br><span class=\"line\">        <span class=\"string\">&quot;-forward-search&quot;</span>, </span><br><span class=\"line\">        <span class=\"string\">&quot;%TEX%&quot;</span>, </span><br><span class=\"line\">        <span class=\"string\">&quot;%LINE%&quot;</span>,  </span><br><span class=\"line\">        <span class=\"string\">&quot;-reuse-instance&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;-inverse-search&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;\\&quot;C:/Program Files/Microsoft VS Code/Code.exe\\&quot;  -g \\&quot;%f\\&quot;:\\&quot;%l&quot;</span>,  </span><br><span class=\"line\">        <span class=\"string\">&quot;%PDF%&quot;</span>, </span><br><span class=\"line\">    ],  </span><br><span class=\"line\"></span><br><span class=\"line\">    // 反向搜索配置</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"string\">&quot;editor.minimap.enabled&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;remote.SSH.remotePlatform&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;192.168.100.9&quot;</span>: <span class=\"string\">&quot;linux&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;10.10.10.214&quot;</span>: <span class=\"string\">&quot;linux&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;terminal.integrated.inheritEnv&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;git.confirmSync&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;security.workspace.trust.untrustedFiles&quot;</span>: <span class=\"string\">&quot;open&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.fontSize&quot;</span>: <span class=\"number\">25</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;diffEditor.wordWrap&quot;</span>: <span class=\"string\">&quot;off&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;workbench.editor.enablePreview&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.suggest.snippetsPreventQuickSuggestions&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;todohighlight.defaultStyle&quot;</span>: &#123;&#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;todohighlight.exclude&quot;</span>: [</span><br><span class=\"line\">        <span class=\"string\">&quot;**/node_modules/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/bower_components/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/dist/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/build/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/.vscode/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/.github/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/_output/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.min.*&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.map&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/.next/**&quot;</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&quot;todohighlight.include&quot;</span>: [</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.tex&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.jsx&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.ts&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.tsx&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.html&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.php&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.css&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.scss&quot;</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&quot;todohighlight.keywords&quot;</span>: [],</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.tabSize&quot;</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;workbench.statusBar.visible&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.lineNumbers&quot;</span>: <span class=\"string\">&quot;off&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.wordWrap&quot;</span>: <span class=\"string\">&quot;on&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;files.autoSave&quot;</span>: <span class=\"string\">&quot;afterDelay&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;update.enableWindowsBackgroundUpdates&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;update.mode&quot;</span>: <span class=\"string\">&quot;none&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;workbench.settings.enableNaturalLanguageSearch&quot;</span>: false,</span><br><span class=\"line\">    // <span class=\"string\">&quot;files.exclude&quot;</span>: &#123;</span><br><span class=\"line\">    //     <span class=\"string\">&quot;**/**.bib&quot;</span>: true       </span><br><span class=\"line\">    // &#125;,  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"关闭自动更新\">关闭自动更新</h2>\n<p><img src=\"/images/c6ee6cacbc4914a907085f7c3809b9c8bf224df4.png\" alt=\"Pasted image 20220516174021.png\"></p>\n<h2 id=\"python\">python</h2>\n<h3 id=\"选中执行环境\">选中执行环境</h3>\n<p>ctrl+shift+p -&gt; select Interpreter</p>\n<p><img src=\"/images/594633a5fcdee2f60343114487d0b86a29463be1.png\" alt=\"Pasted image 20220423100700.png\"></p>\n<h3 id=\"vscode-配置远程服务器-python-解释器教程\">vscode 配置远程服务器 python 解释器教程</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">remote-ssh </span><br></pre></td></tr></table></figure>\n<h2 id=\"关闭预览框\">关闭预览框</h2>\n<p><img src=\"/images/c4182596b73a1667337b1758881496fabd85e672.png\" alt=\"Pasted image 20220422131823.png\"></p>\n<p>关闭</p>\n<p><img src=\"/images/beebcc775b1fb3ed0fcf81a561981d192588b656.png\" alt=\"Pasted image 20220422132032.png\"></p>\n<h2 id=\"链接-ssh\">链接 ssh</h2>\n<p><img src=\"static/img/fe2a7b6e1d5dbb6b37e4794cb2f3463d.png\" alt=\"image.png\"></p>\n<p>control+shift+p</p>\n<p><img src=\"static/img/b6df594217c83745fa6499ea0608e4b9.png\" alt=\"image.png\"></p>\n<h2 id=\"配置-jupyter\">配置 jupyter</h2>\n<p>ctrl+shift+p</p>\n<p><img src=\"static/img/1fb058a1d0a0e4b16367a4e307f148bf.png\" alt=\"image.png\"></p>\n<p>选择 &quot; 现有的 &quot;</p>\n<p><img src=\"static/img/33ab69d8d6aeb6f4338ce4538c44209c.png\" alt=\"image.png\"></p>\n<p>输入网址</p>\n<p><img src=\"static/img/08e7207c07e746c21a7ce8602ab82366.png\" alt=\"image.png\"></p>\n<p><a href=''>Python手册</a></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">删除文件夹</span><br><span class=\"line\">/Users/sunwu/Library/Application Support/Code/User/globalStorage/ms-vscode-remote.remote-ssh</span><br><span class=\"line\">中的文件即可</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/microsoft/vscode-remote-release/issues/5526\">https://github.com/microsoft/vscode-remote-release/issues/5526</a></p>\n<h2 id=\"Vscode-配置-ssh\">Vscode 配置 ssh</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Read more about SSH config files: https://linux.die.net/man/5/ssh_config</span></span><br><span class=\"line\">Host <span class=\"number\">192.168</span><span class=\"number\">.100</span><span class=\"number\">.111</span></span><br><span class=\"line\">    HostName <span class=\"number\">192.168</span><span class=\"number\">.100</span><span class=\"number\">.111</span></span><br><span class=\"line\">    User root</span><br><span class=\"line\">    IdentityFile <span class=\"string\">&quot;C:\\Users\\acmis\\.ssh\\id_rsa&quot;</span></span><br><span class=\"line\">Host <span class=\"number\">210.40</span><span class=\"number\">.16</span><span class=\"number\">.12</span></span><br><span class=\"line\">    HostName <span class=\"number\">210.40</span><span class=\"number\">.16</span><span class=\"number\">.12</span></span><br><span class=\"line\">    User root</span><br><span class=\"line\">    IdentityFile <span class=\"string\">&quot;C:\\Users\\acmis\\.ssh\\id_rsa&quot;</span></span><br><span class=\"line\">    Port <span class=\"number\">20949</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"ssh-免密登陆\">ssh 免密登陆</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen</span><br><span class=\"line\">cat ~/.ssh/id_rsa.pub </span><br></pre></td></tr></table></figure>\n<h2 id=\"配置运行参数\">配置运行参数</h2>\n<p><img src=\"/images/39dadb0fd0ab716a4e0e3598b8c4f1e59df95b56.png\" alt=\"Pasted image 20220423102729.png\"></p>\n<p><img src=\"/images/8bec12c6d52cc8ecf6af4886c1b3066044ea344a.png\" alt=\"Pasted image 20220423102312.png\">\\</p>\n<h2 id=\"查看问题\">查看问题</h2>\n<p><img src=\"/images/078f6cb7656f81f0563a397c6857aa0a62f50ceb.png\" alt=\"Pasted image 20220515201331.png\"></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<h2 id=\"Summary\">Summary</h2>\n<h2 id=\"快捷键\">快捷键</h2>\n<ul>\n<li>转换为大小写\n<ul>\n<li>ctrl+shift+x: 大写</li>\n<li>ctrl+shift+y: 小写</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Latex\">## Latex</h2>\n<p><a href=''>Science-Research-Writing-Skills</a></p>\n<h2 id=\"vscode-Sumatra-PDF-LaTeX-Workshop-实现正反向搜索\">vscode + Sumatra PDF + LaTeX Workshop 实现正反向搜索</h2>\n<ul>\n<li>Sumatra PDF 中双击文本, 完成反向同步.</li>\n<li>Vscode 中: SyncTeX from cursor</li>\n</ul>\n<p><a href=\"https://github.com/James-Yu/LaTeX-Workshop/wiki/View#latex-workshopviewpdfexternalviewercommand\">https://github.com/James-Yu/LaTeX-Workshop/wiki/View#latex-workshopviewpdfexternalviewercommand</a></p>\n<h3 id=\"vscode-Open-Setting-JSON\">vscode: Open Setting(JSON)</h3>\n<p><img src=\"/images/22adcfc946f5b16841dfbe41ab73cff51e9e2dc4.png\" alt=\"Pasted image 20220516191947.png\"></p>\n<p>添加如下代码</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.viewer&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;external&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.external.viewer.command&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.external.viewer.args&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;%PDF%&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\"><span class=\"comment\">// 正向搜索</span></span><br><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.external.synctex.command&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;latex-workshop.view.pdf.external.synctex.args&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span>  </span><br><span class=\"line\">    <span class=\"string\">&quot;-forward-search&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">    <span class=\"string\">&quot;%TEX%&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\">    <span class=\"string\">&quot;%LINE%&quot;</span><span class=\"punctuation\">,</span>  </span><br><span class=\"line\">    <span class=\"string\">&quot;-reuse-instance&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;-inverse-search&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;\\&quot;C:/Program Files/Microsoft VS Code/Code.exe\\&quot;  -g \\&quot;%f\\&quot;:\\&quot;%l&quot;</span><span class=\"punctuation\">,</span>  </span><br><span class=\"line\">    <span class=\"string\">&quot;%PDF%&quot;</span><span class=\"punctuation\">,</span> </span><br><span class=\"line\"><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span>  </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"Sumatra-PDF\">Sumatra PDF</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;C:/Program Files/Microsoft VS Code/Code.exe&quot;</span>  -g <span class=\"string\">&quot;%f&quot;</span>:<span class=\"string\">&quot;%l</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/5f91d846bcb5df9db14f61016e7c5f41cdf8ed12.png\" alt=\"Pasted image 20220518075032.png\"></p>\n<h2 id=\"打开设置\">打开设置</h2>\n<p><img src=\"/images/ed87923609bd7e047593aafba583d2a568d2604b.png\" alt=\"Pasted image 20220516172132.png\"></p>\n<h2 id=\"setting-js\">setting.js</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.viewer&quot;</span>: <span class=\"string\">&quot;external&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.external.viewer.command&quot;</span>: <span class=\"string\">&quot;C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.external.viewer.args&quot;</span>: [</span><br><span class=\"line\">        <span class=\"string\">&quot;%PDF%&quot;</span></span><br><span class=\"line\">    ], </span><br><span class=\"line\">    // 正向搜索</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.external.synctex.command&quot;</span>: <span class=\"string\">&quot;C:/Users/sw/AppData/Local/SumatraPDF/SumatraPDF.exe&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;latex-workshop.view.pdf.external.synctex.args&quot;</span>: [  </span><br><span class=\"line\">        <span class=\"string\">&quot;-forward-search&quot;</span>, </span><br><span class=\"line\">        <span class=\"string\">&quot;%TEX%&quot;</span>, </span><br><span class=\"line\">        <span class=\"string\">&quot;%LINE%&quot;</span>,  </span><br><span class=\"line\">        <span class=\"string\">&quot;-reuse-instance&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;-inverse-search&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;\\&quot;C:/Program Files/Microsoft VS Code/Code.exe\\&quot;  -g \\&quot;%f\\&quot;:\\&quot;%l&quot;</span>,  </span><br><span class=\"line\">        <span class=\"string\">&quot;%PDF%&quot;</span>, </span><br><span class=\"line\">    ],  </span><br><span class=\"line\"></span><br><span class=\"line\">    // 反向搜索配置</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"string\">&quot;editor.minimap.enabled&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;remote.SSH.remotePlatform&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;192.168.100.9&quot;</span>: <span class=\"string\">&quot;linux&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;10.10.10.214&quot;</span>: <span class=\"string\">&quot;linux&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;terminal.integrated.inheritEnv&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;git.confirmSync&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;security.workspace.trust.untrustedFiles&quot;</span>: <span class=\"string\">&quot;open&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.fontSize&quot;</span>: <span class=\"number\">25</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;diffEditor.wordWrap&quot;</span>: <span class=\"string\">&quot;off&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;workbench.editor.enablePreview&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.suggest.snippetsPreventQuickSuggestions&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;todohighlight.defaultStyle&quot;</span>: &#123;&#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;todohighlight.exclude&quot;</span>: [</span><br><span class=\"line\">        <span class=\"string\">&quot;**/node_modules/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/bower_components/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/dist/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/build/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/.vscode/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/.github/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/_output/**&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.min.*&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.map&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/.next/**&quot;</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&quot;todohighlight.include&quot;</span>: [</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.tex&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.js&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.jsx&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.ts&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.tsx&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.html&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.php&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.css&quot;</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;**/*.scss&quot;</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&quot;todohighlight.keywords&quot;</span>: [],</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.tabSize&quot;</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;workbench.statusBar.visible&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.lineNumbers&quot;</span>: <span class=\"string\">&quot;off&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;editor.wordWrap&quot;</span>: <span class=\"string\">&quot;on&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;files.autoSave&quot;</span>: <span class=\"string\">&quot;afterDelay&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;update.enableWindowsBackgroundUpdates&quot;</span>: false,</span><br><span class=\"line\">    <span class=\"string\">&quot;update.mode&quot;</span>: <span class=\"string\">&quot;none&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;workbench.settings.enableNaturalLanguageSearch&quot;</span>: false,</span><br><span class=\"line\">    // <span class=\"string\">&quot;files.exclude&quot;</span>: &#123;</span><br><span class=\"line\">    //     <span class=\"string\">&quot;**/**.bib&quot;</span>: true       </span><br><span class=\"line\">    // &#125;,  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"关闭自动更新\">关闭自动更新</h2>\n<p><img src=\"/images/c6ee6cacbc4914a907085f7c3809b9c8bf224df4.png\" alt=\"Pasted image 20220516174021.png\"></p>\n<h2 id=\"python\">python</h2>\n<h3 id=\"选中执行环境\">选中执行环境</h3>\n<p>ctrl+shift+p -&gt; select Interpreter</p>\n<p><img src=\"/images/594633a5fcdee2f60343114487d0b86a29463be1.png\" alt=\"Pasted image 20220423100700.png\"></p>\n<h3 id=\"vscode-配置远程服务器-python-解释器教程\">vscode 配置远程服务器 python 解释器教程</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">remote-ssh </span><br></pre></td></tr></table></figure>\n<h2 id=\"关闭预览框\">关闭预览框</h2>\n<p><img src=\"/images/c4182596b73a1667337b1758881496fabd85e672.png\" alt=\"Pasted image 20220422131823.png\"></p>\n<p>关闭</p>\n<p><img src=\"/images/beebcc775b1fb3ed0fcf81a561981d192588b656.png\" alt=\"Pasted image 20220422132032.png\"></p>\n<h2 id=\"链接-ssh\">链接 ssh</h2>\n<p><img src=\"static/img/fe2a7b6e1d5dbb6b37e4794cb2f3463d.png\" alt=\"image.png\"></p>\n<p>control+shift+p</p>\n<p><img src=\"static/img/b6df594217c83745fa6499ea0608e4b9.png\" alt=\"image.png\"></p>\n<h2 id=\"配置-jupyter\">配置 jupyter</h2>\n<p>ctrl+shift+p</p>\n<p><img src=\"static/img/1fb058a1d0a0e4b16367a4e307f148bf.png\" alt=\"image.png\"></p>\n<p>选择 &quot; 现有的 &quot;</p>\n<p><img src=\"static/img/33ab69d8d6aeb6f4338ce4538c44209c.png\" alt=\"image.png\"></p>\n<p>输入网址</p>\n<p><img src=\"static/img/08e7207c07e746c21a7ce8602ab82366.png\" alt=\"image.png\"></p>\n<p><a href=''>Python手册</a></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">删除文件夹</span><br><span class=\"line\">/Users/sunwu/Library/Application Support/Code/User/globalStorage/ms-vscode-remote.remote-ssh</span><br><span class=\"line\">中的文件即可</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/microsoft/vscode-remote-release/issues/5526\">https://github.com/microsoft/vscode-remote-release/issues/5526</a></p>\n<h2 id=\"Vscode-配置-ssh\">Vscode 配置 ssh</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Read more about SSH config files: https://linux.die.net/man/5/ssh_config</span></span><br><span class=\"line\">Host <span class=\"number\">192.168</span><span class=\"number\">.100</span><span class=\"number\">.111</span></span><br><span class=\"line\">    HostName <span class=\"number\">192.168</span><span class=\"number\">.100</span><span class=\"number\">.111</span></span><br><span class=\"line\">    User root</span><br><span class=\"line\">    IdentityFile <span class=\"string\">&quot;C:\\Users\\acmis\\.ssh\\id_rsa&quot;</span></span><br><span class=\"line\">Host <span class=\"number\">210.40</span><span class=\"number\">.16</span><span class=\"number\">.12</span></span><br><span class=\"line\">    HostName <span class=\"number\">210.40</span><span class=\"number\">.16</span><span class=\"number\">.12</span></span><br><span class=\"line\">    User root</span><br><span class=\"line\">    IdentityFile <span class=\"string\">&quot;C:\\Users\\acmis\\.ssh\\id_rsa&quot;</span></span><br><span class=\"line\">    Port <span class=\"number\">20949</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"ssh-免密登陆\">ssh 免密登陆</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen</span><br><span class=\"line\">cat ~/.ssh/id_rsa.pub </span><br></pre></td></tr></table></figure>\n<h2 id=\"配置运行参数\">配置运行参数</h2>\n<p><img src=\"/images/39dadb0fd0ab716a4e0e3598b8c4f1e59df95b56.png\" alt=\"Pasted image 20220423102729.png\"></p>\n<p><img src=\"/images/8bec12c6d52cc8ecf6af4886c1b3066044ea344a.png\" alt=\"Pasted image 20220423102312.png\">\\</p>\n<h2 id=\"查看问题\">查看问题</h2>\n<p><img src=\"/images/078f6cb7656f81f0563a397c6857aa0a62f50ceb.png\" alt=\"Pasted image 20220515201331.png\"></p>\n"},{"title":"实战5 - 6000 条倒闭企业处理与分析大屏","share":true,"date":"2022-06-27T14:57:37.000Z","updated":"2022-12-18T00:07:45.000Z","description":null,"daily":false,"createtime":"2022-06-26 16:14","category":"gzsxy","aliases":["实战5 - 6000 条倒闭企业处理与分析大屏"],"_content":"\n## 实验目标\n\n通过 UDI 处理企业数据，属性 UDI 的和 VA 的操作\n\n## 数据集\n\n6000 条倒闭企业数据集，总计 6,272 条记录，大小为 2.3 M，包含 21 个字段。：com.rar\n\n## 分析内容\n\n- 死亡公司的地区分布\n- 行业排行 TOP10\n- 年份分布\n","source":"_posts/实战5---6000-条倒闭企业处理与分析大屏.md","raw":"---\ntitle: 实战5 - 6000 条倒闭企业处理与分析大屏\nshare: true\ntags:\n  - public\n  - 培训材料/贵州商学院\ndate: 2022-06-27 22:57:37 \nupdated: 2022-12-18 08:07:45 \ndescription: \ndaily: false\ncreatetime: 2022-06-26 16:14\ncategory: gzsxy\ncategories:\n  - research\naliases:\n  - 实战5 - 6000 条倒闭企业处理与分析大屏\n---\n\n## 实验目标\n\n通过 UDI 处理企业数据，属性 UDI 的和 VA 的操作\n\n## 数据集\n\n6000 条倒闭企业数据集，总计 6,272 条记录，大小为 2.3 M，包含 21 个字段。：com.rar\n\n## 分析内容\n\n- 死亡公司的地区分布\n- 行业排行 TOP10\n- 年份分布\n","slug":"实战5---6000-条倒闭企业处理与分析大屏","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a8004u4cv98x519wz7","content":"<h2 id=\"实验目标\">实验目标</h2>\n<p>通过 UDI 处理企业数据，属性 UDI 的和 VA 的操作</p>\n<h2 id=\"数据集\">数据集</h2>\n<p>6000 条倒闭企业数据集，总计 6,272 条记录，大小为 2.3 M，包含 21 个字段。：com.rar</p>\n<h2 id=\"分析内容\">分析内容</h2>\n<ul>\n<li>死亡公司的地区分布</li>\n<li>行业排行 TOP10</li>\n<li>年份分布</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<h2 id=\"实验目标\">实验目标</h2>\n<p>通过 UDI 处理企业数据，属性 UDI 的和 VA 的操作</p>\n<h2 id=\"数据集\">数据集</h2>\n<p>6000 条倒闭企业数据集，总计 6,272 条记录，大小为 2.3 M，包含 21 个字段。：com.rar</p>\n<h2 id=\"分析内容\">分析内容</h2>\n<ul>\n<li>死亡公司的地区分布</li>\n<li>行业排行 TOP10</li>\n<li>年份分布</li>\n</ul>\n"},{"title":"商业数据分析-01-大纲","share":true,"date":"2022-10-24T05:15:09.000Z","updated":"2022-12-22T13:28:02.000Z","aliases":["商业数据分析-01-大纲"],"_content":"\n\n\n## Summary\n\n- 成绩说明\n\t- 实验成绩组成\n\t- 平时成绩\n\t- 课堂大作业\n\t- 补充说明\n- 商业数据分析中常见的技术\n\t- 商业数据分析中 4 大问题\n\t\t- （数据）获取\n\t\t- 处理\n\t\t- 分析\n\t\t- 建模\n\t- 实验课程解决什么问题\n\t- 数据获取技术\n\t\t- 什么是数据获取\n\t\t\t- 例子 1\n\t\t\t- 例子 2\n\t\t\t- 例子 3\n\t\t- 常用的数据获取方法\n\t\t\t- 数据库提取🤪⏰\n\t\t\t- 网页爬取🥶⏰\n\t\t\t- 用户填写🤪⏰\n\t\t\t- 表格读取🤪⏰\n\t\t\t- Optical Character Recognition, OCR（纸质、图片）🥶⏰\n\t\t\t- Web 爬虫🥶⏰\n\t\t- 例子 1:\n\t\t\t- 需求：获取国美网站中的手机数据，并保存为 csv 文件\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开网站\n\t\t\t\t\t- 选择需要获取的数据\n\t\t\t\t\t- 开始采集\n\t\t\t\t\t- 保存数据\n\t\t\t\t- 例子演示（现场）\n\t- 数据处理技术\n\t\t- 什么是数据处理技术\n\t\t\t- 例子 1\n\t\t\t- 例子 2\n\t\t\t- 例子 3\n\t\t- 常用的数据处理方法\n\t\t\t- 脚本处理（任何场景）\n\t\t\t- 专业软件（SPSS、Excel、Kettle）（特定场景）\n\t\t\t- 可视化编程（UDI）（特定场景）\n\t\t- 例子 2：\n\t\t\t- 需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开 UDI\n\t\t\t\t\t- 创建工作流\n\t\t\t\t\t- 运行\n\t\t\t\t\t- 查看结果\n\t\t\t\t- 例子演示（现场）\n\t\t- Why 可视化编程？Not Excel?\n\t\t\t- 场景不同\n\t\t\t\t- 如定时运行\n\t\t\t\t- 体量大（TB）\n\t\t\t\t- 运行时间长（>1H)\n\t\t\t\t- 需要支持多种数据源\n\t\t- 例子 3：\n\t\t\t- 需求：将数据中的价格字段变为数字，并存储为新表\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开 UDI\n\t\t\t\t\t- 创建工作流\n\t\t\t\t\t- 运行\n\t\t\t\t\t- 查看结果\n\t\t\t\t- 例子演示（现场）\n\t- 数据可视化技术\n\t\t- 什么是数据可视化技术\n\t\t\t- 例子 1\n\t\t\t- 例子 2\n\t\t\t- 例子 3\n\t\t- 常用可视化方案（法）\n\t\t\t- 脚本处理（任何场景）\n\t\t\t- 专业软件（Tableau、SPSS、PowerBI）（特定场景）\n\t\t\t- VA\n\t\t- 例子 4：\n\t\t\t- 需求：读取收集数据，并统计平均价格\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t\t- 编程（Plotly、Matplotlib、Seabon）\n\t\t\t\t- 专业软件（VA/PowerBI/Tableau/Spss）\n\t\t\t\t- 手画\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开 VA\n\t\t\t\t\t- 建立数据源\n\t\t\t\t\t- 创建数据集\n\t\t\t\t\t- 建立工作表\n\t\t\t\t- 例子演示（现场）\n\t- 数据建模技术\n\t\t- 什么是数据建模\n\t\t\t- 例子 1\n\t\t\t- 例子 2\n\t\t\t- 例子 3\n\t\t- 常用的建模工具\n\t\t\t- 脚本处理（任何场景）\n\t\t\t- 专业软件（SPSS、Excel、Kettle）（特定场景）\n\t\t\t- 可视化编程（UDI）（特定场景）\n\t\t- 例子 5：\n\t\t\t- 需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开 UDI\n\t\t\t\t\t- 创建工作流\n\t\t\t\t\t- 运行\n\t\t\t\t\t- 查看结果\n\t\t\t\t- 例子演示（现场）\n","source":"_posts/商业数据分析-01-大纲.md","raw":"---\ntitle: 商业数据分析-01-大纲\nshare: true\ntags:\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-10-24 13:15:09 \nupdated: 2022-12-22 21:28:02 \ncategories: [uncategory]\naliases:\n  - 商业数据分析-01-大纲\n---\n\n\n\n## Summary\n\n- 成绩说明\n\t- 实验成绩组成\n\t- 平时成绩\n\t- 课堂大作业\n\t- 补充说明\n- 商业数据分析中常见的技术\n\t- 商业数据分析中 4 大问题\n\t\t- （数据）获取\n\t\t- 处理\n\t\t- 分析\n\t\t- 建模\n\t- 实验课程解决什么问题\n\t- 数据获取技术\n\t\t- 什么是数据获取\n\t\t\t- 例子 1\n\t\t\t- 例子 2\n\t\t\t- 例子 3\n\t\t- 常用的数据获取方法\n\t\t\t- 数据库提取🤪⏰\n\t\t\t- 网页爬取🥶⏰\n\t\t\t- 用户填写🤪⏰\n\t\t\t- 表格读取🤪⏰\n\t\t\t- Optical Character Recognition, OCR（纸质、图片）🥶⏰\n\t\t\t- Web 爬虫🥶⏰\n\t\t- 例子 1:\n\t\t\t- 需求：获取国美网站中的手机数据，并保存为 csv 文件\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开网站\n\t\t\t\t\t- 选择需要获取的数据\n\t\t\t\t\t- 开始采集\n\t\t\t\t\t- 保存数据\n\t\t\t\t- 例子演示（现场）\n\t- 数据处理技术\n\t\t- 什么是数据处理技术\n\t\t\t- 例子 1\n\t\t\t- 例子 2\n\t\t\t- 例子 3\n\t\t- 常用的数据处理方法\n\t\t\t- 脚本处理（任何场景）\n\t\t\t- 专业软件（SPSS、Excel、Kettle）（特定场景）\n\t\t\t- 可视化编程（UDI）（特定场景）\n\t\t- 例子 2：\n\t\t\t- 需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开 UDI\n\t\t\t\t\t- 创建工作流\n\t\t\t\t\t- 运行\n\t\t\t\t\t- 查看结果\n\t\t\t\t- 例子演示（现场）\n\t\t- Why 可视化编程？Not Excel?\n\t\t\t- 场景不同\n\t\t\t\t- 如定时运行\n\t\t\t\t- 体量大（TB）\n\t\t\t\t- 运行时间长（>1H)\n\t\t\t\t- 需要支持多种数据源\n\t\t- 例子 3：\n\t\t\t- 需求：将数据中的价格字段变为数字，并存储为新表\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开 UDI\n\t\t\t\t\t- 创建工作流\n\t\t\t\t\t- 运行\n\t\t\t\t\t- 查看结果\n\t\t\t\t- 例子演示（现场）\n\t- 数据可视化技术\n\t\t- 什么是数据可视化技术\n\t\t\t- 例子 1\n\t\t\t- 例子 2\n\t\t\t- 例子 3\n\t\t- 常用可视化方案（法）\n\t\t\t- 脚本处理（任何场景）\n\t\t\t- 专业软件（Tableau、SPSS、PowerBI）（特定场景）\n\t\t\t- VA\n\t\t- 例子 4：\n\t\t\t- 需求：读取收集数据，并统计平均价格\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t\t- 编程（Plotly、Matplotlib、Seabon）\n\t\t\t\t- 专业软件（VA/PowerBI/Tableau/Spss）\n\t\t\t\t- 手画\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开 VA\n\t\t\t\t\t- 建立数据源\n\t\t\t\t\t- 创建数据集\n\t\t\t\t\t- 建立工作表\n\t\t\t\t- 例子演示（现场）\n\t- 数据建模技术\n\t\t- 什么是数据建模\n\t\t\t- 例子 1\n\t\t\t- 例子 2\n\t\t\t- 例子 3\n\t\t- 常用的建模工具\n\t\t\t- 脚本处理（任何场景）\n\t\t\t- 专业软件（SPSS、Excel、Kettle）（特定场景）\n\t\t\t- 可视化编程（UDI）（特定场景）\n\t\t- 例子 5：\n\t\t\t- 需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL\n\t\t\t- 有多少种方法解决这个问题？\n\t\t\t- 可能的方法列表\n\t\t\t- 典型例子说明\n\t\t\t\t- 基于什么技术\n\t\t\t\t\t- 技术特点\n\t\t\t\t\t- 为什么选这个技术\n\t\t\t\t- 流程说明（获取数据分为哪些步骤）\n\t\t\t\t\t- 打开 UDI\n\t\t\t\t\t- 创建工作流\n\t\t\t\t\t- 运行\n\t\t\t\t\t- 查看结果\n\t\t\t\t- 例子演示（现场）\n","slug":"商业数据分析-01-大纲","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70a9004x4cv93ohkgnm0","content":"<h2 id=\"Summary\">Summary</h2>\n<ul>\n<li>成绩说明\n<ul>\n<li>实验成绩组成</li>\n<li>平时成绩</li>\n<li>课堂大作业</li>\n<li>补充说明</li>\n</ul>\n</li>\n<li>商业数据分析中常见的技术\n<ul>\n<li>商业数据分析中 4 大问题\n<ul>\n<li>（数据）获取</li>\n<li>处理</li>\n<li>分析</li>\n<li>建模</li>\n</ul>\n</li>\n<li>实验课程解决什么问题</li>\n<li>数据获取技术\n<ul>\n<li>什么是数据获取\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的数据获取方法\n<ul>\n<li>数据库提取🤪⏰</li>\n<li>网页爬取🥶⏰</li>\n<li>用户填写🤪⏰</li>\n<li>表格读取🤪⏰</li>\n<li>Optical Character Recognition, OCR（纸质、图片）🥶⏰</li>\n<li>Web 爬虫🥶⏰</li>\n</ul>\n</li>\n<li>例子 1:\n<ul>\n<li>需求：获取国美网站中的手机数据，并保存为 csv 文件</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开网站</li>\n<li>选择需要获取的数据</li>\n<li>开始采集</li>\n<li>保存数据</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>数据处理技术\n<ul>\n<li>什么是数据处理技术\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的数据处理方法\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（SPSS、Excel、Kettle）（特定场景）</li>\n<li>可视化编程（UDI）（特定场景）</li>\n</ul>\n</li>\n<li>例子 2：\n<ul>\n<li>需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Why 可视化编程？Not Excel?\n<ul>\n<li>场景不同\n<ul>\n<li>如定时运行</li>\n<li>体量大（TB）</li>\n<li>运行时间长（&gt;1H)</li>\n<li>需要支持多种数据源</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>例子 3：\n<ul>\n<li>需求：将数据中的价格字段变为数字，并存储为新表</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>数据可视化技术\n<ul>\n<li>什么是数据可视化技术\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用可视化方案（法）\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（Tableau、SPSS、PowerBI）（特定场景）</li>\n<li>VA</li>\n</ul>\n</li>\n<li>例子 4：\n<ul>\n<li>需求：读取收集数据，并统计平均价格</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表\n<ul>\n<li>编程（Plotly、Matplotlib、Seabon）</li>\n<li>专业软件（VA/PowerBI/Tableau/Spss）</li>\n<li>手画</li>\n</ul>\n</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 VA</li>\n<li>建立数据源</li>\n<li>创建数据集</li>\n<li>建立工作表</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>数据建模技术\n<ul>\n<li>什么是数据建模\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的建模工具\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（SPSS、Excel、Kettle）（特定场景）</li>\n<li>可视化编程（UDI）（特定场景）</li>\n</ul>\n</li>\n<li>例子 5：\n<ul>\n<li>需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<h2 id=\"Summary\">Summary</h2>\n<ul>\n<li>成绩说明\n<ul>\n<li>实验成绩组成</li>\n<li>平时成绩</li>\n<li>课堂大作业</li>\n<li>补充说明</li>\n</ul>\n</li>\n<li>商业数据分析中常见的技术\n<ul>\n<li>商业数据分析中 4 大问题\n<ul>\n<li>（数据）获取</li>\n<li>处理</li>\n<li>分析</li>\n<li>建模</li>\n</ul>\n</li>\n<li>实验课程解决什么问题</li>\n<li>数据获取技术\n<ul>\n<li>什么是数据获取\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的数据获取方法\n<ul>\n<li>数据库提取🤪⏰</li>\n<li>网页爬取🥶⏰</li>\n<li>用户填写🤪⏰</li>\n<li>表格读取🤪⏰</li>\n<li>Optical Character Recognition, OCR（纸质、图片）🥶⏰</li>\n<li>Web 爬虫🥶⏰</li>\n</ul>\n</li>\n<li>例子 1:\n<ul>\n<li>需求：获取国美网站中的手机数据，并保存为 csv 文件</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开网站</li>\n<li>选择需要获取的数据</li>\n<li>开始采集</li>\n<li>保存数据</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>数据处理技术\n<ul>\n<li>什么是数据处理技术\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的数据处理方法\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（SPSS、Excel、Kettle）（特定场景）</li>\n<li>可视化编程（UDI）（特定场景）</li>\n</ul>\n</li>\n<li>例子 2：\n<ul>\n<li>需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Why 可视化编程？Not Excel?\n<ul>\n<li>场景不同\n<ul>\n<li>如定时运行</li>\n<li>体量大（TB）</li>\n<li>运行时间长（&gt;1H)</li>\n<li>需要支持多种数据源</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>例子 3：\n<ul>\n<li>需求：将数据中的价格字段变为数字，并存储为新表</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>数据可视化技术\n<ul>\n<li>什么是数据可视化技术\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用可视化方案（法）\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（Tableau、SPSS、PowerBI）（特定场景）</li>\n<li>VA</li>\n</ul>\n</li>\n<li>例子 4：\n<ul>\n<li>需求：读取收集数据，并统计平均价格</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表\n<ul>\n<li>编程（Plotly、Matplotlib、Seabon）</li>\n<li>专业软件（VA/PowerBI/Tableau/Spss）</li>\n<li>手画</li>\n</ul>\n</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 VA</li>\n<li>建立数据源</li>\n<li>创建数据集</li>\n<li>建立工作表</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>数据建模技术\n<ul>\n<li>什么是数据建模\n<ul>\n<li>例子 1</li>\n<li>例子 2</li>\n<li>例子 3</li>\n</ul>\n</li>\n<li>常用的建模工具\n<ul>\n<li>脚本处理（任何场景）</li>\n<li>专业软件（SPSS、Excel、Kettle）（特定场景）</li>\n<li>可视化编程（UDI）（特定场景）</li>\n</ul>\n</li>\n<li>例子 5：\n<ul>\n<li>需求：将（爬取的）手机数据 (CSV) 中的数据保存到 MySQL</li>\n<li>有多少种方法解决这个问题？</li>\n<li>可能的方法列表</li>\n<li>典型例子说明\n<ul>\n<li>基于什么技术\n<ul>\n<li>技术特点</li>\n<li>为什么选这个技术</li>\n</ul>\n</li>\n<li>流程说明（获取数据分为哪些步骤）\n<ul>\n<li>打开 UDI</li>\n<li>创建工作流</li>\n<li>运行</li>\n<li>查看结果</li>\n</ul>\n</li>\n<li>例子演示（现场）</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"学习时间总结","share":true,"date":"2022-12-22T12:33:41.000Z","updated":"2022-12-22T12:39:27.000Z","_content":"\n本文截取 `ActivityWatch` 电脑用时快照 (基于周):\n\n- <a href='{% post_path 2022-第49周 %}'>2022-第49周</a>\n- <a href='{% post_path 2022-第50周 %}'>2022-第50周</a>\n","source":"_posts/学习时间总结.md","raw":"---\ntitle: 学习时间总结\nshare: true\ntags:\n  - 学习快照\ndate: 2022-12-22 20:33:41 \nupdated: 2022-12-22 20:39:27 \ncategories: research\n---\n\n本文截取 `ActivityWatch` 电脑用时快照 (基于周):\n\n- <a href='{% post_path 2022-第49周 %}'>2022-第49周</a>\n- <a href='{% post_path 2022-第50周 %}'>2022-第50周</a>\n","slug":"学习时间总结","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70aa00504cv9gjgb3buf","content":"<p>本文截取 <code>ActivityWatch</code> 电脑用时快照 (基于周):</p>\n<ul>\n<li><a href='/research/3947d981b5aa.html'>2022-第49周</a></li>\n<li><a href='/research/4bd91ade298a.html'>2022-第50周</a></li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover7.JPG","excerpt":"","more":"<p>本文截取 <code>ActivityWatch</code> 电脑用时快照 (基于周):</p>\n<ul>\n<li><a href='/research/3947d981b5aa.html'>2022-第49周</a></li>\n<li><a href='/research/4bd91ade298a.html'>2022-第50周</a></li>\n</ul>\n"},{"title":"实战5 - VA HelloWorld  之可视化图表的制作","share":true,"date":"2022-06-21T13:20:22.000Z","updated":"2022-12-18T00:07:45.000Z","_content":"","source":"_posts/实战5---VA-HelloWorld--之可视化图表的制作.md","raw":"---\ntitle: 实战5 - VA HelloWorld  之可视化图表的制作\nshare: true\ntags:\n  - uncategory\ndate: 2022-06-21 21:20:22 \nupdated: 2022-12-18 08:07:45 \ncategories:\n  - research\n---\n","slug":"实战5---VA-HelloWorld--之可视化图表的制作","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70aa00534cv935u64yku","content":"","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover1.JPG","excerpt":"","more":""},{"title":"实战5 - VA HelloWorld  之的制作","share":true,"date":"2022-06-21T13:19:51.000Z","updated":"2022-12-18T00:07:45.000Z","_content":"","source":"_posts/实战5---VA-HelloWorld--之的制作.md","raw":"---\ntitle: 实战5 - VA HelloWorld  之的制作\nshare: true\ntags:\n  - uncategory\ndate: 2022-06-21 21:19:51 \nupdated: 2022-12-18 08:07:45 \ncategories:\n  - research\n---\n","slug":"实战5---VA-HelloWorld--之的制作","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70aa00564cv974jn030v","content":"","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover2.jpg","excerpt":"","more":""},{"title":"实验列表","share":true,"date":"2023-01-05T02:37:56.000Z","updated":"2023-01-05T02:38:39.000Z","_content":"## 说明\n\n本文记载已做过的实验报告.\n\n- <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>\n- <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>\n- <a href='{% post_path 2022-12-09-实验设计 %}'>2022-12-09-实验设计</a>\n- <a href='{% post_path 2022-12-17-实验设计 %}'>2022-12-17-实验设计</a>\n- <a href='{% post_path 2022-12-30-实验结果 %}'>2022-12-30-实验结果</a>\n- <a href='{% post_path 2023-01-02-AIOps-的29个KPI在-COCA-模型上的性能分析 %}'>2023-01-02-AIOps-的29个KPI在-COCA-模型上的性能分析</a>\n","source":"_posts/实验列表.md","raw":"---\ntitle: 实验列表\nshare: true\ndate: 2023-01-05 10:37:56 \nupdated: 2023-01-05 10:38:39 \ncategories: research\n---\n## 说明\n\n本文记载已做过的实验报告.\n\n- <a href='{% post_path 2022-11-25-实验结果 %}'>2022-11-25-实验结果</a>\n- <a href='{% post_path 2022-11-26-实验结果 %}'>2022-11-26-实验结果</a>\n- <a href='{% post_path 2022-12-09-实验设计 %}'>2022-12-09-实验设计</a>\n- <a href='{% post_path 2022-12-17-实验设计 %}'>2022-12-17-实验设计</a>\n- <a href='{% post_path 2022-12-30-实验结果 %}'>2022-12-30-实验结果</a>\n- <a href='{% post_path 2023-01-02-AIOps-的29个KPI在-COCA-模型上的性能分析 %}'>2023-01-02-AIOps-的29个KPI在-COCA-模型上的性能分析</a>\n","slug":"实验列表","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ab00594cv90any7xvy","content":"<h2 id=\"说明\">说明</h2>\n<p>本文记载已做过的实验报告.</p>\n<ul>\n<li><a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a></li>\n<li><a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a></li>\n<li><a href=''>2022-12-09-实验设计</a></li>\n<li><a href='/research/b1ff1c2fb075.html'>2022-12-17-实验设计</a></li>\n<li><a href='/research/0efa46192bde.html'>2022-12-30-实验结果</a></li>\n<li><a href='/research/ef9cce2e6cf2.html'>2023-01-02-AIOps-的29个KPI在-COCA-模型上的性能分析</a></li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<h2 id=\"说明\">说明</h2>\n<p>本文记载已做过的实验报告.</p>\n<ul>\n<li><a href='/research/814aa12f99a1.html'>2022-11-25-实验结果</a></li>\n<li><a href='/research/a02d51abd77d.html'>2022-11-26-实验结果</a></li>\n<li><a href=''>2022-12-09-实验设计</a></li>\n<li><a href='/research/b1ff1c2fb075.html'>2022-12-17-实验设计</a></li>\n<li><a href='/research/0efa46192bde.html'>2022-12-30-实验结果</a></li>\n<li><a href='/research/ef9cce2e6cf2.html'>2023-01-02-AIOps-的29个KPI在-COCA-模型上的性能分析</a></li>\n</ul>\n"},{"title":"文档提交审核流程,自查流程","share":true,"date":"2022-08-24T03:58:10.000Z","updated":"2022-12-22T03:39:23.000Z","_content":"\n\n\n## Summary\n\n文档再提交给老师之前, **必须通过下面的审核**.\n\n1. 先读三遍, 能通过再说\n2. 论文中表格内容，读者能否直接看懂\n3. 每个表格的实验目的\n4. 题目：Automatically Identifying the Optimal Hyperparameter for XXX\nDonut 只是 xxx 的一种代表性技术，要在题目中体现出 xxX 的技术问题本质。\n5. <a href='{% post_path 2022年7月16日-开会内容总结提炼 %}'>2022年7月16日-开会内容总结提炼</a>\n\n## 实验部分\n- **实验配置** 写了吗 (实验目的 + 实验设置 + 实验结果 + 实验分析)\n\n## 实验设计\n- 为什么运行在一个 3G 内存的板子上\n- 为什么运行在 ARM CPU 上\n- 实验如何支撑你的论文\n\n## PPT\n\n- 是否包含当前页数/总页数\n\n## 其他\n- 工作名称要写清楚\n- 把要验证的东西定义清楚\n- 模型表现不好不能说明它存在问题,只能说明模型的能力不好\n- 什么是科学问题?\n\t- 我设计了个多维索引，解决了多维数据的快速存取问题，这就是一个技术工作  \n- 它的问题就是现有的 KD 树索引进行多维存取的时候，对于大量数据的多维索引，对大量数据进行多维存取时候性能慢，这是一个基础问题。\n- 工作的主题到底是什么?要做的事情和主题关联上.\n- 实验以验证什么性质，在什么情况下是不成立的\n- 根据 xxx 实验, 我们能够得到什么样的结论\n\n## 拿到一份方向\n- 广度\n- 深度\n- 时间线上 <u>梳理出</u> **研究方向上** 的变化\n\n## 其他\n- 读论文不算时间\n","source":"_posts/文档提交审核流程,自查流程.md","raw":"---\ntitle: 文档提交审核流程,自查流程\nshare: true\ntags:\n  - uncategory\ndate: 2022-08-24 11:58:10 \nupdated: 2022-12-22 11:39:23 \ncategories: research\n---\n\n\n\n## Summary\n\n文档再提交给老师之前, **必须通过下面的审核**.\n\n1. 先读三遍, 能通过再说\n2. 论文中表格内容，读者能否直接看懂\n3. 每个表格的实验目的\n4. 题目：Automatically Identifying the Optimal Hyperparameter for XXX\nDonut 只是 xxx 的一种代表性技术，要在题目中体现出 xxX 的技术问题本质。\n5. <a href='{% post_path 2022年7月16日-开会内容总结提炼 %}'>2022年7月16日-开会内容总结提炼</a>\n\n## 实验部分\n- **实验配置** 写了吗 (实验目的 + 实验设置 + 实验结果 + 实验分析)\n\n## 实验设计\n- 为什么运行在一个 3G 内存的板子上\n- 为什么运行在 ARM CPU 上\n- 实验如何支撑你的论文\n\n## PPT\n\n- 是否包含当前页数/总页数\n\n## 其他\n- 工作名称要写清楚\n- 把要验证的东西定义清楚\n- 模型表现不好不能说明它存在问题,只能说明模型的能力不好\n- 什么是科学问题?\n\t- 我设计了个多维索引，解决了多维数据的快速存取问题，这就是一个技术工作  \n- 它的问题就是现有的 KD 树索引进行多维存取的时候，对于大量数据的多维索引，对大量数据进行多维存取时候性能慢，这是一个基础问题。\n- 工作的主题到底是什么?要做的事情和主题关联上.\n- 实验以验证什么性质，在什么情况下是不成立的\n- 根据 xxx 实验, 我们能够得到什么样的结论\n\n## 拿到一份方向\n- 广度\n- 深度\n- 时间线上 <u>梳理出</u> **研究方向上** 的变化\n\n## 其他\n- 读论文不算时间\n","slug":"文档提交审核流程,自查流程","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ab005c4cv9fu501thc","content":"<h2 id=\"Summary\">Summary</h2>\n<p>文档再提交给老师之前, <strong>必须通过下面的审核</strong>.</p>\n<ol>\n<li>先读三遍, 能通过再说</li>\n<li>论文中表格内容，读者能否直接看懂</li>\n<li>每个表格的实验目的</li>\n<li>题目：Automatically Identifying the Optimal Hyperparameter for XXX<br>\nDonut 只是 xxx 的一种代表性技术，要在题目中体现出 xxX 的技术问题本质。</li>\n<li><a href=''>2022年7月16日-开会内容总结提炼</a></li>\n</ol>\n<h2 id=\"实验部分\">实验部分</h2>\n<ul>\n<li><strong>实验配置</strong> 写了吗 (实验目的 + 实验设置 + 实验结果 + 实验分析)</li>\n</ul>\n<h2 id=\"实验设计\">实验设计</h2>\n<ul>\n<li>为什么运行在一个 3G 内存的板子上</li>\n<li>为什么运行在 ARM CPU 上</li>\n<li>实验如何支撑你的论文</li>\n</ul>\n<h2 id=\"PPT\">PPT</h2>\n<ul>\n<li>是否包含当前页数/总页数</li>\n</ul>\n<h2 id=\"其他\">其他</h2>\n<ul>\n<li>工作名称要写清楚</li>\n<li>把要验证的东西定义清楚</li>\n<li>模型表现不好不能说明它存在问题,只能说明模型的能力不好</li>\n<li>什么是科学问题?\n<ul>\n<li>我设计了个多维索引，解决了多维数据的快速存取问题，这就是一个技术工作</li>\n</ul>\n</li>\n<li>它的问题就是现有的 KD 树索引进行多维存取的时候，对于大量数据的多维索引，对大量数据进行多维存取时候性能慢，这是一个基础问题。</li>\n<li>工作的主题到底是什么?要做的事情和主题关联上.</li>\n<li>实验以验证什么性质，在什么情况下是不成立的</li>\n<li>根据 xxx 实验, 我们能够得到什么样的结论</li>\n</ul>\n<h2 id=\"拿到一份方向\">拿到一份方向</h2>\n<ul>\n<li>广度</li>\n<li>深度</li>\n<li>时间线上 <u>梳理出</u> <strong>研究方向上</strong> 的变化</li>\n</ul>\n<h2 id=\"其他-2\">其他</h2>\n<ul>\n<li>读论文不算时间</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover5.JPG","excerpt":"","more":"<h2 id=\"Summary\">Summary</h2>\n<p>文档再提交给老师之前, <strong>必须通过下面的审核</strong>.</p>\n<ol>\n<li>先读三遍, 能通过再说</li>\n<li>论文中表格内容，读者能否直接看懂</li>\n<li>每个表格的实验目的</li>\n<li>题目：Automatically Identifying the Optimal Hyperparameter for XXX<br>\nDonut 只是 xxx 的一种代表性技术，要在题目中体现出 xxX 的技术问题本质。</li>\n<li><a href=''>2022年7月16日-开会内容总结提炼</a></li>\n</ol>\n<h2 id=\"实验部分\">实验部分</h2>\n<ul>\n<li><strong>实验配置</strong> 写了吗 (实验目的 + 实验设置 + 实验结果 + 实验分析)</li>\n</ul>\n<h2 id=\"实验设计\">实验设计</h2>\n<ul>\n<li>为什么运行在一个 3G 内存的板子上</li>\n<li>为什么运行在 ARM CPU 上</li>\n<li>实验如何支撑你的论文</li>\n</ul>\n<h2 id=\"PPT\">PPT</h2>\n<ul>\n<li>是否包含当前页数/总页数</li>\n</ul>\n<h2 id=\"其他\">其他</h2>\n<ul>\n<li>工作名称要写清楚</li>\n<li>把要验证的东西定义清楚</li>\n<li>模型表现不好不能说明它存在问题,只能说明模型的能力不好</li>\n<li>什么是科学问题?\n<ul>\n<li>我设计了个多维索引，解决了多维数据的快速存取问题，这就是一个技术工作</li>\n</ul>\n</li>\n<li>它的问题就是现有的 KD 树索引进行多维存取的时候，对于大量数据的多维索引，对大量数据进行多维存取时候性能慢，这是一个基础问题。</li>\n<li>工作的主题到底是什么?要做的事情和主题关联上.</li>\n<li>实验以验证什么性质，在什么情况下是不成立的</li>\n<li>根据 xxx 实验, 我们能够得到什么样的结论</li>\n</ul>\n<h2 id=\"拿到一份方向\">拿到一份方向</h2>\n<ul>\n<li>广度</li>\n<li>深度</li>\n<li>时间线上 <u>梳理出</u> <strong>研究方向上</strong> 的变化</li>\n</ul>\n<h2 id=\"其他-2\">其他</h2>\n<ul>\n<li>读论文不算时间</li>\n</ul>\n"},{"title":"数智教育 数据可视化创新大赛 数据分析","share":true,"date":"2022-11-14T06:53:52.000Z","updated":"2022-12-22T13:28:09.000Z","aliases":["数智教育 数据可视化创新大赛 数据分析"],"_content":"\n## 基本信息\n\n比赛信息: <https://tianchi.aliyun.com/competition/entrance/231704/information>  \n[数据集下载](https://github.com/wu-uw/tianchi-shuzhijiaoyu)\n\n### 数据集基本信息\n\n7 个 `.csv` 文件, 包括学生/教师/考试等信息, 文件列表:\n\n```python\n1_teacher.csv \n2_student_info.csv\n3_kaoqin.csv\n4_kaoqintype.csv\n5_chengji.csv\n6_exam_type.csv\n7_consumption.csv\n```\n\n数据说明: `《数智教育》数仓说明.pdf`\n\n表关系数理:\n\n![Excalidraw/“数智教育”数据可视化创新大赛 数据分析 2022-11-14 15.08.04.excalidraw](/images/2ce72ec2dc4e3f22fb99172650b7917e0c692bbd.png)\n\n## 分析点\n\n- 男生周总消费, 女生周总消费 (双轴折线图)\n\t- x: 月份\n\t- y1: 男生总消费\n\t- y2: 女生总消费\n- 统计每个班级作弊人数\n\t- x: 班级\n\t- y: 作弊人数\n- 平均成绩最高的三个班\n\t- x: 班级\n\t- y: 平均成绩\n- 总消费 TOP10 的学生\n\t- x: 学生姓名\n\t- y: 总消费\n- ….\n\n## 成果预估\n\n成果中包含了整个数据仓库的内容  \n![Excalidraw/数智教育 数据可视化创新大赛 数据分析 2022-11-14 15.40.38.excalidraw](/images/8bb20a5845cc8e19b4d3815e54a28ec6a183c777.png)\n\n## 数据学生平均成绩\n\n```sql\nselect tmp.*,bf_Name from (select mes_StudentID, avg(mes_Score) as ave_score\n      from ods_chengji\n               left join ods_student_info on ods_chengji.mes_StudentID = ods_student_info.bf_studentid\n      group by mes_StudentID) as tmp\n    left join ods_student_info on tmp.mes_StudentID=ods_student_info.bf_StudentID where ods_student_info.bf_Name !=''\n```\n\n执行结果:  \n![static/attachment/Pasted image 20221121141312.png](/images/1b1e89cdf915e9f65674687924ace1a5670a2bda.png)\n\n例子  \n<https://uniplore.feishu.cn/drive/folder/fldcnHPNtoxz3qZlq676vbdGxbz?from=space_persnoal_filelist>  \n<https://uniplore.feishu.cn/drive/folder/fldcnxHFhAY7zUPN95NQD8aeKZg>\n","source":"_posts/数智教育-数据可视化创新大赛-数据分析.md","raw":"---\ntitle: 数智教育 数据可视化创新大赛 数据分析\nshare: true\ntags:\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-11-14 14:53:52 \nupdated: 2022-12-22 21:28:09 \ncategories: [uncategory]\naliases:\n  - 数智教育 数据可视化创新大赛 数据分析\n---\n\n## 基本信息\n\n比赛信息: <https://tianchi.aliyun.com/competition/entrance/231704/information>  \n[数据集下载](https://github.com/wu-uw/tianchi-shuzhijiaoyu)\n\n### 数据集基本信息\n\n7 个 `.csv` 文件, 包括学生/教师/考试等信息, 文件列表:\n\n```python\n1_teacher.csv \n2_student_info.csv\n3_kaoqin.csv\n4_kaoqintype.csv\n5_chengji.csv\n6_exam_type.csv\n7_consumption.csv\n```\n\n数据说明: `《数智教育》数仓说明.pdf`\n\n表关系数理:\n\n![Excalidraw/“数智教育”数据可视化创新大赛 数据分析 2022-11-14 15.08.04.excalidraw](/images/2ce72ec2dc4e3f22fb99172650b7917e0c692bbd.png)\n\n## 分析点\n\n- 男生周总消费, 女生周总消费 (双轴折线图)\n\t- x: 月份\n\t- y1: 男生总消费\n\t- y2: 女生总消费\n- 统计每个班级作弊人数\n\t- x: 班级\n\t- y: 作弊人数\n- 平均成绩最高的三个班\n\t- x: 班级\n\t- y: 平均成绩\n- 总消费 TOP10 的学生\n\t- x: 学生姓名\n\t- y: 总消费\n- ….\n\n## 成果预估\n\n成果中包含了整个数据仓库的内容  \n![Excalidraw/数智教育 数据可视化创新大赛 数据分析 2022-11-14 15.40.38.excalidraw](/images/8bb20a5845cc8e19b4d3815e54a28ec6a183c777.png)\n\n## 数据学生平均成绩\n\n```sql\nselect tmp.*,bf_Name from (select mes_StudentID, avg(mes_Score) as ave_score\n      from ods_chengji\n               left join ods_student_info on ods_chengji.mes_StudentID = ods_student_info.bf_studentid\n      group by mes_StudentID) as tmp\n    left join ods_student_info on tmp.mes_StudentID=ods_student_info.bf_StudentID where ods_student_info.bf_Name !=''\n```\n\n执行结果:  \n![static/attachment/Pasted image 20221121141312.png](/images/1b1e89cdf915e9f65674687924ace1a5670a2bda.png)\n\n例子  \n<https://uniplore.feishu.cn/drive/folder/fldcnHPNtoxz3qZlq676vbdGxbz?from=space_persnoal_filelist>  \n<https://uniplore.feishu.cn/drive/folder/fldcnxHFhAY7zUPN95NQD8aeKZg>\n","slug":"数智教育-数据可视化创新大赛-数据分析","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ab005f4cv9b48lappr","content":"<h2 id=\"基本信息\">基本信息</h2>\n<p>比赛信息: <a href=\"https://tianchi.aliyun.com/competition/entrance/231704/information\">https://tianchi.aliyun.com/competition/entrance/231704/information</a><br>\n<a href=\"https://github.com/wu-uw/tianchi-shuzhijiaoyu\">数据集下载</a></p>\n<h3 id=\"数据集基本信息\">数据集基本信息</h3>\n<p>7 个 <code>.csv</code> 文件, 包括学生/教师/考试等信息, 文件列表:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1_teacher.csv </span><br><span class=\"line\">2_student_info.csv</span><br><span class=\"line\">3_kaoqin.csv</span><br><span class=\"line\">4_kaoqintype.csv</span><br><span class=\"line\">5_chengji.csv</span><br><span class=\"line\">6_exam_type.csv</span><br><span class=\"line\">7_consumption.csv</span><br></pre></td></tr></table></figure>\n<p>数据说明: <code>《数智教育》数仓说明.pdf</code></p>\n<p>表关系数理:</p>\n<p><img src=\"/images/2ce72ec2dc4e3f22fb99172650b7917e0c692bbd.png\" alt=\"Excalidraw/“数智教育”数据可视化创新大赛 数据分析 2022-11-14 15.08.04.excalidraw\"></p>\n<h2 id=\"分析点\">分析点</h2>\n<ul>\n<li>男生周总消费, 女生周总消费 (双轴折线图)\n<ul>\n<li>x: 月份</li>\n<li>y1: 男生总消费</li>\n<li>y2: 女生总消费</li>\n</ul>\n</li>\n<li>统计每个班级作弊人数\n<ul>\n<li>x: 班级</li>\n<li>y: 作弊人数</li>\n</ul>\n</li>\n<li>平均成绩最高的三个班\n<ul>\n<li>x: 班级</li>\n<li>y: 平均成绩</li>\n</ul>\n</li>\n<li>总消费 TOP10 的学生\n<ul>\n<li>x: 学生姓名</li>\n<li>y: 总消费</li>\n</ul>\n</li>\n<li>….</li>\n</ul>\n<h2 id=\"成果预估\">成果预估</h2>\n<p>成果中包含了整个数据仓库的内容<br>\n<img src=\"/images/8bb20a5845cc8e19b4d3815e54a28ec6a183c777.png\" alt=\"Excalidraw/数智教育 数据可视化创新大赛 数据分析 2022-11-14 15.40.38.excalidraw\"></p>\n<h2 id=\"数据学生平均成绩\">数据学生平均成绩</h2>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> tmp.<span class=\"operator\">*</span>,bf_Name <span class=\"keyword\">from</span> (<span class=\"keyword\">select</span> mes_StudentID, <span class=\"built_in\">avg</span>(mes_Score) <span class=\"keyword\">as</span> ave_score</span><br><span class=\"line\">      <span class=\"keyword\">from</span> ods_chengji</span><br><span class=\"line\">               <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> ods_student_info <span class=\"keyword\">on</span> ods_chengji.mes_StudentID <span class=\"operator\">=</span> ods_student_info.bf_studentid</span><br><span class=\"line\">      <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> mes_StudentID) <span class=\"keyword\">as</span> tmp</span><br><span class=\"line\">    <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> ods_student_info <span class=\"keyword\">on</span> tmp.mes_StudentID<span class=\"operator\">=</span>ods_student_info.bf_StudentID <span class=\"keyword\">where</span> ods_student_info.bf_Name <span class=\"operator\">!=</span><span class=\"string\">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>\n<p>执行结果:<br>\n<img src=\"/images/1b1e89cdf915e9f65674687924ace1a5670a2bda.png\" alt=\"static/attachment/Pasted image 20221121141312.png\"></p>\n<p>例子<br>\n<a href=\"https://uniplore.feishu.cn/drive/folder/fldcnHPNtoxz3qZlq676vbdGxbz?from=space_persnoal_filelist\">https://uniplore.feishu.cn/drive/folder/fldcnHPNtoxz3qZlq676vbdGxbz?from=space_persnoal_filelist</a><br>\n<a href=\"https://uniplore.feishu.cn/drive/folder/fldcnxHFhAY7zUPN95NQD8aeKZg\">https://uniplore.feishu.cn/drive/folder/fldcnxHFhAY7zUPN95NQD8aeKZg</a></p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover8.JPG","excerpt":"","more":"<h2 id=\"基本信息\">基本信息</h2>\n<p>比赛信息: <a href=\"https://tianchi.aliyun.com/competition/entrance/231704/information\">https://tianchi.aliyun.com/competition/entrance/231704/information</a><br>\n<a href=\"https://github.com/wu-uw/tianchi-shuzhijiaoyu\">数据集下载</a></p>\n<h3 id=\"数据集基本信息\">数据集基本信息</h3>\n<p>7 个 <code>.csv</code> 文件, 包括学生/教师/考试等信息, 文件列表:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1_teacher.csv </span><br><span class=\"line\">2_student_info.csv</span><br><span class=\"line\">3_kaoqin.csv</span><br><span class=\"line\">4_kaoqintype.csv</span><br><span class=\"line\">5_chengji.csv</span><br><span class=\"line\">6_exam_type.csv</span><br><span class=\"line\">7_consumption.csv</span><br></pre></td></tr></table></figure>\n<p>数据说明: <code>《数智教育》数仓说明.pdf</code></p>\n<p>表关系数理:</p>\n<p><img src=\"/images/2ce72ec2dc4e3f22fb99172650b7917e0c692bbd.png\" alt=\"Excalidraw/“数智教育”数据可视化创新大赛 数据分析 2022-11-14 15.08.04.excalidraw\"></p>\n<h2 id=\"分析点\">分析点</h2>\n<ul>\n<li>男生周总消费, 女生周总消费 (双轴折线图)\n<ul>\n<li>x: 月份</li>\n<li>y1: 男生总消费</li>\n<li>y2: 女生总消费</li>\n</ul>\n</li>\n<li>统计每个班级作弊人数\n<ul>\n<li>x: 班级</li>\n<li>y: 作弊人数</li>\n</ul>\n</li>\n<li>平均成绩最高的三个班\n<ul>\n<li>x: 班级</li>\n<li>y: 平均成绩</li>\n</ul>\n</li>\n<li>总消费 TOP10 的学生\n<ul>\n<li>x: 学生姓名</li>\n<li>y: 总消费</li>\n</ul>\n</li>\n<li>….</li>\n</ul>\n<h2 id=\"成果预估\">成果预估</h2>\n<p>成果中包含了整个数据仓库的内容<br>\n<img src=\"/images/8bb20a5845cc8e19b4d3815e54a28ec6a183c777.png\" alt=\"Excalidraw/数智教育 数据可视化创新大赛 数据分析 2022-11-14 15.40.38.excalidraw\"></p>\n<h2 id=\"数据学生平均成绩\">数据学生平均成绩</h2>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">select</span> tmp.<span class=\"operator\">*</span>,bf_Name <span class=\"keyword\">from</span> (<span class=\"keyword\">select</span> mes_StudentID, <span class=\"built_in\">avg</span>(mes_Score) <span class=\"keyword\">as</span> ave_score</span><br><span class=\"line\">      <span class=\"keyword\">from</span> ods_chengji</span><br><span class=\"line\">               <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> ods_student_info <span class=\"keyword\">on</span> ods_chengji.mes_StudentID <span class=\"operator\">=</span> ods_student_info.bf_studentid</span><br><span class=\"line\">      <span class=\"keyword\">group</span> <span class=\"keyword\">by</span> mes_StudentID) <span class=\"keyword\">as</span> tmp</span><br><span class=\"line\">    <span class=\"keyword\">left</span> <span class=\"keyword\">join</span> ods_student_info <span class=\"keyword\">on</span> tmp.mes_StudentID<span class=\"operator\">=</span>ods_student_info.bf_StudentID <span class=\"keyword\">where</span> ods_student_info.bf_Name <span class=\"operator\">!=</span><span class=\"string\">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>\n<p>执行结果:<br>\n<img src=\"/images/1b1e89cdf915e9f65674687924ace1a5670a2bda.png\" alt=\"static/attachment/Pasted image 20221121141312.png\"></p>\n<p>例子<br>\n<a href=\"https://uniplore.feishu.cn/drive/folder/fldcnHPNtoxz3qZlq676vbdGxbz?from=space_persnoal_filelist\">https://uniplore.feishu.cn/drive/folder/fldcnHPNtoxz3qZlq676vbdGxbz?from=space_persnoal_filelist</a><br>\n<a href=\"https://uniplore.feishu.cn/drive/folder/fldcnxHFhAY7zUPN95NQD8aeKZg\">https://uniplore.feishu.cn/drive/folder/fldcnxHFhAY7zUPN95NQD8aeKZg</a></p>\n"},{"title":"时间序列(源于coca)中的 time step","share":true,"date":"2023-01-05T02:03:57.000Z","updated":"2023-01-05T02:41:50.000Z","_content":"\n## 问题\n\ncoca 中 time_step 为 2 时, 如何计算 score?\n\n### 小结\n\n❓time_step 的作用是什么?\n\ntime_step 的作用: 决定下一窗口数据的起点. 假设数据是 `[0 1 2 3 4 5 6 7 8 9]`, 滑动窗口是 4 (下面的例子 ):\n\n![Excalidraw/COCA源码分析 2023-01-05 09.37.53.excalidraw](/images/ff9b6413ac39b2772ebd08fce73ccb7fb34fb335.png)\n\n❓窗口异常如何定?\n\n🔑 每个窗口中的前 `time_step` 个数据是异常, 那么这个窗口就是异常.\n\n### 分析\n\n是用后一个值填充前一个?\n\n🔑 判断窗口中的前 time_step 是否包含异常, 如果为异常, 那么这个窗口就是异常. 问题转换为求滑动窗口的异常, 那如何求呢?\n\n![Excalidraw/COCA源码分析 2023-01-04 09.18.29.excalidraw](/images/38f1861cf25f0abe9326ad9a519a9370c1dcc052.png)\n\n分为两步来求:\n\n- 计算 `subsequences(train_time_series, configs.window_size, configs.time_step)`\n- 计算窗口异常\n\n计算窗口异常:\n\n```python\n for i, item in enumerate(train_y[:]):\n        if sum(item[:configs.time_step]) >= 1:\n            train_anomaly_window_num += 1\n            train_y_window[i] = 1\n        else:\n            train_y_window[i] = 0 \n```\n\n### 源码分析: subsequences 怎么求\n\n直接跑代码看结果:\n\n- 数据 `sequence = np.arange(10)`\n- 函数定义 `def subsequences(sequence, window_size, time_step)`\n\n```python\n# data: [0 1 2 3 4 5 6 7 8 9]\n\n================================================================\n========== \t subsequences(data,4,1 )\n================================================================\n<a href='{% post_path 0-1-2-3]--[1-2-3-4]--[2-3-4-5]--[3-4-5-6]--[4-5-6-7]--[5-6-7-8]--[6-7-8-9 %}'>0-1-2-3]--[1-2-3-4]--[2-3-4-5]--[3-4-5-6]--[4-5-6-7]--[5-6-7-8]--[6-7-8-9</a>\n\n================================================================\n========== \t subsequences(data,4,2 )\n================================================================\n<a href='{% post_path 0-1-2-3]--[2-3-4-5]--[4-5-6-7]--[6-7-8-9 %}'>0-1-2-3]--[2-3-4-5]--[4-5-6-7]--[6-7-8-9</a>\n\n================================================================\n========== \t subsequences(data,4,3 )\n================================================================\n<a href='{% post_path 0-1-2-3]--[3-4-5-6]--[6-7-8-9 %}'>0-1-2-3]--[3-4-5-6]--[6-7-8-9</a>\n\n================================================================\n========== \t subsequences(data,4,3 )\n================================================================\n<a href='{% post_path 0-1-2-3]--[4-5-6-7 %}'>0-1-2-3]--[4-5-6-7</a>\n\n================================================================\n========== \t subsequences(data,5,2 )\n================================================================\n<a href='{% post_path 0-1-2-3-4]--[2-3-4-5-6]--[4-5-6-7-8 %}'>0-1-2-3-4]--[2-3-4-5-6]--[4-5-6-7-8</a>\n```\n\n### 源码分析: 计算窗口异常如何计算?\n\n直接看代码输出: 每个窗口中的前 `time_step` 个数据是异常, 那么这个窗口就是异常.\n\n```python\n================================================================\n========== \t windows-time_step=1\n================================================================\n<a href='{% post_path 0-0-1-1]--[0-1-1-0]--[1-1-0-0]--[1-0-0-0]--[0-0-0-0]--[0-0-0-0]--[0-0-0-0 %}'>0-0-1-1]--[0-1-1-0]--[1-1-0-0]--[1-0-0-0]--[0-0-0-0]--[0-0-0-0]--[0-0-0-0</a>\n[0. 0. 1. 1. 0. 0. 0. 0. 0. 0.]\n\n================================================================\n========== \t windows-time_step=2\n================================================================\n<a href='{% post_path 0-0-1-1]--[1-1-0-0]--[0-0-0-0]--[0-0-0-0 %}'>0-0-1-1]--[1-1-0-0]--[0-0-0-0]--[0-0-0-0</a>\n[0. 1. 0. 0. 0. 0. 0. 0. 0. 0.]\n\n================================================================\n========== \t windows-time_step=3\n================================================================\n<a href='{% post_path 0-0-1-1]--[1-0-0-0]--[0-0-0-0 %}'>0-0-1-1]--[1-0-0-0]--[0-0-0-0</a>\n[1. 1. 0. 0. 0. 0. 0. 0. 0. 0.] \n```\n","source":"_posts/时间序列(源于coca)中的-time-step.md","raw":"---\ntitle: 时间序列(源于coca)中的 time step\nshare: true\ndate: 2023-01-05 10:03:57 \nupdated: 2023-01-05 10:41:50 \ncategories: research\n---\n\n## 问题\n\ncoca 中 time_step 为 2 时, 如何计算 score?\n\n### 小结\n\n❓time_step 的作用是什么?\n\ntime_step 的作用: 决定下一窗口数据的起点. 假设数据是 `[0 1 2 3 4 5 6 7 8 9]`, 滑动窗口是 4 (下面的例子 ):\n\n![Excalidraw/COCA源码分析 2023-01-05 09.37.53.excalidraw](/images/ff9b6413ac39b2772ebd08fce73ccb7fb34fb335.png)\n\n❓窗口异常如何定?\n\n🔑 每个窗口中的前 `time_step` 个数据是异常, 那么这个窗口就是异常.\n\n### 分析\n\n是用后一个值填充前一个?\n\n🔑 判断窗口中的前 time_step 是否包含异常, 如果为异常, 那么这个窗口就是异常. 问题转换为求滑动窗口的异常, 那如何求呢?\n\n![Excalidraw/COCA源码分析 2023-01-04 09.18.29.excalidraw](/images/38f1861cf25f0abe9326ad9a519a9370c1dcc052.png)\n\n分为两步来求:\n\n- 计算 `subsequences(train_time_series, configs.window_size, configs.time_step)`\n- 计算窗口异常\n\n计算窗口异常:\n\n```python\n for i, item in enumerate(train_y[:]):\n        if sum(item[:configs.time_step]) >= 1:\n            train_anomaly_window_num += 1\n            train_y_window[i] = 1\n        else:\n            train_y_window[i] = 0 \n```\n\n### 源码分析: subsequences 怎么求\n\n直接跑代码看结果:\n\n- 数据 `sequence = np.arange(10)`\n- 函数定义 `def subsequences(sequence, window_size, time_step)`\n\n```python\n# data: [0 1 2 3 4 5 6 7 8 9]\n\n================================================================\n========== \t subsequences(data,4,1 )\n================================================================\n<a href='{% post_path 0-1-2-3]--[1-2-3-4]--[2-3-4-5]--[3-4-5-6]--[4-5-6-7]--[5-6-7-8]--[6-7-8-9 %}'>0-1-2-3]--[1-2-3-4]--[2-3-4-5]--[3-4-5-6]--[4-5-6-7]--[5-6-7-8]--[6-7-8-9</a>\n\n================================================================\n========== \t subsequences(data,4,2 )\n================================================================\n<a href='{% post_path 0-1-2-3]--[2-3-4-5]--[4-5-6-7]--[6-7-8-9 %}'>0-1-2-3]--[2-3-4-5]--[4-5-6-7]--[6-7-8-9</a>\n\n================================================================\n========== \t subsequences(data,4,3 )\n================================================================\n<a href='{% post_path 0-1-2-3]--[3-4-5-6]--[6-7-8-9 %}'>0-1-2-3]--[3-4-5-6]--[6-7-8-9</a>\n\n================================================================\n========== \t subsequences(data,4,3 )\n================================================================\n<a href='{% post_path 0-1-2-3]--[4-5-6-7 %}'>0-1-2-3]--[4-5-6-7</a>\n\n================================================================\n========== \t subsequences(data,5,2 )\n================================================================\n<a href='{% post_path 0-1-2-3-4]--[2-3-4-5-6]--[4-5-6-7-8 %}'>0-1-2-3-4]--[2-3-4-5-6]--[4-5-6-7-8</a>\n```\n\n### 源码分析: 计算窗口异常如何计算?\n\n直接看代码输出: 每个窗口中的前 `time_step` 个数据是异常, 那么这个窗口就是异常.\n\n```python\n================================================================\n========== \t windows-time_step=1\n================================================================\n<a href='{% post_path 0-0-1-1]--[0-1-1-0]--[1-1-0-0]--[1-0-0-0]--[0-0-0-0]--[0-0-0-0]--[0-0-0-0 %}'>0-0-1-1]--[0-1-1-0]--[1-1-0-0]--[1-0-0-0]--[0-0-0-0]--[0-0-0-0]--[0-0-0-0</a>\n[0. 0. 1. 1. 0. 0. 0. 0. 0. 0.]\n\n================================================================\n========== \t windows-time_step=2\n================================================================\n<a href='{% post_path 0-0-1-1]--[1-1-0-0]--[0-0-0-0]--[0-0-0-0 %}'>0-0-1-1]--[1-1-0-0]--[0-0-0-0]--[0-0-0-0</a>\n[0. 1. 0. 0. 0. 0. 0. 0. 0. 0.]\n\n================================================================\n========== \t windows-time_step=3\n================================================================\n<a href='{% post_path 0-0-1-1]--[1-0-0-0]--[0-0-0-0 %}'>0-0-1-1]--[1-0-0-0]--[0-0-0-0</a>\n[1. 1. 0. 0. 0. 0. 0. 0. 0. 0.] \n```\n","slug":"时间序列(源于coca)中的-time-step","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ab005i4cv98gn32958","content":"<h2 id=\"问题\">问题</h2>\n<p>coca 中 time_step 为 2 时, 如何计算 score?</p>\n<h3 id=\"小结\">小结</h3>\n<p>❓time_step 的作用是什么?</p>\n<p>time_step 的作用: 决定下一窗口数据的起点. 假设数据是 <code>[0 1 2 3 4 5 6 7 8 9]</code>, 滑动窗口是 4 (下面的例子 ):</p>\n<p><img src=\"/images/ff9b6413ac39b2772ebd08fce73ccb7fb34fb335.png\" alt=\"Excalidraw/COCA源码分析 2023-01-05 09.37.53.excalidraw\"></p>\n<p>❓窗口异常如何定?</p>\n<p>🔑 每个窗口中的前 <code>time_step</code> 个数据是异常, 那么这个窗口就是异常.</p>\n<h3 id=\"分析\">分析</h3>\n<p>是用后一个值填充前一个?</p>\n<p>🔑 判断窗口中的前 time_step 是否包含异常, 如果为异常, 那么这个窗口就是异常. 问题转换为求滑动窗口的异常, 那如何求呢?</p>\n<p><img src=\"/images/38f1861cf25f0abe9326ad9a519a9370c1dcc052.png\" alt=\"Excalidraw/COCA源码分析 2023-01-04 09.18.29.excalidraw\"></p>\n<p>分为两步来求:</p>\n<ul>\n<li>计算 <code>subsequences(train_time_series, configs.window_size, configs.time_step)</code></li>\n<li>计算窗口异常</li>\n</ul>\n<p>计算窗口异常:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i, item <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(train_y[:]):</span><br><span class=\"line\">       <span class=\"keyword\">if</span> <span class=\"built_in\">sum</span>(item[:configs.time_step]) &gt;= <span class=\"number\">1</span>:</span><br><span class=\"line\">           train_anomaly_window_num += <span class=\"number\">1</span></span><br><span class=\"line\">           train_y_window[i] = <span class=\"number\">1</span></span><br><span class=\"line\">       <span class=\"keyword\">else</span>:</span><br><span class=\"line\">           train_y_window[i] = <span class=\"number\">0</span> </span><br></pre></td></tr></table></figure>\n<h3 id=\"源码分析-subsequences-怎么求\">源码分析: subsequences 怎么求</h3>\n<p>直接跑代码看结果:</p>\n<ul>\n<li>数据 <code>sequence = np.arange(10)</code></li>\n<li>函数定义 <code>def subsequences(sequence, window_size, time_step)</code></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># data: [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">4</span>,<span class=\"number\">1</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3]--[1-2-3-4]--[2-3-4-5]--[3-4-5-6]--[4-5-6-7]--[5-6-7-8]--[6-7-8-9 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>]--[<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>]--[<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>]--[<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>]--[<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>]--[<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>]--[<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>-<span class=\"number\">9</span>&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">4</span>,<span class=\"number\">2</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3]--[2-3-4-5]--[4-5-6-7]--[6-7-8-9 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>]--[<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>]--[<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>]--[<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>-<span class=\"number\">9</span>&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">4</span>,<span class=\"number\">3</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3]--[3-4-5-6]--[6-7-8-9 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>]--[<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>]--[<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>-<span class=\"number\">9</span>&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">4</span>,<span class=\"number\">3</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3]--[4-5-6-7 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>]--[<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">5</span>,<span class=\"number\">2</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3-4]--[2-3-4-5-6]--[4-5-6-7-8 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>]--[<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>]--[<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"源码分析-计算窗口异常如何计算\">源码分析: 计算窗口异常如何计算?</h3>\n<p>直接看代码输出: 每个窗口中的前 <code>time_step</code> 个数据是异常, 那么这个窗口就是异常.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t windows-time_step=<span class=\"number\">1</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-0-1-1]--[0-1-1-0]--[1-1-0-0]--[1-0-0-0]--[0-0-0-0]--[0-0-0-0]--[0-0-0-0 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span>]--[<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span>-<span class=\"number\">0</span>]--[<span class=\"number\">1</span>-<span class=\"number\">1</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">1</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>&lt;/a&gt;</span><br><span class=\"line\">[<span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">1.</span> <span class=\"number\">1.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t windows-time_step=<span class=\"number\">2</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-0-1-1]--[1-1-0-0]--[0-0-0-0]--[0-0-0-0 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span>]--[<span class=\"number\">1</span>-<span class=\"number\">1</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>&lt;/a&gt;</span><br><span class=\"line\">[<span class=\"number\">0.</span> <span class=\"number\">1.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t windows-time_step=<span class=\"number\">3</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-0-1-1]--[1-0-0-0]--[0-0-0-0 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span>]--[<span class=\"number\">1</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>&lt;/a&gt;</span><br><span class=\"line\">[<span class=\"number\">1.</span> <span class=\"number\">1.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span>] </span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover1.JPG","excerpt":"","more":"<h2 id=\"问题\">问题</h2>\n<p>coca 中 time_step 为 2 时, 如何计算 score?</p>\n<h3 id=\"小结\">小结</h3>\n<p>❓time_step 的作用是什么?</p>\n<p>time_step 的作用: 决定下一窗口数据的起点. 假设数据是 <code>[0 1 2 3 4 5 6 7 8 9]</code>, 滑动窗口是 4 (下面的例子 ):</p>\n<p><img src=\"/images/ff9b6413ac39b2772ebd08fce73ccb7fb34fb335.png\" alt=\"Excalidraw/COCA源码分析 2023-01-05 09.37.53.excalidraw\"></p>\n<p>❓窗口异常如何定?</p>\n<p>🔑 每个窗口中的前 <code>time_step</code> 个数据是异常, 那么这个窗口就是异常.</p>\n<h3 id=\"分析\">分析</h3>\n<p>是用后一个值填充前一个?</p>\n<p>🔑 判断窗口中的前 time_step 是否包含异常, 如果为异常, 那么这个窗口就是异常. 问题转换为求滑动窗口的异常, 那如何求呢?</p>\n<p><img src=\"/images/38f1861cf25f0abe9326ad9a519a9370c1dcc052.png\" alt=\"Excalidraw/COCA源码分析 2023-01-04 09.18.29.excalidraw\"></p>\n<p>分为两步来求:</p>\n<ul>\n<li>计算 <code>subsequences(train_time_series, configs.window_size, configs.time_step)</code></li>\n<li>计算窗口异常</li>\n</ul>\n<p>计算窗口异常:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> i, item <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(train_y[:]):</span><br><span class=\"line\">       <span class=\"keyword\">if</span> <span class=\"built_in\">sum</span>(item[:configs.time_step]) &gt;= <span class=\"number\">1</span>:</span><br><span class=\"line\">           train_anomaly_window_num += <span class=\"number\">1</span></span><br><span class=\"line\">           train_y_window[i] = <span class=\"number\">1</span></span><br><span class=\"line\">       <span class=\"keyword\">else</span>:</span><br><span class=\"line\">           train_y_window[i] = <span class=\"number\">0</span> </span><br></pre></td></tr></table></figure>\n<h3 id=\"源码分析-subsequences-怎么求\">源码分析: subsequences 怎么求</h3>\n<p>直接跑代码看结果:</p>\n<ul>\n<li>数据 <code>sequence = np.arange(10)</code></li>\n<li>函数定义 <code>def subsequences(sequence, window_size, time_step)</code></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># data: [0 1 2 3 4 5 6 7 8 9]</span></span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">4</span>,<span class=\"number\">1</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3]--[1-2-3-4]--[2-3-4-5]--[3-4-5-6]--[4-5-6-7]--[5-6-7-8]--[6-7-8-9 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>]--[<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>]--[<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>]--[<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>]--[<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>]--[<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>]--[<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>-<span class=\"number\">9</span>&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">4</span>,<span class=\"number\">2</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3]--[2-3-4-5]--[4-5-6-7]--[6-7-8-9 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>]--[<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>]--[<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>]--[<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>-<span class=\"number\">9</span>&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">4</span>,<span class=\"number\">3</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3]--[3-4-5-6]--[6-7-8-9 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>]--[<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>]--[<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>-<span class=\"number\">9</span>&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">4</span>,<span class=\"number\">3</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3]--[4-5-6-7 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>]--[<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>&lt;/a&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t subsequences(data,<span class=\"number\">5</span>,<span class=\"number\">2</span> )</span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-1-2-3-4]--[2-3-4-5-6]--[4-5-6-7-8 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>]--[<span class=\"number\">2</span>-<span class=\"number\">3</span>-<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>]--[<span class=\"number\">4</span>-<span class=\"number\">5</span>-<span class=\"number\">6</span>-<span class=\"number\">7</span>-<span class=\"number\">8</span>&lt;/a&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"源码分析-计算窗口异常如何计算\">源码分析: 计算窗口异常如何计算?</h3>\n<p>直接看代码输出: 每个窗口中的前 <code>time_step</code> 个数据是异常, 那么这个窗口就是异常.</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t windows-time_step=<span class=\"number\">1</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-0-1-1]--[0-1-1-0]--[1-1-0-0]--[1-0-0-0]--[0-0-0-0]--[0-0-0-0]--[0-0-0-0 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span>]--[<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span>-<span class=\"number\">0</span>]--[<span class=\"number\">1</span>-<span class=\"number\">1</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">1</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>&lt;/a&gt;</span><br><span class=\"line\">[<span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">1.</span> <span class=\"number\">1.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t windows-time_step=<span class=\"number\">2</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-0-1-1]--[1-1-0-0]--[0-0-0-0]--[0-0-0-0 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span>]--[<span class=\"number\">1</span>-<span class=\"number\">1</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>&lt;/a&gt;</span><br><span class=\"line\">[<span class=\"number\">0.</span> <span class=\"number\">1.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">========== \t windows-time_step=<span class=\"number\">3</span></span><br><span class=\"line\">================================================================</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&#x27;&#123;% post_path 0-0-1-1]--[1-0-0-0]--[0-0-0-0 %&#125;&#x27;</span>&gt;<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">1</span>-<span class=\"number\">1</span>]--[<span class=\"number\">1</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>]--[<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>-<span class=\"number\">0</span>&lt;/a&gt;</span><br><span class=\"line\">[<span class=\"number\">1.</span> <span class=\"number\">1.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span> <span class=\"number\">0.</span>] </span><br></pre></td></tr></table></figure>\n"},{"title":"模型超参数","share":true,"date":"2022-12-17T01:43:12.000Z","updated":"2023-01-03T00:48:50.000Z","_content":"\n## IsolationForest\n\n```\nn_estimators: 100\n```\n\n## COCA 的 12 个模型超参数\n\n超参数的表示方式参考 [Microsoft NNI](https://nni.readthedocs.io/en/stable/hpo/search_space.html), 其中各项的含义如下:\n\n```json\n \"batch_size\": {           # 超参数名称\n    \"_value\": [256,1024],  # batch_size 取值范围. \n\t\t\t\t\t  # 256 表示取值下限, 即 batch_size 能够取到的最小值;\n\t\t\t\t\t  # 1024 表示取值上限, 即 batch_size 能够取到的最大值.(256 <= batch_size <= 1024)\n\t\t\t\t\t  \n    \"_type\": \"uniform\",    # 超参数取值方式; uniform 表示在  batch_size 取值范围内, 以 uniform 的分布取值, \n\t\t\t\t\t  # 即随机取值(在[256,1024]的范围内,每个值取到的概率是相等的)\n  },\n```\n\nCOCA 中的 12 个超参数如下:\n\n```python\n{\n  \"final_out_channels\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      64\n    ]\n  },\n  \"hidden_size\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      256\n    ]\n  },\n  \"num_layers\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1,\n      5\n    ]\n  },\n  \"project_channels\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      64\n    ]\n  },\n  \"dropout\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-10,\n      9e-1\n    ]\n  },\n  \"features_len\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      64\n    ]\n  },\n  \"window_size\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      8,\n      256\n    ]\n  },\n  \"time_step\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1,\n      10\n    ]\n  },\n  \"num_epoch\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      5,\n      20\n    ]\n  },\n  \"center_eps\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-10,\n      9e-1\n    ]\n  },\n  \"lr\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-10,\n      1e-1\n    ]\n  },\n  \"batch_size\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      256,\n      1024\n    ]\n  }\n}\n \n```\n","source":"_posts/模型超参数.md","raw":"---\ntitle: 模型超参数\nshare: true\ntags:\n  - uncategory\ndate: 2022-12-17 09:43:12 \nupdated: 2023-01-03 08:48:50 \ncategories: research \n---\n\n## IsolationForest\n\n```\nn_estimators: 100\n```\n\n## COCA 的 12 个模型超参数\n\n超参数的表示方式参考 [Microsoft NNI](https://nni.readthedocs.io/en/stable/hpo/search_space.html), 其中各项的含义如下:\n\n```json\n \"batch_size\": {           # 超参数名称\n    \"_value\": [256,1024],  # batch_size 取值范围. \n\t\t\t\t\t  # 256 表示取值下限, 即 batch_size 能够取到的最小值;\n\t\t\t\t\t  # 1024 表示取值上限, 即 batch_size 能够取到的最大值.(256 <= batch_size <= 1024)\n\t\t\t\t\t  \n    \"_type\": \"uniform\",    # 超参数取值方式; uniform 表示在  batch_size 取值范围内, 以 uniform 的分布取值, \n\t\t\t\t\t  # 即随机取值(在[256,1024]的范围内,每个值取到的概率是相等的)\n  },\n```\n\nCOCA 中的 12 个超参数如下:\n\n```python\n{\n  \"final_out_channels\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      64\n    ]\n  },\n  \"hidden_size\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      256\n    ]\n  },\n  \"num_layers\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1,\n      5\n    ]\n  },\n  \"project_channels\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      64\n    ]\n  },\n  \"dropout\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-10,\n      9e-1\n    ]\n  },\n  \"features_len\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      2,\n      64\n    ]\n  },\n  \"window_size\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      8,\n      256\n    ]\n  },\n  \"time_step\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1,\n      10\n    ]\n  },\n  \"num_epoch\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      5,\n      20\n    ]\n  },\n  \"center_eps\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-10,\n      9e-1\n    ]\n  },\n  \"lr\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      1e-10,\n      1e-1\n    ]\n  },\n  \"batch_size\": {\n    \"_type\": \"uniform\",\n    \"_value\": [\n      256,\n      1024\n    ]\n  }\n}\n \n```\n","slug":"模型超参数","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ac005l4cv9ehww6t0k","content":"<h2 id=\"IsolationForest\">IsolationForest</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">n_estimators: 100</span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-的-12-个模型超参数\">COCA 的 12 个模型超参数</h2>\n<p>超参数的表示方式参考 <a href=\"https://nni.readthedocs.io/en/stable/hpo/search_space.html\">Microsoft NNI</a>, 其中各项的含义如下:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;batch_size&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span>           # 超参数名称</span><br><span class=\"line\">   <span class=\"attr\">&quot;_value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"number\">256</span><span class=\"punctuation\">,</span><span class=\"number\">1024</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span>  # batch_size 取值范围. </span><br><span class=\"line\">\t\t\t\t  # <span class=\"number\">256</span> 表示取值下限<span class=\"punctuation\">,</span> 即 batch_size 能够取到的最小值;</span><br><span class=\"line\">\t\t\t\t  # <span class=\"number\">1024</span> 表示取值上限<span class=\"punctuation\">,</span> 即 batch_size 能够取到的最大值.(<span class=\"number\">256</span> &lt;= batch_size &lt;= <span class=\"number\">1024</span>)</span><br><span class=\"line\">\t\t\t\t  </span><br><span class=\"line\">   <span class=\"attr\">&quot;_type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;uniform&quot;</span><span class=\"punctuation\">,</span>    # 超参数取值方式; uniform 表示在  batch_size 取值范围内<span class=\"punctuation\">,</span> 以 uniform 的分布取值<span class=\"punctuation\">,</span> </span><br><span class=\"line\">\t\t\t\t  # 即随机取值(在<span class=\"punctuation\">[</span><span class=\"number\">256</span><span class=\"punctuation\">,</span><span class=\"number\">1024</span><span class=\"punctuation\">]</span>的范围内<span class=\"punctuation\">,</span>每个值取到的概率是相等的)</span><br><span class=\"line\"> <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br></pre></td></tr></table></figure>\n<p>COCA 中的 12 个超参数如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;final_out_channels&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">64</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;hidden_size&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">256</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;num_layers&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"number\">5</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;project_channels&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">64</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;dropout&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-10</span>,</span><br><span class=\"line\">      <span class=\"number\">9e-1</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;features_len&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">64</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;window_size&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">8</span>,</span><br><span class=\"line\">      <span class=\"number\">256</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;time_step&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"number\">10</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;num_epoch&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">5</span>,</span><br><span class=\"line\">      <span class=\"number\">20</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;center_eps&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-10</span>,</span><br><span class=\"line\">      <span class=\"number\">9e-1</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;lr&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-10</span>,</span><br><span class=\"line\">      <span class=\"number\">1e-1</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;batch_size&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">256</span>,</span><br><span class=\"line\">      <span class=\"number\">1024</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover1.JPG","excerpt":"","more":"<h2 id=\"IsolationForest\">IsolationForest</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">n_estimators: 100</span><br></pre></td></tr></table></figure>\n<h2 id=\"COCA-的-12-个模型超参数\">COCA 的 12 个模型超参数</h2>\n<p>超参数的表示方式参考 <a href=\"https://nni.readthedocs.io/en/stable/hpo/search_space.html\">Microsoft NNI</a>, 其中各项的含义如下:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;batch_size&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span>           # 超参数名称</span><br><span class=\"line\">   <span class=\"attr\">&quot;_value&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span><span class=\"number\">256</span><span class=\"punctuation\">,</span><span class=\"number\">1024</span><span class=\"punctuation\">]</span><span class=\"punctuation\">,</span>  # batch_size 取值范围. </span><br><span class=\"line\">\t\t\t\t  # <span class=\"number\">256</span> 表示取值下限<span class=\"punctuation\">,</span> 即 batch_size 能够取到的最小值;</span><br><span class=\"line\">\t\t\t\t  # <span class=\"number\">1024</span> 表示取值上限<span class=\"punctuation\">,</span> 即 batch_size 能够取到的最大值.(<span class=\"number\">256</span> &lt;= batch_size &lt;= <span class=\"number\">1024</span>)</span><br><span class=\"line\">\t\t\t\t  </span><br><span class=\"line\">   <span class=\"attr\">&quot;_type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;uniform&quot;</span><span class=\"punctuation\">,</span>    # 超参数取值方式; uniform 表示在  batch_size 取值范围内<span class=\"punctuation\">,</span> 以 uniform 的分布取值<span class=\"punctuation\">,</span> </span><br><span class=\"line\">\t\t\t\t  # 即随机取值(在<span class=\"punctuation\">[</span><span class=\"number\">256</span><span class=\"punctuation\">,</span><span class=\"number\">1024</span><span class=\"punctuation\">]</span>的范围内<span class=\"punctuation\">,</span>每个值取到的概率是相等的)</span><br><span class=\"line\"> <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br></pre></td></tr></table></figure>\n<p>COCA 中的 12 个超参数如下:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;final_out_channels&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">64</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;hidden_size&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">256</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;num_layers&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"number\">5</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;project_channels&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">64</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;dropout&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-10</span>,</span><br><span class=\"line\">      <span class=\"number\">9e-1</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;features_len&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"number\">64</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;window_size&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">8</span>,</span><br><span class=\"line\">      <span class=\"number\">256</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;time_step&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"number\">10</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;num_epoch&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">5</span>,</span><br><span class=\"line\">      <span class=\"number\">20</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;center_eps&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-10</span>,</span><br><span class=\"line\">      <span class=\"number\">9e-1</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;lr&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">1e-10</span>,</span><br><span class=\"line\">      <span class=\"number\">1e-1</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;batch_size&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;_type&quot;</span>: <span class=\"string\">&quot;uniform&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;_value&quot;</span>: [</span><br><span class=\"line\">      <span class=\"number\">256</span>,</span><br><span class=\"line\">      <span class=\"number\">1024</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br></pre></td></tr></table></figure>\n"},{"title":"正则表达式","share":true,"date":"2022-04-18T14:28:10.000Z","updated":"2023-01-05T03:11:06.000Z","_content":"## 官方文档\n\n[https://docs.python.org/zh-cn/3/library/re.html](https://docs.python.org/zh-cn/3/library/re.html)\n\nhttps://zhuanlan.zhihu.com/p/127807805\n\n## 查找一个匹配项\n\n查找并返回一个匹配项的函数有 3 个：search、match、fullmatch，他们的区别分别是：\n\n- search：查找任意位置的匹配项\n- match：必须从字符串开头匹配\n- fullmatch：整个字符串与正则完全匹配\n\n![static/attachment/Pasted image 20230105110158.png](/images/669a223d6301c41c7126901f2021f723aedc572c.png)\n\n## 查找多个匹配项\n\n讲完查找一项，现在来看看查找多项吧，查找多项函数主要有：findall 函数 与 finditer 函数：\n\nfindall：从字符串任意位置查找，返回一个列表\n\nfinditer：从字符串任意位置查找，返回一个迭代器\n\n![static/attachment/Pasted image 20230105111014.png](/images/269fb55b94f8ff3b6acc916fc199adcd0c25174e.png)\n\n## 替换\n\n替换主要有 sub 函数 与 subn 函数，他们功能类似！\n\n先来看看 sub 函数的用法：\n\nre.sub(pattern, repl, string, count=0, flags=0) 函数参数讲解：repl 替换掉 string 中被 pattern 匹配的字符，count 表示最大替换次数，flags 表示正则表达式的常量。\n\n![static/attachment/Pasted image 20230105111105.png](/images/e76b20dd798e99c8d45eaef34bfbf9ad3f0e5de5.png)\n\n## 匹配中文\n\n```\nimport re\n\n\"\"\"\npython 3.5版本\n正则匹配中文，固定形式：\\u4E00-\\u9FA5\n\"\"\"\ntext = \"***中国***日本***韩国\"\nregex_str = \".*?([\\u4E00-\\u9FA5]+).*?\"\nmatch_obj = re.findall(regex_str, text)\nif match_obj:\n    print(match_obj)\n```\n\n## 中英文之间加空格\n\n[reference](https://blog.csdn.net/yinlongfei_love/article/details/82219994)\n\n### 背景\n\n最近在翻译一些东西，由于有规定限制，需要在中英文之间添加固定的空格，来让文档更美观。所以这里有一个写了个小正则表达式来完成这个小需求，表达式如下，配合自己的文本编辑工具来输入如下内容\n\n### 正则操作\n\n这个时匹配中文和英文的\n\n```\n([\\u4e00-\\u9fa5]+)([A-Za-z]+)([\\u4e00-\\u9fa5]+)1\n```\n\n替换的框里输入下面的内容\n\n```\n$1 $2 $31\n```\n\n简单解释一下 1 代表第一个括号中匹配上的值 1 代表第一个括号中匹配上的值 2 为第二个括号中匹配上的值，这样一操作，会在中文和英文之间添加上空格\n\n还需要在英文和中文之间加上空格\n\n如下操作\n\n```\n([A-Za-z])([\\u4e00-\\u9fa5]+)1\n```\n\n替换的框里输入下面的内容\n\n```\n$1 $2\n```\n\n## 向前匹配\n\n`(:?)`：匹配前缀或后缀，不包含在结果中\n\n`res.group(1)`：打印匹配到的第一个结果\n\n`res.groups()`：打印匹配到的所有结果\n\n```\nimport re\nstr=\"http://fusionlog.qiniu.com/v2/img.lessonplan.cn_2020-07-20-16_part-00000.gz?e=1600426051&token=557TpseUM8ovpfUhaw8gfa2DQ0104ZScM-BTIcBx:ntpYw_GUNpkSU-XMTPPS0zt20lk=\"\nres=re.match(\"(?:.*/v2/)(.*.gz)(?:\\?)\",str)\nprint(res.groups())\n# ('img.lessonplan.cn_2020-07-20-16_part-00000.gz',)\nprint(res.group(1))\n# img.lessonplan.cn_2020-07-20-16_part-00000.gz\n```\n","source":"_posts/正则表达式.md","raw":"---\ntitle: 正则表达式\nshare: true\ntags:\n  - uncategory\ndate: 2022-04-18 22:28:10 \nupdated: 2023-01-05 11:11:06 \ncategories: uncategory\n---\n## 官方文档\n\n[https://docs.python.org/zh-cn/3/library/re.html](https://docs.python.org/zh-cn/3/library/re.html)\n\nhttps://zhuanlan.zhihu.com/p/127807805\n\n## 查找一个匹配项\n\n查找并返回一个匹配项的函数有 3 个：search、match、fullmatch，他们的区别分别是：\n\n- search：查找任意位置的匹配项\n- match：必须从字符串开头匹配\n- fullmatch：整个字符串与正则完全匹配\n\n![static/attachment/Pasted image 20230105110158.png](/images/669a223d6301c41c7126901f2021f723aedc572c.png)\n\n## 查找多个匹配项\n\n讲完查找一项，现在来看看查找多项吧，查找多项函数主要有：findall 函数 与 finditer 函数：\n\nfindall：从字符串任意位置查找，返回一个列表\n\nfinditer：从字符串任意位置查找，返回一个迭代器\n\n![static/attachment/Pasted image 20230105111014.png](/images/269fb55b94f8ff3b6acc916fc199adcd0c25174e.png)\n\n## 替换\n\n替换主要有 sub 函数 与 subn 函数，他们功能类似！\n\n先来看看 sub 函数的用法：\n\nre.sub(pattern, repl, string, count=0, flags=0) 函数参数讲解：repl 替换掉 string 中被 pattern 匹配的字符，count 表示最大替换次数，flags 表示正则表达式的常量。\n\n![static/attachment/Pasted image 20230105111105.png](/images/e76b20dd798e99c8d45eaef34bfbf9ad3f0e5de5.png)\n\n## 匹配中文\n\n```\nimport re\n\n\"\"\"\npython 3.5版本\n正则匹配中文，固定形式：\\u4E00-\\u9FA5\n\"\"\"\ntext = \"***中国***日本***韩国\"\nregex_str = \".*?([\\u4E00-\\u9FA5]+).*?\"\nmatch_obj = re.findall(regex_str, text)\nif match_obj:\n    print(match_obj)\n```\n\n## 中英文之间加空格\n\n[reference](https://blog.csdn.net/yinlongfei_love/article/details/82219994)\n\n### 背景\n\n最近在翻译一些东西，由于有规定限制，需要在中英文之间添加固定的空格，来让文档更美观。所以这里有一个写了个小正则表达式来完成这个小需求，表达式如下，配合自己的文本编辑工具来输入如下内容\n\n### 正则操作\n\n这个时匹配中文和英文的\n\n```\n([\\u4e00-\\u9fa5]+)([A-Za-z]+)([\\u4e00-\\u9fa5]+)1\n```\n\n替换的框里输入下面的内容\n\n```\n$1 $2 $31\n```\n\n简单解释一下 1 代表第一个括号中匹配上的值 1 代表第一个括号中匹配上的值 2 为第二个括号中匹配上的值，这样一操作，会在中文和英文之间添加上空格\n\n还需要在英文和中文之间加上空格\n\n如下操作\n\n```\n([A-Za-z])([\\u4e00-\\u9fa5]+)1\n```\n\n替换的框里输入下面的内容\n\n```\n$1 $2\n```\n\n## 向前匹配\n\n`(:?)`：匹配前缀或后缀，不包含在结果中\n\n`res.group(1)`：打印匹配到的第一个结果\n\n`res.groups()`：打印匹配到的所有结果\n\n```\nimport re\nstr=\"http://fusionlog.qiniu.com/v2/img.lessonplan.cn_2020-07-20-16_part-00000.gz?e=1600426051&token=557TpseUM8ovpfUhaw8gfa2DQ0104ZScM-BTIcBx:ntpYw_GUNpkSU-XMTPPS0zt20lk=\"\nres=re.match(\"(?:.*/v2/)(.*.gz)(?:\\?)\",str)\nprint(res.groups())\n# ('img.lessonplan.cn_2020-07-20-16_part-00000.gz',)\nprint(res.group(1))\n# img.lessonplan.cn_2020-07-20-16_part-00000.gz\n```\n","slug":"正则表达式","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ac005o4cv90pes9qd7","content":"<h2 id=\"官方文档\">官方文档</h2>\n<p><a href=\"https://docs.python.org/zh-cn/3/library/re.html\">https://docs.python.org/zh-cn/3/library/re.html</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/127807805\">https://zhuanlan.zhihu.com/p/127807805</a></p>\n<h2 id=\"查找一个匹配项\">查找一个匹配项</h2>\n<p>查找并返回一个匹配项的函数有 3 个：search、match、fullmatch，他们的区别分别是：</p>\n<ul>\n<li>search：查找任意位置的匹配项</li>\n<li>match：必须从字符串开头匹配</li>\n<li>fullmatch：整个字符串与正则完全匹配</li>\n</ul>\n<p><img src=\"/images/669a223d6301c41c7126901f2021f723aedc572c.png\" alt=\"static/attachment/Pasted image 20230105110158.png\"></p>\n<h2 id=\"查找多个匹配项\">查找多个匹配项</h2>\n<p>讲完查找一项，现在来看看查找多项吧，查找多项函数主要有：findall 函数 与 finditer 函数：</p>\n<p>findall：从字符串任意位置查找，返回一个列表</p>\n<p>finditer：从字符串任意位置查找，返回一个迭代器</p>\n<p><img src=\"/images/269fb55b94f8ff3b6acc916fc199adcd0c25174e.png\" alt=\"static/attachment/Pasted image 20230105111014.png\"></p>\n<h2 id=\"替换\">替换</h2>\n<p>替换主要有 sub 函数 与 subn 函数，他们功能类似！</p>\n<p>先来看看 sub 函数的用法：</p>\n<p>re.sub(pattern, repl, string, count=0, flags=0) 函数参数讲解：repl 替换掉 string 中被 pattern 匹配的字符，count 表示最大替换次数，flags 表示正则表达式的常量。</p>\n<p><img src=\"/images/e76b20dd798e99c8d45eaef34bfbf9ad3f0e5de5.png\" alt=\"static/attachment/Pasted image 20230105111105.png\"></p>\n<h2 id=\"匹配中文\">匹配中文</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import re</span><br><span class=\"line\"></span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\">python 3.5版本</span><br><span class=\"line\">正则匹配中文，固定形式：\\u4E00-\\u9FA5</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\">text = &quot;***中国***日本***韩国&quot;</span><br><span class=\"line\">regex_str = &quot;.*?([\\u4E00-\\u9FA5]+).*?&quot;</span><br><span class=\"line\">match_obj = re.findall(regex_str, text)</span><br><span class=\"line\">if match_obj:</span><br><span class=\"line\">    print(match_obj)</span><br></pre></td></tr></table></figure>\n<h2 id=\"中英文之间加空格\">中英文之间加空格</h2>\n<p><a href=\"https://blog.csdn.net/yinlongfei_love/article/details/82219994\">reference</a></p>\n<h3 id=\"背景\">背景</h3>\n<p>最近在翻译一些东西，由于有规定限制，需要在中英文之间添加固定的空格，来让文档更美观。所以这里有一个写了个小正则表达式来完成这个小需求，表达式如下，配合自己的文本编辑工具来输入如下内容</p>\n<h3 id=\"正则操作\">正则操作</h3>\n<p>这个时匹配中文和英文的</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">([\\u4e00-\\u9fa5]+)([A-Za-z]+)([\\u4e00-\\u9fa5]+)1</span><br></pre></td></tr></table></figure>\n<p>替换的框里输入下面的内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$1 $2 $31</span><br></pre></td></tr></table></figure>\n<p>简单解释一下 1 代表第一个括号中匹配上的值 1 代表第一个括号中匹配上的值 2 为第二个括号中匹配上的值，这样一操作，会在中文和英文之间添加上空格</p>\n<p>还需要在英文和中文之间加上空格</p>\n<p>如下操作</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">([A-Za-z])([\\u4e00-\\u9fa5]+)1</span><br></pre></td></tr></table></figure>\n<p>替换的框里输入下面的内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$1 $2</span><br></pre></td></tr></table></figure>\n<h2 id=\"向前匹配\">向前匹配</h2>\n<p><code>(:?)</code>：匹配前缀或后缀，不包含在结果中</p>\n<p><code>res.group(1)</code>：打印匹配到的第一个结果</p>\n<p><code>res.groups()</code>：打印匹配到的所有结果</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import re</span><br><span class=\"line\">str=&quot;http://fusionlog.qiniu.com/v2/img.lessonplan.cn_2020-07-20-16_part-00000.gz?e=1600426051&amp;token=557TpseUM8ovpfUhaw8gfa2DQ0104ZScM-BTIcBx:ntpYw_GUNpkSU-XMTPPS0zt20lk=&quot;</span><br><span class=\"line\">res=re.match(&quot;(?:.*/v2/)(.*.gz)(?:\\?)&quot;,str)</span><br><span class=\"line\">print(res.groups())</span><br><span class=\"line\"># (&#x27;img.lessonplan.cn_2020-07-20-16_part-00000.gz&#x27;,)</span><br><span class=\"line\">print(res.group(1))</span><br><span class=\"line\"># img.lessonplan.cn_2020-07-20-16_part-00000.gz</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover8.JPG","excerpt":"","more":"<h2 id=\"官方文档\">官方文档</h2>\n<p><a href=\"https://docs.python.org/zh-cn/3/library/re.html\">https://docs.python.org/zh-cn/3/library/re.html</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/127807805\">https://zhuanlan.zhihu.com/p/127807805</a></p>\n<h2 id=\"查找一个匹配项\">查找一个匹配项</h2>\n<p>查找并返回一个匹配项的函数有 3 个：search、match、fullmatch，他们的区别分别是：</p>\n<ul>\n<li>search：查找任意位置的匹配项</li>\n<li>match：必须从字符串开头匹配</li>\n<li>fullmatch：整个字符串与正则完全匹配</li>\n</ul>\n<p><img src=\"/images/669a223d6301c41c7126901f2021f723aedc572c.png\" alt=\"static/attachment/Pasted image 20230105110158.png\"></p>\n<h2 id=\"查找多个匹配项\">查找多个匹配项</h2>\n<p>讲完查找一项，现在来看看查找多项吧，查找多项函数主要有：findall 函数 与 finditer 函数：</p>\n<p>findall：从字符串任意位置查找，返回一个列表</p>\n<p>finditer：从字符串任意位置查找，返回一个迭代器</p>\n<p><img src=\"/images/269fb55b94f8ff3b6acc916fc199adcd0c25174e.png\" alt=\"static/attachment/Pasted image 20230105111014.png\"></p>\n<h2 id=\"替换\">替换</h2>\n<p>替换主要有 sub 函数 与 subn 函数，他们功能类似！</p>\n<p>先来看看 sub 函数的用法：</p>\n<p>re.sub(pattern, repl, string, count=0, flags=0) 函数参数讲解：repl 替换掉 string 中被 pattern 匹配的字符，count 表示最大替换次数，flags 表示正则表达式的常量。</p>\n<p><img src=\"/images/e76b20dd798e99c8d45eaef34bfbf9ad3f0e5de5.png\" alt=\"static/attachment/Pasted image 20230105111105.png\"></p>\n<h2 id=\"匹配中文\">匹配中文</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import re</span><br><span class=\"line\"></span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\">python 3.5版本</span><br><span class=\"line\">正则匹配中文，固定形式：\\u4E00-\\u9FA5</span><br><span class=\"line\">&quot;&quot;&quot;</span><br><span class=\"line\">text = &quot;***中国***日本***韩国&quot;</span><br><span class=\"line\">regex_str = &quot;.*?([\\u4E00-\\u9FA5]+).*?&quot;</span><br><span class=\"line\">match_obj = re.findall(regex_str, text)</span><br><span class=\"line\">if match_obj:</span><br><span class=\"line\">    print(match_obj)</span><br></pre></td></tr></table></figure>\n<h2 id=\"中英文之间加空格\">中英文之间加空格</h2>\n<p><a href=\"https://blog.csdn.net/yinlongfei_love/article/details/82219994\">reference</a></p>\n<h3 id=\"背景\">背景</h3>\n<p>最近在翻译一些东西，由于有规定限制，需要在中英文之间添加固定的空格，来让文档更美观。所以这里有一个写了个小正则表达式来完成这个小需求，表达式如下，配合自己的文本编辑工具来输入如下内容</p>\n<h3 id=\"正则操作\">正则操作</h3>\n<p>这个时匹配中文和英文的</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">([\\u4e00-\\u9fa5]+)([A-Za-z]+)([\\u4e00-\\u9fa5]+)1</span><br></pre></td></tr></table></figure>\n<p>替换的框里输入下面的内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$1 $2 $31</span><br></pre></td></tr></table></figure>\n<p>简单解释一下 1 代表第一个括号中匹配上的值 1 代表第一个括号中匹配上的值 2 为第二个括号中匹配上的值，这样一操作，会在中文和英文之间添加上空格</p>\n<p>还需要在英文和中文之间加上空格</p>\n<p>如下操作</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">([A-Za-z])([\\u4e00-\\u9fa5]+)1</span><br></pre></td></tr></table></figure>\n<p>替换的框里输入下面的内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$1 $2</span><br></pre></td></tr></table></figure>\n<h2 id=\"向前匹配\">向前匹配</h2>\n<p><code>(:?)</code>：匹配前缀或后缀，不包含在结果中</p>\n<p><code>res.group(1)</code>：打印匹配到的第一个结果</p>\n<p><code>res.groups()</code>：打印匹配到的所有结果</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import re</span><br><span class=\"line\">str=&quot;http://fusionlog.qiniu.com/v2/img.lessonplan.cn_2020-07-20-16_part-00000.gz?e=1600426051&amp;token=557TpseUM8ovpfUhaw8gfa2DQ0104ZScM-BTIcBx:ntpYw_GUNpkSU-XMTPPS0zt20lk=&quot;</span><br><span class=\"line\">res=re.match(&quot;(?:.*/v2/)(.*.gz)(?:\\?)&quot;,str)</span><br><span class=\"line\">print(res.groups())</span><br><span class=\"line\"># (&#x27;img.lessonplan.cn_2020-07-20-16_part-00000.gz&#x27;,)</span><br><span class=\"line\">print(res.group(1))</span><br><span class=\"line\"># img.lessonplan.cn_2020-07-20-16_part-00000.gz</span><br></pre></td></tr></table></figure>\n"},{"title":"相关资料","share":true,"date":"2022-11-14T07:13:13.000Z","updated":"2022-12-22T13:28:06.000Z","aliases":["相关资料"],"_content":"- 机器学习相关书籍\n   - 机器学习相关书籍\n\t  - 链接: <https://pan.baidu.com/s/1SvYjfBCzGupUECGnUcd5Kg?pwd=yhta> 提取码: yhta\n   - Scikit-learn 视频推荐\n\t  - <https://www.bilibili.com/video/BV1aV411e7CJ?p=5&vd_source=dfbc322c387caba8f290f66c006d6d6c>\n","source":"_posts/相关资料.md","raw":"---\ntitle: 相关资料\nshare: true\ntags:\n  - 培训材料/贵州大学商业数据分析\n  - uncategory\ndate: 2022-11-14 15:13:13 \nupdated: 2022-12-22 21:28:06 \ncategories: [uncategory]\naliases:\n  - 相关资料\n---\n- 机器学习相关书籍\n   - 机器学习相关书籍\n\t  - 链接: <https://pan.baidu.com/s/1SvYjfBCzGupUECGnUcd5Kg?pwd=yhta> 提取码: yhta\n   - Scikit-learn 视频推荐\n\t  - <https://www.bilibili.com/video/BV1aV411e7CJ?p=5&vd_source=dfbc322c387caba8f290f66c006d6d6c>\n","slug":"相关资料","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ac005r4cv9etbxhb8x","content":"<ul>\n<li>机器学习相关书籍\n<ul>\n<li>机器学习相关书籍\n<ul>\n<li>链接: <a href=\"https://pan.baidu.com/s/1SvYjfBCzGupUECGnUcd5Kg?pwd=yhta\">https://pan.baidu.com/s/1SvYjfBCzGupUECGnUcd5Kg?pwd=yhta</a> 提取码: yhta</li>\n</ul>\n</li>\n<li>Scikit-learn 视频推荐\n<ul>\n<li><a href=\"https://www.bilibili.com/video/BV1aV411e7CJ?p=5&amp;vd_source=dfbc322c387caba8f290f66c006d6d6c\">https://www.bilibili.com/video/BV1aV411e7CJ?p=5&amp;vd_source=dfbc322c387caba8f290f66c006d6d6c</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<ul>\n<li>机器学习相关书籍\n<ul>\n<li>机器学习相关书籍\n<ul>\n<li>链接: <a href=\"https://pan.baidu.com/s/1SvYjfBCzGupUECGnUcd5Kg?pwd=yhta\">https://pan.baidu.com/s/1SvYjfBCzGupUECGnUcd5Kg?pwd=yhta</a> 提取码: yhta</li>\n</ul>\n</li>\n<li>Scikit-learn 视频推荐\n<ul>\n<li><a href=\"https://www.bilibili.com/video/BV1aV411e7CJ?p=5&amp;vd_source=dfbc322c387caba8f290f66c006d6d6c\">https://www.bilibili.com/video/BV1aV411e7CJ?p=5&amp;vd_source=dfbc322c387caba8f290f66c006d6d6c</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"跟读联系中咬字不清的地方","share":true,"date":"2023-01-04T01:51:59.000Z","updated":"2023-01-04T01:58:02.000Z","_content":"## 2023-01-04\n\n充分发挥市场在资源配置中起的决定性作业\n\n古籍事业繁荣发展\n\n联合国人居署\n","source":"_posts/跟读联系中咬字不清的地方.md","raw":"---\ntitle: 跟读联系中咬字不清的地方\nshare: true\ndate: 2023-01-04 09:51:59 \nupdated: 2023-01-04 09:58:02 \ncategories: public \n---\n## 2023-01-04\n\n充分发挥市场在资源配置中起的决定性作业\n\n古籍事业繁荣发展\n\n联合国人居署\n","slug":"跟读联系中咬字不清的地方","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ad005u4cv9am247gi1","content":"<h2 id=\"2023-01-04\">2023-01-04</h2>\n<p>充分发挥市场在资源配置中起的决定性作业</p>\n<p>古籍事业繁荣发展</p>\n<p>联合国人居署</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<h2 id=\"2023-01-04\">2023-01-04</h2>\n<p>充分发挥市场在资源配置中起的决定性作业</p>\n<p>古籍事业繁荣发展</p>\n<p>联合国人居署</p>\n"},{"title":"答辩可能问题列表","share":true,"date":"2022-12-17T14:21:59.000Z","updated":"2022-12-18T00:07:47.000Z","_content":"- 你在做实验的过程中, 遇到的最大的问题是什么? 是怎么解决的?\n- 总结一下你对数据进行了哪些处理?\n- 总结一下 xxx 模型的特点\n- 总结一下数据仓库各层的作用\n","source":"_posts/答辩可能问题列表.md","raw":"---\ntitle: 答辩可能问题列表\nshare: true\ntags:\n  - public\n  - uncategory\ndate: 2022-12-17 22:21:59 \nupdated: 2022-12-18 08:07:47 \ncategories:\n  - research\n---\n- 你在做实验的过程中, 遇到的最大的问题是什么? 是怎么解决的?\n- 总结一下你对数据进行了哪些处理?\n- 总结一下 xxx 模型的特点\n- 总结一下数据仓库各层的作用\n","slug":"答辩可能问题列表","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ae005x4cv9dsmo94xy","content":"<ul>\n<li>你在做实验的过程中, 遇到的最大的问题是什么? 是怎么解决的?</li>\n<li>总结一下你对数据进行了哪些处理?</li>\n<li>总结一下 xxx 模型的特点</li>\n<li>总结一下数据仓库各层的作用</li>\n</ul>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover6.JPG","excerpt":"","more":"<ul>\n<li>你在做实验的过程中, 遇到的最大的问题是什么? 是怎么解决的?</li>\n<li>总结一下你对数据进行了哪些处理?</li>\n<li>总结一下 xxx 模型的特点</li>\n<li>总结一下数据仓库各层的作用</li>\n</ul>\n"},{"title":"测试MD","share":true,"date":"2022-12-28T11:29:06.000Z","updated":"2022-12-28T11:53:39.000Z","_content":"## 超链接\n\n<a href='#标题-2'>#标题-2</a> <a href='#标题-3'>#标题-3</a> <a href='#标题-4'>#标题-4</a>\n\n<a href='{% post_path 测试MD %}#标题-2'>测试MD#标题-2</a> <a href='{% post_path 测试MD %}#标题-3'>测试MD#标题-3</a> <a href='{% post_path 测试MD %}#标题-4'>测试MD#标题-4</a>\n\n\n## 标题 2\n\n标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容\n\n## 标题 3\n\n标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3.\n\n## 标题 4\n\n标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4\n","source":"_posts/测试MD.md","raw":"---\ntitle: 测试MD\nshare: true\ntags:\n  - uncategory\ndate: 2022-12-28 19:29:06 \nupdated: 2022-12-28 19:53:39 \ncategories: research\n---\n## 超链接\n\n<a href='#标题-2'>#标题-2</a> <a href='#标题-3'>#标题-3</a> <a href='#标题-4'>#标题-4</a>\n\n<a href='{% post_path 测试MD %}#标题-2'>测试MD#标题-2</a> <a href='{% post_path 测试MD %}#标题-3'>测试MD#标题-3</a> <a href='{% post_path 测试MD %}#标题-4'>测试MD#标题-4</a>\n\n\n## 标题 2\n\n标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容\n\n## 标题 3\n\n标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3.\n\n## 标题 4\n\n标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4\n","slug":"测试MD","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70ae00604cv94lwxelwy","content":"<h2 id=\"超链接\">超链接</h2>\n<p><a href='#标题-2'>#标题-2</a> <a href='#标题-3'>#标题-3</a> <a href='#标题-4'>#标题-4</a></p>\n<p><a href='/research/bab9b780be7d.html#标题-2'>测试MD#标题-2</a> <a href='/research/bab9b780be7d.html#标题-3'>测试MD#标题-3</a> <a href='/research/bab9b780be7d.html#标题-4'>测试MD#标题-4</a></p>\n<h2 id=\"标题-2\">标题 2</h2>\n<p>标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容</p>\n<h2 id=\"标题-3\">标题 3</h2>\n<p>标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3.</p>\n<h2 id=\"标题-4\">标题 4</h2>\n<p>标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover3.jpg","excerpt":"","more":"<h2 id=\"超链接\">超链接</h2>\n<p><a href='#标题-2'>#标题-2</a> <a href='#标题-3'>#标题-3</a> <a href='#标题-4'>#标题-4</a></p>\n<p><a href='/research/bab9b780be7d.html#标题-2'>测试MD#标题-2</a> <a href='/research/bab9b780be7d.html#标题-3'>测试MD#标题-3</a> <a href='/research/bab9b780be7d.html#标题-4'>测试MD#标题-4</a></p>\n<h2 id=\"标题-2\">标题 2</h2>\n<p>标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容, 标题 2 内容</p>\n<h2 id=\"标题-3\">标题 3</h2>\n<p>标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3 标题 3.</p>\n<h2 id=\"标题-4\">标题 4</h2>\n<p>标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4 标题 4</p>\n"},{"title":"我的任务","share":true,"date":"2022-12-17T03:48:36.000Z","updated":"2023-01-05T02:06:12.000Z","kanban-plugin":"basic","_content":"\n## 任务列表\n\n- [ ] hexo 支持 excalidraw @{2023-01-05} @@{10:46}\n- [ ] 分析到目前来看成立的实验结果, 分析原因 @{2022-12-29} @@{08:33}\n\n\n## 长期\n\n- [ ] <a href='{% post_path 开会笔记 %}'>开会笔记</a> 🎗 <a href='{% post_path 共享笔记列表 %}'>共享笔记列表</a> 🎗 <a href='{% post_path 文档提交审核流程,自查流程 %}'>文档提交审核流程,自查流程</a> [马杰](https://dr-majie.github.io) <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> <a href='{% post_path 数学手册 %}'>数学手册</a> <a href='{% post_path obsidian任务目标管理 %}'>obsidian任务目标管理</a> <a href='{% post_path 实验列表 %}'>实验列表</a>\n\n\n***\n\n## Archive\n\n- [x] COCA 中如何调用 DAGMM 计算 Affiliation Metric ✅ 2022-12-15\n- [x] COCA 中的 DeepSVDD 模型如何在 AIOps 数据集上使用 ✅ 2022-12-15\n- [x] DAGMM 上的 Affiliation Metric 是否原文是否相似或一致: 不一致, 相差 4% ✅ 2022-12-15\n- [x] DeepSVDD 的在 AIOps 上的实验结果是否与论文一致? <u>基本相似</u> ✅ 2022-12-16 <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a>\n- [x] DeepSVDD 的在 UCR 上的实验结果是否与论文一致?\n- [x] IsolationForest 原理 @{2022-12-19} @@{07:32} ✅ 2022-12-19 09:04\n- [x] Merlion 如何自定义模型 <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> ✅ 2022-12-16\n- [x] Merlion 支持的评估指标 <a href='{% post_path Merlion-源码分析 %}#支持的评估指标'>Merlion-源码分析#支持的评估指标</a> ✅ 2022-12-16\n- [x] merlion.DifferenceTransform 是干嘛的: 用于求 `a[i]=a[i+1]-a[i]` @{2022-12-19} @@{10:01} ✅ 2022-12-19 10:09\n- [x] `transform.resample.Shingle(_size=1_, _stride=1_, _multivar_skip=True_)` 是什么 <a href='{% post_path Merlion-源码分析 %}##shine'>Merlion-源码分析##shine</a> @{2022-12-19} @@{08:04} ✅ 2022-12-19 11:48\n- [x] 修改实验代码适应数据集 <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> ✅ 2022-12-11\n- [x] 处理和分析 KPI 日常检测的 29 数据集 <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> ✅ 2022-12-10\n- [x] 如何使用作者编写的 DeepSVDD 模型? ✅ 2022-12-15 <a href='{% post_path COCA源码分析 %}#如何使用作者编写的-DeepSVDD-模型?'>COCA源码分析#如何使用作者编写的-DeepSVDD-模型?</a>\n- [x] 学会 Affiliation Precision 的算法 ✅ 2022-12-16 <a href='{% post_path Affiliation-Metrics %}'>Affiliation-Metrics</a>\n- [x] 寻找使用数据集 <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> 的论文, 并分析数据使用方式 <a href='{% post_path AIOPS2018数据集的引用论文分析 %}'>AIOPS2018数据集的引用论文分析</a> ✅ 2022-12-10\n- [x] 将 COCA 中的孤立森林添加到我的优化任务中去\n- [x] 将 `COCO: Deep Contrastive One-Class Time Series Anomaly Detection` 加入实验 ✅ 2022-12-13\n- [x] 将 <u>ODDS 数据</u>换为 <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> ✅ 2022-12-09\n- [x] 将通过 csv 管理的数据, 加载到 sqlite 中管理, **目的** 是: ✅ 2022-12-09\n- [x] 给学生讲清楚答辩事宜 ✅ 2022-12-17 21:17\n- [x] 统计 AIOps 的数据信息 (不包含缺失点) https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD @{2022-12-17} @@{21:47} ✅ 2022-12-17 22:03\n- [x] 统计数据是否与文献一致 <br> https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD @{2022-12-17} @@{22:04}<br><br>🔑 结论: 与现有的 4 篇论文一致: <br><a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> ✅ 2022-12-17 22:18\n- [x] 解决 COCA 评估函数 ad_predict 耗时的问题: <u>单变量时间序列, 15 万条数据,评估时间 15 分钟</u> (修改后训练时间从 3:09:46 减少到 0:40:37) ✅ 2022-12-14\n- [x] 2022-12-19 12:00 IsolationForest 如何实现异常检测?是滑动窗口还是? <br>通过 <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> 来看, 通过 Shingle 来看滑动窗口 @{2022-12-18} @@{16:16} ✅ 2022-12-19 12:00\n- [x] 2022-12-20 12:24 Merlion 如何添加 train_pro_progress? <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> 使用 TransformSequence 类@{2022-12-19} @@{12:02} ✅ 2022-12-19 12:34\n- [x] 2022-12-20 12:24 基于 AIOps 实现 IF <a href='{% post_path IsolationForest-实现 %}'>IsolationForest-实现</a> <a href='{% post_path Merlion-例子 %}'>Merlion-例子</a> <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> @{2022-12-18} @@{10:26} ✅ 2022-12-20 12:24\n- [x] 2022-12-22 22:12 COCA 封装后执行结果和原来结果奇怪的问题 <a href='{% post_path COCA源码分析 %}#同样的代码,-为何执行结果不一致?'>COCA源码分析#同样的代码,-为何执行结果不一致?</a> @{2022-12-22} @@{10:14} ✅ 2022-12-22 22:12\n- [x] 2022-12-22 22:12 封装 COCA 到 NNI 中 @{2022-12-22} @@{00:17} ✅ 2022-12-22 22:12\n- [x] 2022-12-22 22:12 是按 rolling window 计算的还是按照 point 计算的 @{2022-12-21} @@{10:36} ✅ 2022-12-21 12:00\n- [x] 2022-12-23 14:32 <a href='{% post_path python设计模式 %}'>python设计模式</a> 总结,将其应用到我的代码中: 最后我选抽象工厂模式 @{2022-12-23} @@{10:27} ✅ 2022-12-23 14:32\n- [x] 2022-12-29 08:59 备份实验数据到阿里云 <a href='{% post_path 2022-12-17-实验设计 %}'>2022-12-17-实验设计</a> @{2022-12-29} @@{07:54} ✅ 2022-12-29 08:32\n- [x] 2022-12-29 08:59 集成 COCA 到 NNI 后, coca 报错: RuntimeError: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)<br><br>A: Project 输入错误 @{2022-12-23} @@{14:32} ✅ 2022-12-28 07:53\n- [x] 2022-12-29 08:59 <a href='{% post_path 2022-12-17-实验设计 %}'>2022-12-17-实验设计</a> @{2022-12-17} ✅ 2022-12-29 08:32\n- [x] 2023-01-02 17:49 在 29 个 KPI 上使用 COCA 跑实验 @{2022-12-31} @@{09:04} ✅ 2022-12-31 10:07\n- [x] 2023-01-02 17:49 收集能够支撑实验的数据集 @{2022-12-30} @@{09:53} ✅ 2022-12-30 10:50\n- [x] 2023-01-04 09:06 查询所有实验中 valid loss 最小的实验 @{2023-01-02} @@{17:49} ✅ 2023-01-03 08:37\n- [x] 2023-01-05 10:05 coca 中 time_step 为 2 时, 如何计算 score? 🔑 <a href='{% post_path 时间序列(源于coca)中的-time-step %}'>时间序列(源于coca)中的-time-step</a> @{2022-12-21} @@{12:00} ✅ 2023-01-05 10:05\n\n%% kanban:settings\n```\n{\"kanban-plugin\":\"basic\",\"new-line-trigger\":\"shift-enter\",\"show-checkboxes\":true,\"link-date-to-daily-note\":false,\"new-card-insertion-method\":\"prepend-compact\",\"hide-card-count\":false,\"hide-tags-in-title\":false,\"hide-tags-display\":false,\"show-add-list\":false,\"show-relative-date\":true,\"hide-date-display\":true,\"date-picker-week-start\":1,\"prepend-archive-date\":true,\"hide-date-in-title\":true,\"show-search\":false,\"show-board-settings\":false,\"show-view-as-markdown\":false,\"show-archive-all\":false}\n```\n%%","source":"_posts/我的任务.md","raw":"---\n\ntitle: 我的任务\nshare: true\ntags:\n  - plans\ndate: 2022-12-17 11:48:36\nupdated: 2023-01-05 10:06:12\nkanban-plugin: basic\ncategories: research\n\n---\n\n## 任务列表\n\n- [ ] hexo 支持 excalidraw @{2023-01-05} @@{10:46}\n- [ ] 分析到目前来看成立的实验结果, 分析原因 @{2022-12-29} @@{08:33}\n\n\n## 长期\n\n- [ ] <a href='{% post_path 开会笔记 %}'>开会笔记</a> 🎗 <a href='{% post_path 共享笔记列表 %}'>共享笔记列表</a> 🎗 <a href='{% post_path 文档提交审核流程,自查流程 %}'>文档提交审核流程,自查流程</a> [马杰](https://dr-majie.github.io) <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> <a href='{% post_path 数学手册 %}'>数学手册</a> <a href='{% post_path obsidian任务目标管理 %}'>obsidian任务目标管理</a> <a href='{% post_path 实验列表 %}'>实验列表</a>\n\n\n***\n\n## Archive\n\n- [x] COCA 中如何调用 DAGMM 计算 Affiliation Metric ✅ 2022-12-15\n- [x] COCA 中的 DeepSVDD 模型如何在 AIOps 数据集上使用 ✅ 2022-12-15\n- [x] DAGMM 上的 Affiliation Metric 是否原文是否相似或一致: 不一致, 相差 4% ✅ 2022-12-15\n- [x] DeepSVDD 的在 AIOps 上的实验结果是否与论文一致? <u>基本相似</u> ✅ 2022-12-16 <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a>\n- [x] DeepSVDD 的在 UCR 上的实验结果是否与论文一致?\n- [x] IsolationForest 原理 @{2022-12-19} @@{07:32} ✅ 2022-12-19 09:04\n- [x] Merlion 如何自定义模型 <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> ✅ 2022-12-16\n- [x] Merlion 支持的评估指标 <a href='{% post_path Merlion-源码分析 %}#支持的评估指标'>Merlion-源码分析#支持的评估指标</a> ✅ 2022-12-16\n- [x] merlion.DifferenceTransform 是干嘛的: 用于求 `a[i]=a[i+1]-a[i]` @{2022-12-19} @@{10:01} ✅ 2022-12-19 10:09\n- [x] `transform.resample.Shingle(_size=1_, _stride=1_, _multivar_skip=True_)` 是什么 <a href='{% post_path Merlion-源码分析 %}##shine'>Merlion-源码分析##shine</a> @{2022-12-19} @@{08:04} ✅ 2022-12-19 11:48\n- [x] 修改实验代码适应数据集 <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> ✅ 2022-12-11\n- [x] 处理和分析 KPI 日常检测的 29 数据集 <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> ✅ 2022-12-10\n- [x] 如何使用作者编写的 DeepSVDD 模型? ✅ 2022-12-15 <a href='{% post_path COCA源码分析 %}#如何使用作者编写的-DeepSVDD-模型?'>COCA源码分析#如何使用作者编写的-DeepSVDD-模型?</a>\n- [x] 学会 Affiliation Precision 的算法 ✅ 2022-12-16 <a href='{% post_path Affiliation-Metrics %}'>Affiliation-Metrics</a>\n- [x] 寻找使用数据集 <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> 的论文, 并分析数据使用方式 <a href='{% post_path AIOPS2018数据集的引用论文分析 %}'>AIOPS2018数据集的引用论文分析</a> ✅ 2022-12-10\n- [x] 将 COCA 中的孤立森林添加到我的优化任务中去\n- [x] 将 `COCO: Deep Contrastive One-Class Time Series Anomaly Detection` 加入实验 ✅ 2022-12-13\n- [x] 将 <u>ODDS 数据</u>换为 <a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> ✅ 2022-12-09\n- [x] 将通过 csv 管理的数据, 加载到 sqlite 中管理, **目的** 是: ✅ 2022-12-09\n- [x] 给学生讲清楚答辩事宜 ✅ 2022-12-17 21:17\n- [x] 统计 AIOps 的数据信息 (不包含缺失点) https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD @{2022-12-17} @@{21:47} ✅ 2022-12-17 22:03\n- [x] 统计数据是否与文献一致 <br> https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD @{2022-12-17} @@{22:04}<br><br>🔑 结论: 与现有的 4 篇论文一致: <br><a href='{% post_path AIOPS2018-数据集 %}'>AIOPS2018-数据集</a> ✅ 2022-12-17 22:18\n- [x] 解决 COCA 评估函数 ad_predict 耗时的问题: <u>单变量时间序列, 15 万条数据,评估时间 15 分钟</u> (修改后训练时间从 3:09:46 减少到 0:40:37) ✅ 2022-12-14\n- [x] 2022-12-19 12:00 IsolationForest 如何实现异常检测?是滑动窗口还是? <br>通过 <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> 来看, 通过 Shingle 来看滑动窗口 @{2022-12-18} @@{16:16} ✅ 2022-12-19 12:00\n- [x] 2022-12-20 12:24 Merlion 如何添加 train_pro_progress? <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> 使用 TransformSequence 类@{2022-12-19} @@{12:02} ✅ 2022-12-19 12:34\n- [x] 2022-12-20 12:24 基于 AIOps 实现 IF <a href='{% post_path IsolationForest-实现 %}'>IsolationForest-实现</a> <a href='{% post_path Merlion-例子 %}'>Merlion-例子</a> <a href='{% post_path Merlion-源码分析 %}'>Merlion-源码分析</a> @{2022-12-18} @@{10:26} ✅ 2022-12-20 12:24\n- [x] 2022-12-22 22:12 COCA 封装后执行结果和原来结果奇怪的问题 <a href='{% post_path COCA源码分析 %}#同样的代码,-为何执行结果不一致?'>COCA源码分析#同样的代码,-为何执行结果不一致?</a> @{2022-12-22} @@{10:14} ✅ 2022-12-22 22:12\n- [x] 2022-12-22 22:12 封装 COCA 到 NNI 中 @{2022-12-22} @@{00:17} ✅ 2022-12-22 22:12\n- [x] 2022-12-22 22:12 是按 rolling window 计算的还是按照 point 计算的 @{2022-12-21} @@{10:36} ✅ 2022-12-21 12:00\n- [x] 2022-12-23 14:32 <a href='{% post_path python设计模式 %}'>python设计模式</a> 总结,将其应用到我的代码中: 最后我选抽象工厂模式 @{2022-12-23} @@{10:27} ✅ 2022-12-23 14:32\n- [x] 2022-12-29 08:59 备份实验数据到阿里云 <a href='{% post_path 2022-12-17-实验设计 %}'>2022-12-17-实验设计</a> @{2022-12-29} @@{07:54} ✅ 2022-12-29 08:32\n- [x] 2022-12-29 08:59 集成 COCA 到 NNI 后, coca 报错: RuntimeError: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)<br><br>A: Project 输入错误 @{2022-12-23} @@{14:32} ✅ 2022-12-28 07:53\n- [x] 2022-12-29 08:59 <a href='{% post_path 2022-12-17-实验设计 %}'>2022-12-17-实验设计</a> @{2022-12-17} ✅ 2022-12-29 08:32\n- [x] 2023-01-02 17:49 在 29 个 KPI 上使用 COCA 跑实验 @{2022-12-31} @@{09:04} ✅ 2022-12-31 10:07\n- [x] 2023-01-02 17:49 收集能够支撑实验的数据集 @{2022-12-30} @@{09:53} ✅ 2022-12-30 10:50\n- [x] 2023-01-04 09:06 查询所有实验中 valid loss 最小的实验 @{2023-01-02} @@{17:49} ✅ 2023-01-03 08:37\n- [x] 2023-01-05 10:05 coca 中 time_step 为 2 时, 如何计算 score? 🔑 <a href='{% post_path 时间序列(源于coca)中的-time-step %}'>时间序列(源于coca)中的-time-step</a> @{2022-12-21} @@{12:00} ✅ 2023-01-05 10:05\n\n%% kanban:settings\n```\n{\"kanban-plugin\":\"basic\",\"new-line-trigger\":\"shift-enter\",\"show-checkboxes\":true,\"link-date-to-daily-note\":false,\"new-card-insertion-method\":\"prepend-compact\",\"hide-card-count\":false,\"hide-tags-in-title\":false,\"hide-tags-display\":false,\"show-add-list\":false,\"show-relative-date\":true,\"hide-date-display\":true,\"date-picker-week-start\":1,\"prepend-archive-date\":true,\"hide-date-in-title\":true,\"show-search\":false,\"show-board-settings\":false,\"show-view-as-markdown\":false,\"show-archive-all\":false}\n```\n%%","slug":"我的任务","published":1,"comments":1,"layout":"post","photos":[],"link":"","_id":"clcim70al007i4cv93cfc1g97","content":"<h2 id=\"任务列表\">任务列表</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> hexo 支持 excalidraw @{2023-01-05} @@{10:46}</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> 分析到目前来看成立的实验结果, 分析原因 @{2022-12-29} @@{08:33}</li>\n</ul>\n<h2 id=\"长期\">长期</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> <a href=''>开会笔记</a> 🎗 <a href=''>共享笔记列表</a> 🎗 <a href='/research/01adbc88cc65.html'>文档提交审核流程,自查流程</a> <a href=\"https://dr-majie.github.io\">马杰</a> <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> <a href=''>数学手册</a> <a href=''>obsidian任务目标管理</a> <a href='/research/fd75146dcf37.html'>实验列表</a></li>\n</ul>\n<hr>\n<h2 id=\"Archive\">Archive</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> COCA 中如何调用 DAGMM 计算 Affiliation Metric ✅ 2022-12-15</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> COCA 中的 DeepSVDD 模型如何在 AIOps 数据集上使用 ✅ 2022-12-15</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> DAGMM 上的 Affiliation Metric 是否原文是否相似或一致: 不一致, 相差 4% ✅ 2022-12-15</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> DeepSVDD 的在 AIOps 上的实验结果是否与论文一致? <u>基本相似</u> ✅ 2022-12-16 <a href='/research/33cadae479b1.html'>Merlion-源码分析</a></li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> DeepSVDD 的在 UCR 上的实验结果是否与论文一致?</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> IsolationForest 原理 @{2022-12-19} @@{07:32} ✅ 2022-12-19 09:04</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> Merlion 如何自定义模型 <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> ✅ 2022-12-16</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> Merlion 支持的评估指标 <a href='/research/33cadae479b1.html#支持的评估指标'>Merlion-源码分析#支持的评估指标</a> ✅ 2022-12-16</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> merlion.DifferenceTransform 是干嘛的: 用于求 <code>a[i]=a[i+1]-a[i]</code> @{2022-12-19} @@{10:01} ✅ 2022-12-19 10:09</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> <code>transform.resample.Shingle(_size=1_, _stride=1_, _multivar_skip=True_)</code> 是什么 <a href='/research/33cadae479b1.html##shine'>Merlion-源码分析##shine</a> @{2022-12-19} @@{08:04} ✅ 2022-12-19 11:48</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 修改实验代码适应数据集 <a href=''>AIOPS2018-数据集</a> ✅ 2022-12-11</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 处理和分析 KPI 日常检测的 29 数据集 <a href=''>AIOPS2018-数据集</a> ✅ 2022-12-10</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 如何使用作者编写的 DeepSVDD 模型? ✅ 2022-12-15 <a href='/research/101dd24c918c.html#如何使用作者编写的-DeepSVDD-模型?'>COCA源码分析#如何使用作者编写的-DeepSVDD-模型?</a></li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 学会 Affiliation Precision 的算法 ✅ 2022-12-16 <a href=''>Affiliation-Metrics</a></li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 寻找使用数据集 <a href=''>AIOPS2018-数据集</a> 的论文, 并分析数据使用方式 <a href=''>AIOPS2018数据集的引用论文分析</a> ✅ 2022-12-10</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 将 COCA 中的孤立森林添加到我的优化任务中去</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 将 <code>COCO: Deep Contrastive One-Class Time Series Anomaly Detection</code> 加入实验 ✅ 2022-12-13</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 将 <u>ODDS 数据</u>换为 <a href=''>AIOPS2018-数据集</a> ✅ 2022-12-09</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 将通过 csv 管理的数据, 加载到 sqlite 中管理, <strong>目的</strong> 是: ✅ 2022-12-09</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 给学生讲清楚答辩事宜 ✅ 2022-12-17 21:17</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 统计 AIOps 的数据信息 (不包含缺失点) <a href=\"https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD\">https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD</a> @{2022-12-17} @@{21:47} ✅ 2022-12-17 22:03</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 统计数据是否与文献一致 <br> <a href=\"https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD\">https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD</a> @{2022-12-17} @@{22:04}<br><br>🔑 结论: 与现有的 4 篇论文一致: <br><a href=''>AIOPS2018-数据集</a> ✅ 2022-12-17 22:18</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 解决 COCA 评估函数 ad_predict 耗时的问题: <u>单变量时间序列, 15 万条数据,评估时间 15 分钟</u> (修改后训练时间从 3:09:46 减少到 0:40:37) ✅ 2022-12-14</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-19 12:00 IsolationForest 如何实现异常检测?是滑动窗口还是? <br>通过 <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> 来看, 通过 Shingle 来看滑动窗口 @{2022-12-18} @@{16:16} ✅ 2022-12-19 12:00</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-20 12:24 Merlion 如何添加 train_pro_progress? <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> 使用 TransformSequence 类@{2022-12-19} @@{12:02} ✅ 2022-12-19 12:34</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-20 12:24 基于 AIOps 实现 IF <a href='/uncategory/965a9fa2db25.html'>IsolationForest-实现</a> <a href=''>Merlion-例子</a> <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> @{2022-12-18} @@{10:26} ✅ 2022-12-20 12:24</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-22 22:12 COCA 封装后执行结果和原来结果奇怪的问题 <a href='/research/101dd24c918c.html#同样的代码,-为何执行结果不一致?'>COCA源码分析#同样的代码,-为何执行结果不一致?</a> @{2022-12-22} @@{10:14} ✅ 2022-12-22 22:12</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-22 22:12 封装 COCA 到 NNI 中 @{2022-12-22} @@{00:17} ✅ 2022-12-22 22:12</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-22 22:12 是按 rolling window 计算的还是按照 point 计算的 @{2022-12-21} @@{10:36} ✅ 2022-12-21 12:00</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-23 14:32 <a href='/public/57dc74322301.html'>python设计模式</a> 总结,将其应用到我的代码中: 最后我选抽象工厂模式 @{2022-12-23} @@{10:27} ✅ 2022-12-23 14:32</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-29 08:59 备份实验数据到阿里云 <a href='/research/b1ff1c2fb075.html'>2022-12-17-实验设计</a> @{2022-12-29} @@{07:54} ✅ 2022-12-29 08:32</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-29 08:59 集成 COCA 到 NNI 后, coca 报错: RuntimeError: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)<br><br>A: Project 输入错误 @{2022-12-23} @@{14:32} ✅ 2022-12-28 07:53</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-29 08:59 <a href='/research/b1ff1c2fb075.html'>2022-12-17-实验设计</a> @{2022-12-17} ✅ 2022-12-29 08:32</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2023-01-02 17:49 在 29 个 KPI 上使用 COCA 跑实验 @{2022-12-31} @@{09:04} ✅ 2022-12-31 10:07</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2023-01-02 17:49 收集能够支撑实验的数据集 @{2022-12-30} @@{09:53} ✅ 2022-12-30 10:50</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2023-01-04 09:06 查询所有实验中 valid loss 最小的实验 @{2023-01-02} @@{17:49} ✅ 2023-01-03 08:37</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2023-01-05 10:05 coca 中 time_step 为 2 时, 如何计算 score? 🔑 <a href='/research/005ecd9a1270.html'>时间序列(源于coca)中的-time-step</a> @{2022-12-21} @@{12:00} ✅ 2023-01-05 10:05</li>\n</ul>\n<p>%% kanban:settings</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;kanban-plugin&quot;:&quot;basic&quot;,&quot;new-line-trigger&quot;:&quot;shift-enter&quot;,&quot;show-checkboxes&quot;:true,&quot;link-date-to-daily-note&quot;:false,&quot;new-card-insertion-method&quot;:&quot;prepend-compact&quot;,&quot;hide-card-count&quot;:false,&quot;hide-tags-in-title&quot;:false,&quot;hide-tags-display&quot;:false,&quot;show-add-list&quot;:false,&quot;show-relative-date&quot;:true,&quot;hide-date-display&quot;:true,&quot;date-picker-week-start&quot;:1,&quot;prepend-archive-date&quot;:true,&quot;hide-date-in-title&quot;:true,&quot;show-search&quot;:false,&quot;show-board-settings&quot;:false,&quot;show-view-as-markdown&quot;:false,&quot;show-archive-all&quot;:false&#125;</span><br></pre></td></tr></table></figure>\n<p>%%</p>\n","site":{"data":{}},"cover":"https://cdn.jsdelivr.net/gh/Justlovesmile/CDN2/post/cover4.jpg","excerpt":"","more":"<h2 id=\"任务列表\">任务列表</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> hexo 支持 excalidraw @{2023-01-05} @@{10:46}</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> 分析到目前来看成立的实验结果, 分析原因 @{2022-12-29} @@{08:33}</li>\n</ul>\n<h2 id=\"长期\">长期</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"\" type=\"checkbox\"> <a href=''>开会笔记</a> 🎗 <a href=''>共享笔记列表</a> 🎗 <a href='/research/01adbc88cc65.html'>文档提交审核流程,自查流程</a> <a href=\"https://dr-majie.github.io\">马杰</a> <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> <a href=''>数学手册</a> <a href=''>obsidian任务目标管理</a> <a href='/research/fd75146dcf37.html'>实验列表</a></li>\n</ul>\n<hr>\n<h2 id=\"Archive\">Archive</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> COCA 中如何调用 DAGMM 计算 Affiliation Metric ✅ 2022-12-15</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> COCA 中的 DeepSVDD 模型如何在 AIOps 数据集上使用 ✅ 2022-12-15</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> DAGMM 上的 Affiliation Metric 是否原文是否相似或一致: 不一致, 相差 4% ✅ 2022-12-15</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> DeepSVDD 的在 AIOps 上的实验结果是否与论文一致? <u>基本相似</u> ✅ 2022-12-16 <a href='/research/33cadae479b1.html'>Merlion-源码分析</a></li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> DeepSVDD 的在 UCR 上的实验结果是否与论文一致?</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> IsolationForest 原理 @{2022-12-19} @@{07:32} ✅ 2022-12-19 09:04</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> Merlion 如何自定义模型 <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> ✅ 2022-12-16</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> Merlion 支持的评估指标 <a href='/research/33cadae479b1.html#支持的评估指标'>Merlion-源码分析#支持的评估指标</a> ✅ 2022-12-16</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> merlion.DifferenceTransform 是干嘛的: 用于求 <code>a[i]=a[i+1]-a[i]</code> @{2022-12-19} @@{10:01} ✅ 2022-12-19 10:09</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> <code>transform.resample.Shingle(_size=1_, _stride=1_, _multivar_skip=True_)</code> 是什么 <a href='/research/33cadae479b1.html##shine'>Merlion-源码分析##shine</a> @{2022-12-19} @@{08:04} ✅ 2022-12-19 11:48</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 修改实验代码适应数据集 <a href=''>AIOPS2018-数据集</a> ✅ 2022-12-11</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 处理和分析 KPI 日常检测的 29 数据集 <a href=''>AIOPS2018-数据集</a> ✅ 2022-12-10</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 如何使用作者编写的 DeepSVDD 模型? ✅ 2022-12-15 <a href='/research/101dd24c918c.html#如何使用作者编写的-DeepSVDD-模型?'>COCA源码分析#如何使用作者编写的-DeepSVDD-模型?</a></li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 学会 Affiliation Precision 的算法 ✅ 2022-12-16 <a href=''>Affiliation-Metrics</a></li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 寻找使用数据集 <a href=''>AIOPS2018-数据集</a> 的论文, 并分析数据使用方式 <a href=''>AIOPS2018数据集的引用论文分析</a> ✅ 2022-12-10</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 将 COCA 中的孤立森林添加到我的优化任务中去</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 将 <code>COCO: Deep Contrastive One-Class Time Series Anomaly Detection</code> 加入实验 ✅ 2022-12-13</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 将 <u>ODDS 数据</u>换为 <a href=''>AIOPS2018-数据集</a> ✅ 2022-12-09</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 将通过 csv 管理的数据, 加载到 sqlite 中管理, <strong>目的</strong> 是: ✅ 2022-12-09</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 给学生讲清楚答辩事宜 ✅ 2022-12-17 21:17</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 统计 AIOps 的数据信息 (不包含缺失点) <a href=\"https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD\">https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD</a> @{2022-12-17} @@{21:47} ✅ 2022-12-17 22:03</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 统计数据是否与文献一致 <br> <a href=\"https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD\">https://uniplore.feishu.cn/wiki/wikcnHWUDOLubE7M0yaarfmrQSb?sheet=zGMCSD</a> @{2022-12-17} @@{22:04}<br><br>🔑 结论: 与现有的 4 篇论文一致: <br><a href=''>AIOPS2018-数据集</a> ✅ 2022-12-17 22:18</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 解决 COCA 评估函数 ad_predict 耗时的问题: <u>单变量时间序列, 15 万条数据,评估时间 15 分钟</u> (修改后训练时间从 3:09:46 减少到 0:40:37) ✅ 2022-12-14</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-19 12:00 IsolationForest 如何实现异常检测?是滑动窗口还是? <br>通过 <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> 来看, 通过 Shingle 来看滑动窗口 @{2022-12-18} @@{16:16} ✅ 2022-12-19 12:00</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-20 12:24 Merlion 如何添加 train_pro_progress? <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> 使用 TransformSequence 类@{2022-12-19} @@{12:02} ✅ 2022-12-19 12:34</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-20 12:24 基于 AIOps 实现 IF <a href='/uncategory/965a9fa2db25.html'>IsolationForest-实现</a> <a href=''>Merlion-例子</a> <a href='/research/33cadae479b1.html'>Merlion-源码分析</a> @{2022-12-18} @@{10:26} ✅ 2022-12-20 12:24</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-22 22:12 COCA 封装后执行结果和原来结果奇怪的问题 <a href='/research/101dd24c918c.html#同样的代码,-为何执行结果不一致?'>COCA源码分析#同样的代码,-为何执行结果不一致?</a> @{2022-12-22} @@{10:14} ✅ 2022-12-22 22:12</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-22 22:12 封装 COCA 到 NNI 中 @{2022-12-22} @@{00:17} ✅ 2022-12-22 22:12</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-22 22:12 是按 rolling window 计算的还是按照 point 计算的 @{2022-12-21} @@{10:36} ✅ 2022-12-21 12:00</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-23 14:32 <a href='/public/57dc74322301.html'>python设计模式</a> 总结,将其应用到我的代码中: 最后我选抽象工厂模式 @{2022-12-23} @@{10:27} ✅ 2022-12-23 14:32</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-29 08:59 备份实验数据到阿里云 <a href='/research/b1ff1c2fb075.html'>2022-12-17-实验设计</a> @{2022-12-29} @@{07:54} ✅ 2022-12-29 08:32</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-29 08:59 集成 COCA 到 NNI 后, coca 报错: RuntimeError: mat1 and mat2 shapes cannot be multiplied (6x435 and 232x116)<br><br>A: Project 输入错误 @{2022-12-23} @@{14:32} ✅ 2022-12-28 07:53</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2022-12-29 08:59 <a href='/research/b1ff1c2fb075.html'>2022-12-17-实验设计</a> @{2022-12-17} ✅ 2022-12-29 08:32</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2023-01-02 17:49 在 29 个 KPI 上使用 COCA 跑实验 @{2022-12-31} @@{09:04} ✅ 2022-12-31 10:07</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2023-01-02 17:49 收集能够支撑实验的数据集 @{2022-12-30} @@{09:53} ✅ 2022-12-30 10:50</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2023-01-04 09:06 查询所有实验中 valid loss 最小的实验 @{2023-01-02} @@{17:49} ✅ 2023-01-03 08:37</li>\n<li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" checked=\"\" disabled=\"\" type=\"checkbox\"> 2023-01-05 10:05 coca 中 time_step 为 2 时, 如何计算 score? 🔑 <a href='/research/005ecd9a1270.html'>时间序列(源于coca)中的-time-step</a> @{2022-12-21} @@{12:00} ✅ 2023-01-05 10:05</li>\n</ul>\n<p>%% kanban:settings</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&quot;kanban-plugin&quot;:&quot;basic&quot;,&quot;new-line-trigger&quot;:&quot;shift-enter&quot;,&quot;show-checkboxes&quot;:true,&quot;link-date-to-daily-note&quot;:false,&quot;new-card-insertion-method&quot;:&quot;prepend-compact&quot;,&quot;hide-card-count&quot;:false,&quot;hide-tags-in-title&quot;:false,&quot;hide-tags-display&quot;:false,&quot;show-add-list&quot;:false,&quot;show-relative-date&quot;:true,&quot;hide-date-display&quot;:true,&quot;date-picker-week-start&quot;:1,&quot;prepend-archive-date&quot;:true,&quot;hide-date-in-title&quot;:true,&quot;show-search&quot;:false,&quot;show-board-settings&quot;:false,&quot;show-view-as-markdown&quot;:false,&quot;show-archive-all&quot;:false&#125;</span><br></pre></td></tr></table></figure>\n<p>%%</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"clcim709e00074cv9blal55q9","category_id":"clcim709c00044cv9c32903r1","_id":"clcim709h000d4cv97q7jbikx"},{"post_id":"clcim709800014cv95r2c0z9z","category_id":"clcim709c00044cv9c32903r1","_id":"clcim709i000i4cv94kpchkfm"},{"post_id":"clcim709g000b4cv9g1srffsh","category_id":"clcim709c00044cv9c32903r1","_id":"clcim709i000l4cv97er216io"},{"post_id":"clcim709b00034cv9d6mpfsax","category_id":"clcim709c00044cv9c32903r1","_id":"clcim709k000q4cv96ntr1zuh"},{"post_id":"clcim709h000h4cv96hiufdl1","category_id":"clcim709c00044cv9c32903r1","_id":"clcim709m000t4cv9fu728sk5"},{"post_id":"clcim709d00064cv9fyau941a","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709n000y4cv90wfe14gb"},{"post_id":"clcim709i000k4cv9380d5hgg","category_id":"clcim709c00044cv9c32903r1","_id":"clcim709n00114cv948z7hcko"},{"post_id":"clcim709j000p4cv99pq03kxj","category_id":"clcim709c00044cv9c32903r1","_id":"clcim709o00154cv9aqzz9fm7"},{"post_id":"clcim709e00084cv9b22og9to","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709o00184cv99bpgexxc"},{"post_id":"clcim709l000s4cv9el430w7p","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709p001c4cv910hm6phn"},{"post_id":"clcim709m000x4cv91ynj66yi","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709p001f4cv9d0xhh8at"},{"post_id":"clcim709g000c4cv9220dg1x0","category_id":"clcim709m000u4cv976d235g4","_id":"clcim709q001j4cv9f927fqsx"},{"post_id":"clcim709n00104cv9fp298tiy","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709q001m4cv9foj31k6b"},{"post_id":"clcim709o00144cv94g5h1tqu","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709s001q4cv9e3tobev7"},{"post_id":"clcim709o00174cv972ox0qd2","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709t001t4cv9d8qr9p5o"},{"post_id":"clcim709p001b4cv9bw3g5un7","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709t001x4cv98ajdan15"},{"post_id":"clcim709p001e4cv9btrjbiwq","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709u00204cv9ek91camk"},{"post_id":"clcim709q001i4cv9e3cz07ie","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709u00244cv93iou6zee"},{"post_id":"clcim709q001l4cv92ekhb9y8","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709v00274cv9h9q87u1s"},{"post_id":"clcim709r001p4cv9b10k4gml","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709v002b4cv917fl9y4b"},{"post_id":"clcim709t001s4cv9gal19bo0","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709w002e4cv9f5jy44vy"},{"post_id":"clcim709t001w4cv967h7foie","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709w002i4cv97xmf00wc"},{"post_id":"clcim709u001z4cv9e6b03gy4","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709x002l4cv9a8v5892a"},{"post_id":"clcim709u00234cv99wzae1ap","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709x002p4cv9aktv5zj2"},{"post_id":"clcim709v00264cv9bkft9ll9","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709y002s4cv927n38gz0"},{"post_id":"clcim709v002a4cv9cxpq0xqe","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709y002w4cv96isp6cgn"},{"post_id":"clcim709v002d4cv9go82c8um","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim709z002z4cv95u3b5m1r"},{"post_id":"clcim709w002h4cv9fvfefnb8","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a000334cv9ez2takug"},{"post_id":"clcim709x002k4cv925q8c38n","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a000364cv98z47abq7"},{"post_id":"clcim709x002o4cv9an2ae8s6","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a1003a4cv9bbu5dsqx"},{"post_id":"clcim709y002r4cv9ccxo7lbb","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a1003d4cv9h9kjfjjs"},{"post_id":"clcim709y002v4cv982fu9gih","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a2003h4cv99mrheoqo"},{"post_id":"clcim709z002y4cv9e3ee6gth","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a2003k4cv98k487hhg"},{"post_id":"clcim70a000324cv9fayt33fs","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a3003o4cv9gbpbhvak"},{"post_id":"clcim70a000354cv9c21d11rj","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a3003r4cv99svs2i6b"},{"post_id":"clcim70a100394cv9gfbt3khz","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a4003u4cv9esw5hasm"},{"post_id":"clcim70a1003c4cv94l12co17","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a4003y4cv9cb19dxyl"},{"post_id":"clcim70a2003g4cv9bqmz7nnq","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a400414cv914961afn"},{"post_id":"clcim70a2003j4cv91g6c4lgk","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a500454cv90i5a1ki6"},{"post_id":"clcim70a3003n4cv99jkgb0y7","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a500484cv9bw7jgevu"},{"post_id":"clcim70a3003q4cv960m72k4g","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a6004c4cv9cu5r4qti"},{"post_id":"clcim70a3003t4cv92spx36xf","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a6004f4cv9eimy25p9"},{"post_id":"clcim70a4003x4cv9gm2d690n","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a7004j4cv9dps4f22h"},{"post_id":"clcim70a400404cv9gt2m9wsf","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a7004m4cv99dascn4p"},{"post_id":"clcim70a500444cv9amkmc0yw","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70a8004p4cv983wyhnva"},{"post_id":"clcim70a500474cv94i5b0j26","category_id":"clcim709c00044cv9c32903r1","_id":"clcim70a8004s4cv9e0uieawz"},{"post_id":"clcim70a6004b4cv9hty090mq","category_id":"clcim709c00044cv9c32903r1","_id":"clcim70a9004v4cv9eg698nff"},{"post_id":"clcim70a6004e4cv95k8i1wz2","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70aa004y4cv9aiwa9wlz"},{"post_id":"clcim70a6004i4cv95cpufbb6","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70aa00514cv92qm1436s"},{"post_id":"clcim70a7004l4cv95fnv13uy","category_id":"clcim709c00044cv9c32903r1","_id":"clcim70aa00544cv9f7re6ckh"},{"post_id":"clcim70a7004o4cv9a7si7uv7","category_id":"clcim709m000u4cv976d235g4","_id":"clcim70aa00574cv9buiwd07r"},{"post_id":"clcim70a8004r4cv9ayfe8o3h","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70ab005a4cv9033t7agv"},{"post_id":"clcim70a8004u4cv98x519wz7","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70ab005d4cv9dvkzg4gy"},{"post_id":"clcim70a9004x4cv93ohkgnm0","category_id":"clcim709c00044cv9c32903r1","_id":"clcim70ab005g4cv96noxa754"},{"post_id":"clcim70aa00504cv9gjgb3buf","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70ac005j4cv9doy2a3h3"},{"post_id":"clcim70aa00534cv935u64yku","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70ac005m4cv91t3tecyr"},{"post_id":"clcim70aa00564cv974jn030v","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70ac005p4cv99mi6hyd4"},{"post_id":"clcim70ab00594cv90any7xvy","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70ad005s4cv93a97hs5i"},{"post_id":"clcim70ab005c4cv9fu501thc","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70ad005v4cv93aoqdtyf"},{"post_id":"clcim70ab005f4cv9b48lappr","category_id":"clcim709c00044cv9c32903r1","_id":"clcim70ae005y4cv9a42401wd"},{"post_id":"clcim70ab005i4cv98gn32958","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70ae00614cv98syk0juz"},{"post_id":"clcim70ac005l4cv9ehww6t0k","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70ae00634cv99ntm1x44"},{"post_id":"clcim70ac005o4cv90pes9qd7","category_id":"clcim709c00044cv9c32903r1","_id":"clcim70af00654cv9epvs59wa"},{"post_id":"clcim70ac005r4cv9etbxhb8x","category_id":"clcim709c00044cv9c32903r1","_id":"clcim70af00674cv9dvlocme1"},{"post_id":"clcim70ad005u4cv9am247gi1","category_id":"clcim709m000u4cv976d235g4","_id":"clcim70af00694cv9f91g08sq"},{"post_id":"clcim70ae005x4cv9dsmo94xy","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70af006b4cv9gkfb00o0"},{"post_id":"clcim70ae00604cv94lwxelwy","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70af006d4cv96pnvex28"},{"post_id":"clcim70al007i4cv93cfc1g97","category_id":"clcim709h000e4cv9h8od5yrp","_id":"clcim70al007k4cv93gag4lb5"}],"PostTag":[{"post_id":"clcim709g000b4cv9g1srffsh","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim709h000g4cv97gn53kxr"},{"post_id":"clcim709g000b4cv9g1srffsh","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709i000j4cv90qe72z1t"},{"post_id":"clcim709800014cv95r2c0z9z","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim709j000o4cv91cbz4ap9"},{"post_id":"clcim709800014cv95r2c0z9z","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709l000r4cv97dcyfgsf"},{"post_id":"clcim709g000c4cv9220dg1x0","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim709m000w4cv9626rattt"},{"post_id":"clcim709g000c4cv9220dg1x0","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709n000z4cv971gghink"},{"post_id":"clcim709h000h4cv96hiufdl1","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim709n00134cv91u86g3ht"},{"post_id":"clcim709h000h4cv96hiufdl1","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709o00164cv9gsuadoaq"},{"post_id":"clcim709i000k4cv9380d5hgg","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim709o001a4cv9cb2age9i"},{"post_id":"clcim709i000k4cv9380d5hgg","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709p001d4cv91ap20y8x"},{"post_id":"clcim709j000p4cv99pq03kxj","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim709q001h4cv98em4fa5x"},{"post_id":"clcim709j000p4cv99pq03kxj","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709q001k4cv955sn3km8"},{"post_id":"clcim709b00034cv9d6mpfsax","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim709r001o4cv97aolb3qq"},{"post_id":"clcim709b00034cv9d6mpfsax","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim709t001r4cv9cgc26rl7"},{"post_id":"clcim709b00034cv9d6mpfsax","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709t001u4cv94kq2ema2"},{"post_id":"clcim709d00064cv9fyau941a","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim709u001y4cv90oqa2hdl"},{"post_id":"clcim709e00074cv9blal55q9","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim709u00214cv96xob2wlq"},{"post_id":"clcim709e00074cv9blal55q9","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim709v00254cv998eb71ik"},{"post_id":"clcim709e00084cv9b22og9to","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim709v00284cv9eakc7f5t"},{"post_id":"clcim709e00084cv9b22og9to","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim709v002c4cv9her097l7"},{"post_id":"clcim709t001s4cv9gal19bo0","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709w002f4cv956ss96zh"},{"post_id":"clcim709l000s4cv9el430w7p","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim709x002j4cv92crp3psg"},{"post_id":"clcim709l000s4cv9el430w7p","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim709x002m4cv90tl3eyvm"},{"post_id":"clcim709m000x4cv91ynj66yi","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim709y002q4cv9bsnigsry"},{"post_id":"clcim709m000x4cv91ynj66yi","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim709y002t4cv9gyet45w8"},{"post_id":"clcim709v00264cv9bkft9ll9","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709z002x4cv9fe1z2c8z"},{"post_id":"clcim709v002a4cv9cxpq0xqe","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim709z00304cv9ck3rgs12"},{"post_id":"clcim709n00104cv9fp298tiy","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a000344cv99s2tegzd"},{"post_id":"clcim709n00104cv9fp298tiy","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70a100374cv9bycdcxoc"},{"post_id":"clcim709w002h4cv9fvfefnb8","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a1003b4cv9fl6y36hj"},{"post_id":"clcim709w002h4cv9fvfefnb8","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70a2003e4cv91s2t6bpl"},{"post_id":"clcim709o00144cv94g5h1tqu","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a2003i4cv91o66d8j2"},{"post_id":"clcim709o00144cv94g5h1tqu","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70a3003l4cv9agco9xra"},{"post_id":"clcim709x002k4cv925q8c38n","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a3003p4cv91bbbhgxu"},{"post_id":"clcim709x002k4cv925q8c38n","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70a3003s4cv9gjgdgp3b"},{"post_id":"clcim709x002o4cv9an2ae8s6","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a4003w4cv9h286hpv5"},{"post_id":"clcim709x002o4cv9an2ae8s6","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70a4003z4cv9h1p6b3zz"},{"post_id":"clcim709o00174cv972ox0qd2","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a500434cv9awlf8o2f"},{"post_id":"clcim709o00174cv972ox0qd2","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70a500464cv95gake49p"},{"post_id":"clcim709y002r4cv9ccxo7lbb","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70a5004a4cv9h4ys6wti"},{"post_id":"clcim709y002v4cv982fu9gih","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a6004d4cv91rbm0mkj"},{"post_id":"clcim709y002v4cv982fu9gih","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70a6004h4cv9enbc682y"},{"post_id":"clcim709p001b4cv9bw3g5un7","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a7004k4cv9a9xxh102"},{"post_id":"clcim709p001b4cv9bw3g5un7","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70a7004n4cv9e1mxcaec"},{"post_id":"clcim709z002y4cv9e3ee6gth","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a8004q4cv91g20dpi9"},{"post_id":"clcim709z002y4cv9e3ee6gth","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70a8004t4cv9d7yf1df8"},{"post_id":"clcim70a000324cv9fayt33fs","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70a9004w4cv975o2g1ku"},{"post_id":"clcim70a000324cv9fayt33fs","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70aa004z4cv912odho53"},{"post_id":"clcim709p001e4cv9btrjbiwq","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70aa00524cv9cs1hf4tz"},{"post_id":"clcim709p001e4cv9btrjbiwq","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70aa00554cv9gtef0dkn"},{"post_id":"clcim70a000354cv9c21d11rj","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70aa00584cv9gj4n2jlu"},{"post_id":"clcim70a000354cv9c21d11rj","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70ab005b4cv96lpv7117"},{"post_id":"clcim70a100394cv9gfbt3khz","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70ab005e4cv97c9r7335"},{"post_id":"clcim70a100394cv9gfbt3khz","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70ab005h4cv9804b4x62"},{"post_id":"clcim709q001i4cv9e3cz07ie","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70ac005k4cv93a296u4r"},{"post_id":"clcim709q001i4cv9e3cz07ie","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70ac005n4cv9a2zj8r7h"},{"post_id":"clcim70a1003c4cv94l12co17","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70ac005q4cv9g33mb8gn"},{"post_id":"clcim70a1003c4cv94l12co17","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70ad005t4cv91taqe64q"},{"post_id":"clcim70a2003g4cv9bqmz7nnq","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70ae005w4cv9ftyh3ah0"},{"post_id":"clcim70a2003g4cv9bqmz7nnq","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70ae005z4cv9br6rasjj"},{"post_id":"clcim709q001l4cv92ekhb9y8","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70ae00624cv97sfedj3j"},{"post_id":"clcim709q001l4cv92ekhb9y8","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70ae00644cv9bnkl26au"},{"post_id":"clcim70a2003j4cv91g6c4lgk","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70af00664cv99ssl3bwf"},{"post_id":"clcim70a2003j4cv91g6c4lgk","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70af00684cv982ob05t4"},{"post_id":"clcim70a3003n4cv99jkgb0y7","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70af006a4cv9aiywewl3"},{"post_id":"clcim70a3003n4cv99jkgb0y7","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70af006c4cv97kl33dko"},{"post_id":"clcim70a3003q4cv960m72k4g","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70af006e4cv9dgtmeact"},{"post_id":"clcim70a3003q4cv960m72k4g","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70af006f4cv90b3vcwrl"},{"post_id":"clcim709r001p4cv9b10k4gml","tag_id":"clcim70a3003m4cv97kc3fo3i","_id":"clcim70af006g4cv9e0gj5ljh"},{"post_id":"clcim70a3003t4cv92spx36xf","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70af006h4cv9e42adoba"},{"post_id":"clcim70a3003t4cv92spx36xf","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70af006i4cv977me06qi"},{"post_id":"clcim70a4003x4cv9gm2d690n","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70af006j4cv99o0x2tn3"},{"post_id":"clcim70a4003x4cv9gm2d690n","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70af006k4cv9fyng2xk9"},{"post_id":"clcim709t001w4cv967h7foie","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70af006l4cv92io6dyzh"},{"post_id":"clcim709t001w4cv967h7foie","tag_id":"clcim70a4003v4cv9c6ibfapr","_id":"clcim70af006m4cv99rrb1chb"},{"post_id":"clcim70a400404cv9gt2m9wsf","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70af006n4cv9a7kl8i9v"},{"post_id":"clcim70a400404cv9gt2m9wsf","tag_id":"clcim70a4003v4cv9c6ibfapr","_id":"clcim70af006o4cv9hta44qn0"},{"post_id":"clcim70a500444cv9amkmc0yw","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70af006p4cv95t21g32j"},{"post_id":"clcim709u001z4cv9e6b03gy4","tag_id":"clcim70a400424cv9bb3283vu","_id":"clcim70af006q4cv9hyu48oo0"},{"post_id":"clcim70a500474cv94i5b0j26","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70af006r4cv92wpe7hr3"},{"post_id":"clcim70a6004b4cv9hty090mq","tag_id":"clcim70a3003m4cv97kc3fo3i","_id":"clcim70af006s4cv9h2g3b114"},{"post_id":"clcim709u00234cv99wzae1ap","tag_id":"clcim70a400424cv9bb3283vu","_id":"clcim70af006t4cv9ahv62bgy"},{"post_id":"clcim70a6004e4cv95k8i1wz2","tag_id":"clcim70a4003v4cv9c6ibfapr","_id":"clcim70af006u4cv98pr88oan"},{"post_id":"clcim70a6004i4cv95cpufbb6","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ag006v4cv927pq898k"},{"post_id":"clcim709v002d4cv9go82c8um","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ag006w4cv9hoefe8ti"},{"post_id":"clcim709v002d4cv9go82c8um","tag_id":"clcim70a4003v4cv9c6ibfapr","_id":"clcim70ag006x4cv904f76pfe"},{"post_id":"clcim70a7004l4cv95fnv13uy","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70ag006y4cv9e60r85cr"},{"post_id":"clcim70a7004l4cv95fnv13uy","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim70ag006z4cv93uujhvpk"},{"post_id":"clcim70a7004o4cv9a7si7uv7","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ag00704cv9629q4v0z"},{"post_id":"clcim70a8004u4cv98x519wz7","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70ah00714cv90ybxglvg"},{"post_id":"clcim70a8004u4cv98x519wz7","tag_id":"clcim709q001n4cv96qzldhp5","_id":"clcim70ah00724cv91m9k6ofc"},{"post_id":"clcim70a9004x4cv93ohkgnm0","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim70ah00734cv9cupq4use"},{"post_id":"clcim70a9004x4cv93ohkgnm0","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ah00744cv9dv33hhbd"},{"post_id":"clcim70aa00504cv9gjgb3buf","tag_id":"clcim70a400424cv9bb3283vu","_id":"clcim70ah00754cv9ce7mdywb"},{"post_id":"clcim70aa00534cv935u64yku","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ah00764cv934i722q8"},{"post_id":"clcim70aa00564cv974jn030v","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ah00774cv921bg1s0b"},{"post_id":"clcim70ab005c4cv9fu501thc","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ah00784cv94u7i1egm"},{"post_id":"clcim70ab005f4cv9b48lappr","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim70ah00794cv97nzb3jvk"},{"post_id":"clcim70ab005f4cv9b48lappr","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ah007a4cv945dyejwt"},{"post_id":"clcim70ac005l4cv9ehww6t0k","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ah007b4cv9c4r033b9"},{"post_id":"clcim70ac005o4cv90pes9qd7","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ah007c4cv9dhjjg9al"},{"post_id":"clcim70ac005r4cv9etbxhb8x","tag_id":"clcim709d00054cv99a5zbkfk","_id":"clcim70ah007d4cv9hiuw8ktk"},{"post_id":"clcim70ac005r4cv9etbxhb8x","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70ah007e4cv9a6d07gn1"},{"post_id":"clcim70ae005x4cv9dsmo94xy","tag_id":"clcim709h000f4cv91y7u2svp","_id":"clcim70ah007f4cv9dswg8p7o"},{"post_id":"clcim70ae005x4cv9dsmo94xy","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70aj007g4cv90i2y8z53"},{"post_id":"clcim70ae00604cv94lwxelwy","tag_id":"clcim709f000a4cv94q8t1m3y","_id":"clcim70aj007h4cv9e2vvcxgg"},{"post_id":"clcim70al007i4cv93cfc1g97","tag_id":"clcim70al007j4cv91pgidngs","_id":"clcim70am007l4cv9h5xdgpyb"}],"Tag":[{"name":"培训材料/贵州大学商业数据分析","_id":"clcim709d00054cv99a5zbkfk"},{"name":"uncategory","_id":"clcim709f000a4cv94q8t1m3y"},{"name":"public","_id":"clcim709h000f4cv91y7u2svp"},{"name":"培训材料/贵州商学院","_id":"clcim709q001n4cv96qzldhp5"},{"name":"docs","_id":"clcim70a3003m4cv97kc3fo3i"},{"name":"research","_id":"clcim70a4003v4cv9c6ibfapr"},{"name":"学习快照","_id":"clcim70a400424cv9bb3283vu"},{"name":"plans","_id":"clcim70al007j4cv91pgidngs"}]}}